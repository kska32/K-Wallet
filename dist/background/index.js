/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={87757:(e,t,i)=>{e.exports=i(35666)},2190:e=>{e.exports=function(e,i,s){if(e.filter)return e.filter(i,s);if(null==e)throw new TypeError;if("function"!=typeof i)throw new TypeError;for(var r=[],a=0;a<e.length;a++)if(t.call(e,a)){var n=e[a];i.call(s,n,a,e)&&r.push(n)}return r};var t=Object.prototype.hasOwnProperty},39809:(e,t,i)=>{"use strict";const s=t;s.bignum=i(4590),s.define=i(22500).define,s.base=i(71979),s.constants=i(36826),s.decoders=i(78307),s.encoders=i(56579)},22500:(e,t,i)=>{"use strict";const s=i(56579),r=i(78307),a=i(35717);function n(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}t.define=function(e,t){return new n(e,t)},n.prototype._createNamed=function(e){const t=this.name;function i(e){this._initNamed(e,t)}return a(i,e),i.prototype._initNamed=function(t,i){e.call(this,t,i)},new i(this)},n.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(r[e])),this.decoders[e]},n.prototype.decode=function(e,t,i){return this._getDecoder(t).decode(e,i)},n.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(s[e])),this.encoders[e]},n.prototype.encode=function(e,t,i){return this._getEncoder(t).encode(e,i)}},36625:(e,t,i)=>{"use strict";const s=i(35717),r=i(98465).b,a=i(2399).Buffer;function n(e,t){r.call(this,t),a.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function o(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return o.isEncoderBuffer(e)||(e=new o(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=a.byteLength(e);else{if(!a.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}s(n,r),t.C=n,n.isDecoderBuffer=function(e){return e instanceof n||"object"==typeof e&&a.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},n.prototype.save=function(){return{offset:this.offset,reporter:r.prototype.save.call(this)}},n.prototype.restore=function(e){const t=new n(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,r.prototype.restore.call(this,e.reporter),t},n.prototype.isEmpty=function(){return this.offset===this.length},n.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},n.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const i=new n(this.base);return i._reporterState=this._reporterState,i.offset=this.offset,i.length=this.offset+e,this.offset+=e,i},n.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.R=o,o.isEncoderBuffer=function(e){return e instanceof o||"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},o.prototype.join=function(e,t){return e||(e=a.alloc(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(i){i.join(e,t),t+=i.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):a.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}},71979:(e,t,i)=>{"use strict";const s=t;s.Reporter=i(98465).b,s.DecoderBuffer=i(36625).C,s.EncoderBuffer=i(36625).R,s.Node=i(41949)},41949:(e,t,i)=>{"use strict";const s=i(98465).b,r=i(36625).R,a=i(36625).C,n=i(79746),o=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],h=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(o);function c(e,t,i){const s={};this._baseState=s,s.name=i,s.enc=e,s.parent=t||null,s.children=null,s.tag=null,s.args=null,s.reverseArgs=null,s.choice=null,s.optional=!1,s.any=!1,s.obj=!1,s.use=null,s.useDecoder=null,s.key=null,s.default=null,s.explicit=null,s.implicit=null,s.contains=null,s.parent||(s.children=[],this._wrap())}e.exports=c;const d=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){const e=this._baseState,t={};d.forEach((function(i){t[i]=e[i]}));const i=new this.constructor(t.parent);return i._baseState=t,i},c.prototype._wrap=function(){const e=this._baseState;h.forEach((function(t){this[t]=function(){const i=new this.constructor(this);return e.children.push(i),i[t].apply(i,arguments)}}),this)},c.prototype._init=function(e){const t=this._baseState;n(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),n.equal(t.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(e){const t=this._baseState,i=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==i.length&&(n(null===t.children),t.children=i,i.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(n(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach((function(i){i==(0|i)&&(i|=0);const s=e[i];t[s]=i})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){c.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),o.forEach((function(e){c.prototype[e]=function(){const t=this._baseState,i=Array.prototype.slice.call(arguments);return n(null===t.tag),t.tag=e,this._useArgs(i),this}})),c.prototype.use=function(e){n(e);const t=this._baseState;return n(null===t.use),t.use=e,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(e){const t=this._baseState;return n(null===t.default),t.default=e,t.optional=!0,this},c.prototype.explicit=function(e){const t=this._baseState;return n(null===t.explicit&&null===t.implicit),t.explicit=e,this},c.prototype.implicit=function(e){const t=this._baseState;return n(null===t.explicit&&null===t.implicit),t.implicit=e,this},c.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},c.prototype.key=function(e){const t=this._baseState;return n(null===t.key),t.key=e,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(e){const t=this._baseState;return n(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},c.prototype.contains=function(e){const t=this._baseState;return n(null===t.use),t.contains=e,this},c.prototype._decode=function(e,t){const i=this._baseState;if(null===i.parent)return e.wrapResult(i.children[0]._decode(e,t));let s,r=i.default,n=!0,o=null;if(null!==i.key&&(o=e.enterKey(i.key)),i.optional){let s=null;if(null!==i.explicit?s=i.explicit:null!==i.implicit?s=i.implicit:null!==i.tag&&(s=i.tag),null!==s||i.any){if(n=this._peekTag(e,s,i.any),e.isError(n))return n}else{const s=e.save();try{null===i.choice?this._decodeGeneric(i.tag,e,t):this._decodeChoice(e,t),n=!0}catch(e){n=!1}e.restore(s)}}if(i.obj&&n&&(s=e.enterObject()),n){if(null!==i.explicit){const t=this._decodeTag(e,i.explicit);if(e.isError(t))return t;e=t}const s=e.offset;if(null===i.use&&null===i.choice){let t;i.any&&(t=e.save());const s=this._decodeTag(e,null!==i.implicit?i.implicit:i.tag,i.any);if(e.isError(s))return s;i.any?r=e.raw(t):e=s}if(t&&t.track&&null!==i.tag&&t.track(e.path(),s,e.length,"tagged"),t&&t.track&&null!==i.tag&&t.track(e.path(),e.offset,e.length,"content"),i.any||(r=null===i.choice?this._decodeGeneric(i.tag,e,t):this._decodeChoice(e,t)),e.isError(r))return r;if(i.any||null!==i.choice||null===i.children||i.children.forEach((function(i){i._decode(e,t)})),i.contains&&("octstr"===i.tag||"bitstr"===i.tag)){const s=new a(r);r=this._getUse(i.contains,e._reporterState.obj)._decode(s,t)}}return i.obj&&n&&(r=e.leaveObject(s)),null===i.key||null===r&&!0!==n?null!==o&&e.exitKey(o):e.leaveKey(o,i.key,r),r},c.prototype._decodeGeneric=function(e,t,i){const s=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,s.args[0],i):/str$/.test(e)?this._decodeStr(t,e,i):"objid"===e&&s.args?this._decodeObjid(t,s.args[0],s.args[1],i):"objid"===e?this._decodeObjid(t,null,null,i):"gentime"===e||"utctime"===e?this._decodeTime(t,e,i):"null_"===e?this._decodeNull(t,i):"bool"===e?this._decodeBool(t,i):"objDesc"===e?this._decodeStr(t,e,i):"int"===e||"enum"===e?this._decodeInt(t,s.args&&s.args[0],i):null!==s.use?this._getUse(s.use,t._reporterState.obj)._decode(t,i):t.error("unknown tag: "+e)},c.prototype._getUse=function(e,t){const i=this._baseState;return i.useDecoder=this._use(e,t),n(null===i.useDecoder._baseState.parent),i.useDecoder=i.useDecoder._baseState.children[0],i.implicit!==i.useDecoder._baseState.implicit&&(i.useDecoder=i.useDecoder.clone(),i.useDecoder._baseState.implicit=i.implicit),i.useDecoder},c.prototype._decodeChoice=function(e,t){const i=this._baseState;let s=null,r=!1;return Object.keys(i.choice).some((function(a){const n=e.save(),o=i.choice[a];try{const i=o._decode(e,t);if(e.isError(i))return!1;s={type:a,value:i},r=!0}catch(t){return e.restore(n),!1}return!0}),this),r?s:e.error("Choice not matched")},c.prototype._createEncoderBuffer=function(e){return new r(e,this.reporter)},c.prototype._encode=function(e,t,i){const s=this._baseState;if(null!==s.default&&s.default===e)return;const r=this._encodeValue(e,t,i);return void 0===r||this._skipDefault(r,t,i)?void 0:r},c.prototype._encodeValue=function(e,t,i){const r=this._baseState;if(null===r.parent)return r.children[0]._encode(e,t||new s);let a=null;if(this.reporter=t,r.optional&&void 0===e){if(null===r.default)return;e=r.default}let n=null,o=!1;if(r.any)a=this._createEncoderBuffer(e);else if(r.choice)a=this._encodeChoice(e,t);else if(r.contains)n=this._getUse(r.contains,i)._encode(e,t),o=!0;else if(r.children)n=r.children.map((function(i){if("null_"===i._baseState.tag)return i._encode(null,t,e);if(null===i._baseState.key)return t.error("Child should have a key");const s=t.enterKey(i._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const r=i._encode(e[i._baseState.key],t,e);return t.leaveKey(s),r}),this).filter((function(e){return e})),n=this._createEncoderBuffer(n);else if("seqof"===r.tag||"setof"===r.tag){if(!r.args||1!==r.args.length)return t.error("Too many args for : "+r.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const i=this.clone();i._baseState.implicit=null,n=this._createEncoderBuffer(e.map((function(i){const s=this._baseState;return this._getUse(s.args[0],e)._encode(i,t)}),i))}else null!==r.use?a=this._getUse(r.use,i)._encode(e,t):(n=this._encodePrimitive(r.tag,e),o=!0);if(!r.any&&null===r.choice){const e=null!==r.implicit?r.implicit:r.tag,i=null===r.implicit?"universal":"context";null===e?null===r.use&&t.error("Tag could be omitted only for .use()"):null===r.use&&(a=this._encodeComposite(e,o,i,n))}return null!==r.explicit&&(a=this._encodeComposite(r.explicit,!1,"context",a)),a},c.prototype._encodeChoice=function(e,t){const i=this._baseState,s=i.choice[e.type];return s||n(!1,e.type+" not found in "+JSON.stringify(Object.keys(i.choice))),s._encode(e.value,t)},c.prototype._encodePrimitive=function(e,t){const i=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&i.args)return this._encodeObjid(t,i.reverseArgs[0],i.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,i.args&&i.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},c.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},c.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}},98465:(e,t,i)=>{"use strict";const s=i(35717);function r(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function a(e,t){this.path=e,this.rethrow(t)}t.b=r,r.prototype.isError=function(e){return e instanceof a},r.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},r.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},r.prototype.enterKey=function(e){return this._reporterState.path.push(e)},r.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},r.prototype.leaveKey=function(e,t,i){const s=this._reporterState;this.exitKey(e),null!==s.obj&&(s.obj[t]=i)},r.prototype.path=function(){return this._reporterState.path.join("/")},r.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},r.prototype.leaveObject=function(e){const t=this._reporterState,i=t.obj;return t.obj=e,i},r.prototype.error=function(e){let t;const i=this._reporterState,s=e instanceof a;if(t=s?e:new a(i.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!i.options.partial)throw t;return s||i.errors.push(t),t},r.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},s(a,Error),a.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,a),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},70160:(e,t)=>{"use strict";function i(e){const t={};return Object.keys(e).forEach((function(i){(0|i)==i&&(i|=0);const s=e[i];t[s]=i})),t}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=i(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=i(t.tag)},36826:(e,t,i)=>{"use strict";const s=t;s._reverse=function(e){const t={};return Object.keys(e).forEach((function(i){(0|i)==i&&(i|=0);const s=e[i];t[s]=i})),t},s.der=i(70160)},41671:(e,t,i)=>{"use strict";const s=i(35717),r=i(4590),a=i(36625).C,n=i(41949),o=i(70160);function h(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){n.call(this,"der",e)}function d(e,t){let i=e.readUInt8(t);if(e.isError(i))return i;const s=o.tagClass[i>>6],r=0==(32&i);if(31==(31&i)){let s=i;for(i=0;128==(128&s);){if(s=e.readUInt8(t),e.isError(s))return s;i<<=7,i|=127&s}}else i&=31;return{cls:s,primitive:r,tag:i,tagStr:o.tag[i]}}function u(e,t,i){let s=e.readUInt8(i);if(e.isError(s))return s;if(!t&&128===s)return null;if(0==(128&s))return s;const r=127&s;if(r>4)return e.error("length octect is too long");s=0;for(let t=0;t<r;t++){s<<=8;const t=e.readUInt8(i);if(e.isError(t))return t;s|=t}return s}e.exports=h,h.prototype.decode=function(e,t){return a.isDecoderBuffer(e)||(e=new a(e,t)),this.tree._decode(e,t)},s(c,n),c.prototype._peekTag=function(e,t,i){if(e.isEmpty())return!1;const s=e.save(),r=d(e,'Failed to peek tag: "'+t+'"');return e.isError(r)?r:(e.restore(s),r.tag===t||r.tagStr===t||r.tagStr+"of"===t||i)},c.prototype._decodeTag=function(e,t,i){const s=d(e,'Failed to decode tag of "'+t+'"');if(e.isError(s))return s;let r=u(e,s.primitive,'Failed to get length of "'+t+'"');if(e.isError(r))return r;if(!i&&s.tag!==t&&s.tagStr!==t&&s.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(s.primitive||null!==r)return e.skip(r,'Failed to match body of: "'+t+'"');const a=e.save(),n=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(n)?n:(r=e.offset-a.offset,e.restore(a),e.skip(r,'Failed to match body of: "'+t+'"'))},c.prototype._skipUntilEnd=function(e,t){for(;;){const i=d(e,t);if(e.isError(i))return i;const s=u(e,i.primitive,t);if(e.isError(s))return s;let r;if(r=i.primitive||null!==s?e.skip(s):this._skipUntilEnd(e,t),e.isError(r))return r;if("end"===i.tagStr)break}},c.prototype._decodeList=function(e,t,i,s){const r=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const a=i.decode(e,"der",s);if(e.isError(a)&&t)break;r.push(a)}return r},c.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let i="";for(let e=0;e<t.length/2;e++)i+=String.fromCharCode(t.readUInt16BE(2*e));return i}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},c.prototype._decodeObjid=function(e,t,i){let s;const r=[];let a=0,n=0;for(;!e.isEmpty();)n=e.readUInt8(),a<<=7,a|=127&n,0==(128&n)&&(r.push(a),a=0);128&n&&r.push(a);const o=r[0]/40|0,h=r[0]%40;if(s=i?r:[o,h].concat(r.slice(1)),t){let e=t[s.join(" ")];void 0===e&&(e=t[s.join(".")]),void 0!==e&&(s=e)}return s},c.prototype._decodeTime=function(e,t){const i=e.raw().toString();let s,r,a,n,o,h;if("gentime"===t)s=0|i.slice(0,4),r=0|i.slice(4,6),a=0|i.slice(6,8),n=0|i.slice(8,10),o=0|i.slice(10,12),h=0|i.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");s=0|i.slice(0,2),r=0|i.slice(2,4),a=0|i.slice(4,6),n=0|i.slice(6,8),o=0|i.slice(8,10),h=0|i.slice(10,12),s=s<70?2e3+s:1900+s}return Date.UTC(s,r-1,a,n,o,h,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},c.prototype._decodeInt=function(e,t){const i=e.raw();let s=new r(i);return t&&(s=t[s.toString(10)]||s),s},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},78307:(e,t,i)=>{"use strict";const s=t;s.der=i(41671),s.pem=i(59631)},59631:(e,t,i)=>{"use strict";const s=i(35717),r=i(2399).Buffer,a=i(41671);function n(e){a.call(this,e),this.enc="pem"}s(n,a),e.exports=n,n.prototype.decode=function(e,t){const i=e.toString().split(/[\r\n]+/g),s=t.label.toUpperCase(),n=/^-----(BEGIN|END) ([^-]+)-----$/;let o=-1,h=-1;for(let e=0;e<i.length;e++){const t=i[e].match(n);if(null!==t&&t[2]===s){if(-1!==o){if("END"!==t[1])break;h=e;break}if("BEGIN"!==t[1])break;o=e}}if(-1===o||-1===h)throw new Error("PEM section not found for: "+s);const c=i.slice(o+1,h).join("");c.replace(/[^a-z0-9+/=]+/gi,"");const d=r.from(c,"base64");return a.prototype.decode.call(this,d,t)}},66984:(e,t,i)=>{"use strict";const s=i(35717),r=i(2399).Buffer,a=i(41949),n=i(70160);function o(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new h,this.tree._init(e.body)}function h(e){a.call(this,"der",e)}function c(e){return e<10?"0"+e:e}e.exports=o,o.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},s(h,a),h.prototype._encodeComposite=function(e,t,i,s){const a=function(e,t,i,s){let r;if("seqof"===e?e="seq":"setof"===e&&(e="set"),n.tagByName.hasOwnProperty(e))r=n.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return s.error("Unknown tag: "+e);r=e}return r>=31?s.error("Multi-octet tag encoding unsupported"):(t||(r|=32),r|=n.tagClassByName[i||"universal"]<<6,r)}(e,t,i,this.reporter);if(s.length<128){const e=r.alloc(2);return e[0]=a,e[1]=s.length,this._createEncoderBuffer([e,s])}let o=1;for(let e=s.length;e>=256;e>>=8)o++;const h=r.alloc(2+o);h[0]=a,h[1]=128|o;for(let e=1+o,t=s.length;t>0;e--,t>>=8)h[e]=255&t;return this._createEncoderBuffer([h,s])},h.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=r.alloc(2*e.length);for(let i=0;i<e.length;i++)t.writeUInt16BE(e.charCodeAt(i),2*i);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},h.prototype._encodeObjid=function(e,t,i){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!i){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let s=0;for(let t=0;t<e.length;t++){let i=e[t];for(s++;i>=128;i>>=7)s++}const a=r.alloc(s);let n=a.length-1;for(let t=e.length-1;t>=0;t--){let i=e[t];for(a[n--]=127&i;(i>>=7)>0;)a[n--]=128|127&i}return this._createEncoderBuffer(a)},h.prototype._encodeTime=function(e,t){let i;const s=new Date(e);return"gentime"===t?i=[c(s.getUTCFullYear()),c(s.getUTCMonth()+1),c(s.getUTCDate()),c(s.getUTCHours()),c(s.getUTCMinutes()),c(s.getUTCSeconds()),"Z"].join(""):"utctime"===t?i=[c(s.getUTCFullYear()%100),c(s.getUTCMonth()+1),c(s.getUTCDate()),c(s.getUTCHours()),c(s.getUTCMinutes()),c(s.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(i,"octstr")},h.prototype._encodeNull=function(){return this._createEncoderBuffer("")},h.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!r.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=r.from(t)}if(r.isBuffer(e)){let t=e.length;0===e.length&&t++;const i=r.alloc(t);return e.copy(i),0===e.length&&(i[0]=0),this._createEncoderBuffer(i)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let i=1;for(let t=e;t>=256;t>>=8)i++;const s=new Array(i);for(let t=s.length-1;t>=0;t--)s[t]=255&e,e>>=8;return 128&s[0]&&s.unshift(0),this._createEncoderBuffer(r.from(s))},h.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},h.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},h.prototype._skipDefault=function(e,t,i){const s=this._baseState;let r;if(null===s.default)return!1;const a=e.join();if(void 0===s.defaultBuffer&&(s.defaultBuffer=this._encodeValue(s.default,t,i).join()),a.length!==s.defaultBuffer.length)return!1;for(r=0;r<a.length;r++)if(a[r]!==s.defaultBuffer[r])return!1;return!0}},56579:(e,t,i)=>{"use strict";const s=t;s.der=i(66984),s.pem=i(2883)},2883:(e,t,i)=>{"use strict";const s=i(35717),r=i(66984);function a(e){r.call(this,e),this.enc="pem"}s(a,r),e.exports=a,a.prototype.encode=function(e,t){const i=r.prototype.encode.call(this,e).toString("base64"),s=["-----BEGIN "+t.label+"-----"];for(let e=0;e<i.length;e+=64)s.push(i.slice(e,e+64));return s.push("-----END "+t.label+"-----"),s.join("\n")}},4590:function(e,t,i){!function(e,t){"use strict";function s(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function a(e,t,i){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(i=t,t=10),this._init(e||0,t||10,i||"be"))}var n;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(80950).Buffer}catch(e){}function o(e,t){var i=e.charCodeAt(t);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function h(e,t,i){var s=o(e,i);return i-1>=t&&(s|=o(e,i-1)<<4),s}function c(e,t,i,s){for(var r=0,a=Math.min(e.length,i),n=t;n<a;n++){var o=e.charCodeAt(n)-48;r*=s,r+=o>=49?o-49+10:o>=17?o-17+10:o}return r}a.isBN=function(e){return e instanceof a||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),s(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<e.length&&(16===t?this._parseHex(e,r,i):(this._parseBase(e,t,r),"le"===i&&this._initArray(this.toArray(),t,i)))},a.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(s(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},a.prototype._initArray=function(e,t,i){if(s("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var a,n,o=0;if("be"===i)for(r=e.length-1,a=0;r>=0;r-=3)n=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===i)for(r=0,a=0;r<e.length;r+=3)n=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this.strip()},a.prototype._parseHex=function(e,t,i){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var r,a=0,n=0;if("be"===i)for(s=e.length-1;s>=t;s-=2)r=h(e,t,s)<<a,this.words[n]|=67108863&r,a>=18?(a-=18,n+=1,this.words[n]|=r>>>26):a+=8;else for(s=(e.length-t)%2==0?t+1:t;s<e.length;s+=2)r=h(e,t,s)<<a,this.words[n]|=67108863&r,a>=18?(a-=18,n+=1,this.words[n]|=r>>>26):a+=8;this.strip()},a.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var s=0,r=1;r<=67108863;r*=t)s++;s--,r=r/t|0;for(var a=e.length-i,n=a%s,o=Math.min(a,a-n)+i,h=0,d=i;d<o;d+=s)h=c(e,d,d+s,t),this.imuln(r),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==n){var u=1;for(h=c(e,d,e.length,t),d=0;d<n;d++)u*=t;this.imuln(u),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,i){i.negative=t.negative^e.negative;var s=e.length+t.length|0;i.length=s,s=s-1|0;var r=0|e.words[0],a=0|t.words[0],n=r*a,o=67108863&n,h=n/67108864|0;i.words[0]=o;for(var c=1;c<s;c++){for(var d=h>>>26,u=67108863&h,l=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=l;f++){var p=c-f|0;d+=(n=(r=0|e.words[p])*(a=0|t.words[f])+u)/67108864|0,u=67108863&n}i.words[c]=0|u,h=0|d}return 0!==h?i.words[c]=0|h:i.length--,i.strip()}a.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var r=0,a=0,n=0;n<this.length;n++){var o=this.words[n],h=(16777215&(o<<r|a)).toString(16);i=0!=(a=o>>>24-r&16777215)||n!==this.length-1?d[6-h.length]+h+i:h+i,(r+=2)>=26&&(r-=26,n--)}for(0!==a&&(i=a.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var c=u[e],f=l[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);i=(p=p.idivn(f)).isZero()?m+i:d[c-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}s(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return s(void 0!==n),this.toArrayLike(n,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,i){var r=this.byteLength(),a=i||Math.max(1,r);s(r<=a,"byte array longer than desired length"),s(a>0,"Requested array length <= 0"),this.strip();var n,o,h="le"===t,c=new e(a),d=this.clone();if(h){for(o=0;!d.isZero();o++)n=d.andln(255),d.iushrn(8),c[o]=n;for(;o<a;o++)c[o]=0}else{for(o=0;o<a-r;o++)c[o]=0;for(o=0;!d.isZero();o++)n=d.andln(255),d.iushrn(8),c[a-o-1]=n}return c},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,i=0;return 0==(8191&t)&&(i+=13,t>>>=13),0==(127&t)&&(i+=7,t>>>=7),0==(15&t)&&(i+=4,t>>>=4),0==(3&t)&&(i+=2,t>>>=2),0==(1&t)&&i++,i},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var i=this._zeroBits(this.words[t]);if(e+=i,26!==i)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},a.prototype.ior=function(e){return s(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]&e.words[i];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return s(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,i;this.length>e.length?(t=this,i=e):(t=e,i=this);for(var s=0;s<i.length;s++)this.words[s]=t.words[s]^i.words[s];if(this!==t)for(;s<t.length;s++)this.words[s]=t.words[s];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return s(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){s("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){s("number"==typeof e&&e>=0);var i=e/26|0,r=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},a.prototype.iadd=function(e){var t,i,s;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(i=this,s=e):(i=e,s=this);for(var r=0,a=0;a<s.length;a++)t=(0|i.words[a])+(0|s.words[a])+r,this.words[a]=67108863&t,r=t>>>26;for(;0!==r&&a<i.length;a++)t=(0|i.words[a])+r,this.words[a]=67108863&t,r=t>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i,s,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,s=e):(i=e,s=this);for(var a=0,n=0;n<s.length;n++)a=(t=(0|i.words[n])-(0|s.words[n])+a)>>26,this.words[n]=67108863&t;for(;0!==a&&n<i.length;n++)a=(t=(0|i.words[n])+a)>>26,this.words[n]=67108863&t;if(0===a&&n<i.length&&i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this.length=Math.max(this.length,n),i!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,i){var s,r,a,n=e.words,o=t.words,h=i.words,c=0,d=0|n[0],u=8191&d,l=d>>>13,f=0|n[1],p=8191&f,m=f>>>13,g=0|n[2],y=8191&g,b=g>>>13,v=0|n[3],w=8191&v,k=v>>>13,_=0|n[4],S=8191&_,O=_>>>13,M=0|n[5],T=8191&M,x=M>>>13,I=0|n[6],A=8191&I,C=I>>>13,N=0|n[7],E=8191&N,P=N>>>13,B=0|n[8],R=8191&B,V=B>>>13,L=0|n[9],D=8191&L,q=L>>>13,G=0|o[0],F=8191&G,j=G>>>13,U=0|o[1],H=8191&U,z=U>>>13,K=0|o[2],W=8191&K,X=K>>>13,Z=0|o[3],Y=8191&Z,Q=Z>>>13,J=0|o[4],$=8191&J,ee=J>>>13,te=0|o[5],ie=8191&te,se=te>>>13,re=0|o[6],ae=8191&re,ne=re>>>13,oe=0|o[7],he=8191&oe,ce=oe>>>13,de=0|o[8],ue=8191&de,le=de>>>13,fe=0|o[9],pe=8191&fe,me=fe>>>13;i.negative=e.negative^t.negative,i.length=19;var ge=(c+(s=Math.imul(u,F))|0)+((8191&(r=(r=Math.imul(u,j))+Math.imul(l,F)|0))<<13)|0;c=((a=Math.imul(l,j))+(r>>>13)|0)+(ge>>>26)|0,ge&=67108863,s=Math.imul(p,F),r=(r=Math.imul(p,j))+Math.imul(m,F)|0,a=Math.imul(m,j);var ye=(c+(s=s+Math.imul(u,H)|0)|0)+((8191&(r=(r=r+Math.imul(u,z)|0)+Math.imul(l,H)|0))<<13)|0;c=((a=a+Math.imul(l,z)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,s=Math.imul(y,F),r=(r=Math.imul(y,j))+Math.imul(b,F)|0,a=Math.imul(b,j),s=s+Math.imul(p,H)|0,r=(r=r+Math.imul(p,z)|0)+Math.imul(m,H)|0,a=a+Math.imul(m,z)|0;var be=(c+(s=s+Math.imul(u,W)|0)|0)+((8191&(r=(r=r+Math.imul(u,X)|0)+Math.imul(l,W)|0))<<13)|0;c=((a=a+Math.imul(l,X)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,s=Math.imul(w,F),r=(r=Math.imul(w,j))+Math.imul(k,F)|0,a=Math.imul(k,j),s=s+Math.imul(y,H)|0,r=(r=r+Math.imul(y,z)|0)+Math.imul(b,H)|0,a=a+Math.imul(b,z)|0,s=s+Math.imul(p,W)|0,r=(r=r+Math.imul(p,X)|0)+Math.imul(m,W)|0,a=a+Math.imul(m,X)|0;var ve=(c+(s=s+Math.imul(u,Y)|0)|0)+((8191&(r=(r=r+Math.imul(u,Q)|0)+Math.imul(l,Y)|0))<<13)|0;c=((a=a+Math.imul(l,Q)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,s=Math.imul(S,F),r=(r=Math.imul(S,j))+Math.imul(O,F)|0,a=Math.imul(O,j),s=s+Math.imul(w,H)|0,r=(r=r+Math.imul(w,z)|0)+Math.imul(k,H)|0,a=a+Math.imul(k,z)|0,s=s+Math.imul(y,W)|0,r=(r=r+Math.imul(y,X)|0)+Math.imul(b,W)|0,a=a+Math.imul(b,X)|0,s=s+Math.imul(p,Y)|0,r=(r=r+Math.imul(p,Q)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,Q)|0;var we=(c+(s=s+Math.imul(u,$)|0)|0)+((8191&(r=(r=r+Math.imul(u,ee)|0)+Math.imul(l,$)|0))<<13)|0;c=((a=a+Math.imul(l,ee)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,s=Math.imul(T,F),r=(r=Math.imul(T,j))+Math.imul(x,F)|0,a=Math.imul(x,j),s=s+Math.imul(S,H)|0,r=(r=r+Math.imul(S,z)|0)+Math.imul(O,H)|0,a=a+Math.imul(O,z)|0,s=s+Math.imul(w,W)|0,r=(r=r+Math.imul(w,X)|0)+Math.imul(k,W)|0,a=a+Math.imul(k,X)|0,s=s+Math.imul(y,Y)|0,r=(r=r+Math.imul(y,Q)|0)+Math.imul(b,Y)|0,a=a+Math.imul(b,Q)|0,s=s+Math.imul(p,$)|0,r=(r=r+Math.imul(p,ee)|0)+Math.imul(m,$)|0,a=a+Math.imul(m,ee)|0;var ke=(c+(s=s+Math.imul(u,ie)|0)|0)+((8191&(r=(r=r+Math.imul(u,se)|0)+Math.imul(l,ie)|0))<<13)|0;c=((a=a+Math.imul(l,se)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,s=Math.imul(A,F),r=(r=Math.imul(A,j))+Math.imul(C,F)|0,a=Math.imul(C,j),s=s+Math.imul(T,H)|0,r=(r=r+Math.imul(T,z)|0)+Math.imul(x,H)|0,a=a+Math.imul(x,z)|0,s=s+Math.imul(S,W)|0,r=(r=r+Math.imul(S,X)|0)+Math.imul(O,W)|0,a=a+Math.imul(O,X)|0,s=s+Math.imul(w,Y)|0,r=(r=r+Math.imul(w,Q)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,Q)|0,s=s+Math.imul(y,$)|0,r=(r=r+Math.imul(y,ee)|0)+Math.imul(b,$)|0,a=a+Math.imul(b,ee)|0,s=s+Math.imul(p,ie)|0,r=(r=r+Math.imul(p,se)|0)+Math.imul(m,ie)|0,a=a+Math.imul(m,se)|0;var _e=(c+(s=s+Math.imul(u,ae)|0)|0)+((8191&(r=(r=r+Math.imul(u,ne)|0)+Math.imul(l,ae)|0))<<13)|0;c=((a=a+Math.imul(l,ne)|0)+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,s=Math.imul(E,F),r=(r=Math.imul(E,j))+Math.imul(P,F)|0,a=Math.imul(P,j),s=s+Math.imul(A,H)|0,r=(r=r+Math.imul(A,z)|0)+Math.imul(C,H)|0,a=a+Math.imul(C,z)|0,s=s+Math.imul(T,W)|0,r=(r=r+Math.imul(T,X)|0)+Math.imul(x,W)|0,a=a+Math.imul(x,X)|0,s=s+Math.imul(S,Y)|0,r=(r=r+Math.imul(S,Q)|0)+Math.imul(O,Y)|0,a=a+Math.imul(O,Q)|0,s=s+Math.imul(w,$)|0,r=(r=r+Math.imul(w,ee)|0)+Math.imul(k,$)|0,a=a+Math.imul(k,ee)|0,s=s+Math.imul(y,ie)|0,r=(r=r+Math.imul(y,se)|0)+Math.imul(b,ie)|0,a=a+Math.imul(b,se)|0,s=s+Math.imul(p,ae)|0,r=(r=r+Math.imul(p,ne)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,ne)|0;var Se=(c+(s=s+Math.imul(u,he)|0)|0)+((8191&(r=(r=r+Math.imul(u,ce)|0)+Math.imul(l,he)|0))<<13)|0;c=((a=a+Math.imul(l,ce)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,s=Math.imul(R,F),r=(r=Math.imul(R,j))+Math.imul(V,F)|0,a=Math.imul(V,j),s=s+Math.imul(E,H)|0,r=(r=r+Math.imul(E,z)|0)+Math.imul(P,H)|0,a=a+Math.imul(P,z)|0,s=s+Math.imul(A,W)|0,r=(r=r+Math.imul(A,X)|0)+Math.imul(C,W)|0,a=a+Math.imul(C,X)|0,s=s+Math.imul(T,Y)|0,r=(r=r+Math.imul(T,Q)|0)+Math.imul(x,Y)|0,a=a+Math.imul(x,Q)|0,s=s+Math.imul(S,$)|0,r=(r=r+Math.imul(S,ee)|0)+Math.imul(O,$)|0,a=a+Math.imul(O,ee)|0,s=s+Math.imul(w,ie)|0,r=(r=r+Math.imul(w,se)|0)+Math.imul(k,ie)|0,a=a+Math.imul(k,se)|0,s=s+Math.imul(y,ae)|0,r=(r=r+Math.imul(y,ne)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,ne)|0,s=s+Math.imul(p,he)|0,r=(r=r+Math.imul(p,ce)|0)+Math.imul(m,he)|0,a=a+Math.imul(m,ce)|0;var Oe=(c+(s=s+Math.imul(u,ue)|0)|0)+((8191&(r=(r=r+Math.imul(u,le)|0)+Math.imul(l,ue)|0))<<13)|0;c=((a=a+Math.imul(l,le)|0)+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,s=Math.imul(D,F),r=(r=Math.imul(D,j))+Math.imul(q,F)|0,a=Math.imul(q,j),s=s+Math.imul(R,H)|0,r=(r=r+Math.imul(R,z)|0)+Math.imul(V,H)|0,a=a+Math.imul(V,z)|0,s=s+Math.imul(E,W)|0,r=(r=r+Math.imul(E,X)|0)+Math.imul(P,W)|0,a=a+Math.imul(P,X)|0,s=s+Math.imul(A,Y)|0,r=(r=r+Math.imul(A,Q)|0)+Math.imul(C,Y)|0,a=a+Math.imul(C,Q)|0,s=s+Math.imul(T,$)|0,r=(r=r+Math.imul(T,ee)|0)+Math.imul(x,$)|0,a=a+Math.imul(x,ee)|0,s=s+Math.imul(S,ie)|0,r=(r=r+Math.imul(S,se)|0)+Math.imul(O,ie)|0,a=a+Math.imul(O,se)|0,s=s+Math.imul(w,ae)|0,r=(r=r+Math.imul(w,ne)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,ne)|0,s=s+Math.imul(y,he)|0,r=(r=r+Math.imul(y,ce)|0)+Math.imul(b,he)|0,a=a+Math.imul(b,ce)|0,s=s+Math.imul(p,ue)|0,r=(r=r+Math.imul(p,le)|0)+Math.imul(m,ue)|0,a=a+Math.imul(m,le)|0;var Me=(c+(s=s+Math.imul(u,pe)|0)|0)+((8191&(r=(r=r+Math.imul(u,me)|0)+Math.imul(l,pe)|0))<<13)|0;c=((a=a+Math.imul(l,me)|0)+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,s=Math.imul(D,H),r=(r=Math.imul(D,z))+Math.imul(q,H)|0,a=Math.imul(q,z),s=s+Math.imul(R,W)|0,r=(r=r+Math.imul(R,X)|0)+Math.imul(V,W)|0,a=a+Math.imul(V,X)|0,s=s+Math.imul(E,Y)|0,r=(r=r+Math.imul(E,Q)|0)+Math.imul(P,Y)|0,a=a+Math.imul(P,Q)|0,s=s+Math.imul(A,$)|0,r=(r=r+Math.imul(A,ee)|0)+Math.imul(C,$)|0,a=a+Math.imul(C,ee)|0,s=s+Math.imul(T,ie)|0,r=(r=r+Math.imul(T,se)|0)+Math.imul(x,ie)|0,a=a+Math.imul(x,se)|0,s=s+Math.imul(S,ae)|0,r=(r=r+Math.imul(S,ne)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,ne)|0,s=s+Math.imul(w,he)|0,r=(r=r+Math.imul(w,ce)|0)+Math.imul(k,he)|0,a=a+Math.imul(k,ce)|0,s=s+Math.imul(y,ue)|0,r=(r=r+Math.imul(y,le)|0)+Math.imul(b,ue)|0,a=a+Math.imul(b,le)|0;var Te=(c+(s=s+Math.imul(p,pe)|0)|0)+((8191&(r=(r=r+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,s=Math.imul(D,W),r=(r=Math.imul(D,X))+Math.imul(q,W)|0,a=Math.imul(q,X),s=s+Math.imul(R,Y)|0,r=(r=r+Math.imul(R,Q)|0)+Math.imul(V,Y)|0,a=a+Math.imul(V,Q)|0,s=s+Math.imul(E,$)|0,r=(r=r+Math.imul(E,ee)|0)+Math.imul(P,$)|0,a=a+Math.imul(P,ee)|0,s=s+Math.imul(A,ie)|0,r=(r=r+Math.imul(A,se)|0)+Math.imul(C,ie)|0,a=a+Math.imul(C,se)|0,s=s+Math.imul(T,ae)|0,r=(r=r+Math.imul(T,ne)|0)+Math.imul(x,ae)|0,a=a+Math.imul(x,ne)|0,s=s+Math.imul(S,he)|0,r=(r=r+Math.imul(S,ce)|0)+Math.imul(O,he)|0,a=a+Math.imul(O,ce)|0,s=s+Math.imul(w,ue)|0,r=(r=r+Math.imul(w,le)|0)+Math.imul(k,ue)|0,a=a+Math.imul(k,le)|0;var xe=(c+(s=s+Math.imul(y,pe)|0)|0)+((8191&(r=(r=r+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;c=((a=a+Math.imul(b,me)|0)+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,s=Math.imul(D,Y),r=(r=Math.imul(D,Q))+Math.imul(q,Y)|0,a=Math.imul(q,Q),s=s+Math.imul(R,$)|0,r=(r=r+Math.imul(R,ee)|0)+Math.imul(V,$)|0,a=a+Math.imul(V,ee)|0,s=s+Math.imul(E,ie)|0,r=(r=r+Math.imul(E,se)|0)+Math.imul(P,ie)|0,a=a+Math.imul(P,se)|0,s=s+Math.imul(A,ae)|0,r=(r=r+Math.imul(A,ne)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,ne)|0,s=s+Math.imul(T,he)|0,r=(r=r+Math.imul(T,ce)|0)+Math.imul(x,he)|0,a=a+Math.imul(x,ce)|0,s=s+Math.imul(S,ue)|0,r=(r=r+Math.imul(S,le)|0)+Math.imul(O,ue)|0,a=a+Math.imul(O,le)|0;var Ie=(c+(s=s+Math.imul(w,pe)|0)|0)+((8191&(r=(r=r+Math.imul(w,me)|0)+Math.imul(k,pe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,s=Math.imul(D,$),r=(r=Math.imul(D,ee))+Math.imul(q,$)|0,a=Math.imul(q,ee),s=s+Math.imul(R,ie)|0,r=(r=r+Math.imul(R,se)|0)+Math.imul(V,ie)|0,a=a+Math.imul(V,se)|0,s=s+Math.imul(E,ae)|0,r=(r=r+Math.imul(E,ne)|0)+Math.imul(P,ae)|0,a=a+Math.imul(P,ne)|0,s=s+Math.imul(A,he)|0,r=(r=r+Math.imul(A,ce)|0)+Math.imul(C,he)|0,a=a+Math.imul(C,ce)|0,s=s+Math.imul(T,ue)|0,r=(r=r+Math.imul(T,le)|0)+Math.imul(x,ue)|0,a=a+Math.imul(x,le)|0;var Ae=(c+(s=s+Math.imul(S,pe)|0)|0)+((8191&(r=(r=r+Math.imul(S,me)|0)+Math.imul(O,pe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,s=Math.imul(D,ie),r=(r=Math.imul(D,se))+Math.imul(q,ie)|0,a=Math.imul(q,se),s=s+Math.imul(R,ae)|0,r=(r=r+Math.imul(R,ne)|0)+Math.imul(V,ae)|0,a=a+Math.imul(V,ne)|0,s=s+Math.imul(E,he)|0,r=(r=r+Math.imul(E,ce)|0)+Math.imul(P,he)|0,a=a+Math.imul(P,ce)|0,s=s+Math.imul(A,ue)|0,r=(r=r+Math.imul(A,le)|0)+Math.imul(C,ue)|0,a=a+Math.imul(C,le)|0;var Ce=(c+(s=s+Math.imul(T,pe)|0)|0)+((8191&(r=(r=r+Math.imul(T,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((a=a+Math.imul(x,me)|0)+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,s=Math.imul(D,ae),r=(r=Math.imul(D,ne))+Math.imul(q,ae)|0,a=Math.imul(q,ne),s=s+Math.imul(R,he)|0,r=(r=r+Math.imul(R,ce)|0)+Math.imul(V,he)|0,a=a+Math.imul(V,ce)|0,s=s+Math.imul(E,ue)|0,r=(r=r+Math.imul(E,le)|0)+Math.imul(P,ue)|0,a=a+Math.imul(P,le)|0;var Ne=(c+(s=s+Math.imul(A,pe)|0)|0)+((8191&(r=(r=r+Math.imul(A,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((a=a+Math.imul(C,me)|0)+(r>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,s=Math.imul(D,he),r=(r=Math.imul(D,ce))+Math.imul(q,he)|0,a=Math.imul(q,ce),s=s+Math.imul(R,ue)|0,r=(r=r+Math.imul(R,le)|0)+Math.imul(V,ue)|0,a=a+Math.imul(V,le)|0;var Ee=(c+(s=s+Math.imul(E,pe)|0)|0)+((8191&(r=(r=r+Math.imul(E,me)|0)+Math.imul(P,pe)|0))<<13)|0;c=((a=a+Math.imul(P,me)|0)+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,s=Math.imul(D,ue),r=(r=Math.imul(D,le))+Math.imul(q,ue)|0,a=Math.imul(q,le);var Pe=(c+(s=s+Math.imul(R,pe)|0)|0)+((8191&(r=(r=r+Math.imul(R,me)|0)+Math.imul(V,pe)|0))<<13)|0;c=((a=a+Math.imul(V,me)|0)+(r>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Be=(c+(s=Math.imul(D,pe))|0)+((8191&(r=(r=Math.imul(D,me))+Math.imul(q,pe)|0))<<13)|0;return c=((a=Math.imul(q,me))+(r>>>13)|0)+(Be>>>26)|0,Be&=67108863,h[0]=ge,h[1]=ye,h[2]=be,h[3]=ve,h[4]=we,h[5]=ke,h[6]=_e,h[7]=Se,h[8]=Oe,h[9]=Me,h[10]=Te,h[11]=xe,h[12]=Ie,h[13]=Ae,h[14]=Ce,h[15]=Ne,h[16]=Ee,h[17]=Pe,h[18]=Be,0!==c&&(h[19]=c,i.length++),i};function m(e,t,i){return(new g).mulp(e,t,i)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=f),a.prototype.mulTo=function(e,t){var i=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):i<63?f(this,e,t):i<1024?function(e,t,i){i.negative=t.negative^e.negative,i.length=e.length+t.length;for(var s=0,r=0,a=0;a<i.length-1;a++){var n=r;r=0;for(var o=67108863&s,h=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=h;c++){var d=a-c,u=(0|e.words[d])*(0|t.words[c]),l=67108863&u;o=67108863&(l=l+o|0),r+=(n=(n=n+(u/67108864|0)|0)+(l>>>26)|0)>>>26,n&=67108863}i.words[a]=o,s=n,n=r}return 0!==s?i.words[a]=s:i.length--,i.strip()}(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),i=a.prototype._countBits(e)-1,s=0;s<e;s++)t[s]=this.revBin(s,i,e);return t},g.prototype.revBin=function(e,t,i){if(0===e||e===i-1)return e;for(var s=0,r=0;r<t;r++)s|=(1&e)<<t-r-1,e>>=1;return s},g.prototype.permute=function(e,t,i,s,r,a){for(var n=0;n<a;n++)s[n]=t[e[n]],r[n]=i[e[n]]},g.prototype.transform=function(e,t,i,s,r,a){this.permute(a,e,t,i,s,r);for(var n=1;n<r;n<<=1)for(var o=n<<1,h=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),d=0;d<r;d+=o)for(var u=h,l=c,f=0;f<n;f++){var p=i[d+f],m=s[d+f],g=i[d+f+n],y=s[d+f+n],b=u*g-l*y;y=u*y+l*g,g=b,i[d+f]=p+g,s[d+f]=m+y,i[d+f+n]=p-g,s[d+f+n]=m-y,f!==o&&(b=h*u-c*l,l=h*l+c*u,u=b)}},g.prototype.guessLen13b=function(e,t){var i=1|Math.max(t,e),s=1&i,r=0;for(i=i/2|0;i;i>>>=1)r++;return 1<<r+1+s},g.prototype.conjugate=function(e,t,i){if(!(i<=1))for(var s=0;s<i/2;s++){var r=e[s];e[s]=e[i-s-1],e[i-s-1]=r,r=t[s],t[s]=-t[i-s-1],t[i-s-1]=-r}},g.prototype.normalize13b=function(e,t){for(var i=0,s=0;s<t/2;s++){var r=8192*Math.round(e[2*s+1]/t)+Math.round(e[2*s]/t)+i;e[s]=67108863&r,i=r<67108864?0:r/67108864|0}return e},g.prototype.convert13b=function(e,t,i,r){for(var a=0,n=0;n<t;n++)a+=0|e[n],i[2*n]=8191&a,a>>>=13,i[2*n+1]=8191&a,a>>>=13;for(n=2*t;n<r;++n)i[n]=0;s(0===a),s(0==(-8192&a))},g.prototype.stub=function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=0;return t},g.prototype.mulp=function(e,t,i){var s=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(s),a=this.stub(s),n=new Array(s),o=new Array(s),h=new Array(s),c=new Array(s),d=new Array(s),u=new Array(s),l=i.words;l.length=s,this.convert13b(e.words,e.length,n,s),this.convert13b(t.words,t.length,c,s),this.transform(n,a,o,h,s,r),this.transform(c,a,d,u,s,r);for(var f=0;f<s;f++){var p=o[f]*d[f]-h[f]*u[f];h[f]=o[f]*u[f]+h[f]*d[f],o[f]=p}return this.conjugate(o,h,s),this.transform(o,h,l,a,s,r),this.conjugate(l,a,s),this.normalize13b(l,s),i.negative=e.negative^t.negative,i.length=e.length+t.length,i.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),m(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){s("number"==typeof e),s(e<67108864);for(var t=0,i=0;i<this.length;i++){var r=(0|this.words[i])*e,a=(67108863&r)+(67108863&t);t>>=26,t+=r/67108864|0,t+=a>>>26,this.words[i]=67108863&a}return 0!==t&&(this.words[i]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),i=0;i<t.length;i++){var s=i/26|0,r=i%26;t[i]=(e.words[s]&1<<r)>>>r}return t}(e);if(0===t.length)return new a(1);for(var i=this,s=0;s<t.length&&0===t[s];s++,i=i.sqr());if(++s<t.length)for(var r=i.sqr();s<t.length;s++,r=r.sqr())0!==t[s]&&(i=i.mul(r));return i},a.prototype.iushln=function(e){s("number"==typeof e&&e>=0);var t,i=e%26,r=(e-i)/26,a=67108863>>>26-i<<26-i;if(0!==i){var n=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,h=(0|this.words[t])-o<<i;this.words[t]=h|n,n=o>>>26-i}n&&(this.words[t]=n,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this.strip()},a.prototype.ishln=function(e){return s(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,i){var r;s("number"==typeof e&&e>=0),r=t?(t-t%26)/26:0;var a=e%26,n=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,h=i;if(r-=n,r=Math.max(0,r),h){for(var c=0;c<n;c++)h.words[c]=this.words[c];h.length=n}if(0===n);else if(this.length>n)for(this.length-=n,c=0;c<this.length;c++)this.words[c]=this.words[c+n];else this.words[0]=0,this.length=1;var d=0;for(c=this.length-1;c>=0&&(0!==d||c>=r);c--){var u=0|this.words[c];this.words[c]=d<<26-a|u>>>a,d=u&o}return h&&0!==d&&(h.words[h.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,i){return s(0===this.negative),this.iushrn(e,t,i)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,r=1<<t;return!(this.length<=i||!(this.words[i]&r))},a.prototype.imaskn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this.strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return s("number"==typeof e),s(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(s("number"==typeof e),s(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,i){var r,a,n=e.length+i;this._expand(n);var o=0;for(r=0;r<e.length;r++){a=(0|this.words[r+i])+o;var h=(0|e.words[r])*t;o=((a-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&a}for(;r<this.length-i;r++)o=(a=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&a;if(0===o)return this.strip();for(s(-1===o),o=0,r=0;r<this.length;r++)o=(a=-(0|this.words[r])+o)>>26,this.words[r]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var i=(this.length,e.length),s=this.clone(),r=e,n=0|r.words[r.length-1];0!=(i=26-this._countBits(n))&&(r=r.ushln(i),s.iushln(i),n=0|r.words[r.length-1]);var o,h=s.length-r.length;if("mod"!==t){(o=new a(null)).length=h+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var d=s.clone()._ishlnsubmul(r,1,h);0===d.negative&&(s=d,o&&(o.words[h]=1));for(var u=h-1;u>=0;u--){var l=67108864*(0|s.words[r.length+u])+(0|s.words[r.length+u-1]);for(l=Math.min(l/n|0,67108863),s._ishlnsubmul(r,l,u);0!==s.negative;)l--,s.negative=0,s._ishlnsubmul(r,1,u),s.isZero()||(s.negative^=1);o&&(o.words[u]=l)}return o&&o.strip(),s.strip(),"div"!==t&&0!==i&&s.iushrn(i),{div:o||null,mod:s}},a.prototype.divmod=function(e,t,i){return s(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(r=o.div.neg()),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.iadd(e)),{div:r,mod:n}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.isub(e)),{div:o.div,mod:n}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t);var r,n,o},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var i=0!==t.div.negative?t.mod.isub(e):t.mod,s=e.ushrn(1),r=e.andln(1),a=i.cmp(s);return a<0||1===r&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modn=function(e){s(e<=67108863);for(var t=(1<<26)%e,i=0,r=this.length-1;r>=0;r--)i=(t*i+(0|this.words[r]))%e;return i},a.prototype.idivn=function(e){s(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*t;this.words[i]=r/e|0,t=r%e}return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new a(1),n=new a(0),o=new a(0),h=new a(1),c=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++c;for(var d=i.clone(),u=t.clone();!t.isZero();){for(var l=0,f=1;0==(t.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(d),n.isub(u)),r.iushrn(1),n.iushrn(1);for(var p=0,m=1;0==(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(d),h.isub(u)),o.iushrn(1),h.iushrn(1);t.cmp(i)>=0?(t.isub(i),r.isub(o),n.isub(h)):(i.isub(t),o.isub(r),h.isub(n))}return{a:o,b:h,gcd:i.iushln(c)}},a.prototype._invmp=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,n=new a(1),o=new a(0),h=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,d=1;0==(t.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(t.iushrn(c);c-- >0;)n.isOdd()&&n.iadd(h),n.iushrn(1);for(var u=0,l=1;0==(i.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(i.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);t.cmp(i)>=0?(t.isub(i),n.isub(o)):(i.isub(t),o.isub(n))}return(r=0===t.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(e),r},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),i=e.clone();t.negative=0,i.negative=0;for(var s=0;t.isEven()&&i.isEven();s++)t.iushrn(1),i.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=t.cmp(i);if(r<0){var a=t;t=i,i=a}else if(0===r||0===i.cmpn(1))break;t.isub(i)}return i.iushln(s)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){s("number"==typeof e);var t=e%26,i=(e-t)/26,r=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var a=r,n=i;0!==a&&n<this.length;n++){var o=0|this.words[n];a=(o+=a)>>>26,o&=67108863,this.words[n]=o}return 0!==a&&(this.words[n]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),s(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,i=this.length-1;i>=0;i--){var s=0|this.words[i],r=0|e.words[i];if(s!==r){s<r?t=-1:s>r&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new S(e)},a.prototype.toRed=function(e){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return s(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return s(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else s(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function O(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,i=e;do{this.split(i,this.tmp),t=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(t>this.n);var s=t<this.n?-1:i.ucmp(this.p);return 0===s?(i.words[0]=0,i.length=1):s>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},r(v,b),v.prototype.split=function(e,t){for(var i=4194303,s=Math.min(e.length,9),r=0;r<s;r++)t.words[r]=e.words[r];if(t.length=s,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&i,r=10;r<e.length;r++){var n=0|e.words[r];e.words[r-10]=(n&i)<<4|a>>>22,a=n}a>>>=22,e.words[r-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,i=0;i<e.length;i++){var s=0|e.words[i];t+=977*s,e.words[i]=67108863&t,t=64*s+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(w,b),r(k,b),r(_,b),_.prototype.imulK=function(e){for(var t=0,i=0;i<e.length;i++){var s=19*(0|e.words[i])+t,r=67108863&s;s>>>=26,e.words[i]=r,t=s}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new w;else if("p192"===e)t=new k;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return y[e]=t,t},S.prototype._verify1=function(e){s(0===e.negative,"red works only with positives"),s(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){s(0==(e.negative|t.negative),"red works only with positives"),s(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var i=e.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var i=e.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i},S.prototype.sub=function(e,t){this._verify2(e,t);var i=e.sub(t);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var i=e.isub(t);return i.cmpn(0)<0&&i.iadd(this.m),i},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(s(t%2==1),3===t){var i=this.m.add(new a(1)).iushrn(2);return this.pow(e,i)}for(var r=this.m.subn(1),n=0;!r.isZero()&&0===r.andln(1);)n++,r.iushrn(1);s(!r.isZero());var o=new a(1).toRed(this),h=o.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);0!==this.pow(d,c).cmp(h);)d.redIAdd(h);for(var u=this.pow(d,r),l=this.pow(e,r.addn(1).iushrn(1)),f=this.pow(e,r),p=n;0!==f.cmp(o);){for(var m=f,g=0;0!==m.cmp(o);g++)m=m.redSqr();s(g<p);var y=this.pow(u,new a(1).iushln(p-g-1));l=l.redMul(y),u=y.redSqr(),f=f.redMul(u),p=g}return l},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var i=new Array(16);i[0]=new a(1).toRed(this),i[1]=e;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],e);var r=i[0],n=0,o=0,h=t.bitLength()%26;for(0===h&&(h=26),s=t.length-1;s>=0;s--){for(var c=t.words[s],d=h-1;d>=0;d--){var u=c>>d&1;r!==i[0]&&(r=this.sqr(r)),0!==u||0!==n?(n<<=1,n|=u,(4==++o||0===s&&0===d)&&(r=this.mul(r,i[n]),o=0,n=0)):o=0}h=26}return r},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new O(e)},r(O,S),O.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},O.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},O.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var i=e.imul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},O.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var i=e.mul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n._forceRed(this)},O.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=i.nmd(e),this)},69282:(e,t,i)=>{"use strict";var s=i(34155),r=i(25108);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n,o,h=i(62136).codes,c=h.ERR_AMBIGUOUS_ARGUMENT,d=h.ERR_INVALID_ARG_TYPE,u=h.ERR_INVALID_ARG_VALUE,l=h.ERR_INVALID_RETURN_VALUE,f=h.ERR_MISSING_ARGS,p=i(25961),m=i(89539).inspect,g=i(89539).types,y=g.isPromise,b=g.isRegExp,v=Object.assign?Object.assign:i(8091).assign,w=Object.is?Object.is:i(20609);function k(){var e=i(19158);n=e.isDeepEqual,o=e.isDeepStrictEqual}new Map;var _=!1,S=e.exports=x,O={};function M(e){if(e.message instanceof Error)throw e.message;throw new p(e)}function T(e,t,i,s){if(!i){var r=!1;if(0===t)r=!0,s="No value argument passed to `assert.ok()`";else if(s instanceof Error)throw s;var a=new p({actual:i,expected:!0,message:s,operator:"==",stackStartFn:e});throw a.generatedMessage=r,a}}function x(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];T.apply(void 0,[x,t.length].concat(t))}S.fail=function e(t,i,a,n,o){var h,c=arguments.length;if(0===c)h="Failed";else if(1===c)a=t,t=void 0;else{if(!1===_){_=!0;var d=s.emitWarning?s.emitWarning:r.warn.bind(r);d("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}2===c&&(n="!=")}if(a instanceof Error)throw a;var u={actual:t,expected:i,operator:void 0===n?"fail":n,stackStartFn:o||e};void 0!==a&&(u.message=a);var l=new p(u);throw h&&(l.message=h,l.generatedMessage=!0),l},S.AssertionError=p,S.ok=x,S.equal=function e(t,i,s){if(arguments.length<2)throw new f("actual","expected");t!=i&&M({actual:t,expected:i,message:s,operator:"==",stackStartFn:e})},S.notEqual=function e(t,i,s){if(arguments.length<2)throw new f("actual","expected");t==i&&M({actual:t,expected:i,message:s,operator:"!=",stackStartFn:e})},S.deepEqual=function e(t,i,s){if(arguments.length<2)throw new f("actual","expected");void 0===n&&k(),n(t,i)||M({actual:t,expected:i,message:s,operator:"deepEqual",stackStartFn:e})},S.notDeepEqual=function e(t,i,s){if(arguments.length<2)throw new f("actual","expected");void 0===n&&k(),n(t,i)&&M({actual:t,expected:i,message:s,operator:"notDeepEqual",stackStartFn:e})},S.deepStrictEqual=function e(t,i,s){if(arguments.length<2)throw new f("actual","expected");void 0===n&&k(),o(t,i)||M({actual:t,expected:i,message:s,operator:"deepStrictEqual",stackStartFn:e})},S.notDeepStrictEqual=function e(t,i,s){if(arguments.length<2)throw new f("actual","expected");void 0===n&&k(),o(t,i)&&M({actual:t,expected:i,message:s,operator:"notDeepStrictEqual",stackStartFn:e})},S.strictEqual=function e(t,i,s){if(arguments.length<2)throw new f("actual","expected");w(t,i)||M({actual:t,expected:i,message:s,operator:"strictEqual",stackStartFn:e})},S.notStrictEqual=function e(t,i,s){if(arguments.length<2)throw new f("actual","expected");w(t,i)&&M({actual:t,expected:i,message:s,operator:"notStrictEqual",stackStartFn:e})};var I=function e(t,i,s){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i.forEach((function(e){e in t&&(void 0!==s&&"string"==typeof s[e]&&b(t[e])&&t[e].test(s[e])?r[e]=s[e]:r[e]=t[e])}))};function A(e,t,i,s,r,a){if(!(i in e)||!o(e[i],t[i])){if(!s){var n=new I(e,r),h=new I(t,r,e),c=new p({actual:n,expected:h,operator:"deepStrictEqual",stackStartFn:a});throw c.actual=e,c.expected=t,c.operator=a.name,c}M({actual:e,expected:t,message:s,operator:a.name,stackStartFn:a})}}function C(e,t,i,s){if("function"!=typeof t){if(b(t))return t.test(e);if(2===arguments.length)throw new d("expected",["Function","RegExp"],t);if("object"!==a(e)||null===e){var r=new p({actual:e,expected:t,message:i,operator:"deepStrictEqual",stackStartFn:s});throw r.operator=s.name,r}var o=Object.keys(t);if(t instanceof Error)o.push("name","message");else if(0===o.length)throw new u("error",t,"may not be an empty object");return void 0===n&&k(),o.forEach((function(r){"string"==typeof e[r]&&b(t[r])&&t[r].test(e[r])||A(e,t,r,i,o,s)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function N(e){if("function"!=typeof e)throw new d("fn","Function",e);try{e()}catch(e){return e}return O}function E(e){return y(e)||null!==e&&"object"===a(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function P(e){return Promise.resolve().then((function(){var t;if("function"==typeof e){if(!E(t=e()))throw new l("instance of Promise","promiseFn",t)}else{if(!E(e))throw new d("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return O})).catch((function(e){return e}))}))}function B(e,t,i,s){if("string"==typeof i){if(4===arguments.length)throw new d("error",["Object","Error","Function","RegExp"],i);if("object"===a(t)&&null!==t){if(t.message===i)throw new c("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===i)throw new c("error/message",'The error "'.concat(t,'" is identical to the message.'));s=i,i=void 0}else if(null!=i&&"object"!==a(i)&&"function"!=typeof i)throw new d("error",["Object","Error","Function","RegExp"],i);if(t===O){var r="";i&&i.name&&(r+=" (".concat(i.name,")")),r+=s?": ".concat(s):".";var n="rejects"===e.name?"rejection":"exception";M({actual:void 0,expected:i,operator:e.name,message:"Missing expected ".concat(n).concat(r),stackStartFn:e})}if(i&&!C(t,i,s,e))throw t}function R(e,t,i,s){if(t!==O){if("string"==typeof i&&(s=i,i=void 0),!i||C(t,i)){var r=s?": ".concat(s):".",a="doesNotReject"===e.name?"rejection":"exception";M({actual:t,expected:i,operator:e.name,message:"Got unwanted ".concat(a).concat(r,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function V(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];T.apply(void 0,[V,t.length].concat(t))}S.throws=function e(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];B.apply(void 0,[e,N(t)].concat(s))},S.rejects=function e(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return P(t).then((function(t){return B.apply(void 0,[e,t].concat(s))}))},S.doesNotThrow=function e(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];R.apply(void 0,[e,N(t)].concat(s))},S.doesNotReject=function e(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return P(t).then((function(t){return R.apply(void 0,[e,t].concat(s))}))},S.ifError=function e(t){if(null!=t){var i="ifError got unwanted exception: ";"object"===a(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?i+=t.constructor.name:i+=t.message:i+=m(t);var s=new p({actual:t,expected:null,operator:"ifError",message:i,stackStartFn:e}),r=t.stack;if("string"==typeof r){var n=r.split("\n");n.shift();for(var o=s.stack.split("\n"),h=0;h<n.length;h++){var c=o.indexOf(n[h]);if(-1!==c){o=o.slice(0,c);break}}s.stack="".concat(o.join("\n"),"\n").concat(n.join("\n"))}throw s}},S.strict=v(V,S,{equal:S.strictEqual,deepEqual:S.deepStrictEqual,notEqual:S.notStrictEqual,notDeepEqual:S.notDeepStrictEqual}),S.strict.strict=S.strict},25961:(e,t,i)=>{"use strict";var s=i(34155);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function n(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?o(e):t}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){var t="function"==typeof Map?new Map:void 0;return(h=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,s)}function s(){return d(e,arguments,l(this).constructor)}return s.prototype=Object.create(e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),u(s,e)})(e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e,t,i){return(d=c()?Reflect.construct:function(e,t,i){var s=[null];s.push.apply(s,t);var r=new(Function.bind.apply(e,s));return i&&u(r,i.prototype),r}).apply(null,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=i(89539).inspect,m=i(62136).codes.ERR_INVALID_ARG_TYPE;function g(e,t,i){return(void 0===i||i>e.length)&&(i=e.length),e.substring(i-t.length,i)===t}var y="",b="",v="",w="",k={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function _(e){var t=Object.keys(e),i=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){i[t]=e[t]})),Object.defineProperty(i,"message",{value:e.message}),i}function S(e){return p(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var O=function(e){function t(e){var i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"object"!==f(e)||null===e)throw new m("options","Object",e);var r=e.message,a=e.operator,h=e.stackStartFn,c=e.actual,d=e.expected,u=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=r)i=n(this,l(t).call(this,String(r)));else if(s.stderr&&s.stderr.isTTY&&(s.stderr&&s.stderr.getColorDepth&&1!==s.stderr.getColorDepth()?(y="[34m",b="[32m",w="[39m",v="[31m"):(y="",b="",w="",v="")),"object"===f(c)&&null!==c&&"object"===f(d)&&null!==d&&"stack"in c&&c instanceof Error&&"stack"in d&&d instanceof Error&&(c=_(c),d=_(d)),"deepStrictEqual"===a||"strictEqual"===a)i=n(this,l(t).call(this,function(e,t,i){var r="",a="",n=0,o="",h=!1,c=S(e),d=c.split("\n"),u=S(t).split("\n"),l=0,p="";if("strictEqual"===i&&"object"===f(e)&&"object"===f(t)&&null!==e&&null!==t&&(i="strictEqualObject"),1===d.length&&1===u.length&&d[0]!==u[0]){var m=d[0].length+u[0].length;if(m<=10){if(!("object"===f(e)&&null!==e||"object"===f(t)&&null!==t||0===e&&0===t))return"".concat(k[i],"\n\n")+"".concat(d[0]," !== ").concat(u[0],"\n")}else if("strictEqualObject"!==i&&m<(s.stderr&&s.stderr.isTTY?s.stderr.columns:80)){for(;d[0][l]===u[0][l];)l++;l>2&&(p="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var i=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,i-e.length)}(" ",l),"^"),l=0)}}for(var _=d[d.length-1],O=u[u.length-1];_===O&&(l++<2?o="\n  ".concat(_).concat(o):r=_,d.pop(),u.pop(),0!==d.length&&0!==u.length);)_=d[d.length-1],O=u[u.length-1];var M=Math.max(d.length,u.length);if(0===M){var T=c.split("\n");if(T.length>30)for(T[26]="".concat(y,"...").concat(w);T.length>27;)T.pop();return"".concat(k.notIdentical,"\n\n").concat(T.join("\n"),"\n")}l>3&&(o="\n".concat(y,"...").concat(w).concat(o),h=!0),""!==r&&(o="\n  ".concat(r).concat(o),r="");var x=0,I=k[i]+"\n".concat(b,"+ actual").concat(w," ").concat(v,"- expected").concat(w),A=" ".concat(y,"...").concat(w," Lines skipped");for(l=0;l<M;l++){var C=l-n;if(d.length<l+1)C>1&&l>2&&(C>4?(a+="\n".concat(y,"...").concat(w),h=!0):C>3&&(a+="\n  ".concat(u[l-2]),x++),a+="\n  ".concat(u[l-1]),x++),n=l,r+="\n".concat(v,"-").concat(w," ").concat(u[l]),x++;else if(u.length<l+1)C>1&&l>2&&(C>4?(a+="\n".concat(y,"...").concat(w),h=!0):C>3&&(a+="\n  ".concat(d[l-2]),x++),a+="\n  ".concat(d[l-1]),x++),n=l,a+="\n".concat(b,"+").concat(w," ").concat(d[l]),x++;else{var N=u[l],E=d[l],P=E!==N&&(!g(E,",")||E.slice(0,-1)!==N);P&&g(N,",")&&N.slice(0,-1)===E&&(P=!1,E+=","),P?(C>1&&l>2&&(C>4?(a+="\n".concat(y,"...").concat(w),h=!0):C>3&&(a+="\n  ".concat(d[l-2]),x++),a+="\n  ".concat(d[l-1]),x++),n=l,a+="\n".concat(b,"+").concat(w," ").concat(E),r+="\n".concat(v,"-").concat(w," ").concat(N),x+=2):(a+=r,r="",1!==C&&0!==l||(a+="\n  ".concat(E),x++))}if(x>20&&l<M-2)return"".concat(I).concat(A,"\n").concat(a,"\n").concat(y,"...").concat(w).concat(r,"\n")+"".concat(y,"...").concat(w)}return"".concat(I).concat(h?A:"","\n").concat(a).concat(r).concat(o).concat(p)}(c,d,a)));else if("notDeepStrictEqual"===a||"notStrictEqual"===a){var p=k[a],O=S(c).split("\n");if("notStrictEqual"===a&&"object"===f(c)&&null!==c&&(p=k.notStrictEqualObject),O.length>30)for(O[26]="".concat(y,"...").concat(w);O.length>27;)O.pop();i=1===O.length?n(this,l(t).call(this,"".concat(p," ").concat(O[0]))):n(this,l(t).call(this,"".concat(p,"\n\n").concat(O.join("\n"),"\n")))}else{var M=S(c),T="",x=k[a];"notDeepEqual"===a||"notEqual"===a?(M="".concat(k[a],"\n\n").concat(M)).length>1024&&(M="".concat(M.slice(0,1021),"...")):(T="".concat(S(d)),M.length>512&&(M="".concat(M.slice(0,509),"...")),T.length>512&&(T="".concat(T.slice(0,509),"...")),"deepEqual"===a||"equal"===a?M="".concat(x,"\n\n").concat(M,"\n\nshould equal\n\n"):T=" ".concat(a," ").concat(T)),i=n(this,l(t).call(this,"".concat(M).concat(T)))}return Error.stackTraceLimit=u,i.generatedMessage=!r,Object.defineProperty(o(i),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),i.code="ERR_ASSERTION",i.actual=c,i.expected=d,i.operator=a,Error.captureStackTrace&&Error.captureStackTrace(o(i),h),i.stack,i.name="AssertionError",n(i)}var i,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),i=t,(h=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:p.custom,value:function(e,t){return p(this,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),s.forEach((function(t){r(e,t,i[t])}))}return e}({},t,{customInspect:!1,depth:0}))}}])&&a(i.prototype,h),t}(h(Error));e.exports=O},62136:(e,t,i)=>{"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var n,o,h={};function c(e,t,i){i||(i=Error);var n=function(i){function n(i,a,o){var h;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(h=function(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,r(n).call(this,function(e,i,s){return"string"==typeof t?t:t(e,i,s)}(i,a,o)))).code=e,h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,i),n}(i);h[e]=n}function d(e,t){if(Array.isArray(e)){var i=e.length;return e=e.map((function(e){return String(e)})),i>2?"one of ".concat(t," ").concat(e.slice(0,i-1).join(", "),", or ")+e[i-1]:2===i?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}c("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),c("ERR_INVALID_ARG_TYPE",(function(e,t,r){var a,o,h,c,u;if(void 0===n&&(n=i(69282)),n("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(o="not ",t.substr(0,o.length)===o)?(a="must not be",t=t.replace(/^not /,"")):a="must be",function(e,t,i){return(void 0===i||i>e.length)&&(i=e.length),e.substring(i-t.length,i)===t}(e," argument"))h="The ".concat(e," ").concat(a," ").concat(d(t,"type"));else{var l=("number"!=typeof u&&(u=0),u+".".length>(c=e).length||-1===c.indexOf(".",u)?"argument":"property");h='The "'.concat(e,'" ').concat(l," ").concat(a," ").concat(d(t,"type"))}return h+". Received type ".concat(s(r))}),TypeError),c("ERR_INVALID_ARG_VALUE",(function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===o&&(o=i(89539));var r=o.inspect(t);return r.length>128&&(r="".concat(r.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(s,". Received ").concat(r)}),TypeError,RangeError),c("ERR_INVALID_RETURN_VALUE",(function(e,t,i){var r;return r=i&&i.constructor&&i.constructor.name?"instance of ".concat(i.constructor.name):"type ".concat(s(i)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(r,".")}),TypeError),c("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];void 0===n&&(n=i(69282)),n(t.length>0,"At least one arg needs to be specified");var r="The ",a=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),a){case 1:r+="".concat(t[0]," argument");break;case 2:r+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:r+=t.slice(0,a-1).join(", "),r+=", and ".concat(t[a-1]," arguments")}return"".concat(r," must be specified")}),TypeError),e.exports.codes=h},19158:(e,t,i)=>{"use strict";function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],s=!0,r=!1,a=void 0;try{for(var n,o=e[Symbol.iterator]();!(s=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){r=!0,a=e}finally{try{s||null==o.return||o.return()}finally{if(r)throw a}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=void 0!==/a/g.flags,n=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},o=function(e){var t=[];return e.forEach((function(e,i){return t.push([i,e])})),t},h=Object.is?Object.is:i(20609),c=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},d=Number.isNaN?Number.isNaN:i(20360);function u(e){return e.call.bind(e)}var l=u(Object.prototype.hasOwnProperty),f=u(Object.prototype.propertyIsEnumerable),p=u(Object.prototype.toString),m=i(89539).types,g=m.isAnyArrayBuffer,y=m.isArrayBufferView,b=m.isDate,v=m.isMap,w=m.isRegExp,k=m.isSet,_=m.isNativeError,S=m.isBoxedPrimitive,O=m.isNumberObject,M=m.isStringObject,T=m.isBooleanObject,x=m.isBigIntObject,I=m.isSymbolObject,A=m.isFloat32Array,C=m.isFloat64Array;function N(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var i=e.charCodeAt(t);if(i<48||i>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function E(e){return Object.keys(e).filter(N).concat(c(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function P(e,t){if(e===t)return 0;for(var i=e.length,s=t.length,r=0,a=Math.min(i,s);r<a;++r)if(e[r]!==t[r]){i=e[r],s=t[r];break}return i<s?-1:s<i?1:0}function B(e,t,i,s){if(e===t)return 0!==e||!i||h(e,t);if(i){if("object"!==r(e))return"number"==typeof e&&d(e)&&d(t);if("object"!==r(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==r(e))return(null===t||"object"!==r(t))&&e==t;if(null===t||"object"!==r(t))return!1}var n,o,c,u,l=p(e);if(l!==p(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var f=E(e),m=E(t);return f.length===m.length&&V(e,t,i,s,1,f)}if("[object Object]"===l&&(!v(e)&&v(t)||!k(e)&&k(t)))return!1;if(b(e)){if(!b(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(w(e)){if(!w(t)||(c=e,u=t,!(a?c.source===u.source&&c.flags===u.flags:RegExp.prototype.toString.call(c)===RegExp.prototype.toString.call(u))))return!1}else if(_(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(y(e)){if(i||!A(e)&&!C(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===P(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var i=0;i<e.byteLength;i++)if(e[i]!==t[i])return!1;return!0}(e,t))return!1;var N=E(e),B=E(t);return N.length===B.length&&V(e,t,i,s,0,N)}if(k(e))return!(!k(t)||e.size!==t.size)&&V(e,t,i,s,2);if(v(e))return!(!v(t)||e.size!==t.size)&&V(e,t,i,s,3);if(g(e)){if(o=t,(n=e).byteLength!==o.byteLength||0!==P(new Uint8Array(n),new Uint8Array(o)))return!1}else if(S(e)&&!function(e,t){return O(e)?O(t)&&h(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):M(e)?M(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):T(e)?T(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):x(e)?x(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):I(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return V(e,t,i,s,0)}function R(e,t){return t.filter((function(t){return f(e,t)}))}function V(e,t,i,s,r,a){if(5===arguments.length){a=Object.keys(e);var n=Object.keys(t);if(a.length!==n.length)return!1}for(var o=0;o<a.length;o++)if(!l(t,a[o]))return!1;if(i&&5===arguments.length){var h=c(e);if(0!==h.length){var d=0;for(o=0;o<h.length;o++){var u=h[o];if(f(e,u)){if(!f(t,u))return!1;a.push(u),d++}else if(f(t,u))return!1}var p=c(t);if(h.length!==p.length&&R(t,p).length!==d)return!1}else{var m=c(t);if(0!==m.length&&0!==R(t,m).length)return!1}}if(0===a.length&&(0===r||1===r&&0===e.length||0===e.size))return!0;if(void 0===s)s={val1:new Map,val2:new Map,position:0};else{var g=s.val1.get(e);if(void 0!==g){var y=s.val2.get(t);if(void 0!==y)return g===y}s.position++}s.val1.set(e,s.position),s.val2.set(t,s.position);var b=j(e,t,i,a,s,r);return s.val1.delete(e),s.val2.delete(t),b}function L(e,t,i,s){for(var r=n(e),a=0;a<r.length;a++){var o=r[a];if(B(t,o,i,s))return e.delete(o),!0}return!1}function D(e){switch(r(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(d(e))return!1}return!0}function q(e,t,i){var s=D(i);return null!=s?s:t.has(s)&&!e.has(s)}function G(e,t,i,s,r){var a=D(i);if(null!=a)return a;var n=t.get(a);return!(void 0===n&&!t.has(a)||!B(s,n,!1,r))&&!e.has(a)&&B(s,n,!1,r)}function F(e,t,i,s,r,a){for(var o=n(e),h=0;h<o.length;h++){var c=o[h];if(B(i,c,r,a)&&B(s,t.get(c),r,a))return e.delete(c),!0}return!1}function j(e,t,i,a,h,c){var d=0;if(2===c){if(!function(e,t,i,s){for(var a=null,o=n(e),h=0;h<o.length;h++){var c=o[h];if("object"===r(c)&&null!==c)null===a&&(a=new Set),a.add(c);else if(!t.has(c)){if(i)return!1;if(!q(e,t,c))return!1;null===a&&(a=new Set),a.add(c)}}if(null!==a){for(var d=n(t),u=0;u<d.length;u++){var l=d[u];if("object"===r(l)&&null!==l){if(!L(a,l,i,s))return!1}else if(!i&&!e.has(l)&&!L(a,l,i,s))return!1}return 0===a.size}return!0}(e,t,i,h))return!1}else if(3===c){if(!function(e,t,i,a){for(var n=null,h=o(e),c=0;c<h.length;c++){var d=s(h[c],2),u=d[0],l=d[1];if("object"===r(u)&&null!==u)null===n&&(n=new Set),n.add(u);else{var f=t.get(u);if(void 0===f&&!t.has(u)||!B(l,f,i,a)){if(i)return!1;if(!G(e,t,u,l,a))return!1;null===n&&(n=new Set),n.add(u)}}}if(null!==n){for(var p=o(t),m=0;m<p.length;m++){var g=s(p[m],2),y=(u=g[0],g[1]);if("object"===r(u)&&null!==u){if(!F(n,e,u,y,i,a))return!1}else if(!(i||e.has(u)&&B(e.get(u),y,!1,a)||F(n,e,u,y,!1,a)))return!1}return 0===n.size}return!0}(e,t,i,h))return!1}else if(1===c)for(;d<e.length;d++){if(!l(e,d)){if(l(t,d))return!1;for(var u=Object.keys(e);d<u.length;d++){var f=u[d];if(!l(t,f)||!B(e[f],t[f],i,h))return!1}return u.length===Object.keys(t).length}if(!l(t,d)||!B(e[d],t[d],i,h))return!1}for(d=0;d<a.length;d++){var p=a[d];if(!B(e[p],t[p],i,h))return!1}return!0}e.exports={isDeepEqual:function(e,t){return B(e,t,!1)},isDeepStrictEqual:function(e,t){return B(e,t,!0)}}},16314:(e,t,i)=>{"use strict";var s=i(2190);e.exports=function(){return s(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],(function(e){return"function"==typeof i.g[e]}))}},79742:(e,t)=>{"use strict";t.byteLength=function(e){var t=h(e),i=t[0],s=t[1];return 3*(i+s)/4-s},t.toByteArray=function(e){var t,i,a=h(e),n=a[0],o=a[1],c=new r(function(e,t,i){return 3*(t+i)/4-i}(0,n,o)),d=0,u=o>0?n-4:n;for(i=0;i<u;i+=4)t=s[e.charCodeAt(i)]<<18|s[e.charCodeAt(i+1)]<<12|s[e.charCodeAt(i+2)]<<6|s[e.charCodeAt(i+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;return 2===o&&(t=s[e.charCodeAt(i)]<<2|s[e.charCodeAt(i+1)]>>4,c[d++]=255&t),1===o&&(t=s[e.charCodeAt(i)]<<10|s[e.charCodeAt(i+1)]<<4|s[e.charCodeAt(i+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t),c},t.fromByteArray=function(e){for(var t,s=e.length,r=s%3,a=[],n=16383,o=0,h=s-r;o<h;o+=n)a.push(c(e,o,o+n>h?h:o+n));return 1===r?(t=e[s-1],a.push(i[t>>2]+i[t<<4&63]+"==")):2===r&&(t=(e[s-2]<<8)+e[s-1],a.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"=")),a.join("")};for(var i=[],s=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=a.length;n<o;++n)i[n]=a[n],s[a.charCodeAt(n)]=n;function h(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function c(e,t,s){for(var r,a,n=[],o=t;o<s;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),n.push(i[(a=r)>>18&63]+i[a>>12&63]+i[a>>6&63]+i[63&a]);return n.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},8442:(e,t,i)=>{const s=i(99488);function r(e,t,i){const s=e[t]+e[i];let r=e[t+1]+e[i+1];s>=4294967296&&r++,e[t]=s,e[t+1]=r}function a(e,t,i,s){let r=e[t]+i;i<0&&(r+=4294967296);let a=e[t+1]+s;r>=4294967296&&a++,e[t]=r,e[t+1]=a}function n(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function o(e,t,i,s,n,o){const h=u[n],c=u[n+1],l=u[o],f=u[o+1];r(d,e,t),a(d,e,h,c);let p=d[s]^d[e],m=d[s+1]^d[e+1];d[s]=m,d[s+1]=p,r(d,i,s),p=d[t]^d[i],m=d[t+1]^d[i+1],d[t]=p>>>24^m<<8,d[t+1]=m>>>24^p<<8,r(d,e,t),a(d,e,l,f),p=d[s]^d[e],m=d[s+1]^d[e+1],d[s]=p>>>16^m<<16,d[s+1]=m>>>16^p<<16,r(d,i,s),p=d[t]^d[i],m=d[t+1]^d[i+1],d[t]=m>>>31^p<<1,d[t+1]=p>>>31^m<<1}const h=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),c=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(e){return 2*e}))),d=new Uint32Array(32),u=new Uint32Array(32);function l(e,t){let i=0;for(i=0;i<16;i++)d[i]=e.h[i],d[i+16]=h[i];for(d[24]=d[24]^e.t,d[25]=d[25]^e.t/4294967296,t&&(d[28]=~d[28],d[29]=~d[29]),i=0;i<32;i++)u[i]=n(e.b,4*i);for(i=0;i<12;i++)o(0,8,16,24,c[16*i+0],c[16*i+1]),o(2,10,18,26,c[16*i+2],c[16*i+3]),o(4,12,20,28,c[16*i+4],c[16*i+5]),o(6,14,22,30,c[16*i+6],c[16*i+7]),o(0,10,20,30,c[16*i+8],c[16*i+9]),o(2,12,22,24,c[16*i+10],c[16*i+11]),o(4,14,16,26,c[16*i+12],c[16*i+13]),o(6,8,18,28,c[16*i+14],c[16*i+15]);for(i=0;i<16;i++)e.h[i]=e.h[i]^d[i]^d[i+16]}function f(e,t){if(0===e||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};for(let e=0;e<16;e++)i.h[e]=h[e];const s=t?t.length:0;return i.h[0]^=16842752^s<<8^e,t&&(p(i,t),i.c=128),i}function p(e,t){for(let i=0;i<t.length;i++)128===e.c&&(e.t+=e.c,l(e,!1),e.c=0),e.b[e.c++]=t[i]}function m(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;l(e,!0);const t=new Uint8Array(e.outlen);for(let i=0;i<e.outlen;i++)t[i]=e.h[i>>2]>>8*(3&i);return t}function g(e,t,i){i=i||64,e=s.normalizeInput(e);const r=f(i,t);return p(r,e),m(r)}e.exports={blake2b:g,blake2bHex:function(e,t,i){const r=g(e,t,i);return s.toHex(r)},blake2bInit:f,blake2bUpdate:p,blake2bFinal:m}},45297:(e,t,i)=>{const s=i(99488);function r(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function a(e,t,i,s,r,a){c[e]=c[e]+c[t]+r,c[s]=n(c[s]^c[e],16),c[i]=c[i]+c[s],c[t]=n(c[t]^c[i],12),c[e]=c[e]+c[t]+a,c[s]=n(c[s]^c[e],8),c[i]=c[i]+c[s],c[t]=n(c[t]^c[i],7)}function n(e,t){return e>>>t^e<<32-t}const o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),h=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),c=new Uint32Array(16),d=new Uint32Array(16);function u(e,t){let i=0;for(i=0;i<8;i++)c[i]=e.h[i],c[i+8]=o[i];for(c[12]^=e.t,c[13]^=e.t/4294967296,t&&(c[14]=~c[14]),i=0;i<16;i++)d[i]=r(e.b,4*i);for(i=0;i<10;i++)a(0,4,8,12,d[h[16*i+0]],d[h[16*i+1]]),a(1,5,9,13,d[h[16*i+2]],d[h[16*i+3]]),a(2,6,10,14,d[h[16*i+4]],d[h[16*i+5]]),a(3,7,11,15,d[h[16*i+6]],d[h[16*i+7]]),a(0,5,10,15,d[h[16*i+8]],d[h[16*i+9]]),a(1,6,11,12,d[h[16*i+10]],d[h[16*i+11]]),a(2,7,8,13,d[h[16*i+12]],d[h[16*i+13]]),a(3,4,9,14,d[h[16*i+14]],d[h[16*i+15]]);for(i=0;i<8;i++)e.h[i]^=c[i]^c[i+8]}function l(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");const i=t?t.length:0;if(t&&!(i>0&&i<=32))throw new Error("Incorrect key length, should be in [1, 32]");const s={h:new Uint32Array(o),b:new Uint8Array(64),c:0,t:0,outlen:e};return s.h[0]^=16842752^i<<8^e,i>0&&(f(s,t),s.c=64),s}function f(e,t){for(let i=0;i<t.length;i++)64===e.c&&(e.t+=e.c,u(e,!1),e.c=0),e.b[e.c++]=t[i]}function p(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;u(e,!0);const t=new Uint8Array(e.outlen);for(let i=0;i<e.outlen;i++)t[i]=e.h[i>>2]>>8*(3&i)&255;return t}function m(e,t,i){i=i||32,e=s.normalizeInput(e);const r=l(i,t);return f(r,e),p(r)}e.exports={blake2s:m,blake2sHex:function(e,t,i){const r=m(e,t,i);return s.toHex(r)},blake2sInit:l,blake2sUpdate:f,blake2sFinal:p}},1191:(e,t,i)=>{const s=i(8442),r=i(45297);e.exports={blake2b:s.blake2b,blake2bHex:s.blake2bHex,blake2bInit:s.blake2bInit,blake2bUpdate:s.blake2bUpdate,blake2bFinal:s.blake2bFinal,blake2s:r.blake2s,blake2sHex:r.blake2sHex,blake2sInit:r.blake2sInit,blake2sUpdate:r.blake2sUpdate,blake2sFinal:r.blake2sFinal}},99488:(e,t,i)=>{var s=i(48764).Buffer,r=i(25108);function a(e){return(4294967296+e).toString(16).substring(1)}e.exports={normalizeInput:function(e){let t;if(e instanceof Uint8Array)t=e;else if(e instanceof s)t=new Uint8Array(e);else{if("string"!=typeof e)throw new Error("Input must be an string, Buffer or Uint8Array");t=new Uint8Array(s.from(e,"utf8"))}return t},toHex:function(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")},debugPrint:function(e,t,i){let s="\n"+e+" = ";for(let r=0;r<t.length;r+=2){if(32===i)s+=a(t[r]).toUpperCase(),s+=" ",s+=a(t[r+1]).toUpperCase();else{if(64!==i)throw new Error("Invalid size "+i);s+=a(t[r+1]).toUpperCase(),s+=a(t[r]).toUpperCase()}r%6==4?s+="\n"+new Array(e.length+4).join(" "):r<t.length-2&&(s+=" ")}r.log(s)},testSpeed:function(e,t,i){let s=(new Date).getTime();const a=new Uint8Array(t);for(let e=0;e<t;e++)a[e]=e%256;const n=(new Date).getTime();r.log("Generated random input in "+(n-s)+"ms"),s=n;for(let n=0;n<i;n++){const i=e(a),n=(new Date).getTime(),o=n-s;s=n,r.log("Hashed in "+o+"ms: "+i.substring(0,20)+"..."),r.log(Math.round(t/(1<<20)/(o/1e3)*100)/100+" MB PER SECOND")}}}},13550:function(e,t,i){!function(e,t){"use strict";function s(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function a(e,t,i){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(i=t,t=10),this._init(e||0,t||10,i||"be"))}var n;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(46601).Buffer}catch(e){}function o(e,t){var i=e.charCodeAt(t);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void s(!1,"Invalid character in "+e)}function h(e,t,i){var s=o(e,i);return i-1>=t&&(s|=o(e,i-1)<<4),s}function c(e,t,i,r){for(var a=0,n=0,o=Math.min(e.length,i),h=t;h<o;h++){var c=e.charCodeAt(h)-48;a*=r,n=c>=49?c-49+10:c>=17?c-17+10:c,s(c>=0&&n<r,"Invalid character"),a+=n}return a}function d(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(a.isBN=function(e){return e instanceof a||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),s(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<e.length&&(16===t?this._parseHex(e,r,i):(this._parseBase(e,t,r),"le"===i&&this._initArray(this.toArray(),t,i)))},a.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(s(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},a.prototype._initArray=function(e,t,i){if(s("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var a,n,o=0;if("be"===i)for(r=e.length-1,a=0;r>=0;r-=3)n=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===i)for(r=0,a=0;r<e.length;r+=3)n=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this._strip()},a.prototype._parseHex=function(e,t,i){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var r,a=0,n=0;if("be"===i)for(s=e.length-1;s>=t;s-=2)r=h(e,t,s)<<a,this.words[n]|=67108863&r,a>=18?(a-=18,n+=1,this.words[n]|=r>>>26):a+=8;else for(s=(e.length-t)%2==0?t+1:t;s<e.length;s+=2)r=h(e,t,s)<<a,this.words[n]|=67108863&r,a>=18?(a-=18,n+=1,this.words[n]|=r>>>26):a+=8;this._strip()},a.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var s=0,r=1;r<=67108863;r*=t)s++;s--,r=r/t|0;for(var a=e.length-i,n=a%s,o=Math.min(a,a-n)+i,h=0,d=i;d<o;d+=s)h=c(e,d,d+s,t),this.imuln(r),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==n){var u=1;for(h=c(e,d,e.length,t),d=0;d<n;d++)u*=t;this.imuln(u),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype._move=function(e){d(e,this)},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(e){a.prototype.inspect=u}else a.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(e,t,i){i.negative=t.negative^e.negative;var s=e.length+t.length|0;i.length=s,s=s-1|0;var r=0|e.words[0],a=0|t.words[0],n=r*a,o=67108863&n,h=n/67108864|0;i.words[0]=o;for(var c=1;c<s;c++){for(var d=h>>>26,u=67108863&h,l=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=l;f++){var p=c-f|0;d+=(n=(r=0|e.words[p])*(a=0|t.words[f])+u)/67108864|0,u=67108863&n}i.words[c]=0|u,h=0|d}return 0!==h?i.words[c]=0|h:i.length--,i._strip()}a.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var r=0,a=0,n=0;n<this.length;n++){var o=this.words[n],h=(16777215&(o<<r|a)).toString(16);i=0!=(a=o>>>24-r&16777215)||n!==this.length-1?l[6-h.length]+h+i:h+i,(r+=2)>=26&&(r-=26,n--)}for(0!==a&&(i=a.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var c=f[e],d=p[e];i="";var u=this.clone();for(u.negative=0;!u.isZero();){var m=u.modrn(d).toString(e);i=(u=u.idivn(d)).isZero()?m+i:l[c-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}s(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16,2)},n&&(a.prototype.toBuffer=function(e,t){return this.toArrayLike(n,e,t)}),a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,i){this._strip();var r=this.byteLength(),a=i||Math.max(1,r);s(r<=a,"byte array longer than desired length"),s(a>0,"Requested array length <= 0");var n=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,a);return this["_toArrayLike"+("le"===t?"LE":"BE")](n,r),n},a.prototype._toArrayLikeLE=function(e,t){for(var i=0,s=0,r=0,a=0;r<this.length;r++){var n=this.words[r]<<a|s;e[i++]=255&n,i<e.length&&(e[i++]=n>>8&255),i<e.length&&(e[i++]=n>>16&255),6===a?(i<e.length&&(e[i++]=n>>24&255),s=0,a=0):(s=n>>>24,a+=2)}if(i<e.length)for(e[i++]=s;i<e.length;)e[i++]=0},a.prototype._toArrayLikeBE=function(e,t){for(var i=e.length-1,s=0,r=0,a=0;r<this.length;r++){var n=this.words[r]<<a|s;e[i--]=255&n,i>=0&&(e[i--]=n>>8&255),i>=0&&(e[i--]=n>>16&255),6===a?(i>=0&&(e[i--]=n>>24&255),s=0,a=0):(s=n>>>24,a+=2)}if(i>=0)for(e[i--]=s;i>=0;)e[i--]=0},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,i=0;return 0==(8191&t)&&(i+=13,t>>>=13),0==(127&t)&&(i+=7,t>>>=7),0==(15&t)&&(i+=4,t>>>=4),0==(3&t)&&(i+=2,t>>>=2),0==(1&t)&&i++,i},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var i=this._zeroBits(this.words[t]);if(e+=i,26!==i)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},a.prototype.ior=function(e){return s(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]&e.words[i];return this.length=t.length,this._strip()},a.prototype.iand=function(e){return s(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,i;this.length>e.length?(t=this,i=e):(t=e,i=this);for(var s=0;s<i.length;s++)this.words[s]=t.words[s]^i.words[s];if(this!==t)for(;s<t.length;s++)this.words[s]=t.words[s];return this.length=t.length,this._strip()},a.prototype.ixor=function(e){return s(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){s("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this._strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){s("number"==typeof e&&e>=0);var i=e/26|0,r=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<r:this.words[i]&~(1<<r),this._strip()},a.prototype.iadd=function(e){var t,i,s;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(i=this,s=e):(i=e,s=this);for(var r=0,a=0;a<s.length;a++)t=(0|i.words[a])+(0|s.words[a])+r,this.words[a]=67108863&t,r=t>>>26;for(;0!==r&&a<i.length;a++)t=(0|i.words[a])+r,this.words[a]=67108863&t,r=t>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i,s,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,s=e):(i=e,s=this);for(var a=0,n=0;n<s.length;n++)a=(t=(0|i.words[n])-(0|s.words[n])+a)>>26,this.words[n]=67108863&t;for(;0!==a&&n<i.length;n++)a=(t=(0|i.words[n])+a)>>26,this.words[n]=67108863&t;if(0===a&&n<i.length&&i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this.length=Math.max(this.length,n),i!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var g=function(e,t,i){var s,r,a,n=e.words,o=t.words,h=i.words,c=0,d=0|n[0],u=8191&d,l=d>>>13,f=0|n[1],p=8191&f,m=f>>>13,g=0|n[2],y=8191&g,b=g>>>13,v=0|n[3],w=8191&v,k=v>>>13,_=0|n[4],S=8191&_,O=_>>>13,M=0|n[5],T=8191&M,x=M>>>13,I=0|n[6],A=8191&I,C=I>>>13,N=0|n[7],E=8191&N,P=N>>>13,B=0|n[8],R=8191&B,V=B>>>13,L=0|n[9],D=8191&L,q=L>>>13,G=0|o[0],F=8191&G,j=G>>>13,U=0|o[1],H=8191&U,z=U>>>13,K=0|o[2],W=8191&K,X=K>>>13,Z=0|o[3],Y=8191&Z,Q=Z>>>13,J=0|o[4],$=8191&J,ee=J>>>13,te=0|o[5],ie=8191&te,se=te>>>13,re=0|o[6],ae=8191&re,ne=re>>>13,oe=0|o[7],he=8191&oe,ce=oe>>>13,de=0|o[8],ue=8191&de,le=de>>>13,fe=0|o[9],pe=8191&fe,me=fe>>>13;i.negative=e.negative^t.negative,i.length=19;var ge=(c+(s=Math.imul(u,F))|0)+((8191&(r=(r=Math.imul(u,j))+Math.imul(l,F)|0))<<13)|0;c=((a=Math.imul(l,j))+(r>>>13)|0)+(ge>>>26)|0,ge&=67108863,s=Math.imul(p,F),r=(r=Math.imul(p,j))+Math.imul(m,F)|0,a=Math.imul(m,j);var ye=(c+(s=s+Math.imul(u,H)|0)|0)+((8191&(r=(r=r+Math.imul(u,z)|0)+Math.imul(l,H)|0))<<13)|0;c=((a=a+Math.imul(l,z)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,s=Math.imul(y,F),r=(r=Math.imul(y,j))+Math.imul(b,F)|0,a=Math.imul(b,j),s=s+Math.imul(p,H)|0,r=(r=r+Math.imul(p,z)|0)+Math.imul(m,H)|0,a=a+Math.imul(m,z)|0;var be=(c+(s=s+Math.imul(u,W)|0)|0)+((8191&(r=(r=r+Math.imul(u,X)|0)+Math.imul(l,W)|0))<<13)|0;c=((a=a+Math.imul(l,X)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,s=Math.imul(w,F),r=(r=Math.imul(w,j))+Math.imul(k,F)|0,a=Math.imul(k,j),s=s+Math.imul(y,H)|0,r=(r=r+Math.imul(y,z)|0)+Math.imul(b,H)|0,a=a+Math.imul(b,z)|0,s=s+Math.imul(p,W)|0,r=(r=r+Math.imul(p,X)|0)+Math.imul(m,W)|0,a=a+Math.imul(m,X)|0;var ve=(c+(s=s+Math.imul(u,Y)|0)|0)+((8191&(r=(r=r+Math.imul(u,Q)|0)+Math.imul(l,Y)|0))<<13)|0;c=((a=a+Math.imul(l,Q)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,s=Math.imul(S,F),r=(r=Math.imul(S,j))+Math.imul(O,F)|0,a=Math.imul(O,j),s=s+Math.imul(w,H)|0,r=(r=r+Math.imul(w,z)|0)+Math.imul(k,H)|0,a=a+Math.imul(k,z)|0,s=s+Math.imul(y,W)|0,r=(r=r+Math.imul(y,X)|0)+Math.imul(b,W)|0,a=a+Math.imul(b,X)|0,s=s+Math.imul(p,Y)|0,r=(r=r+Math.imul(p,Q)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,Q)|0;var we=(c+(s=s+Math.imul(u,$)|0)|0)+((8191&(r=(r=r+Math.imul(u,ee)|0)+Math.imul(l,$)|0))<<13)|0;c=((a=a+Math.imul(l,ee)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,s=Math.imul(T,F),r=(r=Math.imul(T,j))+Math.imul(x,F)|0,a=Math.imul(x,j),s=s+Math.imul(S,H)|0,r=(r=r+Math.imul(S,z)|0)+Math.imul(O,H)|0,a=a+Math.imul(O,z)|0,s=s+Math.imul(w,W)|0,r=(r=r+Math.imul(w,X)|0)+Math.imul(k,W)|0,a=a+Math.imul(k,X)|0,s=s+Math.imul(y,Y)|0,r=(r=r+Math.imul(y,Q)|0)+Math.imul(b,Y)|0,a=a+Math.imul(b,Q)|0,s=s+Math.imul(p,$)|0,r=(r=r+Math.imul(p,ee)|0)+Math.imul(m,$)|0,a=a+Math.imul(m,ee)|0;var ke=(c+(s=s+Math.imul(u,ie)|0)|0)+((8191&(r=(r=r+Math.imul(u,se)|0)+Math.imul(l,ie)|0))<<13)|0;c=((a=a+Math.imul(l,se)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,s=Math.imul(A,F),r=(r=Math.imul(A,j))+Math.imul(C,F)|0,a=Math.imul(C,j),s=s+Math.imul(T,H)|0,r=(r=r+Math.imul(T,z)|0)+Math.imul(x,H)|0,a=a+Math.imul(x,z)|0,s=s+Math.imul(S,W)|0,r=(r=r+Math.imul(S,X)|0)+Math.imul(O,W)|0,a=a+Math.imul(O,X)|0,s=s+Math.imul(w,Y)|0,r=(r=r+Math.imul(w,Q)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,Q)|0,s=s+Math.imul(y,$)|0,r=(r=r+Math.imul(y,ee)|0)+Math.imul(b,$)|0,a=a+Math.imul(b,ee)|0,s=s+Math.imul(p,ie)|0,r=(r=r+Math.imul(p,se)|0)+Math.imul(m,ie)|0,a=a+Math.imul(m,se)|0;var _e=(c+(s=s+Math.imul(u,ae)|0)|0)+((8191&(r=(r=r+Math.imul(u,ne)|0)+Math.imul(l,ae)|0))<<13)|0;c=((a=a+Math.imul(l,ne)|0)+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,s=Math.imul(E,F),r=(r=Math.imul(E,j))+Math.imul(P,F)|0,a=Math.imul(P,j),s=s+Math.imul(A,H)|0,r=(r=r+Math.imul(A,z)|0)+Math.imul(C,H)|0,a=a+Math.imul(C,z)|0,s=s+Math.imul(T,W)|0,r=(r=r+Math.imul(T,X)|0)+Math.imul(x,W)|0,a=a+Math.imul(x,X)|0,s=s+Math.imul(S,Y)|0,r=(r=r+Math.imul(S,Q)|0)+Math.imul(O,Y)|0,a=a+Math.imul(O,Q)|0,s=s+Math.imul(w,$)|0,r=(r=r+Math.imul(w,ee)|0)+Math.imul(k,$)|0,a=a+Math.imul(k,ee)|0,s=s+Math.imul(y,ie)|0,r=(r=r+Math.imul(y,se)|0)+Math.imul(b,ie)|0,a=a+Math.imul(b,se)|0,s=s+Math.imul(p,ae)|0,r=(r=r+Math.imul(p,ne)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,ne)|0;var Se=(c+(s=s+Math.imul(u,he)|0)|0)+((8191&(r=(r=r+Math.imul(u,ce)|0)+Math.imul(l,he)|0))<<13)|0;c=((a=a+Math.imul(l,ce)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,s=Math.imul(R,F),r=(r=Math.imul(R,j))+Math.imul(V,F)|0,a=Math.imul(V,j),s=s+Math.imul(E,H)|0,r=(r=r+Math.imul(E,z)|0)+Math.imul(P,H)|0,a=a+Math.imul(P,z)|0,s=s+Math.imul(A,W)|0,r=(r=r+Math.imul(A,X)|0)+Math.imul(C,W)|0,a=a+Math.imul(C,X)|0,s=s+Math.imul(T,Y)|0,r=(r=r+Math.imul(T,Q)|0)+Math.imul(x,Y)|0,a=a+Math.imul(x,Q)|0,s=s+Math.imul(S,$)|0,r=(r=r+Math.imul(S,ee)|0)+Math.imul(O,$)|0,a=a+Math.imul(O,ee)|0,s=s+Math.imul(w,ie)|0,r=(r=r+Math.imul(w,se)|0)+Math.imul(k,ie)|0,a=a+Math.imul(k,se)|0,s=s+Math.imul(y,ae)|0,r=(r=r+Math.imul(y,ne)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,ne)|0,s=s+Math.imul(p,he)|0,r=(r=r+Math.imul(p,ce)|0)+Math.imul(m,he)|0,a=a+Math.imul(m,ce)|0;var Oe=(c+(s=s+Math.imul(u,ue)|0)|0)+((8191&(r=(r=r+Math.imul(u,le)|0)+Math.imul(l,ue)|0))<<13)|0;c=((a=a+Math.imul(l,le)|0)+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,s=Math.imul(D,F),r=(r=Math.imul(D,j))+Math.imul(q,F)|0,a=Math.imul(q,j),s=s+Math.imul(R,H)|0,r=(r=r+Math.imul(R,z)|0)+Math.imul(V,H)|0,a=a+Math.imul(V,z)|0,s=s+Math.imul(E,W)|0,r=(r=r+Math.imul(E,X)|0)+Math.imul(P,W)|0,a=a+Math.imul(P,X)|0,s=s+Math.imul(A,Y)|0,r=(r=r+Math.imul(A,Q)|0)+Math.imul(C,Y)|0,a=a+Math.imul(C,Q)|0,s=s+Math.imul(T,$)|0,r=(r=r+Math.imul(T,ee)|0)+Math.imul(x,$)|0,a=a+Math.imul(x,ee)|0,s=s+Math.imul(S,ie)|0,r=(r=r+Math.imul(S,se)|0)+Math.imul(O,ie)|0,a=a+Math.imul(O,se)|0,s=s+Math.imul(w,ae)|0,r=(r=r+Math.imul(w,ne)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,ne)|0,s=s+Math.imul(y,he)|0,r=(r=r+Math.imul(y,ce)|0)+Math.imul(b,he)|0,a=a+Math.imul(b,ce)|0,s=s+Math.imul(p,ue)|0,r=(r=r+Math.imul(p,le)|0)+Math.imul(m,ue)|0,a=a+Math.imul(m,le)|0;var Me=(c+(s=s+Math.imul(u,pe)|0)|0)+((8191&(r=(r=r+Math.imul(u,me)|0)+Math.imul(l,pe)|0))<<13)|0;c=((a=a+Math.imul(l,me)|0)+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,s=Math.imul(D,H),r=(r=Math.imul(D,z))+Math.imul(q,H)|0,a=Math.imul(q,z),s=s+Math.imul(R,W)|0,r=(r=r+Math.imul(R,X)|0)+Math.imul(V,W)|0,a=a+Math.imul(V,X)|0,s=s+Math.imul(E,Y)|0,r=(r=r+Math.imul(E,Q)|0)+Math.imul(P,Y)|0,a=a+Math.imul(P,Q)|0,s=s+Math.imul(A,$)|0,r=(r=r+Math.imul(A,ee)|0)+Math.imul(C,$)|0,a=a+Math.imul(C,ee)|0,s=s+Math.imul(T,ie)|0,r=(r=r+Math.imul(T,se)|0)+Math.imul(x,ie)|0,a=a+Math.imul(x,se)|0,s=s+Math.imul(S,ae)|0,r=(r=r+Math.imul(S,ne)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,ne)|0,s=s+Math.imul(w,he)|0,r=(r=r+Math.imul(w,ce)|0)+Math.imul(k,he)|0,a=a+Math.imul(k,ce)|0,s=s+Math.imul(y,ue)|0,r=(r=r+Math.imul(y,le)|0)+Math.imul(b,ue)|0,a=a+Math.imul(b,le)|0;var Te=(c+(s=s+Math.imul(p,pe)|0)|0)+((8191&(r=(r=r+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,s=Math.imul(D,W),r=(r=Math.imul(D,X))+Math.imul(q,W)|0,a=Math.imul(q,X),s=s+Math.imul(R,Y)|0,r=(r=r+Math.imul(R,Q)|0)+Math.imul(V,Y)|0,a=a+Math.imul(V,Q)|0,s=s+Math.imul(E,$)|0,r=(r=r+Math.imul(E,ee)|0)+Math.imul(P,$)|0,a=a+Math.imul(P,ee)|0,s=s+Math.imul(A,ie)|0,r=(r=r+Math.imul(A,se)|0)+Math.imul(C,ie)|0,a=a+Math.imul(C,se)|0,s=s+Math.imul(T,ae)|0,r=(r=r+Math.imul(T,ne)|0)+Math.imul(x,ae)|0,a=a+Math.imul(x,ne)|0,s=s+Math.imul(S,he)|0,r=(r=r+Math.imul(S,ce)|0)+Math.imul(O,he)|0,a=a+Math.imul(O,ce)|0,s=s+Math.imul(w,ue)|0,r=(r=r+Math.imul(w,le)|0)+Math.imul(k,ue)|0,a=a+Math.imul(k,le)|0;var xe=(c+(s=s+Math.imul(y,pe)|0)|0)+((8191&(r=(r=r+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;c=((a=a+Math.imul(b,me)|0)+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,s=Math.imul(D,Y),r=(r=Math.imul(D,Q))+Math.imul(q,Y)|0,a=Math.imul(q,Q),s=s+Math.imul(R,$)|0,r=(r=r+Math.imul(R,ee)|0)+Math.imul(V,$)|0,a=a+Math.imul(V,ee)|0,s=s+Math.imul(E,ie)|0,r=(r=r+Math.imul(E,se)|0)+Math.imul(P,ie)|0,a=a+Math.imul(P,se)|0,s=s+Math.imul(A,ae)|0,r=(r=r+Math.imul(A,ne)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,ne)|0,s=s+Math.imul(T,he)|0,r=(r=r+Math.imul(T,ce)|0)+Math.imul(x,he)|0,a=a+Math.imul(x,ce)|0,s=s+Math.imul(S,ue)|0,r=(r=r+Math.imul(S,le)|0)+Math.imul(O,ue)|0,a=a+Math.imul(O,le)|0;var Ie=(c+(s=s+Math.imul(w,pe)|0)|0)+((8191&(r=(r=r+Math.imul(w,me)|0)+Math.imul(k,pe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,s=Math.imul(D,$),r=(r=Math.imul(D,ee))+Math.imul(q,$)|0,a=Math.imul(q,ee),s=s+Math.imul(R,ie)|0,r=(r=r+Math.imul(R,se)|0)+Math.imul(V,ie)|0,a=a+Math.imul(V,se)|0,s=s+Math.imul(E,ae)|0,r=(r=r+Math.imul(E,ne)|0)+Math.imul(P,ae)|0,a=a+Math.imul(P,ne)|0,s=s+Math.imul(A,he)|0,r=(r=r+Math.imul(A,ce)|0)+Math.imul(C,he)|0,a=a+Math.imul(C,ce)|0,s=s+Math.imul(T,ue)|0,r=(r=r+Math.imul(T,le)|0)+Math.imul(x,ue)|0,a=a+Math.imul(x,le)|0;var Ae=(c+(s=s+Math.imul(S,pe)|0)|0)+((8191&(r=(r=r+Math.imul(S,me)|0)+Math.imul(O,pe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,s=Math.imul(D,ie),r=(r=Math.imul(D,se))+Math.imul(q,ie)|0,a=Math.imul(q,se),s=s+Math.imul(R,ae)|0,r=(r=r+Math.imul(R,ne)|0)+Math.imul(V,ae)|0,a=a+Math.imul(V,ne)|0,s=s+Math.imul(E,he)|0,r=(r=r+Math.imul(E,ce)|0)+Math.imul(P,he)|0,a=a+Math.imul(P,ce)|0,s=s+Math.imul(A,ue)|0,r=(r=r+Math.imul(A,le)|0)+Math.imul(C,ue)|0,a=a+Math.imul(C,le)|0;var Ce=(c+(s=s+Math.imul(T,pe)|0)|0)+((8191&(r=(r=r+Math.imul(T,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((a=a+Math.imul(x,me)|0)+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,s=Math.imul(D,ae),r=(r=Math.imul(D,ne))+Math.imul(q,ae)|0,a=Math.imul(q,ne),s=s+Math.imul(R,he)|0,r=(r=r+Math.imul(R,ce)|0)+Math.imul(V,he)|0,a=a+Math.imul(V,ce)|0,s=s+Math.imul(E,ue)|0,r=(r=r+Math.imul(E,le)|0)+Math.imul(P,ue)|0,a=a+Math.imul(P,le)|0;var Ne=(c+(s=s+Math.imul(A,pe)|0)|0)+((8191&(r=(r=r+Math.imul(A,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((a=a+Math.imul(C,me)|0)+(r>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,s=Math.imul(D,he),r=(r=Math.imul(D,ce))+Math.imul(q,he)|0,a=Math.imul(q,ce),s=s+Math.imul(R,ue)|0,r=(r=r+Math.imul(R,le)|0)+Math.imul(V,ue)|0,a=a+Math.imul(V,le)|0;var Ee=(c+(s=s+Math.imul(E,pe)|0)|0)+((8191&(r=(r=r+Math.imul(E,me)|0)+Math.imul(P,pe)|0))<<13)|0;c=((a=a+Math.imul(P,me)|0)+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,s=Math.imul(D,ue),r=(r=Math.imul(D,le))+Math.imul(q,ue)|0,a=Math.imul(q,le);var Pe=(c+(s=s+Math.imul(R,pe)|0)|0)+((8191&(r=(r=r+Math.imul(R,me)|0)+Math.imul(V,pe)|0))<<13)|0;c=((a=a+Math.imul(V,me)|0)+(r>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Be=(c+(s=Math.imul(D,pe))|0)+((8191&(r=(r=Math.imul(D,me))+Math.imul(q,pe)|0))<<13)|0;return c=((a=Math.imul(q,me))+(r>>>13)|0)+(Be>>>26)|0,Be&=67108863,h[0]=ge,h[1]=ye,h[2]=be,h[3]=ve,h[4]=we,h[5]=ke,h[6]=_e,h[7]=Se,h[8]=Oe,h[9]=Me,h[10]=Te,h[11]=xe,h[12]=Ie,h[13]=Ae,h[14]=Ce,h[15]=Ne,h[16]=Ee,h[17]=Pe,h[18]=Be,0!==c&&(h[19]=c,i.length++),i};function y(e,t,i){i.negative=t.negative^e.negative,i.length=e.length+t.length;for(var s=0,r=0,a=0;a<i.length-1;a++){var n=r;r=0;for(var o=67108863&s,h=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=h;c++){var d=a-c,u=(0|e.words[d])*(0|t.words[c]),l=67108863&u;o=67108863&(l=l+o|0),r+=(n=(n=n+(u/67108864|0)|0)+(l>>>26)|0)>>>26,n&=67108863}i.words[a]=o,s=n,n=r}return 0!==s?i.words[a]=s:i.length--,i._strip()}function b(e,t,i){return y(e,t,i)}function v(e,t){this.x=e,this.y=t}Math.imul||(g=m),a.prototype.mulTo=function(e,t){var i=this.length+e.length;return 10===this.length&&10===e.length?g(this,e,t):i<63?m(this,e,t):i<1024?y(this,e,t):b(this,e,t)},v.prototype.makeRBT=function(e){for(var t=new Array(e),i=a.prototype._countBits(e)-1,s=0;s<e;s++)t[s]=this.revBin(s,i,e);return t},v.prototype.revBin=function(e,t,i){if(0===e||e===i-1)return e;for(var s=0,r=0;r<t;r++)s|=(1&e)<<t-r-1,e>>=1;return s},v.prototype.permute=function(e,t,i,s,r,a){for(var n=0;n<a;n++)s[n]=t[e[n]],r[n]=i[e[n]]},v.prototype.transform=function(e,t,i,s,r,a){this.permute(a,e,t,i,s,r);for(var n=1;n<r;n<<=1)for(var o=n<<1,h=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),d=0;d<r;d+=o)for(var u=h,l=c,f=0;f<n;f++){var p=i[d+f],m=s[d+f],g=i[d+f+n],y=s[d+f+n],b=u*g-l*y;y=u*y+l*g,g=b,i[d+f]=p+g,s[d+f]=m+y,i[d+f+n]=p-g,s[d+f+n]=m-y,f!==o&&(b=h*u-c*l,l=h*l+c*u,u=b)}},v.prototype.guessLen13b=function(e,t){var i=1|Math.max(t,e),s=1&i,r=0;for(i=i/2|0;i;i>>>=1)r++;return 1<<r+1+s},v.prototype.conjugate=function(e,t,i){if(!(i<=1))for(var s=0;s<i/2;s++){var r=e[s];e[s]=e[i-s-1],e[i-s-1]=r,r=t[s],t[s]=-t[i-s-1],t[i-s-1]=-r}},v.prototype.normalize13b=function(e,t){for(var i=0,s=0;s<t/2;s++){var r=8192*Math.round(e[2*s+1]/t)+Math.round(e[2*s]/t)+i;e[s]=67108863&r,i=r<67108864?0:r/67108864|0}return e},v.prototype.convert13b=function(e,t,i,r){for(var a=0,n=0;n<t;n++)a+=0|e[n],i[2*n]=8191&a,a>>>=13,i[2*n+1]=8191&a,a>>>=13;for(n=2*t;n<r;++n)i[n]=0;s(0===a),s(0==(-8192&a))},v.prototype.stub=function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=0;return t},v.prototype.mulp=function(e,t,i){var s=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(s),a=this.stub(s),n=new Array(s),o=new Array(s),h=new Array(s),c=new Array(s),d=new Array(s),u=new Array(s),l=i.words;l.length=s,this.convert13b(e.words,e.length,n,s),this.convert13b(t.words,t.length,c,s),this.transform(n,a,o,h,s,r),this.transform(c,a,d,u,s,r);for(var f=0;f<s;f++){var p=o[f]*d[f]-h[f]*u[f];h[f]=o[f]*u[f]+h[f]*d[f],o[f]=p}return this.conjugate(o,h,s),this.transform(o,h,l,a,s,r),this.conjugate(l,a,s),this.normalize13b(l,s),i.negative=e.negative^t.negative,i.length=e.length+t.length,i._strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),b(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){var t=e<0;t&&(e=-e),s("number"==typeof e),s(e<67108864);for(var i=0,r=0;r<this.length;r++){var a=(0|this.words[r])*e,n=(67108863&a)+(67108863&i);i>>=26,i+=a/67108864|0,i+=n>>>26,this.words[r]=67108863&n}return 0!==i&&(this.words[r]=i,this.length++),t?this.ineg():this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),i=0;i<t.length;i++){var s=i/26|0,r=i%26;t[i]=e.words[s]>>>r&1}return t}(e);if(0===t.length)return new a(1);for(var i=this,s=0;s<t.length&&0===t[s];s++,i=i.sqr());if(++s<t.length)for(var r=i.sqr();s<t.length;s++,r=r.sqr())0!==t[s]&&(i=i.mul(r));return i},a.prototype.iushln=function(e){s("number"==typeof e&&e>=0);var t,i=e%26,r=(e-i)/26,a=67108863>>>26-i<<26-i;if(0!==i){var n=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,h=(0|this.words[t])-o<<i;this.words[t]=h|n,n=o>>>26-i}n&&(this.words[t]=n,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this._strip()},a.prototype.ishln=function(e){return s(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,i){var r;s("number"==typeof e&&e>=0),r=t?(t-t%26)/26:0;var a=e%26,n=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,h=i;if(r-=n,r=Math.max(0,r),h){for(var c=0;c<n;c++)h.words[c]=this.words[c];h.length=n}if(0===n);else if(this.length>n)for(this.length-=n,c=0;c<this.length;c++)this.words[c]=this.words[c+n];else this.words[0]=0,this.length=1;var d=0;for(c=this.length-1;c>=0&&(0!==d||c>=r);c--){var u=0|this.words[c];this.words[c]=d<<26-a|u>>>a,d=u&o}return h&&0!==d&&(h.words[h.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(e,t,i){return s(0===this.negative),this.iushrn(e,t,i)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,r=1<<t;return!(this.length<=i||!(this.words[i]&r))},a.prototype.imaskn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this._strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return s("number"==typeof e),s(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(s("number"==typeof e),s(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,i){var r,a,n=e.length+i;this._expand(n);var o=0;for(r=0;r<e.length;r++){a=(0|this.words[r+i])+o;var h=(0|e.words[r])*t;o=((a-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&a}for(;r<this.length-i;r++)o=(a=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&a;if(0===o)return this._strip();for(s(-1===o),o=0,r=0;r<this.length;r++)o=(a=-(0|this.words[r])+o)>>26,this.words[r]=67108863&a;return this.negative=1,this._strip()},a.prototype._wordDiv=function(e,t){var i=(this.length,e.length),s=this.clone(),r=e,n=0|r.words[r.length-1];0!=(i=26-this._countBits(n))&&(r=r.ushln(i),s.iushln(i),n=0|r.words[r.length-1]);var o,h=s.length-r.length;if("mod"!==t){(o=new a(null)).length=h+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var d=s.clone()._ishlnsubmul(r,1,h);0===d.negative&&(s=d,o&&(o.words[h]=1));for(var u=h-1;u>=0;u--){var l=67108864*(0|s.words[r.length+u])+(0|s.words[r.length+u-1]);for(l=Math.min(l/n|0,67108863),s._ishlnsubmul(r,l,u);0!==s.negative;)l--,s.negative=0,s._ishlnsubmul(r,1,u),s.isZero()||(s.negative^=1);o&&(o.words[u]=l)}return o&&o._strip(),s._strip(),"div"!==t&&0!==i&&s.iushrn(i),{div:o||null,mod:s}},a.prototype.divmod=function(e,t,i){return s(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(r=o.div.neg()),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.iadd(e)),{div:r,mod:n}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.isub(e)),{div:o.div,mod:n}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modrn(e.words[0]))}:this._wordDiv(e,t);var r,n,o},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var i=0!==t.div.negative?t.mod.isub(e):t.mod,s=e.ushrn(1),r=e.andln(1),a=i.cmp(s);return a<0||1===r&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modrn=function(e){var t=e<0;t&&(e=-e),s(e<=67108863);for(var i=(1<<26)%e,r=0,a=this.length-1;a>=0;a--)r=(i*r+(0|this.words[a]))%e;return t?-r:r},a.prototype.modn=function(e){return this.modrn(e)},a.prototype.idivn=function(e){var t=e<0;t&&(e=-e),s(e<=67108863);for(var i=0,r=this.length-1;r>=0;r--){var a=(0|this.words[r])+67108864*i;this.words[r]=a/e|0,i=a%e}return this._strip(),t?this.ineg():this},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new a(1),n=new a(0),o=new a(0),h=new a(1),c=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++c;for(var d=i.clone(),u=t.clone();!t.isZero();){for(var l=0,f=1;0==(t.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(d),n.isub(u)),r.iushrn(1),n.iushrn(1);for(var p=0,m=1;0==(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(d),h.isub(u)),o.iushrn(1),h.iushrn(1);t.cmp(i)>=0?(t.isub(i),r.isub(o),n.isub(h)):(i.isub(t),o.isub(r),h.isub(n))}return{a:o,b:h,gcd:i.iushln(c)}},a.prototype._invmp=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,n=new a(1),o=new a(0),h=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,d=1;0==(t.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(t.iushrn(c);c-- >0;)n.isOdd()&&n.iadd(h),n.iushrn(1);for(var u=0,l=1;0==(i.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(i.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);t.cmp(i)>=0?(t.isub(i),n.isub(o)):(i.isub(t),o.isub(n))}return(r=0===t.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(e),r},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),i=e.clone();t.negative=0,i.negative=0;for(var s=0;t.isEven()&&i.isEven();s++)t.iushrn(1),i.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=t.cmp(i);if(r<0){var a=t;t=i,i=a}else if(0===r||0===i.cmpn(1))break;t.isub(i)}return i.iushln(s)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){s("number"==typeof e);var t=e%26,i=(e-t)/26,r=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var a=r,n=i;0!==a&&n<this.length;n++){var o=0|this.words[n];a=(o+=a)>>>26,o&=67108863,this.words[n]=o}return 0!==a&&(this.words[n]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)t=1;else{i&&(e=-e),s(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,i=this.length-1;i>=0;i--){var s=0|this.words[i],r=0|e.words[i];if(s!==r){s<r?t=-1:s>r&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new T(e)},a.prototype.toRed=function(e){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return s(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return s(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function k(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function O(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else s(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function x(e){T.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}k.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},k.prototype.ireduce=function(e){var t,i=e;do{this.split(i,this.tmp),t=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(t>this.n);var s=t<this.n?-1:i.ucmp(this.p);return 0===s?(i.words[0]=0,i.length=1):s>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},k.prototype.split=function(e,t){e.iushrn(this.n,0,t)},k.prototype.imulK=function(e){return e.imul(this.k)},r(_,k),_.prototype.split=function(e,t){for(var i=4194303,s=Math.min(e.length,9),r=0;r<s;r++)t.words[r]=e.words[r];if(t.length=s,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&i,r=10;r<e.length;r++){var n=0|e.words[r];e.words[r-10]=(n&i)<<4|a>>>22,a=n}a>>>=22,e.words[r-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},_.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,i=0;i<e.length;i++){var s=0|e.words[i];t+=977*s,e.words[i]=67108863&t,t=64*s+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(S,k),r(O,k),r(M,k),M.prototype.imulK=function(e){for(var t=0,i=0;i<e.length;i++){var s=19*(0|e.words[i])+t,r=67108863&s;s>>>=26,e.words[i]=r,t=s}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(w[e])return w[e];var t;if("k256"===e)t=new _;else if("p224"===e)t=new S;else if("p192"===e)t=new O;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new M}return w[e]=t,t},T.prototype._verify1=function(e){s(0===e.negative,"red works only with positives"),s(e.red,"red works only with red numbers")},T.prototype._verify2=function(e,t){s(0==(e.negative|t.negative),"red works only with positives"),s(e.red&&e.red===t.red,"red works only with red numbers")},T.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(d(e,e.umod(this.m)._forceRed(this)),e)},T.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},T.prototype.add=function(e,t){this._verify2(e,t);var i=e.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},T.prototype.iadd=function(e,t){this._verify2(e,t);var i=e.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i},T.prototype.sub=function(e,t){this._verify2(e,t);var i=e.sub(t);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},T.prototype.isub=function(e,t){this._verify2(e,t);var i=e.isub(t);return i.cmpn(0)<0&&i.iadd(this.m),i},T.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},T.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},T.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},T.prototype.isqr=function(e){return this.imul(e,e.clone())},T.prototype.sqr=function(e){return this.mul(e,e)},T.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(s(t%2==1),3===t){var i=this.m.add(new a(1)).iushrn(2);return this.pow(e,i)}for(var r=this.m.subn(1),n=0;!r.isZero()&&0===r.andln(1);)n++,r.iushrn(1);s(!r.isZero());var o=new a(1).toRed(this),h=o.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);0!==this.pow(d,c).cmp(h);)d.redIAdd(h);for(var u=this.pow(d,r),l=this.pow(e,r.addn(1).iushrn(1)),f=this.pow(e,r),p=n;0!==f.cmp(o);){for(var m=f,g=0;0!==m.cmp(o);g++)m=m.redSqr();s(g<p);var y=this.pow(u,new a(1).iushln(p-g-1));l=l.redMul(y),u=y.redSqr(),f=f.redMul(u),p=g}return l},T.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},T.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var i=new Array(16);i[0]=new a(1).toRed(this),i[1]=e;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],e);var r=i[0],n=0,o=0,h=t.bitLength()%26;for(0===h&&(h=26),s=t.length-1;s>=0;s--){for(var c=t.words[s],d=h-1;d>=0;d--){var u=c>>d&1;r!==i[0]&&(r=this.sqr(r)),0!==u||0!==n?(n<<=1,n|=u,(4==++o||0===s&&0===d)&&(r=this.mul(r,i[n]),o=0,n=0)):o=0}h=26}return r},T.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},T.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new x(e)},r(x,T),x.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},x.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},x.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var i=e.imul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},x.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var i=e.mul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n._forceRed(this)},x.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=i.nmd(e),this)},29931:(e,t,i)=>{var s;function r(e){this.rand=e}if(e.exports=function(e){return s||(s=new r(null)),s.generate(e)},e.exports.Rand=r,r.prototype.generate=function(e){return this._rand(e)},r.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),i=0;i<t.length;i++)t[i]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?r.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?r.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(r.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=i(89214);if("function"!=typeof a.randomBytes)throw new Error("Not supported");r.prototype._rand=function(e){return a.randomBytes(e)}}catch(e){}},74497:(e,t,i)=>{var s=i(89509).Buffer;function r(e){s.isBuffer(e)||(e=s.from(e));for(var t=e.length/4|0,i=new Array(t),r=0;r<t;r++)i[r]=e.readUInt32BE(4*r);return i}function a(e){for(;0<e.length;e++)e[0]=0}function n(e,t,i,s,r){for(var a,n,o,h,c=i[0],d=i[1],u=i[2],l=i[3],f=e[0]^t[0],p=e[1]^t[1],m=e[2]^t[2],g=e[3]^t[3],y=4,b=1;b<r;b++)a=c[f>>>24]^d[p>>>16&255]^u[m>>>8&255]^l[255&g]^t[y++],n=c[p>>>24]^d[m>>>16&255]^u[g>>>8&255]^l[255&f]^t[y++],o=c[m>>>24]^d[g>>>16&255]^u[f>>>8&255]^l[255&p]^t[y++],h=c[g>>>24]^d[f>>>16&255]^u[p>>>8&255]^l[255&m]^t[y++],f=a,p=n,m=o,g=h;return a=(s[f>>>24]<<24|s[p>>>16&255]<<16|s[m>>>8&255]<<8|s[255&g])^t[y++],n=(s[p>>>24]<<24|s[m>>>16&255]<<16|s[g>>>8&255]<<8|s[255&f])^t[y++],o=(s[m>>>24]<<24|s[g>>>16&255]<<16|s[f>>>8&255]<<8|s[255&p])^t[y++],h=(s[g>>>24]<<24|s[f>>>16&255]<<16|s[p>>>8&255]<<8|s[255&m])^t[y++],[a>>>=0,n>>>=0,o>>>=0,h>>>=0]}var o=[0,1,2,4,8,16,32,64,128,27,54],h=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var i=[],s=[],r=[[],[],[],[]],a=[[],[],[],[]],n=0,o=0,h=0;h<256;++h){var c=o^o<<1^o<<2^o<<3^o<<4;c=c>>>8^255&c^99,i[n]=c,s[c]=n;var d=e[n],u=e[d],l=e[u],f=257*e[c]^16843008*c;r[0][n]=f<<24|f>>>8,r[1][n]=f<<16|f>>>16,r[2][n]=f<<8|f>>>24,r[3][n]=f,f=16843009*l^65537*u^257*d^16843008*n,a[0][c]=f<<24|f>>>8,a[1][c]=f<<16|f>>>16,a[2][c]=f<<8|f>>>24,a[3][c]=f,0===n?n=o=1:(n=d^e[e[e[l^d]]],o^=e[e[o]])}return{SBOX:i,INV_SBOX:s,SUB_MIX:r,INV_SUB_MIX:a}}();function c(e){this._key=r(e),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var e=this._key,t=e.length,i=t+6,s=4*(i+1),r=[],a=0;a<t;a++)r[a]=e[a];for(a=t;a<s;a++){var n=r[a-1];a%t==0?(n=n<<8|n>>>24,n=h.SBOX[n>>>24]<<24|h.SBOX[n>>>16&255]<<16|h.SBOX[n>>>8&255]<<8|h.SBOX[255&n],n^=o[a/t|0]<<24):t>6&&a%t==4&&(n=h.SBOX[n>>>24]<<24|h.SBOX[n>>>16&255]<<16|h.SBOX[n>>>8&255]<<8|h.SBOX[255&n]),r[a]=r[a-t]^n}for(var c=[],d=0;d<s;d++){var u=s-d,l=r[u-(d%4?0:4)];c[d]=d<4||u<=4?l:h.INV_SUB_MIX[0][h.SBOX[l>>>24]]^h.INV_SUB_MIX[1][h.SBOX[l>>>16&255]]^h.INV_SUB_MIX[2][h.SBOX[l>>>8&255]]^h.INV_SUB_MIX[3][h.SBOX[255&l]]}this._nRounds=i,this._keySchedule=r,this._invKeySchedule=c},c.prototype.encryptBlockRaw=function(e){return n(e=r(e),this._keySchedule,h.SUB_MIX,h.SBOX,this._nRounds)},c.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),i=s.allocUnsafe(16);return i.writeUInt32BE(t[0],0),i.writeUInt32BE(t[1],4),i.writeUInt32BE(t[2],8),i.writeUInt32BE(t[3],12),i},c.prototype.decryptBlock=function(e){var t=(e=r(e))[1];e[1]=e[3],e[3]=t;var i=n(e,this._invKeySchedule,h.INV_SUB_MIX,h.INV_SBOX,this._nRounds),a=s.allocUnsafe(16);return a.writeUInt32BE(i[0],0),a.writeUInt32BE(i[3],4),a.writeUInt32BE(i[2],8),a.writeUInt32BE(i[1],12),a},c.prototype.scrub=function(){a(this._keySchedule),a(this._invKeySchedule),a(this._key)},e.exports.AES=c},62422:(e,t,i)=>{var s=i(74497),r=i(89509).Buffer,a=i(71027),n=i(35717),o=i(83288),h=i(67295),c=i(20685);function d(e,t,i,n){a.call(this);var h=r.alloc(4,0);this._cipher=new s.AES(t);var d=this._cipher.encryptBlock(h);this._ghash=new o(d),i=function(e,t,i){if(12===t.length)return e._finID=r.concat([t,r.from([0,0,0,1])]),r.concat([t,r.from([0,0,0,2])]);var s=new o(i),a=t.length,n=a%16;s.update(t),n&&(n=16-n,s.update(r.alloc(n,0))),s.update(r.alloc(8,0));var h=8*a,d=r.alloc(8);d.writeUIntBE(h,0,8),s.update(d),e._finID=s.state;var u=r.from(e._finID);return c(u),u}(this,i,d),this._prev=r.from(i),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=n,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}n(d,a),d.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=r.alloc(t,0),this._ghash.update(t))}this._called=!0;var i=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(i),this._len+=e.length,i},d.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=h(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var i=0;e.length!==t.length&&i++;for(var s=Math.min(e.length,t.length),r=0;r<s;++r)i+=e[r]^t[r];return i}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},d.prototype.getAuthTag=function(){if(this._decrypt||!r.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},d.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},d.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=d},44696:(e,t,i)=>{var s=i(71494),r=i(66193),a=i(55415);t.createCipher=t.Cipher=s.createCipher,t.createCipheriv=t.Cipheriv=s.createCipheriv,t.createDecipher=t.Decipher=r.createDecipher,t.createDecipheriv=t.Decipheriv=r.createDecipheriv,t.listCiphers=t.getCiphers=function(){return Object.keys(a)}},66193:(e,t,i)=>{var s=i(62422),r=i(89509).Buffer,a=i(45),n=i(25969),o=i(71027),h=i(74497),c=i(13048);function d(e,t,i){o.call(this),this._cache=new u,this._last=void 0,this._cipher=new h.AES(t),this._prev=r.from(i),this._mode=e,this._autopadding=!0}function u(){this.cache=r.allocUnsafe(0)}function l(e,t,i){var o=a[e.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=r.from(i)),"GCM"!==o.mode&&i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);if("string"==typeof t&&(t=r.from(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===o.type?new n(o.module,t,i,!0):"auth"===o.type?new s(o.module,t,i,!0):new d(o.module,t,i)}i(35717)(d,o),d.prototype._update=function(e){var t,i;this._cache.add(e);for(var s=[];t=this._cache.get(this._autopadding);)i=this._mode.decrypt(this,t),s.push(i);return r.concat(s)},d.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");for(var i=-1;++i<t;)if(e[i+(16-t)]!==t)throw new Error("unable to decrypt data");if(16!==t)return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},u.prototype.add=function(e){this.cache=r.concat([this.cache,e])},u.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},u.prototype.flush=function(){if(this.cache.length)return this.cache},t.createDecipher=function(e,t){var i=a[e.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var s=c(t,!1,i.key,i.iv);return l(e,s.key,s.iv)},t.createDecipheriv=l},71494:(e,t,i)=>{var s=i(45),r=i(62422),a=i(89509).Buffer,n=i(25969),o=i(71027),h=i(74497),c=i(13048);function d(e,t,i){o.call(this),this._cache=new l,this._cipher=new h.AES(t),this._prev=a.from(i),this._mode=e,this._autopadding=!0}i(35717)(d,o),d.prototype._update=function(e){var t,i;this._cache.add(e);for(var s=[];t=this._cache.get();)i=this._mode.encrypt(this,t),s.push(i);return a.concat(s)};var u=a.alloc(16,16);function l(){this.cache=a.allocUnsafe(0)}function f(e,t,i){var o=s[e.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=a.from(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof i&&(i=a.from(i)),"GCM"!==o.mode&&i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===o.type?new n(o.module,t,i):"auth"===o.type?new r(o.module,t,i):new d(o.module,t,i)}d.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(u))throw this._cipher.scrub(),new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},l.prototype.add=function(e){this.cache=a.concat([this.cache,e])},l.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},l.prototype.flush=function(){for(var e=16-this.cache.length,t=a.allocUnsafe(e),i=-1;++i<e;)t.writeUInt8(e,i);return a.concat([this.cache,t])},t.createCipheriv=f,t.createCipher=function(e,t){var i=s[e.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var r=c(t,!1,i.key,i.iv);return f(e,r.key,r.iv)}},83288:(e,t,i)=>{var s=i(89509).Buffer,r=s.alloc(16,0);function a(e){var t=s.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function n(e){this.h=e,this.state=s.alloc(16,0),this.cache=s.allocUnsafe(0)}n.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},n.prototype._multiply=function(){for(var e,t,i,s=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],r=[0,0,0,0],n=-1;++n<128;){for(0!=(this.state[~~(n/8)]&1<<7-n%8)&&(r[0]^=s[0],r[1]^=s[1],r[2]^=s[2],r[3]^=s[3]),i=0!=(1&s[3]),t=3;t>0;t--)s[t]=s[t]>>>1|(1&s[t-1])<<31;s[0]=s[0]>>>1,i&&(s[0]=s[0]^225<<24)}this.state=a(r)},n.prototype.update=function(e){var t;for(this.cache=s.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},n.prototype.final=function(e,t){return this.cache.length&&this.ghash(s.concat([this.cache,r],16)),this.ghash(a([0,e,0,t])),this.state},e.exports=n},20685:e=>{e.exports=function(e){for(var t,i=e.length;i--;){if(255!==(t=e.readUInt8(i))){t++,e.writeUInt8(t,i);break}e.writeUInt8(0,i)}}},25292:(e,t,i)=>{var s=i(67295);t.encrypt=function(e,t){var i=s(t,e._prev);return e._prev=e._cipher.encryptBlock(i),e._prev},t.decrypt=function(e,t){var i=e._prev;e._prev=t;var r=e._cipher.decryptBlock(t);return s(r,i)}},86311:(e,t,i)=>{var s=i(89509).Buffer,r=i(67295);function a(e,t,i){var a=t.length,n=r(t,e._cache);return e._cache=e._cache.slice(a),e._prev=s.concat([e._prev,i?t:n]),n}t.encrypt=function(e,t,i){for(var r,n=s.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=s.allocUnsafe(0)),!(e._cache.length<=t.length)){n=s.concat([n,a(e,t,i)]);break}r=e._cache.length,n=s.concat([n,a(e,t.slice(0,r),i)]),t=t.slice(r)}return n}},21510:(e,t,i)=>{var s=i(89509).Buffer;function r(e,t,i){for(var s,r,n=-1,o=0;++n<8;)s=t&1<<7-n?128:0,o+=(128&(r=e._cipher.encryptBlock(e._prev)[0]^s))>>n%8,e._prev=a(e._prev,i?s:r);return o}function a(e,t){var i=e.length,r=-1,a=s.allocUnsafe(e.length);for(e=s.concat([e,s.from([t])]);++r<i;)a[r]=e[r]<<1|e[r+1]>>7;return a}t.encrypt=function(e,t,i){for(var a=t.length,n=s.allocUnsafe(a),o=-1;++o<a;)n[o]=r(e,t[o],i);return n}},71964:(e,t,i)=>{var s=i(89509).Buffer;function r(e,t,i){var r=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=s.concat([e._prev.slice(1),s.from([i?t:r])]),r}t.encrypt=function(e,t,i){for(var a=t.length,n=s.allocUnsafe(a),o=-1;++o<a;)n[o]=r(e,t[o],i);return n}},96009:(e,t,i)=>{var s=i(67295),r=i(89509).Buffer,a=i(20685);function n(e){var t=e._cipher.encryptBlockRaw(e._prev);return a(e._prev),t}t.encrypt=function(e,t){var i=Math.ceil(t.length/16),a=e._cache.length;e._cache=r.concat([e._cache,r.allocUnsafe(16*i)]);for(var o=0;o<i;o++){var h=n(e),c=a+16*o;e._cache.writeUInt32BE(h[0],c+0),e._cache.writeUInt32BE(h[1],c+4),e._cache.writeUInt32BE(h[2],c+8),e._cache.writeUInt32BE(h[3],c+12)}var d=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),s(t,d)}},11084:(e,t)=>{t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},45:(e,t,i)=>{var s={ECB:i(11084),CBC:i(25292),CFB:i(86311),CFB8:i(71964),CFB1:i(21510),OFB:i(18861),CTR:i(96009),GCM:i(96009)},r=i(55415);for(var a in r)r[a].module=s[r[a].mode];e.exports=r},55415:e=>{"use strict";e.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},18861:(e,t,i)=>{var s=i(48764).Buffer,r=i(67295);function a(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}t.encrypt=function(e,t){for(;e._cache.length<t.length;)e._cache=s.concat([e._cache,a(e)]);var i=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),r(t,i)}},25969:(e,t,i)=>{var s=i(74497),r=i(89509).Buffer,a=i(71027);function n(e,t,i,n){a.call(this),this._cipher=new s.AES(t),this._prev=r.from(i),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=n,this._mode=e}i(35717)(n,a),n.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},n.prototype._final=function(){this._cipher.scrub()},e.exports=n},53614:(e,t,i)=>{var s=i(47667),r=i(44696),a=i(45),n=i(99715),o=i(13048);function h(e,t,i){if(e=e.toLowerCase(),a[e])return r.createCipheriv(e,t,i);if(n[e])return new s({key:t,iv:i,mode:e});throw new TypeError("invalid suite type")}function c(e,t,i){if(e=e.toLowerCase(),a[e])return r.createDecipheriv(e,t,i);if(n[e])return new s({key:t,iv:i,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}t.createCipher=t.Cipher=function(e,t){var i,s;if(e=e.toLowerCase(),a[e])i=a[e].key,s=a[e].iv;else{if(!n[e])throw new TypeError("invalid suite type");i=8*n[e].key,s=n[e].iv}var r=o(t,!1,i,s);return h(e,r.key,r.iv)},t.createCipheriv=t.Cipheriv=h,t.createDecipher=t.Decipher=function(e,t){var i,s;if(e=e.toLowerCase(),a[e])i=a[e].key,s=a[e].iv;else{if(!n[e])throw new TypeError("invalid suite type");i=8*n[e].key,s=n[e].iv}var r=o(t,!1,i,s);return c(e,r.key,r.iv)},t.createDecipheriv=t.Decipheriv=c,t.listCiphers=t.getCiphers=function(){return Object.keys(n).concat(r.getCiphers())}},47667:(e,t,i)=>{var s=i(71027),r=i(15251),a=i(35717),n=i(89509).Buffer,o={"des-ede3-cbc":r.CBC.instantiate(r.EDE),"des-ede3":r.EDE,"des-ede-cbc":r.CBC.instantiate(r.EDE),"des-ede":r.EDE,"des-cbc":r.CBC.instantiate(r.DES),"des-ecb":r.DES};function h(e){s.call(this);var t,i=e.mode.toLowerCase(),r=o[i];t=e.decrypt?"decrypt":"encrypt";var a=e.key;n.isBuffer(a)||(a=n.from(a)),"des-ede"!==i&&"des-ede-cbc"!==i||(a=n.concat([a,a.slice(0,8)]));var h=e.iv;n.isBuffer(h)||(h=n.from(h)),this._des=r.create({key:a,iv:h,type:t})}o.des=o["des-cbc"],o.des3=o["des-ede3-cbc"],e.exports=h,a(h,s),h.prototype._update=function(e){return n.from(this._des.update(e))},h.prototype._final=function(){return n.from(this._des.final())}},99715:(e,t)=>{t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},23663:(e,t,i)=>{var s=i(48764).Buffer,r=i(13550),a=i(61798);function n(e){var t,i=e.modulus.byteLength();do{t=new r(a(i))}while(t.cmp(e.modulus)>=0||!t.umod(e.prime1)||!t.umod(e.prime2));return t}function o(e,t){var i=function(e){var t=n(e);return{blinder:t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}(t),a=t.modulus.byteLength(),o=new r(e).mul(i.blinder).umod(t.modulus),h=o.toRed(r.mont(t.prime1)),c=o.toRed(r.mont(t.prime2)),d=t.coefficient,u=t.prime1,l=t.prime2,f=h.redPow(t.exponent1).fromRed(),p=c.redPow(t.exponent2).fromRed(),m=f.isub(p).imul(d).umod(u).imul(l);return p.iadd(m).imul(i.unblinder).umod(t.modulus).toArrayLike(s,"be",a)}o.getr=n,e.exports=o},56042:(e,t,i)=>{e.exports=i(42063)},42063:e=>{"use strict";e.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},42236:e=>{"use strict";e.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},64743:(e,t,i)=>{var s=i(89509).Buffer,r=i(23482),a=i(88473),n=i(35717),o=i(82957),h=i(47753),c=i(42063);function d(e){a.Writable.call(this);var t=c[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=r(t.hash),this._tag=t.id,this._signType=t.sign}function u(e){a.Writable.call(this);var t=c[e];if(!t)throw new Error("Unknown message digest");this._hash=r(t.hash),this._tag=t.id,this._signType=t.sign}function l(e){return new d(e)}function f(e){return new u(e)}Object.keys(c).forEach((function(e){c[e].id=s.from(c[e].id,"hex"),c[e.toLowerCase()]=c[e]})),n(d,a.Writable),d.prototype._write=function(e,t,i){this._hash.update(e),i()},d.prototype.update=function(e,t){return"string"==typeof e&&(e=s.from(e,t)),this._hash.update(e),this},d.prototype.sign=function(e,t){this.end();var i=this._hash.digest(),s=o(i,e,this._hashType,this._signType,this._tag);return t?s.toString(t):s},n(u,a.Writable),u.prototype._write=function(e,t,i){this._hash.update(e),i()},u.prototype.update=function(e,t){return"string"==typeof e&&(e=s.from(e,t)),this._hash.update(e),this},u.prototype.verify=function(e,t,i){"string"==typeof t&&(t=s.from(t,i)),this.end();var r=this._hash.digest();return h(t,r,e,this._signType,this._tag)},e.exports={Sign:l,Verify:f,createSign:l,createVerify:f}},82957:(e,t,i)=>{var s=i(89509).Buffer,r=i(58355),a=i(23663),n=i(86266).ec,o=i(13550),h=i(70980),c=i(42236);function d(e,t,i,a){if((e=s.from(e.toArray())).length<t.byteLength()){var n=s.alloc(t.byteLength()-e.length);e=s.concat([n,e])}var o=i.length,h=function(e,t){e=(e=u(e,t)).mod(t);var i=s.from(e.toArray());if(i.length<t.byteLength()){var r=s.alloc(t.byteLength()-i.length);i=s.concat([r,i])}return i}(i,t),c=s.alloc(o);c.fill(1);var d=s.alloc(o);return d=r(a,d).update(c).update(s.from([0])).update(e).update(h).digest(),c=r(a,d).update(c).digest(),{k:d=r(a,d).update(c).update(s.from([1])).update(e).update(h).digest(),v:c=r(a,d).update(c).digest()}}function u(e,t){var i=new o(e),s=(e.length<<3)-t.bitLength();return s>0&&i.ishrn(s),i}function l(e,t,i){var a,n;do{for(a=s.alloc(0);8*a.length<e.bitLength();)t.v=r(i,t.k).update(t.v).digest(),a=s.concat([a,t.v]);n=u(a,e),t.k=r(i,t.k).update(t.v).update(s.from([0])).digest(),t.v=r(i,t.k).update(t.v).digest()}while(-1!==n.cmp(e));return n}function f(e,t,i,s){return e.toRed(o.mont(i)).redPow(t).fromRed().mod(s)}e.exports=function(e,t,i,r,p){var m=h(t);if(m.curve){if("ecdsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong private key type");return function(e,t){var i=c[t.curve.join(".")];if(!i)throw new Error("unknown curve "+t.curve.join("."));var r=new n(i).keyFromPrivate(t.privateKey).sign(e);return s.from(r.toDER())}(e,m)}if("dsa"===m.type){if("dsa"!==r)throw new Error("wrong private key type");return function(e,t,i){for(var r,a=t.params.priv_key,n=t.params.p,h=t.params.q,c=t.params.g,p=new o(0),m=u(e,h).mod(h),g=!1,y=d(a,h,e,i);!1===g;)p=f(c,r=l(h,y,i),n,h),0===(g=r.invm(h).imul(m.add(a.mul(p))).mod(h)).cmpn(0)&&(g=!1,p=new o(0));return function(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e)),128&t[0]&&(t=[0].concat(t));var i=[48,e.length+t.length+4,2,e.length];return i=i.concat(e,[2,t.length],t),s.from(i)}(p,g)}(e,m,i)}if("rsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong private key type");e=s.concat([p,e]);for(var g=m.modulus.byteLength(),y=[0,1];e.length+y.length+1<g;)y.push(255);y.push(0);for(var b=-1;++b<e.length;)y.push(e[b]);return a(y,m)},e.exports.getKey=d,e.exports.makeKey=l},47753:(e,t,i)=>{var s=i(89509).Buffer,r=i(13550),a=i(86266).ec,n=i(70980),o=i(42236);function h(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}e.exports=function(e,t,i,c,d){var u=n(i);if("ec"===u.type){if("ecdsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");return function(e,t,i){var s=o[i.data.algorithm.curve.join(".")];if(!s)throw new Error("unknown curve "+i.data.algorithm.curve.join("."));var r=new a(s),n=i.data.subjectPrivateKey.data;return r.verify(t,e,n)}(e,t,u)}if("dsa"===u.type){if("dsa"!==c)throw new Error("wrong public key type");return function(e,t,i){var s=i.data.p,a=i.data.q,o=i.data.g,c=i.data.pub_key,d=n.signature.decode(e,"der"),u=d.s,l=d.r;h(u,a),h(l,a);var f=r.mont(s),p=u.invm(a);return 0===o.toRed(f).redPow(new r(t).mul(p).mod(a)).fromRed().mul(c.toRed(f).redPow(l.mul(p).mod(a)).fromRed()).mod(s).mod(a).cmp(l)}(e,t,u)}if("rsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");t=s.concat([d,t]);for(var l=u.modulus.byteLength(),f=[1],p=0;t.length+f.length+2<l;)f.push(255),p++;f.push(0);for(var m=-1;++m<t.length;)f.push(t[m]);f=s.from(f);var g=r.mont(u.modulus);e=(e=new r(e).toRed(g)).redPow(new r(u.publicExponent)),e=s.from(e.fromRed().toArray());var y=p<8?1:0;for(l=Math.min(e.length,f.length),e.length!==f.length&&(y=1),m=-1;++m<l;)y|=e[m]^f[m];return 0===y}},74505:(e,t,i)=>{"use strict";var s=i(48764).Buffer,r=i(34155),a=i(69282),n=i(62292),o=i(30405),h=i(27948),c=i(71619);for(var d in c)t[d]=c[d];function u(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,u.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,a(this.init_done,"close before init"),a(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?o.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||h.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},u.prototype.write=function(e,t,i,s,r,a,n){return this._write(!0,e,t,i,s,r,a,n)},u.prototype.writeSync=function(e,t,i,s,r,a,n){return this._write(!1,e,t,i,s,r,a,n)},u.prototype._write=function(e,i,n,o,h,c,d,u){if(a.equal(arguments.length,8),a(this.init_done,"write before init"),a(this.mode!==t.NONE,"already finalized"),a.equal(!1,this.write_in_progress,"write already in progress"),a.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,a.equal(!1,void 0===i,"must provide flush value"),this.write_in_progress=!0,i!==t.Z_NO_FLUSH&&i!==t.Z_PARTIAL_FLUSH&&i!==t.Z_SYNC_FLUSH&&i!==t.Z_FULL_FLUSH&&i!==t.Z_FINISH&&i!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==n&&(n=s.alloc(0),h=0,o=0),this.strm.avail_in=h,this.strm.input=n,this.strm.next_in=o,this.strm.avail_out=u,this.strm.output=c,this.strm.next_out=d,this.flush=i,!e)return this._process(),this._checkError()?this._afterSync():void 0;var l=this;return r.nextTick((function(){l._process(),l._after()})),this},u.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},u.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=h.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=h.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=h.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=h.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},u.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},u.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},u.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},u.prototype.init=function(e,i,s,r,n){a(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),a(e>=8&&e<=15,"invalid windowBits"),a(i>=-1&&i<=9,"invalid compression level"),a(s>=1&&s<=9,"invalid memlevel"),a(r===t.Z_FILTERED||r===t.Z_HUFFMAN_ONLY||r===t.Z_RLE||r===t.Z_FIXED||r===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(i,e,s,r,n),this._setDictionary()},u.prototype.params=function(){throw new Error("deflateParams Not supported")},u.prototype.reset=function(){this._reset(),this._setDictionary()},u.prototype._init=function(e,i,s,r,a){switch(this.level=e,this.windowBits=i,this.memLevel=s,this.strategy=r,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new n,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=h.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=a,this.write_in_progress=!1,this.init_done=!0},u.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=o.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},u.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=o.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=h.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=u},42635:(e,t,i)=>{"use strict";var s=i(34155),r=i(48764).Buffer,a=i(42830).Transform,n=i(74505),o=i(89539),h=i(69282).ok,c=i(48764).kMaxLength,d="Cannot create final Buffer. It would be larger than 0x"+c.toString(16)+" bytes";n.Z_MIN_WINDOWBITS=8,n.Z_MAX_WINDOWBITS=15,n.Z_DEFAULT_WINDOWBITS=15,n.Z_MIN_CHUNK=64,n.Z_MAX_CHUNK=1/0,n.Z_DEFAULT_CHUNK=16384,n.Z_MIN_MEMLEVEL=1,n.Z_MAX_MEMLEVEL=9,n.Z_DEFAULT_MEMLEVEL=8,n.Z_MIN_LEVEL=-1,n.Z_MAX_LEVEL=9,n.Z_DEFAULT_LEVEL=n.Z_DEFAULT_COMPRESSION;for(var u=Object.keys(n),l=0;l<u.length;l++){var f=u[l];f.match(/^Z/)&&Object.defineProperty(t,f,{enumerable:!0,value:n[f],writable:!1})}for(var p={Z_OK:n.Z_OK,Z_STREAM_END:n.Z_STREAM_END,Z_NEED_DICT:n.Z_NEED_DICT,Z_ERRNO:n.Z_ERRNO,Z_STREAM_ERROR:n.Z_STREAM_ERROR,Z_DATA_ERROR:n.Z_DATA_ERROR,Z_MEM_ERROR:n.Z_MEM_ERROR,Z_BUF_ERROR:n.Z_BUF_ERROR,Z_VERSION_ERROR:n.Z_VERSION_ERROR},m=Object.keys(p),g=0;g<m.length;g++){var y=m[g];p[p[y]]=y}function b(e,t,i){var s=[],a=0;function n(){for(var t;null!==(t=e.read());)s.push(t),a+=t.length;e.once("readable",n)}function o(){var t,n=null;a>=c?n=new RangeError(d):t=r.concat(s,a),s=[],e.close(),i(n,t)}e.on("error",(function(t){e.removeListener("end",o),e.removeListener("readable",n),i(t)})),e.on("end",o),e.end(t),n()}function v(e,t){if("string"==typeof t&&(t=r.from(t)),!r.isBuffer(t))throw new TypeError("Not a string or buffer");var i=e._finishFlushFlag;return e._processChunk(t,i)}function w(e){if(!(this instanceof w))return new w(e);I.call(this,e,n.DEFLATE)}function k(e){if(!(this instanceof k))return new k(e);I.call(this,e,n.INFLATE)}function _(e){if(!(this instanceof _))return new _(e);I.call(this,e,n.GZIP)}function S(e){if(!(this instanceof S))return new S(e);I.call(this,e,n.GUNZIP)}function O(e){if(!(this instanceof O))return new O(e);I.call(this,e,n.DEFLATERAW)}function M(e){if(!(this instanceof M))return new M(e);I.call(this,e,n.INFLATERAW)}function T(e){if(!(this instanceof T))return new T(e);I.call(this,e,n.UNZIP)}function x(e){return e===n.Z_NO_FLUSH||e===n.Z_PARTIAL_FLUSH||e===n.Z_SYNC_FLUSH||e===n.Z_FULL_FLUSH||e===n.Z_FINISH||e===n.Z_BLOCK}function I(e,i){var s=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,a.call(this,e),e.flush&&!x(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!x(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||n.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:n.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!r.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new n.Zlib(i);var o=this;this._hadError=!1,this._handle.onerror=function(e,i){A(o),o._hadError=!0;var s=new Error(e);s.errno=i,s.code=t.codes[i],o.emit("error",s)};var h=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(h=e.level);var c=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(c=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,h,e.memLevel||t.Z_DEFAULT_MEMLEVEL,c,e.dictionary),this._buffer=r.allocUnsafe(this._chunkSize),this._offset=0,this._level=h,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!s._handle},configurable:!0,enumerable:!0})}function A(e,t){t&&s.nextTick(t),e._handle&&(e._handle.close(),e._handle=null)}function C(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(p),writable:!1}),t.Deflate=w,t.Inflate=k,t.Gzip=_,t.Gunzip=S,t.DeflateRaw=O,t.InflateRaw=M,t.Unzip=T,t.createDeflate=function(e){return new w(e)},t.createInflate=function(e){return new k(e)},t.createDeflateRaw=function(e){return new O(e)},t.createInflateRaw=function(e){return new M(e)},t.createGzip=function(e){return new _(e)},t.createGunzip=function(e){return new S(e)},t.createUnzip=function(e){return new T(e)},t.deflate=function(e,t,i){return"function"==typeof t&&(i=t,t={}),b(new w(t),e,i)},t.deflateSync=function(e,t){return v(new w(t),e)},t.gzip=function(e,t,i){return"function"==typeof t&&(i=t,t={}),b(new _(t),e,i)},t.gzipSync=function(e,t){return v(new _(t),e)},t.deflateRaw=function(e,t,i){return"function"==typeof t&&(i=t,t={}),b(new O(t),e,i)},t.deflateRawSync=function(e,t){return v(new O(t),e)},t.unzip=function(e,t,i){return"function"==typeof t&&(i=t,t={}),b(new T(t),e,i)},t.unzipSync=function(e,t){return v(new T(t),e)},t.inflate=function(e,t,i){return"function"==typeof t&&(i=t,t={}),b(new k(t),e,i)},t.inflateSync=function(e,t){return v(new k(t),e)},t.gunzip=function(e,t,i){return"function"==typeof t&&(i=t,t={}),b(new S(t),e,i)},t.gunzipSync=function(e,t){return v(new S(t),e)},t.inflateRaw=function(e,t,i){return"function"==typeof t&&(i=t,t={}),b(new M(t),e,i)},t.inflateRawSync=function(e,t){return v(new M(t),e)},o.inherits(I,a),I.prototype.params=function(e,i,r){if(e<t.Z_MIN_LEVEL||e>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(i!=t.Z_FILTERED&&i!=t.Z_HUFFMAN_ONLY&&i!=t.Z_RLE&&i!=t.Z_FIXED&&i!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+i);if(this._level!==e||this._strategy!==i){var a=this;this.flush(n.Z_SYNC_FLUSH,(function(){h(a._handle,"zlib binding closed"),a._handle.params(e,i),a._hadError||(a._level=e,a._strategy=i,r&&r())}))}else s.nextTick(r)},I.prototype.reset=function(){return h(this._handle,"zlib binding closed"),this._handle.reset()},I.prototype._flush=function(e){this._transform(r.alloc(0),"",e)},I.prototype.flush=function(e,t){var i=this,a=this._writableState;("function"==typeof e||void 0===e&&!t)&&(t=e,e=n.Z_FULL_FLUSH),a.ended?t&&s.nextTick(t):a.ending?t&&this.once("end",t):a.needDrain?t&&this.once("drain",(function(){return i.flush(e,t)})):(this._flushFlag=e,this.write(r.alloc(0),"",t))},I.prototype.close=function(e){A(this,e),s.nextTick(C,this)},I.prototype._transform=function(e,t,i){var s,a=this._writableState,o=(a.ending||a.ended)&&(!e||a.length===e.length);return null===e||r.isBuffer(e)?this._handle?(o?s=this._finishFlushFlag:(s=this._flushFlag,e.length>=a.length&&(this._flushFlag=this._opts.flush||n.Z_NO_FLUSH)),void this._processChunk(e,s,i)):i(new Error("zlib binding closed")):i(new Error("invalid input"))},I.prototype._processChunk=function(e,t,i){var s=e&&e.length,a=this._chunkSize-this._offset,n=0,o=this,u="function"==typeof i;if(!u){var l,f=[],p=0;this.on("error",(function(e){l=e})),h(this._handle,"zlib binding closed");do{var m=this._handle.writeSync(t,e,n,s,this._buffer,this._offset,a)}while(!this._hadError&&b(m[0],m[1]));if(this._hadError)throw l;if(p>=c)throw A(this),new RangeError(d);var g=r.concat(f,p);return A(this),g}h(this._handle,"zlib binding closed");var y=this._handle.write(t,e,n,s,this._buffer,this._offset,a);function b(c,d){if(this&&(this.buffer=null,this.callback=null),!o._hadError){var l=a-d;if(h(l>=0,"have should not go down"),l>0){var m=o._buffer.slice(o._offset,o._offset+l);o._offset+=l,u?o.push(m):(f.push(m),p+=m.length)}if((0===d||o._offset>=o._chunkSize)&&(a=o._chunkSize,o._offset=0,o._buffer=r.allocUnsafe(o._chunkSize)),0===d){if(n+=s-c,s=c,!u)return!0;var g=o._handle.write(t,e,n,s,o._buffer,o._offset,o._chunkSize);return g.callback=b,void(g.buffer=e)}if(!u)return!1;i()}}y.buffer=e,y.callback=b},o.inherits(w,I),o.inherits(k,I),o.inherits(_,I),o.inherits(S,I),o.inherits(O,I),o.inherits(M,I),o.inherits(T,I)},67295:(e,t,i)=>{var s=i(48764).Buffer;e.exports=function(e,t){for(var i=Math.min(e.length,t.length),r=new s(i),a=0;a<i;++a)r[a]=e[a]^t[a];return r}},48764:(e,t,i)=>{"use strict";var s=i(25108);const r=i(79742),a=i(80645),n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const o=2147483647;function h(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,i){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return d(e,t,i)}function d(e,t,i){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const i=0|g(e,t);let s=h(i);const r=s.write(e,t);return r!==i&&(s=s.slice(0,r)),s}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return p(e,t,i);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return p(e,t,i);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const s=e.valueOf&&e.valueOf();if(null!=s&&s!==e)return c.from(s,t,i);const r=function(e){if(c.isBuffer(e)){const t=0|m(e.length),i=h(t);return 0===i.length||e.copy(i,0,0,t),i}return void 0!==e.length?"number"!=typeof e.length||Q(e.length)?h(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return u(e),h(e<0?0:0|m(e))}function f(e){const t=e.length<0?0:0|m(e.length),i=h(t);for(let s=0;s<t;s+=1)i[s]=255&e[s];return i}function p(e,t,i){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),Object.setPrototypeOf(s,c.prototype),s}function m(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const i=e.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===i)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return X(e).length;default:if(r)return s?-1:W(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,i){let s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,i);case"utf8":case"utf-8":return x(this,t,i);case"ascii":return A(this,t,i);case"latin1":case"binary":return C(this,t,i);case"base64":return T(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,i);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function b(e,t,i){const s=e[t];e[t]=e[i],e[i]=s}function v(e,t,i,s,r){if(0===e.length)return-1;if("string"==typeof i?(s=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),Q(i=+i)&&(i=r?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(r)return-1;i=e.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof t&&(t=c.from(t,s)),c.isBuffer(t))return 0===t.length?-1:w(e,t,i,s,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):w(e,[t],i,s,r);throw new TypeError("val must be string, number or Buffer")}function w(e,t,i,s,r){let a,n=1,o=e.length,h=t.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(e.length<2||t.length<2)return-1;n=2,o/=2,h/=2,i/=2}function c(e,t){return 1===n?e[t]:e.readUInt16BE(t*n)}if(r){let s=-1;for(a=i;a<o;a++)if(c(e,a)===c(t,-1===s?0:a-s)){if(-1===s&&(s=a),a-s+1===h)return s*n}else-1!==s&&(a-=a-s),s=-1}else for(i+h>o&&(i=o-h),a=i;a>=0;a--){let i=!0;for(let s=0;s<h;s++)if(c(e,a+s)!==c(t,s)){i=!1;break}if(i)return a}return-1}function k(e,t,i,s){i=Number(i)||0;const r=e.length-i;s?(s=Number(s))>r&&(s=r):s=r;const a=t.length;let n;for(s>a/2&&(s=a/2),n=0;n<s;++n){const s=parseInt(t.substr(2*n,2),16);if(Q(s))return n;e[i+n]=s}return n}function _(e,t,i,s){return Z(W(t,e.length-i),e,i,s)}function S(e,t,i,s){return Z(function(e){const t=[];for(let i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,s)}function O(e,t,i,s){return Z(X(t),e,i,s)}function M(e,t,i,s){return Z(function(e,t){let i,s,r;const a=[];for(let n=0;n<e.length&&!((t-=2)<0);++n)i=e.charCodeAt(n),s=i>>8,r=i%256,a.push(r),a.push(s);return a}(t,e.length-i),e,i,s)}function T(e,t,i){return 0===t&&i===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,i))}function x(e,t,i){i=Math.min(e.length,i);const s=[];let r=t;for(;r<i;){const t=e[r];let a=null,n=t>239?4:t>223?3:t>191?2:1;if(r+n<=i){let i,s,o,h;switch(n){case 1:t<128&&(a=t);break;case 2:i=e[r+1],128==(192&i)&&(h=(31&t)<<6|63&i,h>127&&(a=h));break;case 3:i=e[r+1],s=e[r+2],128==(192&i)&&128==(192&s)&&(h=(15&t)<<12|(63&i)<<6|63&s,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:i=e[r+1],s=e[r+2],o=e[r+3],128==(192&i)&&128==(192&s)&&128==(192&o)&&(h=(15&t)<<18|(63&i)<<12|(63&s)<<6|63&o,h>65535&&h<1114112&&(a=h))}}null===a?(a=65533,n=1):a>65535&&(a-=65536,s.push(a>>>10&1023|55296),a=56320|1023&a),s.push(a),r+=n}return function(e){const t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);let i="",s=0;for(;s<t;)i+=String.fromCharCode.apply(String,e.slice(s,s+=I));return i}(s)}t.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||void 0===s||"function"!=typeof s.error||s.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,i){return d(e,t,i)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,i){return function(e,t,i){return u(e),e<=0?h(e):void 0!==t?"string"==typeof i?h(e).fill(t,i):h(e).fill(t):h(e)}(e,t,i)},c.allocUnsafe=function(e){return l(e)},c.allocUnsafeSlow=function(e){return l(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(Y(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let i=e.length,s=t.length;for(let r=0,a=Math.min(i,s);r<a;++r)if(e[r]!==t[r]){i=e[r],s=t[r];break}return i<s?-1:s<i?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;const s=c.allocUnsafe(t);let r=0;for(i=0;i<e.length;++i){let t=e[i];if(Y(t,Uint8Array))r+t.length>s.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(s,r)):Uint8Array.prototype.set.call(s,t,r);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(s,r)}r+=t.length}return s},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)b(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const i=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(e,t,i,s,r){if(Y(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===s&&(s=0),void 0===r&&(r=this.length),t<0||i>e.length||s<0||r>this.length)throw new RangeError("out of range index");if(s>=r&&t>=i)return 0;if(s>=r)return-1;if(t>=i)return 1;if(this===e)return 0;let a=(r>>>=0)-(s>>>=0),n=(i>>>=0)-(t>>>=0);const o=Math.min(a,n),h=this.slice(s,r),d=e.slice(t,i);for(let e=0;e<o;++e)if(h[e]!==d[e]){a=h[e],n=d[e];break}return a<n?-1:n<a?1:0},c.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},c.prototype.indexOf=function(e,t,i){return v(this,e,t,i,!0)},c.prototype.lastIndexOf=function(e,t,i){return v(this,e,t,i,!1)},c.prototype.write=function(e,t,i,s){if(void 0===t)s="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)s=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,void 0===s&&(s="utf8")):(s=i,i=void 0)}const r=this.length-t;if((void 0===i||i>r)&&(i=r),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let a=!1;for(;;)switch(s){case"hex":return k(this,e,t,i);case"utf8":case"utf-8":return _(this,e,t,i);case"ascii":case"latin1":case"binary":return S(this,e,t,i);case"base64":return O(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const I=4096;function A(e,t,i){let s="";i=Math.min(e.length,i);for(let r=t;r<i;++r)s+=String.fromCharCode(127&e[r]);return s}function C(e,t,i){let s="";i=Math.min(e.length,i);for(let r=t;r<i;++r)s+=String.fromCharCode(e[r]);return s}function N(e,t,i){const s=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>s)&&(i=s);let r="";for(let s=t;s<i;++s)r+=J[e[s]];return r}function E(e,t,i){const s=e.slice(t,i);let r="";for(let e=0;e<s.length-1;e+=2)r+=String.fromCharCode(s[e]+256*s[e+1]);return r}function P(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,i,s,r,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(i+s>e.length)throw new RangeError("Index out of range")}function R(e,t,i,s,r){U(t,s,r,e,i,7);let a=Number(t&BigInt(4294967295));e[i++]=a,a>>=8,e[i++]=a,a>>=8,e[i++]=a,a>>=8,e[i++]=a;let n=Number(t>>BigInt(32)&BigInt(4294967295));return e[i++]=n,n>>=8,e[i++]=n,n>>=8,e[i++]=n,n>>=8,e[i++]=n,i}function V(e,t,i,s,r){U(t,s,r,e,i,7);let a=Number(t&BigInt(4294967295));e[i+7]=a,a>>=8,e[i+6]=a,a>>=8,e[i+5]=a,a>>=8,e[i+4]=a;let n=Number(t>>BigInt(32)&BigInt(4294967295));return e[i+3]=n,n>>=8,e[i+2]=n,n>>=8,e[i+1]=n,n>>=8,e[i]=n,i+8}function L(e,t,i,s,r,a){if(i+s>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function D(e,t,i,s,r){return t=+t,i>>>=0,r||L(e,0,i,4),a.write(e,t,i,s,23,4),i+4}function q(e,t,i,s,r){return t=+t,i>>>=0,r||L(e,0,i,8),a.write(e,t,i,s,52,8),i+8}c.prototype.slice=function(e,t){const i=this.length;(e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e);const s=this.subarray(e,t);return Object.setPrototypeOf(s,c.prototype),s},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||P(e,t,this.length);let s=this[e],r=1,a=0;for(;++a<t&&(r*=256);)s+=this[e+a]*r;return s},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||P(e,t,this.length);let s=this[e+--t],r=1;for(;t>0&&(r*=256);)s+=this[e+--t]*r;return s},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=$((function(e){H(e>>>=0,"offset");const t=this[e],i=this[e+7];void 0!==t&&void 0!==i||z(e,this.length-8);const s=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,r=this[++e]+256*this[++e]+65536*this[++e]+i*2**24;return BigInt(s)+(BigInt(r)<<BigInt(32))})),c.prototype.readBigUInt64BE=$((function(e){H(e>>>=0,"offset");const t=this[e],i=this[e+7];void 0!==t&&void 0!==i||z(e,this.length-8);const s=t*2**24+65536*this[++e]+256*this[++e]+this[++e],r=this[++e]*2**24+65536*this[++e]+256*this[++e]+i;return(BigInt(s)<<BigInt(32))+BigInt(r)})),c.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||P(e,t,this.length);let s=this[e],r=1,a=0;for(;++a<t&&(r*=256);)s+=this[e+a]*r;return r*=128,s>=r&&(s-=Math.pow(2,8*t)),s},c.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||P(e,t,this.length);let s=t,r=1,a=this[e+--s];for(;s>0&&(r*=256);)a+=this[e+--s]*r;return r*=128,a>=r&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);const i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},c.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);const i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=$((function(e){H(e>>>=0,"offset");const t=this[e],i=this[e+7];void 0!==t&&void 0!==i||z(e,this.length-8);const s=this[e+4]+256*this[e+5]+65536*this[e+6]+(i<<24);return(BigInt(s)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=$((function(e){H(e>>>=0,"offset");const t=this[e],i=this[e+7];void 0!==t&&void 0!==i||z(e,this.length-8);const s=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+i)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),a.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),a.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),a.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),a.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,i,s){e=+e,t>>>=0,i>>>=0,s||B(this,e,t,i,Math.pow(2,8*i)-1,0);let r=1,a=0;for(this[t]=255&e;++a<i&&(r*=256);)this[t+a]=e/r&255;return t+i},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,i,s){e=+e,t>>>=0,i>>>=0,s||B(this,e,t,i,Math.pow(2,8*i)-1,0);let r=i-1,a=1;for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255;return t+i},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||B(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=$((function(e,t=0){return R(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=$((function(e,t=0){return V(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,i,s){if(e=+e,t>>>=0,!s){const s=Math.pow(2,8*i-1);B(this,e,t,i,s-1,-s)}let r=0,a=1,n=0;for(this[t]=255&e;++r<i&&(a*=256);)e<0&&0===n&&0!==this[t+r-1]&&(n=1),this[t+r]=(e/a>>0)-n&255;return t+i},c.prototype.writeIntBE=function(e,t,i,s){if(e=+e,t>>>=0,!s){const s=Math.pow(2,8*i-1);B(this,e,t,i,s-1,-s)}let r=i-1,a=1,n=0;for(this[t+r]=255&e;--r>=0&&(a*=256);)e<0&&0===n&&0!==this[t+r+1]&&(n=1),this[t+r]=(e/a>>0)-n&255;return t+i},c.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=$((function(e,t=0){return R(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=$((function(e,t=0){return V(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,i){return D(this,e,t,!0,i)},c.prototype.writeFloatBE=function(e,t,i){return D(this,e,t,!1,i)},c.prototype.writeDoubleLE=function(e,t,i){return q(this,e,t,!0,i)},c.prototype.writeDoubleBE=function(e,t,i){return q(this,e,t,!1,i)},c.prototype.copy=function(e,t,i,s){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<i&&(s=i),s===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-i&&(s=e.length-t+i);const r=s-i;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,i,s):Uint8Array.prototype.set.call(e,this.subarray(i,s),t),r},c.prototype.fill=function(e,t,i,s){if("string"==typeof e){if("string"==typeof t?(s=t,t=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!c.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===e.length){const t=e.charCodeAt(0);("utf8"===s&&t<128||"latin1"===s)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;let r;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(r=t;r<i;++r)this[r]=e;else{const a=c.isBuffer(e)?e:c.from(e,s),n=a.length;if(0===n)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<i-t;++r)this[r+t]=a[r%n]}return this};const G={};function F(e,t,i){G[e]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function j(e){let t="",i=e.length;const s="-"===e[0]?1:0;for(;i>=s+4;i-=3)t=`_${e.slice(i-3,i)}${t}`;return`${e.slice(0,i)}${t}`}function U(e,t,i,s,r,a){if(e>i||e<t){const s="bigint"==typeof t?"n":"";let r;throw r=a>3?0===t||t===BigInt(0)?`>= 0${s} and < 2${s} ** ${8*(a+1)}${s}`:`>= -(2${s} ** ${8*(a+1)-1}${s}) and < 2 ** ${8*(a+1)-1}${s}`:`>= ${t}${s} and <= ${i}${s}`,new G.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,i){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+i]||z(t,e.length-(i+1))}(s,r,a)}function H(e,t){if("number"!=typeof e)throw new G.ERR_INVALID_ARG_TYPE(t,"number",e)}function z(e,t,i){if(Math.floor(e)!==e)throw H(e,i),new G.ERR_OUT_OF_RANGE(i||"offset","an integer",e);if(t<0)throw new G.ERR_BUFFER_OUT_OF_BOUNDS;throw new G.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(e,t,i){let s=`The value of "${e}" is out of range.`,r=i;return Number.isInteger(i)&&Math.abs(i)>2**32?r=j(String(i)):"bigint"==typeof i&&(r=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(r=j(r)),r+="n"),s+=` It must be ${t}. Received ${r}`,s}),RangeError);const K=/[^+/0-9A-Za-z-_]/g;function W(e,t){let i;t=t||1/0;const s=e.length;let r=null;const a=[];for(let n=0;n<s;++n){if(i=e.charCodeAt(n),i>55295&&i<57344){if(!r){if(i>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(n+1===s){(t-=3)>-1&&a.push(239,191,189);continue}r=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function X(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Z(e,t,i,s){let r;for(r=0;r<s&&!(r+i>=t.length||r>=e.length);++r)t[r+i]=e[r];return r}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let i=0;i<16;++i){const s=16*i;for(let r=0;r<16;++r)t[s+r]=e[i]+e[r]}return t}();function $(e){return"undefined"==typeof BigInt?ee:e}function ee(){throw new Error("BigInt not supported")}},50584:e=>{e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},21924:(e,t,i)=>{"use strict";var s=i(40210),r=i(55559),a=r(s("String.prototype.indexOf"));e.exports=function(e,t){var i=s(e,!!t);return"function"==typeof i&&a(e,".prototype.")>-1?r(i):i}},55559:(e,t,i)=>{"use strict";var s=i(58612),r=i(40210),a=r("%Function.prototype.apply%"),n=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||s.call(n,a),h=r("%Object.getOwnPropertyDescriptor%",!0),c=r("%Object.defineProperty%",!0),d=r("%Math.max%");if(c)try{c({},"a",{value:1})}catch(e){c=null}e.exports=function(e){var t=o(s,n,arguments);if(h&&c){var i=h(t,"length");i.configurable&&c(t,"length",{value:1+d(0,e.length-(arguments.length-1))})}return t};var u=function(){return o(s,a,arguments)};c?c(e.exports,"apply",{value:u}):e.exports.apply=u},11853:(e,t,i)=>{"use strict";const s=i(48819),r=i(6832),a=i(85806),n=i(73449),o="1.64.31";s.ccxtVersion=o;const h={aax:i(89133),ascendex:i(32300),bequant:i(21366),bibox:i(77838),bigone:i(64400),binance:i(96056),binancecoinm:i(42483),binanceus:i(3393),binanceusdm:i(12137),bit2c:i(12455),bitbank:i(99703),bitbay:i(93528),bitbns:i(98875),bitcoincom:i(23334),bitfinex:i(17965),bitfinex2:i(5328),bitflyer:i(85421),bitforex:i(52519),bitget:i(20829),bithumb:i(29202),bitmart:i(69102),bitmex:i(87763),bitpanda:i(93223),bitrue:i(68120),bitso:i(25686),bitstamp:i(7653),bitstamp1:i(12554),bittrex:i(9461),bitvavo:i(54253),bl3p:i(85480),btcalpha:i(66492),btcbox:i(6142),btcmarkets:i(69284),btctradeua:i(20233),btcturk:i(51899),buda:i(64875),bw:i(41520),bybit:i(73803),bytetrade:i(2291),cdax:i(89124),cex:i(74228),coinbase:i(62939),coinbaseprime:i(18806),coinbasepro:i(51241),coincheck:i(51770),coinex:i(78427),coinfalcon:i(56810),coinmate:i(70948),coinone:i(69261),coinspot:i(98974),crex24:i(57268),currencycom:i(49610),delta:i(34237),deribit:i(41680),digifinex:i(6755),eqonex:i(68170),equos:i(16159),exmo:i(74101),flowbtc:i(63513),ftx:i(89636),ftxus:i(31087),gateio:i(94663),gemini:i(23094),hitbtc:i(28267),hitbtc3:i(22683),hollaex:i(94693),huobi:i(68639),huobijp:i(54072),huobipro:i(53775),idex:i(22574),independentreserve:i(73585),indodax:i(14535),itbit:i(21431),kraken:i(66594),kucoin:i(6987),kuna:i(14400),latoken:i(22444),latoken1:i(45557),lbank:i(31524),liquid:i(24352),luno:i(85439),lykke:i(25591),mercado:i(47551),mexc:i(10085),ndax:i(61985),novadax:i(11541),oceanex:i(7426),okcoin:i(21384),okex:i(58579),okex3:i(5645),okex5:i(62597),paymium:i(30757),phemex:i(50788),poloniex:i(67497),probit:i(96818),qtrade:i(82715),ripio:i(2041),stex:i(80842),therock:i(9269),tidebit:i(51783),tidex:i(46974),timex:i(41378),upbit:i(7705),vcc:i(43571),wavesexchange:i(86091),whitebit:i(70390),xena:i(29741),yobit:i(65927),zaif:i(34422),zb:i(90927),zipmex:i(55492),zonda:i(79264)};e.exports=Object.assign({version:o,Exchange:s,Precise:r,exchanges:Object.keys(h)},h,a,n)},89133:(e,t,i)=>{"use strict";const s=i(48819),{ArgumentsRequired:r,AuthenticationError:a,ExchangeError:n,ExchangeNotAvailable:o,OrderNotFound:h,InvalidOrder:c,CancelPending:d,RateLimitExceeded:u,InsufficientFunds:l,BadRequest:f,BadSymbol:p,PermissionDenied:m}=i(73449),{TICK_SIZE:g}=i(62115),y=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"aax",name:"AAX",countries:["MT"],enableRateLimit:!0,rateLimit:500,version:"v2",hostname:"aaxpro.com",certified:!0,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchStatus:!0,fetchTicker:"emulated",fetchTickers:!0,fetchTrades:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","12h":"12h","1d":"1d","3d":"3d","1w":"1w"},urls:{logo:"https://user-images.githubusercontent.com/1294454/104140087-a27f2580-53c0-11eb-87c1-5d9e81208fe9.jpg",test:{v1:"https://api.testnet.{hostname}/marketdata/v1",public:"https://api.testnet.{hostname}",private:"https://api.testnet.{hostname}"},api:{v1:"https://api.{hostname}/marketdata/v1",public:"https://api.{hostname}",private:"https://api.{hostname}"},www:"https://www.aaxpro.com",doc:"https://www.aaxpro.com/apidoc/index.html",fees:"https://www.aaxpro.com/en-US/fees/",referral:"https://www.aaxpro.com/invite/sign-up?inviteCode=JXGm5Fy7R2MB"},api:{v1:{get:["getHistMarketData"]},public:{get:["currencies","announcement/maintenance","instruments","market/orderbook","futures/position/openInterest","market/tickers","market/candles","market/history/candles","market/trades","market/markPrice","futures/funding/predictedFunding/{symbol}","futures/funding/prevFundingRate/{symbol}","market/candles/index"]},private:{get:["user/info","account/balances","account/deposit/address","spot/trades","spot/openOrders","spot/orders","futures/position","futures/position/closed","futures/trades","futures/openOrders","futures/orders","futures/funding/predictedFundingFee/{symbol}"],post:["account/transfer","spot/orders","spot/orders/cancelAllOnTimeout","futures/orders","futures/orders/cancelAllOnTimeout","futures/position/sltp","futures/position/close","futures/position/leverage","futures/position/margin"],put:["spot/orders","futures/orders"],delete:["spot/orders/cancel/{orderID}","spot/orders/cancel/all","futures/orders/cancel/{orderID}","futures/orders/cancel/all"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:this.parseNumber("0.0006"),taker:this.parseNumber("0.001")},funding:{tierBased:!1,percentage:!0,withdraw:{}}},commonCurrencies:{XBT:"XBT"},exceptions:{exact:{2002:l,2003:h,10003:f,10006:a,10007:a,11007:a,20001:l,20009:c,3e4:h,30001:c,30004:c,30005:c,30006:c,30007:c,30008:c,30009:c,30010:c,30011:d,30012:f,30013:p,30014:h,30015:c,30016:n,30017:c,30018:c,30019:c,30020:c,30021:c,30022:c,30023:c,30024:c,30025:c,30026:c,30027:c,30028:p,30029:c,30030:c,30031:c,30032:c,30033:c,30034:u,30035:u,30036:o,30037:c,30038:n,30039:l,30040:c,30041:c,30042:c,30043:c,30044:f,30045:c,30046:c,30047:c,30048:c,30049:c,30050:c,40004:f,40009:u,40102:a,40103:a,40303:m,41001:f,41002:f,42001:o,50001:n,50002:n},broad:{}},precisionMode:g,options:{defaultType:"spot",types:{spot:"SPTP",future:"FUTP",otc:"F2CP",saving:"VLTP"},accounts:{SPTP:"spot",FUTP:"future",F2CP:"otc",VLTP:"saving"},networks:{ETH:"ERC20",TRX:"TRC20",SOL:"SPL"}}})}async fetchStatus(e={}){const t=await this.publicGetAnnouncementMaintenance(e),i=this.safeValue(t,"data",{}),s=this.milliseconds(),r=this.parse8601(this.safeString(i,"startTime")),a=this.parse8601(this.safeString(i,"endTime")),n={updated:this.safeInteger(t,"ts",s)};if(void 0!==a){const e=void 0===r||s<r,t=s>a||e;n.eta=a,n.status=t?"ok":"maintenance"}return this.status=this.extend(this.status,n),this.status}async fetchMarkets(e={}){const t=await this.publicGetInstruments(e),i=this.safeValue(t,"data"),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"symbol"),a=this.safeString(t,"base"),n=this.safeString(t,"quote"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c="enable"===this.safeString(t,"status"),d=this.safeNumber(t,"takerFee"),u=this.safeNumber(t,"makerFee"),l=this.safeString(t,"type");let f,p,m;const g="spot"===l,y="futures"===l,b=this.safeStringLower(t,"settleType");void 0!==b&&(f="inverse"===b,p="vanilla"===b,m="quanto"===b);let v=r;"spot"===l&&(v=o+"/"+h);const w={amount:this.safeNumber(t,"lotSize"),price:this.safeNumber(t,"tickSize")};s.push({id:r,symbol:v,base:o,quote:h,baseId:a,quoteId:n,type:l,spot:g,futures:y,inverse:f,linear:p,quanto:m,precision:w,info:t,active:c,taker:d,maker:u,percentage:!1,tierBased:!0,limits:{amount:{min:this.safeString(t,"minQuantity"),max:this.safeString(t,"maxQuantity")},price:{min:this.safeString(t,"minPrice"),max:this.safeString(t,"maxPrice")},cost:{min:void 0,max:void 0}}})}return s}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={},s=this.safeValue(t,"data",[]);for(let e=0;e<s.length;e++){const t=s[e],r=this.safeString(t,"chain"),a=this.safeString(t,"displayName"),n=this.safeCurrencyCode(r),o=this.safeNumber(t,"withdrawPrecision"),h=this.safeValue(t,"enableWithdraw"),c=this.safeValue(t,"enableDeposit"),d=this.safeNumber(t,"withdrawFee"),u=this.safeValue(t,"visible"),l=h&&c&&u,f=this.safeString(t,"network");i[n]={id:r,name:a,code:n,precision:o,info:t,active:l,fee:d,network:f,limits:{deposit:{min:this.safeNumber(t,"depositMin"),max:void 0},withdraw:{min:this.safeNumber(t,"withdrawMin"),max:void 0}}}}return i}parseTicker(e,t){const i=this.safeInteger(e,"t"),s=this.safeString(e,"s"),r=this.safeSymbol(s,t),a=this.safeNumber(e,"c"),n=this.safeNumber(e,"o"),o=this.safeNumber(e,"v");return this.safeTicker({symbol:r,timestamp:i,datetime:void 0,high:this.safeNumber(e,"h"),low:this.safeNumber(e,"l"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:n,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:o,info:e},t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketTickers(t),s=this.safeValue(i,"tickers",[]),r=[],a=this.safeInteger(i,"t");for(let e=0;e<s.length;e++){const t=this.parseTicker(this.extend(s[e],{t:a}));r.push(t)}return this.filterByArray(r,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e);if(void 0===t)t=20;else if(20!==t&&50!==t)throw new f(this.id+" fetchOrderBook() limit argument must be undefined, 20 or 50");const r={symbol:s.id,level:t},a=await this.publicGetMarketOrderbook(this.extend(r,i)),n=this.safeInteger(a,"t");return this.parseOrderBook(a,e,n)}parseTrade(e,t){let i=this.safeInteger(e,"t");void 0===i&&(i=this.parse8601(this.safeString(e,"createTime")));let s=this.safeString2(e,"tid","tradeID");s=this.safeString(e,"i",s);const r=this.safeString(e,"symbol"),a=(t=this.safeMarket(r,t)).symbol;let n=this.safeString2(e,"p","filledPrice");const o=this.safeString2(e,"q","filledQty"),h=this.safeString(e,"orderID"),c=this.safeValue(e,"taker");let d;void 0!==c&&(d=c?"taker":"maker");let u=this.safeString(e,"side");"1"===u?u="buy":"2"===u&&(u="sell"),void 0===u&&(u="-"===n[0]?"sell":"buy"),n=y.stringAbs(n);const l=this.parseOrderType(this.safeString(e,"orderType"));let f;const p=this.safeString(e,"commission");if(void 0!==p){let e;void 0!==t&&("buy"===u?e=t.base:"sell"===u&&(e=t.quote)),f={currency:e,cost:p}}return this.safeTrade({info:e,id:s,timestamp:i,datetime:this.iso8601(i),symbol:a,type:l,side:u,order:h,takerOrMaker:d,price:n,amount:o,cost:void 0,fee:f},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e);i=void 0===i?2e3:i,i=Math.min(i,2e3);const a={symbol:r.id,limit:i},n=await this.publicGetMarketTrades(a),o=this.safeValue(n,"trades",[]);return this.parseTrades(o,r,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,5),this.safeNumber(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4)]}async fetchOHLCV(e,t="1h",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id,timeFrame:this.timeframes[t]};s=void 0===s?500:s;const o=this.parseTimeframe(t);if(void 0===i){const e=this.seconds();n.start=e-o*s,n.end=e}else{const e=parseInt(i/1e3);n.start=e,n.end=this.sum(e,o*s)}const h=await this.publicGetMarketHistoryCandles(this.extend(n,r)),c=this.safeValue(h,"data",[]);return this.parseOHLCVs(c,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString2(this.options,"fetchBalance","defaultType","spot"),i=this.safeString(e,"type",t),s=this.safeValue(this.options,"types",{}),r=this.safeString(s,i,i),a={purseType:r};e=this.omit(e,"type");const n=await this.privateGetAccountBalances(this.extend(a,e)),o=this.safeValue(n,"data"),h=this.safeInteger(n,"ts"),c={info:n,timestamp:h,datetime:this.iso8601(h)};for(let e=0;e<o.length;e++){const t=o[e];if(this.safeString(t,"purseType")===r){const e=this.safeString(t,"currency"),i=this.safeCurrencyCode(e),s=this.account();s.free=this.safeString(t,"available"),s.used=this.safeString(t,"unavailable"),c[i]=s}}return this.parseBalance(c)}async createOrder(e,t,i,s,a,n={}){let o=t.toUpperCase();const h=i.toUpperCase();await this.loadMarkets();const c=this.market(e),d={symbol:c.id,orderQty:this.amountToPrecision(e,s),side:h},u=this.safeString2(n,"clOrdID","clientOrderId");void 0!==u&&(d.clOrdID=u),void 0!==this.safeValue(n,"postOnly",!1)&&(d.execInst="Post-Only"),n=this.omit(n,["clOrdID","clientOrderId","postOnly"]);const l=this.safeNumber(n,"stopPrice");if(void 0===l){if("STOP-LIMIT"===o||"STOP"===o)throw new r(this.id+" createOrder() requires a stopPrice parameter for "+o+" orders")}else"LIMIT"===o?o="STOP-LIMIT":"MARKET"===o&&(o="STOP"),d.stopPrice=this.priceToPrecision(e,l),n=this.omit(n,"stopPrice");let f;"LIMIT"!==o&&"STOP-LIMIT"!==o||(d.price=this.priceToPrecision(e,a)),d.orderType=o,c.spot?f="privatePostSpotOrders":c.futures&&(f="privatePostFuturesOrders");const p=await this[f](this.extend(d,n)),m=this.safeValue(p,"data",{});return this.parseOrder(m,c)}async editOrder(e,t,i,s,r,a,n={}){await this.loadMarkets();const o=this.market(t),h={orderID:e},c=this.safeNumber(n,"stopPrice");let d;void 0!==c&&(h.stopPrice=this.priceToPrecision(t,c),n=this.omit(n,"stopPrice")),void 0!==a&&(h.price=this.priceToPrecision(t,a)),void 0!==r&&(h.orderQty=this.amountToPrecision(t,r)),o.spot?d="privatePutSpotOrders":o.futures&&(d="privatePutFuturesOrders");const u=await this[d](this.extend(h,n)),l=this.safeValue(u,"data",{});return this.parseOrder(l,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderID:e};let r;const a=this.safeString2(this.options,"cancelOrder","defaultType","spot");let n,o=this.safeString(i,"type",a);i=this.omit(i,"type"),void 0!==t&&(n=this.market(t),o=n.type),"spot"===o?r="privateDeleteSpotOrdersCancelOrderID":"futures"===o&&(r="privateDeleteFuturesOrdersCancelOrderID");const h=await this[r](this.extend(s,i)),c=this.safeValue(h,"data",{});return this.parseOrder(c,n)}async cancelAllOrders(e,t={}){if(void 0===e)throw new r(this.id+" cancelAllOrders() requires a symbol argument");await this.loadMarkets();const i=this.market(e),s={symbol:i.id};let a;return i.spot?a="privateDeleteSpotOrdersCancelAll":i.futures&&(a="privateDeleteFuturesOrdersCancelAll"),await this[a](this.extend(s,t))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.safeString2(this.options,"fetchOrder","defaultType","spot");i.type=this.safeString(i,"type",s);const r={},a=this.safeString2(i,"clOrdID","clientOrderId");void 0===a?r.orderID=e:(r.clOrdID=a,i=this.omit(i,["clOrdID","clientOrderId"]));const n=await this.fetchOrders(t,void 0,void 0,this.extend(r,i)),o=this.safeValue(n,0);if(void 0===o)throw new h(void 0===a?this.id+" fetchOrder() could not find order id "+e:this.id+" fetchOrder() could not find order clientOrderID "+a);return o}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={},a=this.safeString2(this.options,"fetchOpenOrders","defaultType","spot");let n,o=this.safeString(s,"type",a);s=this.omit(s,"type"),void 0!==e&&(n=this.market(e),r.symbol=n.id,o=n.type);const h=this.safeString2(s,"clOrdID","clientOrderId");let c;void 0!==h&&(r.clOrdID=h,s=this.omit(s,["clOrdID","clientOrderId"])),"spot"===o?c="privateGetSpotOpenOrders":"futures"===o&&(c="privateGetFuturesOpenOrders"),void 0!==i&&(r.pageSize=i);const d=await this[c](this.extend(r,s)),u=this.safeValue(d,"data",{}),l=this.safeValue(u,"list",[]);return this.parseOrders(l,n,t,i)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({orderStatus:"2"},s))}async fetchCanceledOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({orderStatus:"3"},s))}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a;const n=this.safeString2(this.options,"fetchOrders","defaultType","spot");let o,h=this.safeString(s,"type",n);s=this.omit(s,"type"),void 0!==e&&(o=this.market(e),r.symbol=o.id,h=o.type),"spot"===h?a="privateGetSpotOrders":"futures"===h&&(a="privateGetFuturesOrders");const c=this.safeString2(s,"clOrdID","clientOrderId");void 0!==c&&(r.clOrdID=c,s=this.omit(s,["clOrdID","clientOrderId"])),void 0!==i&&(r.pageSize=i),void 0!==t&&(r.startDate=this.yyyymmdd(t));const d=await this[a](this.extend(r,s)),u=this.safeValue(d,"data",{}),l=this.safeValue(u,"list",[]);return this.parseOrders(l,o,t,i)}parseOrderStatus(e){return this.safeString({0:"open",1:"open",2:"open",3:"closed",4:"canceled",5:"canceled",6:"rejected",10:"expired",11:"rejected"},e,e)}parseOrderType(e){return this.safeString({1:"market",2:"limit",3:"stop",4:"stop-limit",7:"stop-loss",8:"take-profit"},e,e)}parseTimeInForce(e){return this.safeString({1:"GTC",3:"IOC",4:"FOK"},e,e)}parseOrder(e,t){let i=this.safeValue(e,"createTime");"string"==typeof i&&(i=this.parse8601(i));const s=this.parseOrderStatus(this.safeString(e,"orderStatus")),r=this.parseOrderType(this.safeString(e,"orderType"));let a=this.safeString(e,"side");"1"===a?a="buy":"2"===a&&(a="sell");const n=this.safeString(e,"orderID"),o=this.safeString(e,"clOrdID"),h=this.safeString(e,"symbol"),c=(t=this.safeMarket(h,t)).symbol,d=this.safeString(e,"price"),u=this.safeNumber(e,"stopPrice"),l=this.parseTimeInForce(this.safeString(e,"timeInForce")),f="Post-Only"===this.safeString(e,"execInst"),p=this.safeString(e,"avgPrice"),m=this.safeString(e,"orderQty"),g=this.safeString(e,"cumQty");let b=this.safeString(e,"leavesQty");y.stringEquals(g,"0")&&y.stringEquals(b,"0")&&(b=void 0);let v,w=this.safeValue(e,"transactTime");"string"==typeof w&&(w=this.parse8601(w));const k=this.safeNumber(e,"commission");if(void 0!==k){let e;void 0!==t&&("buy"===a?e=t.base:"sell"===a&&(e=t.quote)),v={currency:e,cost:k}}return this.safeOrder2({id:n,info:e,clientOrderId:o,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:w,status:s,symbol:c,type:r,timeInForce:l,postOnly:f,side:a,price:d,stopPrice:u,average:p,amount:m,filled:g,remaining:b,cost:void 0,trades:void 0,fee:v},t)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a;const n=this.safeString2(this.options,"fetchMyTrades","defaultType","spot");let o,h=this.safeString(s,"type",n);s=this.omit(s,"type"),void 0!==e&&(o=this.market(e),r.symbol=o.id,h=o.type),"spot"===h?a="privateGetSpotTrades":"futures"===h&&(a="privateGetFuturesTrades"),void 0!==i&&(r.pageSize=i),void 0!==t&&(r.startDate=this.yyyymmdd(t));const c=await this[a](this.extend(r,s)),d=this.safeValue(c,"data",{}),u=this.safeValue(d,"list",[]);return this.parseTrades(u,o,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id};if("network"in t){const e=this.safeValue(this.options,"networks",{}),i=this.safeStringUpper(t,"network");t=this.omit(t,"network"),s.network=this.safeStringUpper(e,i,i)}const r=await this.privateGetAccountDepositAddress(this.extend(s,t)),a=this.safeValue(r,"data",{});return this.parseDepositAddress(a,i)}parseDepositAddress(e,t){const i=this.safeString(e,"address"),s=this.safeString(e,"tag");let r=this.safeString(e,"currency");const a=this.safeString(e,"network");return void 0!==a&&(r=r.replace(a,"")),{info:e,currency:this.safeCurrencyCode(r),address:i,tag:s,network:a}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n="/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("v1"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else if(n="/"+this.version+n,"public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();r={"X-ACCESS-KEY":this.apiKey,"X-ACCESS-NONCE":e};let t=e+":"+i;"GET"===i?(Object.keys(o).length&&(n+="?"+this.urlencode(o)),t+=n):(r["Content-Type"]="application/json",t+=n+(a=this.json(o)));const s=this.hmac(this.encode(t),this.encode(this.secret));r["X-ACCESS-SIGN"]=s}return n=this.implodeHostname(this.urls.api[t])+n,{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,n,o,h){if(void 0===n)return;const c=this.safeString(n,"code");if(void 0!==c&&"1"!==c){const e=this.id+" "+this.json(n);this.throwExactlyMatchedException(this.exceptions.exact,c,e),this.throwBroadlyMatchedException(this.exceptions.broad,a,e)}}}},32300:(e,t,i)=>{"use strict";const s=i(48819),{ArgumentsRequired:r,AuthenticationError:a,ExchangeError:n,InsufficientFunds:o,InvalidOrder:h,BadSymbol:c,PermissionDenied:d,BadRequest:u}=i(73449),{TICK_SIZE:l}=i(62115);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"ascendex",name:"AscendEX",countries:["SG"],rateLimit:500,certified:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchPositions:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,setLeverage:!0,setMarginMode:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","6h":"360","12h":"720","1d":"1d","1w":"1w","1M":"1m"},version:"v2",urls:{logo:"https://user-images.githubusercontent.com/1294454/112027508-47984600-8b48-11eb-9e17-d26459cc36c6.jpg",api:"https://ascendex.com",test:"https://bitmax-test.io",www:"https://ascendex.com",doc:["https://bitmax-exchange.github.io/bitmax-pro-api/#bitmax-pro-api-documentation"],fees:"https://ascendex.com/en/feerate/transactionfee-traderate",referral:{url:"https://ascendex.com/en-us/register?inviteCode=EL6BXBQM",discount:.25}},api:{v1:{public:{get:["assets","products","ticker","barhist/info","barhist","depth","trades","cash/assets","cash/products","margin/assets","margin/products","futures/collateral","futures/contracts","futures/ref-px","futures/market-data","futures/funding-rates"]},private:{get:["info","wallet/transactions","wallet/deposit/address","data/balance/snapshot","data/balance/history"],accountCategory:{get:["balance","order/open","order/status","order/hist/current","risk"],post:["order","order/batch"],delete:["order","order/all","order/batch"]},accountGroup:{get:["cash/balance","margin/balance","margin/risk","transfer","futures/collateral-balance","futures/position","futures/risk","futures/funding-payments","order/hist"],post:["futures/transfer/deposit","futures/transfer/withdraw"]}}},v2:{public:{get:["assets","futures/contract","futures/collateral","futures/pricing-data"]},private:{get:["account/info"],accountGroup:{get:["order/hist","futures/position","futures/free-margin","futures/order/hist/current","futures/order/status"],post:["futures/isolated-position-margin","futures/margin-type","futures/leverage","futures/transfer/deposit","futures/transfer/withdraw","futures/order","futures/order/batch","futures/order/open","subuser/subuser-transfer","subuser/subuser-transfer-hist"],delete:["futures/order","futures/order/batch","futures/order/all"]}}}},fees:{trading:{feeSide:"get",tierBased:!0,percentage:!0,taker:this.parseNumber("0.002"),maker:this.parseNumber("0.002")}},precisionMode:l,options:{"account-category":"cash","account-group":void 0,fetchClosedOrders:{method:"v1PrivateAccountGroupGetOrderHist"}},exceptions:{exact:{1900:u,2100:a,5002:c,6001:c,6010:o,60060:h,600503:h,100001:u,100002:u,100003:u,100004:u,100005:u,100006:u,100007:u,100008:c,100009:a,100010:u,100011:u,100012:u,100013:u,100101:n,150001:u,200001:a,200002:n,200003:n,200004:n,200005:n,200006:n,200007:n,200008:n,200009:n,200010:a,200011:n,200012:n,200013:n,200014:d,200015:d,300001:h,300002:h,300003:h,300004:h,300005:h,300006:h,300007:h,300008:h,300009:h,300011:o,300012:c,300013:h,300014:h,300020:h,300021:h,300031:h,310001:o,310002:h,310003:h,310004:c,310005:h,510001:n,900001:n},broad:{}},commonCurrencies:{BOND:"BONDED",BTCBEAR:"BEAR",BTCBULL:"BULL",BYN:"BeyondFi"}})}getAccount(e={}){return this.safeValue(e,"account",this.options.account).toLowerCase().capitalize()}async fetchCurrencies(e={}){const t=await this.v1PublicGetAssets(e),i=await this.v1PublicGetMarginAssets(e),s=await this.v1PublicGetCashAssets(e),r=this.safeValue(t,"data",[]),a=this.safeValue(i,"data",[]),n=this.safeValue(s,"data",[]),o=this.indexBy(r,"assetCode"),h=this.indexBy(a,"assetCode"),c=this.indexBy(n,"assetCode"),d=this.deepExtend(o,h,c),u=Object.keys(d),l={};for(let e=0;e<u.length;e++){const t=u[e],i=d[t],s=this.safeCurrencyCode(t),r=this.safeString2(i,"precisionScale","nativeScale"),a=this.parsePrecision(r),n=this.safeNumber2(i,"withdrawFee","withdrawalFee"),o="Normal"===this.safeString2(i,"status","statusCode"),h="borrowAssetCode"in i;l[s]={id:t,code:s,info:i,type:void 0,margin:h,name:this.safeString(i,"assetName"),active:o,fee:n,precision:parseInt(r),limits:{amount:{min:this.parseNumber(a),max:void 0},withdraw:{min:this.safeNumber(i,"minWithdrawalAmt"),max:void 0}}}}return l}async fetchMarkets(e={}){const t=await this.v1PublicGetProducts(e),i=await this.v1PublicGetCashProducts(e),s=await this.v1PublicGetFuturesContracts(e),r=this.safeValue(t,"data",[]),a=this.indexBy(r,"symbol"),n=this.safeValue(i,"data",[]),o=this.safeValue(s,"data",[]),h=this.arrayConcat(n,o),c=this.indexBy(h,"symbol"),d=this.deepExtend(a,c),u=Object.keys(d),l=[];for(let e=0;e<u.length;e++){const t=u[e],i=d[t],s=this.safeString(i,"baseAsset"),r=this.safeString(i,"quoteAsset"),a=this.safeCurrencyCode(s),n=this.safeCurrencyCode(r),o={amount:this.safeNumber(i,"lotSize"),price:this.safeNumber(i,"tickSize")},h="Normal"===this.safeString(i,"status"),c="useLot"in i?"spot":"future",f="spot"===c,p="future"===c,m=this.safeValue(i,"marginTradable",!1);let g=t;p||(g=a+"/"+n);const y=this.safeNumber(i,"commissionReserveRate");l.push({id:t,symbol:g,base:a,quote:n,baseId:s,quoteId:r,info:i,type:c,spot:f,margin:m,future:p,active:h,precision:o,taker:y,maker:y,limits:{amount:{min:this.safeNumber(i,"minQty"),max:this.safeNumber(i,"maxQty")},price:{min:this.safeNumber(i,"tickSize"),max:void 0},cost:{min:this.safeNumber(i,"minNotional"),max:this.safeNumber(i,"maxNotional")}}})}return l}async fetchAccounts(e={}){let t,i=this.safeString(this.options,"account-group");if(void 0===i){t=await this.v1PrivateGetInfo(e);const s=this.safeValue(t,"data",{});i=this.safeString(s,"accountGroup"),this.options["account-group"]=i}return[{id:i,type:void 0,currency:void 0,info:t}]}async fetchBalance(e={}){await this.loadMarkets(),await this.loadAccounts();const t=this.safeString(this.options,"account-category","cash"),i=this.safeValue(this.options,"fetchBalance",{});let s=this.safeString(i,"account-category",t);s=this.safeString(e,"account-category",s),e=this.omit(e,"account-category");const r=this.safeValue(this.accounts,0,{}),a={"account-group":this.safeString(r,"id")};let n="v1PrivateAccountCategoryGetBalance";"futures"===s?n="v1PrivateAccountGroupGetFuturesCollateralBalance":a["account-category"]=s;const o=await this[n](this.extend(a,e)),h={info:o,timestamp:void 0,datetime:void 0},c=this.safeValue(o,"data",[]);for(let e=0;e<c.length;e++){const t=c[e],i=this.safeCurrencyCode(this.safeString(t,"asset")),s=this.account();s.free=this.safeString(t,"availableBalance"),s.total=this.safeString(t,"totalBalance"),h[i]=s}return this.parseBalance(h)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id},r=await this.v1PublicGetDepth(this.extend(s,i)),a=this.safeValue(r,"data",{}),n=this.safeValue(a,"data",{}),o=this.safeInteger(n,"ts"),h=this.parseOrderBook(n,e,o);return h.nonce=this.safeInteger(n,"seqnum"),h}parseTicker(e,t){const i=this.safeString(e,"symbol"),s="spot"===this.safeString(e,"type")?"/":void 0,r=this.safeSymbol(i,t,s),a=this.safeNumber(e,"close"),n=this.safeValue(e,"bid",[]),o=this.safeValue(e,"ask",[]),h=this.safeNumber(e,"open");return this.safeTicker({symbol:r,timestamp:void 0,datetime:void 0,high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(n,0),bidVolume:this.safeNumber(n,1),ask:this.safeNumber(o,0),askVolume:this.safeNumber(o,1),vwap:void 0,open:h,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"volume"),quoteVolume:void 0,info:e},t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.v1PublicGetTicker(this.extend(s,t)),a=this.safeValue(r,"data",{});return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.symbol=t.join(",")}const s=await this.v1PublicGetTicker(this.extend(i,t)),r=this.safeValue(s,"data",[]);return this.parseTickers(r,e)}parseOHLCV(e,t){const i=this.safeValue(e,"data",{});return[this.safeInteger(i,"ts"),this.safeNumber(i,"o"),this.safeNumber(i,"h"),this.safeNumber(i,"l"),this.safeNumber(i,"c"),this.safeNumber(i,"v")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id,interval:this.timeframes[t]},o=this.parseTimeframe(t),h=this.safeValue(this.options,"fetchOHLCV",{}),c=this.safeInteger(h,"limit",500);void 0!==i?(n.from=i,s=void 0===s?c:Math.min(s,c),n.to=this.sum(i,s*o*1e3,1)):void 0!==s&&(n.n=s);const d=await this.v1PublicGetBarhist(this.extend(n,r)),u=this.safeValue(d,"data",[]);return this.parseOHLCVs(u,a,t,i,s)}parseTrade(e,t){const i=this.safeInteger(e,"ts"),s=this.safeString2(e,"price","p"),r=this.safeString(e,"q"),a=this.safeValue(e,"bm",!1),n=a?"maker":"taker",o=a?"buy":"sell";let h;return void 0===h&&void 0!==t&&(h=t.symbol),this.safeTrade({info:e,timestamp:i,datetime:this.iso8601(i),symbol:h,id:void 0,order:void 0,type:void 0,takerOrMaker:n,side:o,price:s,amount:r,cost:void 0,fee:void 0},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.n=i);const n=await this.v1PublicGetTrades(this.extend(a,s)),o=this.safeValue(n,"data",[]),h=this.safeValue(o,"data",[]);return this.parseTrades(h,r,t,i)}parseOrderStatus(e){return this.safeString({PendingNew:"open",New:"open",PartiallyFilled:"open",Filled:"closed",Canceled:"canceled",Rejected:"rejected"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"status")),s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t,"/"),a=this.safeInteger2(e,"timestamp","sendingTime"),n=this.safeInteger(e,"lastExecTime"),o=this.safeString(e,"price"),h=this.safeString(e,"orderQty"),c=this.safeString(e,"avgPx"),d=this.safeString2(e,"cumFilledQty","cumQty"),u=this.safeString(e,"orderId");let l=this.safeString(e,"id");void 0!==l&&l.length<1&&(l=void 0);const f=this.safeStringLower(e,"orderType"),p=this.safeStringLower(e,"side"),m=this.safeNumber(e,"cumFee");let g;if(void 0!==m){const t=this.safeString(e,"feeAsset");g={cost:m,currency:this.safeCurrencyCode(t)}}const y=this.safeNumber(e,"stopPrice");return this.safeOrder2({info:e,id:u,clientOrderId:l,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:n,symbol:r,type:f,timeInForce:void 0,postOnly:void 0,side:p,price:o,stopPrice:y,amount:h,cost:void 0,average:c,filled:d,remaining:void 0,status:i,fee:g,trades:void 0},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),await this.loadAccounts();const n=this.market(e),o=this.safeString(this.options,"account-category","cash"),c=this.safeValue(this.options,"createOrder",{});let d=this.safeString(c,"account-category",o);d=this.safeString(a,"account-category",d),a=this.omit(a,"account-category");const u=this.safeValue(this.accounts,0,{}),l=this.safeValue(u,"id"),f=this.safeString2(a,"clientOrderId","id"),p={"account-group":l,"account-category":d,symbol:n.id,time:this.milliseconds(),orderQty:this.amountToPrecision(e,s),orderType:t,side:i};if(void 0!==f&&(p.id=f,a=this.omit(a,["clientOrderId","id"])),"limit"!==t&&"stop_limit"!==t||(p.orderPrice=this.priceToPrecision(e,r)),"stop_limit"===t||"stop_market"===t){const i=this.safeNumber(a,"stopPrice");if(void 0===i)throw new h(this.id+" createOrder() requires a stopPrice parameter for "+t+" orders");p.stopPrice=this.priceToPrecision(e,i),a=this.omit(a,"stopPrice")}const m=await this.v1PrivateAccountCategoryPostOrder(this.extend(p,a)),g=this.safeValue(m,"data",{}),y=this.safeValue(g,"info",{});return this.parseOrder(y,n)}async fetchOrder(e,t,i={}){await this.loadMarkets(),await this.loadAccounts();const s=this.safeString(this.options,"account-category","cash"),r=this.safeValue(this.options,"fetchOrder",{});let a=this.safeString(r,"account-category",s);a=this.safeString(i,"account-category",a),i=this.omit(i,"account-category");const n=this.safeValue(this.accounts,0,{}),o={"account-group":this.safeValue(n,"id"),"account-category":a,orderId:e},h=await this.v1PrivateAccountCategoryGetOrderStatus(this.extend(o,i)),c=this.safeValue(h,"data",{});return this.parseOrder(c)}async fetchOpenOrders(e,t,i,s={}){let r;await this.loadMarkets(),await this.loadAccounts(),void 0!==e&&(r=this.market(e));const a=this.safeString(this.options,"account-category","cash"),n=this.safeValue(this.options,"fetchOpenOrders",{});let o=this.safeString(n,"account-category",a);o=this.safeString(s,"account-category",o),s=this.omit(s,"account-category");const h=this.safeValue(this.accounts,0,{}),c={"account-group":this.safeValue(h,"id"),"account-category":o},d=await this.v1PrivateAccountCategoryGetOrderOpen(this.extend(c,s)),u=this.safeValue(d,"data",[]);if("futures"===o)return this.parseOrders(u,r,t,i);const l=[];for(let e=0;e<u.length;e++){const t=this.parseOrder(u[e],r);l.push(t)}return this.filterBySymbolSinceLimit(l,e,t,i)}async fetchClosedOrders(e,t,i,s={}){let r;await this.loadMarkets(),await this.loadAccounts(),void 0!==e&&(r=this.market(e));const a=this.safeString(this.options,"account-category"),n=this.safeValue(this.options,"fetchClosedOrders",{});let o=this.safeString(n,"account-category",a);o=this.safeString(s,"account-category",o),s=this.omit(s,"account-category");const h=this.safeValue(this.accounts,0,{}),c={"account-group":this.safeValue(h,"id")};void 0!==e&&(r=this.market(e),c.symbol=r.id);const d=this.safeValue(n,"method","v1PrivateAccountGroupGetOrderHist");"v1PrivateAccountGroupGetOrderHist"===d?void 0!==o&&(c.category=o):c["account-category"]=o,void 0!==t&&(c.startTime=t),void 0!==i&&(c.pageSize=i);const u=await this[d](this.extend(c,s));let l=this.safeValue(u,"data");return Array.isArray(l)||(l=this.safeValue(l,"data",[])),this.parseOrders(l,r,t,i)}async cancelOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets(),await this.loadAccounts();const s=this.market(t),a=this.safeString(this.options,"account-category","cash"),n=this.safeValue(this.options,"cancelOrder",{});let o=this.safeString(n,"account-category",a);o=this.safeString(i,"account-category",o),i=this.omit(i,"account-category");const h=this.safeValue(this.accounts,0,{}),c=this.safeValue(h,"id"),d=this.safeString2(i,"clientOrderId","id"),u={"account-group":c,"account-category":o,symbol:s.id,time:this.milliseconds(),id:"foobar"};void 0===d?u.orderId=e:(u.id=d,i=this.omit(i,["clientOrderId","id"]));const l=await this.v1PrivateAccountCategoryDeleteOrder(this.extend(u,i)),f=this.safeValue(l,"data",{}),p=this.safeValue(f,"info",{});return this.parseOrder(p,s)}async cancelAllOrders(e,t={}){await this.loadMarkets(),await this.loadAccounts();const i=this.safeString(this.options,"account-category","cash"),s=this.safeValue(this.options,"cancelAllOrders",{});let r=this.safeString(s,"account-category",i);r=this.safeString(t,"account-category",r),t=this.omit(t,"account-category");const a=this.safeValue(this.accounts,0,{}),n={"account-group":this.safeValue(a,"id"),"account-category":r,time:this.milliseconds()};let o;return void 0!==e&&(o=this.market(e),n.symbol=o.id),await this.v1PrivateAccountCategoryDeleteOrderAll(this.extend(n,t))}parseDepositAddress(e,t){const i=this.safeString(e,"address"),s=this.safeString(e,"tagId"),r=this.safeString(e,s);return this.checkAddress(i),{currency:void 0===t?void 0:t.code,address:i,tag:r,network:void 0,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s=this.safeString(t,"chainName");t=this.omit(t,"chainName");const a={asset:i.id},n=await this.v1PrivateGetWalletDepositAddress(this.extend(a,t)),o=this.safeValue(n,"data",{}),h=this.safeValue(o,"address",[]);let c;if(h.length>1){const e=this.indexBy(h,"chainName");if(void 0===s){const t=Object.keys(e).join(", ");throw new r(this.id+" fetchDepositAddress returned more than one address, a chainName parameter is required, one of "+t)}c=this.safeValue(e,s,{})}else c=this.safeValue(h,0,{});const d=this.parseDepositAddress(c,i);return this.extend(d,{info:n})}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({txType:"deposit"},s))}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({txType:"withdrawal"},s))}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.asset=a.id),void 0!==t&&(r.startTs=t),void 0!==i&&(r.pageSize=i);const n=await this.v1PrivateGetWalletTransactions(this.extend(r,s)),o=this.safeValue(n,"data",{}),h=this.safeValue(o,"data",[]);return this.parseTransactions(h,a,t,i)}parseTransactionStatus(e){return this.safeString({reviewing:"pending",pending:"pending",confirmed:"ok",rejected:"rejected"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"requestId"),s=this.safeNumber(e,"amount"),r=this.safeValue(e,"destAddress",{}),a=this.safeString(r,"address"),n=this.safeString(r,"destTag"),o=this.safeString(e,"networkTransactionId"),h=this.safeString(e,"transactionType"),c=this.safeInteger(e,"time"),d=this.safeString(e,"asset"),u=this.safeCurrencyCode(d,t),l=this.parseTransactionStatus(this.safeString(e,"status")),f=this.safeNumber(e,"commission");return{info:e,id:i,currency:u,amount:s,address:a,addressTo:a,addressFrom:void 0,tag:n,tagTo:n,tagFrom:void 0,status:l,type:h,updated:void 0,txid:o,timestamp:c,datetime:this.iso8601(c),fee:{currency:u,cost:f}}}async fetchPositions(e,t={}){await this.loadMarkets(),await this.loadAccounts();const i=this.safeValue(this.accounts,0,{}),s={"account-group":this.safeString(i,"id")};return await this.v2PrivateAccountGroupGetFuturesPosition(this.extend(s,t))}async setLeverage(e,t,i={}){if(void 0===t)throw new r(this.id+" setLeverage() requires a symbol argument");if(e<1||e>100)throw new u(this.id+" leverage should be between 1 and 100");await this.loadMarkets(),await this.loadAccounts();const s=this.market(t);if("future"!==s.type)throw new c(this.id+" setLeverage() supports futures contracts only");const a=this.safeValue(this.accounts,0,{}),n={"account-group":this.safeString(a,"id"),symbol:s.id,leverage:e};return await this.v2PrivateAccountGroupPostFuturesLeverage(this.extend(n,i))}async setMarginMode(e,t,i={}){if("isolated"!==e&&"crossed"!==e)throw new u(this.id+" setMarginMode() marginType argument should be isolated or crossed");await this.loadMarkets(),await this.loadAccounts();const s=this.market(t),r=this.safeValue(this.accounts,0,{}),a={"account-group":this.safeString(r,"id"),symbol:s.id,marginType:e};if("future"!==s.type)throw new c(this.id+" setMarginMode() supports futures contracts only");return await this.v2PrivateAccountGroupPostFuturesMarginType(this.extend(a,i))}sign(e,t="public",i="GET",s={},r,a){const n=t[0],o=t[1],h=this.safeString(t,2);let c="",d=s;const u="accountCategory"===h;(u||"accountGroup"===h)&&(c+=this.implodeParams("/{account-group}",s),d=this.omit(s,"account-group"));let l=this.implodeParams(e,d);if(c+="/api/pro/","v2"===n?l=n+"/"+l:c+=n,u&&(c+=this.implodeParams("/{account-category}",d),d=this.omit(d,"account-category")),c+="/"+l,("v1"===n&&"cash/balance"===l||"margin/balance"===l)&&(l="balance"),l.indexOf("subuser")>=0){const e=l.split("/");l=e[2]}if(d=this.omit(d,this.extractParams(e)),"public"===o)Object.keys(d).length&&(c+="?"+this.urlencode(d));else{this.checkRequiredCredentials();const e=this.milliseconds().toString(),t=e+"+"+l,s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64");r={"x-auth-key":this.apiKey,"x-auth-timestamp":e,"x-auth-signature":s},"GET"===i?Object.keys(d).length&&(c+="?"+this.urlencode(d)):(r["Content-Type"]="application/json",a=this.json(d))}return c=this.urls.api+c,{url:c,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o,h,c){if(void 0===o)return;const d=this.safeString(o,"code"),u=this.safeString(o,"message");if(void 0!==d&&"0"!==d||void 0!==u){const e=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,e),this.throwExactlyMatchedException(this.exceptions.exact,u,e),this.throwBroadlyMatchedException(this.exceptions.broad,u,e),new n(e)}}}},48819:(e,t,i)=>{"use strict";var s=i(25108);const r=i(85806),{isNode:a,keys:n,values:o,deepExtend:h,extend:c,clone:d,flatten:u,unique:l,indexBy:f,sortBy:p,sortBy2:m,groupBy:g,aggregate:y,uuid:b,unCamelCase:v,precisionFromString:w,throttle:k,capitalize:_,now:S,timeout:O,TimedOut:M,buildOHLCVC:T,decimalToPrecision:x,defaultFetch:I}=r,{ExchangeError:A,BadSymbol:C,InvalidAddress:N,NotSupported:E,AuthenticationError:P,DDoSProtection:B,RequestTimeout:R,ExchangeNotAvailable:V,RateLimitExceeded:L}=i(73449),{TRUNCATE:D,ROUND:q,DECIMAL_PLACES:G,NO_PADDING:F}=r.precisionConstants,j=(i(35060),i(6832));e.exports=class e{describe(){return{id:void 0,name:void 0,countries:void 0,enableRateLimit:!0,rateLimit:2e3,certified:!1,pro:!1,alias:!1,has:{publicAPI:!0,privateAPI:!0,margin:void 0,swap:void 0,future:void 0,addMargin:void 0,cancelAllOrders:void 0,cancelOrder:!0,cancelOrders:void 0,CORS:void 0,createDepositAddress:void 0,createLimitOrder:!0,createMarketOrder:!0,createOrder:!0,deposit:void 0,editOrder:"emulated",fetchAccounts:void 0,fetchBalance:!0,fetchBidsAsks:void 0,fetchBorrowRate:void 0,fetchBorrowRateHistory:void 0,fetchBorrowRatesPerSymbol:void 0,fetchBorrowRates:void 0,fetchCanceledOrders:void 0,fetchClosedOrder:void 0,fetchClosedOrders:void 0,fetchCurrencies:"emulated",fetchDeposit:void 0,fetchDepositAddress:void 0,fetchDepositAddresses:void 0,fetchDeposits:void 0,fetchFees:void 0,fetchFundingFee:void 0,fetchFundingFees:void 0,fetchFundingHistory:void 0,fetchFundingRate:void 0,fetchFundingRateHistory:void 0,fetchFundingRates:void 0,fetchIndexOHLCV:void 0,fetchIsolatedPositions:void 0,fetchL2OrderBook:!0,fetchLedger:void 0,fetchLedgerEntry:void 0,fetchMarkets:!0,fetchMarkOHLCV:void 0,fetchMyTrades:void 0,fetchOHLCV:"emulated",fetchOpenOrder:void 0,fetchOpenOrders:void 0,fetchOrder:void 0,fetchOrderBook:!0,fetchOrderBooks:void 0,fetchOrders:void 0,fetchOrderTrades:void 0,fetchPosition:void 0,fetchPositions:void 0,fetchPositionsRisk:void 0,fetchPremiumIndexOHLCV:void 0,fetchStatus:"emulated",fetchTicker:!0,fetchTickers:void 0,fetchTime:void 0,fetchTrades:!0,fetchTradingFee:void 0,fetchTradingFees:void 0,fetchTradingLimits:void 0,fetchTransactions:void 0,fetchTransfers:void 0,fetchWithdrawal:void 0,fetchWithdrawals:void 0,loadLeverageBrackets:void 0,loadMarkets:!0,reduceMargin:void 0,setLeverage:void 0,setMarginMode:void 0,setPositionMode:void 0,signIn:void 0,transfer:void 0,withdraw:void 0},urls:{logo:void 0,api:void 0,www:void 0,doc:void 0,fees:void 0},api:void 0,requiredCredentials:{apiKey:!0,secret:!0,uid:!1,login:!1,password:!1,twofa:!1,privateKey:!1,walletAddress:!1,token:!1},markets:void 0,currencies:{},timeframes:void 0,fees:{trading:{tierBased:void 0,percentage:void 0,taker:void 0,maker:void 0},funding:{tierBased:void 0,percentage:void 0,withdraw:{},deposit:{}}},status:{status:"ok",updated:void 0,eta:void 0,url:void 0},exceptions:void 0,httpExceptions:{422:A,418:B,429:L,404:V,409:V,410:V,500:V,501:V,502:V,520:V,521:V,522:V,525:V,526:V,400:V,403:V,405:V,503:V,530:V,408:R,504:R,401:P,511:P},commonCurrencies:{XBT:"BTC",BCC:"BCH",DRK:"DASH",BCHABC:"BCH",BCHSV:"BSV"},precisionMode:G,paddingMode:F,limits:{leverage:{min:void 0,max:void 0},amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}}constructor(e={}){Object.assign(this,r),this.options={},this.fetchOptions={},this.userAgents={chrome:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36",chrome39:"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36"},this.headers={},this.proxy="",this.origin="*",this.minFundingAddressLength=1,this.substituteCommonCurrencyCodes=!0,this.quoteJsonNumbers=!0,this.number=Number,this.handleContentTypeApplicationZip=!1,this.reduceFees=!0,this.fetchImplementation=I,this.timeout=1e4,this.verbose=!1,this.debug=!1,this.userAgent=void 0,this.twofa=void 0,this.apiKey=void 0,this.secret=void 0,this.uid=void 0,this.login=void 0,this.password=void 0,this.privateKey=void 0,this.walletAddress=void 0,this.token=void 0,this.balance={},this.orderbooks={},this.tickers={},this.orders=void 0,this.trades={},this.transactions={},this.ohlcvs={},this.myTrades=void 0,this.positions={},this.requiresWeb3=!1,this.requiresEddsa=!1,this.precision={},this.enableLastJsonResponse=!0,this.enableLastHttpResponse=!0,this.enableLastResponseHeaders=!0,this.last_http_response=void 0,this.last_json_response=void 0,this.last_response_headers=void 0;const t=(e=this)=>{if(null!==e){const i=Object.getOwnPropertyNames(e);for(let e=0;e<i.length;e++){const t=i[e];this[v(t)]=this[t]}t(Object.getPrototypeOf(e))}};t();const i=Object.entries(this.describe()).concat(Object.entries(e));for(let e=0;e<i.length;e++){const[t,s]=i[e];s&&Object.getPrototypeOf(s)===Object.prototype?this[t]=h(this[t],s):this[t]=s}const s={keepAlive:!0};!this.httpAgent&&I.http&&a&&(this.httpAgent=new I.http.Agent(s)),!this.httpsAgent&&I.https&&a&&(this.httpsAgent=new I.https.Agent(s));const n=Object.keys(this.has);for(let e=0;e<n.length;e++){const t=n[e];this["has"+_(t)]=!!this.has[t]}this.api&&this.defineRestApi(this.api,"request"),this.initRestRateLimiter(),this.markets&&this.setMarkets(this.markets)}defaults(){return{}}nonce(){return this.seconds()}encodeURIComponent(...e){return encodeURIComponent(...e)}checkRequiredVersion(t,i=!0){let s=!0;const[r,a,n]=t.split("."),[o,h,c]=e.ccxtVersion.split("."),d=parseInt(r),u=parseInt(a),l=parseInt(n),f=parseInt(o),p=parseInt(h),m=parseInt(c);if(d>f&&(s=!1),d===f&&(u>p||u===p&&l>m)&&(s=!1),!s){if(i)throw new E("Your current version of CCXT is "+e.ccxtVersion+", a newer version "+t+" is required, please, upgrade your version of CCXT");return i}return s}checkRequiredCredentials(e=!0){const t=Object.keys(this.requiredCredentials);for(let i=0;i<t.length;i++){const s=t[i];if(this.requiredCredentials[s]&&!this[s]){if(e)throw new P(this.id+" requires `"+s+"` credential");return e}}return!0}checkAddress(e){if(void 0===e)throw new N(this.id+" address is undefined");if(1===l(e).length||e.length<this.minFundingAddressLength||e.includes(" "))throw new N(this.id+" address is invalid or has less than "+this.minFundingAddressLength.toString()+' characters: "'+this.json(e)+'"');return e}initRestRateLimiter(){if(void 0===this.rateLimit)throw new Error(this.id+".rateLimit property is not configured");this.tokenBucket=this.extend({delay:.001,capacity:1,cost:1,maxCapacity:1e3,refillRate:this.rateLimit>0?1/this.rateLimit:Number.MAX_VALUE},this.tokenBucket),this.throttle=k(this.tokenBucket),this.executeRestRequest=(e,t="GET",i,s)=>{const r=this.fetchImplementation,n={method:t,headers:i,body:s,timeout:this.timeout};this.agent?n.agent=this.agent:this.httpAgent&&0===e.indexOf("http://")?n.agent=this.httpAgent:this.httpsAgent&&0===e.indexOf("https://")&&(n.agent=this.httpsAgent);const o=r(e,this.extend(n,this.fetchOptions)).catch((i=>{if(a)throw new V([this.id,t,e,i.type,i.message].join(" "));throw i})).then((r=>this.handleRestResponse(r,e,t,i,s)));return O(this.timeout,o).catch((i=>{if(i instanceof M)throw new R(this.id+" "+t+" "+e+" request timed out ("+this.timeout+" ms)");throw i}))}}setSandboxMode(e){if(e){if(!("test"in this.urls))throw new E(this.id+" does not have a sandbox URL");"string"==typeof this.urls.api?(this.urls.apiBackup=this.urls.api,this.urls.api=this.urls.test):(this.urls.apiBackup=d(this.urls.api),this.urls.api=d(this.urls.test))}else"apiBackup"in this.urls&&("string"==typeof this.urls.api?this.urls.api=this.urls.apiBackup:this.urls.api=d(this.urls.apiBackup))}defineRestApiEndpoint(e,t,i,s,r,a,n={}){const o=r.split(/[^a-zA-Z0-9]/),h=o.map(this.capitalize).join(""),c=o.map((e=>e.trim().toLowerCase())).filter((e=>e.length>0)).join("_"),d=[a[0]].concat(a.slice(1).map(this.capitalize)).join(""),u=[a[0]].concat(a.slice(1).map((e=>e.trim())).filter((e=>e.length>0))).join("_"),l=d+s+this.capitalize(h),f=u+"_"+i+"_"+c,p=a.length>1?a:a[0],m=async(i={},s={})=>this[e](r,p,t,i,void 0,void 0,n,s);this[l]=m,this[f]=m}defineRestApi(e,t,i=[]){const s=Object.keys(e);for(let r=0;r<s.length;r++){const a=s[r],n=e[a],o=a.toUpperCase(),h=a.toLowerCase(),c=this.capitalize(h);if(Array.isArray(n))for(let e=0;e<n.length;e++){const s=n[e].trim();this.defineRestApiEndpoint(t,o,h,c,s,i)}else if(a.match(/^(?:get|post|put|delete|options|head|patch)$/i)){const e=Object.keys(n);for(let s=0;s<e.length;s++){const r=e[s],a=r.trim(),d=n[r];if("object"==typeof d)this.defineRestApiEndpoint(t,o,h,c,a,i,d);else{if("number"!=typeof d)throw new E(this.id+" defineRestApi() API format not supported, API leafs must strings, objects or numbers");this.defineRestApiEndpoint(t,o,h,c,a,i,{cost:d})}}}else this.defineRestApi(n,t,i.concat([a]))}}log(...e){s.log(...e)}setHeaders(e){return e}fetch(e,t="GET",i,s){return a&&this.userAgent&&("string"==typeof this.userAgent?i=c({"User-Agent":this.userAgent},i):"object"==typeof this.userAgent&&"User-Agent"in this.userAgent&&(i=c(this.userAgent,i))),"function"==typeof this.proxy?(e=this.proxy(e),a&&(i=c({Origin:this.origin},i))):"string"==typeof this.proxy&&(this.proxy.length&&a&&(i=c({Origin:this.origin},i)),e=this.proxy+e),i=c(this.headers,i),i=this.setHeaders(i),this.verbose&&this.log("fetch Request:\n",this.id,t,e,"\nRequestHeaders:\n",i,"\nRequestBody:\n",s,"\n"),this.executeRestRequest(e,t,i,s)}calculateRateLimiterCost(e,t,i,s,r={},a={}){return this.safeValue(r,"cost",1)}async fetch2(e,t="public",i="GET",s={},r,a,n={},o={}){if(this.enableRateLimit){const r=this.calculateRateLimiterCost(t,i,e,s,n,o);await this.throttle(r)}const h=this.sign(e,t,i,s,r,a);return this.fetch(h.url,h.method,h.headers,h.body)}request(e,t="public",i="GET",s={},r,a,n={},o={}){return this.fetch2(e,t,i,s,r,a,n,o)}parseJson(e){try{if(this.isJsonEncodedObject(e))return JSON.parse(this.onJsonResponse(e))}catch(e){return}}throwExactlyMatchedException(e,t,i){if(t in e)throw new e[t](i)}throwBroadlyMatchedException(e,t,i){const s=this.findBroadlyMatchedKey(e,t);if(void 0!==s)throw new e[s](i)}findBroadlyMatchedKey(e,t){const i=Object.keys(e);for(let e=0;e<i.length;e++){const s=i[e];if(t.indexOf(s)>=0)return s}}handleErrors(e,t,i,s,r,a,n,o,h){}handleHttpStatusCode(e,t,i,s,r){const a=e.toString();if(a in this.httpExceptions)throw new(0,this.httpExceptions[a])([this.id,s,i,e,t,r].join(" "))}getResponseHeaders(e){const t={};return e.headers.forEach(((e,i)=>{i=i.split("-").map((e=>_(e))).join("-"),t[i]=e})),t}handleRestResponse(e,t,i="GET",s,r){const a=this.getResponseHeaders(e);if(this.handleContentTypeApplicationZip&&"application/zip"===a["Content-Type"]){const s=e.buffer();return this.enableLastResponseHeaders&&(this.last_response_headers=a),this.enableLastHttpResponse&&(this.last_http_response=s),this.verbose&&this.log("handleRestResponse:\n",this.id,i,t,e.status,e.statusText,"\nResponseHeaders:\n",a,"ZIP redacted","\n"),s}return e.text().then((n=>{const o=this.onRestResponse(e.status,e.statusText,t,i,a,n,s,r),h=this.parseJson(o);return this.enableLastResponseHeaders&&(this.last_response_headers=a),this.enableLastHttpResponse&&(this.last_http_response=n),this.enableLastJsonResponse&&(this.last_json_response=h),this.verbose&&this.log("handleRestResponse:\n",this.id,i,t,e.status,e.statusText,"\nResponseHeaders:\n",a,"\nResponseBody:\n",n,"\n"),this.handleErrors(e.status,e.statusText,t,i,a,n,h,s,r),this.handleHttpStatusCode(e.status,e.statusText,t,i,n),h||n}))}onRestResponse(e,t,i,s,r,a,n,o){return a.trim()}onJsonResponse(e){return this.quoteJsonNumbers?e.replace(/":([+.0-9eE-]+)([,}])/g,'":"$1"$2'):e}setMarkets(e,t){const i=Object.values(e).map((e=>h({limits:this.limits,precision:this.precision},this.fees.trading,e)));if(this.markets=f(i,"symbol"),this.markets_by_id=f(e,"id"),this.symbols=Object.keys(this.markets).sort(),this.ids=Object.keys(this.markets_by_id).sort(),t)this.currencies=h(this.currencies,t);else{let e=i.filter((e=>"base"in e)).map((e=>({id:e.baseId||e.base,numericId:void 0!==e.baseNumericId?e.baseNumericId:void 0,code:e.base,precision:e.precision?e.precision.base||e.precision.amount:8}))),t=i.filter((e=>"quote"in e)).map((e=>({id:e.quoteId||e.quote,numericId:void 0!==e.quoteNumericId?e.quoteNumericId:void 0,code:e.quote,precision:e.precision?e.precision.quote||e.precision.price:8})));e=p(e,"code"),t=p(t,"code"),this.baseCurrencies=f(e,"code"),this.quoteCurrencies=f(t,"code");const s=e.concat(t),r=g(s,"code"),a=Object.keys(r).map((e=>r[e].reduce(((e,t)=>e.precision>t.precision?e:t),r[e][0]))),n=p(u(a),"code");this.currencies=h(this.currencies,f(n,"code"))}return this.currencies_by_id=f(this.currencies,"id"),this.codes=Object.keys(this.currencies).sort(),this.markets}async loadMarketsHelper(e=!1,t={}){if(!e&&this.markets)return this.markets_by_id?this.markets:this.setMarkets(this.markets);let i;!0===this.has.fetchCurrencies&&(i=await this.fetchCurrencies());const s=await this.fetchMarkets(t);return this.setMarkets(s,i)}loadMarkets(e=!1,t={}){return(e&&!this.reloadingMarkets||!this.marketsLoading)&&(this.reloadingMarkets=!0,this.marketsLoading=this.loadMarketsHelper(e,t).then((e=>(this.reloadingMarkets=!1,e)),(e=>{throw this.reloadingMarkets=!1,e}))),this.marketsLoading}async loadAccounts(e=!1,t={}){if(e)this.accounts=await this.fetchAccounts(t);else{if(this.accounts)return this.accounts;this.accounts=await this.fetchAccounts(t)}return this.accountsById=this.indexBy(this.accounts,"id"),this.accounts}fetchBidsAsks(e,t={}){throw new E(this.id+" fetchBidsAsks not supported yet")}async fetchOHLCVC(e,t="1m",i,s,r={}){if(!this.has.fetchTrades)throw new E(this.id+" fetchOHLCV() not supported yet");await this.loadMarkets();const a=await this.fetchTrades(e,i,s,r);return T(a,t,i,s)}async fetchOHLCV(e,t="1m",i,s,r={}){if(!this.has.fetchTrades)throw new E(this.id+" fetchOHLCV() not supported yet");await this.loadMarkets();const a=await this.fetchTrades(e,i,s,r);return T(a,t,i,s).map((e=>e.slice(0,-1)))}parseTradingViewOHLCV(e,t,i="1m",s,r){const a=this.convertTradingViewToOHLCV(e);return this.parseOHLCVs(a,t,i,s,r)}convertTradingViewToOHLCV(e,t="t",i="o",s="h",r="l",a="c",n="v",o=!1){const h=[];for(let c=0;c<e[t].length;c++)h.push([o?e[t][c]:1e3*e[t][c],e[i][c],e[s][c],e[r][c],e[a][c],e[n][c]]);return h}convertOHLCVToTradingView(e,t="t",i="o",s="h",r="l",a="c",n="v",o=!1){const h={};h[t]=[],h[i]=[],h[s]=[],h[r]=[],h[a]=[],h[n]=[];for(let c=0;c<e.length;c++)h[t].push(o?e[c][0]:parseInt(e[c][0]/1e3)),h[i].push(e[c][1]),h[s].push(e[c][2]),h[r].push(e[c][3]),h[a].push(e[c][4]),h[n].push(e[c][5]);return h}async fetchTicker(e,t={}){if(this.has.fetchTickers){const i=await this.fetchTickers([e],t),s=this.safeValue(i,e);if(void 0===s)throw new N(this.id+" fetchTickers could not find a ticker for "+e);return s}throw new E(this.id+" fetchTicker not supported yet")}fetchTickers(e,t={}){throw new E(this.id+" fetchTickers not supported yet")}fetchOrder(e,t,i={}){throw new E(this.id+" fetchOrder not supported yet")}fetchUnifiedOrder(e,t={}){return this.fetchOrder(this.safeValue(e,"id"),this.safeValue(e,"symbol"),t)}createOrder(e,t,i,s,r,a={}){throw new E(this.id+" createOrder not supported yet")}cancelOrder(e,t,i={}){throw new E(this.id+" cancelOrder not supported yet")}cancelUnifiedOrder(e,t={}){return this.cancelOrder(this.safeValue(e,"id"),this.safeValue(e,"symbol"),t)}fetchOrders(e,t,i,s={}){throw new E(this.id+" fetchOrders not supported yet")}fetchOpenOrders(e,t,i,s={}){throw new E(this.id+" fetchOpenOrders not supported yet")}fetchClosedOrders(e,t,i,s={}){throw new E(this.id+" fetchClosedOrders not supported yet")}fetchMyTrades(e,t,i,s={}){throw new E(this.id+" fetchMyTrades not supported yet")}fetchTransactions(e,t,i,s={}){throw new E(this.id+" fetchTransactions not supported yet")}fetchDeposits(e,t,i,s={}){throw new E(this.id+" fetchDeposits not supported yet")}fetchWithdrawals(e,t,i,s={}){throw new E(this.id+" fetchWithdrawals not supported yet")}async fetchDepositAddress(e,t={}){if(this.has.fetchDepositAddresses){const i=await this.fetchDepositAddresses([e],t),s=this.safeValue(i,e);if(void 0===s)throw new N(this.id+" fetchDepositAddress could not find a deposit address for "+e+", make sure you have created a corresponding deposit address in your wallet on the exchange website");return s}throw new E(this.id+" fetchDepositAddress not supported yet")}fetchCurrencies(e={}){return new Promise(((e,t)=>e(this.currencies)))}fetchMarkets(e={}){return new Promise(((e,t)=>e(Object.values(this.markets))))}async fetchOrderStatus(e,t,i={}){return(await this.fetchOrder(e,t,i)).status}account(){return{free:void 0,used:void 0,total:void 0}}commonCurrencyCode(e){return this.substituteCommonCurrencyCodes?this.safeString(this.commonCurrencies,e,e):e}currency(e){if(void 0===this.currencies)throw new A(this.id+" currencies not loaded");if("string"==typeof e&&e in this.currencies)return this.currencies[e];throw new A(this.id+" does not have currency code "+e)}market(e){if(void 0===this.markets)throw new A(this.id+" markets not loaded");if("string"==typeof e){if(e in this.markets)return this.markets[e];if(e in this.markets_by_id)return this.markets_by_id[e]}throw new C(this.id+" does not have market symbol "+e)}marketId(e){const t=this.market(e);return void 0!==t?t.id:e}marketIds(e){return e.map((e=>this.marketId(e)))}symbol(e){return this.market(e).symbol||e}implodeHostname(e){return this.implodeParams(e,{hostname:this.hostname})}parseBidAsk(e,t=0,i=1){return[this.safeNumber(e,t),this.safeNumber(e,i)]}parseBidsAsks(e,t=0,i=1){return Object.values(e||[]).map((e=>this.parseBidAsk(e,t,i)))}async fetchL2OrderBook(e,t,i={}){const s=await this.fetchOrderBook(e,t,i);return c(s,{bids:p(y(s.bids),0,!0),asks:p(y(s.asks),0)})}parseOrderBook(e,t,i,s="bids",r="asks",a=0,n=1){return{symbol:t,bids:p(s in e?this.parseBidsAsks(e[s],a,n):[],0,!0),asks:p(r in e?this.parseBidsAsks(e[r],a,n):[],0),timestamp:i,datetime:this.iso8601(i),nonce:void 0}}parseBalance(e,t=!1){const i=Object.keys(this.omit(e,["info","timestamp","datetime","free","used","total"]));e.free={},e.used={},e.total={};for(let s=0;s<i.length;s++){const r=i[s];void 0===e[r].total&&void 0!==e[r].free&&void 0!==e[r].used&&(e[r].total=t?this.sum(e[r].free,e[r].used):j.stringAdd(e[r].free,e[r].used)),void 0===e[r].free&&void 0!==e[r].total&&void 0!==e[r].used&&(e[r].free=t?this.sum(e[r].total,-e[r].used):j.stringSub(e[r].total,e[r].used)),void 0===e[r].used&&void 0!==e[r].total&&void 0!==e[r].free&&(e[r].used=t?this.sum(e[r].total,-e[r].free):j.stringSub(e[r].total,e[r].free)),e[r].free=this.parseNumber(e[r].free),e[r].used=this.parseNumber(e[r].used),e[r].total=this.parseNumber(e[r].total),e.free[r]=e[r].free,e.used[r]=e[r].used,e.total[r]=e[r].total}return e}async fetchBalance(e={}){throw new E(this.id+" fetchBalance not supported yet")}async fetchPartialBalance(e,t={}){return(await this.fetchBalance(t))[e]}fetchFreeBalance(e={}){return this.fetchPartialBalance("free",e)}fetchUsedBalance(e={}){return this.fetchPartialBalance("used",e)}fetchTotalBalance(e={}){return this.fetchPartialBalance("total",e)}async fetchStatus(e={}){if(this.has.fetchTime){const t=await this.fetchTime(e);this.status=this.extend(this.status,{updated:t})}return this.status}async fetchTradingFees(e={}){throw new E(this.id+" fetchTradingFees not supported yet")}async fetchTradingFee(e,t={}){if(!this.has.fetchTradingFees)throw new E(this.id+" fetchTradingFee not supported yet");return await this.fetchTradingFees(t)}async loadTradingLimits(e,t=!1,i={}){if(this.has.fetchTradingLimits&&(t||!("limitsLoaded"in this.options))){const t=await this.fetchTradingLimits(e);for(let i=0;i<e.length;i++){const s=e[i];this.markets[s]=this.deepExtend(this.markets[s],t[s])}this.options.limitsLoaded=this.milliseconds()}return this.markets}filterBySinceLimit(e,t,i,s="timestamp",r=!1){return null!=t&&(e=e.filter((e=>e[s]>=t))),null!=i&&(e=r?e.slice(-i):e.slice(0,i)),e}filterByValueSinceLimit(e,t,i,s,r,a="timestamp",n=!1){const o=null!=i,h=null!=s;return(o||h)&&(e=e.filter((e=>(!o||e[t]===i)&&(!h||e[a]>=s)))),null!=r&&(e=n?e.slice(-r):e.slice(0,r)),e}filterBySymbolSinceLimit(e,t,i,s,r=!1){return this.filterByValueSinceLimit(e,"symbol",t,i,s,"timestamp",r)}filterByCurrencySinceLimit(e,t,i,s,r=!1){return this.filterByValueSinceLimit(e,"currency",t,i,s,"timestamp",r)}filterByArray(e,t,i,s=!0){if(e=Object.values(e),null==i)return s?f(e,t):e;const r=[];for(let s=0;s<e.length;s++)i.includes(e[s][t])&&r.push(e[s]);return s?f(r,t):r}safeTicker(e,t){let i=this.safeValue(e,"symbol");void 0===i&&(i=this.safeSymbol(void 0,t));const s=this.safeInteger(e,"timestamp"),r=this.safeValue(e,"baseVolume"),a=this.safeValue(e,"quoteVolume");let n=this.safeValue(e,"vwap");void 0===n&&(n=this.vwap(r,a));let o=this.safeValue(e,"open"),h=this.safeValue(e,"close"),c=this.safeValue(e,"last"),d=this.safeValue(e,"change"),u=this.safeValue(e,"percentage"),l=this.safeValue(e,"average");return void 0!==c&&void 0===h?h=c:void 0===c&&void 0!==h&&(c=h),void 0!==c&&void 0!==o&&(void 0===d&&(d=c-o),void 0===l&&(l=this.sum(c,o)/2)),void 0===u&&void 0!==d&&void 0!==o&&o>0&&(u=d/o*100),void 0===d&&void 0!==u&&void 0!==c&&(d=u/100*c),void 0===o&&void 0!==c&&void 0!==d&&(o=c-d),e.symbol=i,e.timestamp=s,e.datetime=this.iso8601(s),e.open=o,e.close=h,e.last=c,e.vwap=n,e.change=d,e.percentage=u,e.average=l,e}parseTickers(e,t,i={}){const s=[],r=Object.values(e||[]);for(let e=0;e<r.length;e++)s.push(this.extend(this.parseTicker(r[e]),i));return this.filterByArray(s,"symbol",t)}parseDepositAddresses(e,t,i=!0,s={}){let r=[];for(let t=0;t<e.length;t++){const i=this.extend(this.parseDepositAddress(e[t]),s);r.push(i)}return t&&(r=this.filterByArray(r,"currency",t,!1)),i?this.indexBy(r,"currency"):r}parseTrades(e,t,i,s,r={}){let a=Object.values(e||[]).map((e=>this.extend(this.parseTrade(e,t),r)));a=m(a,"timestamp","id");const n=void 0!==t?t.symbol:void 0,o=void 0===i;return this.filterBySymbolSinceLimit(a,n,i,s,o)}parseTransactions(e,t,i,s,r={}){let a=Object.values(e||[]).map((e=>this.extend(this.parseTransaction(e,t),r)));a=this.sortBy(a,"timestamp");const n=void 0!==t?t.code:void 0,o=void 0===i;return this.filterByCurrencySinceLimit(a,n,i,s,o)}parseTransfers(e,t,i,s,r={}){let a=Object.values(e||[]).map((e=>this.extend(this.parseTransfer(e,t),r)));a=this.sortBy(a,"timestamp");const n=void 0!==t?t.code:void 0,o=void 0===i;return this.filterByCurrencySinceLimit(a,n,i,s,o)}parseLedger(e,t,i,s,r={}){let a=[];const n=Object.values(e||[]);for(let e=0;e<n.length;e++){const i=this.parseLedgerEntry(n[e],t);if(Array.isArray(i))for(let e=0;e<i.length;e++)a.push(this.extend(i[e],r));else a.push(this.extend(i,r))}a=this.sortBy(a,"timestamp");const o=void 0!==t?t.code:void 0,h=void 0===i;return this.filterByCurrencySinceLimit(a,o,i,s,h)}parseOrders(e,t,i,s,r={}){let a=Array.isArray(e)?Object.values(e).map((e=>this.extend(this.parseOrder(e,t),r))):Object.entries(e).map((([e,i])=>this.extend(this.parseOrder(this.extend({id:e},i),t),r)));a=p(a,"timestamp");const n=void 0!==t?t.symbol:void 0,o=void 0===i;return this.filterBySymbolSinceLimit(a,n,i,s,o)}safeCurrency(e,t){return void 0===e&&void 0!==t?t:void 0!==this.currencies_by_id&&e in this.currencies_by_id?this.currencies_by_id[e]:{id:e,code:void 0===e?e:this.commonCurrencyCode(e.toUpperCase())}}safeCurrencyCode(e,t){return(t=this.safeCurrency(e,t)).code}safeMarket(e,t,i){if(void 0!==e)if(void 0!==this.markets_by_id&&e in this.markets_by_id)t=this.markets_by_id[e];else if(void 0!==i){const[t,s]=e.split(i),r=this.safeCurrencyCode(t),a=this.safeCurrencyCode(s);return{id:e,symbol:r+"/"+a,base:r,quote:a,baseId:t,quoteId:s}}return void 0!==t?t:{id:e,symbol:e,base:void 0,quote:void 0,baseId:void 0,quoteId:void 0}}safeSymbol(e,t,i){return(t=this.safeMarket(e,t,i)).symbol}filterBySymbol(e,t){return void 0!==t?e.filter((e=>e.symbol===t)):e}parseFundingRate(e,t){throw new E(this.id+" parseFundingRate() not supported yet")}parseFundingRates(e,t){const i={};for(let s=0;s<e.length;s++){const r=this.parseFundingRate(e[s],t);i[r.symbol]=r}return i}parseOHLCV(e,t){return Array.isArray(e)?e.slice(0,6):e}parseOHLCVs(e,t,i="1m",s,r){const a=e.map((e=>this.parseOHLCV(e,t))),n=this.sortBy(a,0),o=void 0===s;return this.filterBySinceLimit(n,s,r,0,o)}editLimitBuyOrder(e,t,...i){return this.editLimitOrder(e,t,"buy",...i)}editLimitSellOrder(e,t,...i){return this.editLimitOrder(e,t,"sell",...i)}editLimitOrder(e,t,...i){return this.editOrder(e,t,"limit",...i)}async editOrder(e,t,...i){if(!this.enableRateLimit)throw new A(this.id+" editOrder() requires enableRateLimit = true");return await this.cancelOrder(e,t),this.createOrder(t,...i)}createLimitOrder(e,t,i,s,r={}){return this.createOrder(e,"limit",t,i,s,r)}createMarketOrder(e,t,i,s,r={}){return this.createOrder(e,"market",t,i,s,r)}createLimitBuyOrder(e,t,i,s={}){return this.createOrder(e,"limit","buy",t,i,s)}createLimitSellOrder(e,t,i,s={}){return this.createOrder(e,"limit","sell",t,i,s)}createMarketBuyOrder(e,t,i={}){return this.createOrder(e,"market","buy",t,void 0,i)}createMarketSellOrder(e,t,i={}){return this.createOrder(e,"market","sell",t,void 0,i)}costToPrecision(e,t){const i=this.market(e);return x(t,D,i.precision.price,this.precisionMode,this.paddingMode)}priceToPrecision(e,t){const i=this.market(e);return x(t,q,i.precision.price,this.precisionMode,this.paddingMode)}amountToPrecision(e,t){const i=this.market(e);return x(t,D,i.precision.amount,this.precisionMode,this.paddingMode)}feeToPrecision(e,t){const i=this.market(e);return x(t,q,i.precision.price,this.precisionMode,this.paddingMode)}currencyToPrecision(e,t){return x(t,q,this.currencies[e].precision,this.precisionMode,this.paddingMode)}calculateFee(e,t,i,s,r,a="taker",n={}){const o=this.markets[e],h=this.safeString(o,"feeSide","quote");let c,d="quote";"quote"===h?c=s*r:"base"===h?c=s:"get"===h?(c=s,"sell"===i?c*=r:d="base"):"give"===h&&(c=s,"buy"===i?c*=r:d="base");const u=o[a];return void 0!==c&&(c*=u),{type:a,currency:o[d],rate:u,cost:c}}checkRequiredDependencies(){}remove0xPrefix(e){return"0x"===e.slice(0,2)?e.slice(2):e}hashMessage(e){const t=this.base16ToBinary(this.remove0xPrefix(e)),i=this.stringToBinary("Ethereum Signed Message:\n"+t.sigBytes);return"0x"+this.hash(this.binaryConcat(i,t),"keccak","hex")}signHash(e,t){const i=this.ecdsa(e.slice(-64),t.slice(-64),"secp256k1",void 0);return{r:"0x"+i.r,s:"0x"+i.s,v:27+i.v}}signMessage(e,t){return this.signHash(this.hashMessage(e),t.slice(-64))}signMessageString(e,t){const i=this.signMessage(e,t);return i.r+this.remove0xPrefix(i.s)+this.binaryToBase16(this.numberToBE(i.v))}oath(){if(void 0!==this.twofa)return this.totp(this.twofa);throw new A(this.id+" this.twofa has not been set")}reduceFeesByCurrency(e,t=!1){const i={};for(let s=0;s<e.length;s++){const r=e[s],a=this.safeString(r,"currency");if(void 0!==a){const e=this.safeString(r,"rate"),s=this.safeValue(r,"cost");a in i||(i[a]={});const n=void 0===e?"":e;n in i[a]?i[a][n].cost=t?j.stringAdd(i[a][n].cost,s):this.sum(i[a][n].cost,s):(i[a][n]={currency:a,cost:t?s:this.parseNumber(s)},void 0!==e&&(i[a][n].rate=t?e:this.parseNumber(e)))}}let s=[];const r=Object.values(i);for(let e=0;e<r.length;e++){const t=Object.values(r[e]);s=this.arrayConcat(s,t)}return s}safeTrade(e,t){const i=this.safeString(e,"amount"),s=this.safeString(e,"price");let r=this.safeString(e,"cost");if(void 0===r){const e=this.safeString(t,"contractSize");let a=s;void 0!==e&&(this.safeValue(t,"inverse",!1)&&(a=j.stringDiv("1",s)),a=j.stringMul(a,e)),r=j.stringMul(a,i)}const a=void 0===this.safeValue(e,"fee"),n=void 0===this.safeValue(e,"fees"),o=a||n,h=this.safeValue(e,"fees",[]);if(o){const t=this.safeValue(e,"fees");if(void 0!==t)for(let e=0;e<t.length;e++){const i=t[e];h.push(this.extend({},i))}else{const t=this.safeValue(e,"fee");void 0!==t&&h.push(this.extend({},t))}}const c=this.safeValue(e,"fee");if(o){const t=this.reduceFees?this.reduceFeesByCurrency(h,!0):h,i=t.length;for(let e=0;e<i;e++)t[e].cost=this.safeNumber(t[e],"cost");a||0!==i||(c.cost=this.safeNumber(c,"cost"),t.push(c)),n&&(e.fees=t),a&&1===i&&(e.fee=t[0]);const s=this.safeValue(e,"fee");void 0!==s&&(s.cost=this.safeNumber(s,"cost"),e.fee=s)}return e.amount=this.parseNumber(i),e.price=this.parseNumber(s),e.cost=this.parseNumber(r),e}safeOrder(e){let t=this.safeValue(e,"amount"),i=this.safeValue(e,"remaining"),s=this.safeValue(e,"filled"),r=this.safeValue(e,"cost"),a=this.safeValue(e,"average"),n=this.safeValue(e,"price"),o=this.safeInteger(e,"lastTradeTimestamp");const h=void 0===s,c=void 0===r,d=void 0===o,u=void 0===this.safeValue(e,"fee"),l=void 0===this.safeValue(e,"fees"),f=u||l,p=this.safeValue(e,"fees",[]);if(h||c||f){const t=this.safeValue(e,"trades");if(Array.isArray(t)){h&&(s=0),c&&(r=0);for(let e=0;e<t.length;e++){const i=t[e],a=this.safeValue(i,"amount");h&&void 0!==a&&(s=this.sum(s,a));const n=this.safeValue(i,"cost");c&&void 0!==n&&(r=this.sum(r,n));const u=this.safeValue(i,"timestamp");if(d&&void 0!==u&&(o=void 0===o?u:Math.max(o,u)),f){const e=this.safeValue(i,"fees");if(void 0!==e)for(let t=0;t<e.length;t++){const i=e[t];p.push(this.extend({},i))}else{const e=this.safeValue(i,"fee");void 0!==e&&p.push(this.extend({},e))}}}}}if(f){const t=this.reduceFees?this.reduceFeesByCurrency(p):p,i=t.length;u||0!==i||t.push(e.fee),l&&(e.fees=t),u&&1===i&&(e.fee=t[0])}void 0===t&&(void 0!==s&&void 0!==i?t=this.sum(s,i):"closed"===this.safeString(e,"status")&&(t=s)),void 0===s&&void 0!==t&&void 0!==i&&(s=Math.max(this.sum(t,-i),0)),void 0===i&&void 0!==t&&void 0!==s&&(i=Math.max(this.sum(t,-s),0)),void 0===a&&void 0!==s&&void 0!==r&&s>0&&(a=r/s),c&&void 0!==s&&(void 0!==a||void 0!==n)&&(r=void 0===a?n*s:a*s);const m=this.safeValue(e,"type");return(void 0===n||0===n)&&"market"===m&&(n=a),this.extend(e,{lastTradeTimestamp:o,price:n,amount:t,cost:r,average:a,filled:s,remaining:i})}safeOrder2(e,t){let i=this.omitZero(this.safeString(e,"amount")),s=this.safeString(e,"remaining"),r=this.safeString(e,"filled"),a=this.safeString(e,"cost"),n=this.omitZero(this.safeString(e,"average")),o=this.omitZero(this.safeString(e,"price")),h=this.safeInteger(e,"lastTradeTimestamp");const c=void 0===r,d=void 0===a,u=void 0===h,l=this.safeValue(e,"fee"),f=void 0===l,p=void 0===this.safeValue(e,"fees"),m=f||p,g=this.safeValue(e,"fees",[]);let y=[];if(c||d||m){const i=this.safeValue(e,"trades",y),s=this.number;if(this.number=String,y=this.parseTrades(i,t,void 0,void 0,{symbol:e.symbol,side:e.side,type:e.type,order:e.id}),this.number=s,Array.isArray(y)&&y.length){c&&(r="0"),d&&(a="0");for(let e=0;e<y.length;e++){const t=y[e],i=this.safeString(t,"amount");c&&void 0!==i&&(r=j.stringAdd(r,i));const s=this.safeString(t,"cost");d&&void 0!==s&&(a=j.stringAdd(a,s));const n=this.safeValue(t,"timestamp");if(u&&void 0!==n&&(h=void 0===h?n:Math.max(h,n)),m){const e=this.safeValue(t,"fees");if(void 0!==e)for(let t=0;t<e.length;t++){const i=e[t];g.push(this.extend({},i))}else{const e=this.safeValue(t,"fee");void 0!==e&&g.push(this.extend({},e))}}}}}if(m){const t=this.reduceFees?this.reduceFeesByCurrency(g,!0):g,i=t.length;for(let e=0;e<i;e++)t[e].cost=this.parseNumber(t[e].cost);f||0!==i||(l.cost=this.safeNumber(l,"cost"),t.push(l)),p&&(e.fees=t),f&&1===i&&(e.fee=t[0])}if(void 0===i&&(void 0!==r&&void 0!==s?i=j.stringAdd(r,s):"closed"===this.safeString(e,"status")&&(i=r)),void 0===r&&void 0!==i&&void 0!==s&&(r=j.stringSub(i,s)),void 0===s&&void 0!==i&&void 0!==r&&(s=j.stringSub(i,r)),void 0===n&&void 0!==r&&void 0!==a&&j.stringGt(r,"0")&&(n=j.stringDiv(a,r)),d&&void 0!==r&&(void 0!==n||void 0!==o)){let e;e=void 0===n?o:n;const i=this.safeString(t,"contractSize");void 0!==i&&(this.safeValue(t,"inverse",!1)&&(e=j.stringDiv("1",e)),e=j.stringMul(e,i)),a=j.stringMul(e,r)}const b=this.safeValue(e,"type");(void 0===o||j.stringEquals(o,"0"))&&"market"===b&&(o=n);for(let e=0;e<y.length;e++){const t=y[e];t.amount=this.safeNumber(t,"amount"),t.price=this.safeNumber(t,"price"),t.cost=this.safeNumber(t,"cost");const i=this.safeValue(t,"fee",{});i.cost=this.safeNumber(i,"cost")}return this.extend(e,{lastTradeTimestamp:h,price:this.parseNumber(o),amount:this.parseNumber(i),cost:this.parseNumber(a),average:this.parseNumber(n),filled:this.parseNumber(r),remaining:this.parseNumber(s),trades:y})}parseNumber(e,t){if(void 0===e)return t;try{return this.number(e)}catch(e){return t}}safeNumber(e,t,i){const s=this.safeString(e,t);return this.parseNumber(s,i)}safeNumber2(e,t,i,s){const r=this.safeString2(e,t,i);return this.parseNumber(r,s)}parsePrecision(e){if(void 0!==e)return"1e"+j.stringNeg(e)}handleWithdrawTagAndParams(e,t){return"object"==typeof e&&(t=this.extend(e,t),e=void 0),void 0===e&&void 0!==(e=this.safeString(t,"tag"))&&(t=this.omit(t,"tag")),[e,t]}getSupportedMapping(e,t={}){if(e in t)return t[e];throw new E(this.id+" "+e+" does not have a value in mapping")}async fetchBorrowRate(e,t={}){if(await this.loadMarkets(),!this.has.fetchBorrowRates)throw new E(this.id+"fetchBorrowRate() is not supported yet");const i=await this.fetchBorrowRates(t),s=this.safeValue(i,e);if(void 0===s)throw new A(this.id+"fetchBorrowRate() could not find the borrow rate for currency code "+e);return s}handleMarketTypeAndParams(e,t,i={}){const s=this.safeString2(this.options,e,"defaultType","spot"),r=void 0===t?s:t.type;return[this.safeString(i,"type",r),i=this.omit(i,"type")]}}},6832:e=>{"use strict";const t=BigInt(0),i=BigInt(-1),s=BigInt(10);class r{constructor(e,t){if(void 0===t){let t=0;(e=e.toLowerCase()).indexOf("e")>-1&&([e,t]=e.split("e"),t=parseInt(t));const i=e.indexOf(".");this.decimals=i>-1?e.length-i-1:0;const s=e.replace(".","");this.integer=BigInt(s),this.decimals=this.decimals-t}else this.integer=e,this.decimals=t}mul(e){const t=this.integer*e.integer;return new r(t,this.decimals+e.decimals)}div(e,t=18){const i=t-this.decimals+e.decimals;let a;if(0===i)a=this.integer;else if(i<0){const e=s**BigInt(-i);a=this.integer/e}else{const e=s**BigInt(i);a=this.integer*e}const n=a/e.integer;return new r(n,t)}add(e){if(this.decimals===e.decimals){const t=this.integer+e.integer;return new r(t,this.decimals)}{const[t,i]=this.decimals>e.decimals?[e,this]:[this,e],a=i.decimals-t.decimals,n=t.integer*s**BigInt(a)+i.integer;return new r(n,i.decimals)}}mod(e){const t=Math.max(-this.decimals+e.decimals,0),i=this.integer*s**BigInt(t),a=Math.max(-e.decimals+this.decimals,0),n=e.integer*s**BigInt(a);return new r(i%n,a+e.decimals)}sub(e){const t=new r(-e.integer,e.decimals);return this.add(t)}abs(){return new r(this.integer<0?this.integer*i:this.integer,this.decimals)}neg(){return new r(-this.integer,this.decimals)}min(e){return this.lt(e)?this:e}max(e){return this.gt(e)?this:e}gt(e){return this.sub(e).integer>0}ge(e){return this.sub(e).integer>=0}lt(e){return e.gt(this)}le(e){return e.ge(this)}reduce(){const e=this.integer.toString(),t=e.length-1;if(0===t)return"0"===e&&(this.decimals=0),this;let i;for(i=t;i>=0&&"0"===e.charAt(i);i--);const s=t-i;if(0===s)return this;this.decimals-=s,this.integer=BigInt(e.slice(0,i+1))}equals(e){return this.reduce(),e.reduce(),this.decimals===e.decimals&&this.integer===e.integer}toString(){let e,t;this.reduce(),this.integer<0?(e="-",t=-this.integer):(e="",t=this.integer);const i=Array.from(t.toString(this.base).padStart(this.decimals,"0")),s=i.length-this.decimals;let r;return r=0===s?"0.":this.decimals<0?"0".repeat(-this.decimals):0===this.decimals?"":".",i.splice(s,0,r),e+i.join("")}static stringMul(e,t){if(void 0!==e&&void 0!==t)return new r(e).mul(new r(t)).toString()}static stringDiv(e,i,s=18){if(void 0===e||void 0===i)return;const a=new r(i);return a.integer!==t?new r(e).div(a,s).toString():void 0}static stringAdd(e,t){if(void 0!==e||void 0!==t)return void 0===e?t:void 0===t?e:new r(e).add(new r(t)).toString()}static stringSub(e,t){if(void 0!==e&&void 0!==t)return new r(e).sub(new r(t)).toString()}static stringAbs(e){if(void 0!==e)return new r(e).abs().toString()}static stringNeg(e){if(void 0!==e)return new r(e).neg().toString()}static stringMod(e,t){if(void 0!==e&&void 0!==t)return new r(e).mod(new r(t)).toString()}static stringEquals(e,t){if(void 0!==e&&void 0!==t)return new r(e).equals(new r(t))}static stringMin(e,t){if(void 0!==e&&void 0!==t)return new r(e).min(new r(t)).toString()}static stringMax(e,t){if(void 0!==e&&void 0!==t)return new r(e).max(new r(t)).toString()}static stringGt(e,t){if(void 0!==e&&void 0!==t)return new r(e).gt(new r(t))}static stringGe(e,t){if(void 0!==e&&void 0!==t)return new r(e).ge(new r(t))}static stringLt(e,t){if(void 0!==e&&void 0!==t)return new r(e).lt(new r(t))}static stringLe(e,t){if(void 0!==e&&void 0!==t)return new r(e).le(new r(t))}}e.exports=r},66667:e=>{"use strict";e.exports={BaseError:{ExchangeError:{AuthenticationError:{PermissionDenied:{},AccountSuspended:{}},ArgumentsRequired:{},BadRequest:{BadSymbol:{}},BadResponse:{NullResponse:{}},InsufficientFunds:{},InvalidAddress:{AddressPending:{}},InvalidOrder:{OrderNotFound:{},OrderNotCached:{},CancelPending:{},OrderImmediatelyFillable:{},OrderNotFillable:{},DuplicateOrderId:{}},NotSupported:{}},NetworkError:{DDoSProtection:{RateLimitExceeded:{}},ExchangeNotAvailable:{OnMaintenance:{}},InvalidNonce:{},RequestTimeout:{}}}}},73449:(e,t,i)=>{"use strict";const s=i(66667);e.exports=function e(t,i,s={}){for(const[r,a]of Object.entries(i)){const i=Object.assign(s,{[r]:class extends t{constructor(e){super(e),this.constructor=i,this.__proto__=i.prototype,this.name=r,this.message=e,Object.setPrototypeOf(this,i.prototype)}}})[r];e(i,a,s)}return s}(Error,s)},85806:(e,t,i)=>{"use strict";const{unCamelCase:s}=i(69579);e.exports=(e=>{for(const t in e)e[s(t)]=e[t];return e})(Object.assign({},i(90182),i(65206),i(69579),i(11799),i(62115),i(80651),i(35691),i(39764),i(3186),i(26558)))},35691:(e,t,i)=>{"use strict";const s=i(27295),{capitalize:r}=i(69579),{stringToBase64:a,urlencodeBase64:n}=i(80651),o=i(21286),{binaryToBase58:h,byteArrayToWordArray:c}=i(80651),d=i(73150),u=d.ec,l=d.eddsa,{ArgumentsRequired:f}=i(73449),p=i(35060),m=(e,t="md5",i="hex")=>{const a={};"keccak"===t&&(t="SHA3",a.outputLength=256);const n=s[t.toUpperCase()](e,a);return"binary"===i?n:n.toString(s.enc[r(i)])},g=(e,t,i="sha256",a="hex")=>{const n=s["Hmac"+i.toUpperCase()](e,t);if(a){const e="binary"===a?"Latin1":r(a);return n.toString(s.enc[r(e)])}return n};function y(e,t,i="RS256"){const s={RS256:"pkcs1-sha256",RS512:"pkcs1-sha512"};if(!(i in s))throw new ExchangeError(i+" is not a supported rsa signing algorithm.");return new o(t,{environment:"browser",signingScheme:s[i]}).sign(e,"base64","binary")}e.exports={hash:m,hmac:g,jwt:function(e,t,i="HS256"){const s=[n(a(JSON.stringify({alg:i,typ:"JWT"}))),n(a(JSON.stringify(e)))].join("."),r=i.slice(0,2);let o;return"HS"===r?o=n(g(s,t,{HS256:"sha256",HS384:"sha384",HS512:"sha512"}[i],"base64")):"RS"===r&&(o=n(y(s,t,i))),[s,o].join(".")},totp:e=>{const t=e=>parseInt(e,16),i=(e,t)=>(t+e).slice(-t.length);return(e=>{e=e.replace(" ","");let r=Math.round((new Date).getTime()/1e3),a=i(((n=Math.floor(r/30))<15.5?"0":"")+Math.round(n).toString(16),"0000000000000000");var n;let o=g(s.enc.Hex.parse(a),s.enc.Hex.parse((e=>{let t="",s="";for(let s=0;s<e.length;s++){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".indexOf(e.charAt(s).toUpperCase());t+=i(r.toString(2),"00000")}for(let e=0;e+4<=t.length;e+=4){let i=t.substr(e,4);s+=parseInt(i,2).toString(16)}return s})(e)),"sha1","hex"),h=t(o.substring(o.length-1)),c=(t(o.substr(2*h,8))&t("7fffffff"))+"";return c=c.substr(c.length-6,6),c})(e)},rsa:y,ecdsa:function(e,t,i="p256",s,r=!1){let a=e;void 0!==s&&(a=m(e,s,"hex"));const n=new u(i);let o=n.sign(a,t,"hex",{canonical:!0}),h=new p("0");const c=new p("1").shln(248).sub(new p("1"));for(;r&&(o.r.gt(n.nh)||o.r.lte(c)||o.s.lte(c));)o=n.sign(a,t,"hex",{canonical:!0,extraEntropy:h.toArray("le",32)}),h=h.add(new p("1"));return{r:o.r.toString(16).padStart(64,"0"),s:o.s.toString(16).padStart(64,"0"),v:o.recoveryParam}},eddsa:function(e,t,i="ed25519"){const s=new l(i).signModified(e,t);return h(c(s.toBytes()))}}},80651:(e,t,i)=>{"use strict";const s=i(27295),r=i(84106),a=i(35060),n="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let o=null,h=null;function c(e){const t=[];for(let i=0;i<e.length;i++)t[i/4|0]|=e[i]<<24-8*i;return s.lib.WordArray.create(t,e.length)}e.exports={json:(e,t)=>JSON.stringify(e),isJsonEncodedObject:e=>"string"==typeof e&&e.length>=2&&("{"===e[0]||"["===e[0]),stringToBinary:e=>s.enc.Latin1.parse(e),stringToBase64:e=>s.enc.Latin1.parse(e).toString(s.enc.Base64),base64ToBinary:e=>s.enc.Base64.parse(e),base64ToString:e=>s.enc.Base64.parse(e).toString(s.enc.Utf8),binaryToBase64:e=>e.toString(s.enc.Base64),base16ToBinary:e=>s.enc.Hex.parse(e),binaryToBase16:e=>e.toString(s.enc.Hex),binaryConcat:(...e)=>e.reduce(((e,t)=>e.concat(t))),binaryConcatArray:e=>e.reduce(((e,t)=>e.concat(t))),urlencode:e=>r.stringify(e),urlencodeWithArrayRepeat:e=>r.stringify(e,{arrayFormat:"repeat"}),rawencode:e=>r.stringify(e,{encode:!1}),encode:e=>e,decode:e=>e,urlencodeBase64:e=>e.replace(/[=]+$/,"").replace(/\+/g,"-").replace(/\//g,"_"),numberToLE:(e,t)=>c(new a(e).toArray("le",t)),numberToBE:(e,t)=>c(new a(e).toArray("be",t)),base58ToBinary:e=>{if(!o){o={},h={};for(let e=0;e<58;e++){const t=n[e],i=new a(e);o[t]=i,h[i]=t}}let t=new a(0);const i=new a(58);for(let s=0;s<e.length;s++){const r=e[s];t.imul(i),t.iadd(o[r])}return c(t.toArray("be"))},binaryToBase58:e=>{if(!h){o={},h={};for(let e=0;e<58;e++){const t=n[e],i=new a(e);o[t]=i,h[i]=t}}const t=new a(58),i=e.toString(s.enc.Hex);let r=new a(i,16),c=[];for(;!r.isZero();){const{div:e,mod:i}=r.divmod(t);r=e,c.push(h[i])}return c.reverse().join("")}},e.exports.byteArrayToWordArray=c},65206:(e,t,i)=>{"use strict";const{isObject:s,isNumber:r,isDictionary:a,isArray:n}=i(11799),o=Object.keys,h=e=>n(e)?e:Object.values(e),c=e=>new Set(h(e)),d=(...e)=>Object.assign({},...e),u=e=>n(e)?Array.from(e):d(e);e.exports={keys:o,values:h,extend:d,clone:u,index:c,ordered:e=>e,unique:e=>Array.from(c(e)),arrayConcat:(e,t)=>e.concat(t),inArray:(e,t)=>t.includes(e),toArray:e=>Object.values(e),isEmpty:e=>!e||(Array.isArray(e)?e:Object.keys(e)).length<1,keysort(e,t={}){for(const i of o(e).sort())t[i]=e[i];return t},indexBy(e,t,i={}){for(const s of h(e))t in s&&(i[s[t]]=s);return i},groupBy(e,t,i={}){for(const s of h(e))if(t in s){const e=s[t];i[e]=i[e]||[],i[e].push(s)}return i},filterBy(e,t,i,s=[]){for(const r of h(e))r[t]===i&&s.push(r);return s},sortBy:(e,t,i=!1,s=(i?-1:1))=>e.sort(((e,i)=>e[t]<i[t]?-s:e[t]>i[t]?s:0)),sortBy2:(e,t,i,s=!1,r=(s?-1:1))=>e.sort(((e,s)=>e[t]<s[t]?-r:e[t]>s[t]?r:e[i]<s[i]?-r:e[i]>s[i]?r:0)),flatten:function e(t,i=[]){for(const s of t)n(s)?e(s,i):i.push(s);return i},pluck:(e,t)=>h(e).filter((e=>t in e)).map((e=>e[t])),omit(e,...t){if(!Array.isArray(e)){const i=u(e);for(const e of t)if(n(e))for(const t of e)delete i[t];else delete i[e];return i}return e},sum(...e){const t=e.filter(r);return t.length>0?t.reduce(((e,t)=>e+t),0):void 0},deepExtend:function e(...t){let i;for(const s of t)if(a(s)){a(i)||(i={});for(const t in s)i[t]=e(i[t],s[t])}else i=s;return i}}},26558:(e,t,i)=>{"use strict";const{ROUND_UP:s,ROUND_DOWN:r}=i(62115),{NotSupported:a}=i(73449),n=e=>{const t=e.slice(0,-1),i=e.slice(-1);let s;if("y"===i)s=31536e3;else if("M"===i)s=2592e3;else if("w"===i)s=604800;else if("d"===i)s=86400;else if("h"===i)s=3600;else if("m"===i)s=60;else{if("s"!==i)throw new a("timeframe unit "+i+" is not supported");s=1}return t*s};e.exports={aggregate(e){const t={};for(let i=0;i<e.length;i++){const[s,r]=e[i];r>0&&(t[s]=(t[s]||0)+r)}return Object.keys(t).map((e=>[parseFloat(e),parseFloat(t[e])]))},parseTimeframe:n,roundTimeframe:(e,t,i=r)=>{const a=1e3*n(e);return t-t%a+(i===s?a:0)},buildOHLCVC:(e,t="1m",i=-1/0,s=1/0)=>{const r=1e3*n(t),a=[],[o,,h,c,d,u,l]=[0,1,2,3,4,5,6],f=Math.min(e.length-1,s);for(let t=0;t<=f;t++){const s=e[t];if(s.timestamp<i)continue;const n=Math.floor(s.timestamp/r)*r,f=a.length-1;-1===f||n>=a[f][o]+r?a.push([n,s.price,s.price,s.price,s.price,s.amount,1]):(a[f][h]=Math.max(a[f][h],s.price),a[f][c]=Math.min(a[f][c],s.price),a[f][d]=s.price,a[f][u]+=s.amount,a[f][l]++)}return a},ROUND_UP:s,ROUND_DOWN:r,implodeParams:(e,t)=>{if(!Array.isArray(t)){const i=Object.keys(t);for(let s=0;s<i.length;s++){const r=i[s];Array.isArray(t[r])||(e=e.replace("{"+r+"}",t[r]))}}return e},extractParams:e=>{const t=/{([\w-]+)}/g,i=[];let s=t.exec(e);for(;s;)i.push(s[1]),s=t.exec(e);return i},vwap:function(e,t){return void 0!==e&&void 0!==t&&e>0?t/e:void 0}}},62115:e=>{"use strict";function t(e){if("string"==typeof e)return e;const t=e.toString();if(Math.abs(e)<1){const e=t.split("e-"),i=e[0].replace(".",""),s=parseInt(e[1]),r="-"===t[0];if(s)return(r?"-":"")+"0."+new Array(s).join("0")+i.substring(r)}else{const e=t.split("e");if(e[1]){let t=parseInt(e[1]);const i=e[0].split(".");let s="";return i[1]&&(t-=i[1].length,s=i[1]),i[0]+s+new Array(t+1).join("0")}}return t}const i=[],s=(e,s=0)=>{if(e=t(e),s>0){const t=i[s]||(i[s]=new RegExp("([-]*\\d+\\.\\d{"+s+"})(\\d)")),[,r]=e.toString().match(t)||[null,e];return r.toString()}return parseInt(e).toString()};function r(e){const t=e.replace(/0+$/g,"").split(".");return t.length>1?t[1].length:0}const a=(e,i,s,n=0,o=0)=>{if(2===n&&s<=0)throw new Error("TICK_SIZE cant be used with negative or zero numPrecisionDigits");if(s<0){const t=Math.pow(10,-s);if(0===i)return(t*a(e/t,i,0,n,o)).toString();if(1===i)return(e-e%t).toString()}if(2===n){const t=r(a(s,0,22,0,0));let n=e%s;return n=Number(a(n,0,8,0,0)),0!==r(a(n/s,0,Math.max(t,8),0,0))&&(0===i?e>0?n>=s/2?e=e-n+s:e-=n:e=n>=s/2?Number(e)-n:Number(e)-n-s:1===i&&(e-=n)),a(e,0,t,0,o)}const h=t(e),c="-"===h[0],d=c?1:0,u=h.length;for(var l=0;l<u&&"."!==h[l];l++);const f=l<h.length,p=48,m=new Uint8Array(u-d+(f?0:1));m[0]=p;let g=m.length,y=-1,b=-1;for(var v=1,w=d;w<u;w++,v++){const e=h.charCodeAt(w);if(46===e)g=v--;else{if(e<p||e>57)throw new Error(`${h}: invalid number (contains an illegal character '${h[v-1]}')`);m[v]=e,e!==p&&y<0&&(y=v)}}y<0&&(y=1);let k=0===n?g:y,_=k+s;b=-1;let S=!0,O=c;for(let e=m.length-1,t=0;e>=0;e--){let r=m[e];0!==e?(r+=t,e>=k+s&&(r=0===i&&r>=53&&(53!==r||!t)?58:p),r>57?(r=p,t=1):t=0):t&&(r=49),m[e]=r,r!==p&&(S=!1,y=e,b=b<0?e+1:b)}1===n&&(k=y,_=k+s),S&&(O=!1);const M=y>=g||S?g-1:y,T=b<g?g:b,x=O?1:0,I=x+(g-M),A=Math.max(T-g,0),C=T-M,N=0===o?C:_-M,E=Math.max(N-C,0),P=I+1+A,B=P+E,R=A+E===0,V=new Uint8Array(I+(R?0:1)+A+E);for(O&&(V[0]=45),v=x,w=M;v<I;v++,w++)V[v]=m[w];for(R||(V[I]=46),v=I+1,w=g;v<P;v++,w++)V[v]=m[w];for(v=P;v<B;v++)V[v]=p;return String.fromCharCode(...V)};e.exports={numberToString:t,precisionFromString:r,decimalToPrecision:a,truncate_to_string:s,truncate:(e,t=0)=>parseFloat(s(e,t)),omitZero:function(e){if(void 0!==e&&""!==e&&0!==parseFloat(e))return e},precisionConstants:{ROUND:0,TRUNCATE:1,ROUND_UP:2,ROUND_DOWN:3,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,TICK_SIZE:2,NO_PADDING:0,PAD_WITH_ZERO:1},ROUND:0,TRUNCATE:1,ROUND_UP:2,ROUND_DOWN:3,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,TICK_SIZE:2,NO_PADDING:0,PAD_WITH_ZERO:1}},90182:(e,t,i)=>{"use strict";var s=i(34155);const r="undefined"!=typeof window,a=void 0!==s&&void 0!==s.versions&&void 0!==s.versions.electron,n="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,o=void 0!==s&&"win32"===s.platform,h=!(r||n),c="undefined"==typeof fetch?i(79323)().fetch:fetch;e.exports={isBrowser:r,isElectron:a,isWebWorker:n,isNode:h,isWindows:o,defaultFetch:c}},69579:e=>{"use strict";const t=e=>e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t),i=e=>e?(e^16*Math.random()>>e/4).toString(16):([1e5]+100+400+8e3).replace(/[018]/g,i),s=e=>e?(e^16*Math.random()>>e/4).toString(16):([1e7]+1e3+4e3+8e5).replace(/[018]/g,s);e.exports={uuid:t,uuid16:i,uuid22:s,unCamelCase:e=>e.match(/^[A-Z0-9_]+$/)?e:e.replace(/[a-z0-9][A-Z]/g,(e=>e[0]+"_"+e[1])).replace(/[A-Z0-9][A-Z0-9][a-z]/g,(e=>e[0]+"_"+e[1]+e[2])).toLowerCase(),capitalize:e=>e.length?e.charAt(0).toUpperCase()+e.slice(1):e,strip:e=>e.replace(/^\s+|\s+$/g,"")}},3186:(e,t,i)=>{"use strict";const{now:s,sleep:r}=i(39764);class a{constructor(e){this.config={refillRate:1,delay:.001,capacity:1,maxCapacity:1e3,tokens:0,cost:1},Object.assign(this.config,e),this.queue=[],this.running=!1}async loop(){let e=s();for(;this.running;){const{resolver:t,cost:i}=this.queue[0];if(this.config.tokens>=0)this.config.tokens-=i,t(),this.queue.shift(),await Promise.resolve(),0===this.queue.length&&(this.running=!1);else{await r(1e3*this.config.delay);const t=s(),i=t-e;e=t,this.config.tokens=Math.min(this.config.tokens+this.config.refillRate*i,this.config.capacity)}}}}e.exports={throttle:function(e){const t=new a(e),i=function(e){let t;const i=new Promise(((e,i)=>{t=e}));if(this.queue.length>this.config.maxCapacity)throw new Error("throttle queue is over maxCapacity");return e=void 0===e?this.config.cost:e,this.queue.push({resolver:t,cost:e}),this.running||(this.running=!0,this.loop()),i}.bind(t);return i.config=t.config,i}}},39764:e=>{"use strict";const t=Date.now,i=()=>1e3*t(),s=t,r=setTimeout,a=(e,i,s=r,n=t()+i)=>{if(i>=2147483647)throw new Exception("setTimeout() function was called with unrealistic value of "+i.toString());let o=()=>{},h=!0;const c=s((()=>{h=!0;const i=n-t();i>0?o=a(e,i,s,n):e()}),i);return function(){h&&(h=!1,clearTimeout(c)),o()}};class n extends Error{constructor(){const e="timed out";super(e),this.constructor=n,this.__proto__=n.prototype,this.message=e}}const o=e=>{if("string"==typeof e&&e&&!e.match(/^[0-9]+$/)&&!(e.indexOf("-")<0||e.indexOf(":")<0))try{const t=Date.parse(e.indexOf("+")>=0||"Z"===e.slice(-1)?e:(e+"Z").replace(/\s(\d\d):/,"T$1:"));if(Number.isNaN(t))return;return t}catch(e){return}},h=(e,t,i=!0)=>{t=t||"";const s=new Date(e),r=s.getUTCFullYear(),a=(i?r:r-2e3).toString();let n=s.getUTCMonth()+1,o=s.getUTCDate();return n=n<10?"0"+n:n.toString(),o=o<10?"0"+o:o.toString(),a+t+n+t+o};e.exports={now:t,microseconds:i,milliseconds:s,seconds:()=>Math.floor(t()/1e3),iso8601:e=>{let t;if(t="number"==typeof e?Math.floor(e):parseInt(e,10),!(Number.isNaN(t)||t<0))try{return new Date(t).toISOString()}catch(e){return}},parse8601:o,rfc2616:e=>new Date(e).toUTCString(),uuidv1:()=>{const e=(10*i()+122192928e9).toString(16);return e.slice(7,15)+e.slice(3,7)+"1"+e.slice(0,3)+"9696"+"ff".repeat(6)},parseDate:e=>{if("string"==typeof e&&e){if(e.indexOf("GMT")>=0)try{return Date.parse(e)}catch(e){return}return o(e)}},mdy:(e,t="-")=>{t=t||"";const i=new Date(e),s=i.getUTCFullYear().toString();let r=i.getUTCMonth()+1,a=i.getUTCDate();return r=r<10?"0"+r:r.toString(),a=a<10?"0"+a:a.toString(),r+t+a+t+s},ymd:h,yymmdd:(e,t="")=>h(e,t,!1),yyyymmdd:(e,t="-")=>h(e,t,!0),ymdhms:(e,t=" ")=>{const i=new Date(e),s=i.getUTCFullYear();let r=i.getUTCMonth()+1,a=i.getUTCDate(),n=i.getUTCHours(),o=i.getUTCMinutes(),h=i.getUTCSeconds();return r=r<10?"0"+r:r,a=a<10?"0"+a:a,n=n<10?"0"+n:n,o=o<10?"0"+o:o,h=h<10?"0"+h:h,s+"-"+r+"-"+a+t+n+":"+o+":"+h},setTimeout_safe:a,sleep:e=>new Promise((t=>a(t,e))),TimedOut:n,timeout:async(e,t)=>{let i=()=>{};const s=new Promise((t=>i=a(t,e)));try{return await Promise.race([t,s.then((()=>{throw new n}))])}finally{i()}}}},11799:e=>{"use strict";const t=Number.isFinite,i=Number.isInteger,s=Array.isArray,r=e=>null!=e,a=e=>"string"==typeof e,n=e=>null!==e&&"object"==typeof e,o=e=>r(e)&&e.toString||t(e),h=(e,t)=>n(e)?e[t]:void 0,c=(e,t,i)=>n(e)?t in e&&null!==e[t]?e[t]:e[i]:void 0,d=e=>t(e)||a(e)?parseFloat(e):NaN,u=e=>t(e)||a(e)?parseInt(e,10):NaN;e.exports={isNumber:t,isInteger:i,isArray:s,isObject:n,isString:a,isStringCoercible:o,isDictionary:e=>n(e)&&Object.getPrototypeOf(e)===Object.prototype&&!s(e)&&!(e=>e instanceof RegExp)(e),hasProps:r,prop:h,asFloat:d,asInteger:u,safeFloat:(e,i,s,r=d(h(e,i)))=>t(r)?r:s,safeInteger:(e,i,s,r=u(h(e,i)))=>t(r)?r:s,safeIntegerProduct:(e,i,s,r,a=u(h(e,i)))=>t(a)?parseInt(a*s):r,safeTimestamp:(e,i,s,r=d(h(e,i)))=>t(r)?parseInt(1e3*r):s,safeValue:(e,t,i,s=h(e,t))=>r(s)?s:i,safeString:(e,t,i,s=h(e,t))=>o(s)?String(s):i,safeStringLower:(e,t,i,s=h(e,t))=>o(s)?String(s).toLowerCase():i,safeStringUpper:(e,t,i,s=h(e,t))=>o(s)?String(s).toUpperCase():i,safeFloat2:(e,i,s,r,a=d(c(e,i,s)))=>t(a)?a:r,safeInteger2:(e,i,s,r,a=u(c(e,i,s)))=>t(a)?a:r,safeIntegerProduct2:(e,i,s,r,a,n=u(c(e,i,s)))=>t(n)?parseInt(n*r):a,safeTimestamp2:(e,i,s,r,a=d(c(e,i,s)))=>t(a)?parseInt(1e3*a):r,safeValue2:(e,t,i,s,a=c(e,t,i))=>r(a)?a:s,safeString2:(e,t,i,s,r=c(e,t,i))=>o(r)?String(r):s,safeStringLower2:(e,t,i,s,r=c(e,t,i))=>o(r)?String(r).toLowerCase():s,safeStringUpper2:(e,t,i,s,r=c(e,t,i))=>o(r)?String(r).toUpperCase():s}},21366:(e,t,i)=>{"use strict";const s=i(28267);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bequant",name:"Bequant",countries:["MT"],pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/55248342-a75dfe00-525a-11e9-8aa2-05e9dca943c6.jpg",api:{public:"https://api.bequant.io",private:"https://api.bequant.io"},www:"https://bequant.io",doc:["https://api.bequant.io/"],fees:["https://bequant.io/fees-and-limits"],referral:"https://bequant.io"}})}}},77838:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,AccountSuspended:a,ArgumentsRequired:n,AuthenticationError:o,DDoSProtection:h,ExchangeNotAvailable:c,InvalidOrder:d,OrderNotFound:u,PermissionDenied:l,InsufficientFunds:f,BadSymbol:p,RateLimitExceeded:m,BadRequest:g}=i(73449),y=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bibox",name:"Bibox",countries:["CN","US","KR"],version:"v1",hostname:"bibox.com",has:{cancelOrder:!0,CORS:void 0,createMarketOrder:void 0,createOrder:!0,fetchBalance:!0,fetchBorrowRate:!1,fetchBorrowRates:!1,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"day","1w":"week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/77257418-3262b000-6c85-11ea-8fb8-20bdf20b3592.jpg",api:"https://api.{hostname}",www:"https://www.bibox365.com",doc:["https://biboxcom.github.io/en/"],fees:"https://bibox.zendesk.com/hc/en-us/articles/360002336133",referral:"https://w2.bibox365.com/login/register?invite_code=05Kj3I"},api:{public:{post:["mdata"],get:["cquery","mdata","cdata","orderpending"]},private:{post:["cquery","ctrade","user","orderpending","transfer"]},v2private:{post:["assets/transfer/spot"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:this.parseNumber("0.001"),maker:this.parseNumber("0.0008")},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{2011:a,2015:o,2021:f,2027:f,2033:u,2065:d,2066:d,2067:d,2068:d,2078:d,2085:d,2091:m,2092:d,2131:d,3e3:g,3002:g,3012:o,3016:p,3024:l,3025:o,4e3:c,4003:h},commonCurrencies:{"APENFT(NFT)":"NFT",BOX:"DefiBox",BPT:"BlockPool Token",GTC:"Game.com",KEY:"Bihu",MTC:"MTC Mesh Network",NFT:"NFT Protocol",PAI:"PCHAIN",REVO:"Revo Network",TERN:"Ternio-ERC20"}})}async fetchMarkets(e={}){const t=await this.publicGetMdata(this.extend({cmd:"pairList"},e)),i=this.safeValue(t,"result"),s=await this.publicGetOrderpending(this.extend({cmd:"tradeLimit"},e)),r=this.safeValue(s,"result",{}),a=this.safeValue(r,"min_trade_money",{}),n=[];for(let e=0;e<i.length;e++){const t=i[e],s=this.safeInteger(t,"id"),r=this.safeString(t,"pair");let o,h;if(void 0!==r){const e=r.split("_");o=this.safeString(e,0),h=this.safeString(e,1)}const c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(h),u=c+"/"+d;let l="spot",f=!0;16===this.safeInteger(t,"area_id")&&(l=void 0,f=!1);const p={amount:this.safeNumber(t,"amount_scale"),price:this.safeNumber(t,"decimal")};n.push({id:r,numericId:s,symbol:u,base:c,quote:d,baseId:o,quoteId:h,type:l,spot:f,active:!0,info:t,precision:p,limits:{amount:{min:Math.pow(10,-p.amount),max:void 0},price:{min:Math.pow(10,-p.price),max:void 0},cost:{min:this.safeNumber(a,h),max:void 0}}})}return n}parseTicker(e,t){const i=this.safeInteger(e,"timestamp");let s;if(void 0!==t)s=t.symbol;else{const t=this.safeString(e,"coin_symbol"),i=this.safeString(e,"currency_symbol");s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}const r=this.safeNumber(e,"last"),a=this.safeNumber(e,"change"),n=this.safeNumber2(e,"vol","vol24H");let o=this.safeString(e,"percent");return void 0!==o&&(o=o.replace("%",""),o=this.parseNumber(o)),this.safeTicker({symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:a,percentage:o,average:void 0,baseVolume:n,quoteVolume:this.safeNumber(e,"amount"),info:e},t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={cmd:"ticker",pair:i.id},r=await this.publicGetMdata(this.extend(s,t));return this.parseTicker(r.result,i)}async fetchTickers(e,t={}){const i=await this.publicGetMdata(this.extend({cmd:"marketAll"},t)),s=this.parseTickers(i.result,e),r=this.indexBy(s,"symbol");return this.filterByArray(r,"symbol",e)}parseTrade(e,t){const i=this.safeInteger2(e,"time","createdAt");let s,r,a=this.safeInteger2(e,"side","order_side");if(a=1===a?"buy":"sell",void 0===t){let i=this.safeString(e,"pair");if(void 0===i){const t=this.safeString(e,"coin_symbol"),s=this.safeString(e,"currency_symbol");void 0!==t&&void 0!==s&&(i=t+"_"+s)}i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(s=t.symbol);const n=this.safeString(e,"fee");let o=this.safeString(e,"fee_symbol");void 0!==o&&(o=o in this.currencies_by_id?this.currencies_by_id[o].code:this.safeCurrencyCode(o));const h=this.safeString(e,"price"),c=this.safeString(e,"amount");void 0!==n&&(r={cost:y.stringNeg(n),currency:o,rate:void 0});const d=this.safeString(e,"id");return this.safeTrade({info:e,id:d,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:s,type:"limit",takerOrMaker:void 0,side:a,price:h,amount:c,cost:void 0,fee:r},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={cmd:"deals",pair:r.id};void 0!==i&&(a.size=i);const n=await this.publicGetMdata(this.extend(a,s));return this.parseTrades(n.result,r,t,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={cmd:"depth",pair:this.market(e).id};void 0!==t&&(s.size=t);const r=await this.publicGetMdata(this.extend(s,i));return this.parseOrderBook(r.result,e,this.safeNumber(r.result,"update_time"),"bids","asks","price","volume")}parseOHLCV(e,t){return[this.safeInteger(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"vol")]}async fetchOHLCV(e,t="1m",i,s=1e3,r={}){await this.loadMarkets();const a=this.market(e),n={cmd:"kline",pair:a.id,period:this.timeframes[t],size:s},o=await this.publicGetMdata(this.extend(n,r)),h=this.safeValue(o,"result",[]);return this.parseOHLCVs(h,a,t,i,s)}async fetchCurrencies(e={}){return this.checkRequiredCredentials(!1)?await this.fetchCurrenciesPrivate(e):await this.fetchCurrenciesPublic(e)}async fetchCurrenciesPublic(e={}){const t=await this.publicGetCdata(this.extend({cmd:"currencies"},e)),i=this.safeValue(t,"result"),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"symbol"),a=this.safeString(t,"name"),n=this.safeCurrencyCode(r),o=this.safeInteger(t,"valid_decimals"),h=this.safeValue(t,"enable_deposit"),c=this.safeValue(t,"enable_withdraw"),d=h&&c;s[n]={id:r,code:n,info:t,name:a,active:d,fee:void 0,precision:o,limits:{amount:{min:Math.pow(10,-o),max:void 0},withdraw:{min:this.safeNumber(t,"withdraw_min"),max:void 0}}}}return s}async fetchCurrenciesPrivate(e={}){if(!this.checkRequiredCredentials(!1))throw new o(this.id+" fetchCurrencies is an authenticated endpoint, therefore it requires 'apiKey' and 'secret' credentials. If you don't need currency details, set exchange.has['fetchCurrencies'] = false before calling its methods.");const t=await this.privatePostTransfer(this.extend({cmd:"transfer/coinList",body:{}},e)),i=this.safeValue(t,"result"),s=this.safeValue(i,0,{}),r=this.safeValue(s,"result"),a={};for(let e=0;e<r.length;e++){const t=r[e],i=this.safeString(t,"symbol"),s=t.name,n=this.safeCurrencyCode(i),o=8,h=this.safeValue(t,"enable_deposit"),c=this.safeValue(t,"enable_withdraw"),d=h&&c;a[n]={id:i,code:n,info:t,name:s,active:d,fee:void 0,precision:o,limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},withdraw:{min:void 0,max:Math.pow(10,o)}}}}return a}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString(e,"type","assets");e=this.omit(e,"type");const i={cmd:"transfer/"+t,body:this.extend({select:1},e)},s=await this.privatePostTransfer(i),r=this.safeValue(s,"result"),a=this.safeValue(r,0,{}),n=this.safeValue(a,"result"),o={info:s},h=this.safeValue(n,"assets_list",[]);for(let e=0;e<h.length;e++){const t=h[e],i=this.safeString(t,"coin_symbol"),s=this.safeCurrencyCode(i),r=this.account();r.free=this.safeString(t,"balance"),r.used=this.safeString(t,"freeze"),o[s]=r}return this.parseBalance(o)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets(),void 0===i&&(i=100);const r={page:1,size:i};let a;void 0!==e&&(a=this.currency(e),r.symbol=a.id);const n=await this.privatePostTransfer({cmd:"transfer/transferInList",body:this.extend(r,s)}),o=this.safeValue(n,"result"),h=this.safeValue(o,0,{}),c=this.safeValue(h,"result",{}),d=this.safeValue(c,"items",[]);for(let e=0;e<d.length;e++)d[e].type="deposit";return this.parseTransactions(d,a,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets(),void 0===i&&(i=100);const r={page:1,size:i};let a;void 0!==e&&(a=this.currency(e),r.symbol=a.id);const n=await this.privatePostTransfer({cmd:"transfer/transferOutList",body:this.extend(r,s)}),o=this.safeValue(n,"result"),h=this.safeValue(o,0,{}),c=this.safeValue(h,"result",{}),d=this.safeValue(c,"items",[]);for(let e=0;e<d.length;e++)d[e].type="withdrawal";return this.parseTransactions(d,a,t,i)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"to_address"),r=this.safeString(e,"coin_symbol"),a=this.safeCurrencyCode(r,t),n=this.safeString(e,"createdAt");let o=this.safeString(e,"addr_remark");const h=this.safeString(e,"type"),c=this.parseTransactionStatusByType(this.safeString(e,"status"),h),d=this.safeNumber(e,"amount");let u=this.safeNumber(e,"fee");"deposit"===h&&(u=0,o=void 0);const l={cost:u,currency:a};return{info:e,id:i,txid:void 0,timestamp:n,datetime:this.iso8601(n),address:s,tag:o,type:h,amount:d,currency:a,status:c,updated:void 0,fee:l}}parseTransactionStatusByType(e,t){return this.safeString(this.safeValue({deposit:{1:"pending",2:"ok"},withdrawal:{0:"pending",3:"ok"}},t,{}),e,e)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o="limit"===t?2:1,h="buy"===i?1:2,c={cmd:"orderpending/trade",body:this.extend({pair:n.id,account_type:0,order_type:o,order_side:h,pay_bix:0,amount:s,price:r},a)},d=await this.privatePostOrderpending(c),u=this.safeValue(d,"result"),l=this.safeValue(u,0,{});return{info:d,id:this.safeValue(l,"result")}}async cancelOrder(e,t,i={}){const s={cmd:"orderpending/cancelTrade",body:this.extend({orders_id:e},i)},r=await this.privatePostOrderpending(s),a=this.safeValue(r,"result");return this.safeValue(a,0,{})}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={cmd:"orderpending/order",body:this.extend({id:e.toString(),account_type:0},i)},r=await this.privatePostOrderpending(s),a=this.safeValue(r,"result"),n=this.safeValue(a,0,{}),o=this.safeValue(n,"result");if(this.isEmpty(o))throw new u(this.id+" order "+e+" not found");return this.parseOrder(o)}parseOrder(e,t){let i;if(void 0===t){let i;const s=this.safeString(e,"coin_symbol"),r=this.safeString(e,"currency_symbol");void 0!==s&&void 0!==r&&(i=s+"_"+r),i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(i=t.symbol);const s="1"===this.safeString(e,"order_type")?"market":"limit",r=this.safeInteger(e,"createdAt"),a=this.safeString(e,"price"),n=this.safeString(e,"deal_price"),o=this.safeString(e,"deal_amount"),h=this.safeString(e,"amount"),c=this.safeString2(e,"deal_money","money"),d="1"===this.safeString(e,"order_side")?"buy":"sell",u=this.parseOrderStatus(this.safeString(e,"status")),l=this.safeString(e,"id"),f=this.safeNumber(e,"fee");let p;return void 0!==f&&(p={cost:f,currency:void 0}),this.safeOrder2({info:e,id:l,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:i,type:s,timeInForce:void 0,postOnly:void 0,side:d,price:a,stopPrice:void 0,amount:h,cost:c,average:n,filled:o,remaining:void 0,status:u,fee:p,trades:void 0},t)}parseOrderStatus(e){return this.safeString({1:"open",2:"open",3:"closed",4:"canceled",5:"canceled",6:"canceled"},e,e)}async fetchOpenOrders(e,t,i,s={}){let r,a;await this.loadMarkets(),void 0!==e&&(r=this.market(e),a=r.id);const n=i||200,o={cmd:"orderpending/orderPendingList",body:this.extend({pair:a,account_type:0,page:1,size:n},s)},h=await this.privatePostOrderpending(o),c=this.safeValue(h,"result"),d=this.safeValue(c,0,{}),u=this.safeValue(d,"result",{}),l=this.safeValue(u,"items",[]);return this.parseOrders(l,r,t,i)}async fetchClosedOrders(e,t,i=200,s={}){if(void 0===e)throw new n(this.id+" fetchClosedOrders() requires a `symbol` argument");await this.loadMarkets();const r=this.market(e),a={cmd:"orderpending/pendingHistoryList",body:this.extend({pair:r.id,account_type:0,page:1,size:i},s)},o=await this.privatePostOrderpending(a),h=this.safeValue(o,"result"),c=this.safeValue(h,0,{}),d=this.safeValue(c,"result",{}),u=this.safeValue(d,"items",[]);return this.parseOrders(u,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchMyTrades() requires a `symbol` argument");await this.loadMarkets();const r=this.market(e),a=i||200,o={cmd:"orderpending/orderHistoryList",body:this.extend({pair:r.id,account_type:0,page:1,size:a,coin_symbol:r.baseId,currency_symbol:r.quoteId},s)},h=await this.privatePostOrderpending(o),c=this.safeValue(h,"result"),d=this.safeValue(c,0,{}),u=this.safeValue(d,"result",{}),l=this.safeValue(u,"items",[]);return this.parseTrades(l,r,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={cmd:"transfer/transferIn",body:this.extend({coin_symbol:i.id},t)},r=await this.privatePostTransfer(s),a=this.safeValue(r,"result"),n=this.safeValue(a,0,{}),o=this.safeValue(n,"result");let h,c=o;if(this.isJsonEncodedObject(o)){const e=JSON.parse(o);c=this.safeString(e,"account"),h=this.safeString(e,"memo")}return{currency:e,address:c,tag:h,network:void 0,info:r}}async withdraw(e,t,i,s,a={}){[s,a]=this.handleWithdrawTagAndParams(s,a),this.checkAddress(i),await this.loadMarkets();const n=this.currency(e);if(void 0===this.password&&!("trade_pwd"in a))throw new r(this.id+" withdraw() requires this.password set on the exchange instance or a trade_pwd parameter");if(!("totp_code"in a))throw new r(this.id+" withdraw() requires a totp_code parameter for 2FA authentication");const o={trade_pwd:this.password,coin_symbol:n.id,amount:t,addr:i};void 0!==s&&(o.address_remark=s);const h=await this.privatePostTransfer({cmd:"transfer/transferOut",body:this.extend(o,a)}),c=this.safeValue(h,"result"),d=this.safeValue(c,0,{});return{info:h,id:this.safeValue(d,"result")}}async fetchFundingFees(e,t={}){await this.loadMarkets();const i={},s={};void 0===e&&(e=Object.keys(this.currencies));for(let r=0;r<e.length;r++){const a=e[r],n=this.currency(a),o={cmd:"transfer/coinConfig",body:this.extend({coin_symbol:n.id},t)},h=await this.privatePostTransfer(o),c=this.safeValue(h,"result",[]),d=this.safeValue(c,0,{}),u=this.safeValue(d,"result",[]),l=this.safeValue(u,0,{});s[a]=l,i[a]=this.safeNumber(l,"withdraw_fee")}return{info:s,withdraw:i,deposit:{}}}sign(e,t="public",i="GET",s={},r,a){let n=this.implodeHostname(this.urls.api)+"/"+this.version+"/"+e;const o=this.json([s]);if("public"===t)"GET"!==i?a={cmds:o}:Object.keys(s).length&&(n+="?"+this.urlencode(s));else if("v2private"===t){this.checkRequiredCredentials(),n=this.implodeHostname(this.urls.api)+"/v2/"+e;const t=this.json(s);a={body:t,apikey:this.apiKey,sign:this.hmac(this.encode(t),this.encode(this.secret),"md5")}}else this.checkRequiredCredentials(),a={cmds:o,apikey:this.apiKey,sign:this.hmac(this.encode(o),this.encode(this.secret),"md5")};return void 0!==a&&(a=this.json(a,{convertArraysToObjects:!0})),{url:n,method:i,body:a,headers:{"Content-Type":"application/json"}}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o){if("error"in o){if("code"in o.error){const e=this.safeString(o.error,"code"),t=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions,e,t),new r(t)}throw new r(this.id+" "+n)}if(!("result"in o))throw new r(this.id+" "+n)}}}},64400:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:n,OrderNotFound:o,InsufficientFunds:h,PermissionDenied:c,BadRequest:d,BadSymbol:u,RateLimitExceeded:l,InvalidOrder:f}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bigone",name:"BigONE",countries:["CN"],version:"v3",rateLimit:1200,has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"min1","5m":"min5","15m":"min15","30m":"min30","1h":"hour1","3h":"hour3","4h":"hour4","6h":"hour6","12h":"hour12","1d":"day1","1w":"week1","1M":"month1"},hostname:"big.one",urls:{logo:"https://user-images.githubusercontent.com/1294454/69354403-1d532180-0c91-11ea-88ed-44c06cefdf87.jpg",api:{public:"https://{hostname}/api/v3",private:"https://{hostname}/api/v3/viewer"},www:"https://big.one",doc:"https://open.big.one/docs/api.html",fees:"https://bigone.zendesk.com/hc/en-us/articles/115001933374-BigONE-Fee-Policy",referral:"https://b1.run/users/new?code=D3LLBVFT"},api:{public:{get:["ping","asset_pairs","asset_pairs/{asset_pair_name}/depth","asset_pairs/{asset_pair_name}/trades","asset_pairs/{asset_pair_name}/ticker","asset_pairs/{asset_pair_name}/candles","asset_pairs/tickers"]},private:{get:["accounts","fund/accounts","assets/{asset_symbol}/address","orders","orders/{id}","orders/multi","trades","withdrawals","deposits"],post:["orders","orders/{id}/cancel","orders/cancel","withdrawals","transfer"]}},fees:{trading:{maker:this.parseNumber("0.001"),taker:this.parseNumber("0.001")},funding:{withdraw:{}}},exceptions:{exact:{10001:d,10005:r,"Amount's scale must greater than AssetPair's base scale":f,"Price mulit with amount should larger than AssetPair's min_quote_value":f,10007:d,10011:r,10013:o,10014:h,10403:c,10429:l,40004:n,40103:n,40104:n,40301:c,40302:r,40601:r,40602:r,40603:h,40605:f,40120:f,40121:f,60100:u},broad:{}},commonCurrencies:{CRE:"Cybereits",FXT:"FXTTOKEN",MBN:"Mobilian Coin",ONE:"BigONE Token"}})}async fetchMarkets(e={}){const t=await this.publicGetAssetPairs(e),i=this.safeValue(t,"data",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"name"),a=this.safeString(t,"id"),n=this.safeValue(t,"base_asset",{}),o=this.safeValue(t,"quote_asset",{}),h=this.safeString(n,"symbol"),c=this.safeString(o,"symbol"),d=this.safeCurrencyCode(h),u=this.safeCurrencyCode(c),l=d+"/"+u,f=this.safeString(t,"base_scale"),p=this.safeString(t,"quote_scale"),m=this.parsePrecision(f),g=this.parsePrecision(p),y={amount:parseInt(f),price:parseInt(p)},b=this.safeNumber(t,"min_quote_value"),v={id:r,uuid:a,symbol:l,base:d,quote:u,baseId:h,quoteId:c,type:"spot",spot:!0,active:!0,precision:y,limits:{amount:{min:this.parseNumber(m),max:void 0},price:{min:this.parseNumber(g),max:void 0},cost:{min:b,max:void 0}},info:t};s.push(v)}return s}async loadMarkets(e=!1,t={}){const i=await super.loadMarkets(e,t);let s=this.safeValue(this.options,"marketsByUuid");if(void 0===s||e){s={};for(let e=0;e<this.symbols.length;e++){const t=this.symbols[e],i=this.markets[t];s[this.safeString(i,"uuid")]=i}this.options.marketsByUuid=s}return i}parseTicker(e,t){const i=this.safeString(e,"asset_pair_name"),s=this.safeSymbol(i,t,"-"),r=void 0,a=this.safeNumber(e,"close"),n=this.safeValue(e,"bid",{}),o=this.safeValue(e,"ask",{});return this.safeTicker({symbol:s,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(n,"price"),bidVolume:this.safeNumber(n,"quantity"),ask:this.safeNumber(o,"price"),askVolume:this.safeNumber(o,"quantity"),vwap:void 0,open:this.safeNumber(e,"open"),close:a,last:a,previousClose:void 0,change:this.safeNumber(e,"daily_change"),percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"volume"),quoteVolume:void 0,info:e},t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={asset_pair_name:i.id},r=await this.publicGetAssetPairsAssetPairNameTicker(this.extend(s,t)),a=this.safeValue(r,"data",{});return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.pair_names=t.join(",")}const s=await this.publicGetAssetPairsTickers(this.extend(i,t)),r=this.safeValue(s,"data",[]),a={};for(let e=0;e<r.length;e++){const t=this.parseTicker(r[e]);a[t.symbol]=t}return this.filterByArray(a,"symbol",e)}async fetchTime(e={}){const t=await this.publicGetPing(e),i=this.safeValue(t,"data",{}),s=this.safeInteger(i,"timestamp");return parseInt(s/1e6)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={asset_pair_name:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.publicGetAssetPairsAssetPairNameDepth(this.extend(s,i)),a=this.safeValue(r,"data",{});return this.parseOrderBook(a,e,void 0,"bids","asks","price","quantity")}parseTrade(e,t){const i=this.parse8601(this.safeString2(e,"created_at","inserted_at")),s=this.safeString(e,"price"),r=this.safeString(e,"amount"),a=this.safeString(e,"asset_pair_name"),n=this.safeSymbol(a,t,"-");let o=this.safeString(e,"side");const h=this.safeString(e,"taker_side");let c;void 0!==h&&void 0!==o&&"SELF_TRADING"!==o&&(c=h===o?"taker":"maker"),void 0===o?o="ASK"===h?"sell":"buy":"BID"===o?o="buy":"ASK"===o&&(o="sell");const d=this.safeString(e,"maker_order_id"),u=this.safeString(e,"taker_order_id");let l;void 0!==d?l=void 0!==u?[d,u]:d:void 0!==u&&(l=u);const f={id:this.safeString(e,"id"),timestamp:i,datetime:this.iso8601(i),symbol:n,order:l,type:"limit",side:o,takerOrMaker:c,price:s,amount:r,cost:void 0,info:e};let p,m;void 0!==t&&void 0!==c?"buy"===o?"maker"===c?(p=t.base,m=t.quote):(p=t.quote,m=t.base):"maker"===c?(p=t.quote,m=t.base):(p=t.base,m=t.quote):"SELF_TRADING"===o&&("BID"===h?(p=t.quote,m=t.base):"ASK"===h&&(p=t.base,m=t.quote));const g=this.safeString(e,"maker_fee"),y=this.safeString(e,"taker_fee");return void 0!==g?void 0!==y?f.fees=[{cost:g,currency:p},{cost:y,currency:m}]:f.fee={cost:g,currency:p}:f.fee=void 0!==y?{cost:y,currency:m}:void 0,this.safeTrade(f,t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={asset_pair_name:r.id},n=await this.publicGetAssetPairsAssetPairNameTrades(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseTrades(o,r,t,i)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"time")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e);void 0===s&&(s=100);const n={asset_pair_name:a.id,period:this.timeframes[t],limit:s};if(void 0!==i){const e=this.parseTimeframe(t),r=this.sum(i,s*e*1e3);n.time=this.iso8601(r)}const o=await this.publicGetAssetPairsAssetPairNameCandles(this.extend(n,r)),h=this.safeValue(o,"data",[]);return this.parseOHLCVs(h,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString(e,"type","");e=this.omit(e,"type");const i="privateGet"+this.capitalize(t)+"Accounts",s=await this[i](e),r={info:s,timestamp:void 0,datetime:void 0},a=this.safeValue(s,"data",[]);for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t,"asset_symbol"),s=this.safeCurrencyCode(i),n=this.account();n.total=this.safeString(t,"balance"),n.used=this.safeString(t,"locked_balance"),r[s]=n}return this.parseBalance(r)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"asset_pair_name"),r=this.safeSymbol(s,t,"-"),a=this.parse8601(this.safeString(e,"created_at")),n=this.safeString(e,"price"),o=this.safeString(e,"amount"),h=this.safeString(e,"avg_deal_price"),c=this.safeString(e,"filled_amount"),d=this.parseOrderStatus(this.safeString(e,"state"));let u=this.safeString(e,"side");u="BID"===u?"buy":"sell";const l=this.parse8601(this.safeString(e,"updated_at"));return this.safeOrder2({info:e,id:i,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:l,symbol:r,type:void 0,timeInForce:void 0,postOnly:void 0,side:u,price:n,stopPrice:void 0,amount:o,cost:void 0,average:h,filled:c,remaining:void 0,status:d,fee:void 0,trades:void 0},t)}async createOrder(e,t,i,s,r,n={}){await this.loadMarkets();const o=this.market(e);i="buy"===i?"BID":"ASK";const h=t.toUpperCase(),c={asset_pair_name:o.id,side:i,amount:this.amountToPrecision(e,s),type:h};if("LIMIT"===h)c.price=this.priceToPrecision(e,r);else{const t="STOP_LIMIT"===h,i="STOP_MARKET"===h;if(t||i){const t=this.safeNumber2(n,"stop_price","stopPrice");if(void 0===t)throw new a(this.id+" createOrder() requires a stop_price parameter");c.stop_price=this.priceToPrecision(e,t),n=this.omit(n,["stop_price","stopPrice"])}t&&(c.price=this.priceToPrecision(e,r))}const d=await this.privatePostOrders(this.extend(c,n)),u=this.safeValue(d,"data");return this.parseOrder(u,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privatePostOrdersIdCancel(this.extend(s,i)),a=this.safeValue(r,"data");return this.parseOrder(a)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={asset_pair_name:this.market(e).id};return await this.privatePostOrdersCancel(this.extend(i,t))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrdersId(this.extend(s,i)),a=this.safeValue(r,"data",{});return this.parseOrder(a)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={asset_pair_name:r.id};void 0!==i&&(n.limit=i);const o=await this.privateGetOrders(this.extend(n,s)),h=this.safeValue(o,"data",[]);return this.parseOrders(h,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new a(this.id+" fetchMyTrades() requires a symbol argument");const r=this.market(e),n={asset_pair_name:r.id};void 0!==i&&(n.limit=i);const o=await this.privateGetTrades(this.extend(n,s)),h=this.safeValue(o,"data",[]);return this.parseTrades(h,r,t,i)}parseOrderStatus(e){return this.safeString({PENDING:"open",FILLED:"closed",CANCELLED:"canceled"},e)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"PENDING"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"FILLED"},s))}nonce(){return 1e3*this.microseconds()}sign(e,t="public",i="GET",s={},r,a){const n=this.omit(s,this.extractParams(e));let o=this.implodeHostname(this.urls.api[t])+"/"+this.implodeParams(e,s);if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t={type:"OpenAPIV2",sub:this.apiKey,nonce:e};r={Authorization:"Bearer "+this.jwt(t,this.encode(this.secret))},"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):"POST"===i&&(r["Content-Type"]="application/json",a=this.json(n))}return{url:o,method:i,body:a,headers:r}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={asset_symbol:this.currency(e).id},s=await this.privateGetAssetsAssetSymbolAddress(this.extend(i,t)),a=this.safeValue(s,"data",[]);if(a.length<1)throw new r(this.id+"fetchDepositAddress() returned empty address response");const n=a[0],o=this.safeString(n,"value"),h=this.safeString(n,"memo");return this.checkAddress(o),{currency:e,address:o,tag:h,network:void 0,info:s}}parseTransactionStatus(e){return this.safeString({WITHHOLD:"ok",UNCONFIRMED:"pending",CONFIRMED:"ok",COMPLETED:"ok",PENDING:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"asset_symbol"),s=this.safeCurrencyCode(i),r=this.safeInteger(e,"id"),a=this.safeNumber(e,"amount"),n=this.parseTransactionStatus(this.safeString(e,"state")),o=this.parse8601(this.safeString(e,"inserted_at")),h=this.parse8601(this.safeString2(e,"updated_at","completed_at")),c=this.safeString(e,"txid"),d=this.safeString(e,"target_address"),u=this.safeString(e,"memo"),l="customer_id"in e?"deposit":"withdrawal";return{info:e,id:r,txid:c,timestamp:o,datetime:this.iso8601(o),addressFrom:void 0,address:void 0,addressTo:d,tagFrom:void 0,tag:u,tagTo:void 0,type:l,amount:a,currency:s,status:n,updated:h,fee:void 0}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.asset_symbol=a.id),void 0!==i&&(r.limit=i);const n=await this.privateGetDeposits(this.extend(r,s)),o=this.safeValue(n,"data",[]);return this.parseTransactions(o,e,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.asset_symbol=a.id),void 0!==i&&(r.limit=i);const n=await this.privateGetWithdrawals(this.extend(r,s)),o=this.safeValue(n,"data",[]);return this.parseTransactions(o,e,t,i)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),await this.loadMarkets();const a=this.currency(e),n={symbol:a.id,target_address:i,amount:this.currencyToPrecision(e,t)};void 0!==s&&(n.memo=s);const o=await this.privatePostWithdrawals(this.extend(n,r)),h=this.safeValue(o,"data",{});return this.parseTransaction(h,a)}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;const d=this.safeString(o,"code"),u=this.safeString(o,"message");if("0"!==d){const e=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,u,e),this.throwExactlyMatchedException(this.exceptions.exact,d,e),this.throwBroadlyMatchedException(this.exceptions.broad,u,e),new r(e)}}}},96056:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:n,InsufficientFunds:o,OrderNotFound:h,InvalidOrder:c,DDoSProtection:d,InvalidNonce:u,AuthenticationError:l,RateLimitExceeded:f,PermissionDenied:p,NotSupported:m,BadRequest:g,BadSymbol:y,AccountSuspended:b,OrderImmediatelyFillable:v,OnMaintenance:w}=i(73449),{TRUNCATE:k}=i(62115),_=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"binance",name:"Binance",countries:["JP","MT"],rateLimit:50,certified:!0,pro:!0,has:{margin:!0,swap:!0,future:!0,addMargin:!0,cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createOrder:!0,createReduceOnlyOrder:!0,fetchBalance:!0,fetchBidsAsks:!0,fetchBorrowRate:!0,fetchBorrowRateHistory:!0,fetchBorrowRates:!1,fetchClosedOrders:"emulated",fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchFundingHistory:!0,fetchFundingRate:!0,fetchFundingRateHistory:!0,fetchFundingRates:!0,fetchIndexOHLCV:!0,fetchIsolatedPositions:!0,fetchMarkets:!0,fetchMarkOHLCV:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchPositions:!0,fetchPremiumIndexOHLCV:!1,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!1,fetchTransfers:!0,fetchWithdrawals:!0,reduceMargin:!0,setLeverage:!0,setMarginMode:!0,setPositionMode:!0,transfer:!0,withdraw:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/29604020-d5483cdc-87ee-11e7-94c7-d1a8d9169293.jpg",test:{dapiPublic:"https://testnet.binancefuture.com/dapi/v1",dapiPrivate:"https://testnet.binancefuture.com/dapi/v1",fapiPublic:"https://testnet.binancefuture.com/fapi/v1",fapiPrivate:"https://testnet.binancefuture.com/fapi/v1",fapiPrivateV2:"https://testnet.binancefuture.com/fapi/v2",public:"https://testnet.binance.vision/api/v3",private:"https://testnet.binance.vision/api/v3",v1:"https://testnet.binance.vision/api/v1"},api:{wapi:"https://api.binance.com/wapi/v3",sapi:"https://api.binance.com/sapi/v1",dapiPublic:"https://dapi.binance.com/dapi/v1",dapiPrivate:"https://dapi.binance.com/dapi/v1",dapiPrivateV2:"https://dapi.binance.com/dapi/v2",dapiData:"https://dapi.binance.com/futures/data",fapiPublic:"https://fapi.binance.com/fapi/v1",fapiPrivate:"https://fapi.binance.com/fapi/v1",fapiData:"https://fapi.binance.com/futures/data",fapiPrivateV2:"https://fapi.binance.com/fapi/v2",public:"https://api.binance.com/api/v3",private:"https://api.binance.com/api/v3",v1:"https://api.binance.com/api/v1"},www:"https://www.binance.com",doc:["https://binance-docs.github.io/apidocs/spot/en"],api_management:"https://www.binance.com/en/usercenter/settings/api-management",fees:"https://www.binance.com/en/fee/schedule"},depth:1,api:{sapi:{get:{accountSnapshot:1,"system/status":1,"margin/asset":1,"margin/pair":1,"margin/allAssets":1,"margin/allPairs":1,"margin/priceIndex":1,"asset/assetDividend":1,"asset/dribblet":1,"asset/transfer":1,"asset/assetDetail":1,"asset/tradeFee":1,"asset/get-funding-asset":1,"margin/loan":1,"margin/repay":1,"margin/account":1,"margin/transfer":1,"margin/interestHistory":1,"margin/forceLiquidationRec":1,"margin/order":1,"margin/openOrders":1,"margin/allOrders":1,"margin/myTrades":1,"margin/maxBorrowable":5,"margin/maxTransferable":5,"margin/isolated/transfer":1,"margin/isolated/account":1,"margin/isolated/pair":1,"margin/isolated/allPairs":1,"margin/isolated/accountLimit":1,"margin/interestRateHistory":1,"margin/orderList":2,"margin/allOrderList":10,"margin/openOrderList":3,"loan/income":1,"fiat/orders":1,"fiat/payments":1,"futures/transfer":5,"futures/loan/borrow/history":1,"futures/loan/repay/history":1,"futures/loan/wallet":1,"futures/loan/configs":1,"futures/loan/calcAdjustLevel":1,"futures/loan/calcMaxAdjustAmount":1,"futures/loan/adjustCollateral/history":1,"futures/loan/liquidationHistory":1,"capital/config/getall":1,"capital/deposit/address":1,"capital/deposit/hisrec":1,"capital/deposit/subAddress":1,"capital/deposit/subHisrec":1,"capital/withdraw/history":1,"convert/tradeFlow":1,"account/status":1,"account/apiTradingStatus":1,"account/apiRestrictions/ipRestriction":1,bnbBurn:1,"sub-account/assets":1,"sub-account/futures/account":1,"sub-account/futures/accountSummary":1,"sub-account/futures/positionRisk":1,"sub-account/futures/internalTransfer":1,"sub-account/list":1,"sub-account/margin/account":1,"sub-account/margin/accountSummary":1,"sub-account/spotSummary":5,"sub-account/status":1,"sub-account/sub/transfer/history":1,"sub-account/transfer/subUserHistory":1,"sub-account/universalTransfer":1,"lending/daily/product/list":1,"lending/daily/userLeftQuota":1,"lending/daily/userRedemptionQuota":1,"lending/daily/token/position":1,"lending/union/account":1,"lending/union/purchaseRecord":1,"lending/union/redemptionRecord":1,"lending/union/interestHistory":1,"lending/project/list":1,"lending/project/position/list":1,"mining/pub/algoList":1,"mining/pub/coinList":1,"mining/worker/detail":5,"mining/worker/list":5,"mining/payment/list":5,"mining/statistics/user/status":5,"mining/statistics/user/list":5,"bswap/pools":1,"bswap/liquidity":{cost:1,noPoolId:10},"bswap/liquidityOps":2,"bswap/quote":2,"bswap/swap":1,"bswap/poolConfigure":1,"bswap/addLiquidityPreview":1,"bswap/removeLiquidityPreview":1,"blvt/tokenInfo":1,"blvt/subscribe/record":1,"blvt/redeem/record":1,"blvt/userLimit":1,"apiReferral/ifNewUser":1,"apiReferral/customization":1,"apiReferral/userCustomization":1,"apiReferral/rebate/recentRecord":1,"apiReferral/rebate/historicalRecord":1,"apiReferral/kickback/recentRecord":1,"apiReferral/kickback/historicalRecord":1,"broker/subAccountApi":1,"broker/subAccount":1,"broker/subAccountApi/commission/futures":1,"broker/subAccountApi/commission/coinFutures":1,"broker/info":1,"broker/transfer":1,"broker/transfer/futures":1,"broker/rebate/recentRecord":1,"broker/rebate/historicalRecord":1,"broker/subAccount/bnbBurn/status":1,"broker/subAccount/depositHist":1,"broker/subAccount/spotSummary":1,"broker/subAccount/marginSummary":1,"broker/subAccount/futuresSummary":1,"broker/rebate/futures/recentRecord":1,"broker/subAccountApi/ipRestriction":1,"broker/universalTransfer":1,"account/apiRestrictions":1,"managed-subaccount/asset":1,"c2c/orderMatch/listUserOrderHistory":1},post:{"asset/dust":1,"asset/transfer":1,"asset/get-funding-asset":1,"account/disableFastWithdrawSwitch":1,"account/enableFastWithdrawSwitch":1,"account/apiRestrictions/ipRestriction":1,"account/apiRestrictions/ipRestriction/ipList":1,"capital/withdraw/apply":1,"margin/transfer":1,"margin/loan":1,"margin/repay":1,"margin/order":4,"margin/order/oco":1,"margin/isolated/create":1,"margin/isolated/transfer":1,"margin/isolated/account":1,bnbBurn:1,"sub-account/margin/transfer":1,"sub-account/margin/enable":1,"sub-account/futures/enable":1,"sub-account/futures/transfer":1,"sub-account/futures/internalTransfer":1,"sub-account/transfer/subToSub":1,"sub-account/transfer/subToMaster":1,"sub-account/universalTransfer":1,"managed-subaccount/deposit":1,"managed-subaccount/withdraw":1,userDataStream:1,"userDataStream/isolated":1,"futures/transfer":1,"futures/loan/borrow":20,"futures/loan/repay":20,"futures/loan/adjustCollateral":20,"lending/customizedFixed/purchase":1,"lending/daily/purchase":1,"lending/daily/redeem":1,"bswap/liquidityAdd":2,"bswap/liquidityRemove":2,"bswap/swap":2,"blvt/subscribe":1,"blvt/redeem":1,"apiReferral/customization":1,"apiReferral/userCustomization":1,"apiReferral/rebate/historicalRecord":1,"apiReferral/kickback/historicalRecord":1,"broker/subAccount":1,"broker/subAccount/margin":1,"broker/subAccount/futures":1,"broker/subAccountApi":1,"broker/subAccountApi/permission":1,"broker/subAccountApi/commission":1,"broker/subAccountApi/commission/futures":1,"broker/subAccountApi/commission/coinFutures":1,"broker/transfer":1,"broker/transfer/futures":1,"broker/rebate/historicalRecord":1,"broker/subAccount/bnbBurn/spot":1,"broker/subAccount/bnbBurn/marginInterest":1,"broker/subAccount/blvt":1,"broker/subAccountApi/ipRestriction":1,"broker/subAccountApi/ipRestriction/ipList":1,"broker/universalTransfer":1,"broker/subAccountApi/permission/universalTransfer":1,"broker/subAccountApi/permission/vanillaOptions":1},put:{userDataStream:1,"userDataStream/isolated":1},delete:{"account/apiRestrictions/ipRestriction/ipList":1,"margin/openOrders":1,"margin/order":1,"margin/orderList":1,"margin/isolated/account":1,userDataStream:1,"userDataStream/isolated":1,"broker/subAccountApi":1,"broker/subAccountApi/ipRestriction/ipList":1}},wapi:{post:{withdraw:1,"sub-account/transfer":1},get:{depositHistory:1,withdrawHistory:1,depositAddress:1,accountStatus:1,systemStatus:1,apiTradingStatus:1,userAssetDribbletLog:1,tradeFee:1,assetDetail:1,"sub-account/list":1,"sub-account/transfer/history":1,"sub-account/assets":1}},dapiPublic:{get:{ping:1,time:1,exchangeInfo:1,depth:{cost:2,byLimit:[[50,2],[100,5],[500,10],[1e3,20]]},trades:1,historicalTrades:20,aggTrades:20,premiumIndex:10,fundingRate:1,klines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},continuousKlines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},indexPriceKlines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},markPriceKlines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},"ticker/24hr":{cost:1,noSymbol:40},"ticker/price":{cost:1,noSymbol:2},"ticker/bookTicker":{cost:1,noSymbol:2},openInterest:1}},dapiData:{get:{openInterestHist:1,topLongShortAccountRatio:1,topLongShortPositionRatio:1,globalLongShortAccountRatio:1,takerBuySellVol:1,basis:1}},dapiPrivate:{get:{"positionSide/dual":30,order:1,openOrder:1,openOrders:{cost:1,noSymbol:5},allOrders:{cost:20,noSymbol:40},balance:1,account:5,"positionMargin/history":1,positionRisk:1,userTrades:{cost:20,noSymbol:40},income:20,leverageBracket:1,forceOrders:{cost:20,noSymbol:50},adlQuantile:5},post:{"positionSide/dual":1,order:4,batchOrders:5,countdownCancelAll:10,leverage:1,marginType:1,positionMargin:1,listenKey:1},put:{listenKey:1},delete:{order:1,allOpenOrders:1,batchOrders:5,listenKey:1}},dapiPrivateV2:{get:{leverageBracket:1}},fapiPublic:{get:{ping:1,time:1,exchangeInfo:1,depth:{cost:2,byLimit:[[50,2],[100,5],[500,10],[1e3,20]]},trades:1,historicalTrades:20,aggTrades:20,klines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},continuousKlines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},markPriceKlines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},indexPriceKlines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},fundingRate:1,premiumIndex:1,"ticker/24hr":{cost:1,noSymbol:40},"ticker/price":{cost:1,noSymbol:2},"ticker/bookTicker":{cost:1,noSymbol:2},openInterest:1,indexInfo:1,apiTradingStatus:{cost:1,noSymbol:10},lvtKlines:1}},fapiData:{get:{openInterestHist:1,topLongShortAccountRatio:1,topLongShortPositionRatio:1,globalLongShortAccountRatio:1,takerlongshortRatio:1}},fapiPrivate:{get:{forceOrders:{cost:20,noSymbol:50},allOrders:5,openOrder:1,openOrders:1,order:1,account:5,balance:5,leverageBracket:1,"positionMargin/history":1,positionRisk:5,"positionSide/dual":30,userTrades:5,income:30,commissionRate:20,apiTradingStatus:1,multiAssetsMargin:30,"apiReferral/ifNewUser":1,"apiReferral/customization":1,"apiReferral/userCustomization":1,"apiReferral/traderNum":1,"apiReferral/overview":1,"apiReferral/tradeVol":1,"apiReferral/rebateVol":1,"apiReferral/traderSummary":1,adlQuantile:5},post:{batchOrders:5,"positionSide/dual":1,positionMargin:1,marginType:1,order:4,leverage:1,listenKey:1,countdownCancelAll:10,multiAssetsMargin:1,"apiReferral/customization":1,"apiReferral/userCustomization":1},put:{listenKey:1},delete:{batchOrders:1,order:1,allOpenOrders:1,listenKey:1}},fapiPrivateV2:{get:{account:1,balance:1,positionRisk:1}},public:{get:{ping:1,time:1,depth:{cost:1,byLimit:[[100,1],[500,5],[1e3,10],[5e3,50]]},trades:1,aggTrades:1,historicalTrades:5,klines:1,"ticker/24hr":{cost:1,noSymbol:40},"ticker/price":{cost:1,noSymbol:2},"ticker/bookTicker":{cost:1,noSymbol:2},exchangeInfo:10},put:{userDataStream:1},post:{userDataStream:1},delete:{userDataStream:1}},private:{get:{allOrderList:10,openOrderList:3,orderList:2,order:2,openOrders:{cost:3,noSymbol:40},allOrders:10,account:10,myTrades:10,"rateLimit/order":20},post:{"order/oco":1,order:4,"order/test":1},delete:{openOrders:1,orderList:1,order:1}}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,taker:this.parseNumber("0.001"),maker:this.parseNumber("0.001")},future:{trading:{feeSide:"quote",tierBased:!0,percentage:!0,taker:this.parseNumber("0.000400"),maker:this.parseNumber("0.000200"),tiers:{taker:[[this.parseNumber("0"),this.parseNumber("0.000400")],[this.parseNumber("250"),this.parseNumber("0.000400")],[this.parseNumber("2500"),this.parseNumber("0.000350")],[this.parseNumber("7500"),this.parseNumber("0.000320")],[this.parseNumber("22500"),this.parseNumber("0.000300")],[this.parseNumber("50000"),this.parseNumber("0.000270")],[this.parseNumber("100000"),this.parseNumber("0.000250")],[this.parseNumber("200000"),this.parseNumber("0.000220")],[this.parseNumber("400000"),this.parseNumber("0.000200")],[this.parseNumber("750000"),this.parseNumber("0.000170")]],maker:[[this.parseNumber("0"),this.parseNumber("0.000200")],[this.parseNumber("250"),this.parseNumber("0.000160")],[this.parseNumber("2500"),this.parseNumber("0.000140")],[this.parseNumber("7500"),this.parseNumber("0.000120")],[this.parseNumber("22500"),this.parseNumber("0.000100")],[this.parseNumber("50000"),this.parseNumber("0.000080")],[this.parseNumber("100000"),this.parseNumber("0.000060")],[this.parseNumber("200000"),this.parseNumber("0.000040")],[this.parseNumber("400000"),this.parseNumber("0.000020")],[this.parseNumber("750000"),this.parseNumber("0")]]}}},delivery:{trading:{feeSide:"base",tierBased:!0,percentage:!0,taker:this.parseNumber("0.000500"),maker:this.parseNumber("0.000100"),tiers:{taker:[[this.parseNumber("0"),this.parseNumber("0.000500")],[this.parseNumber("250"),this.parseNumber("0.000450")],[this.parseNumber("2500"),this.parseNumber("0.000400")],[this.parseNumber("7500"),this.parseNumber("0.000300")],[this.parseNumber("22500"),this.parseNumber("0.000250")],[this.parseNumber("50000"),this.parseNumber("0.000240")],[this.parseNumber("100000"),this.parseNumber("0.000240")],[this.parseNumber("200000"),this.parseNumber("0.000240")],[this.parseNumber("400000"),this.parseNumber("0.000240")],[this.parseNumber("750000"),this.parseNumber("0.000240")]],maker:[[this.parseNumber("0"),this.parseNumber("0.000100")],[this.parseNumber("250"),this.parseNumber("0.000080")],[this.parseNumber("2500"),this.parseNumber("0.000050")],[this.parseNumber("7500"),this.parseNumber("0.0000030")],[this.parseNumber("22500"),this.parseNumber("0")],[this.parseNumber("50000"),this.parseNumber("-0.000050")],[this.parseNumber("100000"),this.parseNumber("-0.000060")],[this.parseNumber("200000"),this.parseNumber("-0.000070")],[this.parseNumber("400000"),this.parseNumber("-0.000080")],[this.parseNumber("750000"),this.parseNumber("-0.000090")]]}}}},commonCurrencies:{BCC:"BCC",YOYO:"YOYOW"},options:{fetchCurrencies:!0,defaultTimeInForce:"GTC",defaultType:"spot",hasAlreadyAuthenticatedSuccessfully:!1,warnOnFetchOpenOrdersWithoutSymbol:!0,fetchPositions:"positionRisk",recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1,newOrderRespType:{market:"FULL",limit:"FULL"},quoteOrderQty:!0,broker:{spot:"x-R4BD3S82",margin:"x-R4BD3S82",future:"x-xcKtGhcu",delivery:"x-xcKtGhcu"},accountsByType:{main:"MAIN",spot:"MAIN",funding:"FUNDING",margin:"MARGIN",future:"UMFUTURE",delivery:"CMFUTURE",mining:"MINING"},typesByAccount:{MAIN:"spot",FUNDING:"funding",MARGIN:"margin",UMFUTURE:"future",CMFUTURE:"delivery",MINING:"mining"},networks:{ERC20:"ETH",TRC20:"TRX",BEP2:"BNB",BEP20:"BSC",OMNI:"OMNI",EOS:"EOS",SPL:"SOL"},reverseNetworks:{"tronscan.org":"TRC20","etherscan.io":"ERC20","bscscan.com":"BSC","explorer.binance.org":"BEP2","bithomp.com":"XRP","bloks.io":"EOS","stellar.expert":"XLM","blockchair.com/bitcoin":"BTC","blockchair.com/bitcoin-cash":"BCH","blockchair.com/ecash":"XEC","explorer.litecoin.net":"LTC","explorer.avax.network":"AVAX","solscan.io":"SOL","polkadot.subscan.io":"DOT","dashboard.internetcomputer.org":"ICP","explorer.chiliz.com":"CHZ","cardanoscan.io":"ADA","mainnet.theoan.com":"AION","algoexplorer.io":"ALGO","explorer.ambrosus.com":"AMB","viewblock.io/zilliqa":"ZIL","viewblock.io/arweave":"AR","explorer.ark.io":"ARK","atomscan.com":"ATOM","www.mintscan.io":"CTK","explorer.bitcoindiamond.org":"BCD","btgexplorer.com":"BTG","bts.ai":"BTS","explorer.celo.org":"CELO","explorer.nervos.org":"CKB","cerebro.cortexlabs.ai":"CTXC","chainz.cryptoid.info":"VIA","explorer.dcrdata.org":"DCR","digiexplorer.info":"DGB","dock.subscan.io":"DOCK","dogechain.info":"DOGE","explorer.elrond.com":"EGLD","blockscout.com":"ETC","explore-fetchhub.fetch.ai":"FET","filfox.info":"FIL","fio.bloks.io":"FIO","explorer.firo.org":"FIRO","neoscan.io":"NEO","ftmscan.com":"FTM","explorer.gochain.io":"GO","block.gxb.io":"GXS","hash-hash.info":"HBAR","www.hiveblockexplorer.com":"HIVE","explorer.helium.com":"HNT","tracker.icon.foundation":"ICX","www.iostabc.com":"IOST","explorer.iota.org":"IOTA","iotexscan.io":"IOTX","irishub.iobscan.io":"IRIS","kava.mintscan.io":"KAVA","scope.klaytn.com":"KLAY","kmdexplorer.io":"KMD","kusama.subscan.io":"KSM","explorer.lto.network":"LTO","polygonscan.com":"POLYGON","explorer.ont.io":"ONT","minaexplorer.com":"MINA","nanolooker.com":"NANO","explorer.nebulas.io":"NAS","explorer.nbs.plus":"NBS","explorer.nebl.io":"NEBL","nulscan.io":"NULS","nxscan.com":"NXS","explorer.harmony.one":"ONE","explorer.poa.network":"POA","qtum.info":"QTUM","explorer.rsk.co":"RSK","www.oasisscan.com":"ROSE","ravencoin.network":"RVN","sc.tokenview.com":"SC","secretnodes.com":"SCRT","explorer.skycoin.com":"SKY","steemscan.com":"STEEM","explorer.stacks.co":"STX","www.thetascan.io":"THETA","scan.tomochain.com":"TOMO","explore.vechain.org":"VET","explorer.vite.net":"VITE","www.wanscan.org":"WAN","wavesexplorer.com":"WAVES","wax.eosx.io":"WAXP","waltonchain.pro":"WTC","chain.nem.ninja":"XEM","verge-blockchain.info":"XVG","explorer.yoyow.org":"YOYOW","explorer.zcha.in":"ZEC","explorer.zensystem.io":"ZEN"},impliedNetworks:{ETH:{ERC20:"ETH"},TRX:{TRC20:"TRX"}},legalMoney:{MXN:!0,UGX:!0,SEK:!0,CHF:!0,VND:!0,AED:!0,DKK:!0,KZT:!0,HUF:!0,PEN:!0,PHP:!0,USD:!0,TRY:!0,EUR:!0,NGN:!0,PLN:!0,BRL:!0,ZAR:!0,KES:!0,ARS:!0,RUB:!0,AUD:!0,NOK:!0,CZK:!0,GBP:!0,UAH:!0,GHS:!0,HKD:!0,CAD:!0,INR:!0,JPY:!0,NZD:!0}},exceptions:{exact:{"System is under maintenance.":w,"System abnormality":r,"You are not authorized to execute this request.":p,"API key does not exist":l,"Order would trigger immediately.":v,"Stop price would trigger immediately.":v,"Order would immediately match and take.":v,"Account has insufficient balance for requested action.":o,"Rest API trading is not enabled.":n,"You don't have permission.":p,"Market is closed.":n,"Too many requests. Please try again later.":d,"-1000":n,"-1001":n,"-1002":l,"-1003":f,"-1013":c,"-1015":f,"-1016":n,"-1020":g,"-1021":u,"-1022":l,"-1100":g,"-1101":g,"-1102":g,"-1103":g,"-1104":g,"-1105":g,"-1106":g,"-1111":g,"-1112":c,"-1114":g,"-1115":g,"-1116":g,"-1117":g,"-1118":g,"-1119":g,"-1120":g,"-1121":y,"-1125":l,"-1127":g,"-1128":g,"-1130":g,"-1131":g,"-2008":l,"-2010":r,"-2011":h,"-2013":h,"-2014":l,"-2015":l,"-2019":o,"-3005":o,"-3006":o,"-3008":o,"-3010":r,"-3015":r,"-3022":b,"-4028":g,"-3020":o,"-3041":o,"-5013":o,"-11008":o,"-4051":o},broad:{"has no operation privilege":p,MAX_POSITION:c}}})}costToPrecision(e,t){return this.decimalToPrecision(t,k,this.markets[e].precision.quote,this.precisionMode,this.paddingMode)}currencyToPrecision(e,t){return void 0!==this.safeValue(this.currencies[e],"precision")?this.decimalToPrecision(t,k,this.currencies[e].precision,this.precisionMode,this.paddingMode):this.numberToString(t)}nonce(){return this.milliseconds()-this.options.timeDifference}async fetchTime(e={}){const t=this.safeString2(this.options,"fetchTime","defaultType","spot"),i=this.safeString(e,"type",t),s=this.omit(e,"type");let r="publicGetTime";"future"===i?r="fapiPublicGetTime":"delivery"===i&&(r="dapiPublicGetTime");const a=await this[r](s);return this.safeInteger(a,"serverTime")}async loadTimeDifference(e={}){const t=await this.fetchTime(e),i=this.milliseconds();return this.options.timeDifference=i-t,this.options.timeDifference}async fetchCurrencies(e={}){if(!this.safeValue(this.options,"fetchCurrencies"))return;if(!this.checkRequiredCredentials(!1))return;if(void 0!==this.safeString(this.urls,"apiBackup"))return;const t=await this.sapiGetCapitalConfigGetall(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"coin"),a=this.safeString(s,"name"),n=this.safeCurrencyCode(r),o=void 0;let h=!0,c=!0;const d=this.safeValue(s,"networkList",[]),u={};let l;for(let e=0;e<d.length;e++){const t=d[e],i=this.safeString(t,"network"),s=this.safeNumber(t,"withdrawFee"),r=this.safeValue(t,"depositEnable"),a=this.safeValue(t,"withdrawEnable");c=c||r,h=h||a,u[i]=s,(this.safeValue(t,"isDefault")||void 0===l)&&(l=s)}const f=this.safeValue(s,"trading"),p=h&&c&&f;i[n]={id:r,name:a,code:n,precision:o,info:s,active:p,networks:d,fee:l,fees:u,limits:this.limits}}return i}async fetchMarkets(e={}){const t=this.safeString2(this.options,"fetchMarkets","defaultType","spot"),i=this.safeString(e,"type",t),s=this.omit(e,"type");if("spot"!==i&&"future"!==i&&"margin"!==i&&"delivery"!==i)throw new r(this.id+" does not support '"+i+"' type, set exchange.options['defaultType'] to 'spot', 'margin', 'delivery' or 'future'");let a="publicGetExchangeInfo";"future"===i?a="fapiPublicGetExchangeInfo":"delivery"===i&&(a="dapiPublicGetExchangeInfo");const n=await this[a](s);this.options.adjustForTimeDifference&&await this.loadTimeDifference();const o=this.safeValue(n,"symbols",[]),h=[];for(let e=0;e<o.length;e++){const t=o[e],s="spot"===i,r="future"===i,a="delivery"===i,n=this.safeString(t,"symbol"),c=this.safeStringLower(t,"symbol"),d=this.safeString(t,"baseAsset"),u=this.safeString(t,"quoteAsset"),l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(u),p=this.safeString(t,"contractType");let m,g;(r||a)&&"PERPETUAL"!==p?(m=n,g=this.safeInteger(t,"deliveryDate")):m=l+"/"+f;const y=this.safeValue(t,"filters",[]),b=this.indexBy(y,"filterType"),v={base:this.safeInteger(t,"baseAssetPrecision"),quote:this.safeInteger(t,"quotePrecision"),amount:this.safeInteger(t,"quantityPrecision"),price:this.safeInteger(t,"pricePrecision")},w="TRADING"===this.safeString2(t,"status","contractStatus"),k=this.safeValue(t,"isMarginTradingAllowed",!1);let _,S=this.fees;(r||a)&&(_=this.safeString(t,"contractSize","1"),S=this.fees[i]);const O=S.trading.maker,M=S.trading.taker,T=this.safeString(t,"marginAsset"),x=this.safeCurrencyCode(T),I={id:n,lowercaseId:c,symbol:m,base:l,quote:f,baseId:d,quoteId:u,info:t,spot:s,type:i,margin:k,future:r,delivery:a,linear:r,inverse:a,expiry:g,expiryDatetime:this.iso8601(g),settleId:T,settle:x,active:w,precision:v,contractSize:_,maker:O,taker:M,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}};if("PRICE_FILTER"in b){const e=this.safeValue(b,"PRICE_FILTER",{}),t=this.safeString(e,"tickSize");I.precision.price=this.precisionFromString(t),I.limits.price={min:this.safeNumber(e,"minPrice"),max:this.safeNumber(e,"maxPrice")},I.precision.price=this.precisionFromString(e.tickSize)}if("LOT_SIZE"in b){const e=this.safeValue(b,"LOT_SIZE",{}),t=this.safeString(e,"stepSize");I.precision.amount=this.precisionFromString(t),I.limits.amount={min:this.safeNumber(e,"minQty"),max:this.safeNumber(e,"maxQty")}}if("MARKET_LOT_SIZE"in b){const e=this.safeValue(b,"MARKET_LOT_SIZE",{});I.limits.market={min:this.safeNumber(e,"minQty"),max:this.safeNumber(e,"maxQty")}}if("MIN_NOTIONAL"in b){const e=this.safeValue(b,"MIN_NOTIONAL",{});I.limits.cost.min=this.safeNumber2(e,"minNotional","notional")}h.push(I)}return h}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString2(this.options,"fetchBalance","defaultType","spot"),i=this.safeString(e,"type",t);let s="privateGetAccount";if("future"===i){const e=this.safeValue(this.options,i,{}),t=this.safeValue(e,"fetchBalance",{});s=this.safeString(t,"method","fapiPrivateV2GetAccount")}else if("delivery"===i){const e=this.safeValue(this.options,i,{}),t=this.safeValue(e,"fetchBalance",{});s=this.safeString(t,"method","dapiPrivateGetAccount")}else"margin"===i?s="sapiGetMarginAccount":"savings"===i?s="sapiGetLendingUnionAccount":"funding"===i&&(s="sapiPostAssetGetFundingAsset");const r=this.omit(e,"type"),a=await this[s](r),n={info:a};let o;if("spot"===i||"margin"===i){o=this.safeInteger(a,"updateTime");const e=this.safeValue2(a,"balances","userAssets",[]);for(let t=0;t<e.length;t++){const i=e[t],s=this.safeString(i,"asset"),r=this.safeCurrencyCode(s),a=this.account();a.free=this.safeString(i,"free"),a.used=this.safeString(i,"locked"),n[r]=a}}else if("savings"===i){const e=this.safeValue(a,"positionAmountVos");for(let t=0;t<e.length;t++){const i=e[t],s=this.safeString(i,"asset"),r=this.safeCurrencyCode(s),a=this.account(),o=this.safeString(i,"amount");a.total=o,a.used=o,n[r]=a}}else if("funding"===i)for(let e=0;e<a.length;e++){const t=a[e],i=this.account(),s=this.safeString(t,"asset"),r=this.safeCurrencyCode(s);i.free=this.safeString(t,"free");const o=this.safeString(t,"freeze"),h=this.safeString(t,"withdrawing"),c=this.safeString(t,"locked");i.used=_.stringAdd(o,_.stringAdd(c,h)),n[r]=i}else{let e=a;Array.isArray(a)||(e=this.safeValue(a,"assets",[]));for(let t=0;t<e.length;t++){const i=e[t],s=this.safeString(i,"asset"),r=this.safeCurrencyCode(s),a=this.account();a.free=this.safeString(i,"availableBalance"),a.used=this.safeString(i,"initialMargin"),a.total=this.safeString2(i,"marginBalance","balance"),n[r]=a}}return n.timestamp=o,n.datetime=this.iso8601(o),this.parseBalance(n)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={symbol:s.id};void 0!==t&&(r.limit=t);let a="publicGetDepth";s.linear?a="fapiPublicGetDepth":s.inverse&&(a="dapiPublicGetDepth");const n=await this[a](this.extend(r,i)),o=this.safeInteger(n,"T"),h=this.parseOrderBook(n,e,o);return h.nonce=this.safeInteger(n,"lastUpdateId"),h}parseTicker(e,t){const i=this.safeInteger(e,"closeTime"),s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t),a=this.safeNumber(e,"lastPrice");let n,o;return"baseVolume"in e?(n=this.safeNumber(e,"baseVolume"),o=this.safeNumber(e,"volume")):(n=this.safeNumber(e,"volume"),o=this.safeNumber(e,"quoteVolume")),this.safeTicker({symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"highPrice"),low:this.safeNumber(e,"lowPrice"),bid:this.safeNumber(e,"bidPrice"),bidVolume:this.safeNumber(e,"bidQty"),ask:this.safeNumber(e,"askPrice"),askVolume:this.safeNumber(e,"askQty"),vwap:this.safeNumber(e,"weightedAvgPrice"),open:this.safeNumber(e,"openPrice"),close:a,last:a,previousClose:this.safeNumber(e,"prevClosePrice"),change:this.safeNumber(e,"priceChange"),percentage:this.safeNumber(e,"priceChangePercent"),average:void 0,baseVolume:n,quoteVolume:o,info:e},t)}async fetchStatus(e={}){const t=await this.sapiGetSystemStatus(e);let i=this.safeString(t,"status");return void 0!==i&&(i="0"===i?"ok":"maintenance",this.status=this.extend(this.status,{status:i,updated:this.milliseconds()})),this.status}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id};let r="publicGetTicker24hr";i.linear?r="fapiPublicGetTicker24hr":i.inverse&&(r="dapiPublicGetTicker24hr");const a=await this[r](this.extend(s,t));if(Array.isArray(a)){const e=this.safeValue(a,0,{});return this.parseTicker(e,i)}return this.parseTicker(a,i)}async fetchBidsAsks(e,t={}){await this.loadMarkets();const i=this.safeString2(this.options,"fetchBidsAsks","defaultType","spot"),s=this.safeString(t,"type",i),r=this.omit(t,"type");let a;a="future"===s?"fapiPublicGetTickerBookTicker":"delivery"===s?"dapiPublicGetTickerBookTicker":"publicGetTickerBookTicker";const n=await this[a](r);return this.parseTickers(n,e)}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.safeString2(this.options,"fetchTickers","defaultType","spot"),s=this.safeString(t,"type",i),r=this.omit(t,"type");let a;a="future"===s?"fapiPublicGetTicker24hr":"delivery"===s?"dapiPublicGetTicker24hr":"publicGetTicker24hr";const n=this.safeString(this.options,"fetchTickersMethod",a),o=await this[n](r);return this.parseTickers(o,e)}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n=this.safeString(r,"price");r=this.omit(r,"price"),s=void 0===s?500:Math.min(s,1500);const o={interval:this.timeframes[t],limit:s};"index"===n?o.pair=a.id:o.symbol=a.id,void 0!==i&&(o.startTime=i);let h="publicGetKlines";"mark"===n?h=a.inverse?"dapiPublicGetMarkPriceKlines":"fapiPublicGetMarkPriceKlines":"index"===n?h=a.inverse?"dapiPublicGetIndexPriceKlines":"fapiPublicGetIndexPriceKlines":a.linear?h="fapiPublicGetKlines":a.inverse&&(h="dapiPublicGetKlines");const c=await this[h](this.extend(o,r));return this.parseOHLCVs(c,a,t,i,s)}async fetchMarkOHLCV(e,t="1m",i,s,r={}){return await this.fetchOHLCV(e,t,i,s,this.extend({price:"mark"},r))}async fetchIndexOHLCV(e,t="1m",i,s,r={}){return await this.fetchOHLCV(e,t,i,s,this.extend({price:"index"},r))}parseTrade(e,t){if("isDustTrade"in e)return this.parseDustTrade(e,t);const i=this.safeInteger2(e,"T","time"),s=this.safeString2(e,"p","price"),r=this.safeString2(e,"q","qty"),a=this.safeString2(e,"quoteQty","baseQty"),n=this.safeString(e,"symbol"),o=this.safeSymbol(n,t);let h,c=this.safeString2(e,"t","a");c=this.safeString2(e,"id","tradeId",c);const d=this.safeString(e,"orderId");let u,l;return"m"in e?h=e.m?"sell":"buy":"isBuyerMaker"in e?h=e.isBuyerMaker?"sell":"buy":"side"in e?h=this.safeStringLower(e,"side"):"isBuyer"in e&&(h=e.isBuyer?"buy":"sell"),"commission"in e&&(u={cost:this.safeString(e,"commission"),currency:this.safeCurrencyCode(this.safeString(e,"commissionAsset"))}),"isMaker"in e&&(l=e.isMaker?"maker":"taker"),"maker"in e&&(l=e.maker?"maker":"taker"),this.safeTrade({info:e,timestamp:i,datetime:this.iso8601(i),symbol:o,id:c,order:d,type:void 0,side:h,takerOrMaker:l,price:s,amount:r,cost:a,fee:u},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},n=this.safeString2(this.options,"fetchTrades","defaultType","spot"),o=this.safeString(s,"type",n),h=this.omit(s,"type");let c;c="future"===o?"fapiPublicGetAggTrades":"delivery"===o?"dapiPublicGetAggTrades":"publicGetAggTrades";let d=this.safeString(this.options,"fetchTradesMethod",c);"publicGetAggTrades"===d?(void 0!==t&&(a.startTime=t,a.endTime=this.sum(t,36e5)),"future"===o?d="fapiPublicGetAggTrades":"delivery"===o&&(d="dapiPublicGetAggTrades")):"publicGetHistoricalTrades"===d&&("future"===o?d="fapiPublicGetHistoricalTrades":"delivery"===o&&(d="dapiPublicGetHistoricalTrades")),void 0!==i&&(a.limit=i);const u=await this[d](this.extend(a,h));return this.parseTrades(u,r,t,i)}parseOrderStatus(e){return this.safeString({NEW:"open",PARTIALLY_FILLED:"open",FILLED:"closed",CANCELED:"canceled",PENDING_CANCEL:"canceling",REJECTED:"rejected",EXPIRED:"expired"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"status")),s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t),a=this.safeString(e,"executedQty","0");let n,o;"time"in e?n=this.safeInteger(e,"time"):"transactTime"in e?n=this.safeInteger(e,"transactTime"):"updateTime"in e&&"open"===i&&(_.stringGt(a,"0")?o=this.safeInteger(e,"updateTime"):n=this.safeInteger(e,"updateTime"));const h=this.safeString(e,"avgPrice"),c=this.safeString(e,"price"),d=this.safeString(e,"origQty");let u=this.safeString2(e,"cummulativeQuoteQty","cumQuote");u=this.safeString(e,"cumBase",u);const l=this.safeString(e,"orderId");let f=this.safeStringLower(e,"type");const p=this.safeStringLower(e,"side"),m=this.safeValue(e,"fills",[]),g=this.safeString(e,"clientOrderId"),y=this.safeString(e,"timeInForce"),b="limit_maker"===f||"GTX"===y;"limit_maker"===f&&(f="limit");const v=this.safeString(e,"stopPrice"),w=this.parseNumber(this.omitZero(v));return this.safeOrder2({info:e,id:l,clientOrderId:g,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:o,symbol:r,type:f,timeInForce:y,postOnly:b,side:p,price:c,stopPrice:w,amount:d,cost:u,average:h,filled:a,remaining:void 0,status:i,fee:void 0,trades:m},t)}async createReduceOnlyOrder(e,t,i,s,r,a={}){return await this.createOrder(e,t,i,s,r,this.extend({reduceOnly:!0},a))}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o=this.safeString2(this.options,"createOrder","defaultType","spot"),h=this.safeString(a,"type",o),d=this.safeString2(a,"newClientOrderId","clientOrderId"),u=this.safeValue(a,"postOnly",!1);if(a=this.omit(a,["type","newClientOrderId","clientOrderId","postOnly"]),void 0!==this.safeValue(a,"reduceOnly")&&"future"!==h&&"delivery"!==h)throw new c(this.id+" createOrder() does not support reduceOnly for "+h+" orders, reduceOnly orders are supported for futures and perpetuals only");let l="privatePostOrder";"future"===h?l="fapiPrivatePostOrder":"delivery"===h?l="dapiPrivatePostOrder":"margin"===h&&(l="sapiPostMarginOrder"),n.spot&&(this.safeValue(a,"test",!1)&&(l+="Test"),a=this.omit(a,"test"),u&&(t="LIMIT_MAKER"));const f=t.toUpperCase(),p=this.safeValue(n.info,"orderTypes");if(!this.inArray(f,p))throw new c(this.id+" "+t+" is not a valid order type in market "+e);const m={symbol:n.id,type:f,side:i.toUpperCase()};if(void 0===d){const e=this.safeValue(this.options,"broker");if(void 0!==e){const t=this.safeString(e,h);void 0!==t&&(m.newClientOrderId=t+this.uuid22())}}else m.newClientOrderId=d;m.newOrderRespType="spot"===h||"margin"===h?this.safeValue(this.options.newOrderRespType,t,"RESULT"):"RESULT";let g=!1,y=!1,b=!1,v=!1;if("MARKET"===f)if(this.safeValue(this.options,"quoteOrderQty",!1)){const e=this.safeNumber(a,"quoteOrderQty"),t=n.precision.price;void 0!==e?(m.quoteOrderQty=this.decimalToPrecision(e,k,t,this.precisionMode),a=this.omit(a,"quoteOrderQty")):void 0!==r?m.quoteOrderQty=this.decimalToPrecision(s*r,k,t,this.precisionMode):v=!0}else v=!0;else if("LIMIT"===f)y=!0,g=!0,v=!0;else if("STOP_LOSS"===f||"TAKE_PROFIT"===f)b=!0,v=!0,(n.linear||n.inverse)&&(y=!0);else if("STOP_LOSS_LIMIT"===f||"TAKE_PROFIT_LIMIT"===f)v=!0,b=!0,y=!0,g=!0;else if("LIMIT_MAKER"===f)y=!0,v=!0;else if("STOP"===f)v=!0,b=!0,y=!0;else if("STOP_MARKET"===f||"TAKE_PROFIT_MARKET"===f)void 0===this.safeValue(a,"closePosition")&&(v=!0),b=!0;else if("TRAILING_STOP_MARKET"===f&&(v=!0,void 0===this.safeNumber(a,"callbackRate")))throw new c(this.id+" createOrder() requires a callbackRate extra param for a "+t+" order");if(v&&(m.quantity=this.amountToPrecision(e,s)),y){if(void 0===r)throw new c(this.id+" createOrder() requires a price argument for a "+t+" order");m.price=this.priceToPrecision(e,r)}if(g&&(m.timeInForce=this.options.defaultTimeInForce),b){const i=this.safeNumber(a,"stopPrice");if(void 0===i)throw new c(this.id+" createOrder() requires a stopPrice extra param for a "+t+" order");a=this.omit(a,"stopPrice"),m.stopPrice=this.priceToPrecision(e,i)}const w=await this[l](this.extend(m,a));return this.parseOrder(w,n)}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r=this.safeString2(this.options,"fetchOrder","defaultType","spot"),n=this.safeString(i,"type",r);let o="privateGetOrder";"future"===n?o="fapiPrivateGetOrder":"delivery"===n?o="dapiPrivateGetOrder":"margin"===n&&(o="sapiGetMarginOrder");const h={symbol:s.id},c=this.safeValue2(i,"origClientOrderId","clientOrderId");void 0!==c?h.origClientOrderId=c:h.orderId=e;const d=this.omit(i,["type","clientOrderId","origClientOrderId"]),u=await this[o](this.extend(h,d));return this.parseOrder(u,s)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n=this.safeString2(this.options,"fetchOrders","defaultType","spot"),o=this.safeString(s,"type",n);let h="privateGetAllOrders";"future"===o?h="fapiPrivateGetAllOrders":"delivery"===o?h="dapiPrivateGetAllOrders":"margin"===o&&(h="sapiGetMarginAllOrders");const c={symbol:r.id};void 0!==t&&(c.startTime=t),void 0!==i&&(c.limit=i);const d=this.omit(s,"type"),u=await this[h](this.extend(c,d));return this.parseOrders(u,r,t,i)}async fetchOpenOrders(e,t,i,s={}){let a,n,o;await this.loadMarkets();const h={};if(void 0!==e){a=this.market(e),h.symbol=a.id;const t=this.safeString2(this.options,"fetchOpenOrders","defaultType","spot"),i="type"in a?a.type:t;o=this.safeString(s,"type",i),n=this.omit(s,"type")}else{if(this.options.warnOnFetchOpenOrdersWithoutSymbol){const e=this.symbols.length,t=parseInt(e/2);throw new r(this.id+" fetchOpenOrders WARNING: fetching open orders without specifying a symbol is rate-limited to one call per "+t.toString()+" seconds. Do not call this method frequently to avoid ban. Set "+this.id+'.options["warnOnFetchOpenOrdersWithoutSymbol"] = false to suppress this warning message.')}{const e=this.safeString2(this.options,"fetchOpenOrders","defaultType","spot");o=this.safeString(s,"type",e),n=this.omit(s,"type")}}let c="privateGetOpenOrders";"future"===o?c="fapiPrivateGetOpenOrders":"delivery"===o?c="dapiPrivateGetOpenOrders":"margin"===o&&(c="sapiGetMarginOpenOrders");const d=await this[c](this.extend(h,n));return this.parseOrders(d,a,t,i)}async fetchClosedOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r=this.safeString2(this.options,"fetchOpenOrders","defaultType","spot"),n=this.safeString(i,"type",r),o=this.safeValue2(i,"origClientOrderId","clientOrderId"),h={symbol:s.id};void 0===o?h.orderId=e:h.origClientOrderId=o;let c="privateDeleteOrder";"future"===n?c="fapiPrivateDeleteOrder":"delivery"===n?c="dapiPrivateDeleteOrder":"margin"===n&&(c="sapiDeleteMarginOrder");const d=this.omit(i,["type","origClientOrderId","clientOrderId"]),u=await this[c](this.extend(h,d));return this.parseOrder(u,s)}async cancelAllOrders(e,t={}){if(void 0===e)throw new a(this.id+" cancelAllOrders() requires a symbol argument");await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=this.safeString2(this.options,"cancelAllOrders","defaultType","spot"),n=this.safeString(t,"type",r),o=this.omit(t,"type");let h="privateDeleteOpenOrders";"margin"===n?h="sapiDeleteMarginOpenOrders":"future"===n?h="fapiPrivateDeleteAllOpenOrders":"delivery"===n&&(h="dapiPrivateDeleteAllOpenOrders");const c=await this[h](this.extend(s,o));return Array.isArray(c)?this.parseOrders(c,i):c}async fetchOrderTrades(e,t,i,s,r={}){if(void 0===t)throw new a(this.id+" fetchOrderTrades() requires a symbol argument");await this.loadMarkets();const n=this.market(t),o=this.safeString(r,"type",n.type);if(r=this.omit(r,"type"),"spot"!==o)throw new m(this.id+" fetchOrderTrades() supports spot markets only");const h={orderId:e};return await this.fetchMyTrades(t,i,s,this.extend(h,r))}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n=this.safeString(s,"type",r.type);let o;s=this.omit(s,"type"),"spot"===n?o="privateGetMyTrades":"margin"===n?o="sapiGetMarginMyTrades":"future"===n?o="fapiPrivateGetUserTrades":"delivery"===n&&(o="dapiPrivateGetUserTrades");const h={symbol:r.id};void 0!==t&&(h.startTime=t),void 0!==i&&(h.limit=i);const c=await this[o](this.extend(h,s));return this.parseTrades(c,r,t,i)}async fetchMyDustTrades(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==t&&(r.startTime=t,r.endTime=this.sum(t,7776e6));const a=await this.sapiGetAssetDribblet(this.extend(r,s)),n=this.safeValue(a,"userAssetDribblets",[]),o=this.safeInteger(a,"total",0),h=[];for(let e=0;e<o;e++){const t=this.safeValue(n[e],"userAssetDribbletDetails",[]);for(let e=0;e<t.length;e++)t[e].isDustTrade=!0,h.push(t[e])}const c=this.parseTrades(h,void 0,t,i);return this.filterBySinceLimit(c,t,i)}parseDustTrade(e,t){const i=this.safeString(e,"transId"),s=this.safeInteger(e,"operateTime"),r=this.safeString(e,"fromAsset"),a=this.safeCurrencyCode(r),n=this.currency("BNB").code,o=n+"/"+a;let h=!1;o in this.markets&&(h=!0);const c=this.safeString(e,"serviceChargeAmount"),d={currency:n,cost:this.parseNumber(c)};let u,l,f,p,m;h?(u=o,l=this.safeString(e,"transferedAmount"),f=this.safeString(e,"amount"),p="buy"):(u=a+"/"+n,l=this.safeString(e,"amount"),f=this.safeString(e,"transferedAmount"),p="sell"),void 0!==f&&l&&(m=_.stringDiv(f,l));const g=this.parseNumber(l),y=this.parseNumber(m),b=this.parseNumber(f);return{id:void 0,timestamp:s,datetime:this.iso8601(s),symbol:u,order:i,type:void 0,takerOrMaker:void 0,side:p,amount:g,price:y,cost:b,fee:d,info:e}}async fetchDeposits(e,t,i,s={}){let r,a;await this.loadMarkets();const n={};if(e in this.safeValue(this.options,"legalMoney",{})){void 0!==e&&(r=this.currency(e)),n.transactionType=0,void 0!==t&&(n.beginTime=t);const i=await this.sapiGetFiatOrders(this.extend(n,s));a=this.safeValue(i,"data")}else void 0!==e&&(r=this.currency(e),n.coin=r.id),void 0!==t&&(n.startTime=t,n.endTime=this.sum(t,7776e6)),void 0!==i&&(n.limit=i),a=await this.sapiGetCapitalDepositHisrec(this.extend(n,s));return this.parseTransactions(a,r,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a,n;if(e in this.safeValue(this.options,"legalMoney",{})){void 0!==e&&(n=this.currency(e)),r.transactionType=1,void 0!==t&&(r.beginTime=t);const i=await this.sapiGetFiatOrders(this.extend(r,s));a=this.safeValue(i,"data")}else void 0!==e&&(n=this.currency(e),r.coin=n.id),void 0!==t&&(r.startTime=t,r.endTime=this.sum(t,7776e6)),void 0!==i&&(r.limit=i),a=await this.sapiGetCapitalWithdrawHistory(this.extend(r,s));return this.parseTransactions(a,n,t,i)}parseTransactionStatusByType(e,t){const i=this.safeValue({deposit:{0:"pending",1:"ok",Processing:"pending",Failed:"failed",Successful:"ok",Refunding:"canceled",Refunded:"canceled","Refund Failed":"failed"},withdrawal:{0:"pending",1:"canceled",2:"pending",3:"failed",4:"pending",5:"failed",6:"ok",Processing:"pending",Failed:"failed",Successful:"ok",Refunding:"canceled",Refunded:"canceled","Refund Failed":"failed"}},t,{});return this.safeString(i,e,e)}parseTransaction(e,t){const i=this.safeString2(e,"id","orderNo"),s=this.safeString(e,"address");let r=this.safeString(e,"addressTag");void 0!==r&&r.length<1&&(r=void 0);let a=this.safeString(e,"txId");void 0!==a&&a.indexOf("Internal transfer ")>=0&&(a=a.slice(18));const n=this.safeString2(e,"coin","fiatCurrency"),o=this.safeCurrencyCode(n,t);let h;const c=this.safeInteger2(e,"insertTime","createTime"),d=this.parse8601(this.safeString(e,"applyTime"));let u=this.safeString(e,"type");void 0===u&&(void 0!==c&&void 0===d?(u="deposit",h=c):void 0===c&&void 0!==d&&(u="withdrawal",h=d));const l=this.parseTransactionStatusByType(this.safeString(e,"status"),u),f=this.safeNumber(e,"amount"),p=this.safeNumber2(e,"transactionFee","totalFee");let m;void 0!==p&&(m={currency:o,cost:p});const g=this.safeInteger2(e,"successTime","updateTime");let y=this.safeInteger(e,"transferType",!1);return y=!!y,{info:e,id:i,txid:a,timestamp:h,datetime:this.iso8601(h),address:s,addressTo:s,addressFrom:void 0,tag:r,tagTo:r,tagFrom:void 0,type:u,amount:f,currency:o,status:l,updated:g,internal:y,fee:m}}parseTransferStatus(e){return this.safeString({CONFIRMED:"ok"},e,e)}parseTransfer(e,t){const i=this.safeString(e,"tranId"),s=this.safeString(e,"asset"),r=this.safeCurrencyCode(s,t),a=this.safeNumber(e,"amount"),n=this.safeString(e,"type");let o,h;const c=this.safeValue(this.options,"typesByAccount",{});if(void 0!==n){const e=n.split("_");o=this.safeValue(e,0),h=this.safeValue(e,1),o=this.safeString(c,o,o),h=this.safeString(c,h,h)}const d=this.safeInteger(e,"timestamp"),u=this.parseTransferStatus(this.safeString(e,"status"));return{info:e,id:i,timestamp:d,datetime:this.iso8601(d),currency:r,amount:a,fromAccount:o,toAccount:h,status:u}}parseIncome(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t),r=this.safeNumber(e,"income"),a=this.safeString(e,"asset"),n=this.safeCurrencyCode(a),o=this.safeString(e,"tranId"),h=this.safeInteger(e,"time");return{info:e,symbol:s,code:n,timestamp:h,datetime:this.iso8601(h),id:o,amount:r}}parseIncomes(e,t,i,s){const r=[];for(let i=0;i<e.length;i++){const s=e[i],a=this.parseIncome(s,t);r.push(a)}const a=this.sortBy(r,"timestamp");return this.filterBySinceLimit(a,i,s)}async transfer(e,t,i,s,a={}){await this.loadMarkets();const n=this.currency(e);let o=this.safeString(a,"type");if(void 0===o){const e=this.safeValue(this.options,"accountsByType",{});i=i.toLowerCase(),s=s.toLowerCase();const t=this.safeString(e,i),a=this.safeString(e,s);if(void 0===t){const t=Object.keys(e);throw new r(this.id+" fromAccount must be one of "+t.join(", "))}if(void 0===a){const t=Object.keys(e);throw new r(this.id+" toAccount must be one of "+t.join(", "))}o=t+"_"+a}const h={asset:n.id,amount:this.currencyToPrecision(e,t),type:o},c=await this.sapiPostAssetTransfer(this.extend(h,a)),d=this.parseTransfer(c,n);return this.extend(d,{amount:t,currency:e,fromAccount:i,toAccount:s})}async fetchTransfers(e,t,i,s={}){let a;await this.loadMarkets(),void 0!==e&&(a=this.currency(e));const n=this.safeString2(this.options,"fetchTransfers","defaultType","spot"),o=this.safeString(s,"fromAccount",n),h="future"===o?"spot":"future",c=this.safeString(s,"toAccount",h);let d=this.safeString(s,"type");const u=this.safeValue(this.options,"accountsByType",{}),l=this.safeString(u,o),f=this.safeString(u,c);if(void 0===d){if(void 0===l){const e=Object.keys(u);throw new r(this.id+" fromAccount parameter must be one of "+e.join(", "))}if(void 0===f){const e=Object.keys(u);throw new r(this.id+" toAccount parameter must be one of "+e.join(", "))}d=l+"_"+f}const p={type:d};void 0!==t&&(p.startTime=t),void 0!==i&&(p.size=i);const m=await this.sapiGetAssetTransfer(this.extend(p,s)),g=this.safeValue(m,"rows",[]);return this.parseTransfers(g,a,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={coin:this.currency(e).id},s=this.safeValue(this.options,"networks",{});let r=this.safeStringUpper(t,"network");r=this.safeString(s,r,r),void 0!==r&&(i.network=r,t=this.omit(t,"network"));const a=await this.sapiGetCapitalDepositAddress(this.extend(i,t)),n=this.safeString(a,"address"),o=this.safeString(a,"url");let h;if(void 0!==o){const t=this.safeValue(this.options,"reverseNetworks",{}),i=o.split("/");let s=this.safeString(i,2);if("blockchair.com"===s||"viewblock.io"===s){const e=this.safeString(i,3);void 0!==e&&(s=s+"/"+e)}h=this.safeString(t,s);const r=this.safeValue(this.options,"impliedNetworks",{ETH:{ERC20:"ETH"},TRX:{TRC20:"TRX"}});if(e in r){const t=this.safeValue(r,e,{});h=this.safeString(t,h,h)}}let c=this.safeString(a,"tag","");return 0===c.length&&(c=void 0),this.checkAddress(n),{currency:e,address:n,tag:c,network:h,info:a}}async fetchFundingFees(e,t={}){await this.loadMarkets();const i=await this.sapiGetCapitalConfigGetall(t),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"coin"),a=this.safeCurrencyCode(r),n=this.safeValue(t,"networkList");s[a]={};for(let e=0;e<n.length;e++){const t=n[e],i=this.safeString(t,"network"),r=this.safeCurrencyCode(i),o=this.safeNumber(t,"withdrawFee");s[a][r]=o}}return{withdraw:s,deposit:{},info:i}}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a={coin:this.currency(e).id,address:i,amount:t};void 0!==s&&(a.addressTag=s);const n=this.safeValue(this.options,"networks",{});let o=this.safeStringUpper(r,"network");o=this.safeString(n,o,o),void 0!==o&&(a.network=o,r=this.omit(r,"network"));const h=await this.sapiPostCapitalWithdrawApply(this.extend(a,r));return{info:h,id:this.safeString(h,"id")}}parseTradingFee(e,t){const i=this.safeString(e,"symbol");return{info:e,symbol:this.safeSymbol(i),maker:this.safeNumber(e,"makerCommission"),taker:this.safeNumber(e,"takerCommission")}}async fetchTradingFee(e,t={}){await this.loadMarkets();const i={symbol:this.market(e).id},s=await this.sapiGetAssetTradeFee(this.extend(i,t)),r=this.safeValue(s,0,{});return this.parseTradingFee(r)}async fetchTradingFees(e={}){let t;await this.loadMarkets();const i=this.safeString2(this.options,"fetchFundingRates","defaultType","future"),s=this.safeString(e,"type",i),r=this.omit(e,"type");"spot"===s||"margin"===s?t="sapiGetAssetTradeFee":"future"===s?t="fapiPrivateGetAccount":"delivery"===s&&(t="dapiPrivateGetAccount");const a=await this[t](r);if("spot"===s||"margin"===s){const e={};for(let t=0;t<a.length;t++){const i=this.parseTradingFee(a[t]);e[i.symbol]=i}return e}if("future"===s){const e=Object.keys(this.markets),t={},i=this.safeInteger(a,"feeTier"),r=this.fees[s].trading.tiers,n=r.maker[i][1],o=r.taker[i][1];for(let s=0;s<e.length;s++){const r=e[s];t[r]={info:{feeTier:i},symbol:r,maker:n,taker:o}}return t}if("delivery"===s){const e=Object.keys(this.markets),t={},i=this.safeInteger(a,"feeTier"),r=this.fees[s].trading.tiers,n=r.maker[i][1],o=r.taker[i][1];for(let s=0;s<e.length;s++){const r=e[s];t[r]={info:{feeTier:i},symbol:r,maker:n,taker:o}}return t}}async futuresTransfer(e,t,i,s={}){if(i<1||i>4)throw new a(this.id+" type must be between 1 and 4");await this.loadMarkets();const r=this.currency(e),n={asset:r.id,amount:t,type:i},o=await this.sapiPostFuturesTransfer(this.extend(n,s));return this.parseTransfer(o,r)}async fetchFundingRate(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id};let r;if(i.linear)r="fapiPublicGetPremiumIndex";else{if(!i.inverse)throw new m(this.id+" fetchFundingRate() supports linear and inverse contracts only");r="dapiPublicGetPremiumIndex"}let a=await this[r](this.extend(s,t));return i.inverse&&(a=a[0]),this.parseFundingRate(a,i)}async fetchFundingRateHistory(e,t,i,s={}){await this.loadMarkets();const r={};let a;const n=this.safeString2(this.options,"fetchFundingRateHistory","defaultType","future"),o=this.safeString(s,"type",n);if(s=this.omit(s,"type"),"future"===o?a="fapiPublicGetFundingRate":"delivery"===o&&(a="dapiPublicGetFundingRate"),void 0!==e){const t=this.market(e);r.symbol=t.id,t.linear?a="fapiPublicGetFundingRate":t.inverse&&(a="dapiPublicGetFundingRate")}if(void 0===a)throw new m(this.id+" fetchFundingRateHistory() not supported for "+o+" markets");void 0!==t&&(r.startTime=t);const h=this.safeInteger(s,"till"),c=this.safeString(s,"endTime",h);s=this.omit(s,["endTime","till"]),void 0!==c&&(r.endTime=c),void 0!==i&&(r.limit=i);const d=await this[a](this.extend(r,s)),u=[];for(let e=0;e<d.length;e++){const t=d[e],i=this.safeInteger(t,"fundingTime");u.push({info:t,symbol:this.safeSymbol(this.safeString(t,"symbol")),fundingRate:this.safeNumber(t,"fundingRate"),timestamp:i,datetime:this.iso8601(i)})}const l=this.sortBy(u,"timestamp");return this.filterBySymbolSinceLimit(l,e,t,i)}async fetchFundingRates(e,t={}){let i;await this.loadMarkets();const s=this.safeString2(this.options,"fetchFundingRates","defaultType","future"),r=this.safeString(t,"type",s),a=this.omit(t,"type");if("future"===r)i="fapiPublicGetPremiumIndex";else{if("delivery"!==r)throw new m(this.id+" fetchFundingRates() supports linear and inverse contracts only");i="dapiPublicGetPremiumIndex"}const n=await this[i](a),o=[];for(let e=0;e<n.length;e++){const t=n[e],i=this.parseFundingRate(t);o.push(i)}return this.filterByArray(o,"symbol",e)}parseFundingRate(e,t){const i=this.safeInteger(e,"time"),s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t),a=this.safeNumber(e,"markPrice"),n=this.safeNumber(e,"indexPrice"),o=this.safeNumber(e,"interestRate"),h=this.safeNumber(e,"estimatedSettlePrice"),c=this.safeNumber(e,"lastFundingRate"),d=this.safeInteger(e,"nextFundingTime"),u=d-288e5;return{info:e,symbol:r,markPrice:a,indexPrice:n,interestRate:o,estimatedSettlePrice:h,timestamp:i,datetime:this.iso8601(i),previousFundingRate:void 0,nextFundingRate:c,previousFundingTimestamp:u,nextFundingTimestamp:d,previousFundingDatetime:this.iso8601(u),nextFundingDatetime:this.iso8601(d)}}parseAccountPositions(e){const t=this.safeValue(e,"positions"),i=this.safeValue(e,"assets"),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"asset"),a=this.safeCurrencyCode(r),n=this.safeString(t,"crossWalletBalance"),o=this.safeString(t,"crossUnPnl");s[a]={crossMargin:_.stringAdd(n,o),crossWalletBalance:n}}const r=[];for(let e=0;e<t.length;e++){const i=t[e],a=this.safeString(i,"symbol"),n=this.safeMarket(a),o="future"===this.options.defaultType?n.quote:n.base;if(o in s){const e=this.parseAccountPosition(this.extend(i,{crossMargin:s[o].crossMargin,crossWalletBalance:s[o].crossWalletBalance}),n);r.push(e)}}return r}parseAccountPosition(e,t){const i=this.safeString(e,"symbol"),s=(t=this.safeMarket(i,t)).symbol,r=this.safeString(e,"leverage"),a=parseInt(r),n=this.safeString(e,"initialMargin"),o=this.parseNumber(n);let h=_.stringDiv("1",r,8);1e3%a==0||(h=_.stringDiv(_.stringAdd(h,"1e-8"),"1",8));const c="notional"in e,d=this.safeString(e,"maintMargin"),u=this.parseNumber(d),l=this.safeString(e,"entryPrice");let f=this.parseNumber(l);const p=this.safeString2(e,"notional","notionalValue"),m=_.stringAbs(p),g=parseFloat(p),y=parseFloat(m),b=this.parseNumber(_.stringAbs(p));let v=this.safeString(e,"positionAmt"),w=_.stringAbs(v);if(void 0===v){const e=_.stringMul(_.stringMul(r,n),l);v=_.stringDiv(e,t.contractSize),w=_.stringDiv(_.stringAdd(v,"0.5"),"1",0)}const k=this.parseNumber(w),S=this.safeValue(this.options,"leverageBrackets",{}),O=this.safeValue(S,s,[]);let M;for(let e=0;e<O.length;e++){const t=O[e];if(y<t[0])break;M=t[1]}const T=this.parseNumber(M),x=this.safeString(e,"unrealizedProfit"),I=this.parseNumber(x);let A,C,N,E=this.safeInteger(e,"updateTime");0===E&&(E=void 0),this.safeValue(e,"isolated")?(A="isolated",N=this.safeString(e,"isolatedWallet"),C=_.stringAdd(N,x)):(A="cross",N=this.safeString(e,"crossWalletBalance"),C=this.safeString(e,"crossMargin"));const P=this.parseNumber(C);let B,R,V,L,D;if(0===g)f=void 0;else{if(R=g<0?"short":"long",B=this.parseNumber(_.stringDiv(_.stringAdd(_.stringDiv(d,C),"5e-5"),"1",4)),V=this.parseNumber(_.stringMul(_.stringDiv(x,n,4),"100")),c){let e,t=l;"short"===R?e=_.stringAdd("1",M):(e=_.stringAdd("-1",M),t=_.stringMul("-1",t));const i=_.stringDiv(N,_.stringMul(w,e)),s=_.stringDiv(t,e);L=_.stringAdd(i,s)}else{let e,i=l;"short"===R?e=_.stringSub("1",M):(e=_.stringSub("-1",M),i=_.stringMul("-1",i));const s=_.stringMul(w,t.contractSize),r=_.stringMul(s,e),a=_.stringSub(_.stringMul(_.stringDiv("1",i),s),N);L=_.stringDiv(r,a)}const e=t.precision.price,i=(e+1).toString(),s=new _("5e-"+i).toString(),r=_.stringAdd(s,L);let a=_.stringDiv(r,"1",e);"-"===a[0]&&(a=void 0),D=this.parseNumber(a)}const q="BOTH"!==this.safeString(e,"positionSide");return{info:e,symbol:s,timestamp:E,datetime:this.iso8601(E),initialMargin:o,initialMarginPercentage:this.parseNumber(h),maintenanceMargin:u,maintenanceMarginPercentage:T,entryPrice:f,notional:b,leverage:this.parseNumber(r),unrealizedPnl:I,contracts:k,contractSize:this.parseNumber(t.contractSize),marginRatio:B,liquidationPrice:D,markPrice:void 0,collateral:P,marginType:A,side:R,hedged:q,percentage:V}}parsePositionRisk(e,t){const i=this.safeString(e,"symbol"),s=(t=this.safeMarket(i,t)).symbol,r=this.safeValue(this.options,"leverageBrackets",{}),a=this.safeValue(r,s,[]),n=this.safeString2(e,"notional","notionalValue"),o=_.stringAbs(n),h=parseFloat(o),c=parseFloat(n);let d;for(let e=0;e<a.length;e++){const t=a[e];if(h<t[0])break;d=t[1]}const u=this.parseNumber(o),l=_.stringAbs(this.safeString(e,"positionAmt")),f=this.parseNumber(l),p=this.safeString(e,"unRealizedProfit"),m=this.parseNumber(p),g=this.safeString(e,"leverage"),y=parseInt(g),b=this.omitZero(this.safeString(e,"liquidationPrice")),v=this.parseNumber(b);let w;const k=this.safeString(e,"marginType");let S;c>0?S="long":c<0&&(S="short");const O=this.safeString(e,"entryPrice"),M=this.parseNumber(O);if("cross"===k)if(t.linear){let e,i=O;"short"===S?(e=_.stringAdd("1",d),i=_.stringMul("-1",i)):e=_.stringAdd("-1",d);const s=_.stringMul(b,e),r=_.stringAdd(s,i);w=_.stringDiv(_.stringMul(r,l),"1",t.precision.quote)}else{let e,i=O;"short"===S?e=_.stringSub("1",d):(e=_.stringSub("-1",d),i=_.stringMul("-1",i));const s=_.stringMul(l,t.contractSize),r=_.stringSub(_.stringDiv("1",i),_.stringDiv(e,b));w=_.stringDiv(_.stringMul(s,r),"1",t.precision.base)}else w=this.safeString(e,"isolatedMargin");w=void 0===w?"0":w;const T=parseFloat(w),x=this.parseNumber(w),I=this.parseNumber(this.omitZero(this.safeString(e,"markPrice")));let A=this.safeInteger(e,"updateTime");0===A&&(A=void 0);const C=this.parseNumber(d),N=_.stringMul(d,o),E=this.parseNumber(N);let P=_.stringDiv("1",g,8);1e3%y==0||(P=_.stringAdd(P,"1e-8"));const B=_.stringDiv(_.stringMul(o,P),"1",8),R=this.parseNumber(B);let V,L;0!==T&&(V=this.parseNumber(_.stringDiv(_.stringAdd(_.stringDiv(N,w),"5e-5"),"1",4)),L=this.parseNumber(_.stringMul(_.stringDiv(p,B,4),"100")));const D="BOTH"!==this.safeString(e,"positionSide");return{info:e,symbol:s,contracts:f,contractSize:this.parseNumber(t.contractSize),unrealizedPnl:m,leverage:this.parseNumber(g),liquidationPrice:v,collateral:x,notional:u,markPrice:I,entryPrice:M,timestamp:A,initialMargin:R,initialMarginPercentage:this.parseNumber(P),maintenanceMargin:E,maintenanceMarginPercentage:C,marginRatio:V,datetime:this.iso8601(A),marginType:k,side:S,hedged:D,percentage:L}}async loadLeverageBrackets(e=!1,t={}){if(await this.loadMarkets(),void 0===this.safeValue(this.options,"leverageBrackets")||e){let e;const i=this.safeString(this.options,"defaultType","future"),s=this.safeString(t,"type",i),r=this.omit(t,"type");if("future"===s)e="fapiPrivateGetLeverageBracket";else{if("delivery"!==s)throw new m(this.id+" loadLeverageBrackets() supports linear and inverse contracts only");e="dapiPrivateV2GetLeverageBracket"}const a=await this[e](r);this.options.leverageBrackets={};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t,"symbol"),s=this.safeSymbol(i),r=this.safeValue(t,"brackets"),n=[];for(let e=0;e<r.length;e++){const t=r[e],i=this.safeFloat2(t,"notionalFloor","qtyFloor"),s=this.safeString(t,"maintMarginRatio");n.push([i,s])}this.options.leverageBrackets[s]=n}}return this.options.leverageBrackets}async fetchPositions(e,t={}){const i=this.safeString(this.options,"fetchPositions","positionRisk");if("positionRisk"===i)return await this.fetchPositionsRisk(e,t);if("account"===i)return await this.fetchAccountPositions(e,t);throw new m(this.id+'.options["fetchPositions"] = "'+i+'" is invalid, please choose between "account" and "positionRisk"')}async fetchAccountPositions(e,t={}){if(void 0!==e&&!Array.isArray(e))throw new a(this.id+" fetchPositions requires an array argument for symbols");let i;await this.loadMarkets(),await this.loadLeverageBrackets();const s=this.safeString(this.options,"defaultType","future"),r=this.safeString(t,"type",s),n=this.omit(t,"type");if("future"===r)i="fapiPrivateGetAccount";else{if("delivery"!==r)throw new m(this.id+" fetchPositions() supports linear and inverse contracts only");i="dapiPrivateGetAccount"}const o=await this[i](n),h=this.parseAccountPositions(o);return this.filterByArray(h,"symbol",e,!1)}async fetchPositionsRisk(e,t={}){if(void 0!==e&&!Array.isArray(e))throw new a(this.id+" fetchPositions requires an array argument for symbols");await this.loadMarkets(),await this.loadLeverageBrackets();let i,s="future";s=this.safeString(this.options,"defaultType",s);const r=this.safeString(t,"type",s);if(t=this.omit(t,"type"),"future"===r||"linear"===r)i="fapiPrivateGetPositionRisk";else{if("delivery"!==r&&"inverse"!==r)throw m(this.id+" fetchIsolatedPositions() supports linear and inverse contracts only");i="dapiPrivateGetPositionRisk"}const n=await this[i](this.extend({},t)),o=[];for(let e=0;e<n.length;e++){const t=this.parsePositionRisk(n[e]);o.push(t)}return this.filterByArray(o,"symbol",e,!1)}async fetchFundingHistory(e,t,i,s={}){let r,a;await this.loadMarkets();let n="future";const o={incomeType:"FUNDING_FEE"};if(void 0!==e)if(r=this.market(e),o.symbol=r.id,r.linear)n="future";else{if(!r.inverse)throw m(this.id+" fetchFundingHistory() supports linear and inverse contracts only");n="delivery"}void 0!==t&&(o.startTime=t),void 0!==i&&(o.limit=i),n=this.safeString2(this.options,"fetchFundingHistory","defaultType",n);const h=this.safeString(s,"type",n);if(s=this.omit(s,"type"),"future"===h||"linear"===h)a="fapiPrivateGetIncome";else{if("delivery"!==h&&"inverse"!==h)throw m(this.id+" fetchFundingHistory() supports linear and inverse contracts only");a="dapiPrivateGetIncome"}const c=await this[a](this.extend(o,s));return this.parseIncomes(c,r,t,i)}async setLeverage(e,t,i={}){if(void 0===t)throw new a(this.id+" setLeverage() requires a symbol argument");if(e<1||e>125)throw new g(this.id+" leverage should be between 1 and 125");await this.loadMarkets();const s=this.market(t);let r;if(s.linear)r="fapiPrivatePostLeverage";else{if(!s.inverse)throw new m(this.id+" setLeverage() supports linear and inverse contracts only");r="dapiPrivatePostLeverage"}const n={symbol:s.id,leverage:e};return await this[r](this.extend(n,i))}async setMarginMode(e,t,i={}){if("ISOLATED"!==(e=e.toUpperCase())&&"CROSSED"!==e)throw new g(this.id+" marginType must be either isolated or crossed");await this.loadMarkets();const s=this.market(t);let r;if(s.linear)r="fapiPrivatePostMarginType";else{if(!s.inverse)throw m(this.id+" setMarginMode() supports linear and inverse contracts only");r="dapiPrivatePostMarginType"}const a={symbol:s.id,marginType:e};return await this[r](this.extend(a,i))}async setPositionMode(e,t,i={}){const s=this.safeString(this.options,"defaultType","future"),r=this.safeString(i,"type",s);let a;i=this.omit(i,["type"]),a=e?"true":"false";const n={dualSidePosition:a};let o;return o="delivery"===r?"dapiPrivatePostPositionSideDual":"fapiPrivatePostPositionSideDual",await this[o](this.extend(n,i))}sign(e,t="public",i="GET",s={},r,a){if(!(t in this.urls.api))throw new m(this.id+" does not have a testnet/sandbox URL for "+t+" endpoints");let n=this.urls.api[t];if(n+="/"+e,"wapi"===t&&(n+=".html"),"historicalTrades"===e){if(!this.apiKey)throw new l(this.id+" historicalTrades endpoint requires `apiKey` credential");r={"X-MBX-APIKEY":this.apiKey}}if("userDataStream"===e||"listenKey"===e){if(!this.apiKey)throw new l(this.id+" userDataStream endpoint requires `apiKey` credential");r={"X-MBX-APIKEY":this.apiKey,"Content-Type":"application/x-www-form-urlencoded"},"GET"!==i&&(a=this.urlencode(s))}else if("private"===t||"sapi"===t||"wapi"===t&&"systemStatus"!==e||"dapiPrivate"===t||"dapiPrivateV2"===t||"fapiPrivate"===t||"fapiPrivateV2"===t){let o;this.checkRequiredCredentials();const h=this.safeInteger(this.options,"recvWindow",5e3);o="sapi"===t&&"asset/dust"===e?this.urlencodeWithArrayRepeat(this.extend({timestamp:this.nonce(),recvWindow:h},s)):"batchOrders"===e||e.indexOf("sub-account")>=0?this.rawencode(this.extend({timestamp:this.nonce(),recvWindow:h},s)):this.urlencode(this.extend({timestamp:this.nonce(),recvWindow:h},s)),o+="&signature="+this.hmac(this.encode(o),this.encode(this.secret)),r={"X-MBX-APIKEY":this.apiKey},"GET"===i||"DELETE"===i||"wapi"===t?n+="?"+o:(a=o,r["Content-Type"]="application/x-www-form-urlencoded")}else Object.keys(s).length&&(n+="?"+this.urlencode(s));return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,u){if(418===e||429===e)throw new d(this.id+" "+e.toString()+" "+t+" "+n);if(e>=400){if(n.indexOf("Price * QTY is zero or less")>=0)throw new c(this.id+" order cost = amount * price is zero or less "+n);if(n.indexOf("LOT_SIZE")>=0)throw new c(this.id+" order amount should be evenly divisible by lot size "+n);if(n.indexOf("PRICE_FILTER")>=0)throw new c(this.id+" order price is invalid, i.e. exceeds allowed price precision, exceeds min price or max price limits or is invalid float value in general, use this.priceToPrecision (symbol, amount) "+n)}if(void 0===o)return;const l=this.safeValue(o,"success",!0);if(!l){const e=this.safeString(o,"msg");let t;if(void 0!==e){try{t=JSON.parse(e)}catch(e){t=void 0}void 0!==t&&(o=t)}}const f=this.safeString(o,"msg");void 0!==f&&(this.throwExactlyMatchedException(this.exceptions.exact,f,this.id+" "+f),this.throwBroadlyMatchedException(this.exceptions.broad,f,this.id+" "+f));const p=this.safeString(o,"code");if(void 0!==p){if("200"===p||_.stringEquals(p,"0"))return;if("-2015"===p&&this.options.hasAlreadyAuthenticatedSuccessfully)throw new d(this.id+" temporary banned: "+n);const e=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,p,e),new r(e)}if(!l)throw new r(this.id+" "+n)}calculateRateLimiterCost(e,t,i,s,r={},a={}){if("noSymbol"in r&&!("symbol"in s))return r.noSymbol;if("noPoolId"in r&&!("poolId"in s))return r.noPoolId;if("byLimit"in r&&"limit"in s){const e=s.limit,t=r.byLimit;for(let i=0;i<t.length;i++){const s=t[i];if(e<=s[0])return s[1]}}return this.safeInteger(r,"cost",1)}async request(e,t="public",i="GET",s={},r,a,n={},o={}){const h=await this.fetch2(e,t,i,s,r,a,n,o);return"private"!==t&&"wapi"!==t||(this.options.hasAlreadyAuthenticatedSuccessfully=!0),h}async modifyMarginHelper(e,t,i,s={}){let r=this.safeString(this.options,"defaultType","future");"spot"===r&&(r="future");const a=this.safeString(s,"type",r);if("margin"===a||"spot"===a)throw new m(this.id+" add / reduce margin only supported with type future or delivery");await this.loadMarkets();const n=this.market(e),o={type:i,symbol:n.id,amount:t};let h,c;"future"===a?(h="fapiPrivatePostPositionMargin",c=n.quote):(h="dapiPrivatePostPositionMargin",c=n.base);const d=await this[h](this.extend(o,s)),u=1===this.safeInteger(d,"type")?"add":"reduce",l=this.safeNumber(d,"amount"),f="200"===this.safeString(d,"code")?"ok":"failed";return{info:d,type:u,amount:l,code:c,symbol:n.symbol,status:f}}async reduceMargin(e,t,i={}){return await this.modifyMarginHelper(e,t,2,i)}async addMargin(e,t,i={}){return await this.modifyMarginHelper(e,t,1,i)}async fetchBorrowRate(e,t={}){await this.loadMarkets();const i={asset:this.currency(e).id},s=await this.sapiGetMarginInterestRateHistory(this.extend(i,t)),r=this.safeValue(s,0),a=this.safeNumber(r,"timestamp");return{currency:e,rate:this.safeNumber(r,"dailyInterestRate"),period:864e5,timestamp:a,datetime:this.iso8601(a),info:s}}async fetchBorrowRateHistory(e,t,i,s={}){if(await this.loadMarkets(),void 0===i)i=93;else if(i>93)throw new g(this.id+" fetchBorrowRateHistory limit parameter cannot exceed 92");const r={asset:this.currency(e).id,limit:i};if(void 0!==t){r.startTime=t;const e=this.sum(t,864e5*i)-1,s=this.milliseconds();r.endTime=Math.min(e,s)}const a=await this.sapiGetMarginInterestRateHistory(this.extend(r,s)),n=[];for(let t=0;t<a.length;t++){const i=a[t],s=this.safeNumber(i,"timestamp");n.push({currency:e,rate:this.safeNumber(i,"dailyInterestRate"),timestamp:s,datetime:this.iso8601(s),info:i})}return n}}},42483:(e,t,i)=>{"use strict";const s=i(96056);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"binancecoinm",name:"Binance COIN-M",urls:{logo:"https://user-images.githubusercontent.com/1294454/117738721-668c8d80-b205-11eb-8c49-3fad84c4a07f.jpg",doc:["https://binance-docs.github.io/apidocs/delivery/en/","https://binance-docs.github.io/apidocs/spot/en"]},options:{defaultType:"delivery",leverageBrackets:void 0}})}async transferIn(e,t,i={}){return await this.futuresTransfer(e,t,3,i)}async transferOut(e,t,i={}){return await this.futuresTransfer(e,t,4,i)}}},3393:(e,t,i)=>{"use strict";const s=i(96056);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"binanceus",name:"Binance US",countries:["US"],certified:!1,pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/65177307-217b7c80-da5f-11e9-876e-0b748ba0a358.jpg",api:{web:"https://www.binance.us",sapi:"https://api.binance.us/sapi/v1",wapi:"https://api.binance.us/wapi/v3",public:"https://api.binance.us/api/v3",private:"https://api.binance.us/api/v3"},www:"https://www.binance.us",referral:"https://www.binance.us/?ref=35005074",doc:"https://github.com/binance-us/binance-official-api-docs",fees:"https://www.binance.us/en/fee/schedule"},fees:{trading:{tierBased:!0,percentage:!0,taker:this.parseNumber("0.001"),maker:this.parseNumber("0.001")}},options:{fetchCurrencies:!1,quoteOrderQty:!1}})}async fetchCurrencies(e={}){}}},12137:(e,t,i)=>{"use strict";const s=i(96056);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"binanceusdm",name:"Binance USDⓈ-M",urls:{logo:"https://user-images.githubusercontent.com/1294454/117738721-668c8d80-b205-11eb-8c49-3fad84c4a07f.jpg",doc:["https://binance-docs.github.io/apidocs/futures/en/","https://binance-docs.github.io/apidocs/spot/en"]},options:{defaultType:"future",leverageBrackets:void 0,marginTypes:{}}})}async transferIn(e,t,i={}){return await this.futuresTransfer(e,t,1,i)}async transferOut(e,t,i={}){return await this.futuresTransfer(e,t,2,i)}}},12455:(e,t,i)=>{"use strict";const s=i(48819),{ArgumentsRequired:r,ExchangeError:a,InvalidNonce:n,AuthenticationError:o,PermissionDenied:h}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bit2c",name:"Bit2C",countries:["IL"],rateLimit:3e3,has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766119-3593220e-5ece-11e7-8b3a-5a041f6bcc3f.jpg",api:"https://bit2c.co.il",www:"https://www.bit2c.co.il",referral:"https://bit2c.co.il/Aff/63bfed10-e359-420c-ab5a-ad368dab0baf",doc:["https://www.bit2c.co.il/home/api","https://github.com/OferE/bit2c"]},api:{public:{get:["Exchanges/{pair}/Ticker","Exchanges/{pair}/orderbook","Exchanges/{pair}/trades","Exchanges/{pair}/lasttrades"]},private:{post:["Merchant/CreateCheckout","Order/AddCoinFundsRequest","Order/AddFund","Order/AddOrder","Order/AddOrderMarketPriceBuy","Order/AddOrderMarketPriceSell","Order/CancelOrder","Order/AddCoinFundsRequest","Order/AddStopOrder","Payment/GetMyId","Payment/Send","Payment/Pay"],get:["Account/Balance","Account/Balance/v2","Order/MyOrders","Order/GetById","Order/AccountHistory","Order/OrderHistory"]}},markets:{"BTC/NIS":{id:"BtcNis",symbol:"BTC/NIS",base:"BTC",quote:"NIS",baseId:"Btc",quoteId:"Nis",type:"spot",spot:!0},"ETH/NIS":{id:"EthNis",symbol:"ETH/NIS",base:"ETH",quote:"NIS",baseId:"Eth",quoteId:"Nis",type:"spot",spot:!0},"BCH/NIS":{id:"BchabcNis",symbol:"BCH/NIS",base:"BCH",quote:"NIS",baseId:"Bchabc",quoteId:"Nis",type:"spot",spot:!0},"LTC/NIS":{id:"LtcNis",symbol:"LTC/NIS",base:"LTC",quote:"NIS",baseId:"Ltc",quoteId:"Nis",type:"spot",spot:!0},"ETC/NIS":{id:"EtcNis",symbol:"ETC/NIS",base:"ETC",quote:"NIS",baseId:"Etc",quoteId:"Nis",type:"spot",spot:!0},"BTG/NIS":{id:"BtgNis",symbol:"BTG/NIS",base:"BTG",quote:"NIS",baseId:"Btg",quoteId:"Nis",type:"spot",spot:!0},"BSV/NIS":{id:"BchsvNis",symbol:"BSV/NIS",base:"BSV",quote:"NIS",baseId:"Bchsv",quoteId:"Nis",type:"spot",spot:!0},"GRIN/NIS":{id:"GrinNis",symbol:"GRIN/NIS",base:"GRIN",quote:"NIS",baseId:"Grin",quoteId:"Nis",type:"spot",spot:!0}},fees:{trading:{maker:this.parseNumber("0.005"),taker:this.parseNumber("0.005")}},options:{fetchTradesMethod:"public_get_exchanges_pair_trades"},exceptions:{exact:{"Please provide valid APIkey":o},broad:{"Please provide valid nonce":n,"please approve new terms of use on site":h}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountBalanceV2(e),i={info:t,timestamp:void 0,datetime:void 0},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){const r=s[e],a=this.account(),n=this.currency(r).id.toUpperCase();n in t&&(a.free=this.safeString(t,"AVAILABLE_"+n),a.total=this.safeString(t,n)),i[r]=a}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},r=await this.publicGetExchangesPairOrderbook(this.extend(s,i));return this.parseOrderBook(r,e)}parseTicker(e,t){const i=this.safeSymbol(void 0,t),s=this.milliseconds(),r=this.safeNumber(e,"av"),a=this.safeNumber(e,"a");let n;void 0!==a&&void 0!==r&&(n=a*r);const o=this.safeNumber(e,"ll");return this.safeTicker({symbol:i,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:this.safeNumber(e,"h"),bidVolume:void 0,ask:this.safeNumber(e,"l"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:r,baseVolume:a,quoteVolume:n,info:e},t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},r=await this.publicGetExchangesPairTicker(this.extend(s,t));return this.parseTicker(r,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),n=this.options.fetchTradesMethod,o={pair:r.id};void 0!==t&&(o.date=parseInt(t)),void 0!==i&&(o.limit=i);const h=await this[n](this.extend(o,s));if("string"==typeof h)throw new a(h);return this.parseTrades(h,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let n="privatePostOrderAddOrder";const o={Amount:s,Pair:this.marketId(e)};"market"===t?n+="MarketPrice"+this.capitalize(i):(o.Price=r,o.Total=s*r,o.IsBid="buy"===i);const h=await this[n](this.extend(o,a));return{info:h,id:h.NewOrder.id}}async cancelOrder(e,t,i={}){const s={id:e};return await this.privatePostOrderCancelOrder(this.extend(s,i))}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const a=this.market(e),n={pair:a.id},o=await this.privateGetOrderMyOrders(this.extend(n,s)),h=this.safeValue(o,a.id,{}),c=this.safeValue(h,"ask",[]),d=this.safeValue(h,"bid",[]);return this.parseOrders(this.arrayConcat(c,d),a,t,i)}parseOrder(e,t){const i=this.safeInteger(e,"created"),s=this.safeString(e,"price"),r=this.safeString(e,"amount");let a;void 0!==t&&(a=t.symbol);let n=this.safeValue(e,"type");0===n?n="buy":1===n&&(n="sell");const o=this.safeString(e,"id"),h=this.safeString(e,"status");return this.safeOrder2({id:o,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:h,symbol:a,type:void 0,timeInForce:void 0,postOnly:void 0,side:n,price:s,stopPrice:void 0,amount:r,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,info:e,average:void 0},t)}async fetchMyTrades(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==i&&(a.take=i),a.take=i,void 0!==t&&(a.toTime=this.yyyymmdd(this.milliseconds(),"."),a.fromTime=this.yyyymmdd(t,".")),void 0!==e&&(r=this.market(e),a.pair=r.id);const n=await this.privateGetOrderOrderHistory(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseTrade(e,t){let i,s,r,a,n,o,h;const c=this.safeString(e,"reference");if(void 0!==c){i=this.safeTimestamp(e,"ticks"),r=this.safeString(e,"price"),a=this.safeString(e,"firstAmount");const d=c.split("|");if(void 0===t){const i=this.safeString(e,"pair");i in this.markets_by_id[i]?t=this.markets_by_id[i]:d[0]in this.markets_by_id&&(t=this.markets_by_id[d[0]])}n=d[1],s=d[2],h=this.safeInteger(e,"action"),0===h?h="buy":1===h&&(h="sell");const u=this.safeString(e,"feeAmount");void 0!==u&&(o={cost:u,currency:"NIS"})}else i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid"),r=this.safeString(e,"price"),a=this.safeString(e,"amount"),h=this.safeValue(e,"isBid"),void 0!==h&&(h=h?"buy":"sell");let d;return void 0!==t&&(d=t.symbol),this.safeTrade({info:e,id:s,timestamp:i,datetime:this.iso8601(i),symbol:d,order:n,type:void 0,side:h,takerOrMaker:void 0,price:r,amount:a,cost:void 0,fee:o},t)}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api+"/"+this.implodeParams(e,s);if("public"===t)n+=".json";else{this.checkRequiredCredentials();const e=this.nonce(),t=this.extend({nonce:e},s),o=this.urlencode(t);"GET"===i?Object.keys(t).length&&(n+="?"+o):a=o;const h=this.hmac(this.encode(o),this.encode(this.secret),"sha512","base64");r={"Content-Type":"application/x-www-form-urlencoded",key:this.apiKey,sign:h}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,n,o,h,c){if(void 0===o)return;const d=this.safeString(o,"error");if(void 0!==d){const e=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,d,e),this.throwBroadlyMatchedException(this.exceptions.broad,d,e),new a(e)}}}},99703:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,AuthenticationError:a,InvalidNonce:n,InsufficientFunds:o,InvalidOrder:h,OrderNotFound:c,PermissionDenied:d,ArgumentsRequired:u}=i(73449),l=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitbank",name:"bitbank",countries:["JP"],version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","4h":"4hour","8h":"8hour","12h":"12hour","1d":"1day","1w":"1week"},hostname:"bitbank.cc",urls:{logo:"https://user-images.githubusercontent.com/1294454/37808081-b87f2d9c-2e59-11e8-894d-c1900b7584fe.jpg",api:{public:"https://public.{hostname}",private:"https://api.{hostname}",markets:"https://api.{hostname}"},www:"https://bitbank.cc/",doc:"https://docs.bitbank.cc/",fees:"https://bitbank.cc/docs/fees/"},api:{public:{get:["{pair}/ticker","{pair}/depth","{pair}/transactions","{pair}/transactions/{yyyymmdd}","{pair}/candlestick/{candletype}/{yyyymmdd}"]},private:{get:["user/assets","user/spot/order","user/spot/active_orders","user/spot/trade_history","user/withdrawal_account"],post:["user/spot/order","user/spot/cancel_order","user/spot/cancel_orders","user/spot/orders_info","user/request_withdrawal"]},markets:{get:["spot/pairs"]}},exceptions:{20001:a,20002:a,20003:a,20005:a,20004:n,40020:h,40021:h,40025:r,40013:c,40014:c,50008:d,50009:c,50010:c,60001:o,60005:h}})}async fetchMarkets(e={}){const t=await this.marketsGetSpotPairs(e),i=this.safeValue(t,"data"),s=this.safeValue(i,"pairs",[]),r=[];for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"name"),a=this.safeString(t,"base_asset"),n=this.safeString(t,"quote_asset"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c=o+"/"+h,d=this.safeNumber(t,"maker_fee_rate_quote"),u=this.safeNumber(t,"taker_fee_rate_quote"),f=this.safeString(t,"price_digits"),p=this.parsePrecision(f),m={price:parseInt(f),amount:this.safeInteger(t,"amount_digits")},g=this.safeValue(t,"is_enabled"),y=this.safeString(t,"unit_amount"),b=l.stringMul(y,p),v={amount:{min:this.safeNumber(t,"unit_amount"),max:this.safeNumber(t,"limit_max_amount")},price:{min:this.parseNumber(p),max:void 0},cost:{min:this.parseNumber(b),max:void 0}};r.push({info:t,id:i,symbol:c,baseId:a,quoteId:n,base:o,quote:h,precision:m,limits:v,type:"spot",spot:!0,active:g,maker:d,taker:u})}return r}parseTicker(e,t){const i=this.safeSymbol(void 0,t),s=this.safeInteger(e,"timestamp"),r=this.safeNumber(e,"last");return this.safeTicker({symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"vol"),quoteVolume:void 0,info:e},t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},r=await this.publicGetPairTicker(this.extend(s,t)),a=this.safeValue(r,"data",{});return this.parseTicker(a,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},r=await this.publicGetPairDepth(this.extend(s,i)),a=this.safeValue(r,"data",{}),n=this.safeInteger(a,"timestamp");return this.parseOrderBook(a,e,n)}parseTrade(e,t){const i=this.safeInteger(e,"executed_at");let s,r;void 0!==t&&(s=t.symbol,r=t.quote);const a=this.safeString(e,"price"),n=this.safeString(e,"amount"),o=this.safeString2(e,"transaction_id","trade_id"),h=this.safeString(e,"maker_taker");let c;const d=this.safeString(e,"fee_amount_quote");void 0!==d&&(c={currency:r,cost:d});const u=this.safeString(e,"order_id"),l=this.safeString(e,"type"),f=this.safeString(e,"side");return this.safeTrade({timestamp:i,datetime:this.iso8601(i),symbol:s,id:o,order:u,type:l,side:f,takerOrMaker:h,price:a,amount:n,cost:void 0,fee:c,info:e},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id},n=await this.publicGetPairTransactions(this.extend(a,s)),o=this.safeValue(n,"data",{}),h=this.safeValue(o,"transactions",[]);return this.parseTrades(h,r,t,i)}parseOHLCV(e,t){return[this.safeInteger(e,5),this.safeNumber(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4)]}async fetchOHLCV(e,t="5m",i,s,r={}){if(void 0===i)throw new u(this.id+" fetchOHLCV requires a since argument");await this.loadMarkets();const a=this.market(e),n={pair:a.id,candletype:this.timeframes[t],yyyymmdd:this.yyyymmdd(i,"")},o=await this.publicGetPairCandlestickCandletypeYyyymmdd(this.extend(n,r)),h=this.safeValue(o,"data",{}),c=this.safeValue(h,"candlestick",[]),d=this.safeValue(c,0,{}),l=this.safeValue(d,"ohlcv",[]);return this.parseOHLCVs(l,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUserAssets(e),i={info:t,timestamp:void 0,datetime:void 0},s=this.safeValue(t,"data",{}),r=this.safeValue(s,"assets",[]);for(let e=0;e<r.length;e++){const t=r[e],s=this.safeString(t,"asset"),a=this.safeCurrencyCode(s),n=this.account();n.free=this.safeString(t,"free_amount"),n.used=this.safeString(t,"locked_amount"),n.total=this.safeString(t,"onhand_amount"),i[a]=n}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({UNFILLED:"open",PARTIALLY_FILLED:"open",FULLY_FILLED:"closed",CANCELED_UNFILLED:"canceled",CANCELED_PARTIALLY_FILLED:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_id"),s=this.safeString(e,"pair");let r;s&&!t&&s in this.markets_by_id&&(t=this.markets_by_id[s]),void 0!==t&&(r=t.symbol);const a=this.safeInteger(e,"ordered_at"),n=this.safeString(e,"price"),o=this.safeString(e,"start_amount"),h=this.safeString(e,"executed_amount"),c=this.safeString(e,"remaining_amount"),d=this.safeString(e,"average_price"),u=this.parseOrderStatus(this.safeString(e,"status")),l=this.safeStringLower(e,"type"),f=this.safeStringLower(e,"side");return this.safeOrder2({id:i,clientOrderId:void 0,datetime:this.iso8601(a),timestamp:a,lastTradeTimestamp:void 0,status:u,symbol:r,type:l,timeInForce:void 0,postOnly:void 0,side:f,price:n,stopPrice:void 0,cost:void 0,average:d,amount:o,filled:h,remaining:c,trades:void 0,fee:void 0,info:e},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o={pair:n.id,amount:this.amountToPrecision(e,s),side:i,type:t};"limit"===t&&(o.price=this.priceToPrecision(e,r));const h=await this.privatePostUserSpotOrder(this.extend(o,a)),c=this.safeValue(h,"data");return this.parseOrder(c,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e,pair:this.market(t).id},r=await this.privatePostUserSpotCancelOrder(this.extend(s,i));return this.safeValue(r,"data")}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),r={order_id:e,pair:s.id},a=await this.privateGetUserSpotOrder(this.extend(r,i)),n=this.safeValue(a,"data");return this.parseOrder(n,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id};void 0!==i&&(a.count=i),void 0!==t&&(a.since=parseInt(t/1e3));const n=await this.privateGetUserSpotActiveOrders(this.extend(a,s)),o=this.safeValue(n,"data",{}),h=this.safeValue(o,"orders",[]);return this.parseOrders(h,r,t,i)}async fetchMyTrades(e,t,i,s={}){let r;await this.loadMarkets(),void 0!==e&&(r=this.market(e));const a={};void 0!==r&&(a.pair=r.id),void 0!==i&&(a.count=i),void 0!==t&&(a.since=parseInt(t/1e3));const n=await this.privateGetUserSpotTradeHistory(this.extend(a,s)),o=this.safeValue(n,"data",{}),h=this.safeValue(o,"trades",[]);return this.parseTrades(h,r,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={asset:i.id},r=await this.privateGetUserWithdrawalAccount(this.extend(s,t)),a=this.safeValue(r,"data",{}),n=this.safeValue(a,"accounts",[]),o=this.safeValue(n,0,{});return{currency:i,address:this.safeString(o,"address"),tag:void 0,network:void 0,info:r}}async withdraw(e,t,i,s,a={}){if([s,a]=this.handleWithdrawTagAndParams(s,a),!("uuid"in a))throw new r(this.id+" uuid is required for withdrawal");await this.loadMarkets();const n={asset:this.currency(e).id,amount:t},o=await this.privatePostUserRequestWithdrawal(this.extend(n,a)),h=this.safeValue(o,"data",{});return{info:o,id:this.safeString(h,"txid")}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n=this.omit(s,this.extractParams(e)),o=this.implodeHostname(this.urls.api[t])+"/";if("public"===t||"markets"===t)o+=this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const t=this.nonce().toString();let h=t;o+=this.version+"/"+this.implodeParams(e,s),"POST"===i?h+=a=this.json(n):(h+="/"+this.version+"/"+e,Object.keys(n).length&&(n=this.urlencode(n),o+="?"+n,h+="?"+n)),r={"Content-Type":"application/json","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":t,"ACCESS-SIGNATURE":this.hmac(this.encode(h),this.encode(this.secret))}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;const d=this.safeInteger(o,"success"),u=this.safeValue(o,"data");if(!d||!u){const e={1e4:"URL does not exist",10001:"A system error occurred. Please contact support",10002:"Invalid JSON format. Please check the contents of transmission",10003:"A system error occurred. Please contact support",10005:"A timeout error occurred. Please wait for a while and try again",20001:"API authentication failed",20002:"Illegal API key",20003:"API key does not exist",20004:"API Nonce does not exist",20005:"API signature does not exist",20011:"Two-step verification failed",20014:"SMS authentication failed",30001:"Please specify the order quantity",30006:"Please specify the order ID",30007:"Please specify the order ID array",30009:"Please specify the stock",30012:"Please specify the order price",30013:"Trade Please specify either",30015:"Please specify the order type",30016:"Please specify asset name",30019:"Please specify uuid",30039:"Please specify the amount to be withdrawn",40001:"The order quantity is invalid",40006:"Count value is invalid",40007:"End time is invalid",40008:"end_id Value is invalid",40009:"The from_id value is invalid",40013:"The order ID is invalid",40014:"The order ID array is invalid",40015:"Too many specified orders",40017:"Incorrect issue name",40020:"The order price is invalid",40021:"The trading classification is invalid",40022:"Start date is invalid",40024:"The order type is invalid",40025:"Incorrect asset name",40028:"uuid is invalid",40048:"The amount of withdrawal is illegal",50003:"Currently, this account is in a state where you can not perform the operation you specified. Please contact support",50004:"Currently, this account is temporarily registered. Please try again after registering your account",50005:"Currently, this account is locked. Please contact support",50006:"Currently, this account is locked. Please contact support",50008:"User identification has not been completed",50009:"Your order does not exist",50010:"Can not cancel specified order",50011:"API not found",60001:"The number of possessions is insufficient",60002:"It exceeds the quantity upper limit of the tender buying order",60003:"The specified quantity exceeds the limit",60004:"The specified quantity is below the threshold",60005:"The specified price is above the limit",60006:"The specified price is below the lower limit",70001:"A system error occurred. Please contact support",70002:"A system error occurred. Please contact support",70003:"A system error occurred. Please contact support",70004:"We are unable to accept orders as the transaction is currently suspended",70005:"Order can not be accepted because purchase order is currently suspended",70006:"We can not accept orders because we are currently unsubscribed ",70009:"We are currently temporarily restricting orders to be carried out. Please use the limit order.",70010:"We are temporarily raising the minimum order quantity as the system load is now rising."},t=this.exceptions,i=this.safeString(u,"code"),s=this.safeString(e,i,"Error"),a=this.safeValue(t,i);throw void 0!==a?new a(s):new r(this.id+" "+this.json(o))}}}},93528:(e,t,i)=>{"use strict";const s=i(79264);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitbay",alias:!0})}}},98875:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,InsufficientFunds:n,OrderNotFound:o,BadRequest:h,BadSymbol:c}=i(73449),d=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitbns",name:"Bitbns",countries:["IN"],rateLimit:1e3,certified:!1,pro:!1,version:"v2",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:void 0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchStatus:!0,fetchTicker:"emulated",fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0},timeframes:{},urls:{logo:"https://user-images.githubusercontent.com/1294454/117201933-e7a6e780-adf5-11eb-9d80-98fc2a21c3d6.jpg",api:{www:"https://bitbns.com",v1:"https://api.bitbns.com/api/trade/v1",v2:"https://api.bitbns.com/api/trade/v2"},www:"https://bitbns.com",referral:"https://ref.bitbns.com/1090961",doc:["https://bitbns.com/trade/#/api-trading/"],fees:"https://bitbns.com/fees"},api:{www:{get:["order/fetchMarkets","order/fetchTickers","order/fetchOrderbook","order/getTickerWithVolume","exchangeData/ohlc","exchangeData/orderBook","exchangeData/tradedetails"]},v1:{get:["platform/status","tickers","orderbook/sell/{symbol}","orderbook/buy/{symbol}"],post:["currentCoinBalance/EVERYTHING","getApiUsageStatus/USAGE","getOrderSocketToken/USAGE","currentCoinBalance/{symbol}","orderStatus/{symbol}","depositHistory/{symbol}","withdrawHistory/{symbol}","withdrawHistoryAll/{symbol}","depositHistoryAll/{symbol}","listOpenOrders/{symbol}","listOpenStopOrders/{symbol}","getCoinAddress/{symbol}","placeSellOrder/{symbol}","placeBuyOrder/{symbol}","buyStopLoss/{symbol}","sellStopLoss/{symbol}","placeSellOrder/{symbol}","cancelOrder/{symbol}","cancelStopLossOrder/{symbol}","listExecutedOrders/{symbol}","placeMarketOrder/{symbol}","placeMarketOrderQnty/{symbol}"]},v2:{post:["orders","cancel","getordersnew","marginOrders"]}},fees:{trading:{feeSide:"quote",tierBased:!1,percentage:!0,taker:this.parseNumber("0.0025"),maker:this.parseNumber("0.0025")}},exceptions:{exact:{400:h,409:c,416:n,417:o},broad:{}}})}async fetchStatus(e={}){const t=await this.v1GetPlatformStatus(e);let i=this.safeString(t,"status");return void 0!==i&&(i="1"===i?"ok":"maintenance",this.status=this.extend(this.status,{status:i,updated:this.milliseconds()})),this.status}async fetchMarkets(e={}){const t=await this.wwwGetOrderFetchMarkets(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"id"),a=this.safeString(s,"base"),n=this.safeString(s,"quote"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c=o+"/"+h,d=this.safeValue(s,"precision",{}),u={amount:this.safeInteger(d,"amount"),price:this.safeInteger(d,"price")},l=this.safeValue(s,"limits",{}),f=this.safeValue(l,"amount",{}),p=this.safeValue(l,"price",{}),m=this.safeValue(l,"cost",{}),g="USDT"===n?a+"_"+n:a;i.push({id:r,uppercaseId:g,symbol:c,base:o,quote:h,baseId:a,quoteId:n,info:s,type:"spot",spot:!0,active:void 0,precision:u,limits:{amount:{min:this.safeNumber(f,"min"),max:this.safeNumber(f,"max")},price:{min:this.safeNumber(p,"min"),max:this.safeNumber(p,"max")},cost:{min:this.safeNumber(m,"min"),max:this.safeNumber(m,"max")}}})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.wwwGetOrderFetchOrderbook(this.extend(s,i)),a=this.safeInteger(r,"timestamp");return this.parseOrderBook(r,a)}parseTicker(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t),a=this.safeNumber(e,"last");return this.safeTicker({symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:this.safeNumber(e,"bidVolume"),ask:this.safeNumber(e,"ask"),askVolume:this.safeNumber(e,"askVolume"),vwap:this.safeNumber(e,"vwap"),open:this.safeNumber(e,"open"),close:a,last:a,previousClose:this.safeNumber(e,"previousClose"),change:this.safeNumber(e,"change"),percentage:this.safeNumber(e,"percentage"),average:this.safeNumber(e,"average"),baseVolume:this.safeNumber(e,"baseVolume"),quoteVolume:this.safeNumber(e,"quoteVolume"),info:e},t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.wwwGetOrderFetchTickers(t);return this.parseTickers(i,e)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.v1PostCurrentCoinBalanceEVERYTHING(e),i=void 0,s={info:t,timestamp:i,datetime:this.iso8601(i)},r=this.safeValue(t,"data",{}),a=Object.keys(r);for(let e=0;e<a.length;e++){const t=a[e],i=t.split("availableorder");if(i.length>1){const e=this.safeString(i,1);if("Money"!==e){const i=this.safeCurrencyCode(e),a=this.account();a.free=this.safeString(r,t),a.used=this.safeString(r,"inorder"+e),s[i]=a}}}return this.parseBalance(s)}parseOrderStatus(e){return this.safeString({0:"open"},e,e)}parseOrder(e,t){const i=this.safeString2(e,"id","entry_id"),s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t),a=this.parse8601(this.safeString(e,"time")),n=this.safeString(e,"rate"),o=this.safeString2(e,"amount","btc"),h=this.safeString(e,"filled"),c=this.safeString(e,"remaining"),d=this.safeString(e,"avg_cost"),u=this.safeString(e,"cost");let l=this.safeStringLower(e,"type");"0"===l&&(l="limit");const f=this.parseOrderStatus(this.safeString(e,"status")),p=this.safeStringLower(e,"side"),m=this.safeNumber(e,"fee");let g;return void 0!==m&&(g={cost:m,currency:void 0}),this.safeOrder2({info:e,id:i,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:r,type:l,timeInForce:void 0,postOnly:void 0,side:p,price:n,stopPrice:void 0,amount:o,cost:u,average:d,filled:h,remaining:c,status:f,fee:g,trades:void 0},t)}async createOrder(e,t,i,s,a,n={}){if("limit"!==t&&"market"!==t)throw new r(this.id+" allows limit and market orders only");await this.loadMarkets();const o=this.market(e),h={side:i.toUpperCase(),symbol:o.uppercaseId,quantity:this.amountToPrecision(e,s)};let c="v2PostOrders";if("limit"===t)h.rate=this.priceToPrecision(e,a);else{if("market"!==t)throw new r(this.id+" allows limit and market orders only");c="v1PostPlaceMarketOrderQntySymbol",h.market=o.quoteId}const d=await this[c](this.extend(h,n));return this.parseOrder(d,o)}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r="USDT"===s.quoteId?"usdtcancelOrder":"cancelOrder",n={entry_id:e,symbol:s.uppercaseId,side:r},o=await this.v2PostCancel(this.extend(n,i));return this.parseOrder(o,s)}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={symbol:s.id,entry_id:e},n=await this.v1PostOrderStatusSymbol(this.extend(r,i)),o=this.safeValue(n,"data",[]),h=this.safeValue(o,0);return this.parseOrder(h,s)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n="USDT"===r.quoteId?"usdtListOpenOrders":"listOpenOrders",o={symbol:r.uppercaseId,side:n,page:0},h=await this.v2PostGetordersnew(this.extend(o,s)),c=this.safeValue(h,"data",[]);return this.parseOrders(c,r,t,i)}parseTrade(e,t){t=this.safeMarket(void 0,t);const i=this.safeString2(e,"id","tradeId");let s=this.parse8601(this.safeString(e,"date"));s=this.safeInteger(e,"timestamp",s);const r=this.safeString2(e,"rate","price");let a=this.safeString(e,"amount"),n=this.safeStringLower(e,"type");void 0!==n&&(n.indexOf("buy")>=0?n="buy":n.indexOf("sell")>=0&&(n="sell"));const o=this.safeString(e,"factor");let h;void 0!==o?a=d.stringDiv(a,o):(a=this.safeString(e,"base_volume"),h=this.safeString(e,"quote_volume"));const c=t.symbol;let u;const l=this.safeString(e,"fee");return void 0!==l&&(u={cost:l,currency:t.quote}),this.safeTrade({info:e,timestamp:s,datetime:this.iso8601(s),symbol:c,id:i,order:i,type:void 0,side:n,takerOrMaker:void 0,price:r,amount:a,cost:h,fee:u},t)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={symbol:r.id,page:0};void 0!==t&&(n.since=this.iso8601(t));const o=await this.v1PostListExecutedOrdersSymbol(this.extend(n,s)),h=this.safeValue(o,"data",[]);return this.parseTrades(h,r,t,i)}async fetchTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={coin:r.baseId,market:r.quoteId},o=await this.wwwGetExchangeDataTradedetails(this.extend(n,s));return this.parseTrades(o,r,t,i)}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchDeposits() requires a currency code argument");await this.loadMarkets();const r=this.currency(e),n={symbol:r.id,page:0},o=await this.v1PostDepositHistorySymbol(this.extend(n,s)),h=this.safeValue(o,"data",[]);return this.parseTransactions(h,r,t,i)}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchWithdrawals() requires a currency code argument");await this.loadMarkets();const r=this.currency(e),n={symbol:r.id,page:0},o=await this.v1PostWithdrawHistorySymbol(this.extend(n,s)),h=this.safeValue(o,"data",[]);return this.parseTransactions(h,r,t,i)}parseTransactionStatusByType(e,t){const i=this.safeValue({deposit:{0:"pending",1:"ok"},withdrawal:{0:"pending",1:"canceled",2:"pending",3:"failed",4:"pending",5:"failed",6:"ok"}},t,{});return this.safeString(i,e,e)}parseTransaction(e,t){const i=this.safeString(e,"unit"),s=this.safeCurrencyCode(i,t),r=this.parse8601(this.safeString(e,"date"));let a,n=this.safeString(e,"type");void 0!==n&&(n.indexOf("deposit")>=0?(n="deposit",a="ok"):n.indexOf("withdraw")>=0&&(n="withdrawal"));const o=this.safeNumber(e,"amount"),h=this.safeNumber(e,"fee");let c;return void 0!==h&&(c={currency:s,cost:h}),{info:e,id:void 0,txid:void 0,timestamp:r,datetime:this.iso8601(r),address:void 0,addressTo:void 0,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:n,amount:o,currency:s,status:a,updated:void 0,internal:void 0,fee:c}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={symbol:this.currency(e).id},s=await this.v1PostGetCoinAddressSymbol(this.extend(i,t)),r=this.safeValue(s,"data",{}),a=this.safeString(r,"token"),n=this.safeString(r,"tag");return this.checkAddress(a),{currency:e,address:a,tag:n,network:void 0,info:s}}nonce(){return this.milliseconds()}sign(e,t="www",i="GET",s={},a,n){if(!(t in this.urls.api))throw new r(this.id+" does not have a testnet/sandbox URL for "+t+" endpoints");"www"!==t&&(this.checkRequiredCredentials(),a={"X-BITBNS-APIKEY":this.apiKey});let o=this.implodeHostname(this.urls.api[t])+"/"+this.implodeParams(e,s);const h=this.omit(s,this.extractParams(e)),c=this.nonce().toString();if("GET"===i)Object.keys(h).length&&(o+="?"+this.urlencode(h));else if("POST"===i){const e={timeStamp_nonce:c,body:n=Object.keys(h).length?this.json(h):"{}"},t=this.stringToBase64(this.json(e)),i=this.hmac(t,this.encode(this.secret),"sha512");a["X-BITBNS-PAYLOAD"]=this.decode(t),a["X-BITBNS-SIGNATURE"]=i,a["Content-Type"]="application/x-www-form-urlencoded"}return{url:o,method:i,body:n,headers:a}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;const d=this.safeString(o,"code"),u=this.safeString(o,"msg");if(void 0!==d&&"200"!==d||void 0!==u){const e=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,d,e),this.throwExactlyMatchedException(this.exceptions.exact,u,e),this.throwBroadlyMatchedException(this.exceptions.broad,u,e),new r(e)}}}},23334:(e,t,i)=>{"use strict";const s=i(28267);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitcoincom",name:"bitcoin.com",countries:["KN"],urls:{logo:"https://user-images.githubusercontent.com/1294454/97296144-514fa300-1861-11eb-952b-3d55d492200b.jpg",api:{public:"https://api.fmfw.io",private:"https://api.fmfw.io"},www:"https://fmfw.io",doc:"https://api.fmfw.io/api/2/explore/",fees:"https://fmfw.io/fees-and-limits",referral:"https://fmfw.io/referral/da948b21d6c92d69"},fees:{trading:{maker:this.parseNumber("0.005"),taker:this.parseNumber("0.005")}}})}}},17965:(e,t,i)=>{"use strict";const s=i(48819),{NotSupported:r,RateLimitExceeded:a,AuthenticationError:n,PermissionDenied:o,ArgumentsRequired:h,ExchangeError:c,ExchangeNotAvailable:d,InsufficientFunds:u,InvalidOrder:l,OrderNotFound:f,InvalidNonce:p,BadSymbol:m}=i(73449),{SIGNIFICANT_DIGITS:g,DECIMAL_PLACES:y,TRUNCATE:b,ROUND:v}=i(62115),w=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitfinex",name:"Bitfinex",countries:["VG"],version:"v1",rateLimit:1500,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createDepositAddress:!0,createOrder:!0,deposit:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:void 0,fetchFundingFees:!0,fetchIndexOHLCV:!1,fetchMarkets:!0,fetchMarkOHLCV:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchPositions:!0,fetchPremiumIndexOHLCV:!1,fetchTicker:!0,fetchTickers:!0,fetchTime:!1,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!0,fetchWithdrawals:void 0,transfer:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","4h":"4h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:{v2:"https://api-pub.bitfinex.com",public:"https://api.bitfinex.com",private:"https://api.bitfinex.com"},www:"https://www.bitfinex.com",referral:"https://www.bitfinex.com/?refcode=P61eYxFL",doc:["https://docs.bitfinex.com/v1/docs","https://github.com/bitfinexcom/bitfinex-api-node"]},api:{v2:{get:["platform/status","tickers","ticker/{symbol}","trades/{symbol}/hist","book/{symbol}/{precision}","book/{symbol}/P0","book/{symbol}/P1","book/{symbol}/P2","book/{symbol}/P3","book/{symbol}/R0","stats1/{key}:{size}:{symbol}:{side}/{section}","stats1/{key}:{size}:{symbol}/{section}","stats1/{key}:{size}:{symbol}:long/last","stats1/{key}:{size}:{symbol}:long/hist","stats1/{key}:{size}:{symbol}:short/last","stats1/{key}:{size}:{symbol}:short/hist","candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist"]},public:{get:["book/{symbol}","lendbook/{currency}","lends/{currency}","pubticker/{symbol}","stats/{symbol}","symbols","symbols_details","tickers","trades/{symbol}"]},private:{post:["account_fees","account_infos","balances","basket_manage","credits","deposit/new","funding/close","history","history/movements","key_info","margin_infos","mytrades","mytrades_funding","offer/cancel","offer/new","offer/status","offers","offers/hist","order/cancel","order/cancel/all","order/cancel/multi","order/cancel/replace","order/new","order/new/multi","order/status","orders","orders/hist","position/claim","position/close","positions","summary","taken_funds","total_taken_funds","transfer","unused_taken_funds","withdraw"]}},fees:{trading:{feeSide:"get",tierBased:!0,percentage:!0,maker:this.parseNumber("0.001"),taker:this.parseNumber("0.002"),tiers:{taker:[[this.parseNumber("0"),this.parseNumber("0.002")],[this.parseNumber("500000"),this.parseNumber("0.002")],[this.parseNumber("1000000"),this.parseNumber("0.002")],[this.parseNumber("2500000"),this.parseNumber("0.002")],[this.parseNumber("5000000"),this.parseNumber("0.002")],[this.parseNumber("7500000"),this.parseNumber("0.002")],[this.parseNumber("10000000"),this.parseNumber("0.0018")],[this.parseNumber("15000000"),this.parseNumber("0.0016")],[this.parseNumber("20000000"),this.parseNumber("0.0014")],[this.parseNumber("25000000"),this.parseNumber("0.0012")],[this.parseNumber("30000000"),this.parseNumber("0.001")]],maker:[[this.parseNumber("0"),this.parseNumber("0.001")],[this.parseNumber("500000"),this.parseNumber("0.0008")],[this.parseNumber("1000000"),this.parseNumber("0.0006")],[this.parseNumber("2500000"),this.parseNumber("0.0004")],[this.parseNumber("5000000"),this.parseNumber("0.0002")],[this.parseNumber("7500000"),this.parseNumber("0")],[this.parseNumber("10000000"),this.parseNumber("0")],[this.parseNumber("15000000"),this.parseNumber("0")],[this.parseNumber("20000000"),this.parseNumber("0")],[this.parseNumber("25000000"),this.parseNumber("0")],[this.parseNumber("30000000"),this.parseNumber("0")]]}},funding:{tierBased:!1,percentage:!1,deposit:{},withdraw:{}}},commonCurrencies:{ALG:"ALGO",AMP:"AMPL",ATO:"ATOM",BCHABC:"XEC",BCHN:"BCH",DAT:"DATA",DOG:"MDOGE",DSH:"DASH",EDO:"PNT",EUS:"EURS",EUT:"EURT",IOT:"IOTA",IQX:"IQ",MNA:"MANA",ORS:"ORS Group",PAS:"PASS",QSH:"QASH",QTM:"QTUM",RBT:"RBTC",SNG:"SNGLS",STJ:"STORJ",TERRAUST:"UST",TSD:"TUSD",YGG:"YEED",YYW:"YOYOW",UDC:"USDC",UST:"USDT",VSY:"VSYS",WAX:"WAXP",XCH:"XCHF",ZBT:"ZB"},exceptions:{exact:{temporarily_unavailable:d,"Order could not be cancelled.":f,"No such order found.":f,"Order price must be positive.":l,"Could not find a key matching the given X-BFX-APIKEY.":n,'Key price should be a decimal number, e.g. "123.456"':l,'Key amount should be a decimal number, e.g. "123.456"':l,ERR_RATE_LIMIT:a,Ratelimit:a,"Nonce is too small.":p,"No summary found.":c,"Cannot evaluate your available balance, please try again":d,"Unknown symbol":m,"Cannot complete transfer. Exchange balance insufficient.":u,"Momentary balance check. Please wait few seconds and try the transfer again.":c},broad:{"Invalid X-BFX-SIGNATURE":n,"This API key does not have permission":o,"not enough exchange balance for ":u,"minimum size for ":l,"Invalid order":l,"The available balance is only":u}},precisionMode:g,options:{currencyNames:{AGI:"agi",AID:"aid",AIO:"aio",ANT:"ant",AVT:"aventus",BAT:"bat",BCH:"bab",BCI:"bci",BFT:"bft",BSV:"bsv",BTC:"bitcoin",BTG:"bgold",CFI:"cfi",COMP:"comp",DAI:"dai",DADI:"dad",DASH:"dash",DATA:"datacoin",DTH:"dth",EDO:"eidoo",ELF:"elf",EOS:"eos",ETC:"ethereumc",ETH:"ethereum",ETP:"metaverse",FUN:"fun",GNT:"golem",IOST:"ios",IOTA:"iota",LEO:"let",LINK:"link",LRC:"lrc",LTC:"litecoin",LYM:"lym",MANA:"mna",MIT:"mit",MKR:"mkr",MTN:"mtn",NEO:"neo",ODE:"ode",OMG:"omisego",OMNI:"mastercoin",QASH:"qash",QTUM:"qtum",RCN:"rcn",RDN:"rdn",REP:"rep",REQ:"req",RLC:"rlc",SAN:"santiment",SNGLS:"sng",SNT:"status",SPANK:"spk",STORJ:"stj",TNB:"tnb",TRX:"trx",TUSD:"tsd",USD:"wire",USDC:"udc",UTK:"utk",USDT:"tetheruso",VEE:"vee",WAX:"wax",XLM:"xlm",XMR:"monero",XRP:"ripple",XVG:"xvg",YOYOW:"yoyow",ZEC:"zcash",ZRX:"zrx",XTZ:"xtz"},orderTypes:{limit:"exchange limit",market:"exchange market"},accountsByType:{spot:"exchange",margin:"trading",funding:"deposit",exchange:"exchange",trading:"trading",deposit:"deposit",derivatives:"trading"}}})}async fetchFundingFees(e={}){await this.loadMarkets();const t=await this.privatePostAccountFees(e),i=t.withdraw,s={},r=Object.keys(i);for(let e=0;e<r.length;e++){const t=r[e];s[this.safeCurrencyCode(t)]=this.safeNumber(i,t)}return{info:t,withdraw:s,deposit:s}}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privatePostSummary(e);return{info:t,maker:this.safeNumber(t,"maker_fee"),taker:this.safeNumber(t,"taker_fee")}}async fetchMarkets(e={}){const t=await this.publicGetSymbols(),i=await this.publicGetSymbolsDetails(),s=[];for(let e=0;e<i.length;e++){const r=i[e];let a,n,o=this.safeString(r,"pair");if(!this.inArray(o,t))continue;if(o=o.toUpperCase(),o.indexOf(":")>=0){const e=o.split(":");a=e[0],n=e[1]}else a=o.slice(0,3),n=o.slice(3,6);const h=this.safeCurrencyCode(a),c=this.safeCurrencyCode(n),d=h+"/"+c,u={price:this.safeInteger(r,"price_precision"),amount:8},l=this.safeString(r,"minimum_order_size"),f=this.safeString(r,"maximum_order_size"),p={amount:{min:this.parseNumber(l),max:this.parseNumber(f)},price:{min:this.parseNumber("1e-8"),max:void 0},cost:{min:void 0,max:void 0}},m=this.safeValue(r,"margin");s.push({id:o,symbol:d,base:h,quote:c,baseId:a,quoteId:n,active:!0,type:"spot",spot:!0,margin:m,precision:u,limits:p,info:r})}return s}amountToPrecision(e,t){return this.decimalToPrecision(t,b,this.markets[e].precision.amount,y)}priceToPrecision(e,t){return t=this.decimalToPrecision(t,v,this.markets[e].precision.price,this.precisionMode),this.decimalToPrecision(t,b,8,y)}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeValue(this.options,"accountsByType",{}),i=this.safeString(e,"type","exchange"),s=this.safeString(t,i);if(void 0===s){const e=Object.keys(t);throw new c(this.id+" fetchBalance type parameter must be one of "+e.join(", "))}const r=this.omit(e,"type"),a=await this.privatePostBalances(r),n={info:a},o="derivatives"===i;for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t,"type"),r=this.safeStringLower(t,"currency",""),h=r.length-2,c="f0"===r.slice(h),d=!o||c;if(s===i&&d){const e=this.safeCurrencyCode(r);if(!(e in n)){const i=this.account();i.free=this.safeString(t,"available"),i.total=this.safeString(t,"amount"),n[e]=i}}}return this.parseBalance(n)}async transfer(e,t,i,s,r={}){await this.loadMarkets();const a=this.safeValue(this.options,"accountsByType",{}),n=this.safeString(a,i);if(void 0===n){const e=Object.keys(a);throw new c(this.id+" transfer fromAccount must be one of "+e.join(", "))}const o=this.safeString(a,s);if(void 0===o){const e=Object.keys(a);throw new c(this.id+" transfer toAccount must be one of "+e.join(", "))}const h=this.currency(e),d=this.convertDerivativesId(h.id,i),u=this.convertDerivativesId(h.id,s),l=this.currencyToPrecision(e,t),f={amount:l,currency:d,currency_to:u,walletfrom:n,walletto:o},p=await this.privatePostTransfer(this.extend(f,r)),m=this.safeValue(p,0),g=this.safeString(m,"status"),y=this.safeString(m,"message");if(void 0===y)throw new c(this.id+" transfer failed");if("error"===g)throw this.throwExactlyMatchedException(this.exceptions.exact,y,this.id+" "+y),new c(this.id+" "+y);return{info:p,status:g,amount:l,code:e,fromAccount:i,toAccount:s,timestamp:void 0,datetime:void 0}}convertDerivativesId(e,t){const i=e.length-2,s="F0"===e.slice(i);return"derivatives"!==t&&"trading"!==t&&"margin"!==t&&s?e=e.slice(0,i):"derivatives"!==t||s||(e+="F0"),e}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.limit_bids=t,s.limit_asks=t);const r=await this.publicGetBookSymbol(this.extend(s,i));return this.parseOrderBook(r,e,void 0,"bids","asks","price","amount")}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]);s[t.symbol]=t}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetPubtickerSymbol(this.extend(s,t));return this.parseTicker(r,i)}parseTicker(e,t){let i,s=this.safeNumber(e,"timestamp");if(void 0!==s&&(s*=1e3),s=parseInt(s),void 0!==t)i=t.symbol;else if("pair"in e){const s=this.safeString(e,"pair");if(void 0!==s)if(s in this.markets_by_id)i=(t=this.markets_by_id[s]).symbol;else{const e=s.slice(0,3),t=s.slice(3,6);i=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}}const r=this.safeNumber(e,"last_price");return this.safeTicker({symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeNumber(e,"mid"),baseVolume:this.safeNumber(e,"volume"),quoteVolume:void 0,info:e},t)}parseTrade(e,t){const i=this.safeString(e,"tid"),s=this.safeTimestamp(e,"timestamp"),r=this.safeStringLower(e,"type"),a=this.safeString(e,"order_id"),n=this.safeString(e,"price"),o=this.safeString(e,"amount");let h;if("fee_amount"in e){const t=w.stringNeg(this.safeString(e,"fee_amount")),i=this.safeString(e,"fee_currency");h={cost:t,currency:this.safeCurrencyCode(i)}}return this.safeTrade({id:i,info:e,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,type:void 0,order:a,side:r,takerOrMaker:void 0,price:n,amount:o,cost:void 0,fee:h},t)}async fetchTrades(e,t,i=50,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id,limit_trades:i};void 0!==t&&(a.timestamp=parseInt(t/1e3));const n=await this.publicGetTradesSymbol(this.extend(a,s));return this.parseTrades(n,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new h(this.id+" fetchMyTrades() requires a `symbol` argument");await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.limit_trades=i),void 0!==t&&(a.timestamp=parseInt(t/1e3));const n=await this.privatePostMytrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.safeValue(a,"postOnly",!1);a=this.omit(a,["postOnly"]);const o={symbol:this.marketId(e),side:i,amount:this.amountToPrecision(e,s),type:this.safeString(this.options.orderTypes,t,t),ocoorder:!1,buy_price_oco:0,sell_price_oco:0};o.price="market"===t?this.nonce().toString():this.priceToPrecision(e,r),n&&(o.is_postonly=!0);const h=await this.privatePostOrderNew(this.extend(o,a));return this.parseOrder(h)}async editOrder(e,t,i,s,r,a,n={}){await this.loadMarkets();const o={order_id:parseInt(e)};void 0!==a&&(o.price=this.priceToPrecision(t,a)),void 0!==r&&(o.amount=this.numberToString(r)),void 0!==t&&(o.symbol=this.marketId(t)),void 0!==s&&(o.side=s),void 0!==i&&(o.type=this.safeString(this.options.orderTypes,i,i));const h=await this.privatePostOrderCancelReplace(this.extend(o,n));return this.parseOrder(h)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)};return await this.privatePostOrderCancel(this.extend(s,i))}async cancelAllOrders(e,t={}){return await this.privatePostOrderCancelAll(t)}parseOrder(e,t){const i=this.safeString(e,"side"),s=this.safeValue(e,"is_live"),r=this.safeValue(e,"is_cancelled");let a;a=s?"open":r?"canceled":"closed";const n=this.safeStringUpper(e,"symbol"),o=this.safeSymbol(n,t);let h=this.safeString(e,"type","");h.indexOf("exchange ")>=0&&(h=e.type.split(" ")[1]);const c=this.safeTimestamp(e,"timestamp"),d=this.safeString(e,"id");return this.safeOrder2({info:e,id:d,clientOrderId:void 0,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:o,type:h,timeInForce:void 0,postOnly:void 0,side:i,price:this.safeString(e,"price"),stopPrice:void 0,average:this.safeString(e,"avg_execution_price"),amount:this.safeString(e,"original_amount"),remaining:this.safeString(e,"remaining_amount"),filled:this.safeString(e,"executed_amount"),status:a,fee:void 0,cost:void 0,trades:void 0},t)}async fetchOpenOrders(e,t,i,s={}){if(await this.loadMarkets(),void 0!==e&&!(e in this.markets))throw new c(this.id+" has no symbol "+e);const r=await this.privatePostOrders(s);let a=this.parseOrders(r,void 0,t,i);return void 0!==e&&(a=this.filterBy(a,"symbol",e)),a}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==i&&(r.limit=i);const a=await this.privatePostOrdersHist(this.extend(r,s));let n=this.parseOrders(a,void 0,t,i);return void 0!==e&&(n=this.filterBy(n,"symbol",e)),n=this.filterByArray(n,"status",["closed","canceled"],!1),n}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)},r=await this.privatePostOrderStatus(this.extend(s,i));return this.parseOrder(r)}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,2),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets(),void 0===s&&(s=100);const a=this.market(e),n={symbol:"t"+a.id,timeframe:this.timeframes[t],sort:1,limit:s};void 0!==i&&(n.start=i);const o=await this.v2GetCandlesTradeTimeframeSymbolHist(this.extend(n,r));return this.parseOHLCVs(o,a,t,i,s)}getCurrencyName(e){if(e in this.options.currencyNames)return this.options.currencyNames[e];throw new r(this.id+" "+e+" not supported for withdrawal")}async createDepositAddress(e,t={}){return await this.loadMarkets(),await this.fetchDepositAddress(e,this.extend({renew:1},t))}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={method:this.getCurrencyName(e),wallet_name:"exchange",renew:0},s=await this.privatePostDepositNew(this.extend(i,t));let r,a=this.safeValue(s,"address");return"address_pool"in s&&(r=a,a=s.address_pool),this.checkAddress(a),{currency:e,address:a,tag:r,network:void 0,info:s}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();let r=this.safeString(s,"currency");const a=this.omit(s,"currency");let n;if(void 0===r){if(void 0===e)throw new h(this.id+" fetchTransactions() requires a currency `code` argument or a `currency` parameter");n=this.currency(e),r=n.id}a.currency=r,void 0!==t&&(a.since=parseInt(t/1e3));const o=await this.privatePostHistoryMovements(this.extend(a,s));return this.parseTransactions(o,n,t,i)}parseTransaction(e,t){const i=this.safeTimestamp(e,"timestamp_created"),s=this.safeTimestamp(e,"timestamp"),r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r,t),n=this.safeStringLower(e,"type"),o=this.parseTransactionStatus(this.safeString(e,"status"));let h=this.safeNumber(e,"fee");return void 0!==h&&(h=Math.abs(h)),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"txid"),timestamp:i,datetime:this.iso8601(i),address:this.safeString(e,"address"),tag:void 0,type:n,amount:this.safeNumber(e,"amount"),currency:a,status:o,updated:s,fee:{currency:a,cost:h,rate:void 0}}}parseTransactionStatus(e){return this.safeString({SENDING:"pending",CANCELED:"canceled",ZEROCONFIRMED:"failed",COMPLETED:"ok"},e,e)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a={withdraw_type:this.getCurrencyName(e),walletselected:"exchange",amount:this.numberToString(t),address:i};void 0!==s&&(a.payment_id=s);const n=(await this.privatePostWithdraw(this.extend(a,r)))[0],o=this.safeString(n,"withdrawal_id"),h=this.safeString(n,"message"),d=this.findBroadlyMatchedKey(this.exceptions.broad,h);if(0===o){if(void 0!==d)throw new(0,this.exceptions.broad[d])(this.id+" "+h);throw new c(this.id+" withdraw returned an id of zero: "+this.json(n))}return{info:n,id:o}}async fetchPositions(e,t={}){return await this.loadMarkets(),await this.privatePostPositions(t)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n="/"+this.implodeParams(e,s);n="v2"===t?"/"+t+n:"/"+this.version+n;let o=this.omit(s,this.extractParams(e)),h=this.urls.api[t]+n;if(("public"===t||e.indexOf("/hist")>=0)&&Object.keys(o).length){const e="?"+this.urlencode(o);h+=e,n+=e}if("private"===t){this.checkRequiredCredentials();const e=this.nonce();o=this.extend({nonce:e.toString(),request:n},o),a=this.json(o);const t=this.stringToBase64(a),i=this.encode(this.secret),s=this.hmac(t,i,"sha384");r={"X-BFX-APIKEY":this.apiKey,"X-BFX-PAYLOAD":this.decode(t),"X-BFX-SIGNATURE":s,"Content-Type":"application/json"}}return{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,n,o,h){if(void 0!==n&&e>=400&&"{"===a[0]){const e=this.id+" "+a,t=this.safeString2(n,"message","error");throw this.throwExactlyMatchedException(this.exceptions.exact,t,e),this.throwBroadlyMatchedException(this.exceptions.broad,t,e),new c(e)}}}},5328:(e,t,i)=>{"use strict";const s=i(17965),{ExchangeError:r,InvalidAddress:a,ArgumentsRequired:n,InsufficientFunds:o,AuthenticationError:h,OrderNotFound:c,InvalidOrder:d,BadRequest:u,InvalidNonce:l,BadSymbol:f,OnMaintenance:p,NotSupported:m,PermissionDenied:g,ExchangeNotAvailable:y}=i(73449),b=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitfinex2",name:"Bitfinex",countries:["VG"],version:"v2",certified:!1,pro:!1,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createDepositAddress:!0,createLimitOrder:!0,createMarketOrder:!0,createOrder:!0,deposit:void 0,editOrder:void 0,fetchBalance:!0,fetchClosedOrder:!0,fetchClosedOrders:void 0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchFundingFees:void 0,fetchIndexOHLCV:!1,fetchMarkOHLCV:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrder:void 0,fetchOrderTrades:!0,fetchStatus:!0,fetchTickers:!0,fetchTime:!1,fetchTradingFee:void 0,fetchTradingFees:void 0,fetchTransactions:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","4h":"4h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},rateLimit:1500,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:{v1:"https://api.bitfinex.com",public:"https://api-pub.bitfinex.com",private:"https://api.bitfinex.com"},www:"https://www.bitfinex.com",doc:["https://docs.bitfinex.com/v2/docs/","https://github.com/bitfinexcom/bitfinex-api-node"],fees:"https://www.bitfinex.com/fees"},api:{v1:{get:["symbols","symbols_details"]},public:{get:["conf/{config}","conf/pub:{action}:{object}","conf/pub:{action}:{object}:{detail}","conf/pub:map:{object}","conf/pub:map:{object}:{detail}","conf/pub:map:currency:{detail}","conf/pub:map:currency:sym","conf/pub:map:currency:label","conf/pub:map:currency:unit","conf/pub:map:currency:undl","conf/pub:map:currency:pool","conf/pub:map:currency:explorer","conf/pub:map:currency:tx:fee","conf/pub:map:tx:method","conf/pub:list:{object}","conf/pub:list:{object}:{detail}","conf/pub:list:currency","conf/pub:list:pair:exchange","conf/pub:list:pair:margin","conf/pub:list:pair:futures","conf/pub:list:competitions","conf/pub:info:{object}","conf/pub:info:{object}:{detail}","conf/pub:info:pair","conf/pub:info:tx:status","conf/pub:fees","platform/status","tickers","ticker/{symbol}","trades/{symbol}/hist","book/{symbol}/{precision}","book/{symbol}/P0","book/{symbol}/P1","book/{symbol}/P2","book/{symbol}/P3","book/{symbol}/R0","stats1/{key}:{size}:{symbol}:{side}/{section}","stats1/{key}:{size}:{symbol}:{side}/last","stats1/{key}:{size}:{symbol}:{side}/hist","stats1/{key}:{size}:{symbol}/{section}","stats1/{key}:{size}:{symbol}/last","stats1/{key}:{size}:{symbol}/hist","stats1/{key}:{size}:{symbol}:long/last","stats1/{key}:{size}:{symbol}:long/hist","stats1/{key}:{size}:{symbol}:short/last","stats1/{key}:{size}:{symbol}:short/hist","candles/trade:{timeframe}:{symbol}:{period}/{section}","candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist","status/{type}","status/deriv","liquidations/hist","rankings/{key}:{timeframe}:{symbol}/{section}","rankings/{key}:{timeframe}:{symbol}/hist","pulse/hist","pulse/profile/{nickname}","funding/stats/{symbol}/hist"],post:["calc/trade/avg","calc/fx"]},private:{post:["auth/r/wallets","auth/r/wallets/hist","auth/r/orders","auth/r/orders/{symbol}","auth/w/order/submit","auth/w/order/update","auth/w/order/cancel","auth/w/order/multi","auth/w/order/cancel/multi","auth/r/orders/{symbol}/hist","auth/r/orders/hist","auth/r/order/{symbol}:{id}/trades","auth/r/trades/{symbol}/hist","auth/r/trades/hist","auth/r/ledgers/{currency}/hist","auth/r/ledgers/hist","auth/r/info/margin/{key}","auth/r/info/margin/base","auth/r/info/margin/sym_all","auth/r/positions","auth/w/position/claim","auth/r/positions/hist","auth/r/positions/audit","auth/r/positions/snap","auth/w/deriv/collateral/set","auth/w/deriv/collateral/limits","auth/r/funding/offers","auth/r/funding/offers/{symbol}","auth/w/funding/offer/submit","auth/w/funding/offer/cancel","auth/w/funding/offer/cancel/all","auth/w/funding/close","auth/w/funding/auto","auth/w/funding/keep","auth/r/funding/offers/{symbol}/hist","auth/r/funding/offers/hist","auth/r/funding/loans","auth/r/funding/loans/hist","auth/r/funding/loans/{symbol}","auth/r/funding/loans/{symbol}/hist","auth/r/funding/credits","auth/r/funding/credits/hist","auth/r/funding/credits/{symbol}","auth/r/funding/credits/{symbol}/hist","auth/r/funding/trades/{symbol}/hist","auth/r/funding/trades/hist","auth/r/info/funding/{key}","auth/r/info/user","auth/r/logins/hist","auth/w/transfer","auth/w/deposit/address","auth/w/deposit/invoice","auth/w/withdraw","auth/r/movements/{currency}/hist","auth/r/movements/hist","auth/r/alerts","auth/w/alert/set","auth/w/alert/price:{symbol}:{price}/del","auth/w/alert/{type}:{symbol}:{price}/del","auth/calc/order/avail","auth/w/settings/set","auth/r/settings","auth/w/settings/del"]}},fees:{trading:{feeSide:"get",percentage:!0,tierBased:!0,maker:this.parseNumber("0.001"),taker:this.parseNumber("0.002"),tiers:{taker:[[this.parseNumber("0"),this.parseNumber("0.002")],[this.parseNumber("500000"),this.parseNumber("0.002")],[this.parseNumber("1000000"),this.parseNumber("0.002")],[this.parseNumber("2500000"),this.parseNumber("0.002")],[this.parseNumber("5000000"),this.parseNumber("0.002")],[this.parseNumber("7500000"),this.parseNumber("0.002")],[this.parseNumber("10000000"),this.parseNumber("0.0018")],[this.parseNumber("15000000"),this.parseNumber("0.0016")],[this.parseNumber("20000000"),this.parseNumber("0.0014")],[this.parseNumber("25000000"),this.parseNumber("0.0012")],[this.parseNumber("30000000"),this.parseNumber("0.001")]],maker:[[this.parseNumber("0"),this.parseNumber("0.001")],[this.parseNumber("500000"),this.parseNumber("0.0008")],[this.parseNumber("1000000"),this.parseNumber("0.0006")],[this.parseNumber("2500000"),this.parseNumber("0.0004")],[this.parseNumber("5000000"),this.parseNumber("0.0002")],[this.parseNumber("7500000"),this.parseNumber("0")],[this.parseNumber("10000000"),this.parseNumber("0")],[this.parseNumber("15000000"),this.parseNumber("0")],[this.parseNumber("20000000"),this.parseNumber("0")],[this.parseNumber("25000000"),this.parseNumber("0")],[this.parseNumber("30000000"),this.parseNumber("0")]]}},funding:{withdraw:{}}},options:{precision:"R0",exchangeTypes:{"EXCHANGE MARKET":"market","EXCHANGE LIMIT":"limit"},orderTypes:{market:"EXCHANGE MARKET",limit:"EXCHANGE LIMIT"},fiat:{USD:"USD",EUR:"EUR",JPY:"JPY",GBP:"GBP"},v2AccountsByType:{spot:"exchange",exchange:"exchange",funding:"funding",margin:"margin",derivatives:"margin"}},exceptions:{exact:{10001:g,10020:u,10100:h,10114:l,20060:p,temporarily_unavailable:y},broad:{address:a,"available balance is only":o,"not enough exchange balance":o,"Order not found":c,"symbol: invalid":f,"Invalid order":d}}})}isFiat(e){return e in this.options.fiat}getCurrencyId(e){return"f"+e}getCurrencyName(e){if(e in this.options.currencyNames)return this.options.currencyNames[e];throw new m(this.id+" "+e+" not supported for withdrawal")}async fetchStatus(e={}){const t=await this.publicGetPlatformStatus(e),i=1===this.safeInteger(t,0)?"ok":"maintenance";return this.status=this.extend(this.status,{status:i,updated:this.milliseconds()}),this.status}async fetchMarkets(e={}){const t=await this.publicGetConfPubListPairFutures(e),i=await this.v1GetSymbolsDetails(e),s=this.safeValue(t,0,[]),r=[];for(let e=0;e<i.length;e++){const t=i[e];let a=this.safeStringUpper(t,"pair"),n=!0;this.inArray(a,s)&&(n=!1);const o=!n,h=n?"spot":"futures";let c,d;if(a.indexOf(":")>=0){const e=a.split(":");c=e[0],d=e[1]}else c=a.slice(0,3),d=a.slice(3,6);const u=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=u+"/"+l;a="t"+a,c=this.getCurrencyId(c),d=this.getCurrencyId(d);const p={price:this.safeInteger(t,"price_precision"),amount:8},m=this.safeString(t,"minimum_order_size"),g=this.safeString(t,"maximum_order_size"),y={amount:{min:this.parseNumber(m),max:this.parseNumber(g)},price:{min:this.parseNumber("1e-8"),max:void 0},cost:{min:void 0,max:void 0}},b=this.safeValue(t,"margin");r.push({id:a,symbol:f,base:u,quote:l,baseId:c,quoteId:d,active:!0,precision:p,limits:y,info:t,type:h,swap:!1,spot:n,margin:b,futures:o})}return r}async fetchCurrencies(e={}){const t={config:["pub:list:currency","pub:map:currency:sym","pub:map:currency:label","pub:map:currency:unit","pub:map:currency:undl","pub:map:currency:pool","pub:map:currency:explorer","pub:map:currency:tx:fee"].join(",")},i=await this.publicGetConfConfig(this.extend(t,e)),s={sym:this.indexBy(this.safeValue(i,1,[]),0),label:this.indexBy(this.safeValue(i,2,[]),0),unit:this.indexBy(this.safeValue(i,3,[]),0),undl:this.indexBy(this.safeValue(i,4,[]),0),pool:this.indexBy(this.safeValue(i,5,[]),0),explorer:this.indexBy(this.safeValue(i,6,[]),0),fees:this.indexBy(this.safeValue(i,7,[]),0)},r=this.safeValue(i,0,[]),a={};for(let e=0;e<r.length;e++){const t=r[e],i=this.safeCurrencyCode(t),n=this.safeValue(s.label,t,[]),o=this.safeString(n,1),h=this.safeValue(s.pool,t,[]),c=this.safeString(h,1),d=this.safeValue(s.fees,t,[]),u=this.safeValue(d,1,[]),l=this.safeNumber(u,1),f=this.safeValue(s.undl,t,[]),p=8,m="f"+t;a[i]={id:m,uppercaseId:t,code:i,info:[t,n,h,d,f],type:c,name:o,active:!0,fee:l,precision:p,limits:{amount:{min:1/Math.pow(10,p),max:void 0},withdraw:{min:l,max:void 0}}}}return a}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeValue(this.options,"v2AccountsByType",{}),i=this.safeString(e,"type","exchange"),s=this.safeString(t,i);if(void 0===s){const e=Object.keys(t);throw new r(this.id+" fetchBalance type parameter must be one of "+e.join(", "))}const a="derivatives"===i,n=this.omit(e,"type"),o=await this.privatePostAuthRWallets(n),h={info:o};for(let e=0;e<o.length;e++){const t=o[e],i=this.safeString(t,0),r=this.safeStringLower(t,1,""),n=r.length-2,c="f0"===r.slice(n),d=!a||c;if(s===i&&d){const e=this.safeCurrencyCode(r),i=this.account();i.total=this.safeString(t,2),i.free=this.safeString(t,4),h[e]=i}}return this.parseBalance(h)}async transfer(e,t,i,s,a={}){await this.loadMarkets();const n=this.safeValue(this.options,"v2AccountsByType",{}),o=this.safeString(n,i);if(void 0===o){const e=Object.keys(n);throw new r(this.id+" transfer fromAccount must be one of "+e.join(", "))}const h=this.safeString(n,s);if(void 0===h){const e=Object.keys(n);throw new r(this.id+" transfer toAccount must be one of "+e.join(", "))}const c=this.currency(e),d=this.convertDerivativesId(c,i),u=this.convertDerivativesId(c,s),l=this.currencyToPrecision(e,t),f={amount:l,currency:d,currency_to:u,from:o,to:h},p=await this.privatePostAuthWTransfer(this.extend(f,a)),m=this.safeInteger(p,0);if("error"===this.safeString(p,0)){const e=this.safeString(p,2,"");throw this.throwExactlyMatchedException(this.exceptions.exact,e,this.id+" "+e),new r(this.id+" "+e)}const g=this.safeValue(p,4),y=this.safeString(g,1),b=this.safeString(g,2),v=this.safeCurrencyCode(this.safeString(g,5)),w="SUCCESS"===this.safeString(p,6)?"ok":void 0;return{info:p,timestamp:m,datetime:this.iso8601(m),status:w,amount:l,code:v,fromAccount:y,toAccount:b}}convertDerivativesId(e,t){const i=this.safeValue(e,"info"),s=this.safeString(i,0),r=this.safeValue(i,4,[]);let a;if("derivatives"===t){a=this.safeString(r,0,s);const e=a.length-2;"F0"===a.slice(e)||(a+="F0")}else a="margin"!==t?this.safeString(r,1,s):s;return a}async fetchOrder(e,t,i={}){throw new m(this.id+" fetchOrder is not implemented yet")}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.safeValue(this.options,"precision","R0"),r={symbol:this.marketId(e),precision:s};void 0!==t&&(r.len=t);const a=this.extend(r,i),n=await this.publicGetBookSymbolPrecision(a),o=this.milliseconds(),h={symbol:e,bids:[],asks:[],timestamp:o,datetime:this.iso8601(o),nonce:void 0},c="R0"===a.precision?1:0;for(let e=0;e<n.length;e++){const t=n[e],i=this.safeNumber(t,c),s=this.safeNumber(t,2),r=Math.abs(s);h[s>0?"bids":"asks"].push([i,r])}return h.bids=this.sortBy(h.bids,0,!0),h.asks=this.sortBy(h.asks,0),h}parseTicker(e,t){const i=this.milliseconds(),s=this.safeSymbol(void 0,t),r=e.length,a=this.safeNumber(e,r-4);return this.safeTicker({symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,r-2),low:this.safeNumber(e,r-1),bid:this.safeNumber(e,r-10),bidVolume:void 0,ask:this.safeNumber(e,r-8),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:this.safeNumber(e,r-6),percentage:100*this.safeNumber(e,r-5),average:void 0,baseVolume:this.safeNumber(e,r-3),quoteVolume:void 0,info:e},t)}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.symbols=t.join(",")}else i.symbols="ALL";const s=await this.publicGetTickers(this.extend(i,t)),r={};for(let e=0;e<s.length;e++){const t=s[e],i=t[0];if(i in this.markets_by_id){const e=this.markets_by_id[i];r[e.symbol]=this.parseTicker(t,e)}}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetTickerSymbol(this.extend(s,t));return this.parseTicker(r,i)}parseSymbol(e){if(void 0===e)return e;let t,i;if((e=e.replace("t","")).indexOf(":")>=0){const s=e.split(":");t=s[0],i=s[1]}else t=e.slice(0,3),i=e.slice(3,6);return this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}parseTrade(e,t){const i=e.length>5,s=this.safeString(e,0),r=i?4:2;let a,n=this.safeString(e,r);const o=i?5:3,h=this.safeString(e,o);"-"===n[0]?(a="sell",n=n.slice(1)):a="buy";const c=this.parseNumber(n),d=this.parseNumber(h),u=this.parseNumber(b.stringMul(h,n));let l,f,p,m,g;const y=i?2:1,v=this.safeInteger(e,y);if(i){const i=e[1];g=i in this.markets_by_id?(t=this.markets_by_id[i]).symbol:this.parseSymbol(i),l=this.safeString(e,3),f=1===this.safeInteger(e,8)?"maker":"taker";let s=this.safeString(e,9);s=b.stringNeg(s);const r=this.parseNumber(s),a=this.safeString(e,10);m={cost:r,currency:this.safeCurrencyCode(a)};const n=e[6];p=this.safeString(this.options.exchangeTypes,n)}return void 0===g&&void 0!==t&&(g=t.symbol),{id:s,timestamp:v,datetime:this.iso8601(v),symbol:g,order:l,side:a,type:p,takerOrMaker:f,price:d,amount:c,cost:u,fee:m,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e);let a="-1";const n={symbol:r.id};void 0!==t&&(n.start=t,a="1"),void 0!==i&&(n.limit=i),n.sort=a;const o=await this.publicGetTradesSymbolHist(this.extend(n,s)),h=this.sortBy(o,1);return this.parseTrades(h,r,void 0,i)}async fetchOHLCV(e,t="1m",i,s=100,r={}){await this.loadMarkets();const a=this.market(e);if(void 0===s&&(s=100),void 0===i){const e=this.parseTimeframe(t);i=this.milliseconds()-e*s*1e3}const n={symbol:a.id,timeframe:this.timeframes[t],sort:1,start:i,limit:s},o=await this.publicGetCandlesTradeTimeframeSymbolHist(this.extend(n,r));return this.parseOHLCVs(o,a,t,i,s)}parseOrderStatus(e){if(void 0===e)return e;const t=e.split(" "),i=this.safeString(t,0);return this.safeString({ACTIVE:"open",PARTIALLY:"open",EXECUTED:"closed",CANCELED:"canceled",INSUFFICIENT:"canceled",POSTONLY:"canceled",RSN_DUST:"rejected",RSN_PAUSE:"rejected"},i,e)}parseOrder(e,t){const i=this.safeString(e,0);let s;const r=this.safeString(e,3);r in this.markets_by_id?t=this.markets_by_id[r]:s=this.parseSymbol(r),void 0===s&&void 0!==t&&(s=t.symbol);const a=this.safeInteger(e,5),n=b.stringAbs(this.safeString(e,6)),o=this.safeString(e,7),h=b.stringAbs(o),c=b.stringLt(o,"0")?"sell":"buy",d=this.safeString(e,8),u=this.safeString(this.safeValue(this.options,"exchangeTypes"),d);let l;const f=this.safeString(e,13);if(void 0!==f){const e=f.split(" @ ");l=this.parseOrderStatus(this.safeString(e,0))}const p=this.safeString(e,16),m=this.safeString(e,17),g=this.safeString(e,2);return this.safeOrder2({info:e,id:i,clientOrderId:g,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:s,type:u,timeInForce:void 0,postOnly:void 0,side:c,price:p,stopPrice:void 0,amount:h,cost:void 0,average:m,filled:void 0,remaining:n,status:l,fee:void 0,trades:void 0},t)}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();const h=this.market(e),c=this.safeValue(this.options,"orderTypes",{}),d=this.safeStringUpper(c,t,t),u=this.safeValue(o,"postOnly",!1);o=this.omit(o,["postOnly"]),s="sell"===i?-s:s;const l={type:d,symbol:h.id,amount:this.numberToString(s)};if(u&&(l.flags=4096),"LIMIT"===d||"EXCHANGE LIMIT"===d)l.price=this.numberToString(a);else if("STOP"===d||"EXCHANGE STOP"===d){const e=this.safeNumber(o,"stopPrice",a);l.price=this.numberToString(e)}else if("STOP LIMIT"===d||"EXCHANGE STOP LIMIT"===d){const e=this.safeNumber(o,"price_aux_limit");let t=this.safeNumber(o,"stopPrice");if(void 0===e){if(void 0===t)throw new n(this.id+" createOrder() requires a stopPrice parameter or a price_aux_limit parameter for a "+d+" order");l.price_aux_limit=this.numberToString(a)}else l.price_aux_limit=this.numberToString(e),void 0===t&&(t=a);l.price=this.numberToString(t)}else if("TRAILING STOP"===d||"EXCHANGE TRAILING STOP"===d){const e=this.safeNumber(o,"price_trailing");l.price_trailing=this.numberToString(e);const t=this.safeNumber(o,"stopPrice",a);l.price=this.numberToString(t)}else"FOK"!==d&&"EXCHANGE FOK"!==d&&"IOC"!==d&&"EXCHANGE IOC"!==d||(l.price=this.numberToString(a));o=this.omit(o,["stopPrice","price_aux_limit","price_trailing"]);const f=this.safeValue2(o,"cid","clientOrderId");void 0!==f&&(l.cid=f,o=this.omit(o,["cid","clientOrderId"]));const p=await this.privatePostAuthWOrderSubmit(this.extend(l,o));if("SUCCESS"!==this.safeString(p,6)){const e=p[5],t=p[7];throw new r(this.id+" "+p[6]+": "+t+" (#"+e+")")}const m=this.safeValue(p,4,[]),g=this.safeValue(m,0);return this.parseOrder(g,h)}async cancelAllOrders(e,t={}){const i=await this.privatePostAuthWOrderCancelMulti(this.extend({all:1},t)),s=this.safeValue(i,4,[]);return this.parseOrders(s)}async cancelOrder(e,t,i={}){const s=this.safeValue2(i,"cid","clientOrderId");let r;if(void 0!==s){const e=this.safeValue(i,"cidDate");if(void 0===e)throw new d(this.id+" canceling an order by clientOrderId ('cid') requires both 'cid' and 'cid_date' ('YYYY-MM-DD')");r={cid:s,cid_date:e},i=this.omit(i,["cid","clientOrderId"])}else r={id:parseInt(e)};const a=await this.privatePostAuthWOrderCancel(this.extend(r,i)),n=this.safeValue(a,4);return this.parseOrder(n)}async fetchOpenOrder(e,t,i={}){const s={id:[parseInt(e)]},r=await this.fetchOpenOrders(t,void 0,void 0,this.extend(s,i)),a=this.safeValue(r,0);if(void 0===a)throw new c(this.id+" order "+e+" not found");return a}async fetchClosedOrder(e,t,i={}){const s={id:[parseInt(e)]},r=await this.fetchClosedOrders(t,void 0,void 0,this.extend(s,i)),a=this.safeValue(r,0);if(void 0===a)throw new c(this.id+" order "+e+" not found");return a}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a,n;return void 0===e?n=await this.privatePostAuthROrders(this.extend(r,s)):(a=this.market(e),r.symbol=a.id,n=await this.privatePostAuthROrdersSymbol(this.extend(r,s))),this.parseOrders(n,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a,n;return void 0===e?n=await this.privatePostAuthROrdersHist(this.extend(r,s)):(a=this.market(e),r.symbol=a.id,n=await this.privatePostAuthROrdersSymbolHist(this.extend(r,s))),void 0!==t&&(r.start=t),void 0!==i&&(r.limit=i),this.parseOrders(n,a,t,i)}async fetchOrderTrades(e,t,i,s,r={}){if(void 0===t)throw new n(this.id+" fetchOrderTrades() requires a symbol argument");await this.loadMarkets();const a=this.market(t),o={id:parseInt(e),symbol:a.id},h=await this.privatePostAuthROrderSymbolIdTrades(this.extend(o,r));return this.parseTrades(h,a,i,s)}async fetchMyTrades(e,t,i,s={}){let r;await this.loadMarkets();const a={end:this.milliseconds()};void 0!==t&&(a.start=t),void 0!==i&&(a.limit=i);let n="privatePostAuthRTradesHist";void 0!==e&&(r=this.market(e),a.symbol=r.id,n="privatePostAuthRTradesSymbolHist");const o=await this[n](this.extend(a,s));return this.parseTrades(o,r,t,i)}async createDepositAddress(e,t={}){return await this.loadMarkets(),await this.fetchDepositAddress(e,this.extend({op_renew:1},t))}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={method:this.getCurrencyName(e),wallet:"exchange",op_renew:0},s=await this.privatePostAuthWDepositAddress(this.extend(i,t)),r=this.safeValue(s,4,[]),a=this.safeString(r,5),n=void 0===a?this.safeString(r,4):a,o=void 0===a?void 0:this.safeString(r,4);return this.checkAddress(n),{currency:e,address:n,tag:o,network:void 0,info:s}}parseTransactionStatus(e){return this.safeString({SUCCESS:"ok",ERROR:"failed",FAILURE:"failed",CANCELED:"canceled"},e,e)}parseTransaction(e,t){let i,s,r,a,n,o,h,c,d,u,l;if(e.length<9){const s=this.safeValue(e,4,[]);i=this.safeInteger(e,0),void 0!==t&&(r=t.code),d=this.safeNumber(s,8),void 0!==d&&(d=-d),a=this.safeNumber(s,5),n=this.safeValue(s,0),o="ok",0===n&&(n=void 0,o="failed"),h=this.safeString(s,3),c="withdrawal"}else n=this.safeString(e,0),i=this.safeInteger(e,5),s=this.safeInteger(e,6),o=this.parseTransactionStatus(this.safeString(e,9)),a=this.safeNumber(e,12),void 0!==a&&(c=a<0?"withdrawal":"deposit"),d=this.safeNumber(e,13),void 0!==d&&(d=-d),l=this.safeString(e,16),u=this.safeString(e,20);return{info:e,id:n,txid:u,timestamp:i,datetime:this.iso8601(i),addressFrom:void 0,address:l,addressTo:l,tagFrom:void 0,tag:h,tagTo:h,type:c,amount:a,currency:r,status:o,updated:s,fee:{currency:r,cost:d,rate:void 0}}}async fetchTransactions(e,t,i,s={}){let r;await this.loadMarkets();const a={};let n="privatePostAuthRMovementsHist";void 0!==e&&(r=this.currency(e),a.currency=r.uppercaseId,n="privatePostAuthRMovementsCurrencyHist"),void 0!==t&&(a.start=t),void 0!==i&&(a.limit=i);const o=await this[n](this.extend(a,s));return this.parseTransactions(o,r,t,i)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),n={method:this.getCurrencyName(e),wallet:"exchange",amount:this.numberToString(t),address:i};void 0!==s&&(n.payment_id=s);const o=await this.privatePostAuthWWithdraw(this.extend(n,r)),h=this.safeString(o,7);"success"!==h&&this.throwBroadlyMatchedException(this.exceptions.broad,h,h);const c=this.parseTransaction(o,a);return this.extend(c,{address:i})}async fetchPositions(e,t={}){return await this.loadMarkets(),await this.privatePostPositions(t)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n="/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));n="v1"===t?t+n:this.version+n;let h=this.urls.api[t]+"/"+n;if("public"===t&&Object.keys(o).length&&(h+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t="/api/"+n+e+(a=this.json(o)),i=this.hmac(this.encode(t),this.encode(this.secret),"sha384");r={"bfx-nonce":e,"bfx-apikey":this.apiKey,"bfx-signature":i,"Content-Type":"application/json"}}return{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o){if(!Array.isArray(o)){const e=this.safeString2(o,"message","error"),t=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new r(this.id+" "+n)}}else if(""===o)throw new r(this.id+" returned empty response");if(500===e){const e=this.numberToString(o[1]),t=o[2],i=this.id+" "+t;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new r(this.id+" "+t+" (#"+e+")")}return o}}},85421:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,OrderNotFound:n}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitflyer",name:"bitFlyer",countries:["JP"],version:"v1",rateLimit:1e3,hostname:"bitflyer.com",has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:"emulated",fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:"emulated",fetchOrder:"emulated",fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28051642-56154182-660e-11e7-9b0d-6042d1e6edd8.jpg",api:"https://api.{hostname}",www:"https://bitflyer.com",doc:"https://lightning.bitflyer.com/docs?lang=en"},api:{public:{get:["getmarkets/usa","getmarkets/eu","getmarkets","getboard","getticker","getexecutions","gethealth","getboardstate","getchats"]},private:{get:["getpermissions","getbalance","getbalancehistory","getcollateral","getcollateralhistory","getcollateralaccounts","getaddresses","getcoinins","getcoinouts","getbankaccounts","getdeposits","getwithdrawals","getchildorders","getparentorders","getparentorder","getexecutions","getpositions","gettradingcommission"],post:["sendcoin","withdraw","sendchildorder","cancelchildorder","sendparentorder","cancelparentorder","cancelallchildorders"]}},fees:{trading:{maker:this.parseNumber("0.002"),taker:this.parseNumber("0.002")}}})}async fetchMarkets(e={}){const t=await this.publicGetGetmarkets(e),i=await this.publicGetGetmarketsUsa(e),s=await this.publicGetGetmarketsEu(e);let r=this.arrayConcat(t,i);r=this.arrayConcat(r,s);const a=[];for(let e=0;e<r.length;e++){const t=r[e],i=this.safeString(t,"product_code"),s=i.split("_");let n,o,h,c;const d=s.length;1===d?(n=i.slice(0,3),o=i.slice(3,6)):2===d?(n=s[0],o=s[1]):(n=s[1],o=s[2]),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o);const u=2===d?h+"/"+c:i,l=this.safeValue(this.fees,u,this.fees.trading);let f=this.safeValue(l,"maker",this.fees.trading.maker),p=this.safeValue(l,"taker",this.fees.trading.taker),m=!0,g=!1,y="spot";("alias"in t||"FX"===s[0])&&(y="future",g=!0,m=!1,f=0,p=0),a.push({id:i,symbol:u,base:h,quote:c,baseId:n,quoteId:o,maker:f,taker:p,type:y,spot:m,future:g,info:t})}return a}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetGetbalance(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"currency_code"),a=this.safeCurrencyCode(r),n=this.account();n.total=this.safeString(s,"amount"),n.free=this.safeString(s,"available"),i[a]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={product_code:this.marketId(e)},r=await this.publicGetGetboard(this.extend(s,i));return this.parseOrderBook(r,e,void 0,"bids","asks","price","size")}parseTicker(e,t){const i=this.safeSymbol(void 0,t),s=this.parse8601(this.safeString(e,"timestamp")),r=this.safeNumber(e,"ltp");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:this.safeNumber(e,"best_bid"),bidVolume:void 0,ask:this.safeNumber(e,"best_ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"volume_by_product"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={product_code:i.id},r=await this.publicGetGetticker(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){let i,s=this.safeStringLower(e,"side");if(void 0!==s&&s.length<1&&(s=void 0),void 0!==s){const t=s+"_child_order_acceptance_id";t in e&&(i=e[t])}void 0===i&&(i=this.safeString(e,"child_order_acceptance_id"));const r=this.parse8601(this.safeString(e,"exec_date")),a=this.safeString(e,"price"),n=this.safeString(e,"size"),o=this.safeString(e,"id");let h;return void 0!==t&&(h=t.symbol),this.safeTrade({id:o,info:e,timestamp:r,datetime:this.iso8601(r),symbol:h,order:i,type:void 0,side:s,takerOrMaker:void 0,price:a,amount:n,cost:void 0,fee:void 0},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={product_code:r.id},n=await this.publicGetGetexecutions(this.extend(a,s));return this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n={product_code:this.marketId(e),child_order_type:t.toUpperCase(),side:i.toUpperCase(),price:r,size:s},o=await this.privatePostSendchildorder(this.extend(n,a));return{info:o,id:this.safeString(o,"child_order_acceptance_id")}}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder() requires a `symbol` argument");await this.loadMarkets();const s={product_code:this.marketId(t),child_order_acceptance_id:e};return await this.privatePostCancelchildorder(this.extend(s,i))}parseOrderStatus(e){return this.safeString({ACTIVE:"open",COMPLETED:"closed",CANCELED:"canceled",EXPIRED:"canceled",REJECTED:"canceled"},e,e)}parseOrder(e,t){const i=this.parse8601(this.safeString(e,"child_order_date")),s=this.safeString(e,"price"),r=this.safeString(e,"size"),a=this.safeString(e,"executed_size"),n=this.safeString(e,"outstanding_size"),o=this.parseOrderStatus(this.safeString(e,"child_order_state")),h=this.safeStringLower(e,"child_order_type"),c=this.safeStringLower(e,"side"),d=this.safeString(e,"product_code"),u=this.safeSymbol(d,t);let l;const f=this.safeNumber(e,"total_commission");void 0!==f&&(l={cost:f,currency:void 0,rate:void 0});const p=this.safeString(e,"child_order_acceptance_id");return this.safeOrder2({id:p,clientOrderId:void 0,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:o,symbol:u,type:h,timeInForce:void 0,postOnly:void 0,side:c,price:s,stopPrice:void 0,cost:void 0,amount:r,filled:a,remaining:n,fee:l,average:void 0,trades:void 0},t)}async fetchOrders(e,t,i=100,s={}){if(void 0===e)throw new a(this.id+" fetchOrders() requires a `symbol` argument");await this.loadMarkets();const r=this.market(e),n={product_code:r.id,count:i},o=await this.privateGetGetchildorders(this.extend(n,s));let h=this.parseOrders(o,r,t,i);return void 0!==e&&(h=this.filterBy(h,"symbol",e)),h}async fetchOpenOrders(e,t,i=100,s={}){return await this.fetchOrders(e,t,i,this.extend({child_order_state:"ACTIVE"},s))}async fetchClosedOrders(e,t,i=100,s={}){return await this.fetchOrders(e,t,i,this.extend({child_order_state:"COMPLETED"},s))}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder() requires a `symbol` argument");const s=await this.fetchOrders(t),r=this.indexBy(s,"id");if(e in r)return r[e];throw new n(this.id+" No order found with id "+e)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades() requires a `symbol` argument");await this.loadMarkets();const r=this.market(e),n={product_code:r.id};void 0!==i&&(n.count=i);const o=await this.privateGetGetexecutions(this.extend(n,s));return this.parseTrades(o,r,t,i)}async fetchPositions(e,t={}){if(void 0===e)throw new a(this.id+" fetchPositions() requires a `symbols` argument, exactly one symbol in an array");await this.loadMarkets();const i={product_code:this.marketIds(e)};return await this.privateGetpositions(this.extend(i,t))}async withdraw(e,t,i,s,a={}){if(this.checkAddress(i),await this.loadMarkets(),"JPY"!==e&&"USD"!==e&&"EUR"!==e)throw new r(this.id+" allows withdrawing JPY, USD, EUR only, "+e+" is not supported");const n={currency_code:this.currency(e).id,amount:t},o=await this.privatePostWithdraw(this.extend(n,a));return{info:o,id:this.safeString(o,"message_id")}}sign(e,t="public",i="GET",s={},r,a){let n="/"+this.version+"/";"private"===t&&(n+="me/"),n+=e,"GET"===i&&Object.keys(s).length&&(n+="?"+this.urlencode(s));const o=this.implodeHostname(this.urls.api)+n;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();let t=[e,i,n].join("");Object.keys(s).length&&"GET"!==i&&(t+=a=this.json(s)),r={"ACCESS-KEY":this.apiKey,"ACCESS-TIMESTAMP":e,"ACCESS-SIGN":this.hmac(this.encode(t),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}}},52519:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,AuthenticationError:a,OrderNotFound:n,InsufficientFunds:o,DDoSProtection:h,PermissionDenied:c,BadSymbol:d,InvalidOrder:u}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitforex",name:"Bitforex",countries:["CN"],rateLimit:500,version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchMyTrades:void 0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:void 0,fetchTicker:!0,fetchTickers:void 0,fetchTrades:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","12h":"12hour","1d":"1day","1w":"1week","1M":"1month"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87295553-1160ec00-c50e-11ea-8ea0-df79276a9646.jpg",api:"https://api.bitforex.com",www:"https://www.bitforex.com",doc:"https://github.com/githubdev2020/API_Doc_en/wiki",fees:"https://help.bitforex.com/en_us/?cat=13",referral:"https://www.bitforex.com/en/invitationRegister?inviterId=1867438"},api:{public:{get:{"api/v1/market/symbols":20,"api/v1/market/ticker":4,"api/v1/market/depth":4,"api/v1/market/trades":20,"api/v1/market/kline":20}},private:{post:{"api/v1/fund/mainAccount":1,"api/v1/fund/allAccount":30,"api/v1/trade/placeOrder":1,"api/v1/trade/placeMultiOrder":10,"api/v1/trade/cancelOrder":1,"api/v1/trade/cancelMultiOrder":20,"api/v1/trade/cancelAllOrder":20,"api/v1/trade/orderInfo":1,"api/v1/trade/multiOrderInfo":10,"api/v1/trade/orderInfos":20}}},fees:{trading:{tierBased:!1,percentage:!0,maker:this.parseNumber("0.001"),taker:this.parseNumber("0.001")},funding:{tierBased:!1,percentage:!0,deposit:{},withdraw:{}}},commonCurrencies:{BKC:"Bank Coin",CAPP:"Crypto Application Token",CREDIT:"TerraCredit",CTC:"Culture Ticket Chain",IQ:"IQ.Cash",MIR:"MIR COIN",NOIA:"METANOIA",TON:"To The Moon"},exceptions:{1003:d,1013:a,1016:a,1017:c,1019:d,3002:o,4002:u,4003:u,4004:n,10204:h}})}async fetchMarkets(e={}){const t=(await this.publicGetApiV1MarketSymbols(e)).data,i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"symbol"),a=r.split("-"),n=a[2],o=a[1],h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=h+"/"+c,u=!0,l={amount:this.safeInteger(s,"amountPrecision"),price:this.safeInteger(s,"pricePrecision")},f={amount:{min:this.safeNumber(s,"minOrderAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}};i.push({id:r,symbol:d,base:h,quote:c,baseId:n,quoteId:o,type:"spot",spot:!0,active:u,precision:l,limits:f,info:s})}return i}parseTrade(e,t){let i;void 0!==t&&(i=t.symbol);const s=this.safeInteger(e,"time"),r=this.safeString(e,"tid"),a=this.safeString(e,"price"),n=this.safeString(e,"amount"),o=this.safeInteger(e,"direction"),h=this.parseSide(o);return this.safeTrade({info:e,id:r,timestamp:s,datetime:this.iso8601(s),symbol:i,type:void 0,side:h,price:a,amount:n,cost:void 0,order:void 0,fee:void 0,takerOrMaker:void 0},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r={symbol:this.marketId(e)};void 0!==i&&(r.size=i);const a=this.market(e),n=await this.publicGetApiV1MarketTrades(this.extend(r,s));return this.parseTrades(n.data,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostApiV1FundAllAccount(e),i=t.data,s={info:t};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.used=this.safeString(t,"frozen"),n.free=this.safeString(t,"active"),n.total=this.safeString(t,"fix"),s[a]=n}return this.parseBalance(s)}async fetchTicker(e,t={}){await this.loadMarkets();const i={symbol:this.markets[e].id},s=await this.publicGetApiV1MarketTicker(this.extend(i,t)),r=s.data,a=this.safeInteger(r,"date");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeNumber(r,"high"),low:this.safeNumber(r,"low"),bid:this.safeNumber(r,"buy"),bidVolume:void 0,ask:this.safeNumber(r,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeNumber(r,"last"),last:this.safeNumber(r,"last"),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(r,"vol"),quoteVolume:void 0,info:s}}parseOHLCV(e,t){return[this.safeInteger(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"vol")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id,ktype:this.timeframes[t]};void 0!==s&&(n.size=s);const o=await this.publicGetApiV1MarketKline(this.extend(n,r)),h=this.safeValue(o,"data",[]);return this.parseOHLCVs(h,a,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.size=t);const r=await this.publicGetApiV1MarketDepth(this.extend(s,i)),a=this.safeValue(r,"data"),n=this.safeInteger(r,"time");return this.parseOrderBook(a,e,n,"bids","asks","price","amount")}parseOrderStatus(e){const t={0:"open",1:"open",2:"closed",3:"canceled",4:"canceled"};return e in t?t[e]:e}parseSide(e){return 1===e?"buy":2===e?"sell":void 0}parseOrder(e,t){const i=this.safeString(e,"orderId"),s=this.safeNumber(e,"createTime"),r=this.safeNumber(e,"lastTime"),a=t.symbol,n=this.safeInteger(e,"tradeType"),o=this.parseSide(n),h=this.safeString(e,"orderPrice"),c=this.safeString(e,"avgPrice"),d=this.safeString(e,"orderAmount"),u=this.safeString(e,"dealAmount"),l=this.parseOrderStatus(this.safeString(e,"orderState")),f=t["buy"===o?"base":"quote"],p={cost:this.safeNumber(e,"tradeFee"),currency:f};return this.safeOrder2({info:e,id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:r,symbol:a,type:void 0,timeInForce:void 0,postOnly:void 0,side:o,price:h,stopPrice:void 0,cost:void 0,average:c,amount:d,filled:u,remaining:void 0,status:l,fee:p,trades:void 0},t)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),r={symbol:this.marketId(t),orderId:e},a=await this.privatePostApiV1TradeOrderInfo(this.extend(r,i));return this.parseOrder(a.data,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:this.marketId(e),state:0},n=await this.privatePostApiV1TradeOrderInfos(this.extend(a,s));return this.parseOrders(n.data,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:this.marketId(e),state:1},n=await this.privatePostApiV1TradeOrderInfos(this.extend(a,s));return this.parseOrders(n.data,r,t,i)}async createOrder(e,t,i,s,r,a={}){let n;await this.loadMarkets(),"buy"===i?n=1:"sell"===i&&(n=2);const o={symbol:this.marketId(e),price:r,amount:s,tradeType:n},h=await this.privatePostApiV1TradePlaceOrder(this.extend(o,a)),c=h.data;return{info:h,id:this.safeString(c,"orderId")}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e};void 0!==t&&(s.symbol=this.marketId(t));const r=await this.privatePostApiV1TradeCancelOrder(this.extend(s,i));return{info:r,success:r.success}}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();let t=this.urlencode({accessKey:this.apiKey});o.nonce=this.milliseconds(),Object.keys(o).length&&(t+="&"+this.urlencode(this.keysort(o)));const i="/"+e+"?"+t;a=t+"&signData="+this.hmac(this.encode(i),this.encode(this.secret)),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if("string"==typeof n&&("{"===n[0]||"["===n[0])){const e=this.id+" "+n,t=this.safeValue(o,"success");if(void 0!==t&&!t){const t=this.safeString(o,"code");throw this.throwExactlyMatchedException(this.exceptions,t,e),new r(e)}}}}},20829:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ExchangeNotAvailable:a,OnMaintenance:n,ArgumentsRequired:o,BadRequest:h,AccountSuspended:c,InvalidAddress:d,PermissionDenied:u,DDoSProtection:l,InsufficientFunds:f,InvalidNonce:p,CancelPending:m,InvalidOrder:g,OrderNotFound:y,AuthenticationError:b,RequestTimeout:v,NotSupported:w,BadSymbol:k,RateLimitExceeded:_}=i(73449),{TICK_SIZE:S}=i(62115),O=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitget",name:"Bitget",countries:["SG"],version:"v3",rateLimit:1e3,has:{cancelOrder:!0,cancelOrders:!0,CORS:void 0,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","12h":"12h","1d":"1d","1w":"1w"},hostname:"bitget.com",urls:{logo:"https://user-images.githubusercontent.com/51840849/88317935-a8a21c80-cd22-11ea-8e2b-4b9fac5975eb.jpg",api:{data:"https://api.{hostname}",api:"https://api.{hostname}",capi:"https://capi.{hostname}",swap:"https://capi.{hostname}"},www:"https://www.bitget.com",doc:["https://bitgetlimited.github.io/apidoc/en/swap","https://bitgetlimited.github.io/apidoc/en/spot"],fees:"https://www.bitget.cc/zh-CN/rate?tab=1",test:{rest:"https://testnet.bitget.com"},referral:"https://www.bitget.com/expressly?languageType=0&channelCode=ccxt&vipCode=tg9j"},api:{data:{get:["market/history/kline","market/detail/merged","market/tickers","market/allticker","market/depth","market/trade","market/history/trade","market/detail","common/symbols","common/currencys","common/timestamp"]},api:{get:["account/accounts","accounts/{account_id}/balance","order/orders","order/orders/openOrders","order/orders/history","order/deposit_withdraw"],post:["order/orders/place","order/orders/{order_id}/submitcancel","order/orders/batchcancel","order/orders/{order_id}","order/orders/{order_id}/matchresults","order/matchresults"]},capi:{get:["market/time","market/contracts","market/depth","market/tickers","market/ticker","market/trades","market/candles","market/index","market/open_count","market/open_interest","market/price_limit","market/funding_time","market/mark_price","market/open_count","market/historyFundRate"]},swap:{get:["account/accounts","account/account","account/settings","position/allPosition","position/singlePosition","position/holds","order/detail","order/orders","order/fills","order/current","order/currentPlan","order/history","order/historyPlan","trace/closeTrack","trace/currentTrack","trace/historyTrack","trace/summary","trace/profitSettleTokenIdGroup","trace/profitDateGroupList","trace/profitDateList","trace/waitProfitDateList"],post:["account/leverage","account/adjustMargin","account/modifyAutoAppendMargin","order/placeOrder","order/batchOrders","order/cancel_order","order/cancel_batch_orders","order/plan_order","order/cancel_plan","position/changeHoldModel","trace/closeTrackOrder"]}},fees:{spot:{taker:this.parseNumber("0.002"),maker:this.parseNumber("0.002")},swap:{taker:this.parseNumber("0.0006"),maker:this.parseNumber("0.0004")}},requiredCredentials:{apiKey:!0,secret:!0,password:!0},exceptions:{exact:{1:r,"failure to get a peer from the ring-balancer":a,4010:u,4001:r,4002:r,30001:b,30002:b,30003:b,30004:b,30005:p,30006:b,30007:h,30008:v,30009:r,30010:b,30011:u,30012:b,30013:b,30014:l,30015:b,30016:r,30017:r,30018:r,30019:a,30020:h,30021:h,30022:u,30023:h,30024:k,30025:h,30026:l,30027:b,30028:u,30029:c,30030:r,30031:h,30032:k,30033:h,30034:r,30035:r,30036:r,30037:a,30038:n,32001:c,32002:u,32003:m,32004:r,32005:g,32006:g,32007:g,32008:g,32009:g,32010:r,32011:r,32012:r,32013:r,32014:r,32015:r,32016:r,32017:r,32018:r,32019:r,32020:r,32021:r,32022:r,32023:r,32024:r,32025:r,32026:r,32027:r,32028:c,32029:r,32030:g,32031:o,32038:b,32040:r,32044:r,32045:r,32046:r,32047:r,32048:g,32049:r,32050:g,32051:g,32052:r,32053:r,32057:r,32054:r,32055:g,32056:r,32058:r,32059:g,32060:g,32061:g,32062:g,32063:g,32064:r,32065:r,32066:r,32067:r,32068:r,32069:r,32070:r,32071:r,32072:r,32073:r,32074:r,32075:r,32076:r,32077:r,32078:r,32079:r,32080:r,32083:r,33001:u,33002:c,33003:f,33004:r,33005:r,33006:r,33007:r,33008:f,33009:r,33010:r,33011:r,33012:r,33013:g,33014:y,33015:g,33016:r,33017:f,33018:r,33020:r,33021:h,33022:g,33023:r,33024:g,33025:g,33026:r,33027:g,33028:g,33029:g,33034:r,33035:r,33036:r,33037:r,33038:r,33039:r,33040:r,33041:r,33042:r,33043:r,33044:r,33045:r,33046:r,33047:r,33048:r,33049:r,33050:r,33051:r,33059:h,33060:h,33061:r,33062:r,33063:r,33064:r,33065:r,21009:r,34001:u,34002:d,34003:r,34004:r,34005:r,34006:r,34007:r,34008:f,34009:r,34010:r,34011:r,34012:r,34013:r,34014:r,34015:r,34016:u,34017:c,34018:b,34019:u,34020:u,34021:d,34022:r,34023:u,34026:r,34036:r,34037:r,34038:r,34039:r,35001:r,35002:r,35003:r,35004:r,35005:b,35008:g,35010:g,35012:g,35014:g,35015:g,35017:r,35019:g,35020:g,35021:g,35022:r,35024:r,35025:f,35026:r,35029:y,35030:g,35031:g,35032:r,35037:r,35039:r,35040:g,35044:r,35046:f,35047:f,35048:r,35049:g,35050:g,35052:f,35053:r,35055:f,35057:r,35058:r,35059:h,35060:h,35061:h,35062:g,35063:g,35064:g,35066:g,35067:g,35068:g,35069:g,35070:g,35071:g,35072:g,35073:g,35074:g,35075:g,35076:g,35077:g,35078:g,35079:g,35080:g,35081:g,35082:g,35083:g,35084:g,35085:g,35086:g,35087:g,35088:g,35089:g,35090:r,35091:r,35092:r,35093:r,35094:r,35095:h,35096:r,35097:r,35098:r,35099:r,36001:h,36002:h,36005:r,36101:b,36102:u,36103:c,36104:u,36105:u,36106:c,36107:u,36108:f,36109:u,36201:u,36202:u,36203:g,36204:r,36205:h,36206:h,36207:g,36208:g,36209:g,36210:g,36211:g,36212:g,36213:g,36214:r,36216:y,36217:g,36218:g,36219:g,36220:g,36221:g,36222:g,36223:g,36224:g,36225:g,36226:g,36227:g,36228:g,36229:g,36230:g,400:h,401:b,403:u,404:h,405:h,415:h,429:l,500:a,1001:_,1002:r,1003:r,40001:b,40002:b,40003:b,40004:p,40005:p,40006:b,40007:h,40008:p,40009:b,40010:b,40011:b,40012:b,40013:r,40014:u,40015:r,40016:u,40017:r,40018:u,40102:h,40103:h,40104:r,40105:r,40106:r,40107:r,40108:g,40109:y,40200:n,40201:g,40202:r,40203:h,40204:h,40205:h,40206:h,40207:h,40208:h,40209:h,40300:r,40301:u,40302:h,40303:h,40304:h,40305:h,40306:r,40308:n,40309:k,40400:r,40401:r,40402:h,40403:h,40404:h,40405:h,40406:h,40407:r,40408:r,40409:r,40500:g,40501:r,40502:r,40503:r,40504:r,40505:r,40506:b,40507:b,40508:r,40509:r,40600:r,40601:r,40602:r,40603:r,40604:a,40605:r,40606:r,40607:r,40608:r,40609:r,40700:h,40701:r,40702:r,40703:r,40704:r,40705:h,40706:g,40707:h,40708:h,40709:r,40710:r,40711:f,40712:f,40713:r,40714:r,"invalid sign":b,"invalid currency":k,"invalid symbol":k,"invalid period":h,"invalid user":r,"invalid amount":g,"invalid type":g,"invalid orderId":g,"invalid record":r,"invalid accountId":h,"invalid address":h,"accesskey not null":b,"illegal accesskey":b,"sign not null":b,"req_time is too much difference from server time":p,"permissions not right":u,"illegal sign invalid":b,"user locked":c,"Request Frequency Is Too High":_,"more than a daily rate of cash":h,"more than the maximum daily withdrawal amount":h,"need to bind email or mobile":r,"user forbid":u,"User Prohibited Cash Withdrawal":u,"Cash Withdrawal Is Less Than The Minimum Value":h,"Cash Withdrawal Is More Than The Maximum Value":h,"the account with in 24 hours ban coin":u,"order cancel fail":h,"base symbol error":k,"base date error":r,"api signature not valid":b,"gateway internal error":r,"audit failed":r,"order queryorder invalid":h,"market no need price":g,"limit need price":g,"userid not equal to account_id":r,"your balance is low":f,"address invalid cointype":r,"system exception":r,50003:r,50004:k,50006:u,50007:u,50008:v,50009:_,50010:r,50014:g,50015:g,50016:g,50017:g,50018:g,50019:g,50020:f,50021:g,50026:g,"invalid order query time":r,"invalid start time":h,"invalid end time":h,20003:r,"01001":r},broad:{"invalid size, valid range":r}},precisionMode:S,options:{createMarketBuyOrderRequiresPrice:!0,fetchMarkets:["spot","swap"],parseOHLCV:{volume:{spot:"amount",swap:5}},defaultType:"spot",accountId:void 0,timeframes:{spot:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","2h":"120min","4h":"240min","6h":"360min","12h":"720min","1d":"1day","1w":"1week"},swap:{"1m":"60","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800"}}}})}async fetchTime(e={}){const t=await this.dataGetCommonTimestamp(e);return this.safeInteger(t,"data")}async fetchMarkets(e={}){let t=this.safeValue(this.options,"fetchMarkets");t.length||(t=[this.options.defaultType]);let i=[];for(let s=0;s<t.length;s++){const r=await this.fetchMarketsByType(t[s],e);i=this.arrayConcat(i,r)}return i}parseMarkets(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.parseMarket(e[i]));return t}parseMarket(e){const t=this.safeString(e,"symbol");let i="spot",s=!0,r=!1;const a=this.safeString2(e,"base_currency","coin"),n=this.safeString(e,"quote_currency");void 0!==this.safeNumber(e,"contract_val")&&(i="swap",s=!1,r=!0);const o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n);let c=t.toUpperCase();s&&(c=o+"/"+h);const d=this.safeString(e,"tick_size"),u=this.safeString(e,"size_increment"),l={amount:this.parseNumber(this.parsePrecision(u)),price:this.parseNumber(this.parsePrecision(d))},f=this.safeNumber2(e,"min_size","base_min_size"),p=this.safeString(e,"status");let m;void 0!==p&&(m="1"===p||"online"===p);const g=this.safeValue2(this.fees,i,"trading",{});return this.extend(g,{id:t,symbol:c,base:o,quote:h,baseId:a,quoteId:n,info:e,type:i,spot:s,swap:r,active:m,precision:l,limits:{amount:{min:f,max:void 0},price:{min:l.price,max:void 0},cost:{min:l.price,max:void 0}}})}async fetchMarketsByType(e,t={}){if("spot"===e){const e=await this.dataGetCommonSymbols(t),i=this.safeValue(e,"data",[]);return this.parseMarkets(i)}if("swap"===e){const e=await this.capiGetMarketContracts(t);return this.parseMarkets(e)}throw new w(this.id+" fetchMarketsByType does not support market type "+e)}async fetchCurrencies(e={}){const t=await this.dataGetCommonCurrencys(e),i={},s=this.safeValue(t,"data",[]);for(let e=0;e<s.length;e++){const t=s[e],r=this.safeCurrencyCode(t);i[r]={id:t,code:r,info:t,type:void 0,name:void 0,active:void 0,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={symbol:s.id};let a;s.spot?(a="dataGetMarketDepth",r.type="step0"):s.swap&&(a="capiGetMarketDepth",r.limit=void 0===t?100:t);const n=await this[a](this.extend(r,i)),o=this.safeValue(n,"data",n),h=this.safeInteger2(o,"timestamp","ts"),c=this.safeInteger(o,"id"),d=this.parseOrderBook(o,e,h);return d.nonce=c,d}parseTicker(e,t){const i=this.safeInteger2(e,"timestamp","id");let s;const r=this.safeString2(e,"instrument_id","symbol");if(r in this.markets_by_id)s=(t=this.markets_by_id[r]).symbol;else if(void 0!==r){const e=r.split("_");if(2===e.length){const[t,i]=e;s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}else s=r}void 0===s&&void 0!==t&&(s=t.symbol);const a=this.safeNumber2(e,"last","close"),n=this.safeNumber(e,"open");let o,h,c=this.safeValue(e,"bid");void 0===c?c=this.safeNumber(e,"best_bid"):(o=this.safeNumber(c,1),c=this.safeNumber(c,0));let d=this.safeValue(e,"ask");void 0===d?d=this.safeNumber(e,"best_ask"):(h=this.safeNumber(d,1),d=this.safeNumber(d,0));const u=this.safeNumber2(e,"amount","volume_24h"),l=this.safeNumber(e,"vol"),f=this.vwap(u,l);return this.safeTicker({symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber2(e,"high","high_24h"),low:this.safeNumber2(e,"low","low_24h"),bid:c,bidVolume:o,ask:d,askVolume:h,vwap:f,open:n,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:u,quoteVolume:l,info:e},t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e);let s;i.spot?s="dataGetMarketDetailMerged":i.swap&&(s="capiGetMarketTicker");const r={symbol:i.id},a=await this[s](this.extend(r,t)),n=this.safeValue(a,"data",a);return this.parseTicker(n,i)}async fetchTickersByType(e,t,i={}){let s;await this.loadMarkets(),"spot"===e?s="dataGetMarketTickers":"swap"===e&&(s="capiGetMarketTickers");const r=await this[s](i),a=this.safeValue(r,"data",r);let n;Array.isArray(r)||(n=this.safeInteger(r,"ts"));const o={};for(let e=0;e<a.length;e++){const t=this.parseTicker(this.extend({timestamp:n},a[e]));o[t.symbol]=t}return this.filterByArray(o,"symbol",t)}async fetchTickers(e,t={}){const i=this.safeString2(this.options,"fetchTickers","defaultType"),s=this.safeString(t,"type",i);return await this.fetchTickersByType(s,e,this.omit(t,"type"))}parseTrade(e,t){let i;const s=this.safeString(e,"symbol");let r,a;if(s in this.markets_by_id)i=(t=this.markets_by_id[s]).symbol,r=t.base,a=t.quote;else if(void 0!==s){const e=s.split("_");if(2===e.length){const[t,s]=e;r=this.safeCurrencyCode(t),a=this.safeCurrencyCode(s),i=r+"/"+a}else i=s.toUpperCase()}void 0===i&&void 0!==t&&(i=t.symbol,r=t.base,a=t.quote);let n=this.safeInteger(e,"created_at");n=this.safeInteger2(e,"timestamp","ts",n);const o=this.safeString(e,"price");let h=this.safeString2(e,"filled_amount","order_qty");h=this.safeString2(e,"size","amount",h);let c,d,u=this.safeString2(e,"exec_type","liquidity");"M"===u?u="maker":"T"===u&&(u="taker"),void 0!==this.safeString(e,"type")?(c=this.safeString(e,"type"),d=this.parseOrderType(c),c=this.parseOrderSide(c)):(c=this.safeString2(e,"side","direction"),d=this.parseOrderType(c),c=this.parseOrderSide(c));let l,f=this.safeString(e,"fee");f=void 0===f?this.safeString(e,"filled_fees"):O.stringNeg(f),void 0!==f&&(l={cost:f,currency:"buy"===c?r:a});const p=this.safeString(e,"order_id"),m=this.safeString2(e,"trade_id","id");return this.safeTrade({info:e,timestamp:n,datetime:this.iso8601(n),symbol:i,id:m,order:p,type:d,takerOrMaker:u,side:c,price:o,amount:h,cost:void 0,fee:l},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};let n;r.spot?n="dataGetMarketHistoryTrade":r.swap&&(n="capiGetMarketTrades"),r.spot?void 0!==t&&(a.size=t):r.swap&&(void 0===t&&(t=100),a.limit=t);const o=await this[n](this.extend(a,s));let h;if(Array.isArray(o))h=o;else{const e=this.safeValue(o,"data",{});h=this.safeValue2(e,"data",[])}return this.parseTrades(h,r,i,t)}parseOHLCV(e,t,i="1m"){const s=this.safeValue(this.options,"parseOHLCV",{}),r=this.safeValue(s,"volume",{});if(Array.isArray(e)){const i=this.safeString(r,t.type,"amount");return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,i)]}{const i=this.safeValue(r,t.type,6);return[this.safeInteger(e,"id"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,i)]}}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id};let o;const h=a.type,c=this.safeValue(this.options,"timeframes",{}),d=this.safeValue(c,h,{}),u=this.safeValue(d,this.timeframes[t]);if(a.spot)o="dataGetMarketHistoryKline",n.period=u,void 0!==s&&(n.size=s);else if(a.swap){const e=this.parseTimeframe(t);o="capiGetMarketCandles",n.granularity=u;const r=this.milliseconds();void 0===i?(void 0===s&&(s=1e3),n.start=this.iso8601(r-s*e*1e3),n.end=this.iso8601(r)):(n.start=this.iso8601(i),n.end=void 0===s?this.iso8601(r):this.iso8601(this.sum(i,s*e*1e3)))}const l=await this[o](this.extend(n,r));let f=l;return Array.isArray(l)||(f=this.safeValue(l,"data",[])),this.parseOHLCVs(f,a,t,i,s)}parseSpotBalance(e){const t={info:e},i=this.safeValue(e,"data"),s=this.safeValue(i,"list");for(let e=0;e<s.length;e++){const i=s[e],r=this.safeString(i,"currency"),a=this.safeCurrencyCode(r);if(!(a in t)){const e=this.account();t[a]=e}const n=this.safeValue(i,"type");if("trade"===n)t[a].free=this.safeString(i,"balance");else if("frozen"===n||"lock"===n){const e=this.safeString(t[a],"used");t[a].used=O.stringAdd(e,this.safeString(i,"balance"))}}return this.parseBalance(t)}parseSwapBalance(e){const t={};for(let i=0;i<e.length;i++){const s=e[i],r=this.safeString(s,"symbol");let a=r;r in this.markets_by_id&&(a=this.markets_by_id[r].symbol);const n=this.account();n.total=this.safeString(s,"equity"),n.free=this.safeString(s,"total_avail_balance"),t[a]=n}return this.parseBalance(t)}async fetchAccounts(e={}){const t=await this.apiGetAccountAccounts(this.extend({method:"accounts"},e)),i=this.safeValue(t,"data",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"id"),a=this.safeStringLower(t,"type");s.push({id:r,type:a,currency:void 0,info:t})}return s}async findAccountByType(e){await this.loadMarkets(),await this.loadAccounts();const t=this.groupBy(this.accounts,"type"),i=this.safeValue(t,e);if(void 0===i)throw new r(this.id+" findAccountByType() could not find an accountId with type '"+e+"', specify the 'accountId' parameter instead");if(i.length>1)throw new r(this.id+" findAccountByType() found more than one accountId with type '"+e+"', specify the 'accountId' parameter instead");return i[0]}async getAccountId(e){await this.loadMarkets(),await this.loadAccounts();const t=this.safeString(this.options,"accountId"),i=this.safeString(e,"accountId",t);if(void 0!==i)return i;const s=this.safeString(this.options,"defaultType","margin"),r=this.safeString(e,"type",s);if(e=this.omit(e,"type"),void 0===r)throw new o(this.id+" getAccountId() requires an 'accountId' parameter");return(await this.findAccountByType(r)).id}async fetchBalance(e={}){await this.loadMarkets(),await this.loadAccounts();const t=this.safeString2(this.options,"fetchBalance","defaultType"),i=this.safeString(e,"type",t);if(void 0===i)throw new o(this.id+" fetchBalance() requires a 'type' parameter, one of 'spot', 'swap'");let s;const r=this.omit(e,"type");if("spot"===i){const t=await this.getAccountId(e);s="apiGetAccountsAccountIdBalance",r.account_id=t,r.method="balance"}else"swap"===i&&(s="swapGetAccountAccounts");const a=await this[s](r);return this.parseBalanceByType(i,a)}parseBalanceByType(e,t){if("spot"===e)return this.parseSpotBalance(t);if("swap"===e)return this.parseSwapBalance(t);throw new w(this.id+" fetchBalance does not support the '"+e+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')")}parseOrderStatus(e){return this.safeString({submitted:"open","partial-filled":"open","partial-canceled":"canceled",filled:"closed",canceled:"canceled","-2":"failed","-1":"canceled",0:"open",1:"open",2:"closed",3:"open",4:"canceled"},e,e)}parseOrderSide(e){return this.safeString({"buy-market":"buy","sell-market":"sell","buy-limit":"buy","sell-limit":"sell",1:"long",2:"short",3:"long",4:"short"},e,e)}parseOrderType(e){return this.safeString({"buy-market":"market","sell-market":"market","buy-limit":"limit","sell-limit":"limit",1:"open",2:"open",3:"close",4:"close"},e,e)}parseOrder(e,t){let i=this.safeString(e,"order_id");i=this.safeString2(e,"id","data",i);const s=this.safeInteger2(e,"created_at","createTime");let r=this.safeString(e,"type");const a=this.parseOrderSide(r);let n;r=this.parseOrderType(r);const o=this.safeString(e,"symbol");void 0!==o&&(o in this.markets_by_id?t=this.markets_by_id[o]:n=o.toUpperCase()),void 0===n&&void 0!==t&&(n=t.symbol);const h=this.safeString2(e,"amount","size"),c=this.safeString2(e,"filled_amount","filled_qty"),d=this.safeString(e,"filled_cash_amount"),u=this.safeString(e,"price"),l=this.safeString(e,"price_avg"),f=this.parseOrderStatus(this.safeString2(e,"state","status")),p=this.safeNumber2(e,"filled_fees","fee");let m;void 0!==p&&(m={cost:p,currency:void 0});const g=this.safeString(e,"client_oid");return this.safeOrder2({info:e,id:i,clientOrderId:g,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:n,type:r,timeInForce:void 0,postOnly:void 0,side:a,price:u,stopPrice:void 0,average:l,cost:d,amount:h,filled:c,remaining:void 0,status:f,fee:m,trades:void 0},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),await this.loadAccounts();const n=this.market(e),h={symbol:n.id},c=this.safeString2(a,"client_oid","clientOrderId",this.uuid());let d;if(a=this.omit(a,["client_oid","clientOrderId"]),n.spot){const o=await this.getAccountId({type:n.type});if(d="apiPostOrderOrdersPlace",h.account_id=o,h.method="place",h.type=i+"-"+t,"limit"===t)h.amount=this.amountToPrecision(e,s),h.price=this.priceToPrecision(e,r);else if("market"===t)if("buy"===i){let t=this.safeNumber(a,"amount");if(this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){if(void 0!==r)void 0===t&&(t=s*r);else if(void 0===t)throw new g(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'amount' extra parameter (the exchange-specific behaviour)")}else t=void 0===t?s:t;h.amount=this.costToPrecision(e,t)}else"sell"===i&&(h.amount=this.amountToPrecision(e,s))}else if(n.swap){h.order_type="0",h.client_oid=c;const i=this.safeString(a,"type");if(void 0===i)throw new o(this.id+" createOrder() requires a type parameter, '1' = open long, '2' = open short, '3' = close long, '4' = close short for "+n.type+" orders");h.size=this.amountToPrecision(e,s),h.type=i,"limit"===t?(h.match_price="0",h.price=this.priceToPrecision(e,r)):"market"===t&&(h.match_price="1"),d="swapPostOrderPlaceOrder"}const u=await this[d](this.extend(h,a));return this.parseOrder(u,n)}async cancelOrder(e,t,i={}){let s,r;if(await this.loadMarkets(),void 0===t){const e=this.safeString2(this.options,"cancelOrder","defaultType");if("spot"===this.safeString(i,"type",e)&&void 0===t)throw new o(this.id+" cancelOrder() requires a symbol argument for spot orders")}else s=this.market(t),r=s.type;const a=this.omit(i,"type");let n;const h={};"spot"===r?(n="apiPostOrderOrdersOrderIdSubmitcancel",h.order_id=e,h.method="submitcancel"):"swap"===r&&(n="swapPostOrderCancelOrder",h.orderId=e,h.symbol=s.id);const c=await this[n](this.extend(h,a));return this.parseOrder(c,s)}async cancelOrders(e,t,i={}){if(void 0===t)throw new o(this.id+" cancelOrders() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r=this.safeString(i,"type",s.type);if(void 0===r)throw new o(this.id+" cancelOrders() requires a type parameter (one of 'spot', 'swap').");i=this.omit(i,"type");const a={};let n;if("spot"===r){n="apiPostOrderOrdersBatchcancel",a.method="batchcancel";const t=this.json(e).split('"');a.order_ids=t.join("")}else"swap"===r&&(n="swapPostOrderCancelBatchOrders",a.symbol=s.id,a.ids=e);return await this[n](this.extend(a,i))}async fetchOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r=this.safeString(i,"type",s.type);if(void 0===r)throw new o(this.id+" fetchOrder() requires a type parameter (one of 'spot', 'swap').");let a;const n={};if("spot"===r){const t=this.safeString(i,"client_oid");void 0!==t?(a="apiPostOrderOrdersClientOid",n.client_oid=t):(a="apiPostOrderOrdersOrderId",n.order_id=e),n.method="getOrder"}else"swap"===r&&(a="swapGetOrderDetail",n.symbol=s.id,n.orderId=e);const h=this.omit(i,"type"),c=await this[a](this.extend(n,h)),d=this.safeValue(c,"data",c);return this.parseOrder(d,s)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a=this.safeString(s,"type",r.type),n={symbol:r.id};let h;"spot"===a?(h="apiGetOrderOrdersOpenOrders",n.method="openOrders",void 0===i&&(n.size=i)):"swap"===a&&(h="swapGetOrderOrders",n.status="3",n.from="1",n.to="1",void 0===i&&(n.limit=100));const c=this.omit(s,"type"),d=await this[h](this.extend(n,c));let u=d;return Array.isArray(d)||(u=this.safeValue(d,"data",[])),this.parseOrders(u,r,void 0,i)}async fetchClosedOrders(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchClosedOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a=this.safeString(s,"type",r.type),n={symbol:r.id};let h;"spot"===a?(h="apiGetOrderOrdersHistory",void 0!==t&&(n.start_time=t),n.method="openOrders",void 0===i&&(n.size=i)):"swap"===a&&(h="swapGetOrderOrders",n.status="2",n.from="1",n.to="1",void 0===i&&(n.limit=100));const c=this.omit(s,"type"),d=await this[h](this.extend(n,c));let u=d;return Array.isArray(d)||(u=this.safeValue(d,"data",[])),this.parseOrders(u,r,void 0,i)}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchDeposits() requires a currency code argument");await this.loadMarkets();const r=this.currency(e),a={currency:r.id,method:"deposit_withdraw",type:"deposit",size:12},n=await this.apiGetOrderDepositWithdraw(this.extend(a,s)),h=this.safeValue(n,"data",[]);return this.parseTransactions(h,r,t,i,s)}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchWithdrawals() requires a currency code argument");await this.loadMarkets();const r=this.currency(e),a={currency:r.id,method:"deposit_withdraw",type:"withdraw",size:12},n=await this.apiGetOrderDepositWithdraw(this.extend(a,s)),h=this.safeValue(n,"data",[]);return this.parseTransactions(h,r,t,i,s)}parseTransactionStatus(e){return this.safeString({WaitForOperation:"pending",OperationLock:"pending",OperationSuccess:"ok",Cancel:"canceled",Sure:"ok",Fail:"failed",WaitForChainSure:"ok",WAIT_0:"pending",WAIT_1:"pending",DATA_CHANGE:"pending",SUCCESS:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address"),r=this.safeString(e,"address_tag"),a=r,n=s;let o=this.safeString(e,"type");"withdraw"===o?o="withdrawal":"deposit"===o&&(o="deposit");const h=this.safeString(e,"currency"),c=this.safeCurrencyCode(h),d=this.safeNumber(e,"amount"),u=this.parseTransactionStatus(this.safeString(e,"state")),l=this.safeString(e,"tx_hash"),f=this.safeInteger(e,"created_at"),p=this.safeInteger(e,"updated_at"),m=this.safeNumber(e,"fee");let g;return void 0!==m&&(g={currency:c,cost:m}),{info:e,id:i,currency:c,amount:d,addressFrom:void 0,addressTo:n,address:s,tagFrom:void 0,tagTo:a,tag:r,status:u,type:o,updated:p,txid:l,timestamp:f,datetime:this.iso8601(f),fee:g}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a=this.safeString(s,"type",r.type),n=this.omit(s,"type");if("swap"===a)throw new o(this.id+" fetchMyTrades() is not supported for "+a+" type");const h={symbol:r.id,method:"matchresults"};if(void 0!==t){h.start_date=this.yyyymmdd(t);const e=this.sum(t,1728e5);h.end_date=this.yyyymmdd(e)}void 0!==i&&(h.size=i);const c=await this.apiPostOrderMatchresults(this.extend(h,n)),d=this.safeValue(c,"data",[]);return this.parseTrades(d,r,t,i)}async fetchOrderTrades(e,t,i,s,r={}){if(void 0===t)throw new o(this.id+" fetchOrderTrades() requires a symbol argument");await this.loadMarkets();const a=this.market(t),n=this.safeString(r,"type",a.type);let h;r=this.omit(r,"type");const c={};"spot"===n?(c.order_id=e,c.method="matchresults",h="apiPostOrderOrdersOrderIdMatchresults"):"swap"===n&&(c.orderId=e,c.symbol=a.id,h="swapGetOrderFills");const d=await this[h](this.extend(c,r));let u=d;return Array.isArray(u)||(u=this.safeValue(d,"data",[])),await this.parseTrades(u,a,i,s)}async fetchPosition(e,t={}){await this.loadMarkets();const i={symbol:this.market(e).id};return await this.swapGetPositionSinglePosition(this.extend(i,t))}async fetchPositions(e,t={}){return await this.loadMarkets(),await this.swapGetPositionAllPosition(t)}sign(e,t="public",i="GET",s={},r,a){let n="/"+this.implodeParams(e,s);n="capi"===t||"swap"===t?"/api/swap/"+this.version+n:"/"+t+"/v1"+n;let o=this.omit(s,this.extractParams(e)),h=this.implodeHostname(this.urls.api[t])+n;if("data"===t||"capi"===t)Object.keys(o).length&&(h+="?"+this.urlencode(o));else if("swap"===t){this.checkRequiredCredentials();const e=this.milliseconds().toString();let t=e+i+n;if("POST"===i)t+=a=this.json(s);else if(Object.keys(s).length){const e=this.urlencode(this.keysort(s));h+="?"+e,t+="?"+e}const o=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64");r={"ACCESS-KEY":this.apiKey,"ACCESS-SIGN":o,"ACCESS-TIMESTAMP":e,"ACCESS-PASSPHRASE":this.password},"POST"===i&&(r["Content-Type"]="application/json")}else if("api"===t){const e=this.milliseconds().toString();let t="";o=this.keysort(o),t=this.rawencode(o);const s=this.hash(this.encode(this.secret),"sha1");let n=t;const c=this.hmac(this.encode(t),this.encode(s),"md5");t.length>0&&(n+="&"),n+="sign="+c+"&req_time="+e+"&accesskey="+this.apiKey,"GET"===i?Object.keys(o).length&&(h+="?"+n):"POST"===i&&(h+="?sign="+c+"&req_time="+e+"&accesskey="+this.apiKey,a=t,r={"Content-Type":"application/x-www-form-urlencoded"})}return{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(!o)return;const d=this.safeString(o,"err_msg"),u=this.safeString2(o,"code","err_code"),l=this.id+" "+n,f=void 0!==d&&""!==d;f&&(this.throwExactlyMatchedException(this.exceptions.exact,d,l),this.throwBroadlyMatchedException(this.exceptions.broad,d,l));const p=void 0!==u&&"00000"!==u;if(p&&this.throwExactlyMatchedException(this.exceptions.exact,u,l),p||f)throw new r(l)}}},29202:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ExchangeNotAvailable:a,AuthenticationError:n,BadRequest:o,PermissionDenied:h,InvalidAddress:c,ArgumentsRequired:d,InvalidOrder:u}=i(73449),{DECIMAL_PLACES:l,SIGNIFICANT_DIGITS:f,TRUNCATE:p}=i(62115);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bithumb",name:"Bithumb",countries:["KR"],rateLimit:500,has:{cancelOrder:!0,CORS:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchIndexOHLCV:!1,fetchMarkets:!0,fetchMarkOHLCV:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},hostname:"bithumb.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/30597177-ea800172-9d5e-11e7-804c-b9d4fa9b56b0.jpg",api:{public:"https://api.{hostname}/public",private:"https://api.{hostname}"},www:"https://www.bithumb.com",doc:"https://apidocs.bithumb.com",fees:"https://en.bithumb.com/customer_support/info_fee"},api:{public:{get:["ticker/{currency}","ticker/all","ticker/ALL_BTC","ticker/ALL_KRW","orderbook/{currency}","orderbook/all","transaction_history/{currency}","transaction_history/all","candlestick/{currency}/{interval}"]},private:{post:["info/account","info/balance","info/wallet_address","info/ticker","info/orders","info/user_transactions","info/order_detail","trade/place","trade/cancel","trade/btc_withdrawal","trade/krw_deposit","trade/krw_withdrawal","trade/market_buy","trade/market_sell"]}},fees:{trading:{maker:this.parseNumber("0.0025"),taker:this.parseNumber("0.0025")}},precisionMode:f,exceptions:{"Bad Request(SSL)":o,"Bad Request(Bad Method)":o,"Bad Request.(Auth Data)":n,"Not Member":n,"Invalid Apikey":n,"Method Not Allowed.(Access IP)":h,"Method Not Allowed.(BTC Adress)":c,"Method Not Allowed.(Access)":h,"Database Fail":a,"Invalid Parameter":o,5600:r,"Unknown Error":r,"After May 23th, recent_transactions is no longer, hence users will not be able to connect to recent_transactions":r},timeframes:{"1m":"1m","3m":"3m","5m":"5m","10m":"10m","30m":"30m","1h":"1h","6h":"6h","12h":"12h","1d":"24h"},options:{quoteCurrencies:{BTC:{limits:{cost:{min:2e-4,max:100}}},KRW:{limits:{cost:{min:500,max:5e9}}}}},commonCurrencies:{FTC:"FTC2",MIR:"MIR COIN",SOC:"Soda Coin"}})}amountToPrecision(e,t){return this.decimalToPrecision(t,p,this.markets[e].precision.amount,l)}async fetchMarkets(e={}){const t=[],i=this.safeValue(this.options,"quoteCurrencies",{}),s=Object.keys(i);for(let r=0;r<s.length;r++){const a=s[r],n=this.safeValue(i,a,{}),o="publicGetTickerALL"+a,h=await this[o](e),c=this.safeValue(h,"data"),d=Object.keys(c);for(let e=0;e<d.length;e++){const i=d[e];if("date"===i)continue;const s=c[i],r=this.safeCurrencyCode(i),o=i+"/"+a;let h=!0;Array.isArray(s)&&0===s.length&&(h=!1);const u=this.deepExtend({id:i,symbol:o,base:r,quote:a,info:s,type:"spot",spot:!0,active:h,precision:{amount:4,price:4},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{}},baseId:void 0,quoteId:void 0},n);t.push(u)}}return t}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostInfoBalance(this.extend({currency:"ALL"},e)),i={info:t},s=this.safeValue(t,"data"),r=Object.keys(this.currencies);for(let e=0;e<r.length;e++){const t=r[e],a=this.account(),n=this.currency(t),o=this.safeStringLower(n,"id");a.total=this.safeString(s,"total_"+o),a.used=this.safeString(s,"in_use_"+o),a.free=this.safeString(s,"available_"+o),i[t]=a}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={currency:s.base+"_"+s.quote};void 0!==t&&(r.count=t);const a=await this.publicGetOrderbookCurrency(this.extend(r,i)),n=this.safeValue(a,"data",{}),o=this.safeInteger(n,"timestamp");return this.parseOrderBook(n,e,o,"bids","asks","price","quantity")}parseTicker(e,t){const i=this.safeInteger(e,"date"),s=this.safeSymbol(void 0,t),r=this.safeNumber(e,"opening_price"),a=this.safeNumber(e,"closing_price"),n=this.safeNumber(e,"units_traded_24H"),o=this.safeNumber(e,"acc_trade_value_24H"),h=this.vwap(n,o);return this.safeTicker({symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"max_price"),low:this.safeNumber(e,"min_price"),bid:this.safeNumber(e,"buy_price"),bidVolume:void 0,ask:this.safeNumber(e,"sell_price"),askVolume:void 0,vwap:h,open:r,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:n,quoteVolume:o,info:e},t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickerAll(t),s={},r=this.safeValue(i,"data",{}),a=this.safeInteger(r,"date"),n=this.omit(r,"date"),o=Object.keys(n);for(let e=0;e<o.length;e++){const t=o[e];let i,r=t;t in this.markets_by_id&&(i=this.markets_by_id[t],r=i.symbol);const h=n[t];Array.isArray(h)||(h.date=a,s[r]=this.parseTicker(h,i))}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={currency:i.base},r=await this.publicGetTickerCurrency(this.extend(s,t)),a=this.safeValue(r,"data",{});return this.parseTicker(a,i)}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,2),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={currency:a.base,interval:this.timeframes[t]},o=await this.publicGetCandlestickCurrencyInterval(this.extend(n,r)),h=this.safeValue(o,"data",[]);return this.parseOHLCVs(h,a,t,i,s)}parseTrade(e,t){let i;const s=this.safeString(e,"transaction_date");if(void 0!==s){const t=s.split(" ");if(t.length>1){const e=t[0];let s=t[1];s.length<8&&(s="0"+s),i=this.parse8601(e+" "+s)}else i=this.safeIntegerProduct(e,"transaction_date",.001)}void 0!==i&&(i-=324e5);let r=this.safeString(e,"type");r="ask"===r?"sell":"buy";const a=this.safeString(e,"cont_no");let n;void 0!==t&&(n=t.symbol);const o=this.safeString(e,"price"),h=this.safeString2(e,"units_traded","units"),c=this.safeString(e,"total");let d;const u=this.safeString(e,"fee");if(void 0!==u){const t=this.safeString(e,"fee_currency");d={cost:u,currency:this.commonCurrencyCode(t)}}return this.safeTrade({id:a,info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,order:void 0,type:void 0,side:r,takerOrMaker:void 0,price:o,amount:h,cost:c,fee:d},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currency:r.base};void 0===i&&(a.count=i);const n=await this.publicGetTransactionHistoryCurrency(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o={order_currency:n.id,payment_currency:n.quote,units:s};let h="privatePostTradePlace";"limit"===t?(o.price=r,o.type="buy"===i?"bid":"ask"):h="privatePostTradeMarket"+this.capitalize(i);const c=await this[h](this.extend(o,a)),d=this.safeString(c,"order_id");if(void 0===d)throw new u(this.id+" createOrder() did not return an order id");return{info:c,symbol:e,type:t,side:i,id:d}}async fetchOrder(e,t,i={}){if(void 0===t)throw new d(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={order_id:e,count:1,order_currency:s.base,payment_currency:s.quote},a=await this.privatePostInfoOrderDetail(this.extend(r,i)),n=this.safeValue(a,"data");return this.parseOrder(this.extend(n,{order_id:e}),s)}parseOrderStatus(e){return this.safeString({Pending:"open",Completed:"closed",Cancel:"canceled"},e,e)}parseOrder(e,t){const i=this.safeIntegerProduct(e,"order_date",.001),s="bid"===this.safeValue2(e,"type","side")?"buy":"sell",r=this.parseOrderStatus(this.safeString(e,"order_status"));let a=this.safeNumber2(e,"order_price","price"),n="limit";0===a&&(a=void 0,n="market");const o=this.safeNumber2(e,"order_qty","units");let h,c=this.safeNumber(e,"units_remaining");void 0===c&&("closed"===r?c=0:"canceled"!==r&&(c=o));const d=this.safeString(e,"order_currency"),u=this.safeString(e,"payment_currency"),l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(u);void 0!==l&&void 0!==f&&(h=l+"/"+f),void 0===h&&void 0!==t&&(h=t.symbol);const p=this.safeString(e,"order_id"),m=this.safeValue(e,"contract",[]),g=this.parseTrades(m,t,void 0,void 0,{side:s,symbol:h,order:p});return this.safeOrder({info:e,id:p,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:h,type:n,timeInForce:void 0,postOnly:void 0,side:s,price:a,stopPrice:void 0,amount:o,cost:void 0,average:void 0,filled:void 0,remaining:c,status:r,fee:void 0,trades:g})}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e);void 0===i&&(i=100);const a={count:i,order_currency:r.base,payment_currency:r.quote};void 0!==t&&(a.after=t);const n=await this.privatePostInfoOrders(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseOrders(o,r,t,i)}async cancelOrder(e,t,i={}){if(!("side"in i))throw new d(this.id+" cancelOrder() requires a `side` parameter (sell or buy)");if(void 0===t)throw new d(this.id+" cancelOrder() requires a `symbol` argument");const s=this.market(t),r="buy"===i.side?"bid":"ask";i=this.omit(i,["side","currency"]);const a={order_id:e,type:r,order_currency:s.base,payment_currency:s.quote};return await this.privatePostTradeCancel(this.extend(a,i))}cancelUnifiedOrder(e,t={}){const i={side:e.side};return this.cancelOrder(e.id,e.symbol,this.extend(i,t))}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),n={units:t,address:i,currency:a.id};if("XRP"===a||"XMR"===a||"EOS"===a||"STEEM"===a){const t=this.safeString(r,"destination");if(void 0===s&&void 0===t)throw new d(this.id+" "+e+" withdraw() requires a tag argument or an extra destination param");void 0!==s&&(n.destination=s)}return{info:await this.privatePostTradeBtcWithdrawal(this.extend(n,r)),id:void 0}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){const n="/"+this.implodeParams(e,s);let o=this.implodeHostname(this.urls.api[t])+n;const h=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(h).length&&(o+="?"+this.urlencode(h));else{this.checkRequiredCredentials(),a=this.urlencode(this.extend({endpoint:n},h));const e=this.nonce().toString(),t=n+"\0"+a+"\0"+e,i=this.hmac(this.encode(t),this.encode(this.secret),"sha512"),s=this.decode(this.stringToBase64(i));r={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded","Api-Key":this.apiKey,"Api-Sign":s,"Api-Nonce":e}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o&&"status"in o){const e=this.safeString(o,"status"),t=this.safeString(o,"message");if(void 0!==e){if("0000"===e)return;if("거래 진행중인 내역이 존재하지 않습니다"===t)return;const i=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions,e,i),this.throwExactlyMatchedException(this.exceptions,t,i),new r(i)}}}}},69102:(e,t,i)=>{"use strict";const s=i(48819),{AuthenticationError:r,ExchangeNotAvailable:a,AccountSuspended:n,PermissionDenied:o,RateLimitExceeded:h,InvalidNonce:c,InvalidAddress:d,ArgumentsRequired:u,ExchangeError:l,InvalidOrder:f,InsufficientFunds:p,BadRequest:m,OrderNotFound:g,BadSymbol:y,NotSupported:b}=i(73449),{ROUND:v,TICK_SIZE:w,TRUNCATE:k}=i(62115);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitmart",name:"BitMart",countries:["US","CN","HK","KR"],rateLimit:250,version:"v1",certified:!0,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,cancelOrders:!0,createOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFee:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},hostname:"bitmart.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/129991357-8f47464b-d0f4-41d6-8a82-34122f0d1398.jpg",api:{rest:"https://api-cloud.{hostname}"},www:"https://www.bitmart.com/",doc:"https://developer-pro.bitmart.com/",referral:{url:"http://www.bitmart.com/?r=rQCFLh",discount:.3},fees:"https://www.bitmart.com/fee/en"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{system:{get:{time:5,service:5}},account:{get:{currencies:10}},spot:{get:{currencies:1,symbols:1,"symbols/details":1,ticker:1,steps:1,"symbols/kline":1,"symbols/book":1,"symbols/trades":1}},contract:{get:{tickers:.5}}},private:{account:{get:{wallet:.5,"deposit/address":1,"withdraw/charge":1,"deposit-withdraw/history":1,"deposit-withdraw/detail":1},post:{"withdraw/apply":1}},spot:{get:{wallet:.5,order_detail:.1,orders:.5,trades:.5},post:{submit_order:.1,cancel_order:.1,cancel_orders:.1}}}},timeframes:{"1m":1,"3m":3,"5m":5,"15m":15,"30m":30,"45m":45,"1h":60,"2h":120,"3h":180,"4h":240,"1d":1440,"1w":10080,"1M":43200},fees:{trading:{tierBased:!0,percentage:!0,taker:this.parseNumber("0.0025"),maker:this.parseNumber("0.0025"),tiers:{taker:[[this.parseNumber("0"),this.parseNumber("0.0020")],[this.parseNumber("10"),this.parseNumber("0.18")],[this.parseNumber("50"),this.parseNumber("0.0016")],[this.parseNumber("250"),this.parseNumber("0.0014")],[this.parseNumber("1000"),this.parseNumber("0.0012")],[this.parseNumber("5000"),this.parseNumber("0.0010")],[this.parseNumber("25000"),this.parseNumber("0.0008")],[this.parseNumber("50000"),this.parseNumber("0.0006")]],maker:[[this.parseNumber("0"),this.parseNumber("0.001")],[this.parseNumber("10"),this.parseNumber("0.0009")],[this.parseNumber("50"),this.parseNumber("0.0008")],[this.parseNumber("250"),this.parseNumber("0.0007")],[this.parseNumber("1000"),this.parseNumber("0.0006")],[this.parseNumber("5000"),this.parseNumber("0.0005")],[this.parseNumber("25000"),this.parseNumber("0.0004")],[this.parseNumber("50000"),this.parseNumber("0.0003")]]}}},precisionMode:w,exceptions:{exact:{3e4:l,30001:r,30002:r,30003:n,30004:r,30005:r,30006:r,30007:r,30008:r,30010:o,30011:r,30012:r,30013:h,30014:a,6e4:m,60001:m,60002:m,60003:l,60004:l,60005:l,60006:l,60007:d,60008:p,60009:l,60010:l,60011:d,60012:l,60020:o,60021:o,60022:o,60030:m,60031:m,60050:l,60051:l,5e4:m,50001:y,50002:m,50003:m,50004:m,50005:g,50006:f,50007:f,50008:f,50009:f,50010:f,50011:f,50012:f,50013:f,50014:m,50015:m,50016:m,50017:m,50018:m,50019:m,50020:p,50021:m,50022:a,50023:y,50029:f,50030:f,53e3:n,53001:n,57001:m,58001:m,59001:l,59002:l,40001:l,40002:l,40003:l,40004:l,40005:l,40006:o,40007:m,40008:c,40009:m,40010:m,40011:m,40012:l,40013:l,40014:y,40015:y,40016:f,40017:f,40018:f,40019:l,40020:f,40021:l,40022:l,40023:l,40024:l,40025:l,40026:l,40027:p,40028:o,40029:f,40030:f,40031:f,40032:f,40033:f,40034:y},broad:{}},commonCurrencies:{COT:"Community Coin",CPC:"CPCoin",DMS:"DimSum",FOX:"Fox Finance",GDT:"Gorilla Diamond",$HERO:"Step Hero",$PAC:"PAC",MIM:"MIM Swarm",MVP:"MVP Coin",ONE:"Menlo One",PLA:"Plair",TCT:"TacoCat Token",TRU:"Truebit"},options:{networks:{TRX:"TRC20",ETH:"ERC20"},defaultNetworks:{USDT:"ERC20"},defaultType:"spot",fetchBalance:{type:"spot"},createMarketBuyOrderRequiresPrice:!0}})}async fetchTime(e={}){const t=await this.publicSystemGetTime(e),i=this.safeValue(t,"data",{});return this.safeInteger(i,"server_time")}async fetchStatus(e={}){const t=this.safeValue(this.options,"fetchBalance",{}),i=this.safeString(this.options,"defaultType");let s=this.safeString(t,"type",i);s=this.safeString(e,"type",s),e=this.omit(e,"type");const r=await this.publicSystemGetService(e),a=this.safeValue(r,"data",{}),n=this.safeValue(a,"service",[]),o=this.indexBy(n,"service_type");"swap"!==s&&"future"!==s||(s="contract");const h=this.safeValue(o,s);let c,d;return void 0!==h&&(2===this.safeInteger(h,"status")?c="ok":(c="maintenance",d=this.safeInteger(h,"end_time"))),this.status=this.extend(this.status,{status:c,updated:this.milliseconds(),eta:d}),this.status}async fetchSpotMarkets(e={}){const t=await this.publicSpotGetSymbolsDetails(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"symbols",[]),r=[];for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"symbol"),a=this.safeInteger(t,"symbol_id"),n=this.safeString(t,"base_currency"),o=this.safeString(t,"quote_currency"),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=h+"/"+c,u=this.safeInteger(t,"price_max_precision"),l={amount:this.safeNumber(t,"base_min_size"),price:this.parseNumber(this.decimalToPrecision(Math.pow(10,-u),v,14))},f=this.safeNumber(t,"min_buy_amount"),p=this.safeNumber(t,"min_sell_amount"),m=Math.max(f,p),g={amount:{min:this.safeNumber(t,"base_min_size"),max:this.safeNumber(t,"base_max_size")},price:{min:void 0,max:void 0},cost:{min:m,max:void 0}};r.push({id:i,numericId:a,symbol:d,base:h,quote:c,baseId:n,quoteId:o,type:"spot",spot:!0,future:!1,swap:!1,precision:l,limits:g,info:t,active:!0})}return r}async fetchContractMarkets(e={}){const t=await this.publicContractGetContracts(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"contracts",[]),r=[];for(let e=0;e<s.length;e++){const t=s[e],i=this.safeValue(t,"contract",{}),a=this.safeString(i,"contract_id"),n=this.safeInteger(i,"contract_id"),o=this.safeString(i,"base_coin"),h=this.safeString(i,"quote_coin"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(h),u=this.safeString(i,"name"),l={amount:this.safeNumber(i,"vol_unit"),price:this.safeNumber(i,"price_unit")},f={amount:{min:this.safeNumber(i,"min_vol"),max:this.safeNumber(i,"max_vol")},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},p=this.safeValue(i,"contract_type");let m=!1,g=!1,y="contract";1===p?(y="swap",g=!0):2===p&&(y="future",m=!0);const b=this.safeValue(t,"fee_config",{}),v=this.safeNumber(b,"maker_fee"),w=this.safeNumber(b,"taker_fee");r.push({id:a,numericId:n,symbol:u,base:c,quote:d,baseId:o,quoteId:h,maker:v,taker:w,type:y,spot:!1,future:m,swap:g,precision:l,limits:f,info:t,active:void 0})}return r}async fetchMarkets(e={}){return await this.fetchSpotMarkets()}async fetchFundingFee(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateAccountGetWithdrawCharge(this.extend(i,t)),r=s.data,a={};return a[e]=this.safeNumber(r,"withdraw_fee"),{info:s,withdraw:a,deposit:{}}}parseTicker(e,t){const i=this.safeTimestamp2(e,"timestamp","s_t",this.milliseconds());let s=this.safeString2(e,"symbol","contract_id");s=this.safeString(e,"contract_symbol",s);const r=this.safeSymbol(s,t),a=this.safeNumber2(e,"close_24h","last_price");let n=this.safeNumber2(e,"fluctuation","rise_fall_rate");void 0!==n&&(n*=100),void 0===n&&(n=this.safeNumber(e,"price_change_percent_24h"));const o=this.safeNumber2(e,"base_coin_volume","base_volume_24h");let h=this.safeNumber2(e,"quote_coin_volume","quote_volume_24h");h=this.safeNumber(e,"volume_24h",h);const c=this.safeNumber2(e,"open_24h","open");let d;void 0!==a&&void 0!==c&&(d=this.sum(a,c)/2),d=this.safeNumber(e,"avg_price",d);const u=this.safeValue(e,"depth_price",e);return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber2(e,"high","high_24h"),low:this.safeNumber2(e,"low","low_24h"),bid:this.safeNumber2(u,"best_bid","bid_price"),bidVolume:this.safeNumber(e,"best_bid_size"),ask:this.safeNumber2(u,"best_ask","ask_price"),askVolume:this.safeNumber(e,"best_ask_size"),vwap:void 0,open:this.safeNumber(e,"open_24h"),close:a,last:a,previousClose:void 0,change:void 0,percentage:n,average:d,baseVolume:o,quoteVolume:h,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={};let r;i.swap||i.future?(r="publicContractGetTickers",s.contractID=i.id):i.spot&&(r="publicSpotGetTicker",s.symbol=i.id);const a=await this[r](this.extend(s,t)),n=this.safeValue(a,"data",{}),o=this.safeValue(n,"tickers",[]),h=this.indexBy(o,"symbol"),c=this.safeValue(h,i.id);return this.parseTicker(c,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.safeString(this.options,"defaultType","spot"),s=this.safeString(t,"type",i);let r;t=this.omit(t,"type"),"swap"===s||"future"===s?r="publicContractGetTickers":"spot"===s&&(r="publicSpotGetTicker");const a=await this[r](t),n=this.safeValue(a,"data",{}),o=this.safeValue(n,"tickers",[]),h={};for(let e=0;e<o.length;e++){const t=this.parseTicker(o[e]);h[t.symbol]=t}return this.filterByArray(h,"symbol",e)}async fetchCurrencies(e={}){const t=await this.publicAccountGetCurrencies(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"currencies",[]),r={};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"currency"),a=this.safeCurrencyCode(i),n=this.safeString(t,"name"),o=this.safeValue(t,"withdraw_enabled"),h=this.safeValue(t,"deposit_enabled"),c=o&&h;r[a]={id:i,code:a,name:n,info:t,active:c,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return r}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={};let a;s.spot?(a="publicSpotGetSymbolsBook",r.symbol=s.id,void 0!==t&&(r.size=t)):(s.swap||s.future)&&(a="publicContractGetDepth",r.contractID=s.id,void 0!==t&&(r.count=t));const n=await this[a](this.extend(r,i)),o=this.safeValue(n,"data",{});return s.spot?this.parseOrderBook(o,e,void 0,"buys","sells","price","amount"):s.swap||s.future?this.parseOrderBook(o,e,void 0,"buys","sells","price","vol"):void 0}parseTrade(e,t){const i=this.safeString2(e,"trade_id","detail_id");let s=this.safeInteger2(e,"order_time","create_time");void 0===s&&(s=this.safeTimestamp(e,"s_t")),void 0===s&&(s=this.parse8601(this.safeString(e,"created_at")));const r=this.safeInteger(e,"way");let a,n=this.safeStringLower2(e,"type","side");void 0===n&&void 0!==r&&(n=r<5?"buy":"sell");const o=this.safeString(e,"exec_type");void 0!==o&&(a="M"===o?"maker":"taker");let h=this.safeString2(e,"price","deal_price");h=this.safeString(e,"price_avg",h);let c=this.safeString2(e,"count","deal_vol");c=this.safeString(e,"size",c);const d=this.safeString2(e,"amount","notional"),u=this.safeInteger(e,"order_id"),l=this.safeString2(e,"contract_id","symbol"),f=this.safeSymbol(l,t,"_"),p=this.safeString(e,"fees");let m;if(void 0!==p){const i=this.safeString(e,"fee_coin_name");let s=this.safeCurrencyCode(i);void 0===s&&void 0!==t&&(s="buy"===n?t.base:t.quote),m={cost:p,currency:s}}return this.safeTrade({info:e,id:i,order:u,timestamp:s,datetime:this.iso8601(s),symbol:f,type:void 0,side:n,price:h,amount:c,cost:d,takerOrMaker:a,fee:m},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};let n;r.spot?(a.symbol=r.id,n="publicSpotGetSymbolsTrades"):(r.swap||r.future)&&(n="publicContractGetTrades",a.contractID=r.id);const o=await this[n](this.extend(a,s)),h=this.safeValue(o,"data",{}),c=this.safeValue(h,"trades",[]);return this.parseTrades(c,r,t,i)}parseOHLCV(e,t){return Array.isArray(e)?[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]:[this.safeTimestamp(e,"timestamp"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n=a.type;let o;const h={},c=this.parseTimeframe(t);if("spot"===n){o="publicSpotGetSymbolsKline",h.symbol=a.id,h.step=this.timeframes[t];const e=500;if(void 0===s&&(s=e),s=Math.min(e,s),void 0===i){const e=parseInt(this.milliseconds()/1e3),t=e-s*c;h.from=t,h.to=e}else{const e=parseInt(i/1e3),t=this.sum(e,s*c);h.from=e,h.to=t}}else if("swap"===n||"future"===n){o="publicContractGetQuote",h.contractID=a.id;const e=500;if(void 0===s&&(s=e),void 0===i){const e=parseInt(this.milliseconds()/1e3),t=e-s*c;h.startTime=t,h.endTime=e}else{const e=parseInt(i/1e3),t=this.sum(e,s*c);h.startTime=e,h.endTime=t}h.unit=this.timeframes[t],h.resolution="M"}const d=await this[o](this.extend(h,r)),u=this.safeValue(d,"data",{});if(Array.isArray(u))return this.parseOHLCVs(u,a,t,i,s);{const e=this.safeValue(u,"klines",[]);return this.parseOHLCVs(e,a,t,i,s)}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new u(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(e);let a;const n={};r.spot?(n.symbol=r.id,n.offset=1,void 0===i&&(i=100),n.limit=i,a="privateSpotGetTrades"):(r.swap||r.future)&&(n.contractID=r.id,void 0!==i&&(n.size=i),a="privateContractGetUserTrades");const o=await this[a](this.extend(n,s)),h=this.safeValue(o,"data",{}),c=this.safeValue(h,"trades",[]);return this.parseTrades(c,r,t,i)}async fetchOrderTrades(e,t,i,s,r={}){if(void 0===t)throw new u(this.id+" fetchOrderTrades() requires a symbol argument");await this.loadMarkets();const a=this.market(t);let n;const o={};a.spot?(o.symbol=a.id,o.order_id=e,n="privateSpotGetTrades"):(a.swap||a.future)&&(o.contractID=a.id,o.orderID=e,n="privateContractGetOrderTrades");const h=await this[n](this.extend(o,r)),c=this.safeValue(h,"data",{}),d=this.safeValue(c,"trades",[]);return this.parseTrades(d,a,i,s)}async fetchBalance(e={}){let t;await this.loadMarkets();const i=this.safeValue(this.options,"fetchBalance",{}),s=this.safeString(this.options,"defaultType","spot");let r=this.safeString(i,"type",s);r=this.safeString(e,"type",r),e=this.omit(e,"type"),"spot"===r?t="privateSpotGetWallet":"account"===r?t="privateAccountGetWallet":"swap"!==r&&"future"!==r&&"contract"!==r||(t="privateContractGetAccounts");const a=await this[t](e),n=this.safeValue(a,"data",{}),o=this.safeValue2(n,"wallet","accounts",[]),h={info:a};for(let e=0;e<o.length;e++){const t=o[e];let i=this.safeString2(t,"id","currency");i=this.safeString(t,"coin_code",i);const s=this.safeCurrencyCode(i),r=this.account();r.free=this.safeString2(t,"available","available_vol"),r.used=this.safeString2(t,"frozen","freeze_vol"),h[s]=r}return this.parseBalance(h)}parseOrder(e,t){let i;"string"==typeof e&&(i=e,e={}),i=this.safeString(e,"order_id",i);let s=this.parse8601(this.safeString(e,"created_at"));s=this.safeInteger(e,"create_time",s);const r=this.safeString2(e,"symbol","contract_id"),a=this.safeSymbol(r,t,"_");let n;void 0!==t&&(n=this.parseOrderStatusByType(t.type,this.safeString(e,"status")));const o=this.safeString2(e,"size","vol"),h=this.safeString2(e,"filled_size","done_vol"),c=this.safeString2(e,"price_avg","done_avg_price"),d=this.safeString(e,"price"),u=this.safeString2(e,"way","side"),l=this.safeInteger(e,"category");let f=this.safeString(e,"type");return 1===l?f="limit":2===l&&(f="market"),this.safeOrder2({id:i,clientOrderId:void 0,info:e,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:a,type:f,timeInForce:void 0,postOnly:void 0,side:u,price:d,stopPrice:void 0,amount:o,cost:void 0,average:c,filled:h,remaining:void 0,status:n,fee:void 0,trades:void 0},t)}parseOrderStatusByType(e,t){const i=this.safeValue({spot:{1:"failed",2:"open",3:"failed",4:"open",5:"open",6:"closed",7:"canceling",8:"canceled"},swap:{1:"open",2:"open",4:"closed"}},e,{});return this.safeString(i,t,t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o={};let h;if(n.spot){if(o.symbol=n.id,o.side=i,o.type=t,h="privateSpotPostSubmitOrder","limit"===t)o.size=this.amountToPrecision(e,s),o.price=this.priceToPrecision(e,r);else if("market"===t)if("buy"===i){let e=this.safeNumber(a,"notional");if(this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){if(void 0!==r)void 0===e&&(e=s*r);else if(void 0===e)throw new f(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'notional' extra parameter (the exchange-specific behaviour)")}else e=void 0===e?s:e;const t=n.precision.price;o.notional=this.decimalToPrecision(e,k,t,this.precisionMode)}else"sell"===i&&(o.size=this.amountToPrecision(e,s))}else(n.swap||n.future)&&(h="privateContractPostSubmitOrder",o.contractID=n.id,"limit"===t?o.category=1:"market"===t&&(o.category=2),o.way=i,o.custom_id=this.nonce(),o.open_type=1,o.leverage=1,o.price=this.priceToPrecision(e,r),o.vol=this.amountToPrecision(e,s));const c=await this[h](this.extend(o,a)),d=this.safeValue(c,"data",{});return this.parseOrder(d,n)}async cancelOrder(e,t,i={}){if(void 0===t)throw new u(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={};let a;s.spot?(a="privateSpotPostCancelOrder",r.order_id=parseInt(e),r.symbol=s.id):(s.swap||s.future)&&(a="privateContractPostCancelOrders",r.contractID=s.id,r.orders=[parseInt(e)]);const n=await this[a](this.extend(r,i)),o=this.safeValue(n,"data");if(!0===o)return this.parseOrder(e,s);const h=this.safeValue(o,"succeed");if(void 0!==h){if(void 0===(e=this.safeString(h,0)))throw new f(this.id+" cancelOrder() failed to cancel "+t+" order id "+e)}else if(!this.safeValue(o,"result"))throw new f(this.id+" cancelOrder() "+t+" order id "+e+" is filled or canceled");const c=this.parseOrder(e,s);return this.extend(c,{id:e})}async cancelAllOrders(e,t={}){if(void 0===e)throw new u(this.id+" cancelAllOrders() requires a symbol argument");const i=this.safeString(t,"side");if(void 0===i)throw new u(this.id+" cancelAllOrders() requires a `side` parameter ('buy' or 'sell')");await this.loadMarkets();const s=this.market(e);if(!s.spot)throw new b(this.id+" cancelAllOrders() does not support "+s.type+" orders, only spot orders are accepted");const r={symbol:s.id,side:i};return await this.privateSpotPostCancelOrders(this.extend(r,t))}async cancelOrders(e,t,i={}){if(void 0===t)throw new u(this.id+" canelOrders() requires a symbol argument");await this.loadMarkets();const s=this.market(t);if(!s.spot)throw new b(this.id+" cancelOrders() does not support "+s.type+" orders, only contract orders are accepted");const r=[];for(let t=0;t<e.length;t++)r.push(parseInt(e[t]));const a={orders:r};return await this.privateContractPostCancelOrders(this.extend(a,i))}async fetchOrdersByStatus(e,t,i,s,r={}){if(void 0===t)throw new u(this.id+" fetchOrdersByStatus() requires a symbol argument");await this.loadMarkets();const a=this.market(t),n={};let o;a.spot?(o="privateSpotGetOrders",n.symbol=a.id,n.offset=1,n.limit=100,n.status="open"===e?9:"closed"===e?6:e):(a.swap||a.future)&&(o="privateContractGetUserOrders",n.contractID=a.id,void 0!==s&&(n.size=s),n.status="open"===e?3:"closed"===e?4:e);const h=await this[o](this.extend(n,r)),c=this.safeValue(h,"data",{}),d=this.safeValue(c,"orders",[]);return this.parseOrders(d,a,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("open",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("closed",e,t,i,s)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new u(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e);if(!r.swap&&!r.future)throw new b(this.id+" fetchOrders does not support "+r.type+" markets, only contracts are supported");return await this.fetchOrdersByStatus(0,e,t,i,s)}async fetchOrder(e,t,i={}){if(void 0===t)throw new u(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s={},r=this.market(t);let a;"string"!=typeof e&&(e=e.toString()),r.spot?(s.symbol=r.id,s.order_id=e,a="privateSpotGetOrderDetail"):(r.swap||r.future)&&(s.contractID=r.id,s.orderID=e,a="privateContractGetUserOrderInfo");const n=await this[a](this.extend(s,i)),o=this.safeValue(n,"data");if("orders"in o){const i=this.safeValue(o,"orders",[]),s=this.safeValue(i,0);if(void 0===s)throw new g(this.id+" fetchOrder() could not find "+t+" order id "+e);return this.parseOrder(s,r)}return this.parseOrder(o,r)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id};if("USDT"===e){const s=this.safeValue(this.options,"defaultNetworks"),r=this.safeStringUpper(s,e),a=this.safeValue(this.options,"networks",{});let n=this.safeStringUpper(t,"network",r);n=this.safeString(a,n,n),void 0!==n&&(i.currency+="-"+n,t=this.omit(t,"network"))}const s=await this.privateAccountGetDepositAddress(this.extend(i,t)),r=this.safeValue(s,"data",{}),a=this.safeString(r,"address"),n=this.safeString(r,"address_memo");return this.checkAddress(a),{currency:e,address:a,tag:n,network:void 0,info:s}}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),n={currency:a.id,amount:t,destination:"To Digital Address",address:i};if(void 0!==s&&(n.address_memo=s),"USDT"===e){const t=this.safeValue(this.options,"defaultNetworks"),i=this.safeStringUpper(t,e),s=this.safeValue(this.options,"networks",{});let a=this.safeStringUpper(r,"network",i);a=this.safeString(s,a,a),void 0!==a&&(n.currency+="-"+a,r=this.omit(r,"network"))}const o=await this.privateAccountPostWithdrawApply(this.extend(n,r)),h=this.safeValue(o,"data"),c=this.parseTransaction(h,a);return this.extend(c,{code:e,address:i,tag:s})}async fetchTransactionsByType(e,t,i,s,r={}){await this.loadMarkets(),void 0===s&&(s=50);const a={operation_type:e,offset:1,limit:s};let n;void 0!==t&&(n=this.currency(t),a.currency=n.id);const o=await this.privateAccountGetDepositWithdrawHistory(this.extend(a,r)),h=this.safeValue(o,"data",{}),c=this.safeValue(h,"records",[]);return this.parseTransactions(c,n,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsByType("deposit",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsByType("withdraw",e,t,i,s)}parseTransactionStatus(e){return this.safeString({0:"pending",1:"pending",2:"pending",3:"ok",4:"canceled",5:"failed"},e,e)}parseTransaction(e,t){let i;const s=this.safeString(e,"withdraw_id"),r=this.safeString(e,"deposit_id");let a;void 0!==s&&""!==s?(a="withdraw",i=s):void 0!==r&&""!==r&&(a="deposit",i=r);const n=this.safeNumber(e,"arrival_amount"),o=this.safeInteger(e,"apply_time"),h=this.safeString(e,"currency"),c=this.safeCurrencyCode(h,t),d=this.parseTransactionStatus(this.safeString(e,"status")),u=this.safeNumber(e,"fee");let l;void 0!==u&&(l={cost:u,currency:c});let f=this.safeString(e,"tx_id");return""===f&&(f=void 0),{info:e,id:i,currency:c,amount:n,address:this.safeString(e,"address"),addressFrom:void 0,addressTo:void 0,tag:this.safeString(e,"address_memo"),tagFrom:void 0,tagTo:void 0,status:d,type:a,updated:void 0,txid:f,timestamp:o,datetime:this.iso8601(o),fee:l}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){const n=this.safeString(t,0),o=this.safeString(t,1);let h=this.implodeHostname(this.urls.api.rest)+"/"+o;"system"!==o&&(h+="/"+this.version),h+="/"+this.implodeParams(e,s);const c=this.omit(s,this.extractParams(e));if("system"===o)Object.keys(c).length&&(h+="?"+this.urlencode(c));else if("public"===n)Object.keys(c).length&&(h+="?"+this.urlencode(c));else if("private"===n){this.checkRequiredCredentials();const e=this.milliseconds().toString();let t="";r={"X-BM-KEY":this.apiKey,"X-BM-TIMESTAMP":e},"POST"===i||"PUT"===i?(r["Content-Type"]="application/json",t=a=this.json(c)):Object.keys(c).length&&(t=this.urlencode(c),h+="?"+t);const s=e+"#"+this.uid+"#"+t,n=this.hmac(this.encode(s),this.encode(this.secret));r["X-BM-SIGN"]=n}return{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,n,o,h){if(void 0===n)return;const c=this.safeString(n,"message"),d=this.safeString(n,"code");if(void 0!==d&&"1000"!==d||void 0!==c&&"OK"!==c){const e=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,e),this.throwBroadlyMatchedException(this.exceptions.broad,d,e),this.throwExactlyMatchedException(this.exceptions.exact,c,e),this.throwBroadlyMatchedException(this.exceptions.broad,c,e),new l(e)}}}},87763:(e,t,i)=>{"use strict";const s=i(48819),{TICK_SIZE:r}=i(62115),{AuthenticationError:a,BadRequest:n,DDoSProtection:o,ExchangeError:h,ExchangeNotAvailable:c,InsufficientFunds:d,InvalidOrder:u,OrderNotFound:l,PermissionDenied:f,ArgumentsRequired:p}=i(73449),m=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitmex",name:"BitMEX",countries:["SC"],version:"v1",userAgent:void 0,rateLimit:2e3,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchIndexOHLCV:!1,fetchLedger:!0,fetchMarkets:!0,fetchMarkOHLCV:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchPositions:!0,fetchPremiumIndexOHLCV:!1,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:"emulated",withdraw:!0},timeframes:{"1m":"1m","5m":"5m","1h":"1h","1d":"1d"},urls:{test:{public:"https://testnet.bitmex.com",private:"https://testnet.bitmex.com"},logo:"https://user-images.githubusercontent.com/1294454/27766319-f653c6e6-5ed4-11e7-933d-f0bc3699ae8f.jpg",api:{public:"https://www.bitmex.com",private:"https://www.bitmex.com"},www:"https://www.bitmex.com",doc:["https://www.bitmex.com/app/apiOverview","https://github.com/BitMEX/api-connectors/tree/master/official-http"],fees:"https://www.bitmex.com/app/fees",referral:"https://www.bitmex.com/register/upZpOX"},api:{public:{get:["announcement","announcement/urgent","funding","instrument","instrument/active","instrument/activeAndIndices","instrument/activeIntervals","instrument/compositeIndex","instrument/indices","insurance","leaderboard","liquidation","orderBook","orderBook/L2","quote","quote/bucketed","schema","schema/websocketHelp","settlement","stats","stats/history","trade","trade/bucketed"]},private:{get:["apiKey","chat","chat/channels","chat/connected","execution","execution/tradeHistory","notification","order","position","user","user/affiliateStatus","user/checkReferralCode","user/commission","user/depositAddress","user/executionHistory","user/margin","user/minWithdrawalFee","user/wallet","user/walletHistory","user/walletSummary"],post:["apiKey","apiKey/disable","apiKey/enable","chat","order","order/bulk","order/cancelAllAfter","order/closePosition","position/isolate","position/leverage","position/riskLimit","position/transferMargin","user/cancelWithdrawal","user/confirmEmail","user/confirmEnableTFA","user/confirmWithdrawal","user/disableTFA","user/logout","user/logoutAll","user/preferences","user/requestEnableTFA","user/requestWithdrawal"],put:["order","order/bulk","user"],delete:["apiKey","order","order/all"]}},exceptions:{exact:{"Invalid API Key.":a,"This key is disabled.":f,"Access Denied":f,"Duplicate clOrdID":u,"orderQty is invalid":u,"Invalid price":u,"Invalid stopPx for ordType":u},broad:{"Signature not valid":a,overloaded:c,"Account has insufficient Available Balance":d,"Service unavailable":c,"Server Error":h,"Unable to cancel order due to existing state":u}},precisionMode:r,options:{"api-expires":5,fetchOHLCVOpenTimestamp:!0}})}async fetchMarkets(e={}){const t=await this.publicGetInstrumentActiveAndIndices(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r="Unlisted"!==s.state,a=s.symbol,n=s.underlying,o=s.quoteCurrency,h=n+o,c=this.safeCurrencyCode(n),d=this.safeCurrencyCode(o),u=a===h,l=this.safeString2(s,"positionCurrency","quoteCurrency");let f,p=!1,g=!1;const y=this.safeCurrencyCode(l);let b=a;u?(f="swap",b=c+"/"+d):a.indexOf("B_")>=0?(g=!0,f="prediction"):(p=!0,f="future");const v={amount:void 0,price:void 0},w=this.safeNumber(s,"lotSize"),k=this.safeNumber(s,"tickSize");void 0!==w&&(v.amount=w),void 0!==k&&(v.price=k);const _=this.parseNumber(m.stringDiv("1",this.safeString(s,"initMargin","1"))),S={amount:{min:void 0,max:void 0},price:{min:k,max:this.safeNumber(s,"maxPrice")},cost:{min:void 0,max:void 0},leverage:{max:_}};S[y===d?"cost":"amount"]={min:w,max:this.safeNumber(s,"maxOrderQty")},i.push({id:a,symbol:b,base:c,quote:d,baseId:n,quoteId:o,active:r,precision:v,limits:S,taker:this.safeNumber(s,"takerFee"),maker:this.safeNumber(s,"makerFee"),type:f,spot:!1,swap:u,future:p,prediction:g,info:s})}return i}parseBalanceResponse(e){const t={info:e};for(let i=0;i<e.length;i++){const s=e[i],r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r),n=this.account();let o=this.safeString(s,"availableMargin"),h=this.safeString(s,"marginBalance");"BTC"===a&&(o=m.stringDiv(o,"1e8"),h=m.stringDiv(h,"1e8")),n.free=o,n.total=h,t[a]=n}return this.parseBalance(t)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUserMargin(this.extend({currency:"all"},e));return this.parseBalanceResponse(t)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id};void 0!==t&&(s.depth=t);const r=await this.publicGetOrderBookL2(this.extend(s,i)),a={symbol:e,bids:[],asks:[],timestamp:void 0,datetime:void 0,nonce:void 0};for(let e=0;e<r.length;e++){const t=r[e],i="Sell"===t.side?"asks":"bids",s=this.safeNumber(t,"size"),n=this.safeNumber(t,"price");void 0!==n&&a[i].push([n,s])}return a.bids=this.sortBy(a.bids,0,!0),a.asks=this.sortBy(a.asks,0),a}async fetchOrder(e,t,i={}){const s={filter:{orderID:e}},r=await this.fetchOrders(t,void 0,void 0,this.deepExtend(s,i));if(1===r.length)return r[0];throw new l(this.id+": The order "+e+" not found.")}async fetchOrders(e,t,i,s={}){let r;await this.loadMarkets();let a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==t&&(a.startTime=this.iso8601(t)),void 0!==i&&(a.count=i),a=this.deepExtend(a,s),"filter"in a&&(a.filter=this.json(a.filter));const n=await this.privateGetOrder(a);return this.parseOrders(n,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.deepExtend({filter:{open:!0}},s))}async fetchClosedOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async fetchMyTrades(e,t,i,s={}){let r;await this.loadMarkets();let a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==t&&(a.startTime=this.iso8601(t)),void 0!==i&&(a.count=i),a=this.deepExtend(a,s),"filter"in a&&(a.filter=this.json(a.filter));const n=await this.privateGetExecutionTradeHistory(a);return this.parseTrades(n,r,t,i)}parseLedgerEntryType(e){return this.safeString({Withdrawal:"transaction",RealisedPNL:"margin",UnrealisedPNL:"margin",Deposit:"transaction",Transfer:"transfer",AffiliatePayout:"referral"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"transactID"),s=this.safeString(e,"account"),r=this.safeString(e,"tx"),a=this.parseLedgerEntryType(this.safeString(e,"transactType")),n=this.safeString(e,"currency"),o=this.safeCurrencyCode(n,t);let h=this.safeNumber(e,"amount");void 0!==h&&(h/=1e8);let c=this.parse8601(this.safeString(e,"transactTime"));void 0===c&&(c=0);let d=this.safeNumber(e,"fee",0);void 0!==d&&(d/=1e8);const u={cost:d,currency:o};let l=this.safeNumber(e,"walletBalance");void 0!==l&&(l/=1e8);const f=this.sum(l,-h);let p;h<0?(p="out",h=Math.abs(h)):p="in";const m=this.parseTransactionStatus(this.safeString(e,"transactStatus"));return{id:i,info:e,timestamp:c,datetime:this.iso8601(c),direction:p,account:s,referenceId:r,referenceAccount:void 0,type:a,currency:o,amount:h,before:f,after:l,status:m,fee:u}}async fetchLedger(e,t,i,s={}){let r;await this.loadMarkets(),void 0!==e&&(r=this.currency(e));const a={};void 0!==i&&(a.count=i);const n=await this.privateGetUserWalletHistory(this.extend(a,s));return this.parseLedger(n,r,t,i)}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==i&&(r.count=i);const a=await this.privateGetUserWalletHistory(this.extend(r,s)),n=this.filterByArray(a,"transactType",["Withdrawal","Deposit"],!1);let o;return void 0!==e&&(o=this.currency(e)),this.parseTransactions(n,o,t,i)}parseTransactionStatus(e){return this.safeString({Canceled:"canceled",Completed:"ok",Pending:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"transactID"),s=this.parse8601(this.safeString(e,"transactTime")),r=this.parse8601(this.safeString(e,"timestamp")),a=this.safeStringLower(e,"transactType");let n,o,h;"withdrawal"===a&&(n=this.safeString(e,"address"),o=this.safeString(e,"tx"),h=n);let c=this.safeString(e,"amount");c=m.stringDiv(m.stringAbs(c),"1e8");let d=this.safeString(e,"fee");d=m.stringDiv(d,"1e8");const u={cost:this.parseNumber(d),currency:"BTC"};let l=this.safeString(e,"transactStatus");return void 0!==l&&(l=this.parseTransactionStatus(l)),{info:e,id:i,txid:void 0,timestamp:s,datetime:this.iso8601(s),addressFrom:o,address:n,addressTo:h,tagFrom:void 0,tag:void 0,tagTo:void 0,type:a,amount:this.parseNumber(c),currency:"BTC",status:l,updated:r,comment:void 0,fee:u}}async fetchTicker(e,t={}){if(await this.loadMarkets(),!this.market(e).active)throw new h(this.id+": symbol "+e+" is delisted");const i=await this.fetchTickers([e],t),s=this.safeValue(i,e);if(void 0===s)throw new h(this.id+" ticker symbol "+e+" not found");return s}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetInstrumentActiveAndIndices(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]),r=this.safeString(t,"symbol");void 0!==r&&(s[r]=t)}return this.filterByArray(s,"symbol",e)}parseTicker(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t),r=this.parse8601(this.safeString(e,"timestamp")),a=this.safeNumber(e,"prevPrice24h"),n=this.safeNumber(e,"lastPrice");return this.safeTicker({symbol:s,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"highPrice"),low:this.safeNumber(e,"lowPrice"),bid:this.safeNumber(e,"bidPrice"),bidVolume:void 0,ask:this.safeNumber(e,"askPrice"),askVolume:void 0,vwap:this.safeNumber(e,"vwap"),open:a,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"homeNotional24h"),quoteVolume:this.safeNumber(e,"foreignNotional24h"),info:e},t)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"timestamp")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id,binSize:this.timeframes[t],partial:!0};void 0!==s&&(n.count=s);const o=1e3*this.parseTimeframe(t),h=this.safeValue(this.options,"fetchOHLCVOpenTimestamp",!0);if(void 0!==i){let e=i;h&&(e=this.sum(e,o));const t=this.ymdhms(e);n.startTime=t}else n.reverse=!0;const c=await this.publicGetTradeBucketed(this.extend(n,r)),d=this.parseOHLCVs(c,a,t,i,s);if(h)for(let e=0;e<d.length;e++)d[e][0]=d[e][0]-o;return d}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"timestamp")),s=this.safeString2(e,"avgPx","price"),r=this.safeString2(e,"size","lastQty"),a=this.safeString(e,"execCost"),n=m.stringDiv(m.stringAbs(a),"1e8"),o=this.safeString(e,"trdMatchID"),h=this.safeString(e,"orderID"),c=this.safeStringLower(e,"side");let d;const u=m.stringDiv(this.safeString(e,"execComm"),"1e8");if(void 0!==u){const t=this.safeString(e,"settlCurrency");d={cost:u,currency:this.safeCurrencyCode(t),rate:this.safeString(e,"commission")}}const l=this.safeString(e,"execType");let f;void 0!==u&&"Trade"===l&&(f=m.stringLt(u,"0")?"maker":"taker");const p=this.safeString(e,"symbol"),g=this.safeSymbol(p,t),y=this.safeStringLower(e,"ordType");return this.safeTrade({info:e,timestamp:i,datetime:this.iso8601(i),symbol:g,id:o,order:h,type:y,takerOrMaker:f,side:c,price:s,cost:n,amount:r,fee:d},t)}parseOrderStatus(e){return this.safeString({New:"open",PartiallyFilled:"open",Filled:"closed",DoneForDay:"open",Canceled:"canceled",PendingCancel:"open",PendingNew:"open",Rejected:"rejected",Expired:"expired",Stopped:"open",Untriggered:"open",Triggered:"open"},e,e)}parseTimeInForce(e){return this.safeString({Day:"Day",GoodTillCancel:"GTC",ImmediateOrCancel:"IOC",FillOrKill:"FOK"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"ordStatus")),s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t),a=this.parse8601(this.safeString(e,"timestamp")),n=this.parse8601(this.safeString(e,"transactTime")),o=this.safeString(e,"price"),h=this.safeString(e,"orderQty"),c=this.safeString(e,"cumQty",0),d=this.safeString(e,"avgPx"),u=this.safeString(e,"orderID"),l=this.safeStringLower(e,"ordType"),f=this.safeStringLower(e,"side"),p=this.safeString(e,"clOrdID"),m=this.parseTimeInForce(this.safeString(e,"timeInForce")),g=this.safeNumber(e,"stopPx"),y="ParticipateDoNotInitiate"===this.safeString(e,"execInst");return this.safeOrder2({info:e,id:u,clientOrderId:p,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:n,symbol:r,type:l,timeInForce:m,postOnly:y,side:f,price:o,stopPrice:g,amount:h,cost:void 0,average:d,filled:c,remaining:void 0,status:i,fee:void 0,trades:void 0},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==t?a.startTime=this.iso8601(t):a.reverse=!0,void 0!==i&&(a.count=i);const n=await this.publicGetTrade(this.extend(a,s));return this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o=this.capitalize(t),h={symbol:n.id,side:this.capitalize(i),orderQty:parseFloat(this.amountToPrecision(e,s)),ordType:o};if("Stop"===o||"StopLimit"===o||"MarketIfTouched"===o||"LimitIfTouched"===o){const t=this.safeNumber2(a,"stopPx","stopPrice");if(void 0===t)throw new p(this.id+" createOrder() requires a stopPx or stopPrice parameter for the "+o+" order type");h.stopPx=parseFloat(this.priceToPrecision(e,t)),a=this.omit(a,["stopPx","stopPrice"])}"Limit"!==o&&"StopLimit"!==o&&"LimitIfTouched"!==o||(h.price=parseFloat(this.priceToPrecision(e,r)));const c=this.safeString2(a,"clOrdID","clientOrderId");void 0!==c&&(h.clOrdID=c,a=this.omit(a,["clOrdID","clientOrderId"]));const d=await this.privatePostOrder(this.extend(h,a));return this.parseOrder(d,n)}async editOrder(e,t,i,s,r,a,n={}){await this.loadMarkets();const o={},h=this.safeString2(n,"origClOrdID","clientOrderId");if(void 0!==h){o.origClOrdID=h;const e=this.safeString(n,"clOrdID","clientOrderId");void 0!==e&&(o.clOrdID=e),n=this.omit(n,["origClOrdID","clOrdID","clientOrderId"])}else o.orderID=e;void 0!==r&&(o.orderQty=r),void 0!==a&&(o.price=a);const c=await this.privatePutOrder(this.extend(o,n));return this.parseOrder(c)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=this.safeString2(i,"clOrdID","clientOrderId"),r={};void 0===s?r.orderID=e:(r.clOrdID=s,i=this.omit(i,["clOrdID","clientOrderId"]));const a=await this.privateDeleteOrder(this.extend(r,i)),n=this.safeValue(a,0,{}),o=this.safeString(n,"error");if(void 0!==o&&o.indexOf("Unable to cancel order due to existing state")>=0)throw new l(this.id+" cancelOrder() failed: "+o);return this.parseOrder(n)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s;void 0!==e&&(s=this.market(e),i.symbol=s.id);const r=await this.privateDeleteOrderAll(this.extend(i,t));return this.parseOrders(r,s)}async fetchPositions(e,t={}){return await this.loadMarkets(),await this.privateGetPosition(t)}isFiat(e){return"EUR"===e||"PLN"===e}async withdraw(e,t,i,s,r={}){if([s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets(),"BTC"!==e)throw new h(this.id+" supoprts BTC withdrawals only, other currencies coming soon...");const a={currency:"XBt",amount:t,address:i},n=await this.privatePostUserRequestWithdrawal(this.extend(a,r));return{info:n,id:this.safeString(n,"transactID")}}handleErrors(e,t,i,s,r,a,c,d,u){if(void 0!==c){if(429===e)throw new o(this.id+" "+a);if(e>=400){const t=this.safeValue(c,"error",{}),i=this.safeString(t,"message"),s=this.id+" "+a;if(this.throwExactlyMatchedException(this.exceptions.exact,i,s),this.throwBroadlyMatchedException(this.exceptions.broad,i,s),400===e)throw new n(s);throw new h(s)}}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n="/api/"+this.version+"/"+e;if("GET"===i)Object.keys(s).length&&(n+="?"+this.urlencode(s));else{const e=this.safeString(s,"_format");void 0!==e&&(n+="?"+this.urlencode({_format:e}),s=this.omit(s,"_format"))}const o=this.urls.api[t]+n;if(this.apiKey&&this.secret){let e=i+n,t=this.safeInteger(this.options,"api-expires");r={"Content-Type":"application/json","api-key":this.apiKey},t=this.sum(this.seconds(),t),t=t.toString(),e+=t,r["api-expires"]=t,"POST"!==i&&"PUT"!==i&&"DELETE"!==i||Object.keys(s).length&&(e+=a=this.json(s)),r["api-signature"]=this.hmac(this.encode(e),this.encode(this.secret))}return{url:o,method:i,body:a,headers:r}}}},93223:(e,t,i)=>{"use strict";const s=i(48819),{AuthenticationError:r,ExchangeError:a,PermissionDenied:n,BadRequest:o,ArgumentsRequired:h,OrderNotFound:c,InsufficientFunds:d,ExchangeNotAvailable:u,DDoSProtection:l,InvalidAddress:f,InvalidOrder:p}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitpanda",name:"Bitpanda Pro",countries:["AT"],rateLimit:300,version:"v1",has:{cancelAllOrders:!0,cancelOrder:!0,cancelOrders:!0,CORS:void 0,createDepositAddress:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFees:!0,fetchWithdrawals:!0,privateAPI:!0,publicAPI:!0,withdraw:!0},timeframes:{"1m":"1/MINUTES","5m":"5/MINUTES","15m":"15/MINUTES","30m":"30/MINUTES","1h":"1/HOURS","4h":"4/HOURS","1d":"1/DAYS","1w":"1/WEEKS","1M":"1/MONTHS"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87591171-9a377d80-c6f0-11ea-94ac-97a126eac3bc.jpg",api:{public:"https://api.exchange.bitpanda.com/public",private:"https://api.exchange.bitpanda.com/public"},www:"https://www.bitpanda.com/en/pro",doc:["https://developers.bitpanda.com/exchange/"],fees:"https://www.bitpanda.com/en/pro/fees"},api:{public:{get:["currencies","candlesticks/{instrument_code}","fees","instruments","order-book/{instrument_code}","market-ticker","market-ticker/{instrument_code}","price-ticks/{instrument_code}","time"]},private:{get:["account/balances","account/deposit/crypto/{currency_code}","account/deposit/fiat/EUR","account/deposits","account/deposits/bitpanda","account/withdrawals","account/withdrawals/bitpanda","account/fees","account/orders","account/orders/{order_id}","account/orders/{order_id}/trades","account/trades","account/trades/{trade_id}","account/trading-volume"],post:["account/deposit/crypto","account/withdraw/crypto","account/withdraw/fiat","account/fees","account/orders"],delete:["account/orders","account/orders/{order_id}","account/orders/client/{client_id}"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:this.parseNumber("0.0015"),maker:this.parseNumber("0.001"),tiers:[{taker:[[this.parseNumber("0"),this.parseNumber("0.0015")],[this.parseNumber("100"),this.parseNumber("0.0013")],[this.parseNumber("250"),this.parseNumber("0.0013")],[this.parseNumber("1000"),this.parseNumber("0.001")],[this.parseNumber("5000"),this.parseNumber("0.0009")],[this.parseNumber("10000"),this.parseNumber("0.00075")],[this.parseNumber("20000"),this.parseNumber("0.00065")]],maker:[[this.parseNumber("0"),this.parseNumber("0.001")],[this.parseNumber("100"),this.parseNumber("0.001")],[this.parseNumber("250"),this.parseNumber("0.0009")],[this.parseNumber("1000"),this.parseNumber("0.00075")],[this.parseNumber("5000"),this.parseNumber("0.0006")],[this.parseNumber("10000"),this.parseNumber("0.0005")],[this.parseNumber("20000"),this.parseNumber("0.0005")]]}]}},requiredCredentials:{apiKey:!0,secret:!1},exceptions:{exact:{INVALID_CLIENT_UUID:p,ORDER_NOT_FOUND:c,ONLY_ONE_ERC20_ADDRESS_ALLOWED:f,DEPOSIT_ADDRESS_NOT_USED:f,INVALID_CREDENTIALS:r,MISSING_CREDENTIALS:r,INVALID_APIKEY:r,INVALID_SCOPES:r,INVALID_SUBJECT:r,INVALID_ISSUER:r,INVALID_AUDIENCE:r,INVALID_DEVICE_ID:r,INVALID_IP_RESTRICTION:r,APIKEY_REVOKED:r,APIKEY_EXPIRED:r,SYNCHRONIZER_TOKEN_MISMATCH:r,SESSION_EXPIRED:r,INTERNAL_ERROR:r,CLIENT_IP_BLOCKED:n,MISSING_PERMISSION:n,ILLEGAL_CHARS:o,UNSUPPORTED_MEDIA_TYPE:o,ACCOUNT_HISTORY_TIME_RANGE_TOO_BIG:o,CANDLESTICKS_TIME_RANGE_TOO_BIG:o,INVALID_INSTRUMENT_CODE:o,INVALID_ORDER_TYPE:o,INVALID_UNIT:o,INVALID_PERIOD:o,INVALID_TIME:o,INVALID_DATE:o,INVALID_CURRENCY:o,INVALID_AMOUNT:o,INVALID_PRICE:o,INVALID_LIMIT:o,INVALID_QUERY:o,INVALID_CURSOR:o,INVALID_ACCOUNT_ID:o,INVALID_SIDE:p,INVALID_ACCOUNT_HISTORY_FROM_TIME:o,INVALID_ACCOUNT_HISTORY_MAX_PAGE_SIZE:o,INVALID_ACCOUNT_HISTORY_TIME_PERIOD:o,INVALID_ACCOUNT_HISTORY_TO_TIME:o,INVALID_CANDLESTICKS_GRANULARITY:o,INVALID_CANDLESTICKS_UNIT:o,INVALID_ORDER_BOOK_DEPTH:o,INVALID_ORDER_BOOK_LEVEL:o,INVALID_PAGE_CURSOR:o,INVALID_TIME_RANGE:o,INVALID_TRADE_ID:o,INVALID_UI_ACCOUNT_SETTINGS:o,NEGATIVE_AMOUNT:p,NEGATIVE_PRICE:p,MIN_SIZE_NOT_SATISFIED:p,BAD_AMOUNT_PRECISION:p,BAD_PRICE_PRECISION:p,BAD_TRIGGER_PRICE_PRECISION:p,MAX_OPEN_ORDERS_EXCEEDED:o,MISSING_PRICE:p,MISSING_ORDER_TYPE:p,MISSING_SIDE:p,MISSING_CANDLESTICKS_PERIOD_PARAM:h,MISSING_CANDLESTICKS_UNIT_PARAM:h,MISSING_FROM_PARAM:h,MISSING_INSTRUMENT_CODE:h,MISSING_ORDER_ID:p,MISSING_TO_PARAM:h,MISSING_TRADE_ID:h,INVALID_ORDER_ID:c,NOT_FOUND:c,INSUFFICIENT_LIQUIDITY:d,INSUFFICIENT_FUNDS:d,NO_TRADING:u,SERVICE_UNAVAILABLE:u,GATEWAY_TIMEOUT:u,RATELIMIT:l,CF_RATELIMIT:l,INTERNAL_SERVER_ERROR:a},broad:{}},commonCurrencies:{MIOTA:"IOTA"},options:{fetchTradingFees:{method:"fetchPrivateTradingFees"},fiat:["EUR","CHF"]}})}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeInteger(t,"epoch_millis")}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"code"),a=this.safeCurrencyCode(r);i[a]={id:r,code:a,name:void 0,info:s,active:void 0,fee:void 0,precision:this.safeInteger(s,"precision"),limits:{amount:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return i}async fetchMarkets(e={}){const t=await this.publicGetInstruments(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeValue(s,"base",{}),a=this.safeValue(s,"quote",{}),n=this.safeString(r,"code"),o=this.safeString(a,"code"),h=n+"_"+o,c=this.safeCurrencyCode(n),d=this.safeCurrencyCode(o),u=c+"/"+d,l={amount:this.safeInteger(s,"amount_precision"),price:this.safeInteger(s,"market_precision")},f={amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(s,"min_size"),max:void 0}},p="ACTIVE"===this.safeString(s,"state");i.push({info:s,id:h,symbol:u,base:c,quote:d,baseId:n,quoteId:o,precision:l,limits:f,type:"spot",spot:!0,active:p})}return i}async fetchTradingFees(e={}){let t=this.safeString(e,"method");if(e=this.omit(e,"method"),void 0===t){const e=this.safeValue(this.options,"fetchTradingFees",{});t=this.safeString(e,"method","fetchPrivateTradingFees")}return await this[t](e)}async fetchPublicTradingFees(e={}){await this.loadMarkets();const t=await this.publicGetFees(e),i=this.indexBy(t,"fee_group_id"),s=this.safeValue(this.options,"fee_group_id","default"),r=this.safeValue(i,s,{}),a=this.safeValue(r,"fee_tiers"),n={};for(let e=0;e<this.symbols.length;e++){const t=this.symbols[e],i={info:r,symbol:t,maker:void 0,taker:void 0,percentage:!0,tierBased:!0},s=[],o=[];for(let e=0;e<a.length;e++){const t=a[e],r=this.safeNumber(t,"volume");let n=this.safeNumber(t,"taker_fee"),h=this.safeNumber(t,"maker_fee");n/=100,h/=100,s.push([r,n]),o.push([r,h]),0===e&&(i.taker=n,i.maker=h)}const h={taker:s,maker:o};i.tiers=h,n[t]=i}return n}async fetchPrivateTradingFees(e={}){await this.loadMarkets();const t=await this.privateGetAccountFees(e),i=this.safeValue(t,"active_fee_tier",{}),s={info:t,maker:this.safeNumber(i,"maker_fee"),taker:this.safeNumber(i,"taker_fee"),percentage:!0,tierBased:!0},r=this.safeValue(t,"fee_tiers"),a=[],n=[];for(let e=0;e<r.length;e++){const t=r[e],i=this.safeNumber(t,"volume");let s=this.safeNumber(t,"taker_fee"),o=this.safeNumber(t,"maker_fee");s/=100,o/=100,a.push([i,s]),n.push([i,o])}const o={taker:a,maker:n};return s.tiers=o,s}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"time")),s=this.safeString(e,"instrument_code"),r=this.safeSymbol(s,t,"_"),a=this.safeNumber(e,"last_price"),n=this.safeNumber(e,"price_change_percentage"),o=this.safeNumber(e,"price_change"),h=this.safeNumber(e,"base_volume"),c=this.safeNumber(e,"quote_volume"),d=this.vwap(h,c);return this.safeTicker({symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"best_bid"),bidVolume:void 0,ask:this.safeNumber(e,"best_ask"),askVolume:void 0,vwap:d,open:void 0,close:a,last:a,previousClose:void 0,change:o,percentage:n,average:void 0,baseVolume:h,quoteVolume:c,info:e},t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={instrument_code:i.id},r=await this.publicGetMarketTickerInstrumentCode(this.extend(s,t));return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketTicker(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]);s[t.symbol]=t}return this.filterByArray(s,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={instrument_code:this.marketId(e)};void 0!==t&&(s.depth=t);const r=await this.publicGetOrderBookInstrumentCode(this.extend(s,i)),a=this.parse8601(this.safeString(r,"time"));return this.parseOrderBook(r,e,a,"bids","asks","price","amount")}parseOHLCV(e,t){const i=this.safeValue(e,"granularity"),s=this.safeString(i,"unit"),r=this.safeString(i,"period")+this.safeString({MINUTES:"m",HOURS:"h",DAYS:"d",WEEKS:"w",MONTHS:"M"},s),a=1e3*this.parseTimeframe(r),n=this.parse8601(this.safeString(e,"time")),o=a*parseInt(n/a),h=this.safeValue(this.options,"fetchOHLCV",{}),c=this.safeString(h,"volume","total_amount");return[o,this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,c)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n=this.safeString(this.timeframes,t),[o,h]=n.split("/"),c=1e3*this.parseTimeframe(t);void 0===s&&(s=1500);const d={instrument_code:a.id,period:o,unit:h};if(void 0===i){const e=this.milliseconds();d.to=this.iso8601(e),d.from=this.iso8601(e-s*c)}else d.from=this.iso8601(i),d.to=this.iso8601(this.sum(i,s*c));const u=await this.publicGetCandlesticksInstrumentCode(this.extend(d,r));return this.parseOHLCVs(u,a,t,i,s)}parseTrade(e,t){const i=this.safeValue(e,"fee",{});e=this.safeValue(e,"trade",e);let s=this.safeInteger(e,"trade_timestamp");void 0===s&&(s=this.parse8601(this.safeString(e,"time")));const r=this.safeStringLower2(e,"side","taker_side"),a=this.safeString(e,"price"),n=this.safeString(e,"amount"),o=this.safeString(e,"volume"),h=this.safeString(e,"instrument_code"),c=this.safeSymbol(h,t,"_"),d=this.safeString(i,"fee_amount");let u,l;if(void 0!==d){const e=this.safeString(i,"fee_currency");l={cost:d,currency:this.safeCurrencyCode(e),rate:this.safeString(i,"fee_percentage")},u=this.safeStringLower(i,"fee_type")}return this.safeTrade({id:this.safeString2(e,"trade_id","sequence"),order:this.safeString(e,"order_id"),timestamp:s,datetime:this.iso8601(s),symbol:c,type:void 0,side:r,price:a,amount:n,cost:o,takerOrMaker:u,fee:l,info:e},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={instrument_code:r.id};void 0!==t&&(a.from=this.iso8601(t),a.to=this.iso8601(this.sum(t,144e5)));const n=await this.publicGetPriceTicksInstrumentCode(this.extend(a,s));return this.parseTrades(n,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountBalances(e),i=this.safeValue(t,"balances",[]),s={info:t};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currency_code"),a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(t,"available"),n.used=this.safeString(t,"locked"),s[a]=n}return this.parseBalance(s)}parseDepositAddress(e,t){let i;void 0!==t&&(i=t.code);const s=this.safeString(e,"address"),r=this.safeString(e,"destination_tag");return this.checkAddress(s),{currency:i,address:s,tag:r,network:void 0,info:e}}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},r=await this.privatePostAccountDepositCrypto(this.extend(s,t));return this.parseDepositAddress(r,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency_code:i.id},r=await this.privateGetAccountDepositCryptoCurrencyCode(this.extend(s,t));return this.parseDepositAddress(r,i)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a;if(void 0!==e&&(a=this.currency(e),r.currency_code=a.id),void 0!==i&&(r.max_page_size=i),void 0!==t){if(void 0===this.safeString(s,"to"))throw new h(this.id+' fetchDeposits() requires a "to" iso8601 string param with the since argument is specified');r.from=this.iso8601(t)}const n=await this.privateGetAccountDeposits(this.extend(r,s)),o=this.safeValue(n,"deposit_history",[]);return this.parseTransactions(o,a,t,i,{type:"deposit"})}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a;if(void 0!==e&&(a=this.currency(e),r.currency_code=a.id),void 0!==i&&(r.max_page_size=i),void 0!==t){if(void 0===this.safeString(s,"to"))throw new h(this.id+' fetchWithdrawals() requires a "to" iso8601 string param with the since argument is specified');r.from=this.iso8601(t)}const n=await this.privateGetAccountWithdrawals(this.extend(r,s)),o=this.safeValue(n,"withdrawal_history",[]);return this.parseTransactions(o,a,t,i,{type:"withdrawal"})}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),n={currency:e,amount:this.currencyToPrecision(e,t)},o=this.safeValue(this.options,"fiat",[]),c=this.inArray(e,o),d=c?"privatePostAccountWithdrawFiat":"privatePostAccountWithdrawCrypto";if(c){if(void 0===this.safeString(r,"payout_account_id"))throw h(this.id+" withdraw() requires a payout_account_id param for fiat "+e+" withdrawals")}else{const e={address:i};void 0!==s&&(e.destination_tag=s),n.recipient=e}const u=await this[d](this.extend(n,r));return this.parseTransaction(u,a)}parseTransaction(e,t){const i=this.safeString(e,"transaction_id"),s=this.safeNumber(e,"amount"),r=this.parse8601(this.safeString(e,"time")),a=this.safeString(e,"currency");t=this.safeCurrency(a,t);const n=this.safeNumber2(e,"fee_amount","fee");let o;const h=this.safeString(e,"recipient"),c=this.safeString(e,"destination_tag");if(void 0!==n){const t=this.safeString(e,"fee_currency",a);o={cost:n,currency:this.safeCurrencyCode(t)}}return{info:e,id:i,currency:t.code,amount:s,address:h,addressFrom:void 0,addressTo:h,tag:c,tagFrom:void 0,tagTo:c,status:"ok",type:void 0,updated:void 0,txid:this.safeString(e,"blockchain_transaction_id"),timestamp:r,datetime:this.iso8601(r),fee:o}}parseOrderStatus(e){return this.safeString({FILLED:"open",FILLED_FULLY:"closed",FILLED_CLOSED:"canceled",FILLED_REJECTED:"rejected",OPEN:"open",REJECTED:"rejected",CLOSED:"canceled",FAILED:"failed",STOP_TRIGGERED:"triggered"},e,e)}parseOrder(e,t){const i=this.safeValue(e,"order",e),s=this.safeString(i,"order_id"),r=this.safeString(i,"client_id"),a=this.parse8601(this.safeString(i,"time")),n=this.parseOrderStatus(this.safeString(i,"status")),o=this.parseOrderStatus(n),h=this.safeString(i,"instrument_code"),c=this.safeSymbol(h,t,"_"),d=this.safeString(i,"price"),u=this.safeString(i,"amount"),l=this.safeString(i,"filled_amount"),f=this.safeStringLower(i,"side"),p=this.safeStringLower(i,"type"),m=this.parseTimeInForce(this.safeString(i,"time_in_force")),g=this.safeNumber(i,"trigger_price"),y=this.safeValue(i,"is_post_only"),b=this.safeValue(e,"trades",[]);return this.safeOrder2({id:s,clientOrderId:r,info:e,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:c,type:p,timeInForce:m,postOnly:y,side:f,price:d,stopPrice:g,amount:u,cost:void 0,average:void 0,filled:l,remaining:void 0,status:o,trades:b},t)}parseTimeInForce(e){return this.safeString({GOOD_TILL_CANCELLED:"GTC",GOOD_TILL_TIME:"GTT",IMMEDIATE_OR_CANCELLED:"IOC",FILL_OR_KILL:"FOK"},e,e)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o=t.toUpperCase(),c={instrument_code:n.id,type:o,side:i.toUpperCase(),amount:this.amountToPrecision(e,s)};let d=!1;if("LIMIT"!==o&&"STOP"!==o||(d=!0),"STOP"===o){const i=this.safeNumber(a,"trigger_price");if(void 0===i)throw new h(this.id+" createOrder() requires a trigger_price param for "+t+" orders");c.trigger_price=this.priceToPrecision(e,i),a=this.omit(a,"trigger_price")}d&&(c.price=this.priceToPrecision(e,r));const u=this.safeString2(a,"clientOrderId","client_id");void 0!==u&&(c.client_id=u,a=this.omit(a,["clientOrderId","client_id"]));const l=await this.privatePostAccountOrders(this.extend(c,a));return this.parseOrder(l,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=this.safeString2(i,"clientOrderId","client_id");i=this.omit(i,["clientOrderId","client_id"]);let r="privateDeleteAccountOrdersOrderId";const a={};return void 0!==s?(r="privateDeleteAccountOrdersClientClientId",a.client_id=s):a.order_id=e,await this[r](this.extend(a,i))}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.market(e);i.instrument_code=t.id}return await this.privateDeleteAccountOrders(this.extend(i,t))}async cancelOrders(e,t,i={}){await this.loadMarkets();const s={ids:e.join(",")};return await this.privateDeleteAccountOrders(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privateGetAccountOrdersOrderId(this.extend(s,i));return this.parseOrder(r)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a;if(void 0!==e&&(a=this.market(e),r.instrument_code=a.id),void 0!==t){if(void 0===this.safeString(s,"to"))throw new h(this.id+' fetchOrders() requires a "to" iso8601 string param with the since argument is specified, max range is 100 days');r.from=this.iso8601(t)}void 0!==i&&(r.max_page_size=i);const n=await this.privateGetAccountOrders(this.extend(r,s)),o=this.safeValue(n,"order_history",[]);return this.parseOrders(o,a,t,i)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOpenOrders(e,t,i,this.extend({with_cancelled_and_rejected:!0},s))}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();const a={order_id:e};void 0!==s&&(a.max_page_size=s);const n=await this.privateGetAccountOrdersOrderIdTrades(this.extend(a,r)),o=this.safeValue(n,"trade_history",[]);let h;return void 0!==t&&(h=this.market(t)),this.parseTrades(o,h,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a;if(void 0!==e&&(a=this.market(e),r.instrument_code=a.id),void 0!==t){if(void 0===this.safeString(s,"to"))throw new h(this.id+' fetchMyTrades() requires a "to" iso8601 string param with the since argument is specified, max range is 100 days');r.from=this.iso8601(t)}void 0!==i&&(r.max_page_size=i);const n=await this.privateGetAccountTrades(this.extend(r,s)),o=this.safeValue(n,"trade_history",[]);return this.parseTrades(o,a,t,i)}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));return"public"===t?Object.keys(o).length&&(n+="?"+this.urlencode(o)):"private"===t&&(this.checkRequiredCredentials(),r={Accept:"application/json",Authorization:"Bearer "+this.apiKey},"POST"===i?(a=this.json(o),r["Content-Type"]="application/json"):Object.keys(o).length&&(n+="?"+this.urlencode(o))),{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,n,o,h,c){if(void 0===o)return;const d=this.safeString(o,"error");if(void 0!==d){const e=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,d,e),this.throwBroadlyMatchedException(this.exceptions.broad,d,e),new a(e)}}}},68120:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:n,InsufficientFunds:o,OrderNotFound:h,InvalidOrder:c,DDoSProtection:d,InvalidNonce:u,AuthenticationError:l,RateLimitExceeded:f,PermissionDenied:p,BadRequest:m,BadSymbol:g,AccountSuspended:y,OrderImmediatelyFillable:b,OnMaintenance:v}=i(73449),{TRUNCATE:w}=i(62115),k=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitrue",name:"Bitrue",countries:["SG"],rateLimit:1e3,certified:!1,version:"v1",has:{cancelAllOrders:!1,cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchBidsAsks:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!1,fetchDeposits:!0,fetchFundingFees:!1,fetchFundingHistory:!1,fetchFundingRate:!1,fetchFundingRateHistory:!1,fetchFundingRates:!1,fetchIndexOHLCV:!1,fetchIsolatedPositions:!1,fetchMarkets:!0,fetchMarkOHLCV:!1,fetchMyTrades:!0,fetchOHLCV:"emulated",fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchPositions:!1,fetchPremiumIndexOHLCV:!1,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTransactions:!1,fetchTransfers:!1,fetchWithdrawals:!0,setLeverage:!1,setMarginMode:!1,transfer:!1,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","1d":"1d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/139516488-243a830d-05dd-446b-91c6-c1f18fe30c63.jpg",api:{v1:"https://www.bitrue.com/api/v1",v2:"https://www.bitrue.com/api/v2",kline:"https://www.bitrue.com/kline-api"},www:"https://www.bitrue.com",referral:"https://www.bitrue.com/activity/task/task-landing?inviteCode=EZWETQE&cn=900000",doc:["https://github.com/Bitrue-exchange/bitrue-official-api-docs"],fees:"https://bitrue.zendesk.com/hc/en-001/articles/4405479952537"},api:{kline:{public:{get:{"public.json":1,"public{currency}.json":1}}},v1:{public:{get:{ping:1,time:1,exchangeInfo:1,depth:{cost:1,byLimit:[[100,1],[500,5],[1e3,10]]},trades:1,historicalTrades:5,aggTrades:1,"ticker/24hr":{cost:1,noSymbol:40},"ticker/price":{cost:1,noSymbol:2},"ticker/bookTicker":{cost:1,noSymbol:2}}},private:{get:{order:1,openOrders:1,allOrders:5,account:5,myTrades:{cost:5,noSymbol:40},"etf/net-value/{symbol}":1,"withdraw/history":1,"deposit/history":1},post:{order:4,"withdraw/commit":1},delete:{order:1}}},v2:{private:{get:{myTrades:5}}}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,taker:this.parseNumber("0.0098"),maker:this.parseNumber("0.0098")},future:{trading:{feeSide:"quote",tierBased:!0,percentage:!0,taker:this.parseNumber("0.000400"),maker:this.parseNumber("0.000200"),tiers:{taker:[[this.parseNumber("0"),this.parseNumber("0.000400")],[this.parseNumber("250"),this.parseNumber("0.000400")],[this.parseNumber("2500"),this.parseNumber("0.000350")],[this.parseNumber("7500"),this.parseNumber("0.000320")],[this.parseNumber("22500"),this.parseNumber("0.000300")],[this.parseNumber("50000"),this.parseNumber("0.000270")],[this.parseNumber("100000"),this.parseNumber("0.000250")],[this.parseNumber("200000"),this.parseNumber("0.000220")],[this.parseNumber("400000"),this.parseNumber("0.000200")],[this.parseNumber("750000"),this.parseNumber("0.000170")]],maker:[[this.parseNumber("0"),this.parseNumber("0.000200")],[this.parseNumber("250"),this.parseNumber("0.000160")],[this.parseNumber("2500"),this.parseNumber("0.000140")],[this.parseNumber("7500"),this.parseNumber("0.000120")],[this.parseNumber("22500"),this.parseNumber("0.000100")],[this.parseNumber("50000"),this.parseNumber("0.000080")],[this.parseNumber("100000"),this.parseNumber("0.000060")],[this.parseNumber("200000"),this.parseNumber("0.000040")],[this.parseNumber("400000"),this.parseNumber("0.000020")],[this.parseNumber("750000"),this.parseNumber("0")]]}}},delivery:{trading:{feeSide:"base",tierBased:!0,percentage:!0,taker:this.parseNumber("0.000500"),maker:this.parseNumber("0.000100"),tiers:{taker:[[this.parseNumber("0"),this.parseNumber("0.000500")],[this.parseNumber("250"),this.parseNumber("0.000450")],[this.parseNumber("2500"),this.parseNumber("0.000400")],[this.parseNumber("7500"),this.parseNumber("0.000300")],[this.parseNumber("22500"),this.parseNumber("0.000250")],[this.parseNumber("50000"),this.parseNumber("0.000240")],[this.parseNumber("100000"),this.parseNumber("0.000240")],[this.parseNumber("200000"),this.parseNumber("0.000240")],[this.parseNumber("400000"),this.parseNumber("0.000240")],[this.parseNumber("750000"),this.parseNumber("0.000240")]],maker:[[this.parseNumber("0"),this.parseNumber("0.000100")],[this.parseNumber("250"),this.parseNumber("0.000080")],[this.parseNumber("2500"),this.parseNumber("0.000050")],[this.parseNumber("7500"),this.parseNumber("0.0000030")],[this.parseNumber("22500"),this.parseNumber("0")],[this.parseNumber("50000"),this.parseNumber("-0.000050")],[this.parseNumber("100000"),this.parseNumber("-0.000060")],[this.parseNumber("200000"),this.parseNumber("-0.000070")],[this.parseNumber("400000"),this.parseNumber("-0.000080")],[this.parseNumber("750000"),this.parseNumber("-0.000090")]]}}}},options:{hasAlreadyAuthenticatedSuccessfully:!1,recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1,parseOrderToPrecision:!1,newOrderRespType:{market:"FULL",limit:"FULL"},networks:{SPL:"SOLANA",SOL:"SOLANA",DOGE:"dogecoin",ADA:"Cardano"}},exceptions:{exact:{"System is under maintenance.":v,"System abnormality":r,"You are not authorized to execute this request.":p,"API key does not exist":l,"Order would trigger immediately.":b,"Stop price would trigger immediately.":b,"Order would immediately match and take.":b,"Account has insufficient balance for requested action.":o,"Rest API trading is not enabled.":n,"You don't have permission.":p,"Market is closed.":n,"Too many requests. Please try again later.":d,"-1000":n,"-1001":n,"-1002":l,"-1003":f,"-1013":c,"-1015":f,"-1016":n,"-1020":m,"-1021":u,"-1022":l,"-1100":m,"-1101":m,"-1102":m,"-1103":m,"-1104":m,"-1105":m,"-1106":m,"-1111":m,"-1112":c,"-1114":m,"-1115":m,"-1116":m,"-1117":m,"-1118":m,"-1119":m,"-1120":m,"-1121":g,"-1125":l,"-1127":m,"-1128":m,"-1130":m,"-1131":m,"-2008":l,"-2010":r,"-2011":h,"-2013":h,"-2014":l,"-2015":l,"-2019":o,"-3005":o,"-3006":o,"-3008":o,"-3010":r,"-3015":r,"-3022":y,"-4028":m,"-3020":o,"-3041":o,"-5013":o,"-11008":o,"-4051":o},broad:{"has no operation privilege":p,MAX_POSITION:c}}})}costToPrecision(e,t){return this.decimalToPrecision(t,w,this.markets[e].precision.quote,this.precisionMode,this.paddingMode)}currencyToPrecision(e,t){return void 0!==this.safeValue(this.currencies[e],"precision")?this.decimalToPrecision(t,w,this.currencies[e].precision,this.precisionMode,this.paddingMode):this.numberToString(t)}nonce(){return this.milliseconds()-this.options.timeDifference}async fetchStatus(e={}){const t=await this.v1PublicGetPing(e),i=Object.keys(t).length?"maintenance":"ok";return this.status=this.extend(this.status,{status:i,updated:this.milliseconds()}),this.status}async fetchTime(e={}){const t=await this.v1PublicGetTime(e);return this.safeInteger(t,"serverTime")}async loadTimeDifference(e={}){const t=await this.fetchTime(e),i=this.milliseconds();return this.options.timeDifference=i-t,this.options.timeDifference}safeNetwork(e){const t=e.toUpperCase();return this.safeString2({Aeternity:"Aeternity",AION:"AION",Algorand:"Algorand",ASK:"ASK",ATOM:"ATOM","AVAX C-Chain":"AVAX C-Chain",bch:"bch",BCH:"BCH",BEP2:"BEP2",BEP20:"BEP20",Bitcoin:"Bitcoin",BRP20:"BRP20",Cardano:"ADA",CasinoCoin:"CasinoCoin","CasinoCoin XRPL":"CasinoCoin XRPL",Contentos:"Contentos",Dash:"Dash",Decoin:"Decoin",DeFiChain:"DeFiChain",DGB:"DGB",Divi:"Divi",dogecoin:"DOGE",EOS:"EOS",ERC20:"ERC20",ETC:"ETC",Filecoin:"Filecoin",FREETON:"FREETON",HBAR:"HBAR","Hedera Hashgraph":"Hedera Hashgraph",HRC20:"HRC20",ICON:"ICON",ICP:"ICP",Ignis:"Ignis","Internet Computer":"Internet Computer",IOTA:"IOTA",KAVA:"KAVA",KSM:"KSM",LiteCoin:"LiteCoin",Luna:"Luna",MATIC:"MATIC","Mobile Coin":"Mobile Coin",MonaCoin:"MonaCoin",Monero:"Monero",NEM:"NEM",NEP5:"NEP5",OMNI:"OMNI",PAC:"PAC",Polkadot:"Polkadot",Ravencoin:"Ravencoin",Safex:"Safex",SOLANA:"SOL",Songbird:"Songbird","Stellar Lumens":"Stellar Lumens",Symbol:"Symbol",Tezos:"XTZ",theta:"theta",THETA:"THETA",TRC20:"TRC20",VeChain:"VeChain",VECHAIN:"VECHAIN",Wanchain:"Wanchain","XinFin Network":"XinFin Network",XRP:"XRP",XRPL:"XRPL",ZIL:"ZIL"},e,t,e)}async fetchCurrencies(e={}){const t=await this.v1PublicGetExchangeInfo(e),i={},s=this.safeValue(t,"coins",[]);for(let e=0;e<s.length;e++){const t=s[e],r=this.safeString(t,"coin"),a=this.safeString(t,"coinFulName"),n=this.safeCurrencyCode(r),o=this.safeValue(t,"enableDeposit"),h=this.safeValue(t,"enableWithdraw"),c=void 0,d=this.safeValue(t,"chains",[]),u={};for(let e=0;e<d.length;e++){const t=d[e],i=this.safeNetwork(t);u[i]={info:t,id:t,network:i,active:void 0,fee:void 0,precision:void 0,limits:{withdraw:{min:void 0,max:void 0}}}}const l=h&&o;i[n]={id:r,name:a,code:n,precision:c,info:t,active:l,networks:u,fee:this.safeNumber(t,"withdrawFee"),limits:{withdraw:{min:this.safeNumber(t,"minWithdraw"),max:this.safeNumber(t,"maxWithdraw")}}}}return i}async fetchMarkets(e={}){const t=await this.v1PublicGetExchangeInfo(e);this.options.adjustForTimeDifference&&await this.loadTimeDifference();const i=this.safeValue(t,"symbols",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"symbol"),a=this.safeStringLower(t,"symbol"),n=this.safeString(t,"baseAsset"),o=this.safeString(t,"quoteAsset"),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=h+"/"+c,u=this.safeValue(t,"filters",[]),l=this.indexBy(u,"filterType"),f={base:this.safeInteger(t,"baseAssetPrecision"),quote:this.safeInteger(t,"quotePrecision"),amount:this.safeInteger(t,"quantityPrecision"),price:this.safeInteger(t,"pricePrecision")},p={id:r,lowercaseId:a,symbol:d,base:h,quote:c,baseId:n,quoteId:o,info:t,spot:!0,type:"spot",margin:!1,future:!1,delivery:!1,linear:!1,inverse:!1,expiry:void 0,expiryDatetime:void 0,active:"TRADING"===this.safeString(t,"status"),precision:f,contractSize:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}};if("PRICE_FILTER"in l){const e=this.safeValue(l,"PRICE_FILTER",{});p.limits.price={min:this.safeNumber(e,"minPrice"),max:this.safeNumber(e,"maxPrice")},p.precision.price=this.safeInteger(e,"priceScale")}if("LOT_SIZE"in l){const e=this.safeValue(l,"LOT_SIZE",{});p.precision.amount=this.safeInteger(e,"volumeScale"),p.limits.amount={min:this.safeNumber(e,"minQty"),max:this.safeNumber(e,"maxQty")},p.limits.cost.min=this.safeNumber(e,"minVal")}s.push(p)}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.v1PrivateGetAccount(e),i={info:t},s=this.safeInteger(t,"updateTime"),r=this.safeValue2(t,"balances",[]);for(let e=0;e<r.length;e++){const t=r[e],s=this.safeString(t,"asset"),a=this.safeCurrencyCode(s),n=this.account();n.free=this.safeString(t,"free"),n.used=this.safeString(t,"locked"),i[a]=n}return i.timestamp=s,i.datetime=this.iso8601(s),this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.v1PublicGetDepth(this.extend(s,i)),a=this.parseOrderBook(r,e);return a.nonce=this.safeInteger(r,"lastUpdateId"),a}parseTicker(e,t){const i=this.safeSymbol(void 0,t),s=this.safeNumber(e,"last");return this.safeTicker({symbol:i,timestamp:void 0,datetime:void 0,high:this.safeNumber(e,"high24hr"),low:this.safeNumber(e,"low24hr"),bid:this.safeNumber(e,"highestBid"),bidVolume:void 0,ask:this.safeNumber(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:s,last:s,previousClose:void 0,change:void 0,percentage:this.safeNumber(e,"percentChange"),average:void 0,baseVolume:this.safeNumber(e,"baseVolume"),quoteVolume:this.safeNumber(e,"quoteVolume"),info:e},t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=this.safeStringUpper(i,"baseId"),a=this.safeStringUpper(i,"quoteId"),n={currency:a,command:"returnTicker"},o=await this.klinePublicGetPublicCurrencyJson(this.extend(n,t)),h=this.safeValue(o,"data",{}),c=s+"_"+a,d=this.safeValue(h,c);if(void 0===d)throw new r(this.id+" fetchTicker() could not find the ticker for "+i.symbol);return this.parseTicker(d,i)}async fetchBidsAsks(e,t={}){await this.loadMarkets();const i=this.safeString2(this.options,"fetchBidsAsks","defaultType","spot"),s=this.safeString(t,"type",i),r=this.omit(t,"type");let a;a="future"===s?"fapiPublicGetTickerBookTicker":"delivery"===s?"dapiPublicGetTickerBookTicker":"publicGetTickerBookTicker";const n=await this[a](r);return this.parseTickers(n,e)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.klinePublicGetPublicJson(this.extend({command:"returnTicker"},t)),s=this.safeValue(i,"data",{}),r=Object.keys(s),a={};for(let e=0;e<r.length;e++){const t=r[e],[i,n]=t.split("_"),o=i+n,h=this.safeMarket(o),c=this.safeValue(s,t),d=this.parseTicker(c,h);a[d.symbol]=d}return a}parseTrade(e,t){const i=this.safeInteger2(e,"T","time"),s=this.safeString2(e,"p","price"),r=this.safeString2(e,"q","qty"),a=this.safeString(e,"symbol"),n=this.safeSymbol(a,t);let o,h=this.safeString2(e,"t","a");h=this.safeString2(e,"id","tradeId",h);const c=this.safeString(e,"orderId");let d,u;return"m"in e?o=e.m?"sell":"buy":"isBuyerMaker"in e?o=e.isBuyerMaker?"sell":"buy":"side"in e?o=this.safeStringLower(e,"side"):"isBuyer"in e&&(o=e.isBuyer?"buy":"sell"),"commission"in e&&(d={cost:this.safeString(e,"commission"),currency:this.safeCurrencyCode(this.safeString(e,"commissionAsset"))}),"isMaker"in e&&(u=e.isMaker?"maker":"taker"),"maker"in e&&(u=e.maker?"maker":"taker"),this.safeTrade({info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,id:h,order:c,type:void 0,side:o,takerOrMaker:u,price:s,amount:r,cost:void 0,fee:d},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},n=this.safeString(this.options,"fetchTradesMethod","v1PublicGetAggTrades");void 0!==i&&(a.limit=i);const o=await this[n](this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOrderStatus(e){return this.safeString({NEW:"open",PARTIALLY_FILLED:"open",FILLED:"closed",CANCELED:"canceled",PENDING_CANCEL:"canceling",REJECTED:"rejected",EXPIRED:"expired"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"status")),s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t),a=this.safeString(e,"executedQty");let n,o;"time"in e?n=this.safeInteger(e,"time"):"transactTime"in e?n=this.safeInteger(e,"transactTime"):"updateTime"in e&&"open"===i&&(k.stringGt(a,"0")?o=this.safeInteger(e,"updateTime"):n=this.safeInteger(e,"updateTime"));const h=this.safeString(e,"avgPrice"),c=this.safeString(e,"price"),d=this.safeString(e,"origQty"),u=this.safeString2(e,"cummulativeQuoteQty","cumQuote"),l=this.safeString(e,"orderId");let f=this.safeStringLower(e,"type");const p=this.safeStringLower(e,"side"),m=this.safeValue(e,"fills",[]);let g=this.safeString(e,"clientOrderId");""===g&&(g=void 0);const y=this.safeString(e,"timeInForce"),b="limit_maker"===f||"GTX"===y;"limit_maker"===f&&(f="limit");const v=this.safeString(e,"stopPrice"),w=this.parseNumber(this.omitZero(v));return this.safeOrder2({info:e,id:l,clientOrderId:g,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:o,symbol:r,type:f,timeInForce:y,postOnly:b,side:p,price:c,stopPrice:w,amount:d,cost:u,average:h,filled:a,remaining:void 0,status:i,fee:void 0,trades:m},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o=t.toUpperCase(),h=this.safeValue(n.info,"orderTypes");if(!this.inArray(o,h))throw new c(this.id+" "+t+" is not a valid order type in market "+e);const d={symbol:n.id,side:i.toUpperCase(),type:o,quantity:this.amountToPrecision(e,s)},u=this.safeString2(a,"newClientOrderId","clientOrderId");if(void 0!==u&&(a=this.omit(a,["newClientOrderId","clientOrderId"]),d.newClientOrderId=u),"LIMIT"===o){if(void 0===r)throw new c(this.id+" createOrder() requires a price argument");d.price=this.priceToPrecision(e,r)}const l=this.safeNumber(a,"stopPrice");void 0!==l&&(a=this.omit(a,"stopPrice"),d.stopPrice=this.priceToPrecision(e,l));const f=await this.v1PrivatePostOrder(this.extend(d,a));return this.parseOrder(f,n)}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={symbol:s.id},n=this.safeValue2(i,"origClientOrderId","clientOrderId");void 0!==n?r.origClientOrderId=n:r.orderId=e;const o=this.omit(i,["type","clientOrderId","origClientOrderId"]),h=await this.v1PrivateGetOrder(this.extend(r,o));return this.parseOrder(h,s)}async fetchClosedOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={symbol:r.id};void 0!==t&&(n.startTime=t),void 0!==i&&(n.limit=i);const o=await this.v1PrivateGetAllOrders(this.extend(n,s));return this.parseOrders(o,r,t,i)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={symbol:r.id},o=await this.v1PrivateGetOpenOrders(this.extend(n,s));return this.parseOrders(o,r,t,i)}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r=this.safeValue2(i,"origClientOrderId","clientOrderId"),n={symbol:s.id};void 0===r?n.orderId=e:n.origClientOrderId=r;const o=this.omit(i,["type","origClientOrderId","clientOrderId"]),h=await this.v1PrivateDeleteOrder(this.extend(n,o));return this.parseOrder(h,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==t&&(r.startTime=t),void 0!==i&&(r.limit=i);const n=await this.v1PrivateGetMyTrades(this.extend(r,s));return this.parseTrades(n,a,t,i)}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchDeposits requires a code argument");await this.loadMarkets();const r=this.currency(e),n={coin:r.id,status:1};void 0!==t&&(n.startTime=t),void 0!==i&&(n.limit=i);const o=await this.v1PrivateGetDepositHistory(this.extend(n,s)),h=this.safeValue(o,"data",[]);return this.parseTransactions(h,r,t,i)}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchWithdrawals requires a code argument");await this.loadMarkets();const r=this.currency(e),n={coin:r.id,status:5};void 0!==t&&(n.startTime=t),void 0!==i&&(n.limit=i);const o=await this.v1PrivateGetWithdrawHistory(this.extend(n,s)),h=this.safeValue(o,"data",{});return this.parseTransaction(h,r)}parseTransactionStatusByType(e,t){const i=this.safeValue({deposit:{0:"pending",1:"ok"},withdrawal:{0:"pending",5:"ok",6:"canceled"}},t,{});return this.safeString(i,e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"tagType");let r=this.safeString(e,"addressTo");""===r&&(r=void 0);let a,n,o=this.safeString(e,"addressFrom");if(""===o&&(o=void 0),void 0!==s){if(void 0!==r){const e=r.split("_");r=this.safeString(e,0),a=this.safeString(e,1)}if(void 0!==o){const e=o.split("_");o=this.safeString(e,0),n=this.safeString(e,1)}}let h=this.safeString(e,"txid");""===h&&(h=void 0);const c=this.safeInteger(e,"createdAt"),d=this.safeInteger(e,"updatedAt"),u="payAmount"in e||"ctime"in e?"withdrawal":"deposit",l=this.parseTransactionStatusByType(this.safeString(e,"status"),u),f=this.safeNumber(e,"amount");let p,m=this.safeString(e,"symbol");if(void 0!==m){const e=m.split("_");m=this.safeString(e,0);const t=this.safeString(e,1);void 0!==t&&(p=t.toUpperCase())}const g=this.safeCurrencyCode(m,t),y=this.safeNumber(e,"fee");let b;return void 0!==y&&(b={currency:g,cost:y}),{info:e,id:i,txid:h,timestamp:c,datetime:this.iso8601(c),network:p,address:r,addressTo:r,addressFrom:o,tag:a,tagTo:a,tagFrom:n,type:u,amount:f,currency:g,status:l,updated:d,internal:!1,fee:b}}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const n=this.currency(e);let o=this.safeString(r,"chainName");if(void 0===o){const e=this.safeValue(n,"networks",{}),t=this.safeStringUpper(r,"network"),i=this.safeValue(e,t,{});if(o=this.safeString(i,"id"),void 0===o)throw new a(this.id+" withdraw requires a network parameter or a chainName parameter");r=this.omit(r,"network")}const h={coin:n.id.toUpperCase(),amount:t,addressTo:i,chainName:o};void 0!==s&&(h.tag=s);const c=await this.v1PrivatePostWithdrawCommit(this.extend(h,r));return{info:c,id:this.safeString(c,"id")}}sign(e,t="public",i="GET",s={},r,a){const[n,o]=t;let h=this.urls.api[n]+"/"+this.implodeParams(e,s);if(s=this.omit(s,this.extractParams(e)),"private"===o){this.checkRequiredCredentials();const e=this.safeInteger(this.options,"recvWindow",5e3);let t=this.urlencode(this.extend({timestamp:this.nonce(),recvWindow:e},s));t+="&signature="+this.hmac(this.encode(t),this.encode(this.secret)),r={"X-MBX-APIKEY":this.apiKey},"GET"===i||"DELETE"===i?h+="?"+t:(a=t,r["Content-Type"]="application/x-www-form-urlencoded")}else Object.keys(s).length&&(h+="?"+this.urlencode(s));return{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,u){if(418===e||429===e)throw new d(this.id+" "+e.toString()+" "+t+" "+n);if(e>=400){if(n.indexOf("Price * QTY is zero or less")>=0)throw new c(this.id+" order cost = amount * price is zero or less "+n);if(n.indexOf("LOT_SIZE")>=0)throw new c(this.id+" order amount should be evenly divisible by lot size "+n);if(n.indexOf("PRICE_FILTER")>=0)throw new c(this.id+" order price is invalid, i.e. exceeds allowed price precision, exceeds min price or max price limits or is invalid float value in general, use this.priceToPrecision (symbol, amount) "+n)}if(void 0===o)return;const l=this.safeValue(o,"success",!0);if(!l){const e=this.safeString(o,"msg");let t;if(void 0!==e){try{t=JSON.parse(e)}catch(e){t=void 0}void 0!==t&&(o=t)}}const f=this.safeString(o,"msg");void 0!==f&&(this.throwExactlyMatchedException(this.exceptions.exact,f,this.id+" "+f),this.throwBroadlyMatchedException(this.exceptions.broad,f,this.id+" "+f));const p=this.safeString(o,"code");if(void 0!==p){if("200"===p||k.stringEquals(p,"0"))return;if("-2015"===p&&this.options.hasAlreadyAuthenticatedSuccessfully)throw new d(this.id+" temporary banned: "+n);const e=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,p,e),new r(e)}if(!l)throw new r(this.id+" "+n)}calculateRateLimiterCost(e,t,i,s,r={},a={}){if("noSymbol"in r&&!("symbol"in s))return r.noSymbol;if("byLimit"in r&&"limit"in s){const e=s.limit,t=r.byLimit;for(let i=0;i<t.length;i++){const s=t[i];if(e<=s[0])return s[1]}}return this.safeInteger(r,"cost",1)}}},25686:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,InvalidNonce:a,AuthenticationError:n,OrderNotFound:o}=i(73449),{TICK_SIZE:h}=i(62115),c=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitso",name:"Bitso",countries:["MX"],rateLimit:2e3,version:"v3",has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87295554-11f98280-c50e-11ea-80d6-15b3bafa8cbf.jpg",api:"https://api.bitso.com",www:"https://bitso.com",doc:"https://bitso.com/api_info",fees:"https://bitso.com/fees",referral:"https://bitso.com/?ref=itej"},precisionMode:h,options:{precision:{XRP:1e-6,MXN:.01,TUSD:.01},defaultPrecision:1e-8},api:{public:{get:["available_books","ticker","order_book","trades"]},private:{get:["account_status","balance","fees","fundings","fundings/{fid}","funding_destination","kyc_documents","ledger","ledger/trades","ledger/fees","ledger/fundings","ledger/withdrawals","mx_bank_codes","open_orders","order_trades/{oid}","orders/{oid}","user_trades","user_trades/{tid}","withdrawals/","withdrawals/{wid}"],post:["bitcoin_withdrawal","debit_card_withdrawal","ether_withdrawal","ripple_withdrawal","bcash_withdrawal","litecoin_withdrawal","orders","phone_number","phone_verification","phone_withdrawal","spei_withdrawal","ripple_withdrawal","bcash_withdrawal","litecoin_withdrawal"],delete:["orders/{oid}","orders/all"]}},exceptions:{"0201":n,104:a}})}async fetchMarkets(e={}){const t=await this.publicGetAvailableBooks(e),i=this.safeValue(t,"payload"),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"book"),[a,n]=r.split("_");let o=a.toUpperCase(),h=n.toUpperCase();o=this.safeCurrencyCode(o),h=this.safeCurrencyCode(h);const d=o+"/"+h,u={amount:{min:this.safeNumber(t,"minimum_amount"),max:this.safeNumber(t,"maximum_amount")},price:{min:this.safeNumber(t,"minimum_price"),max:this.safeNumber(t,"maximum_price")},cost:{min:this.safeNumber(t,"minimum_value"),max:this.safeNumber(t,"maximum_value")}},l=this.safeNumber(this.options.precision,h,this.options.defaultPrecision),f=this.safeNumber(t,"tick_size",l),p={amount:this.safeNumber(this.options.precision,o,this.options.defaultPrecision),price:f},m=this.safeValue(t,"fees",{}),g=this.safeValue(m,"flat_rate",{}),y=this.safeString(g,"maker"),b=this.safeString(g,"taker"),v=this.parseNumber(c.stringDiv(y,"100")),w=this.parseNumber(c.stringDiv(b,"100")),k=this.safeValue(m,"structure",[]),_={taker:w,maker:v,percentage:!0,tierBased:!0},S=[],O=[];for(let e=0;e<k.length;e++){const t=k[e],i=this.safeNumber(t,"volume"),s=this.safeNumber(t,"taker"),r=this.safeNumber(t,"maker");S.push([i,s]),O.push([i,r]),0===e&&(_.taker=s,_.maker=r)}const M={taker:S,maker:O};_.tiers=M,s.push(this.extend({id:r,symbol:d,base:o,quote:h,baseId:a,quoteId:n,info:t,limits:u,precision:p,type:"spot",spot:!0,active:void 0},_))}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i=this.safeValue(t,"payload",{}),s=this.safeValue(i,"balances"),r={info:t,timestamp:void 0,datetime:void 0};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"currency"),a=this.safeCurrencyCode(i),n=this.account();n.free=this.safeString(t,"available"),n.used=this.safeString(t,"locked"),n.total=this.safeString(t,"total"),r[a]=n}return this.parseBalance(r)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={book:this.marketId(e)},r=await this.publicGetOrderBook(this.extend(s,i)),a=this.safeValue(r,"payload"),n=this.parse8601(this.safeString(a,"updated_at"));return this.parseOrderBook(a,e,n,"bids","asks","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();const i={book:this.marketId(e)},s=await this.publicGetTicker(this.extend(i,t)),r=this.safeValue(s,"payload"),a=this.parse8601(this.safeString(r,"created_at")),n=this.safeNumber(r,"vwap"),o=this.safeNumber(r,"volume");let h;void 0!==o&&void 0!==n&&(h=o*n);const c=this.safeNumber(r,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeNumber(r,"high"),low:this.safeNumber(r,"low"),bid:this.safeNumber(r,"bid"),bidVolume:void 0,ask:this.safeNumber(r,"ask"),askVolume:void 0,vwap:n,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:h,info:r}}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"book"),r=this.safeSymbol(s,t,"_"),a=this.safeString2(e,"side","maker_side");let n;n=a===this.safeString(e,"maker_side")?"maker":"taker";let o,h=this.safeString2(e,"amount","major");void 0!==h&&(h=c.stringAbs(h));const d=this.safeString(e,"fees_amount");if(void 0!==d){const t=this.safeString(e,"fees_currency");o={cost:d,currency:this.safeCurrencyCode(t)}}let u=this.safeString(e,"minor");void 0!==u&&(u=c.stringAbs(u));const l=this.safeString(e,"price"),f=this.safeString(e,"oid"),p=this.safeString(e,"tid");return this.safeTrade({id:p,info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,order:f,type:void 0,side:a,takerOrMaker:n,price:l,amount:h,cost:u,fee:o},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={book:r.id},n=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(n.payload,r,t,i)}async fetchMyTrades(e,t,i=25,s={}){await this.loadMarkets();const a=this.market(e),n="marker"in s;if(void 0!==t&&!n)throw new r(this.id+" fetchMyTrades does not support fetching trades starting from a timestamp with the `since` argument, use the `marker` extra param to filter starting from an integer trade id");n&&(s=this.extend(s,{marker:parseInt(s.marker)}));const o={book:a.id,limit:i},h=await this.privateGetUserTrades(this.extend(o,s));return this.parseTrades(h.payload,a,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n={book:this.marketId(e),side:i,type:t,major:this.amountToPrecision(e,s)};"limit"===t&&(n.price=this.priceToPrecision(e,r));const o=await this.privatePostOrders(this.extend(n,a));return{info:o,id:this.safeString(o.payload,"oid")}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={oid:e};return await this.privateDeleteOrdersOid(this.extend(s,i))}parseOrderStatus(e){return this.safeString({"partial-fill":"open",completed:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"oid"),s=this.safeString(e,"side"),r=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeString(e,"book"),n=this.safeSymbol(a,t,"_"),o=this.safeString(e,"type"),h=this.parse8601(this.safeString(e,"created_at")),c=this.safeString(e,"price"),d=this.safeString(e,"original_amount"),u=this.safeString(e,"unfilled_amount"),l=this.safeString(e,"client_id");return this.safeOrder2({info:e,id:i,clientOrderId:l,timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:void 0,symbol:n,type:o,timeInForce:void 0,postOnly:void 0,side:s,price:c,stopPrice:void 0,amount:d,cost:void 0,remaining:u,filled:void 0,status:r,fee:void 0,average:void 0,trades:void 0},t)}async fetchOpenOrders(e,t,i=25,s={}){await this.loadMarkets();const a=this.market(e),n="marker"in s;if(void 0!==t&&!n)throw new r(this.id+" fetchOpenOrders does not support fetching orders starting from a timestamp with the `since` argument, use the `marker` extra param to filter starting from an integer trade id");n&&(s=this.extend(s,{marker:parseInt(s.marker)}));const o={book:a.id,limit:i},h=await this.privateGetOpenOrders(this.extend(o,s));return this.parseOrders(h.payload,a,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=await this.privateGetOrdersOid({oid:e}),r=this.safeValue(s,"payload");if(Array.isArray(r)&&1===s.payload.length)return this.parseOrder(r[0]);throw new o(this.id+": The order "+e+" not found.")}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();const a=this.market(t),n={oid:e},o=await this.privateGetOrderTradesOid(this.extend(n,r));return this.parseTrades(o.payload,a)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={fund_currency:this.currency(e).id},s=await this.privateGetFundingDestination(this.extend(i,t));let r,a=this.safeString(s.payload,"account_identifier");if(a.indexOf("?dt=")>=0){const e=a.split("?dt=");a=this.safeString(e,0),r=this.safeString(e,1)}return this.checkAddress(a),{currency:e,address:a,tag:r,network:void 0,info:s}}async withdraw(e,t,i,s,a={}){[s,a]=this.handleWithdrawTagAndParams(s,a),this.checkAddress(i),await this.loadMarkets();const n={BTC:"Bitcoin",ETH:"Ether",XRP:"Ripple",BCH:"Bcash",LTC:"Litecoin"},o=e in n?n[e]:void 0;if(void 0===o)throw new r(this.id+" not valid withdraw coin: "+e);const h={amount:t,address:i,destination_tag:s},c="privatePost"+o+"Withdrawal",d=await this[c](this.extend(h,a));return{info:d,id:this.safeString(d.payload,"wid")}}sign(e,t="public",i="GET",s={},r,a){let n="/"+this.version+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(o).length&&(n+="?"+this.urlencode(o));const h=this.urls.api+n;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();let t=[e,i,n].join("");"GET"!==i&&Object.keys(o).length&&(t+=a=this.json(o));const s=this.hmac(this.encode(t),this.encode(this.secret));r={Authorization:"Bitso "+this.apiKey+":"+e+":"+s,"Content-Type":"application/json"}}return{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o&&"success"in o){let e=this.safeValue(o,"success",!1);if("string"==typeof e&&(e="true"===e||"1"===e),!e){const e=this.id+" "+this.json(o),t=this.safeValue(o,"error");if(void 0===t)throw new r(e);const i=this.safeString(t,"code");throw this.throwExactlyMatchedException(this.exceptions,i,e),new r(e)}}}}},7653:(e,t,i)=>{"use strict";const s=i(48819),{AuthenticationError:r,BadRequest:a,ExchangeError:n,NotSupported:o,PermissionDenied:h,InvalidNonce:c,OrderNotFound:d,InsufficientFunds:u,InvalidAddress:l,InvalidOrder:f,ArgumentsRequired:p,OnMaintenance:m,ExchangeNotAvailable:g}=i(73449),y=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitstamp",name:"Bitstamp",countries:["GB"],rateLimit:1e3,version:"v2",userAgent:this.userAgents.chrome,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchBorrowRate:!1,fetchBorrowRates:!1,fetchCurrencies:!0,fetchDepositAddress:!0,fetchFundingFees:!0,fetchIndexOHLCV:!1,fetchLedger:!0,fetchMarkets:!0,fetchMarkOHLCV:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchPremiumIndexOHLCV:!1,fetchTicker:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:{public:"https://www.bitstamp.net/api",private:"https://www.bitstamp.net/api"},www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"259200"},requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["ohlc/{pair}/","order_book/{pair}/","ticker_hour/{pair}/","ticker/{pair}/","transactions/{pair}/","trading-pairs-info/"]},private:{post:["balance/","balance/{pair}/","bch_withdrawal/","bch_address/","user_transactions/","user_transactions/{pair}/","open_orders/all/","open_orders/{pair}/","order_status/","cancel_order/","cancel_all_orders/","cancel_all_orders/{pair}/","buy/{pair}/","buy/market/{pair}/","buy/instant/{pair}/","sell/{pair}/","sell/market/{pair}/","sell/instant/{pair}/","btc_withdrawal/","btc_address/","ripple_withdrawal/","ripple_address/","ltc_withdrawal/","ltc_address/","eth_withdrawal/","eth_address/","xrp_withdrawal/","xrp_address/","xlm_withdrawal/","xlm_address/","pax_withdrawal/","pax_address/","link_withdrawal/","link_address/","usdc_withdrawal/","usdc_address/","omg_withdrawal/","omg_address/","dai_withdrawal/","dai_address/","knc_withdrawal/","knc_address/","mkr_withdrawal/","mkr_address/","zrx_withdrawal/","zrx_address/","gusd_withdrawal/","gusd_address/","aave_withdrawal/","aave_address/","bat_withdrawal/","bat_address/","uma_withdrawal/","uma_address/","snx_withdrawal/","snx_address/","uni_withdrawal/","uni_address/","yfi_withdrawal/","yfi_address","audio_withdrawal/","audio_address/","crv_withdrawal/","crv_address/","algo_withdrawal/","algo_address/","comp_withdrawal/","comp_address/","grt_withdrawal","grt_address/","usdt_withdrawal/","usdt_address/","eurt_withdrawal/","eurt_address/","matic_withdrawal/","matic_address/","sushi_withdrawal/","sushi_address/","chz_withdrawal/","chz_address/","enj_withdrawal/","enj_address/","alpha_withdrawal/","alpha_address/","ftt_withdrawal/","ftt_address/","storj_withdrawal/","storj_address/","axs_withdrawal/","axs_address/","sand_withdrawal/","sand_address/","hbar_withdrawal/","hbar_address/","rgt_withdrawal/","rgt_address/","fet_withdrawal/","fet_address/","skl_withdrawal/","skl_address/","cel_withdrawal/","cel_address/","sxp_withdrawal/","sxp_address/","ada_withdrawal/","ada_address/","slp_withdrawal/","slp_address/","ftm_withdrawal/","ftm_address/","perp_withdrawal/","perp_address/","dydx_withdrawal/","dydx_address/","gala_withdrawal/","gala_address/","shib_withdrawal/","shib_address/","transfer-to-main/","transfer-from-main/","withdrawal-requests/","withdrawal/open/","withdrawal/status/","withdrawal/cancel/","liquidation_address/new/","liquidation_address/info/","btc_unconfirmed/","websockets_token/"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:this.parseNumber("0.005"),maker:this.parseNumber("0.005"),tiers:{taker:[[this.parseNumber("0"),this.parseNumber("0.005")],[this.parseNumber("20000"),this.parseNumber("0.0025")],[this.parseNumber("100000"),this.parseNumber("0.0024")],[this.parseNumber("200000"),this.parseNumber("0.0022")],[this.parseNumber("400000"),this.parseNumber("0.0020")],[this.parseNumber("600000"),this.parseNumber("0.0015")],[this.parseNumber("1000000"),this.parseNumber("0.0014")],[this.parseNumber("2000000"),this.parseNumber("0.0013")],[this.parseNumber("4000000"),this.parseNumber("0.0012")],[this.parseNumber("20000000"),this.parseNumber("0.0011")],[this.parseNumber("50000000"),this.parseNumber("0.0010")],[this.parseNumber("100000000"),this.parseNumber("0.0007")],[this.parseNumber("500000000"),this.parseNumber("0.0005")],[this.parseNumber("2000000000"),this.parseNumber("0.0003")],[this.parseNumber("6000000000"),this.parseNumber("0.0001")],[this.parseNumber("20000000000"),this.parseNumber("0.00005")],[this.parseNumber("20000000001"),this.parseNumber("0")]],maker:[[this.parseNumber("0"),this.parseNumber("0.005")],[this.parseNumber("20000"),this.parseNumber("0.0025")],[this.parseNumber("100000"),this.parseNumber("0.0024")],[this.parseNumber("200000"),this.parseNumber("0.0022")],[this.parseNumber("400000"),this.parseNumber("0.0020")],[this.parseNumber("600000"),this.parseNumber("0.0015")],[this.parseNumber("1000000"),this.parseNumber("0.0014")],[this.parseNumber("2000000"),this.parseNumber("0.0013")],[this.parseNumber("4000000"),this.parseNumber("0.0012")],[this.parseNumber("20000000"),this.parseNumber("0.0011")],[this.parseNumber("50000000"),this.parseNumber("0.0010")],[this.parseNumber("100000000"),this.parseNumber("0.0007")],[this.parseNumber("500000000"),this.parseNumber("0.0005")],[this.parseNumber("2000000000"),this.parseNumber("0.0003")],[this.parseNumber("6000000000"),this.parseNumber("0.0001")],[this.parseNumber("20000000000"),this.parseNumber("0.00005")],[this.parseNumber("20000000001"),this.parseNumber("0")]]}},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{BTC:0,BCH:0,LTC:0,ETH:0,XRP:0,XLM:0,PAX:0,USD:7.5,EUR:0}}},exceptions:{exact:{"No permission found":h,"API key not found":r,"IP address not allowed":h,"Invalid nonce":c,"Invalid signature":r,"Authentication failed":r,"Missing key, signature and nonce parameters":r,"Your account is frozen":h,"Please update your profile with your FATCA information, before using API.":h,"Order not found":d,"Price is more than 20% below market price.":f,"Bitstamp.net is under scheduled maintenance.":m,"Order could not be placed.":g,"Invalid offset.":a},broad:{"Minimum order size is":f,"Check your account balance for details.":u,"Ensure this value has at least":l}}})}async fetchMarkets(e={}){const t=await this.fetchMarketsFromCache(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"name");let[a,n]=r.split("/");const o=a.toLowerCase(),h=n.toLowerCase();a=this.safeCurrencyCode(a),n=this.safeCurrencyCode(n);const c=a+"/"+n,d=o+"_"+h,u=this.safeString(s,"url_symbol"),l=this.safeString(s,"base_decimals"),f=this.safeString(s,"counter_decimals"),p=this.parsePrecision(l),m=this.parsePrecision(f),g={amount:parseInt(l),price:parseInt(f)},y=this.safeString(s,"minimum_order").split(" ")[0],b="Enabled"===this.safeString(s,"trading");i.push({id:u,symbol:c,base:a,quote:n,baseId:o,quoteId:h,symbolId:d,info:s,type:"spot",spot:!0,active:b,precision:g,limits:{amount:{min:this.parseNumber(p),max:void 0},price:{min:this.parseNumber(m),max:void 0},cost:{min:this.parseNumber(y),max:void 0}}})}return i}constructCurrencyObject(e,t,i,s,r,a){let n="crypto";const o=this.describe();return this.isFiat(t)&&(n="fiat"),{id:e,code:t,info:a,type:n,name:i,active:!0,fee:this.safeNumber(o.fees.funding.withdraw,t),precision:s,limits:{amount:{min:Math.pow(10,-s),max:void 0},price:{min:Math.pow(10,-s),max:void 0},cost:{min:r,max:void 0},withdraw:{min:void 0,max:void 0}}}}async fetchMarketsFromCache(e={}){const t=this.safeValue(this.options,"fetchMarkets",{}),i=this.safeInteger(t,"timestamp"),s=this.safeInteger(t,"expires",1e3),r=this.milliseconds();if(void 0===i||r-i>s){const i=await this.publicGetTradingPairsInfo(e);this.options.fetchMarkets=this.extend(t,{response:i,timestamp:r})}return this.safeValue(this.options.fetchMarkets,"response")}async fetchCurrencies(e={}){const t=await this.fetchMarketsFromCache(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"name");let[a,n]=r.split("/");const o=a.toLowerCase(),h=n.toLowerCase();a=this.safeCurrencyCode(a),n=this.safeCurrencyCode(n);const c=this.safeString(s,"description"),[d,u]=c.split(" / "),l=this.safeString(s,"minimum_order").split(" ")[0];if(!(a in i)){const e=this.safeInteger(s,"base_decimals");i[a]=this.constructCurrencyObject(o,a,d,e,void 0,s)}if(!(n in i)){const e=this.safeInteger(s,"counter_decimals");i[n]=this.constructCurrencyObject(h,n,u,e,this.parseNumber(l),s)}}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},r=await this.publicGetOrderBookPair(this.extend(s,i)),a=this.safeInteger(r,"microtimestamp"),n=parseInt(a/1e3),o=this.parseOrderBook(r,e,n);return o.nonce=a,o}async fetchTicker(e,t={}){await this.loadMarkets();const i={pair:this.marketId(e)},s=await this.publicGetTickerPair(this.extend(i,t)),r=this.safeTimestamp(s,"timestamp"),a=this.safeNumber(s,"vwap"),n=this.safeNumber(s,"volume");let o;void 0!==n&&void 0!==a&&(o=n*a);const h=this.safeNumber(s,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(s,"high"),low:this.safeNumber(s,"low"),bid:this.safeNumber(s,"bid"),bidVolume:void 0,ask:this.safeNumber(s,"ask"),askVolume:void 0,vwap:a,open:this.safeNumber(s,"open"),close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:n,quoteVolume:o,info:s}}getCurrencyIdFromTransaction(e){const t=this.safeStringLower(e,"currency");if(void 0!==t)return t;e=this.omit(e,["fee","price","datetime","type","status","id"]);const i=Object.keys(e);for(let t=0;t<i.length;t++){const s=i[t];if(s.indexOf("_")<0){const t=this.safeNumber(e,s);if(void 0!==t&&0!==t)return s}}}getMarketFromTrade(e){e=this.omit(e,["fee","price","datetime","tid","type","order_id","side"]);const t=Object.keys(e),i=t.length;if(i>2)throw new n(this.id+" getMarketFromTrade too many keys: "+this.json(t)+" in the trade: "+this.json(e));if(2===i){let e=t[0]+t[1];if(e in this.markets_by_id)return this.markets_by_id[e];if(e=t[1]+t[0],e in this.markets_by_id)return this.markets_by_id[e]}}getMarketFromTrades(e){const t=this.indexBy(e,"symbol"),i=Object.keys(t);if(1===i.length)return this.markets[i[0]]}parseTrade(e,t){const i=this.safeString2(e,"id","tid");let s,r,a=this.safeString(e,"price"),n=this.safeString(e,"amount");const o=this.safeString(e,"order_id");let h=this.safeString(e,"cost");if(void 0===t){const i=Object.keys(e);for(let e=0;e<i.length;e++)if(i[e].indexOf("_")>=0){const s=i[e].replace("_","");s in this.markets_by_id&&(t=this.markets_by_id[s])}void 0===t&&(t=this.getMarketFromTrade(e))}const c=this.safeString(e,"fee");let d;void 0!==t&&(a=this.safeString(e,t.symbolId,a),n=this.safeString(e,t.baseId,n),h=this.safeString(e,t.quoteId,h),d=t.quote,s=t.symbol);let u,l=this.safeString2(e,"date","datetime");return void 0!==l&&(l.indexOf(" ")>=0?l=this.parse8601(l):(l=parseInt(l),l*=1e3)),"id"in e?void 0!==n&&(y.stringLt(n,"0")?(r="sell",n=y.stringNeg(n)):r="buy"):(r=this.safeString(e,"type"),"1"===r?r="sell":"0"===r&&(r="buy")),void 0!==h&&(h=y.stringAbs(h)),void 0!==c&&(u={cost:c,currency:d}),this.safeTrade({id:i,info:e,timestamp:l,datetime:this.iso8601(l),symbol:s,order:o,type:void 0,side:r,takerOrMaker:void 0,price:a,amount:n,cost:h,fee:u},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id,time:"hour"},n=await this.publicGetTransactionsPair(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,"timestamp"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={pair:a.id,step:this.timeframes[t]},o=this.parseTimeframe(t);if(void 0===s){if(void 0===i)throw new p(this.id+" fetchOHLCV() requires a since argument or a limit argument");{s=1e3;const e=parseInt(i/1e3);n.start=e,n.end=this.sum(e,s*o),n.limit=s}}else{if(void 0!==i){const e=parseInt(i/1e3);n.start=e,n.end=this.sum(e,s*o)}n.limit=Math.min(s,1e3)}const h=await this.publicGetOhlcPair(this.extend(n,r)),c=this.safeValue(h,"data",{}),d=this.safeValue(c,"ohlc",[]);return this.parseOHLCVs(d,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i={info:t,timestamp:void 0,datetime:void 0},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){const r=s[e],a=this.currency(r).id,n=this.account();n.free=this.safeString(t,a+"_available"),n.used=this.safeString(t,a+"_reserved"),n.total=this.safeString(t,a+"_balance"),i[r]=n}return this.parseBalance(i)}async fetchTradingFee(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},r=await this.privatePostBalancePair(this.extend(s,t));return this.parseTradingFee(r,i)}parseTradingFee(e,t){t=this.safeMarket(void 0,t);const i=this.safeString(e,t.id+"_fee"),s=y.stringDiv(i,"100"),r=this.parseNumber(s);return{info:e,symbol:t.symbol,maker:r,taker:r}}parseTradingFees(e){const t={info:e},i=this.symbols;for(let s=0;s<i.length;s++){const r=i[s],a=this.market(r),n=this.parseTradingFee(e,a);t[r]=n}return t}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e);return this.parseTradingFees(t)}parseFundingFees(e){const t={},i=Object.keys(e);for(let s=0;s<i.length;s++){const r=i[s];if(r.indexOf("_withdrawal_fee")>=0){const i=r.split("_")[0];t[this.safeCurrencyCode(i)]=this.safeNumber(e,r)}}return{info:e,withdraw:t,deposit:{}}}async fetchFundingFees(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e);return this.parseFundingFees(t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e);let o="privatePost"+this.capitalize(i);const h={pair:n.id,amount:this.amountToPrecision(e,s)};"market"===t?o+="Market":"instant"===t?o+="Instant":h.price=this.priceToPrecision(e,r),o+="Pair";const c=this.safeString2(a,"client_order_id","clientOrderId");void 0!==c&&(h.client_order_id=c,a=this.omit(a,["client_order_id","clientOrderId"]));const d=await this[o](this.extend(h,a)),u=this.parseOrder(d,n);return this.extend(u,{type:t})}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.privatePostCancelOrder(this.extend(s,i))}async cancelAllOrders(e,t={}){let i;await this.loadMarkets();const s={};let r="privatePostCancelAllOrders";return void 0!==e&&(i=this.market(e),s.pair=i.id,r="privatePostCancelAllOrdersPair"),await this[r](this.extend(s,t))}parseOrderStatus(e){return this.safeString({"In Queue":"open",Open:"open",Finished:"closed",Canceled:"canceled"},e,e)}async fetchOrderStatus(e,t,i={}){await this.loadMarkets();const s=this.safeValue2(i,"client_order_id","clientOrderId"),r={};void 0!==s?(r.client_order_id=s,i=this.omit(i,["client_order_id","clientOrderId"])):r.id=e;const a=await this.privatePostOrderStatus(this.extend(r,i));return this.parseOrderStatus(this.safeString(a,"status"))}async fetchOrder(e,t,i={}){let s;await this.loadMarkets(),void 0!==t&&(s=this.market(t));const r=this.safeValue2(i,"client_order_id","clientOrderId"),a={};void 0!==r?(a.client_order_id=r,i=this.omit(i,["client_order_id","clientOrderId"])):a.id=e;const n=await this.privatePostOrderStatus(this.extend(a,i));return this.parseOrder(n,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a,n="privatePostUserTransactions";void 0!==e&&(a=this.market(e),r.pair=a.id,n+="Pair"),void 0!==i&&(r.limit=i);const o=await this[n](this.extend(r,s)),h=this.filterBy(o,"type","2");return this.parseTrades(h,a,t,i)}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==i&&(r.limit=i);const a=await this.privatePostUserTransactions(this.extend(r,s));let n;void 0!==e&&(n=this.currency(e));const o=this.filterByArray(a,"type",["0","1"],!1);return this.parseTransactions(o,n,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};r.timedelta=void 0!==t?this.milliseconds()-t:5e7;const a=await this.privatePostWithdrawalRequests(this.extend(r,s));return this.parseTransactions(a,void 0,t,i)}parseTransaction(e,t){const i=this.parse8601(this.safeString(e,"datetime")),s=this.safeString(e,"id"),r=this.getCurrencyIdFromTransaction(e),a=this.safeCurrencyCode(r,t),n=this.safeNumber(e,"fee");let o,h;"amount"in e?h=this.safeNumber(e,"amount"):void 0!==t?(h=this.safeNumber(e,t.id,h),o=t.code):void 0!==a&&void 0!==r&&(h=this.safeNumber(e,r,h),o=a),void 0!==h&&(h=Math.abs(h));let c,d="ok";if("status"in e&&(d=this.parseTransactionStatus(this.safeString(e,"status"))),"type"in e){const t=this.safeString(e,"type");"0"===t?c="deposit":"1"===t&&(c="withdrawal")}else c="withdrawal";const u=this.safeString(e,"transaction_id");let l,f=this.safeString(e,"address");if(void 0!==f){const e=f.split("?dt=");e.length>1&&(f=e[0],l=e[1])}const p=f,m=l;let g;return void 0!==n&&(g={currency:o,cost:n,rate:void 0}),{info:e,id:s,txid:u,timestamp:i,datetime:this.iso8601(i),addressFrom:void 0,addressTo:p,address:f,tagFrom:void 0,tagTo:m,tag:l,type:c,amount:h,currency:a,status:d,updated:void 0,fee:g}}parseTransactionStatus(e){return this.safeString({0:"pending",1:"pending",2:"ok",3:"canceled",4:"failed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"client_order_id");let r=this.safeString(e,"type");void 0!==r&&(r="1"===r?"sell":"buy");const a=this.parse8601(this.safeString(e,"datetime")),n=this.safeStringLower(e,"currency_pair");let o=this.safeSymbol(n,t,"/");const h=this.parseOrderStatus(this.safeString(e,"status")),c=this.safeNumber(e,"amount"),d=this.safeValue(e,"transactions",[]),u=this.parseTrades(d,t);u.length&&(o=u[0].symbol);const l=this.safeNumber(e,"price");return this.safeOrder({id:i,clientOrderId:s,datetime:this.iso8601(a),timestamp:a,lastTradeTimestamp:void 0,status:h,symbol:o,type:void 0,timeInForce:void 0,postOnly:void 0,side:r,price:l,stopPrice:void 0,cost:void 0,amount:c,filled:void 0,remaining:void 0,trades:u,fee:void 0,info:e,average:void 0})}parseLedgerEntryType(e){return this.safeString({0:"transaction",1:"transaction",2:"trade",14:"transfer"},e,e)}parseLedgerEntry(e,t){const i=this.parseLedgerEntryType(this.safeString(e,"type"));if("trade"===i){const t=this.parseTrade(e);let s;const r=Object.keys(e);for(let e=0;e<r.length;e++)if(r[e].indexOf("_")>=0){const t=r[e].replace("_","");t in this.markets_by_id&&(s=this.markets_by_id[t])}void 0===s&&(s=this.getMarketFromTrade(e));const a="buy"===t.side?"in":"out";return{id:t.id,info:e,timestamp:t.timestamp,datetime:t.datetime,direction:a,account:void 0,referenceId:t.order,referenceAccount:void 0,type:i,currency:s.base,amount:t.amount,before:void 0,after:void 0,status:"ok",fee:t.fee}}{const s=this.parseTransaction(e,t);let r;if("amount"in e)r=this.safeNumber(e,"amount")>0?"in":"out";else if("currency"in s&&void 0!==s.currency){const t=s.currency,i=this.safeString(this.currencies_by_id,t,t);r=this.safeNumber(e,i)>0?"in":"out"}return{id:s.id,info:e,timestamp:s.timestamp,datetime:s.datetime,direction:r,account:void 0,referenceId:s.txid,referenceAccount:void 0,type:i,currency:s.currency,amount:s.amount,before:void 0,after:void 0,status:s.status,fee:s.fee}}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==i&&(r.limit=i);const a=await this.privatePostUserTransactions(this.extend(r,s));let n;return void 0!==e&&(n=this.currency(e)),this.parseLedger(a,n,t,i)}async fetchOpenOrders(e,t,i,s={}){let r;await this.loadMarkets(),void 0!==e&&(r=this.market(e));const a=await this.privatePostOpenOrdersAll(s);return this.parseOrders(a,r,t,i,{status:"open",type:"limit"})}getCurrencyName(e){return e.toLowerCase()}isFiat(e){return"USD"===e||"EUR"===e||"GBP"===e}async fetchDepositAddress(e,t={}){if(this.isFiat(e))throw new o(this.id+" fiat fetchDepositAddress() for "+e+" is not supported!");const i=this.getCurrencyName(e),s="privatePost"+this.capitalize(i)+"Address",r=await this[s](t),a=this.safeString(r,"address"),n=this.safeString2(r,"memo_id","destination_tag");return this.checkAddress(a),{currency:e,address:a,tag:n,network:void 0,info:r}}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),await this.loadMarkets(),this.checkAddress(i);const a={amount:t};let n;if(this.isFiat(e)){n="privatePostWithdrawalOpen";const t=this.currency(e);a.iban=i,a.account_currency=t.id}else{const t=this.getCurrencyName(e);n="privatePost"+this.capitalize(t)+"Withdrawal","XRP"===e?void 0!==s&&(a.destination_tag=s):"XLM"!==e&&"HBAR"!==e||void 0!==s&&(a.memo_id=s),a.address=i}const o=await this[n](this.extend(a,r));return{info:o,id:this.safeString(o,"id")}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t]+"/";n+=this.version+"/",n+=this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();const e="BITSTAMP "+this.apiKey,t=this.uuid(),s=this.milliseconds().toString(),h="v2";let c="";r={"X-Auth":e,"X-Auth-Nonce":t,"X-Auth-Timestamp":s,"X-Auth-Version":h},"POST"===i&&(Object.keys(o).length?(a=this.urlencode(o),c="application/x-www-form-urlencoded",r["Content-Type"]=c):(a=this.urlencode({foo:"bar"}),c="application/x-www-form-urlencoded",r["Content-Type"]=c));const d=a||"",u=e+i+n.replace("https://","")+c+t+s+h+d,l=this.hmac(this.encode(u),this.encode(this.secret));r["X-Auth-Signature"]=l}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,h,c,d){if(void 0===h)return;const u=this.safeString(h,"status"),l=this.safeValue(h,"error");if("error"===u||void 0!==l){let e=[];if("string"==typeof l)e.push(l);else if(void 0!==l){const t=Object.keys(l);for(let i=0;i<t.length;i++){const s=t[i],r=this.safeValue(l,s);Array.isArray(r)?e=this.arrayConcat(e,r):e.push(r)}}const t=this.safeValue(h,"reason",{});if("string"==typeof t)e.push(t);else{const i=this.safeValue(t,"__all__",[]);for(let t=0;t<i.length;t++)e.push(i[t])}if("API0005"===this.safeString(h,"code"))throw new r(this.id+" invalid signature, use the uid for the main account if you have subaccounts");const i=this.id+" "+o;for(let t=0;t<e.length;t++){const s=e[t];this.throwExactlyMatchedException(this.exceptions.exact,s,i),this.throwBroadlyMatchedException(this.exceptions.broad,s,i)}throw new n(i)}}}},12554:(e,t,i)=>{"use strict";const s=i(48819),{BadSymbol:r,ExchangeError:a,NotSupported:n}=i(73449),o=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitstamp1",name:"Bitstamp",countries:["GB"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchMyTrades:!0,fetchOrder:void 0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:"https://www.bitstamp.net/api",www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["ticker","ticker_hour","order_book","transactions","eur_usd"]},private:{post:["balance","user_transactions","open_orders","order_status","cancel_order","cancel_all_orders","buy","sell","bitcoin_deposit_address","unconfirmed_btc","ripple_withdrawal","ripple_address","withdrawal_requests","bitcoin_withdrawal"]}},markets:{"BTC/USD":{id:"btcusd",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"btc",quoteId:"usd",maker:.005,taker:.005,type:"spot",spot:!0},"BTC/EUR":{id:"btceur",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"btc",quoteId:"eur",maker:.005,taker:.005,type:"spot",spot:!0},"EUR/USD":{id:"eurusd",symbol:"EUR/USD",base:"EUR",quote:"USD",baseId:"eur",quoteId:"usd",maker:.005,taker:.005,type:"spot",spot:!0},"XRP/USD":{id:"xrpusd",symbol:"XRP/USD",base:"XRP",quote:"USD",baseId:"xrp",quoteId:"usd",maker:.005,taker:.005,type:"spot",spot:!0},"XRP/EUR":{id:"xrpeur",symbol:"XRP/EUR",base:"XRP",quote:"EUR",baseId:"xrp",quoteId:"eur",maker:.005,taker:.005,type:"spot",spot:!0},"XRP/BTC":{id:"xrpbtc",symbol:"XRP/BTC",base:"XRP",quote:"BTC",baseId:"xrp",quoteId:"btc",maker:.005,taker:.005,type:"spot",spot:!0},"LTC/USD":{id:"ltcusd",symbol:"LTC/USD",base:"LTC",quote:"USD",baseId:"ltc",quoteId:"usd",maker:.005,taker:.005,type:"spot",spot:!0},"LTC/EUR":{id:"ltceur",symbol:"LTC/EUR",base:"LTC",quote:"EUR",baseId:"ltc",quoteId:"eur",maker:.005,taker:.005,type:"spot",spot:!0},"LTC/BTC":{id:"ltcbtc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc",maker:.005,taker:.005,type:"spot",spot:!0},"ETH/USD":{id:"ethusd",symbol:"ETH/USD",base:"ETH",quote:"USD",baseId:"eth",quoteId:"usd",maker:.005,taker:.005,type:"spot",spot:!0},"ETH/EUR":{id:"etheur",symbol:"ETH/EUR",base:"ETH",quote:"EUR",baseId:"eth",quoteId:"eur",maker:.005,taker:.005,type:"spot",spot:!0},"ETH/BTC":{id:"ethbtc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc",maker:.005,taker:.005,type:"spot",spot:!0}}})}async fetchOrderBook(e,t,i={}){if("BTC/USD"!==e)throw new a(this.id+" "+this.version+" fetchOrderBook doesn't support "+e+", use it for BTC/USD only");await this.loadMarkets();const s=await this.publicGetOrderBook(i),r=this.safeTimestamp(s,"timestamp");return this.parseOrderBook(s,e,r)}async fetchTicker(e,t={}){if("BTC/USD"!==e)throw new a(this.id+" "+this.version+" fetchTicker doesn't support "+e+", use it for BTC/USD only");await this.loadMarkets();const i=await this.publicGetTicker(t),s=this.safeTimestamp(i,"timestamp"),r=this.safeNumber(i,"vwap"),n=this.safeNumber(i,"volume");let o;void 0!==n&&void 0!==r&&(o=n*r);const h=this.safeNumber(i,"last");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(i,"high"),low:this.safeNumber(i,"low"),bid:this.safeNumber(i,"bid"),bidVolume:void 0,ask:this.safeNumber(i,"ask"),askVolume:void 0,vwap:r,open:this.safeNumber(i,"open"),close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:n,quoteVolume:o,info:i}}parseTrade(e,t){const i=this.safeTimestamp2(e,"date","datetime"),s=0===e.type?"buy":"sell",r=this.safeString(e,"order_id");"currency_pair"in e&&e.currency_pair in this.markets_by_id&&(t=this.markets_by_id[e.currency_pair]);const a=this.safeString(e,"tid"),n=this.safeString(e,"price"),h=this.safeString(e,"amount"),c=this.parseNumber(n),d=this.parseNumber(h),u=this.parseNumber(o.stringMul(n,h));let l;return void 0!==t&&(l=t.symbol),{id:a,info:e,timestamp:i,datetime:this.iso8601(i),symbol:l,order:r,type:void 0,side:s,takerOrMaker:void 0,price:c,amount:d,cost:u,fee:void 0}}async fetchTrades(e,t,i,s={}){if("BTC/USD"!==e)throw new r(this.id+" "+this.version+" fetchTrades doesn't support "+e+", use it for BTC/USD only");await this.loadMarkets();const a=this.market(e),n=await this.publicGetTransactions(this.extend({time:"minute"},s));return this.parseTrades(n,a,t,i)}async fetchBalance(e={}){const t=await this.privatePostBalance(e),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){const r=s[e],a=this.currency(r).id,n=this.account();n.free=this.safeString(t,a+"_available"),n.used=this.safeString(t,a+"_reserved"),n.total=this.safeString(t,a+"_balance"),i[r]=n}return this.parseBalance(i)}async createOrder(e,t,i,s,r,n={}){if("limit"!==t)throw new a(this.id+" "+this.version+" accepts limit orders only");if("BTC/USD"!==e)throw new a(this.id+" v1 supports BTC/USD orders only");await this.loadMarkets();const o="privatePost"+this.capitalize(i),h={amount:s,price:r},c=await this[o](this.extend(h,n));return{info:c,id:this.safeString(c,"id")}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder({id:e})}parseOrderStatus(e){return this.safeString({"In Queue":"open",Open:"open",Finished:"closed",Canceled:"canceled"},e,e)}async fetchOrderStatus(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privatePostOrderStatus(this.extend(s,i));return this.parseOrderStatus(r)}async fetchMyTrades(e,t,i,s={}){let r;await this.loadMarkets(),void 0!==e&&(r=this.market(e));const a={id:r?r.id:"all"},n=await this.privatePostOpenOrdersId(this.extend(a,s));return this.parseTrades(n,r,t,i)}async fetchOrder(e,t,i={}){throw new n(this.id+" fetchOrder is not implemented yet")}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api+"/"+this.implodeParams(e,s),o=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.encode(this.hmac(this.encode(t),this.encode(this.secret)));o=this.extend({key:this.apiKey,signature:i.toUpperCase(),nonce:e},o),a=this.urlencode(o),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,n,o,h,c){if(void 0!==o&&"error"===this.safeString(o,"status"))throw new a(this.id+" "+this.json(o))}}},9461:(e,t,i)=>{"use strict";const s=i(48819),{BadSymbol:r,ExchangeError:a,ExchangeNotAvailable:n,AuthenticationError:o,InvalidOrder:h,InsufficientFunds:c,OrderNotFound:d,DDoSProtection:u,PermissionDenied:l,AddressPending:f,OnMaintenance:p,BadRequest:m,InvalidAddress:g}=i(73449),{TRUNCATE:y,DECIMAL_PLACES:b}=i(62115);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bittrex",name:"Bittrex",countries:["US"],version:"v3",rateLimit:1500,certified:!1,pro:!0,has:{margin:!1,swap:!1,future:!1,cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createDepositAddress:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchBorrowRate:!1,fetchBorrowRateHistory:!1,fetchBorrowRates:!1,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:"emulated",fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:void 0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"MINUTE_1","5m":"MINUTE_5","1h":"HOUR_1","1d":"DAY_1"},hostname:"bittrex.com",urls:{logo:"https://user-images.githubusercontent.com/51840849/87153921-edf53180-c2c0-11ea-96b9-f2a9a95a455b.jpg",api:{public:"https://api.bittrex.com",private:"https://api.bittrex.com"},www:"https://bittrex.com",doc:["https://bittrex.github.io/api/v3"],fees:["https://bittrex.zendesk.com/hc/en-us/articles/115003684371-BITTREX-SERVICE-FEES-AND-WITHDRAWAL-LIMITATIONS","https://bittrex.zendesk.com/hc/en-us/articles/115000199651-What-fees-does-Bittrex-charge-"],referral:"https://bittrex.com/Account/Register?referralCode=1ZE-G0G-M3B"},api:{public:{get:["ping","currencies","currencies/{symbol}","markets","markets/tickers","markets/summaries","markets/{marketSymbol}","markets/{marketSymbol}/summary","markets/{marketSymbol}/orderbook","markets/{marketSymbol}/trades","markets/{marketSymbol}/ticker","markets/{marketSymbol}/candles/{candleInterval}/recent","markets/{marketSymbol}/candles/{candleInterval}/historical/{year}/{month}/{day}","markets/{marketSymbol}/candles/{candleInterval}/historical/{year}/{month}","markets/{marketSymbol}/candles/{candleInterval}/historical/{year}"]},private:{get:["account","account/volume","addresses","addresses/{currencySymbol}","balances","balances/{currencySymbol}","deposits/open","deposits/closed","deposits/ByTxId/{txId}","deposits/{depositId}","orders/closed","orders/open","orders/{orderId}","orders/{orderId}/executions","ping","subaccounts/{subaccountId}","subaccounts","withdrawals/open","withdrawals/closed","withdrawals/ByTxId/{txId}","withdrawals/{withdrawalId}","withdrawals/whitelistAddresses","conditional-orders/{conditionalOrderId}","conditional-orders/closed","conditional-orders/open","transfers/sent","transfers/received","transfers/{transferId}"],post:["addresses","orders","subaccounts","withdrawals","conditional-orders","transfers"],delete:["orders/open","orders/{orderId}","withdrawals/{withdrawalId}","conditional-orders/{conditionalOrderId}"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:this.parseNumber("0.0075"),taker:this.parseNumber("0.0075")},funding:{tierBased:!1,percentage:!1}},exceptions:{exact:{BAD_REQUEST:m,STARTDATE_OUT_OF_RANGE:m,APISIGN_NOT_PROVIDED:o,APIKEY_INVALID:o,INVALID_SIGNATURE:o,INVALID_CURRENCY:a,INVALID_PERMISSION:o,INSUFFICIENT_FUNDS:c,INVALID_CEILING_MARKET_BUY:h,INVALID_FIAT_ACCOUNT:h,INVALID_ORDER_TYPE:h,QUANTITY_NOT_PROVIDED:h,MIN_TRADE_REQUIREMENT_NOT_MET:h,NOT_FOUND:d,ORDER_NOT_OPEN:d,INVALID_ORDER:h,UUID_INVALID:d,RATE_NOT_PROVIDED:h,INVALID_MARKET:r,WHITELIST_VIOLATION_IP:l,DUST_TRADE_DISALLOWED_MIN_VALUE:h,RESTRICTED_MARKET:r,"We are down for scheduled maintenance, but we’ll be back up shortly.":p},broad:{throttled:u,problem:n}},options:{fetchTicker:{method:"publicGetMarketsMarketSymbolTicker"},fetchTickers:{method:"publicGetMarketsTickers"},parseOrderStatus:!1,hasAlreadyAuthenticatedSuccessfully:!1,tag:{NXT:!0,CRYPTO_NOTE_PAYMENTID:!0,BITSHAREX:!0,RIPPLE:!0,NEM:!0,STELLAR:!0,STEEM:!0},subaccountId:void 0,fetchClosedOrdersFilterBySince:!0},commonCurrencies:{BIFI:"Bifrost Finance",MER:"Mercury",PROS:"Pros.Finance",REPV2:"REP",TON:"Tokamak Network"}})}costToPrecision(e,t){return this.decimalToPrecision(t,y,this.markets[e].precision.price,b)}feeToPrecision(e,t){return this.decimalToPrecision(t,y,this.markets[e].precision.price,b)}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"baseCurrencySymbol"),a=this.safeString(s,"quoteCurrencySymbol"),n=this.safeString(s,"symbol"),o=this.safeCurrencyCode(r),h=this.safeCurrencyCode(a),c=o+"/"+h,d={amount:8,price:this.safeInteger(s,"precision",8)},u="ONLINE"===this.safeString(s,"status");i.push({id:n,symbol:c,base:o,quote:h,baseId:r,quoteId:a,type:"spot",spot:!0,active:u,info:s,precision:d,limits:{amount:{min:this.safeNumber(s,"minTradeSize"),max:void 0},price:{min:1/Math.pow(10,d.price),max:void 0},cost:{min:void 0,max:void 0},leverage:{max:1}}})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalances(e),i={info:t},s=this.indexBy(t,"currencySymbol"),r=Object.keys(s);for(let e=0;e<r.length;e++){const t=r[e],a=this.safeCurrencyCode(t),n=this.account(),o=s[t];n.free=this.safeString(o,"available"),n.total=this.safeString(o,"total"),i[a]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={marketSymbol:this.marketId(e)};if(void 0!==t){if(1!==t&&25!==t&&500!==t)throw new m(this.id+" fetchOrderBook() limit argument must be undefined, 1, 25 or 500, default is 25");s.depth=t}const r=await this.publicGetMarketsMarketSymbolOrderbook(this.extend(s,i)),a=this.safeInteger(this.last_response_headers,"Sequence"),n=this.parseOrderBook(r,e,void 0,"bid","ask","rate","quantity");return n.nonce=a,n}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"symbol"),a=this.safeCurrencyCode(r),n=8,o=this.safeNumber(s,"txFee"),h=this.safeString(s,"status");i[a]={id:r,code:a,address:this.safeString(s,"baseAddress"),info:s,type:this.safeString(s,"coinType"),name:this.safeString(s,"name"),active:"ONLINE"===h,fee:o,precision:n,limits:{amount:{min:1/Math.pow(10,n),max:void 0},withdraw:{min:o,max:void 0}}}}return i}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"updatedAt")),s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t,"-"),a=this.safeNumber(e,"percentChange"),n=this.safeNumber(e,"lastTradeRate");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bidRate"),bidVolume:void 0,ask:this.safeNumber(e,"askRate"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:a,average:void 0,baseVolume:this.safeNumber(e,"volume"),quoteVolume:this.safeNumber(e,"quoteVolume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.safeValue(this.options,"fetchTickers",{}),s=this.safeString(i,"method","publicGetMarketsTickers"),r=this.safeString(t,"method",s);t=this.omit(t,"method");const a=await this[r](t),n=[];for(let e=0;e<a.length;e++){const t=this.parseTicker(a[e]);n.push(t)}return this.filterByArray(n,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={marketSymbol:i.id},r=this.safeValue(this.options,"fetchTicker",{}),a=this.safeString(r,"method","publicGetMarketsMarketSymbolTicker"),n=this.safeString(t,"method",a);t=this.omit(t,"method");const o=await this[n](this.extend(s,t));return this.parseTicker(o,i)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"executedAt")),s=this.safeString(e,"id"),r=this.safeString(e,"orderId"),a=this.safeString(e,"marketSymbol");t=this.safeMarket(a,t,"-");const n=this.safeString(e,"rate"),o=this.safeString(e,"quantity");let h;const c=this.safeValue(e,"isTaker");let d;void 0!==c&&(h=c?"taker":"maker");const u=this.safeString(e,"commission");void 0!==u&&(d={cost:u,currency:t.quote});const l=this.safeStringLower(e,"takerSide");return this.safeTrade({info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:s,order:r,takerOrMaker:h,type:void 0,side:l,price:n,amount:o,cost:void 0,fee:d},t)}async fetchTime(e={}){const t=await this.publicGetPing(e);return this.safeInteger(t,"serverTime")}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={marketSymbol:this.marketId(e)},n=await this.publicGetMarketsMarketSymbolTrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"startsAt")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n=a.baseId+"-"+a.quoteId,o={candleInterval:this.timeframes[t],marketSymbol:n};let h="publicGetMarketsMarketSymbolCandlesCandleIntervalRecent";if(void 0!==i){const e=this.milliseconds(),s=Math.abs(e-i),r=this.yyyymmdd(i).split("-"),a=this.safeInteger(r,0),n=this.safeInteger(r,1),c=this.safeInteger(r,2);"1d"===t?s>316224e5&&(h="publicGetMarketsMarketSymbolCandlesCandleIntervalHistoricalYear",o.year=a):"1h"===t?s>26784e5&&(h="publicGetMarketsMarketSymbolCandlesCandleIntervalHistoricalYearMonth",o.year=a,o.month=n):s>864e5&&(h="publicGetMarketsMarketSymbolCandlesCandleIntervalHistoricalYearMonthDay",o.year=a,o.month=n,o.day=c)}const c=await this[h](this.extend(o,r));return this.parseOHLCVs(c,a,t,i,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.marketSymbol=a.id);const n=await this.privateGetOrdersOpen(this.extend(r,s));return this.parseOrders(n,a,t,i)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();const a={orderId:e},n=await this.privateGetOrdersOrderIdExecutions(this.extend(a,r));let o;return void 0!==t&&(o=this.market(t)),this.parseTrades(n,o,i,s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o=t.toUpperCase(),h={marketSymbol:n.baseId+"-"+n.quoteId,direction:i.toUpperCase(),type:o},c="CEILING_LIMIT"===o,d="CEILING_MARKET"===o;if(c||d){let t;c?(h.limit=this.priceToPrecision(e,r),t=this.safeNumber2(a,"ceiling","cost",s)):d&&(t=this.safeNumber2(a,"ceiling","cost"),void 0===t&&(t=void 0===r?s:s*r)),a=this.omit(a,["ceiling","cost"]),h.ceiling=this.costToPrecision(e,t),h.timeInForce="IMMEDIATE_OR_CANCEL"}else h.quantity=this.amountToPrecision(e,s),"LIMIT"===o?(h.limit=this.priceToPrecision(e,r),h.timeInForce="GOOD_TIL_CANCELLED"):h.timeInForce="IMMEDIATE_OR_CANCEL";const u=await this.privatePostOrders(this.extend(h,a));return this.parseOrder(u,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},r=await this.privateDeleteOrdersOrderId(this.extend(s,i));return this.extend(this.parseOrder(r),{id:e,info:r,status:"canceled"})}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s;void 0!==e&&(s=this.market(e),i.marketSymbol=s.id);const r=await this.privateDeleteOrdersOpen(this.extend(i,t)),a=[];for(let e=0;e<r.length;e++){const t=this.safeValue(r[e],"result",{});a.push(t)}return this.parseOrders(a,s)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currencySymbol=a.id);const n=await this.privateGetDepositsClosed(this.extend(r,s));return this.parseTransactions(n,a,void 0,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currencySymbol=a.id);const n=await this.privateGetWithdrawalsClosed(this.extend(r,s));return this.parseTransactions(n,a,t,i)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeNumber(e,"quantity"),r=this.safeString(e,"cryptoAddress"),a=this.safeString(e,"txId"),n=this.parse8601(this.safeString(e,"updatedAt")),o=this.parse8601(this.safeString(e,"createdAt")),h=o||n,c=void 0===o?"deposit":"withdrawal",d=this.safeString(e,"currencySymbol"),u=this.safeCurrencyCode(d,t);let l="pending";if("deposit"===c)l="ok";else{const t=this.safeString(e,"status");"ERROR_INVALID_ADDRESS"===t?l="failed":"CANCELLED"===t?l="canceled":"PENDING"===t?l="pending":("COMPLETED"===t||"AUTHORIZED"===t&&void 0!==a)&&(l="ok")}let f=this.safeNumber(e,"txCost");return void 0===f&&"deposit"===c&&(f=0),{info:e,id:i,currency:u,amount:s,address:r,tag:void 0,status:l,type:c,updated:n,txid:a,timestamp:h,datetime:this.iso8601(h),fee:{currency:u,cost:f}}}parseTimeInForce(e){return this.safeString({GOOD_TIL_CANCELLED:"GTC",IMMEDIATE_OR_CANCEL:"IOC",FILL_OR_KILL:"FOK",POST_ONLY_GOOD_TIL_CANCELLED:"PO"},e,e)}parseOrder(e,t){const i=this.safeString(e,"marketSymbol"),s=(t=this.safeMarket(i,t,"-")).symbol,r=t.quote,a=this.safeStringLower(e,"direction"),n=this.safeString(e,"createdAt"),o=this.safeString(e,"updatedAt"),h=this.safeString(e,"closedAt"),c=this.safeString(e,"clientOrderId");let d;void 0!==h?d=this.parse8601(h):o&&(d=this.parse8601(o));const u=this.parse8601(n),l=this.safeStringLower(e,"type"),f=this.safeString(e,"quantity"),p=this.safeString(e,"limit"),m=this.safeString(e,"fillQuantity"),g=this.safeNumber(e,"commission"),y=this.safeString(e,"proceeds"),b=this.safeStringLower(e,"status"),v=this.parseTimeInForce(this.safeString(e,"timeInForce")),w="PO"===v;return this.safeOrder2({id:this.safeString(e,"id"),clientOrderId:c,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:d,symbol:s,type:l,timeInForce:v,postOnly:w,side:a,price:p,stopPrice:void 0,cost:y,average:void 0,amount:f,filled:m,remaining:void 0,status:b,fee:{cost:g,currency:r},info:e,trades:void 0},t)}parseOrders(e,t,i,s,r={}){return this.options.fetchClosedOrdersFilterBySince?super.parseOrders(e,t,i,s,r):super.parseOrders(e,t,void 0,s,r)}parseOrderStatus(e){return this.safeString({CLOSED:"closed",OPEN:"open",CANCELLED:"canceled",CANCELED:"canceled"},e,e)}async fetchOrder(e,t,i={}){let s;await this.loadMarkets();try{const t={orderId:e};s=await this.privateGetOrdersOrderId(this.extend(t,i))}catch(e){if(this.last_json_response&&"UUID_INVALID"===this.safeString(this.last_json_response,"message"))throw new d(this.id+" fetchOrder() error: "+this.last_http_response);throw e}return this.parseOrder(s)}orderToTrade(e){const t=this.safeInteger2(e,"lastTradeTimestamp","timestamp");return{id:this.safeString(e,"id"),side:this.safeString(e,"side"),order:this.safeString(e,"id"),type:this.safeString(e,"type"),price:this.safeNumber(e,"average"),amount:this.safeNumber(e,"filled"),cost:this.safeNumber(e,"cost"),symbol:this.safeString(e,"symbol"),timestamp:t,datetime:this.iso8601(t),fee:this.safeValue(e,"fee"),info:e,takerOrMaker:void 0}}ordersToTrades(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.orderToTrade(e[i]));return t}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==i&&(r.pageSize=i),void 0!==t&&(r.startDate=this.ymdhms(t,"T")+"Z"),void 0!==e&&(a=this.market(e),r.marketSymbol=a.base+"-"+a.quote);const n=await this.privateGetOrdersClosed(this.extend(r,s)),o=this.parseOrders(n,a),h=this.ordersToTrades(o);return this.filterBySymbolSinceLimit(h,e,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==i&&(r.pageSize=i),void 0!==t&&(r.startDate=this.ymdhms(t,"T")+"Z"),void 0!==e&&(a=this.market(e),r.marketSymbol=a.base+"-"+a.quote);const n=await this.privateGetOrdersClosed(this.extend(r,s));return this.parseOrders(n,a,t,i)}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currencySymbol:i.id},r=await this.privatePostAddresses(this.extend(s,t));let a=this.safeString(r,"cryptoAddress");const n=this.safeString(r,"status");if(!a||"REQUESTED"===n)throw new f(this.id+" the address for "+e+" is being generated (pending, not ready yet, retry again later)");let o=this.safeString(r,"cryptoAddressTag");return void 0===o&&i.type in this.options.tag&&(o=a,a=i.address),this.checkAddress(a),{currency:e,address:a,tag:o,info:r}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currencySymbol:i.id},r=await this.privateGetAddressesCurrencySymbol(this.extend(s,t));let a=this.safeString(r,"cryptoAddress");const n=this.safeString(r,"status");if(!a||"REQUESTED"===n)throw new f(this.id+" the address for "+e+" is being generated (pending, not ready yet, retry again later)");let o=this.safeString(r,"cryptoAddressTag");return void 0===o&&i.type in this.options.tag&&(o=a,a=i.address),this.checkAddress(a),{currency:e,address:a,tag:o,network:void 0,info:r}}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a={currencySymbol:this.currency(e).id,quantity:t,cryptoAddress:i};void 0!==s&&(a.cryptoAddressTag=s);const n=await this.privatePostWithdrawals(this.extend(a,r));return{info:n,id:this.safeString(n,"id")}}sign(e,t="v3",i="GET",s={},r,a){let n=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/";if("private"===t){n+=this.version+"/",this.checkRequiredCredentials(),n+=this.implodeParams(e,s),s=this.omit(s,this.extractParams(e));let t="";"POST"===i?t=a=this.json(s):Object.keys(s).length&&(n+="?"+this.rawencode(s));const o=this.hash(this.encode(t),"sha512","hex"),h=this.milliseconds().toString();let c=h+n+i+o;const d=this.safeValue(this.options,"subaccountId");void 0!==d&&(c+=d);const u=this.hmac(this.encode(c),this.encode(this.secret),"sha512");r={"Api-Key":this.apiKey,"Api-Timestamp":h,"Api-Content-Hash":o,"Api-Signature":u},void 0!==d&&(r["Api-Subaccount-Id"]=d),"POST"===i&&(r["Content-Type"]="application/json")}else"public"===t&&(n+=this.version+"/"),n+=this.implodeParams(e,s),s=this.omit(s,this.extractParams(e)),Object.keys(s).length&&(n+="?"+this.urlencode(s));return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,n,h,c,l){if(void 0!==h&&"{"===n[0]){const e=this.id+" "+n;let t=this.safeValue(h,"success");if(void 0===t){const t=this.safeString(h,"code");if("NOT_FOUND"===t&&i.indexOf("addresses")>=0)throw new g(e);return void(void 0!==t&&(this.throwExactlyMatchedException(this.exceptions.exact,t,e),this.throwBroadlyMatchedException(this.exceptions.broad,t,e)))}if("string"==typeof t&&(t="true"===t),!t){const t=this.safeString(h,"message");if("APIKEY_INVALID"===t)throw this.options.hasAlreadyAuthenticatedSuccessfully?new u(e):new o(e);if("INVALID_ORDER"===t){const e="cancel";if(i.indexOf(e)>=0){const e=i.split("?");if(e.length>1){const t=e[1].split("&"),i=t.length;let s;for(let e=0;e<i;e++){const i=t[e].split("=");if("uuid"===i[0]){s=i[1];break}}throw new d(void 0!==s?this.id+" cancelOrder "+s+" "+this.json(h):this.id+" cancelOrder "+this.json(h))}}}throw this.throwExactlyMatchedException(this.exceptions.exact,t,e),void 0!==t&&this.throwBroadlyMatchedException(this.exceptions.broad,t,e),new a(e)}}}}},54253:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,BadSymbol:a,AuthenticationError:n,InsufficientFunds:o,InvalidOrder:h,ArgumentsRequired:c,OrderNotFound:d,InvalidAddress:u,BadRequest:l,RateLimitExceeded:f,PermissionDenied:p,ExchangeNotAvailable:m,AccountSuspended:g,OnMaintenance:y}=i(73449),{SIGNIFICANT_DIGITS:b,DECIMAL_PLACES:v,TRUNCATE:w,ROUND:k}=i(62115);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitvavo",name:"Bitvavo",countries:["NL"],rateLimit:60.1,version:"v2",certified:!0,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,privateAPI:!0,publicAPI:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/83165440-2f1cf200-a116-11ea-9046-a255d09fb2ed.jpg",api:{public:"https://api.bitvavo.com",private:"https://api.bitvavo.com"},www:"https://bitvavo.com/",doc:"https://docs.bitvavo.com/",fees:"https://bitvavo.com/en/fees",referral:"https://bitvavo.com/?a=24F34952F7"},api:{public:{get:{time:1,markets:1,assets:1,"{market}/book":1,"{market}/trades":5,"{market}/candles":1,"ticker/price":1,"ticker/book":1,"ticker/24h":{cost:1,noMarket:25}}},private:{get:{order:1,orders:5,ordersOpen:{cost:1,noMarket:25},trades:5,balance:5,deposit:1,depositHistory:5,withdrawalHistory:5},post:{order:1,withdrawal:1},put:{order:1},delete:{order:1,orders:1}}},fees:{trading:{tierBased:!0,percentage:!0,taker:this.parseNumber("0.0025"),maker:this.parseNumber("0.002"),tiers:{taker:[[this.parseNumber("0"),this.parseNumber("0.0025")],[this.parseNumber("50000"),this.parseNumber("0.0024")],[this.parseNumber("100000"),this.parseNumber("0.0022")],[this.parseNumber("250000"),this.parseNumber("0.0020")],[this.parseNumber("500000"),this.parseNumber("0.0018")],[this.parseNumber("1000000"),this.parseNumber("0.0016")],[this.parseNumber("2500000"),this.parseNumber("0.0014")],[this.parseNumber("5000000"),this.parseNumber("0.0012")],[this.parseNumber("10000000"),this.parseNumber("0.0010")]],maker:[[this.parseNumber("0"),this.parseNumber("0.0020")],[this.parseNumber("50000"),this.parseNumber("0.0015")],[this.parseNumber("100000"),this.parseNumber("0.0010")],[this.parseNumber("250000"),this.parseNumber("0.0006")],[this.parseNumber("500000"),this.parseNumber("0.0003")],[this.parseNumber("1000000"),this.parseNumber("0.0001")],[this.parseNumber("2500000"),this.parseNumber("-0.0001")],[this.parseNumber("5000000"),this.parseNumber("-0.0003")],[this.parseNumber("10000000"),this.parseNumber("-0.0005")]]}}},requiredCredentials:{apiKey:!0,secret:!0},exceptions:{exact:{101:r,102:l,103:f,104:f,105:p,107:m,108:m,109:m,110:l,200:l,201:l,202:l,203:a,204:l,205:l,206:l,210:h,211:h,212:h,213:h,214:h,215:h,216:o,217:h,230:r,231:r,232:l,233:h,234:h,235:r,236:l,240:d,300:n,301:n,302:n,303:n,304:n,305:n,306:n,307:p,308:n,309:n,310:p,311:p,312:p,315:l,317:g,400:r,401:r,402:p,403:p,404:y,405:r,406:l,407:r,408:o,409:u,410:r,411:l,412:u,413:u,414:r},broad:{"start parameter is invalid":l,"symbol parameter is invalid":a,"amount parameter is invalid":h,"orderId parameter is invalid":h}},options:{"BITVAVO-ACCESS-WINDOW":1e4,fetchCurrencies:{expires:1e3}},precisionMode:b,commonCurrencies:{MIOTA:"IOTA"}})}currencyToPrecision(e,t){return this.decimalToPrecision(t,0,this.currencies[e].precision)}amountToPrecision(e,t){return this.decimalToPrecision(t,w,this.markets[e].precision.amount,v)}priceToPrecision(e,t){return t=this.decimalToPrecision(t,k,this.markets[e].precision.price,this.precisionMode),this.decimalToPrecision(t,w,8,v)}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeInteger(t,"time")}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=await this.fetchCurrenciesFromCache(e),s=this.indexBy(i,"symbol"),r=[];for(let e=0;e<t.length;e++){const i=t[e],a=this.safeString(i,"market"),n=this.safeString(i,"base"),o=this.safeString(i,"quote"),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=h+"/"+c,u="trading"===this.safeString(i,"status"),l=this.safeValue(s,n);let f;void 0!==l&&(f=this.safeInteger(l,"decimals",8));const p={price:this.safeInteger(i,"pricePrecision"),amount:f};r.push({id:a,symbol:d,base:h,quote:c,baseId:n,quoteId:o,info:i,type:"spot",spot:!0,active:u,precision:p,limits:{amount:{min:this.safeNumber(i,"minOrderInBaseAsset"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(i,"minOrderInQuoteAsset"),max:void 0}}})}return r}async fetchCurrenciesFromCache(e={}){const t=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(t,"timestamp"),s=this.safeInteger(t,"expires",1e3),r=this.milliseconds();if(void 0===i||r-i>s){const i=await this.publicGetAssets(e);this.options.fetchCurrencies=this.extend(t,{response:i,timestamp:r})}return this.safeValue(this.options.fetchCurrencies,"response")}async fetchCurrencies(e={}){const t=await this.fetchCurrenciesFromCache(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"symbol"),a=this.safeCurrencyCode(r),n="OK"===this.safeValue(s,"depositStatus"),o="OK"===this.safeValue(s,"withdrawalStatus"),h=n&&o,c=this.safeString(s,"name"),d=this.safeInteger(s,"decimals",8);i[a]={id:r,info:s,code:a,name:c,active:h,fee:this.safeNumber(s,"withdrawalFee"),precision:d,limits:{amount:{min:void 0,max:void 0},withdraw:{min:this.safeNumber(s,"withdrawalMinAmount"),max:void 0}}}}return i}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.publicGetTicker24h(this.extend(s,t));return this.parseTicker(r,i)}parseTicker(e,t){const i=this.safeString(e,"market"),s=this.safeSymbol(i,t,"-"),r=this.safeInteger(e,"timestamp"),a=this.safeNumber(e,"last"),n=this.safeNumber(e,"volume"),o=this.safeNumber(e,"volumeQuote"),h=this.vwap(n,o),c=this.safeNumber(e,"open");return this.safeTicker({symbol:s,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:this.safeNumber(e,"bidSize"),ask:this.safeNumber(e,"ask"),askVolume:this.safeNumber(e,"askSize"),vwap:h,open:c,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:n,quoteVolume:o,info:e},t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker24h(t);return this.parseTickers(i,e)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==i&&(a.limit=i),void 0!==t&&(a.start=t);const n=await this.publicGetMarketTrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseTrade(e,t){const i=this.safeString(e,"price"),s=this.safeString(e,"amount"),r=this.safeInteger(e,"timestamp"),a=this.safeString(e,"side"),n=this.safeString2(e,"id","fillId"),o=this.safeInteger(e,"market"),h=this.safeSymbol(o,t,"-"),c=this.safeValue(e,"taker");let d;void 0!==c&&(d=c?"taker":"maker");const u=this.safeString(e,"fee");let l;if(void 0!==u){const t=this.safeString(e,"feeCurrency");l={cost:u,currency:this.safeCurrencyCode(t)}}const f=this.safeString(e,"orderId");return this.safeTrade({info:e,id:n,symbol:h,timestamp:r,datetime:this.iso8601(r),order:f,type:void 0,side:a,takerOrMaker:d,price:i,amount:s,cost:void 0,fee:l},t)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.marketId(e)};void 0!==t&&(s.depth=t);const r=await this.publicGetMarketBook(this.extend(s,i)),a=this.parseOrderBook(r,e);return a.nonce=this.safeInteger(r,"nonce"),a}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={market:a.id,interval:this.timeframes[t]};if(void 0!==i){const e=this.parseTimeframe(t);n.start=i,void 0===s&&(s=1440),n.end=this.sum(i,s*e*1e3)}void 0!==s&&(n.limit=s);const o=await this.publicGetMarketCandles(this.extend(n,r));return this.parseOHLCVs(o,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i={info:t,timestamp:void 0,datetime:void 0};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"symbol"),a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(s,"available"),n.used=this.safeString(s,"inOrder"),i[a]=n}return this.parseBalance(i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={symbol:this.currency(e).id},s=await this.privateGetDeposit(this.extend(i,t)),r=this.safeString(s,"address"),a=this.safeString(s,"paymentId");return this.checkAddress(r),{currency:e,address:r,tag:a,network:void 0,info:s}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o={market:n.id,side:i,orderType:t},h="stopLossLimit"===t||"takeProfitLimit"===t,d="stopLoss"===t||"takeProfit"===t;if("market"===t){let t;if(t=void 0!==r?s*r:this.safeNumber2(a,"cost","amountQuote"),void 0!==t){const e=n.precision.price;o.amountQuote=this.decimalToPrecision(t,w,e,this.precisionMode)}else o.amount=this.amountToPrecision(e,s);a=this.omit(a,["cost","amountQuote"])}else if("limit"===t)o.price=this.priceToPrecision(e,r),o.amount=this.amountToPrecision(e,s);else if(d||h){let i=this.safeNumber2(a,"stopPrice","triggerAmount");if(void 0===i){if(h)throw new c(this.id+" createOrder requires a stopPrice parameter for a "+t+" order");if(d){if(void 0===r)throw new c(this.id+" createOrder requires a price argument or a stopPrice parameter for a "+t+" order");i=r}}h&&(o.price=this.priceToPrecision(e,r)),a=this.omit(a,["stopPrice","triggerAmount"]),o.triggerAmount=this.priceToPrecision(e,i),o.triggerType="price",o.amount=this.amountToPrecision(e,s)}const u=await this.privatePostOrder(this.extend(o,a));return this.parseOrder(u,n)}async editOrder(e,t,i,s,r,a,n={}){await this.loadMarkets();const o=this.market(t);let h={};const d=this.safeNumber(n,"amountRemaining");if(n=this.omit(n,"amountRemaining"),void 0!==a&&(h.price=this.priceToPrecision(t,a)),void 0!==r&&(h.amount=this.amountToPrecision(t,r)),void 0!==d&&(h.amountRemaining=this.amountToPrecision(t,d)),h=this.extend(h,n),Object.keys(h).length){h.orderId=e,h.market=o.id;const t=await this.privatePutOrder(this.extend(h,n));return this.parseOrder(t,o)}throw new c(this.id+" editOrder() requires an amount argument, or a price argument, or non-empty params")}async cancelOrder(e,t,i={}){if(void 0===t)throw new c(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={orderId:e,market:s.id},a=await this.privateDeleteOrder(this.extend(r,i));return this.parseOrder(a,s)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s;void 0!==e&&(s=this.market(e),i.market=s.id);const r=await this.privateDeleteOrders(this.extend(i,t));return this.parseOrders(r,s)}async fetchOrder(e,t,i={}){if(void 0===t)throw new c(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={orderId:e,market:s.id},a=await this.privateGetOrder(this.extend(r,i));return this.parseOrder(a,s)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==t&&(a.start=t),void 0!==i&&(a.limit=i);const n=await this.privateGetOrders(this.extend(a,s));return this.parseOrders(n,r,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.market=a.id);const n=await this.privateGetOrdersOpen(this.extend(r,s));return this.parseOrders(n,a,t,i)}parseOrderStatus(e){return this.safeString({new:"open",canceled:"canceled",canceledAuction:"canceled",canceledSelfTradePrevention:"canceled",canceledIOC:"canceled",canceledFOK:"canceled",canceledMarketProtection:"canceled",canceledPostOnly:"canceled",filled:"closed",partiallyFilled:"open",expired:"canceled",rejected:"canceled",awaitingTrigger:"open"},e,e)}parseOrder(e,t){const i=this.safeString(e,"orderId"),s=this.safeInteger(e,"created"),r=this.safeString(e,"market"),a=(t=this.safeMarket(r,t,"-")).symbol,n=this.parseOrderStatus(this.safeString(e,"status")),o=this.safeString(e,"side"),h=this.safeString(e,"orderType"),c=this.safeString(e,"price"),d=this.safeString(e,"amount"),u=this.safeString(e,"amountRemaining"),l=this.safeString(e,"filledAmount"),f=this.safeString(e,"filledAmountQuote");let p;const m=this.safeNumber(e,"feePaid");if(void 0!==m){const t=this.safeString(e,"feeCurrency");p={cost:m,currency:this.safeCurrencyCode(t)}}const g=this.safeValue(e,"fills",[]),y=this.safeString(e,"timeInForce"),b=this.safeValue(e,"postOnly"),v=this.safeNumber(e,"triggerPrice");return this.safeOrder2({info:e,id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:a,type:h,timeInForce:y,postOnly:b,side:o,price:c,stopPrice:v,amount:d,cost:f,average:void 0,filled:l,remaining:u,status:n,fee:p,trades:g},t)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==t&&(a.start=t),void 0!==i&&(a.limit=i);const n=await this.privateGetTrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),n={symbol:a.id,amount:this.currencyToPrecision(e,t),address:i};void 0!==s&&(n.paymentId=s);const o=await this.privatePostWithdrawal(this.extend(n,r));return this.parseTransaction(o,a)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.symbol=a.id),void 0!==t&&(r.start=t),void 0!==i&&(r.limit=i);const n=await this.privateGetWithdrawalHistory(this.extend(r,s));return this.parseTransactions(n,a,t,i)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.symbol=a.id),void 0!==t&&(r.start=t),void 0!==i&&(r.limit=i);const n=await this.privateGetDepositHistory(this.extend(r,s));return this.parseTransactions(n,a,t,i)}parseTransactionStatus(e){return this.safeString({awaiting_processing:"pending",awaiting_email_confirmation:"pending",awaiting_bitvavo_inspection:"pending",approved:"pending",sending:"pending",in_mempool:"pending",processed:"pending",completed:"ok",canceled:"canceled"},e,e)}parseTransaction(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeString(e,"symbol"),r=this.safeCurrencyCode(s,t),a=this.parseTransactionStatus(this.safeString(e,"status")),n=this.safeNumber(e,"amount"),o=this.safeString(e,"address"),h=this.safeString(e,"txId");let c;const d=this.safeNumber(e,"fee");let u;void 0!==d&&(c={cost:d,currency:r}),u="success"in e?"withdrawal":void 0===a?"deposit":"withdrawal";const l=this.safeString(e,"paymentId");return{info:e,id:void 0,txid:h,timestamp:i,datetime:this.iso8601(i),addressFrom:void 0,address:o,addressTo:o,tagFrom:void 0,tag:l,tagTo:l,type:u,amount:n,currency:r,status:a,updated:void 0,fee:c}}sign(e,t="public",i="GET",s={},r,a){const n=this.omit(s,this.extractParams(e));let o="/"+this.version+"/"+this.implodeParams(e,s);const h="GET"===i||"DELETE"===i;if(h&&Object.keys(n).length&&(o+="?"+this.urlencode(n)),"private"===t){this.checkRequiredCredentials();let e="";h||Object.keys(n).length&&(e=a=this.json(n));const t=this.milliseconds().toString(),s=t+i+o+e,c=this.hmac(this.encode(s),this.encode(this.secret)),d=this.safeString(this.options,"BITVAVO-ACCESS-WINDOW","10000");r={"BITVAVO-ACCESS-KEY":this.apiKey,"BITVAVO-ACCESS-SIGNATURE":c,"BITVAVO-ACCESS-TIMESTAMP":t,"BITVAVO-ACCESS-WINDOW":d},h||(r["Content-Type"]="application/json")}return o=this.urls.api[t]+o,{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;const d=this.safeString(o,"errorCode"),u=this.safeString(o,"error");if(void 0!==d){const e=this.id+" "+n;throw this.throwBroadlyMatchedException(this.exceptions.broad,u,e),this.throwExactlyMatchedException(this.exceptions.exact,d,e),new r(e)}}calculateRateLimiterCost(e,t,i,s,r={},a={}){return"noMarket"in r&&!("market"in s)?r.noMarket:this.safeValue(r,"cost",1)}}},85480:(e,t,i)=>{"use strict";const s=i(48819),r=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bl3p",name:"BL3P",countries:["NL"],rateLimit:1e3,version:"1",comment:"An exchange market by BitonicNL",has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28501752-60c21b82-6feb-11e7-818b-055ee6d0e754.jpg",api:"https://api.bl3p.eu",www:"https://bl3p.eu",doc:["https://github.com/BitonicNL/bl3p-api/tree/master/docs","https://bl3p.eu/api","https://bitonic.nl/en/api"]},api:{public:{get:["{market}/ticker","{market}/orderbook","{market}/trades"]},private:{post:["{market}/money/depth/full","{market}/money/order/add","{market}/money/order/cancel","{market}/money/order/result","{market}/money/orders","{market}/money/orders/history","{market}/money/trades/fetch","GENMKT/money/info","GENMKT/money/deposit_address","GENMKT/money/new_deposit_address","GENMKT/money/wallet/history","GENMKT/money/withdraw"]}},markets:{"BTC/EUR":{id:"BTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"BTC",quoteId:"EUR",maker:.0025,taker:.0025,type:"spot",spot:!0},"LTC/EUR":{id:"LTCEUR",symbol:"LTC/EUR",base:"LTC",quote:"EUR",baseId:"LTC",quoteId:"EUR",maker:.0025,taker:.0025,type:"spot",spot:!0}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGENMKTMoneyInfo(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"wallets"),r={info:i},a=Object.keys(this.currencies);for(let e=0;e<a.length;e++){const t=a[e],i=this.currency(t).id,n=this.safeValue(s,i,{}),o=this.safeValue(n,"available",{}),h=this.safeValue(n,"balance",{}),c=this.account();c.free=this.safeString(o,"value"),c.total=this.safeString(h,"value"),r[t]=c}return this.parseBalance(r)}parseBidAsk(e,t=0,i=1){return[this.safeNumber(e,t)/1e5,this.safeNumber(e,i)/1e8]}async fetchOrderBook(e,t,i={}){const s={market:this.market(e).id},r=await this.publicGetMarketOrderbook(this.extend(s,i)),a=this.safeValue(r,"data");return this.parseOrderBook(a,e,void 0,"bids","asks","price_int","amount_int")}async fetchTicker(e,t={}){const i={market:this.marketId(e)},s=await this.publicGetMarketTicker(this.extend(i,t)),r=this.safeTimestamp(s,"timestamp"),a=this.safeNumber(s,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(s,"high"),low:this.safeNumber(s,"low"),bid:this.safeNumber(s,"bid"),bidVolume:void 0,ask:this.safeNumber(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(s.volume,"24h"),quoteVolume:void 0,info:s}}parseTrade(e,t){const i=this.safeString(e,"trade_id"),s=this.safeInteger(e,"date");let a=this.safeString(e,"price_int");a=r.stringDiv(a,"100000");let n=this.safeString(e,"amount_int");n=r.stringDiv(n,"100000000");const o=this.parseNumber(a),h=this.parseNumber(n),c=this.parseNumber(r.stringMul(a,n));let d;return void 0!==t&&(d=t.symbol),{id:i,info:e,timestamp:s,datetime:this.iso8601(s),symbol:d,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:o,amount:h,cost:c,fee:void 0}}async fetchTrades(e,t,i,s={}){const r=this.market(e),a=await this.publicGetMarketTrades(this.extend({market:r.id},s));return this.parseTrades(a.data.trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){const n=this.market(e),o={market:n.id,amount_int:parseInt(1e8*s),fee_currency:n.quote,type:"buy"===i?"bid":"ask"};"limit"===t&&(o.price_int=parseInt(1e5*r));const h=await this.privatePostMarketMoneyOrderAdd(this.extend(o,a));return{info:h,id:this.safeString(h.data,"order_id")}}async cancelOrder(e,t,i={}){const s={order_id:e};return await this.privatePostMarketMoneyOrderCancel(this.extend(s,i))}sign(e,t="public",i="GET",s={},r,a){const n=this.implodeParams(e,s);let o=this.urls.api+"/"+this.version+"/"+n;const h=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(h).length&&(o+="?"+this.urlencode(h));else{this.checkRequiredCredentials();const e=this.nonce();a=this.urlencode(this.extend({nonce:e},h));const t=this.base64ToBinary(this.secret),i=n+"\0"+a,s=this.hmac(this.encode(i),t,"sha512","base64");r={"Content-Type":"application/x-www-form-urlencoded","Rest-Key":this.apiKey,"Rest-Sign":s}}return{url:o,method:i,body:a,headers:r}}}},66492:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,AuthenticationError:a,DDoSProtection:n,InvalidOrder:o,InsufficientFunds:h}=i(73449),c=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcalpha",name:"BTC-Alpha",countries:["US"],version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:void 0,fetchTrades:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","1d":"D"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42625213-dabaa5da-85cf-11e8-8f99-aa8f8f7699f0.jpg",api:"https://btc-alpha.com/api",www:"https://btc-alpha.com",doc:"https://btc-alpha.github.io/api-docs",fees:"https://btc-alpha.com/fees/",referral:"https://btc-alpha.com/?r=123788"},api:{public:{get:["currencies/","pairs/","orderbook/{pair_name}/","exchanges/","charts/{pair}/{type}/chart/"]},private:{get:["wallets/","orders/own/","order/{id}/","exchanges/own/","deposits/","withdraws/"],post:["order/","order-cancel/"]}},fees:{trading:{maker:this.parseNumber("0.002"),taker:this.parseNumber("0.002")},funding:{withdraw:{}}},commonCurrencies:{CBC:"Cashbery"},exceptions:{exact:{},broad:{"Out of balance":h}}})}async fetchMarkets(e={}){const t=await this.publicGetPairs(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"name"),a=this.safeString(s,"currency1"),n=this.safeString(s,"currency2"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),d=o+"/"+h,u=this.safeString(s,"price_precision"),l=this.parsePrecision(u),f={amount:8,price:parseInt(u)},p=this.safeString(s,"minimum_order_size");i.push({id:r,symbol:d,base:o,quote:h,type:"spot",spot:!0,active:!0,precision:f,limits:{amount:{min:this.parseNumber(p),max:this.safeNumber(s,"maximum_order_size")},price:{min:this.parseNumber(l),max:void 0},cost:{min:this.parseNumber(c.stringMul(l,p)),max:void 0}},info:s,baseId:void 0,quoteId:void 0})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair_name:this.marketId(e)};t&&(s.limit_sell=t,s.limit_buy=t);const r=await this.publicGetOrderbookPairName(this.extend(s,i));return this.parseOrderBook(r,e,void 0,"buy","sell","price","amount")}parseBidsAsks(e,t=0,i=1){const s=[];for(let r=0;r<e.length;r++){const a=e[r];a&&s.push(this.parseBidAsk(a,t,i))}return s}parseTrade(e,t){let i;void 0===t&&(t=this.safeValue(this.markets_by_id,e.pair)),void 0!==t&&(i=t.symbol);const s=this.safeTimestamp(e,"timestamp"),r=this.safeString(e,"price"),a=this.safeString(e,"amount"),n=this.safeString(e,"id"),o=this.safeString2(e,"my_side","type");return this.safeTrade({id:n,info:e,timestamp:s,datetime:this.iso8601(s),symbol:i,order:n,type:"limit",side:o,takerOrMaker:void 0,price:r,amount:a,cost:void 0,fee:void 0},t)}async fetchTrades(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.pair=r.id),void 0!==i&&(a.limit=i);const n=await this.publicGetExchanges(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={pair:a.id,type:this.timeframes[t]};void 0!==s&&(n.limit=s),void 0!==i&&(n.since=parseInt(i/1e3));const o=await this.publicGetChartsPairTypeChart(this.extend(n,r));return this.parseOHLCVs(o,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetWallets(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.used=this.safeString(s,"reserve"),n.total=this.safeString(s,"balance"),i[a]=n}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({1:"open",2:"canceled",3:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"pair"),s=(t=this.safeMarket(i,t,"_")).symbol;let r;r=this.safeValue(e,"success",!1)?this.safeTimestamp(e,"date"):this.safeInteger(e,"date");const a=this.safeString(e,"price"),n=this.safeString(e,"amount"),o=this.safeString(e,"amount_filled"),h=this.safeString(e,"amount_original"),c=this.parseOrderStatus(this.safeString(e,"status")),d=this.safeString2(e,"oid","id"),u=this.safeValue(e,"trades"),l=this.safeString2(e,"my_side","type");return this.safeOrder2({id:d,clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,status:c,symbol:s,type:"limit",timeInForce:void 0,postOnly:void 0,side:l,price:a,stopPrice:void 0,cost:void 0,amount:h,filled:o,remaining:n,trades:u,fee:void 0,info:e,lastTradeTimestamp:void 0,average:void 0},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),h={pair:n.id,type:i,amount:s,price:this.priceToPrecision(e,r)},c=await this.privatePostOrder(this.extend(h,a));if(!c.success)throw new o(this.id+" "+this.json(c));const d=this.parseOrder(c,n);return s=d.amount>0?d.amount:s,this.extend(d,{amount:s})}async cancelOrder(e,t,i={}){const s={order:e};return await this.privatePostOrderCancel(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrderId(this.extend(s,i));return this.parseOrder(r)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.pair=a.id),void 0!==i&&(r.limit=i);const n=await this.privateGetOrdersOwn(this.extend(r,s));return this.parseOrders(n,a,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"1"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"3"},s))}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};if(void 0!==e){const t=this.market(e);r.pair=t.id}void 0!==i&&(r.limit=i);const a=await this.privateGetExchangesOwn(this.extend(r,s));return this.parseTrades(a,void 0,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){const n=this.urlencode(this.keysort(this.omit(s,this.extractParams(e))));let o=this.urls.api+"/";if("charts/{pair}/{type}/chart/"!==e&&(o+="v1/"),o+=this.implodeParams(e,s),r={Accept:"application/json"},"public"===t)n.length&&(o+="?"+n);else{this.checkRequiredCredentials();let e=this.apiKey;"POST"===i?(r["Content-Type"]="application/x-www-form-urlencoded",e+=a=n):n.length&&(o+="?"+n),r["X-KEY"]=this.apiKey,r["X-SIGN"]=this.hmac(this.encode(e),this.encode(this.secret)),r["X-NONCE"]=this.nonce().toString()}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,o,h,c,d,u){if(void 0===c)return;const l=this.safeString(c,"error"),f=this.id+" "+h;if(void 0!==l&&(this.throwExactlyMatchedException(this.exceptions.exact,l,f),this.throwBroadlyMatchedException(this.exceptions.broad,l,f)),401===e||403===e)throw new a(f);if(429===e)throw new n(f);if(!(e<400))throw new r(f)}}},6142:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,InsufficientFunds:a,InvalidOrder:n,AuthenticationError:o,PermissionDenied:h,InvalidNonce:c,OrderNotFound:d,DDoSProtection:u}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcbox",name:"BtcBox",countries:["JP"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:void 0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87327317-98c55400-c53c-11ea-9a11-81f7d951cc74.jpg",api:"https://www.btcbox.co.jp/api",www:"https://www.btcbox.co.jp/",doc:"https://blog.btcbox.jp/en/archives/8762",fees:"https://support.btcbox.co.jp/hc/en-us/articles/360001235694-Fees-introduction"},api:{public:{get:["depth","orders","ticker"]},private:{post:["balance","trade_add","trade_cancel","trade_list","trade_view","wallet"]}},markets:{"BTC/JPY":{id:"btc",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy",taker:5e-4,maker:5e-4,type:"spot",spot:!0},"ETH/JPY":{id:"eth",symbol:"ETH/JPY",base:"ETH",quote:"JPY",baseId:"eth",quoteId:"jpy",taker:.001,maker:.001,type:"spot",spot:!0},"LTC/JPY":{id:"ltc",symbol:"LTC/JPY",base:"LTC",quote:"JPY",baseId:"ltc",quoteId:"jpy",taker:.001,maker:.001,type:"spot",spot:!0},"BCH/JPY":{id:"bch",symbol:"BCH/JPY",base:"BCH",quote:"JPY",baseId:"bch",quoteId:"jpy",taker:.001,maker:.001,type:"spot",spot:!0}},exceptions:{104:o,105:h,106:c,107:n,200:a,201:n,202:n,203:d,401:d,402:u}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){const r=s[e],a=this.currency(r).id,n=a+"_balance";if(n in t){const e=this.account(),s=a+"_lock";e.free=this.safeString(t,n),e.used=this.safeString(t,s),i[r]=e}}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={};this.symbols.length>1&&(r.coin=s.baseId);const a=await this.publicGetDepth(this.extend(r,i));return this.parseOrderBook(a,e)}parseTicker(e,t){const i=this.milliseconds();let s;void 0!==t&&(s=t.symbol);const r=this.safeNumber(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"vol"),quoteVolume:this.safeNumber(e,"volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={};this.symbols.length>1&&(s.coin=i.baseId);const r=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.safeTimestamp(e,"date");let s;void 0!==t&&(s=t.symbol);const r=this.safeString(e,"tid"),a=this.safeString(e,"price"),n=this.safeString(e,"amount"),o=this.safeString(e,"type");return this.safeTrade({info:e,id:r,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,side:o,takerOrMaker:void 0,price:a,amount:n,cost:void 0,fee:void 0},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={};this.symbols.length>1&&(a.coin=r.baseId);const n=await this.publicGetOrders(this.extend(a,s));return this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o={amount:s,price:r,type:i,coin:n.baseId},h=await this.privatePostTradeAdd(this.extend(o,a));return this.parseOrder(h,n)}async cancelOrder(e,t,i={}){await this.loadMarkets(),void 0===t&&(t="BTC/JPY");const s=this.market(t),r={id:e,coin:s.baseId},a=await this.privatePostTradeCancel(this.extend(r,i));return this.parseOrder(a,s)}parseOrderStatus(e){return this.safeString({part:"open",all:"closed",cancelled:"canceled",closed:"closed",no:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id");let s;void 0!==this.safeString(e,"datetime")&&(s=this.parse8601(e.datetime+"+09:00"));const r=this.safeNumber(e,"amount_original"),a=this.safeNumber(e,"amount_outstanding"),n=this.safeNumber(e,"price");let o,h=this.parseOrderStatus(this.safeString(e,"status"));void 0===h&&void 0!==a&&0===a&&(h="closed"),void 0!==t&&(o=t.symbol);const c=this.safeString(e,"type");return this.safeOrder({id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,amount:r,remaining:a,filled:void 0,side:c,type:void 0,timeInForce:void 0,postOnly:void 0,status:h,symbol:o,price:n,stopPrice:void 0,cost:void 0,trades:void 0,fee:void 0,info:e,average:void 0})}async fetchOrder(e,t,i={}){await this.loadMarkets(),void 0===t&&(t="BTC/JPY");const s=this.market(t),r=this.extend({id:e,coin:s.baseId},i),a=await this.privatePostTradeView(this.extend(r,i));return this.parseOrder(a,s)}async fetchOrdersByType(e,t,i,s,r={}){await this.loadMarkets(),void 0===t&&(t="BTC/JPY");const a=this.market(t),n={type:e,coin:a.baseId},o=await this.privatePostTradeList(this.extend(n,r)),h=this.parseOrders(o,a,i,s);if("open"===e)for(let e=0;e<h.length;e++)h[e].status="open";return h}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByType("all",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByType("open",e,t,i,s)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(s).length&&(n+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.extend({key:this.apiKey,nonce:e},s),i=this.urlencode(t),n=this.hash(this.encode(this.secret));t.signature=this.hmac(this.encode(i),this.encode(n)),a=this.urlencode(t),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;if(e>=400)return;const d=this.safeValue(o,"result");if(void 0===d||!0===d)return;const u=this.safeValue(o,"code"),l=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions,u,l),new r(l)}async request(e,t="public",i="GET",s={},a,n,o={},h={}){let c=await this.fetch2(e,t,i,s,a,n,o,h);if("string"==typeof c){if(c=this.strip(c),!this.isJsonEncodedObject(c))throw new r(this.id+" "+c);c=JSON.parse(c)}return c}}},69284:(e,t,i)=>{"use strict";const s=i(48819),{ArgumentsRequired:r,ExchangeError:a,OrderNotFound:n,InvalidOrder:o,InsufficientFunds:h,DDoSProtection:c,BadRequest:d}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcmarkets",name:"BTC Markets",countries:["AU"],rateLimit:1e3,version:"v3",has:{cancelOrder:!0,cancelOrders:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:"emulated",fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/89731817-b3fb8480-da52-11ea-817f-783b08aaf32b.jpg",api:{public:"https://api.btcmarkets.net",private:"https://api.btcmarkets.net"},www:"https://btcmarkets.net",doc:["https://api.btcmarkets.net/doc/v3","https://github.com/BTCMarkets/API"]},api:{public:{get:["markets","markets/{marketId}/ticker","markets/{marketId}/trades","markets/{marketId}/orderbook","markets/{marketId}/candles","markets/tickers","markets/orderbooks","time"]},private:{get:["orders","orders/{id}","batchorders/{ids}","trades","trades/{id}","withdrawals","withdrawals/{id}","deposits","deposits/{id}","transfers","transfers/{id}","addresses","withdrawal-fees","assets","accounts/me/trading-fees","accounts/me/withdrawal-limits","accounts/me/balances","accounts/me/transactions","reports/{id}"],post:["orders","batchorders","withdrawals","reports"],delete:["orders","orders/{id}","batchorders/{ids}"],put:["orders/{id}"]}},timeframes:{"1m":"1m","1h":"1h","1d":"1d"},exceptions:{3:o,6:c,InsufficientFund:h,InvalidPrice:o,InvalidAmount:o,MissingArgument:o,OrderAlreadyCancelled:o,OrderNotFound:n,OrderStatusIsFinal:o,InvalidPaginationParameter:d},fees:{percentage:!0,tierBased:!0,maker:this.parseNumber("-0.0005"),taker:this.parseNumber("0.0020")},options:{fees:{AUD:{maker:.0085,taker:.0085}}}})}async fetchTransactionsWithMethod(e,t,i,s,r={}){await this.loadMarkets();const a={};let n;void 0!==s&&(a.limit=s),void 0!==i&&(a.after=i),void 0!==t&&(n=this.currency(t));const o=await this[e](this.extend(a,r));return this.parseTransactions(o,n,i,s)}async fetchTransactions(e,t,i,s={}){return await this.fetchTransactionsWithMethod("privateGetTransfers",e,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsWithMethod("privateGetDeposits",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsWithMethod("privateGetWithdrawals",e,t,i,s)}parseTransactionStatus(e){return this.safeString({Complete:"ok"},e,e)}parseTransactionType(e){return this.safeString({Withdraw:"withdrawal",Deposit:"deposit"},e,e)}parseTransaction(e,t){const i=this.parse8601(this.safeString(e,"creationTime")),s=this.parse8601(this.safeString(e,"lastUpdate"));let r=this.parseTransactionType(this.safeStringLower(e,"type"));"withdraw"===r&&(r="withdrawal");const a=this.safeValue(e,"paymentDetail",{}),n=this.safeString(a,"txId");let o,h=this.safeString(a,"address");if(void 0!==h){const e=h.split("?dt=");e.length>1&&(h=e[0],o=e[1])}const c=h,d=o,u=this.safeNumber(e,"fee"),l=this.parseTransactionStatus(this.safeString(e,"status")),f=this.safeString(e,"assetName"),p=this.safeCurrencyCode(f);let m=this.safeNumber(e,"amount");return u&&(m-=u),{id:this.safeString(e,"id"),txid:n,timestamp:i,datetime:this.iso8601(i),address:h,addressTo:c,addressFrom:void 0,tag:o,tagTo:d,tagFrom:void 0,type:r,amount:m,currency:p,status:l,updated:s,fee:{currency:p,cost:u},info:e}}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"baseAssetName"),a=this.safeString(s,"quoteAssetName"),n=this.safeString(s,"marketId"),o=this.safeCurrencyCode(r),h=this.safeCurrencyCode(a),c=o+"/"+h,d=this.safeValue(this.safeValue(this.options,"fees",{}),h,this.fees),u=this.safeInteger(s,"priceDecimals"),l=this.safeInteger(s,"amountDecimals"),f=this.safeNumber(s,"minOrderAmount"),p=this.safeNumber(s,"maxOrderAmount");let m;"AUD"===h&&(m=Math.pow(10,-u));const g={amount:l,price:u},y={amount:{min:f,max:p},price:{min:m,max:void 0},cost:{min:void 0,max:void 0}};i.push({info:s,id:n,symbol:c,base:o,quote:h,baseId:r,quoteId:a,type:"spot",spot:!0,active:void 0,maker:d.maker,taker:d.taker,limits:y,precision:g})}return i}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.parse8601(this.safeString(t,"timestamp"))}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountsMeBalances(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"assetName"),a=this.safeCurrencyCode(r),n=this.account();n.used=this.safeString(s,"locked"),n.total=this.safeString(s,"balance"),i[a]=n}return this.parseBalance(i)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,0)),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={marketId:a.id,timeWindow:this.timeframes[t]};void 0!==i&&(n.from=this.iso8601(i)),void 0!==s&&(n.limit=s);const o=await this.publicGetMarketsMarketIdCandles(this.extend(n,r));return this.parseOHLCVs(o,a,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={marketId:this.market(e).id},r=await this.publicGetMarketsMarketIdOrderbook(this.extend(s,i)),a=this.safeIntegerProduct(r,"snapshotId",.001),n=this.parseOrderBook(r,e,a);return n.nonce=this.safeInteger(r,"snapshotId"),n}parseTicker(e,t){let i;const s=this.safeString(e,"marketId");if(void 0!==s)if(s in this.markets_by_id)t=this.markets_by_id[s];else{const[e,t]=s.split("-");i=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===i&&void 0!==t&&(i=t.symbol);const r=this.parse8601(this.safeString(e,"timestamp")),a=this.safeNumber(e,"lastPrice"),n=this.safeNumber(e,"volume24h"),o=this.safeNumber(e,"volumeQte24h"),h=this.vwap(n,o),c=this.safeNumber(e,"price24h"),d=this.safeNumber(e,"pricePct24h");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high24h"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bestBid"),bidVolume:void 0,ask:this.safeNumber(e,"bestAsk"),askVolume:void 0,vwap:h,open:void 0,close:a,last:a,previousClose:void 0,change:c,percentage:d,average:void 0,baseVolume:n,quoteVolume:o,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={marketId:i.id},r=await this.publicGetMarketsMarketIdTicker(this.extend(s,t));return this.parseTicker(r,i)}async fetchTicker2(e,t={}){await this.loadMarkets();const i=this.market(e),s={id:i.id},r=await this.publicGetMarketIdTick(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"timestamp")),s=this.safeString(e,"marketId");let r,a,n,o;if(void 0!==s)if(s in this.markets_by_id)t=this.markets_by_id[s];else{const[e,t]=s.split("-");a=this.safeCurrencyCode(e),n=this.safeCurrencyCode(t),r=a+"/"+n}void 0===r&&void 0!==t&&(r=t.symbol,a=t.base,n=t.quote),o="AUD"===n?n:a;let h=this.safeString(e,"side");"Bid"===h?h="buy":"Ask"===h&&(h="sell");const c=this.safeString(e,"id"),d=this.safeString(e,"price"),u=this.safeString(e,"amount"),l=this.safeString(e,"orderId");let f;const p=this.safeString(e,"fee");void 0!==p&&(f={cost:p,currency:o});const m=this.safeStringLower(e,"liquidityType");return this.safeTrade({info:e,id:c,timestamp:i,datetime:this.iso8601(i),order:l,symbol:r,type:void 0,side:h,price:d,amount:u,cost:void 0,takerOrMaker:m,fee:f},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={marketId:r.id},n=await this.publicGetMarketsMarketIdTrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,a,n={}){await this.loadMarkets();const o=this.market(e),h={marketId:o.id,amount:this.amountToPrecision(e,s),side:"buy"===i?"Bid":"Ask"},c=t.toLowerCase(),d=this.safeValue(this.options,"orderTypes",{limit:"Limit",market:"Market",stop:"Stop","stop limit":"Stop Limit","take profit":"Take Profit"});h.type=this.safeString(d,c,t);let u=!1,l=!1;if("limit"===c?u=!0:"stop limit"===c?(l=!0,u=!0):("take profit"===c||"stop"===c)&&(l=!0),u){if(void 0===a)throw new r(this.id+" createOrder() requires a price argument for a "+t+"order");h.price=this.priceToPrecision(e,a)}if(l){const i=this.safeNumber(n,"triggerPrice");if(n=this.omit(n,"triggerPrice"),void 0===i)throw new r(this.id+" createOrder() requires a triggerPrice parameter for a "+t+"order");h.triggerPrice=this.priceToPrecision(e,i)}const f=this.safeString(n,"clientOrderId");void 0!==f&&(h.clientOrderId=f),n=this.omit(n,"clientOrderId");const p=await this.privatePostOrders(this.extend(h,n));return this.parseOrder(p,o)}async cancelOrders(e,t,i={}){await this.loadMarkets();for(let t=0;t<e.length;t++)e[t]=parseInt(e[t]);const s={ids:e};return await this.privateDeleteBatchordersIds(this.extend(s,i))}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.privateDeleteOrdersId(this.extend(s,i))}calculateFee(e,t,i,s,r,a="taker",n={}){const o=this.markets[e],h=o[a];let c,d;return"AUD"===o.quote?(c=o.quote,d=parseFloat(this.costToPrecision(e,s*r))):(c=o.base,d=parseFloat(this.amountToPrecision(e,s))),{type:a,currency:c,rate:h,cost:parseFloat(this.feeToPrecision(e,h*d))}}parseOrderStatus(e){return this.safeString({Accepted:"open",Placed:"open","Partially Matched":"open","Fully Matched":"closed",Cancelled:"canceled","Partially Cancelled":"canceled",Failed:"rejected"},e,e)}parseOrder(e,t){const i=this.parse8601(this.safeString(e,"creationTime")),s=this.safeString(e,"marketId");let r;if(void 0!==s)if(s in this.markets_by_id)t=this.markets_by_id[s];else{const[e,t]=s.split("-");r=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===r&&void 0!==t&&(r=t.symbol);let a=this.safeString(e,"side");"Bid"===a?a="buy":"Ask"===a&&(a="sell");const n=this.safeStringLower(e,"type"),o=this.safeString(e,"price"),h=this.safeString(e,"amount"),c=this.safeString(e,"openAmount"),d=this.parseOrderStatus(this.safeString(e,"status")),u=this.safeString(e,"orderId"),l=this.safeString(e,"clientOrderId"),f=this.safeString(e,"timeInForce"),p=this.safeNumber(e,"triggerPrice"),m=this.safeValue(e,"postOnly");return this.safeOrder2({info:e,id:u,clientOrderId:l,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:r,type:n,timeInForce:f,postOnly:m,side:a,price:o,stopPrice:p,cost:void 0,amount:h,filled:void 0,remaining:c,average:void 0,status:d,trades:void 0,fee:void 0},t)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(r)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={status:"all"};let a;void 0!==e&&(a=this.market(e),r.marketId=a.id),void 0!==t&&(r.after=t),void 0!==i&&(r.limit=i);const n=await this.privateGetOrders(this.extend(r,s));return this.parseOrders(n,a,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"open"},s))}async fetchClosedOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.marketId=a.id),void 0!==t&&(r.after=t),void 0!==i&&(r.limit=i);const n=await this.privateGetTrades(this.extend(r,s));return this.parseTrades(n,a,t,i)}lookupSymbolFromMarketId(e){let t,i;if(void 0!==e)if(e in this.markets_by_id)t=this.markets_by_id[e];else{const[t,s]=e.split("-");i=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(s)}return void 0===i&&void 0!==t&&(i=t.symbol),i}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n="/"+this.version+"/"+this.implodeParams(e,s);const o=this.keysort(this.omit(s,this.extractParams(e)));if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.base64ToBinary(this.encode(this.secret));let s=i+n+e;"GET"===i||"DELETE"===i?Object.keys(o).length&&(n+="?"+this.urlencode(o)):s+=a=this.json(o);const h=this.hmac(this.encode(s),t,"sha512","base64");r={Accept:"application/json","Accept-Charset":"UTF-8","Content-Type":"application/json","BM-AUTH-APIKEY":this.apiKey,"BM-AUTH-TIMESTAMP":e,"BM-AUTH-SIGNATURE":h}}else"public"===t&&Object.keys(o).length&&(n+="?"+this.urlencode(o));return{url:this.urls.api[t]+n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,n,o,h,c){if(void 0!==o){if("success"in o&&!o.success){const e=this.safeString(o,"errorCode"),t=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions,e,t),new a(t)}if(e>=400){const e=this.safeString(o,"code"),t=this.safeString(o,"message"),i=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions,e,i),this.throwExactlyMatchedException(this.exceptions,t,i),new a(i)}}}}},20233:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a}=i(73449),n=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btctradeua",name:"BTC Trade UA",countries:["UA"],rateLimit:3e3,has:{cancelOrder:!0,CORS:void 0,createMarketOrder:void 0,createOrder:!0,fetchBalance:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,signIn:!0},urls:{referral:"https://btc-trade.com.ua/registration/22689",logo:"https://user-images.githubusercontent.com/1294454/27941483-79fc7350-62d9-11e7-9f61-ac47f28fcd96.jpg",api:"https://btc-trade.com.ua/api",www:"https://btc-trade.com.ua",doc:"https://docs.google.com/document/d/1ocYA0yMy_RXd561sfG3qEPZ80kyll36HUxvCRe5GbhE/edit"},api:{public:{get:["deals/{symbol}","trades/sell/{symbol}","trades/buy/{symbol}","japan_stat/high/{symbol}"]},private:{post:["auth","ask/{symbol}","balance","bid/{symbol}","buy/{symbol}","my_orders/{symbol}","order/status/{id}","remove/order/{id}","sell/{symbol}"]}},markets:{"BCH/UAH":{id:"bch_uah",symbol:"BCH/UAH",base:"BCH",quote:"UAH",baseId:"bch",quoteId:"uah",type:"spot",spot:!0},"BTC/UAH":{id:"btc_uah",symbol:"BTC/UAH",base:"BTC",quote:"UAH",baseId:"btc",quoteId:"uah",precision:{price:1},limits:{amount:{min:1e-10}},type:"spot",spot:!0},"DASH/BTC":{id:"dash_btc",symbol:"DASH/BTC",base:"DASH",quote:"BTC",baseId:"dash",quoteId:"btc",type:"spot",spot:!0},"DASH/UAH":{id:"dash_uah",symbol:"DASH/UAH",base:"DASH",quote:"UAH",baseId:"dash",quoteId:"uah",type:"spot",spot:!0},"DOGE/BTC":{id:"doge_btc",symbol:"DOGE/BTC",base:"DOGE",quote:"BTC",baseId:"doge",quoteId:"btc",type:"spot",spot:!0},"DOGE/UAH":{id:"doge_uah",symbol:"DOGE/UAH",base:"DOGE",quote:"UAH",baseId:"doge",quoteId:"uah",type:"spot",spot:!0},"ETH/UAH":{id:"eth_uah",symbol:"ETH/UAH",base:"ETH",quote:"UAH",baseId:"eth",quoteId:"uah",type:"spot",spot:!0},"ITI/UAH":{id:"iti_uah",symbol:"ITI/UAH",base:"ITI",quote:"UAH",baseId:"iti",quoteId:"uah",type:"spot",spot:!0},"KRB/UAH":{id:"krb_uah",symbol:"KRB/UAH",base:"KRB",quote:"UAH",baseId:"krb",quoteId:"uah",type:"spot",spot:!0},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc",type:"spot",spot:!0},"LTC/UAH":{id:"ltc_uah",symbol:"LTC/UAH",base:"LTC",quote:"UAH",baseId:"ltc",quoteId:"uah",type:"spot",spot:!0},"NVC/BTC":{id:"nvc_btc",symbol:"NVC/BTC",base:"NVC",quote:"BTC",baseId:"nvc",quoteId:"btc",type:"spot",spot:!0},"NVC/UAH":{id:"nvc_uah",symbol:"NVC/UAH",base:"NVC",quote:"UAH",baseId:"nvc",quoteId:"uah",type:"spot",spot:!0},"PPC/BTC":{id:"ppc_btc",symbol:"PPC/BTC",base:"PPC",quote:"BTC",baseId:"ppc",quoteId:"btc",type:"spot",spot:!0},"SIB/UAH":{id:"sib_uah",symbol:"SIB/UAH",base:"SIB",quote:"UAH",baseId:"sib",quoteId:"uah",type:"spot",spot:!0},"XMR/UAH":{id:"xmr_uah",symbol:"XMR/UAH",base:"XMR",quote:"UAH",baseId:"xmr",quoteId:"uah",type:"spot",spot:!0},"ZEC/UAH":{id:"zec_uah",symbol:"ZEC/UAH",base:"ZEC",quote:"UAH",baseId:"zec",quoteId:"uah",type:"spot",spot:!0}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:6e-4,LTC:.01,NVC:.01,DOGE:10}}}})}async signIn(e={}){return await this.privatePostAuth(e)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i={info:t},s=this.safeValue(t,"accounts");for(let e=0;e<s.length;e++){const t=s[e],r=this.safeString(t,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.total=this.safeString(t,"balance"),i[a]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id},r=await this.publicGetTradesBuySymbol(this.extend(s,i)),a=await this.publicGetTradesSellSymbol(this.extend(s,i)),n={bids:[],asks:[]};return r&&"list"in r&&(n.bids=r.list),a&&"list"in a&&(n.asks=a.list),this.parseOrderBook(n,e,void 0,"bids","asks","price","currency_trade")}async fetchTicker(e,t={}){await this.loadMarkets();const i={symbol:this.marketId(e)},s=await this.publicGetJapanStatHighSymbol(this.extend(i,t)),r=this.safeValue(s,"trades"),a=this.milliseconds(),n={symbol:e,timestamp:a,datetime:this.iso8601(a),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:void 0,last:void 0,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:r},o=r.length;if(o>0){for(let e=Math.max(o-48,0);e<r.length;e++){const t=r[e];void 0===n.open&&(n.open=this.safeNumber(t,1));const i=this.safeNumber(t,2);(void 0===n.high||void 0!==i&&n.high<i)&&(n.high=i);const s=this.safeNumber(t,3);(void 0===n.low||void 0!==s&&n.low>s)&&(n.low=s);const a=this.safeNumber(t,5);void 0===n.baseVolume?n.baseVolume=a:n.baseVolume=this.sum(n.baseVolume,a)}const e=o-1;n.last=this.safeNumber(r[e],4),n.close=n.last}return n}convertMonthNameToString(e){return this.safeString({Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sept:"09",Oct:"10",Nov:"11",Dec:"12"},e)}parseExchangeSpecificDatetime(e){const t=e.split(" ");let i=t[0],s=t[1].replace(",","");s.length<2&&(s="0"+s);const a=t[2].replace(",","");if(i=i.replace(",",""),i=i.replace(".",""),i=this.convertMonthNameToString(i),!i)throw new r(this.id+" parseTrade() unrecognized month name: "+e);const n=t[3].split(":");let o=this.safeString(n,0),h="00";const c=this.safeString(t,4);if("noon"===o)o="12";else{let e=parseInt(o);void 0!==c&&"p"===c[0]&&(e=12+e,e>23&&(e=0)),o=e.toString(),o.length<2&&(o="0"+o),h=this.safeString(n,1,"00"),h.length<2&&(h="0"+h)}const d=[a,i,s].join("-")+"T"+o+":"+h+":00",u=this.parse8601(d),l=parseInt(h);return l<11||l>2?u-72e5:u-108e5}parseTrade(e,t){const i=this.parseExchangeSpecificDatetime(this.safeString(e,"pub_date")),s=this.safeString(e,"id"),r=this.safeString(e,"type"),a=this.safeString(e,"price"),o=this.safeString(e,"amnt_trade"),h=this.parseNumber(a),c=this.parseNumber(o),d=this.parseNumber(n.stringMul(a,o));let u;return void 0!==t&&(u=t.symbol),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:u,type:"limit",side:r,order:void 0,takerOrMaker:void 0,price:h,amount:c,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},n=await this.publicGetDealsSymbol(this.extend(a,s)),o=[];for(let e=0;e<n.length;e++)this.safeInteger(n[e],"id")%2&&o.push(n[e]);return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,a,n={}){if("market"===t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();const o=this.market(e),h="privatePost"+this.capitalize(i)+"Id",c={count:s,currency1:o.quoteId,currency:o.baseId,price:a};return this[h](this.extend(c,n))}async cancelOrder(e,t,i={}){const s={id:e};return await this.privatePostRemoveOrderId(this.extend(s,i))}parseOrder(e,t){const i=this.milliseconds(),s=this.safeSymbol(void 0,t),r=this.safeString(e,"type"),a=this.safeString(e,"price"),n=this.safeString(e,"amnt_trade"),o=this.safeString(e,"amnt_trade");return this.safeOrder2({id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:"open",symbol:s,type:void 0,timeInForce:void 0,postOnly:void 0,side:r,price:a,stopPrice:void 0,amount:n,filled:void 0,remaining:o,trades:void 0,info:e,cost:void 0,average:void 0,fee:void 0},t)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={symbol:r.id},o=await this.privatePostMyOrdersSymbol(this.extend(n,s)),h=this.safeValue(o,"your_open_orders");return this.parseOrders(h,r,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(o).length&&(n+=this.implodeParams(e,o));else{this.checkRequiredCredentials();const e=this.nonce(),t=(a=this.urlencode(this.extend({out_order_id:e,nonce:e},o)))+this.secret;r={"public-key":this.apiKey,"api-sign":this.hash(this.encode(t),"sha256"),"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:a,headers:r}}}},51899:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,InsufficientFunds:a,InvalidOrder:n}=i(73449),o=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcturk",name:"BTCTurk",countries:["TR"],rateLimit:100,has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},timeframes:{"1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87153926-efbef500-c2c0-11ea-9842-05b63612c4b9.jpg",api:{public:"https://api.btcturk.com/api/v2",private:"https://api.btcturk.com/api/v1",graph:"https://graph-api.btcturk.com/v1"},www:"https://www.btcturk.com",doc:"https://github.com/BTCTrader/broker-api-docs"},api:{public:{get:{orderbook:1,ticker:.1,trades:1,"server/exchangeinfo":1}},private:{get:{"users/balances":1,openOrders:1,allOrders:1,"users/transactions/trade":1},post:{order:1,cancelOrder:1},delete:{order:1}},graph:{get:{ohlcs:1}}},fees:{trading:{maker:this.parseNumber("0.0005"),taker:this.parseNumber("0.0009")}},exceptions:{exact:{FAILED_ORDER_WITH_OPEN_ORDERS:a,FAILED_LIMIT_ORDER:n,FAILED_MARKET_ORDER:n}}})}async fetchMarkets(e={}){const t=await this.publicGetServerExchangeinfo(e),i=this.safeValue(t,"data"),s=this.safeValue(i,"symbols",[]),r=[];for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"name"),a=this.safeString(t,"numerator"),n=this.safeString(t,"denominator"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c=o+"/"+h,d=this.safeValue(t,"filters");let u,l,f,p,m;for(let e=0;e<d.length;e++){const t=d[e];"PRICE_FILTER"===this.safeString(t,"filterType")&&(u=this.safeNumber(t,"minPrice"),l=this.safeNumber(t,"maxPrice"),f=this.safeNumber(t,"minAmount"),p=this.safeNumber(t,"maxAmount"),m=this.safeNumber(t,"minExchangeValue"))}const g="TRADING"===this.safeString(t,"status"),y={price:{min:u,max:l},amount:{min:f,max:p},cost:{min:m,max:void 0}},b={price:this.safeInteger(t,"denominatorScale"),amount:this.safeInteger(t,"numeratorScale")};r.push({info:t,symbol:c,id:i,base:o,quote:h,baseId:a,quoteId:n,limits:y,precision:b,type:"spot",spot:!0,active:g})}return r}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUsersBalances(e),i=this.safeValue(t,"data",[]),s={info:t,timestamp:void 0,datetime:void 0};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"asset"),a=this.safeCurrencyCode(r),n=this.account();n.total=this.safeString(t,"balance"),n.free=this.safeString(t,"free"),n.used=this.safeString(t,"locked"),s[a]=n}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pairSymbol:this.market(e).id},r=await this.publicGetOrderbook(this.extend(s,i)),a=this.safeValue(r,"data"),n=this.safeInteger(a,"timestamp");return this.parseOrderBook(a,e,n,"bids","asks",0,1)}parseTicker(e,t){const i=this.safeString(e,"pair"),s=this.safeSymbol(i,t),r=this.safeInteger(e,"timestamp"),a=this.safeNumber(e,"last");return{symbol:s,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeNumber(e,"open"),close:a,last:a,previousClose:void 0,change:this.safeNumber(e,"daily"),percentage:this.safeNumber(e,"dailyPercent"),average:this.safeNumber(e,"average"),baseVolume:this.safeNumber(e,"volume"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s=this.safeValue(i,"data");return this.parseTickers(s,e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=await this.fetchTickers([e],t);return this.safeValue(i,e)}parseTrade(e,t){const i=this.safeInteger2(e,"date","timestamp"),s=this.safeString2(e,"tid","id"),r=this.safeString(e,"orderId"),a=this.safeString(e,"price"),n=o.stringAbs(this.safeString(e,"amount")),h=this.safeString(e,"pair"),c=this.safeSymbol(h,t),d=this.safeString2(e,"side","orderType");let u;const l=this.safeString(e,"fee");if(void 0!==l){const t=this.safeString(e,"denominatorSymbol");u={cost:o.stringAbs(l),currency:this.safeCurrencyCode(t)}}return this.safeTrade({info:e,id:s,order:r,timestamp:i,datetime:this.iso8601(i),symbol:c,type:void 0,side:d,takerOrMaker:void 0,price:a,amount:n,cost:void 0,fee:u},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pairSymbol:r.id};void 0!==i&&(a.last=i);const n=await this.publicGetTrades(this.extend(a,s)),o=this.safeValue(n,"data");return this.parseTrades(o,r,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchOHLCV(e,t="1d",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={pair:a.id};void 0!==s&&(n.last=s);const o=await this.graphGetOhlcs(this.extend(n,r));return this.parseOHLCVs(o,a,t,i,s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o={orderType:i,orderMethod:t,pairSymbol:n.id,quantity:this.amountToPrecision(e,s)};"market"!==t&&(o.price=this.priceToPrecision(e,r)),"clientOrderId"in a?o.newClientOrderId=a.clientOrderId:"newClientOrderId"in a||(o.newClientOrderId=this.uuid());const h=await this.privatePostOrder(this.extend(o,a)),c=this.safeValue(h,"data");return this.parseOrder(c,n)}async cancelOrder(e,t,i={}){const s={id:e};return await this.privateDeleteOrder(this.extend(s,i))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.pairSymbol=a.id);const n=await this.privateGetOpenOrders(this.extend(r,s)),o=this.safeValue(n,"data"),h=this.safeValue(o,"bids",[]),c=this.safeValue(o,"asks",[]);return this.parseOrders(this.arrayConcat(h,c),a,t,i)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pairSymbol:r.id};void 0!==i&&(a.last=i),void 0!==t&&(a.startTime=Math.floor(t/1e3));const n=await this.privateGetAllOrders(this.extend(a,s)),o=this.safeValue(n,"data");return this.parseOrders(o,r,t,i)}parseOrderStatus(e){return this.safeString({Untouched:"open",Partial:"open",Canceled:"canceled",Closed:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"price"),r=this.safeString2(e,"amount","quantity"),a=o.stringAbs(r),n=this.safeString(e,"leftAmount"),h=this.safeNumber(e,"pairSymbol"),c=this.safeSymbol(h,t),d=this.safeString(e,"type"),u=this.safeString(e,"method"),l=this.safeString(e,"orderClientId"),f=this.safeInteger2(e,"updateTime","datetime"),p=this.safeString(e,"status"),m=this.parseOrderStatus(p);return this.safeOrder2({info:e,id:i,price:s,amount:a,remaining:n,filled:void 0,cost:void 0,average:void 0,status:m,side:d,type:u,clientOrderId:l,timestamp:f,datetime:this.iso8601(f),symbol:c,fee:void 0},t)}async fetchMyTrades(e,t,i,s={}){let r;await this.loadMarkets(),void 0!==e&&(r=this.market(e));const a=await this.privateGetUsersTransactionsTrade(),n=this.safeValue(a,"data");return this.parseTrades(n,r,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,n){if("btctrader"===this.id)throw new r(this.id+" is an abstract base API for BTCExchange, BTCTurk");let o=this.urls.api[t]+"/"+e;if("GET"===i||"DELETE"===i?Object.keys(s).length&&(o+="?"+this.urlencode(s)):n=this.json(s),"private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.base64ToBinary(this.secret),i=this.apiKey+e;a={"X-PCK":this.apiKey,"X-Stamp":e,"X-Signature":this.hmac(this.encode(i),t,"sha256","base64"),"Content-Type":"application/json"}}return{url:o,method:i,body:n,headers:a}}handleErrors(e,t,i,s,a,n,o,h,c){const d=this.safeString(o,"code","0"),u=this.safeString(o,"message"),l=void 0===u?n:u;if(this.throwExactlyMatchedException(this.exceptions.exact,u,this.id+" "+l),"0"!==d)throw new r(this.id+" "+l)}}},64875:(e,t,i)=>{"use strict";const s=i(48819),{AddressPending:r,AuthenticationError:a,ExchangeError:n,NotSupported:o,PermissionDenied:h,ArgumentsRequired:c}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"buda",name:"Buda",countries:["AR","CL","CO","PE"],rateLimit:1e3,version:"v2",has:{cancelOrder:!0,CORS:void 0,createDepositAddress:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:void 0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/47380619-8a029200-d706-11e8-91e0-8a391fe48de3.jpg",api:"https://www.buda.com/api",www:"https://www.buda.com",doc:"https://api.buda.com",fees:"https://www.buda.com/comisiones"},status:{status:"error",updated:void 0,eta:void 0,url:void 0},api:{public:{get:["pairs","markets","currencies","markets/{market}","markets/{market}/ticker","markets/{market}/volume","markets/{market}/order_book","markets/{market}/trades","currencies/{currency}/fees/deposit","currencies/{currency}/fees/withdrawal","tv/history"],post:["markets/{market}/quotations"]},private:{get:["balances","balances/{currency}","currencies/{currency}/balances","orders","orders/{id}","markets/{market}/orders","deposits","currencies/{currency}/deposits","withdrawals","currencies/{currency}/withdrawals","currencies/{currency}/receive_addresses","currencies/{currency}/receive_addresses/{id}"],post:["markets/{market}/orders","currencies/{currency}/deposits","currencies/{currency}/withdrawals","currencies/{currency}/simulated_withdrawals","currencies/{currency}/receive_addresses"],put:["orders/{id}"]}},timeframes:{"1m":"1","5m":"5","30m":"30","1h":"60","2h":"120","1d":"D","1w":"W"},fees:{trading:{tierBased:!0,percentage:!0,taker:.008,maker:.004,tiers:{taker:[[0,.008],[2e3,.007],[2e4,.006],[1e5,.005],[5e5,.004],[25e5,.003],[125e5,.002]],maker:[[0,.004],[2e3,.0035],[2e4,.003],[1e5,.0025],[5e5,.002],[25e5,.0015],[125e5,.001]]}}},exceptions:{not_authorized:a,forbidden:h,invalid_record:n,not_found:n,parameter_missing:n,bad_parameter:n}})}async fetchCurrencyInfo(e,t){if(!t){const e=await this.publicGetCurrencies();t=this.safeValue(e,"currencies")}for(let i=0;i<t.length;i++){const s=t[i];if(s.id===e)return s}}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=this.safeValue(t,"markets"),s=await this.publicGetCurrencies(),r=this.safeValue(s,"currencies"),a=[];for(let e=0;e<i.length;e++){const t=i[e],s=this.safeString(t,"id"),n=this.safeString(t,"base_currency"),o=this.safeString(t,"quote_currency"),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=await this.fetchCurrencyInfo(n,r),u=await this.fetchCurrencyInfo(o,r),l=h+"/"+c,f=this.safeString(u,"input_decimals"),p=this.parsePrecision(f),m={amount:this.safeInteger(d,"input_decimals"),price:parseInt(f)},g=this.safeValue(t,"minimum_order_amount",[]),y={amount:{min:this.safeNumber(g,0),max:void 0},price:{min:p,max:void 0},cost:{min:void 0,max:void 0}};a.push({id:s,symbol:l,base:h,quote:c,baseId:n,quoteId:o,type:"spot",spot:!0,active:!0,precision:m,limits:y,info:t})}return a}async fetchCurrencies(e={}){const t=(await this.publicGetCurrencies()).currencies,i={};for(let e=0;e<t.length;e++){const s=t[e];if(!s.managed)continue;const r=this.safeString(s,"id"),a=this.safeCurrencyCode(r),n=this.safeNumber(s,"input_decimals"),o=Math.pow(10,-n);i[a]={id:r,code:a,info:s,name:void 0,active:!0,fee:void 0,precision:n,limits:{amount:{min:o,max:void 0},deposit:{min:parseFloat(s.deposit_minimum[0]),max:void 0},withdraw:{min:parseFloat(s.withdrawal_minimum[0])}}}}return i}async fetchFundingFees(e,t={}){await this.loadMarkets();const i={},s={},r={};void 0===e&&(e=Object.keys(this.currencies));for(let t=0;t<e.length;t++){const a=e[t],n={currency:this.currency(a).id},o=await this.publicGetCurrenciesCurrencyFeesWithdrawal(n),h=await this.publicGetCurrenciesCurrencyFeesDeposit(n);i[a]=this.parseFundingFee(o.fee),s[a]=this.parseFundingFee(h.fee),r[a]={withdraw:o,deposit:h}}return{withdraw:i,deposit:s,info:r}}parseFundingFee(e,t){return void 0===t&&(t=e.name),"withdrawal"===t&&(t="withdraw"),{type:t,currency:e.base[1],rate:e.percent,cost:parseFloat(e.base[0])}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.publicGetMarketsMarketTicker(this.extend(s,t)),a=this.safeValue(r,"ticker");return this.parseTicker(a,i)}parseTicker(e,t){const i=this.milliseconds();let s;void 0!==t&&(s=t.symbol);const r=parseFloat(e.last_price[0]),a=parseFloat(e.price_variation_24h),n=parseFloat(this.priceToPrecision(s,r/(a+1))),o=r-n,h=this.sum(r,n)/2;return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:parseFloat(e.max_bid[0]),bidVolume:void 0,ask:parseFloat(e.min_ask[0]),askVolume:void 0,vwap:void 0,open:n,close:r,last:r,previousClose:n,change:o,percentage:100*a,average:h,baseVolume:parseFloat(e.volume[0]),quoteVolume:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==i&&(a.limit=i);const n=await this.publicGetMarketsMarketTrades(this.extend(a,s));return this.parseTrades(n.trades.entries,r,t,i)}parseTrade(e,t){let i,s,r,a,n,o;return t&&(o=t.symbol),Array.isArray(e)&&(i=this.safeInteger(e,0),r=this.safeString(e,1),a=this.safeString(e,2),s=this.safeString(e,3),n=this.safeString(e,4)),this.safeTrade({id:n,order:void 0,info:e,timestamp:i,datetime:this.iso8601(i),symbol:o,type:void 0,side:s,takerOrMaker:void 0,price:r,amount:a,cost:void 0,fee:void 0},t)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id},r=await this.publicGetMarketsMarketOrderBook(this.extend(s,i)),a=this.safeValue(r,"order_book");return this.parseOrderBook(a,e)}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e);void 0===i&&(i=this.milliseconds()-864e5);const n={symbol:a.id,resolution:this.timeframes[t],from:i/1e3,to:this.seconds()},o=await this.publicGetTvHistory(this.extend(n,r));return this.parseTradingViewOHLCV(o,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalances(e),i={info:t},s=this.safeValue(t,"balances");for(let e=0;e<s.length;e++){const t=s[e],r=this.safeString(t,"id"),a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(t.available_amount,0),n.total=this.safeString(t.amount,0),i[a]=n}return this.parseBalance(i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:parseInt(e)},r=await this.privateGetOrdersId(this.extend(s,i)),a=this.safeValue(r,"order");return this.parseOrder(a)}async fetchOrders(e,t,i,s={}){let r;await this.loadMarkets(),void 0!==e&&(r=this.market(e));const a={market:r.id,per:i},n=await this.privateGetMarketsMarketOrders(this.extend(a,s)),o=this.safeValue(n,"orders");return this.parseOrders(o,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"pending"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"traded"},s))}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),i="buy"===i?"Bid":"Ask";const n={market:this.marketId(e),price_type:t,type:i,amount:this.amountToPrecision(e,s)};"limit"===t&&(n.limit=this.priceToPrecision(e,r));const o=await this.privatePostMarketsMarketOrders(this.extend(n,a)),h=this.safeValue(o,"order");return this.parseOrder(h)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:parseInt(e),state:"canceling"},r=await this.privatePutOrdersId(this.extend(s,i)),a=this.safeValue(r,"order");return this.parseOrder(a)}parseOrderStatus(e){return this.safeString({traded:"closed",received:"open",canceling:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"created_at")),r=this.iso8601(s),a=this.safeString(e,"market_id"),n=this.safeSymbol(a,t,"-"),o=this.safeString(e,"price_type"),h=this.safeStringLower(e,"type"),c=this.parseOrderStatus(this.safeString(e,"state")),d=this.safeValue(e,"original_amount",[]),u=this.safeString(d,0),l=this.safeValue(e,"amount",[]),f=this.safeString(l,0),p=this.safeValue(e,"traded_amount",[]),m=this.safeString(p,0),g=this.safeValue(e,"totalExchanged",[]),y=this.safeString(g,0),b=this.safeValue(e,"limit",[]);let v=this.safeString(b,0);void 0===v&&void 0!==b&&(v=b);const w=this.safeValue(e,"paid_fee",[]),k=this.safeString(w,0);let _;if(void 0!==k){const e=this.safeString(w,1);_={cost:k,code:this.safeCurrencyCode(e)}}return this.safeOrder2({info:e,id:i,clientOrderId:void 0,datetime:r,timestamp:s,lastTradeTimestamp:void 0,status:c,symbol:n,type:o,timeInForce:void 0,postOnly:void 0,side:h,price:v,stopPrice:void 0,average:void 0,cost:y,amount:u,filled:m,remaining:f,trades:void 0,fee:_},t)}isFiat(e){return this.safeValue({ARS:!0,CLP:!0,COP:!0,PEN:!0},e,!1)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);if(this.isFiat(e))throw new o(this.id+" fetchDepositAddress() for fiat "+e+" is not supported");const s={currency:i.id},a=await this.privateGetCurrenciesCurrencyReceiveAddresses(this.extend(s,t)),n=this.safeValue(a,"receive_addresses"),h=[];for(let e=1;e<n.length;e++){const t=n[e];if(t.ready){const e=t.address;this.checkAddress(e),h.push(e)}}if(h.length<1)throw new r(this.id+": there are no addresses ready for receiving "+e+", retry again later)");return{currency:e,address:h[0],tag:void 0,network:void 0,info:n}}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);if(this.isFiat(e))throw new o(this.id+": fiat fetchDepositAddress() for "+e+" is not supported");const s={currency:i.id},r=await this.privatePostCurrenciesCurrencyReceiveAddresses(this.extend(s,t));return{currency:e,address:this.safeString(r.receive_address,"address"),tag:void 0,info:r}}parseTransactionStatus(e){return this.safeString({rejected:"failed",confirmed:"ok",anulled:"canceled",retained:"canceled",pending_confirmation:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"created_at")),r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r,t),n=parseFloat(e.amount[0]),o=parseFloat(e.fee[0]),h=e.fee[1],c=this.parseTransactionStatus(this.safeString(e,"state")),d="deposit_data"in e?"deposit":"withdrawal",u=this.safeValue(e,d+"_data",{}),l=this.safeValue(u,"target_address"),f=this.safeString(u,"tx_hash"),p=this.parse8601(this.safeString(u,"updated_at"));return{info:e,id:i,txid:f,timestamp:s,datetime:this.iso8601(s),address:l,type:d,amount:n,currency:a,status:c,updated:p,fee:{cost:o,rate:h}}}async fetchDeposits(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new c(this.id+": fetchDeposits() requires a currency code argument");const r=this.currency(e),a={currency:r.id,per:i},n=await this.privateGetCurrenciesCurrencyDeposits(this.extend(a,s)),o=this.safeValue(n,"deposits");return this.parseTransactions(o,r,t,i)}async fetchWithdrawals(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new c(this.id+": fetchDeposits() requires a currency code argument");const r=this.currency(e),a={currency:r.id,per:i},n=await this.privateGetCurrenciesCurrencyWithdrawals(this.extend(a,s)),o=this.safeValue(n,"withdrawals");return this.parseTransactions(o,r,t,i)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,amount:t,withdrawal_data:{target_address:i}},n=await this.privatePostCurrenciesCurrencyWithdrawals(this.extend(a,r)),o=this.safeValue(n,"withdrawal");return this.parseTransaction(o)}nonce(){return this.microseconds()}sign(e,t="public",i="GET",s={},r,a){let n=this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));Object.keys(o).length&&("GET"===i?n+="?"+this.urlencode(o):a=this.json(o));const h=this.urls.api+"/"+this.version+"/"+n;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=[i,"/api/"+this.version+"/"+n];if(a){const e=this.stringToBase64(a);t.push(this.decode(e))}t.push(e);const s=t.join(" "),o=this.hmac(this.encode(s),this.encode(this.secret),"sha384");r={"X-SBTC-APIKEY":this.apiKey,"X-SBTC-SIGNATURE":o,"X-SBTC-NONCE":e,"Content-Type":"application/json"}}return{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o,h,c){if(void 0!==o&&e>=400){const e=this.safeString(o,"code"),t=this.safeString(o,"message",a),i=this.id+" "+t;if(void 0!==e)throw this.throwExactlyMatchedException(this.exceptions,e,i),new n(i)}}}},41520:(e,t,i)=>{"use strict";const s=i(48819),{RateLimitExceeded:r,BadSymbol:a,OrderNotFound:n,ExchangeError:o,AuthenticationError:h,ArgumentsRequired:c,ExchangeNotAvailable:d}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bw",name:"BW",countries:["CN"],rateLimit:1500,version:"v1",has:{cancelAllOrders:void 0,cancelOrder:!0,cancelOrders:void 0,CORS:void 0,createDepositAddress:void 0,createLimitOrder:!0,createMarketOrder:void 0,createOrder:!0,deposit:void 0,editOrder:void 0,fetchBalance:!0,fetchBidsAsks:void 0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:void 0,fetchL2OrderBook:void 0,fetchLedger:void 0,fetchMarkets:!0,fetchMyTrades:void 0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:void 0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:void 0,fetchTradingFees:void 0,fetchTradingLimits:void 0,fetchTransactions:void 0,fetchWithdrawals:!0,withdraw:void 0},timeframes:{"1m":"1M","5m":"5M","15m":"15M","30m":"30M","1h":"1H","1w":"1W"},hostname:"bw.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/69436317-31128c80-0d52-11ea-91d1-eb7bb5818812.jpg",api:"https://www.{hostname}",www:"https://www.bw.com",doc:"https://github.com/bw-exchange/api_docs_en/wiki",fees:"https://www.bw.com/feesRate",referral:"https://www.bw.com/regGetCommission/N3JuT1R3bWxKTE0"},requiredCredentials:{apiKey:!0,secret:!0},fees:{trading:{tierBased:!1,percentage:!0,taker:this.parseNumber("0.002"),maker:this.parseNumber("0.002")},funding:{}},exceptions:{exact:{999:h,1e3:d,2012:n,5017:a,10001:r}},api:{public:{get:["api/data/v1/klines","api/data/v1/ticker","api/data/v1/tickers","api/data/v1/trades","api/data/v1/entrusts","exchange/config/controller/website/marketcontroller/getByWebId","exchange/config/controller/website/currencycontroller/getCurrencyList"]},private:{get:["exchange/entrust/controller/website/EntrustController/getEntrustById","exchange/entrust/controller/website/EntrustController/getUserEntrustRecordFromCacheWithPage","exchange/entrust/controller/website/EntrustController/getUserEntrustList","exchange/fund/controller/website/fundwebsitecontroller/getwithdrawaddress","exchange/fund/controller/website/fundwebsitecontroller/getpayoutcoinrecord","exchange/entrust/controller/website/EntrustController/getUserEntrustList"],post:["exchange/fund/controller/website/fundcontroller/getPayinAddress","exchange/fund/controller/website/fundcontroller/getPayinCoinRecord","exchange/fund/controller/website/fundcontroller/findbypage","exchange/entrust/controller/website/EntrustController/addEntrust","exchange/entrust/controller/website/EntrustController/cancelEntrust"]}}})}async fetchMarkets(e={}){const t=await this.publicGetExchangeConfigControllerWebsiteMarketcontrollerGetByWebId(e),i=this.safeValue(t,"datas",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"marketId"),a=parseInt(r),n=this.safeStringUpper(t,"name");let[o,h]=n.split("_");o=this.safeCurrencyCode(o),h=this.safeCurrencyCode(h);const c=this.safeString(t,"sellerCurrencyId"),d=this.safeString(t,"buyerCurrencyId"),u=parseInt(c),l=parseInt(d),f=o+"/"+h,p=1===this.safeInteger(t,"state"),m=this.safeNumber(t,"defaultFee");s.push({id:r,numericId:a,symbol:f,base:o,quote:h,baseId:c,quoteId:d,baseNumericId:u,quoteNumericId:l,type:"spot",spot:!0,active:p,maker:m,taker:m,info:t,precision:{amount:this.safeInteger(t,"amountDecimal"),price:this.safeInteger(t,"priceDecimal")},limits:{amount:{min:this.safeNumber(t,"minAmount"),max:void 0},price:{min:0,max:void 0},cost:{min:0,max:void 0}}})}return s}async fetchCurrencies(e={}){const t=await this.publicGetExchangeConfigControllerWebsiteCurrencycontrollerGetCurrencyList(e),i=this.safeValue(t,"datas",[]),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currencyId"),a=this.safeCurrencyCode(this.safeStringUpper(t,"name")),n=1===this.safeInteger(t,"state");s[a]={id:r,code:a,info:t,name:a,active:n,fee:this.safeNumber(t,"drawFee"),precision:void 0,limits:{amount:{min:this.safeNumber(t,"limitAmount",0),max:void 0},withdraw:{min:void 0,max:this.safeNumber(t,"onceDrawLimit")}}}}return s}parseTicker(e,t){const i=this.safeString(e,0),s=this.safeSymbol(i,t),r=this.milliseconds(),a=this.safeNumber(e,1),n=this.safeValue(e,"bid",{}),o=this.safeValue(e,"ask",{});return{symbol:s,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,2),low:this.safeNumber(e,3),bid:this.safeNumber(e,7),bidVolume:this.safeNumber(n,"quantity"),ask:this.safeNumber(e,8),askVolume:this.safeNumber(o,"quantity"),vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:this.safeNumber(e,5),percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,4),quoteVolume:this.safeNumber(e,9),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={marketId:i.id},r=await this.publicGetApiDataV1Ticker(this.extend(s,t)),a=this.safeValue(r,"datas",[]);return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetApiDataV1Tickers(t),s=this.safeValue(i,"datas",[]),r={};for(let t=0;t<s.length;t++){const i=this.parseTicker(s[t]),a=i.symbol;(void 0===e||this.inArray(a,e))&&(r[a]=i)}return this.filterByArray(r,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={marketId:this.market(e).id};void 0!==t&&(s.dataSize=t);const r=await this.publicGetApiDataV1Entrusts(this.extend(s,i)),a=this.safeValue(r,"datas",[]),n=this.safeTimestamp(a,"timestamp");return this.parseOrderBook(a,e,n)}parseTrade(e,t){const i=this.safeTimestamp(e,2),s=this.safeString(e,5),r=this.safeString(e,6),a=this.safeString(e,1);let n;if(void 0!==a)if(a in this.markets_by_id)t=this.markets_by_id[a];else{const t=this.safeString(e,3),[i,s]=t.split("_");n=this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(s)}void 0===n&&void 0!==t&&(n=t.symbol);const o="ask"===this.safeString(e,4)?"sell":"buy";return this.safeTrade({id:void 0,timestamp:i,datetime:this.iso8601(i),symbol:n,order:void 0,type:"limit",side:o,takerOrMaker:void 0,price:s,amount:r,cost:void 0,fee:void 0,info:e},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={marketId:r.id};void 0!==i&&(a.dataSize=i);const n=await this.publicGetApiDataV1Trades(this.extend(a,s)),o=this.safeValue(n,"datas",[]);return this.parseTrades(o,r,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,3),this.safeNumber(e,4),this.safeNumber(e,5),this.safeNumber(e,6),this.safeNumber(e,7),this.safeNumber(e,8)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={marketId:a.id,type:this.timeframes[t],dataSize:500};void 0!==s&&(n.dataSize=s);const o=await this.publicGetApiDataV1Klines(this.extend(n,r)),h=this.safeValue(o,"datas",[]);return this.parseOHLCVs(h,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostExchangeFundControllerWebsiteFundcontrollerFindbypage(e),i=this.safeValue(t,"datas",{}),s=this.safeValue(i,"list",[]),r={info:t};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"currencyTypeId"),a=this.safeCurrencyCode(i),n=this.account();n.free=this.safeString(t,"amount"),n.used=this.safeString(t,"freeze"),r[a]=n}return this.parseBalance(r)}async createOrder(e,t,i,s,r,a={}){if(void 0===r)throw new o(this.id+" allows limit orders only");await this.loadMarkets();const n=this.market(e),h={amount:this.amountToPrecision(e,s),price:this.priceToPrecision(e,r),type:"buy"===i?1:0,rangeType:0,marketId:n.id},c=await this.privatePostExchangeEntrustControllerWebsiteEntrustControllerAddEntrust(this.extend(h,a)),d=this.safeValue(c,"datas");return{id:this.safeString(d,"entrustId"),info:c,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:e,type:t,side:i,price:r,amount:s,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:"open",fee:void 0,trades:void 0,clientOrderId:void 0}}parseOrderStatus(e){return this.safeString({"-3":"canceled","-2":"canceled","-1":"canceled",0:"open",1:"canceled",2:"closed",3:"open",4:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"marketId"),s=this.safeSymbol(i,t),r=this.safeInteger(e,"createTime");let a=this.safeString(e,"type");"0"===a?a="sell":"1"===a&&(a="buy");const n=this.safeString(e,"amount"),o=this.safeString(e,"price"),h=this.safeString(e,"completeAmount"),c=this.safeString2(e,"availabelAmount","availableAmount"),d=this.safeString(e,"totalMoney"),u=this.parseOrderStatus(this.safeString(e,"status"));return this.safeOrder2({info:e,id:this.safeString(e,"entrustId"),clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:s,type:"limit",timeInForce:void 0,postOnly:void 0,side:a,price:o,stopPrice:void 0,amount:n,cost:d,average:void 0,filled:h,remaining:c,status:u,fee:void 0,trades:void 0},t)}async fetchOrder(e,t,i={}){if(void 0===t)throw new c(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={marketId:s.id,entrustId:e},a=await this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetEntrustById(this.extend(r,i)),n=this.safeValue(a,"datas",{});return this.parseOrder(n,s)}async cancelOrder(e,t,i={}){if(void 0===t)throw new c(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s={marketId:this.market(t).id,entrustId:e};return{info:await this.privatePostExchangeEntrustControllerWebsiteEntrustControllerCancelEntrust(this.extend(s,i)),id:e}}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={marketId:r.id};void 0!==i&&(a.pageSize=i);const n=await this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustRecordFromCacheWithPage(this.extend(a,s)),o=this.safeValue(n,"datas",{}),h=this.safeValue(o,"entrustList",[]);return this.parseOrders(h,r,t,i)}async fetchClosedOrders(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchClosedOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={marketId:r.id};void 0!==i&&(a.pageSize=i),void 0!==t&&(a.startDateTime=t);const n=await this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustList(this.extend(a,s)),o=this.safeValue(n,"datas",{}),h=this.safeValue(o,"entrustList",[]);return this.parseOrders(h,r,t,i)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={marketId:r.id};void 0!==t&&(a.startDateTime=t),void 0!==i&&(a.pageSize=i);const n=await this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustList(this.extend(a,s)),o=this.safeValue(n,"datas",{}),h=this.safeValue(o,"entrustList",[]);return this.parseOrders(h,r,t,i)}sign(e,t="public",i="GET",s={},r,a){let n=this.implodeHostname(this.urls.api)+"/"+e;if("GET"===i?Object.keys(s).length&&(n+="?"+this.urlencode(s)):a=this.json(s),"private"===t){const e=this.milliseconds().toString();let t="";if("GET"===i){const e=this.keysort(s),i=Object.keys(e);for(let s=0;s<i.length;s++){const r=i[s];t+=r+e[r].toString()}}else t=a;const n=this.apiKey+e+t+this.secret,o=this.hash(this.encode(n),"md5");r||(r={}),r.Apiid=this.apiKey,r.Timestamp=e,r.Sign=o}return{url:n,method:i,body:a,headers:r}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currencyTypeName:this.currency(e).name},s=await this.privatePostExchangeFundControllerWebsiteFundcontrollerGetPayinAddress(this.extend(i,t)),r=this.safeValue(s,"datas",{}),a=this.safeString(r,"address"),n=this.safeString(r,"memo");return this.checkAddress(a),{currency:e,address:this.checkAddress(a),tag:n,network:void 0,info:s}}parseTransactionStatus(e){return this.safeString({"-1":"canceled",0:"pending",1:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"depositId","withdrawalId"),s=this.safeString2(e,"depositAddress","withdrawalAddress"),r=this.safeString2(e,"currencyId","currencyTypeId");let a;r in this.currencies_by_id&&(t=this.currencies_by_id[r]),void 0===a&&void 0!==t&&(a=t.code);const n="depositId"in e?"deposit":"withdrawal",o=this.safeNumber2(e,"actuallyAmount","amount"),h=this.parseTransactionStatus(this.safeString2(e,"verifyStatus","state")),c=this.safeInteger(e,"createTime"),d=this.safeString(e,"txId");let u;const l=this.safeNumber(e,"fees");return void 0!==l&&(u={cost:l,currency:a}),{info:e,id:i,txid:d,timestamp:c,datetime:this.iso8601(c),addressFrom:void 0,address:s,addressTo:void 0,tagFrom:void 0,tag:void 0,tagTo:void 0,type:n,amount:o,currency:a,status:h,updated:void 0,fee:u}}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchDeposits() requires a currency code argument");await this.loadMarkets();const r={currencyTypeName:this.currency(e).name};void 0!==i&&(r.pageSize=i);const a=await this.privatePostExchangeFundControllerWebsiteFundcontrollerGetPayinCoinRecord(this.extend(r,s)),n=this.safeValue(a,"datas",{}),o=this.safeValue(n,"list",[]);return this.parseTransactions(o,e,t,i)}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchWithdrawals() requires a currency code argument");await this.loadMarkets();const r={currencyId:this.currency(e).id};void 0!==i&&(r.pageSize=i);const a=await this.privateGetExchangeFundControllerWebsiteFundwebsitecontrollerGetpayoutcoinrecord(this.extend(r,s)),n=this.safeValue(a,"datas",{}),o=this.safeValue(n,"list",[]);return this.parseTransactions(o,e,t,i)}handleErrors(e,t,i,s,r,a,n,h,c){if(!n)return;const d=this.safeValue(n,"resMsg"),u=this.safeString(d,"code");if("1"!==u){const e=this.id+" "+this.json(n);throw this.throwExactlyMatchedException(this.exceptions.exact,u,e),new o(e)}}}},73803:(e,t,i)=>{"use strict";const s=i(48819),{TICK_SIZE:r}=i(62115),{AuthenticationError:a,ExchangeError:n,ArgumentsRequired:o,PermissionDenied:h,InvalidOrder:c,OrderNotFound:d,InsufficientFunds:u,BadRequest:l,RateLimitExceeded:f,InvalidNonce:p}=i(73449),m=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bybit",name:"Bybit",countries:["VG"],version:"v2",userAgent:void 0,rateLimit:100,hostname:"bybit.com",has:{margin:!1,swap:!0,future:!0,cancelAllOrders:!0,cancelOrder:!0,CORS:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchBorrowRate:!1,fetchBorrowRates:!1,fetchClosedOrders:!0,fetchDeposits:!0,fetchFundingRate:!0,fetchFundingRateHistory:!1,fetchIndexOHLCV:!0,fetchLedger:!0,fetchMarkets:!0,fetchMarkOHLCV:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchPositions:!0,fetchPremiumIndexOHLCV:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:void 0,fetchWithdrawals:!0,setLeverage:!0,setMarginMode:!0},timeframes:{"1m":"1","3m":"3","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","6h":"360","12h":"720","1d":"D","1w":"W","1M":"M","1y":"Y"},urls:{test:{spot:"https://api-testnet.{hostname}",futures:"https://api-testnet.{hostname}",v2:"https://api-testnet.{hostname}",public:"https://api-testnet.{hostname}",private:"https://api-testnet.{hostname}"},logo:"https://user-images.githubusercontent.com/51840849/76547799-daff5b80-649e-11ea-87fb-3be9bac08954.jpg",api:{spot:"https://api.{hostname}",futures:"https://api.{hostname}",v2:"https://api.{hostname}",public:"https://api.{hostname}",private:"https://api.{hostname}"},www:"https://www.bybit.com",doc:["https://bybit-exchange.github.io/docs/inverse/","https://bybit-exchange.github.io/docs/linear/","https://github.com/bybit-exchange"],fees:"https://help.bybit.com/hc/en-us/articles/360039261154",referral:"https://www.bybit.com/app/register?ref=X7Prm"},api:{spot:{public:{get:["symbols"]},quote:{get:["depth","depth/merged","trades","kline","ticker/24hr","ticker/price","ticker/book_ticker"]},private:{get:["order","open-orders","history-orders","myTrades","account","time"],post:["order"],delete:["order","order/fast"]},order:{delete:["batch-cancel","batch-fast-cancel","batch-cancel-by-ids"]}},futures:{private:{get:["order/list","order","stop-order/list","stop-order","position/list","execution/list","trade/closed-pnl/list"],post:["order/create","order/cancel","order/cancelAll","order/replace","stop-order/create","stop-order/cancel","stop-order/cancelAll","stop-order/replace","position/change-position-margin","position/trading-stop","position/leverage/save","position/switch-mode","position/switch-isolated","position/risk-limit"]}},v2:{public:{get:["orderBook/L2","kline/list","tickers","trading-records","symbols","liq-records","mark-price-kline","index-price-kline","premium-index-kline","open-interest","big-deal","account-ratio","time","announcement","funding/prev-funding-rate","risk-limit/list"]},private:{get:["order/list","order","stop-order/list","stop-order","position/list","execution/list","trade/closed-pnl/list","funding/prev-funding-rate","funding/prev-funding","funding/predicted-funding","account/api-key","account/lcp","wallet/balance","wallet/fund/records","wallet/withdraw/list","exchange-order/list"],post:["order/create","order/cancel","order/cancelAll","order/replace","stop-order/create","stop-order/cancel","stop-order/cancelAll","stop-order/replace","position/change-position-margin","position/trading-stop","position/leverage/save","position/switch-mode","position/switch-isolated","position/risk-limit"]}},public:{linear:{get:["kline","recent-trading-records","funding/prev-funding-rate","mark-price-kline","index-price-kline","premium-index-kline","risk-limit"]}},private:{linear:{get:["order/list","order/search","stop-order/list","stop-order/search","position/list","trade/execution/list","trade/closed-pnl/list","funding/predicted-funding","funding/prev-funding"],post:["order/create","order/cancel","order/cancel-all","order/replace","stop-order/create","stop-order/cancel","stop-order/cancel-all","stop-order/replace","position/set-auto-add-margin","position/switch-isolated","tpsl/switch-mode","position/add-margin","position/set-leverage","position/trading-stop","position/set-risk"]}}},httpExceptions:{403:f},exceptions:{exact:{"-2015":a,10001:l,10002:p,10003:a,10004:a,10005:h,10006:f,10007:a,10010:h,10017:l,10018:f,20001:d,20003:c,20004:c,20005:c,20006:c,20007:c,20008:c,20009:c,20010:c,20011:c,20012:c,20013:c,20014:c,20015:c,20016:c,20017:c,20018:c,20019:c,20020:c,20021:c,20022:l,20023:l,20031:l,20070:l,20071:l,20084:l,30001:l,30003:c,30004:c,30005:c,30007:c,30008:c,30009:n,30010:u,30011:h,30012:h,30013:h,30014:c,30015:c,30016:n,30017:c,30018:c,30019:c,30020:c,30021:c,30022:c,30023:c,30024:c,30025:c,30026:c,30027:c,30028:c,30029:c,30030:c,30031:u,30032:c,30033:f,30034:d,30035:f,30036:n,30037:c,30041:n,30042:u,30043:c,30044:c,30045:c,30049:u,30050:n,30051:n,30052:n,30054:n,30057:n,30063:n,30067:u,30068:n,30074:c,30075:c,33004:a,34026:n},broad:{"unknown orderInfo":d,"invalid api_key":a}},precisionMode:r,options:{marketTypes:{"BTC/USDT":"linear","ETH/USDT":"linear","BNB/USDT":"linear","ADA/USDT":"linear","DOGE/USDT":"linear","XRP/USDT":"linear","DOT/USDT":"linear","UNI/USDT":"linear","BCH/USDT":"linear","LTC/USDT":"linear","SOL/USDT":"linear","LINK/USDT":"linear","MATIC/USDT":"linear","ETC/USDT":"linear","FIL/USDT":"linear","EOS/USDT":"linear","AAVE/USDT":"linear","XTZ/USDT":"linear","SUSHI/USDT":"linear","XEM/USDT":"linear","BTC/USD":"inverse","ETH/USD":"inverse","EOS/USD":"inverse","XRP/USD":"inverse"},defaultType:"linear",code:"BTC",cancelAllOrders:{},recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1},fees:{trading:{tierBased:!1,percentage:!0,taker:75e-5,maker:-25e-5},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}}})}nonce(){return this.milliseconds()-this.options.timeDifference}async loadTimeDifference(e={}){const t=await this.fetchTime(e),i=this.milliseconds();return this.options.timeDifference=i-t,this.options.timeDifference}async fetchTime(e={}){const t=await this.v2PublicGetTime(e);return this.safeTimestamp(t,"time_now")}async fetchMarkets(e={}){this.options.adjustForTimeDifference&&await this.loadTimeDifference();const t=await this.v2PublicGetSymbols(e),i=this.safeValue(t,"result",[]),s=this.safeValue(this.options,"fetchMarkets",{}),r=this.safeValue(s,"linear",{USDT:!0}),a=[];for(let e=0;e<i.length;e++){const t=i[e],s=this.safeString2(t,"name","symbol"),n=this.safeString(t,"base_currency"),o=this.safeString(t,"quote_currency"),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=c in r,u=!d;let l=h+"/"+c,f="swap";h+c!==s&&(l=s,f="futures");const p=this.safeValue(t,"lot_size_filter",{}),m=this.safeValue(t,"price_filter",{}),g={amount:this.safeNumber(p,"qty_step"),price:this.safeNumber(m,"tick_size")},y=this.safeValue(t,"leverage_filter",{}),b=this.safeString(t,"status");let v;void 0!==b&&(v="Trading"===b);const w="spot"===f,k="swap"===f,_="futures"===f,S="option"===f;a.push({id:s,symbol:l,base:h,quote:c,active:v,precision:g,taker:this.safeNumber(t,"taker_fee"),maker:this.safeNumber(t,"maker_fee"),type:f,spot:w,swap:k,futures:_,option:S,linear:d,inverse:u,limits:{amount:{min:this.safeNumber(p,"min_trading_qty"),max:this.safeNumber(p,"max_trading_qty")},price:{min:this.safeNumber(m,"min_price"),max:this.safeNumber(m,"max_price")},cost:{min:void 0,max:void 0},leverage:{max:this.safeNumber(y,"max_leverage",1)}},info:t})}return a}parseTicker(e,t){const i=void 0,s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t),a=this.safeNumber(e,"last_price"),n=this.safeNumber(e,"prev_price_24h");let o,h,c=this.safeNumber(e,"price_24h_pcnt");void 0!==c&&(c*=100),void 0!==a&&void 0!==n&&(o=a-n,h=this.sum(n,a)/2);const d=this.safeNumber(e,"turnover_24h"),u=this.safeNumber(e,"volume_24h"),l=this.vwap(d,u);return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high_price_24h"),low:this.safeNumber(e,"low_price_24h"),bid:this.safeNumber(e,"bid_price"),bidVolume:void 0,ask:this.safeNumber(e,"ask_price"),askVolume:void 0,vwap:l,open:n,close:a,last:a,previousClose:void 0,change:o,percentage:c,average:h,baseVolume:d,quoteVolume:u,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.v2PublicGetTickers(this.extend(s,t)),a=this.safeValue(r,"result",[]),n=this.safeValue(a,0),o=this.safeTimestamp(r,"time_now"),h=this.parseTicker(n,i);return h.timestamp=o,h.datetime=this.iso8601(o),h}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.v2PublicGetTickers(t),s=this.safeValue(i,"result",[]),r={};for(let e=0;e<s.length;e++){const t=this.parseTicker(s[e]);r[t.symbol]=t}return this.filterByArray(r,"symbol",e)}parseOHLCV(e,t){return[this.safeTimestamp2(e,"open_time","start_at"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber2(e,"volume","turnover")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n=this.safeString(r,"price");r=this.omit(r,"price");const h={symbol:a.id,interval:this.timeframes[t]},c=this.parseTimeframe(t),d=this.seconds();if(void 0===i){if(void 0===s)throw new o(this.id+" fetchOHLCV() requires a since argument or a limit argument");h.from=d-s*c}else h.from=parseInt(i/1e3);void 0!==s&&(h.limit=s);let u="v2PublicGetKlineList";"mark"===n?u="v2PublicGetMarkPriceKline":"index"===n?u="v2PublicGetIndexPriceKline":"premiumIndex"===n?u="v2PublicGetPremiumIndexKline":a.linear&&(u="publicLinearGetKline");const l=await this[u](this.extend(h,r)),f=this.safeValue(l,"result",{});return this.parseOHLCVs(f,a,t,i,s)}async fetchFundingRate(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=i.linear?"publicLinearGetFundingPrevFundingRate":"v2PublicGetFundingPrevFundingRate",a=await this[r](this.extend(s,t)),n=this.safeValue(a,"result"),o=this.safeNumber(n,"funding_rate"),h=1e3*this.safeInteger(n,"funding_rate_timestamp"),c=h+288e5,d=this.milliseconds();return{info:n,symbol:e,markPrice:void 0,indexPrice:void 0,interestRate:void 0,estimatedSettlePrice:void 0,timestamp:d,datetime:this.iso8601(d),previousFundingRate:void 0,nextFundingRate:o,previousFundingTimestamp:h,nextFundingTimestamp:c,previousFundingDatetime:this.iso8601(h),nextFundingDatetime:this.iso8601(c)}}async fetchIndexOHLCV(e,t="1m",i,s,r={}){if(void 0===i&&void 0===s)throw new o(this.id+" fetchIndexOHLCV() requires a since argument or a limit argument");return await this.fetchOHLCV(e,t,i,s,this.extend({price:"index"},r))}async fetchMarkOHLCV(e,t="1m",i,s,r={}){if(void 0===i&&void 0===s)throw new o(this.id+" fetchMarkOHLCV() requires a since argument or a limit argument");return await this.fetchOHLCV(e,t,i,s,this.extend({price:"mark"},r))}async fetchPremiumIndexOHLCV(e,t="1m",i,s,r={}){if(void 0===i&&void 0===s)throw new o(this.id+" fetchPremiumIndexOHLCV() requires a since argument or a limit argument");return await this.fetchOHLCV(e,t,i,s,this.extend({price:"premiumIndex"},r))}parseTrade(e,t){const i=this.safeString2(e,"id","exec_id"),s=this.safeString(e,"symbol"),r=(t=this.safeMarket(s,t)).symbol,a=this.safeString2(e,"qty","exec_qty"),n=this.safeString2(e,"exec_price","price"),o=this.safeString(e,"exec_value");let h=this.parse8601(this.safeString(e,"time"));void 0===h&&(h=this.safeInteger(e,"trade_time_ms"));const c=this.safeStringLower(e,"side"),d="AddedLiquidity"===this.safeString(e,"last_liquidity_ind")?"maker":"taker",u=this.safeString(e,"exec_fee");let l;return void 0!==u&&(l={cost:u,currency:t.inverse?t.base:t.quote,rate:this.safeString(e,"fee_rate")}),this.safeTrade({id:i,info:e,timestamp:h,datetime:this.iso8601(h),symbol:r,order:this.safeString(e,"order_id"),type:this.safeStringLower(e,"order_type"),side:c,takerOrMaker:d,price:n,amount:a,cost:o,fee:l},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.count=i);const n=r.linear?"publicLinearGetRecentTradingRecords":"v2PublicGetTradingRecords",o=await this[n](this.extend(a,s)),h=this.safeValue(o,"result",{});return this.parseTrades(h,r,t,i)}parseOrderBook(e,t,i,s="Buy",r="Sell",a="price",o="size"){const h=[],c=[];for(let t=0;t<e.length;t++){const i=e[t],s=this.safeString(i,"side");if("Buy"===s)h.push(this.parseBidAsk(i,a,o));else{if("Sell"!==s)throw new n(this.id+" parseOrderBook encountered an unrecognized bidask format: "+this.json(i));c.push(this.parseBidAsk(i,a,o))}}return{symbol:t,bids:this.sortBy(h,0,!0),asks:this.sortBy(c,0),timestamp:i,datetime:this.iso8601(i),nonce:void 0}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id},r=await this.v2PublicGetOrderBookL2(this.extend(s,i)),a=this.safeValue(r,"result",[]),n=this.safeTimestamp(r,"time_now");return this.parseOrderBook(a,e,n,"Buy","Sell","price","size")}async fetchBalance(e={}){await this.loadMarkets();const t={},i=this.safeString(e,"coin"),s=this.safeString(e,"code");if(void 0!==i)t.coin=i;else if(void 0!==s){const e=this.currency(s);t.coin=e.id}const r=await this.v2PrivateGetWalletBalance(this.extend(t,e)),a={info:r},n=this.safeValue(r,"result",{}),o=Object.keys(n);for(let e=0;e<o.length;e++){const t=o[e],i=n[t],s=this.safeCurrencyCode(t),r=this.account();r.free=this.safeString(i,"available_balance"),r.used=this.safeString(i,"used_margin"),r.total=this.safeString(i,"equity"),a[s]=r}return this.parseBalance(a)}parseOrderStatus(e){return this.safeString({Created:"open",Rejected:"rejected",New:"open",PartiallyFilled:"open",Filled:"closed",Cancelled:"canceled",PendingCancel:"canceling",Active:"open",Untriggered:"open",Triggered:"closed",Deactivated:"canceled"},e,e)}parseTimeInForce(e){return this.safeString({GoodTillCancel:"GTC",ImmediateOrCancel:"IOC",FillOrKill:"FOK",PostOnly:"PO"},e,e)}parseOrder(e,t){const i=this.safeString(e,"symbol"),s=(t=this.safeMarket(i,t)).symbol;let r;const a=this.parse8601(this.safeString(e,"created_at")),n=this.safeString2(e,"order_id","stop_order_id"),o=this.safeStringLower(e,"order_type"),h=this.safeString(e,"price"),c=this.safeString(e,"average_price"),d=this.safeString(e,"qty"),u=this.safeString(e,"cum_exec_value"),l=this.safeString(e,"cum_exec_qty"),f=this.safeString(e,"leaves_qty"),p=this.safeValue(this.options,"marketTypes",{}),g=this.safeString(p,s);void 0!==t&&(r="linear"===g?t.quote:t.base);let y=this.safeTimestamp(e,"last_exec_time");0===y&&(y=void 0);const b=this.parseOrderStatus(this.safeString2(e,"order_status","stop_order_status")),v=this.safeStringLower(e,"side"),w=m.stringAbs(this.safeString(e,"cum_exec_fee"));let k;void 0!==w&&(k={cost:w,currency:r});let _=this.safeString(e,"order_link_id");void 0!==_&&_.length<1&&(_=void 0);const S=this.parseTimeInForce(this.safeString(e,"time_in_force")),O=this.safeNumber2(e,"trigger_price","stop_px"),M="PO"===S;return this.safeOrder2({info:e,id:n,clientOrderId:_,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:y,symbol:s,type:o,timeInForce:S,postOnly:M,side:v,price:h,stopPrice:O,amount:d,cost:u,average:c,filled:l,remaining:f,status:b,fee:k,trades:void 0},t)}async fetchOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={symbol:s.id};let a;s.swap?s.linear?a="privateLinearGetOrderSearch":s.inverse&&(a="v2PrivateGetOrder"):s.futures&&(a="futuresPrivateGetOrder"),void 0===this.safeString(i,"stop_order_id")?void 0===this.safeString(i,"order_link_id")&&(r.order_id=e):s.swap?s.linear?a="privateLinearGetStopOrderSearch":s.inverse&&(a="v2PrivateGetStopOrder"):s.futures&&(a="futuresPrivateGetStopOrder");const n=await this[a](this.extend(r,i)),h=this.safeValue(n,"result");return this.parseOrder(h,s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e);let h=this.amountToPrecision(e,s);h=n.inverse?parseInt(h):parseFloat(h);const c={side:this.capitalize(i),symbol:n.id,order_type:this.capitalize(t),qty:h,time_in_force:"GoodTillCancel"};let d=!1;if("limit"===t&&(d=!0),d){if(void 0===r)throw new o(this.id+" createOrder() requires a price argument for a "+t+" order");c.price=parseFloat(this.priceToPrecision(e,r))}const u=this.safeString2(a,"order_link_id","clientOrderId");void 0!==u&&(c.order_link_id=u,a=this.omit(a,["order_link_id","clientOrderId"]));const l=this.safeValue2(a,"stop_px","stopPrice"),f=this.safeValue(a,"base_price");let p;if(n.swap?n.linear?(p="privateLinearPostOrderCreate",c.reduce_only=!1,c.close_on_trigger=!1):n.inverse&&(p="v2PrivatePostOrderCreate"):n.futures&&(p="futuresPrivatePostOrderCreate"),void 0!==l){if(void 0===f)throw new o(this.id+" createOrder() requires both the stop_px and base_price params for a conditional "+t+" order");n.swap?n.linear?p="privateLinearPostStopOrderCreate":n.inverse&&(p="v2PrivatePostStopOrderCreate"):n.futures&&(p="futuresPrivatePostStopOrderCreate"),c.stop_px=parseFloat(this.priceToPrecision(e,l)),c.base_price=parseFloat(this.priceToPrecision(e,f)),a=this.omit(a,["stop_px","stopPrice","base_price"])}else if(void 0!==f)throw new o(this.id+" createOrder() requires both the stop_px and base_price params for a conditional "+t+" order");const m=await this[p](this.extend(c,a)),g=this.safeValue(m,"result");return this.parseOrder(g,n)}async editOrder(e,t,i,s,r,a,n={}){if(void 0===t)throw new o(this.id+" editOrder() requires an symbol argument");await this.loadMarkets();const h=this.market(t),c={symbol:h.id};let d;h.swap?h.linear?d="privateLinearPostOrderReplace":h.inverse&&(d="v2PrivatePostOrderReplace"):h.futures&&(d="futuresPrivatePostOrderReplace");const u=this.safeString(n,"stop_order_id");if(void 0!==u?(h.swap?h.linear?d="privateLinearPostStopOrderReplace":h.inverse&&(d="v2PrivatePostStopOrderReplace"):h.futures&&(d="futuresPrivatePostStopOrderReplace"),c.stop_order_id=u,n=this.omit(n,["stop_order_id"])):c.order_id=e,void 0!==r){let e=this.amountToPrecision(t,r);e=h.inverse?parseInt(e):parseFloat(e),c.p_r_qty=e}void 0!==a&&(c.p_r_price=parseFloat(this.priceToPrecision(t,a)));const l=await this[d](this.extend(c,n)),f=this.safeValue(l,"result",{});return{info:l,id:this.safeString2(f,"order_id","stop_order_id"),order_id:this.safeString(f,"order_id"),stop_order_id:this.safeString(f,"stop_order_id")}}async cancelOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={symbol:s.id};let a;s.swap?s.linear?a="privateLinearPostOrderCancel":s.inverse&&(a="v2PrivatePostOrderCancel"):s.futures&&(a="futuresPrivatePostOrderCancel"),void 0===this.safeString(i,"stop_order_id")?void 0===this.safeString(i,"order_link_id")&&(r.order_id=e):s.swap?s.linear?a="privateLinearPostStopOrderCancel":s.inverse&&(a="v2PrivatePostStopOrderCancel"):s.futures&&(a="futuresPrivatePostStopOrderCancel");const n=await this[a](this.extend(r,i)),h=this.safeValue(n,"result",{});return this.parseOrder(h,s)}async cancelAllOrders(e,t={}){if(void 0===e)throw new o(this.id+" cancelAllOrders() requires a symbol argument");await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=this.safeValue(this.options,"cancelAllOrders",{});let a;i.swap?i.linear?a="privateLinearPostOrderCancelAll":i.inverse&&(a="v2PrivatePostOrderCancelAll"):i.futures&&(a="futuresPrivatePostOrderCancelAll");const n=this.safeString(r,"method",a),h=await this[n](this.extend(s,t)),c=this.safeValue(h,"result",[]);return this.parseOrders(c,i)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==i&&(r.limit=i);const n=this.safeValue(this.options,"fetchOrders",{}),o=this.safeString(this.options,"defaultType","linear"),h=this.safeValue(this.options,"marketTypes",{}),c=this.safeString(h,e,o);let d;const u=void 0!==a,l=u&&a.linear||"linear"===c,f=u&&a.swap&&a.inverse||"inverse"===c,p=u&&a.futures||"futures"===c;l?d="privateLinearGetOrderList":f?d="v2PrivateGetOrderList":p&&(d="futuresPrivateGetOrderList");let m=s;if("stop_order_id"in s||"stop_order_status"in s){let e=this.safeValue(s,"stop_order_status");void 0!==e&&(Array.isArray(e)&&(e=e.join(",")),r.stop_order_status=e,m=this.omit(s,"stop_order_status")),l?d="privateLinearGetStopOrderList":f?d="v2PrivateGetStopOrderList":p&&(d="futuresPrivateGetStopOrderList")}const g=this.safeString(n,"method",d),y=await this[g](this.extend(r,m)),b=this.safeValue(y,"result",{}),v=this.safeValue(b,"data",[]);return this.parseOrders(v,a,t,i)}async fetchClosedOrders(e,t,i,s={}){const r=this.safeValue(this.options,"fetchClosedOrders",{});let a=this.safeValue(r,"order_status",["Rejected","Filled","Cancelled"]);Array.isArray(a)&&(a=a.join(","));const n={},o=this.safeValue(s,"stop_order_status");return void 0===o?n.order_status=a:n.stop_order_status=o,await this.fetchOrders(e,t,i,this.extend(n,s))}async fetchOpenOrders(e,t,i,s={}){const r=this.safeValue(this.options,"fetchOpenOrders",{});let a=this.safeValue(r,"order_status",["Created","New","PartiallyFilled","PendingCancel"]);Array.isArray(a)&&(a=a.join(","));const n={},o=this.safeValue(s,"stop_order_status");return void 0===o?n.order_status=a:n.stop_order_status=o,await this.fetchOrders(e,t,i,this.extend(n,s))}async fetchOrderTrades(e,t,i,s,r={}){const a={order_id:e};return await this.fetchMyTrades(t,i,s,this.extend(a,r))}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const r={};let a;const n=this.safeString(s,"order_id");void 0!==n&&(r.order_id=n,s=this.omit(s,"order_id")),a=this.market(e),r.symbol=a.id,void 0!==t&&(r.start_time=t),void 0!==i&&(r.limit=i);const h=this.safeString(this.options,"defaultType","linear"),c=this.safeValue(this.options,"marketTypes",{}),d=this.safeString(c,e,h),u=void 0!==a,l=u&&a.linear||"linear"===d,f=u&&a.swap&&a.inverse||"inverse"===d,p=u&&a.futures||"futures"===d;let m;l?m="privateLinearGetTradeExecutionList":f?m="v2PrivateGetExecutionList":p&&(m="futuresPrivateGetExecutionList");const g=await this[m](this.extend(r,s)),y=this.safeValue(g,"result",{}),b=this.safeValue2(y,"trade_list","data",[]);return this.parseTrades(b,a,t,i)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={wallet_fund_type:"Deposit"};let a;void 0!==e&&(a=this.currency(e),r.coin=a.id),void 0!==t&&(r.start_date=this.yyyymmdd(t)),void 0!==i&&(r.limit=i);const n=await this.v2PrivateGetWalletFundRecords(this.extend(r,s)),o=this.safeValue(n,"result",{}),h=this.safeValue(o,"data",[]);return this.parseTransactions(h,a,t,i,{type:"deposit"})}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.coin=a.id),void 0!==t&&(r.start_date=this.yyyymmdd(t)),void 0!==i&&(r.limit=i);const n=await this.v2PrivateGetWalletWithdrawList(this.extend(r,s)),o=this.safeValue(n,"result",{}),h=this.safeValue(o,"data",[]);return this.parseTransactions(h,a,t,i,{type:"withdrawal"})}parseTransactionStatus(e){return this.safeString({ToBeConfirmed:"pending",UnderReview:"pending",Pending:"pending",Success:"ok",CancelByUser:"canceled",Reject:"rejected",Expire:"expired"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"coin"),s=this.safeCurrencyCode(i,t),r=this.parse8601(this.safeString2(e,"submited_at","exec_time")),a=this.parse8601(this.safeString(e,"updated_at")),n=this.parseTransactionStatus(this.safeString(e,"status")),o=this.safeString(e,"address"),h=this.safeNumber(e,"fee"),c=this.safeStringLower(e,"type");let d;return void 0!==h&&(d={cost:h,currency:s}),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"tx_id"),timestamp:r,datetime:this.iso8601(r),address:o,addressTo:void 0,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:c,amount:this.safeNumber(e,"amount"),currency:s,status:n,updated:a,fee:d}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.coin=a.id),void 0!==t&&(r.start_date=this.yyyymmdd(t)),void 0!==i&&(r.limit=i);const n=await this.v2PrivateGetWalletFundRecords(this.extend(r,s)),o=this.safeValue(n,"result",{}),h=this.safeValue(o,"data",[]);return this.parseLedger(h,a,t,i)}parseLedgerEntry(e,t){const i=this.safeString(e,"coin"),s=this.safeCurrencyCode(i,t),r=this.safeNumber(e,"amount"),a=this.safeNumber(e,"wallet_balance"),n=r<0?"out":"in";let o;if(void 0!==a&&void 0!==r){const e="out"===n?r:-r;o=this.sum(a,e)}const h=this.parse8601(this.safeString(e,"exec_time")),c=this.parseLedgerEntryType(this.safeString(e,"type")),d=this.safeString(e,"id"),u=this.safeString(e,"tx_id");return{id:d,currency:s,account:this.safeString(e,"wallet_id"),referenceAccount:void 0,referenceId:u,status:void 0,amount:r,before:o,after:a,fee:void 0,direction:n,timestamp:h,datetime:this.iso8601(h),type:c,info:e}}parseLedgerEntryType(e){return this.safeString({Deposit:"transaction",Withdraw:"transaction",RealisedPNL:"trade",Commission:"fee",Refund:"cashback",Prize:"prize",ExchangeOrderWithdraw:"transaction",ExchangeOrderDeposit:"transaction"},e,e)}async fetchPositions(e,t={}){await this.loadMarkets();const i={};if(Array.isArray(e)){if(1!==e.length)throw new o(this.id+" fetchPositions takes an array with exactly one symbol");i.symbol=this.marketId(e[0])}const s=this.safeString(this.options,"defaultType","linear"),r=this.safeString(t,"type",s);let a;return t=this.omit(t,"type"),"linear"===r?a=await this.privateLinearGetPositionList(this.extend(i,t)):"inverse"===r?a=await this.v2PrivateGetPositionList(this.extend(i,t)):"inverseFuture"===r&&(a=await this.futuresPrivateGetPositionList(this.extend(i,t))),"string"==typeof a&&this.isJsonEncodedObject(a)&&(a=JSON.parse(a)),this.safeValue(a,"result")}sign(e,t="public",i="GET",s={},r,a){const n=this.safeString(t,0);let o=this.safeString(t,1);"spot"===n&&("public"===o?o="v1":o+="/v1");let h=this.implodeHostname(this.urls.api[n]),c="/"+n+"/"+o+"/"+e;if("spot"===n||"quote"===n)Object.keys(s).length&&(c+="?"+this.rawencode(s));else if("public"===o)Object.keys(s).length&&(c+="?"+this.rawencode(s));else if("public"===n)Object.keys(s).length&&(c+="?"+this.rawencode(s));else{this.checkRequiredCredentials();const e=this.nonce(),t=this.extend(s,{api_key:this.apiKey,recv_window:this.options.recvWindow,timestamp:e}),n=this.keysort(t),o=this.rawencode(n),h=this.hmac(this.encode(o),this.encode(this.secret));"POST"===i?(a=this.json(this.extend(t,{sign:h})),r={"Content-Type":"application/json"}):c+="?"+this.urlencode(n)+"&sign="+h}return h+=c,{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o,h,c){if(!o)return;const d=this.safeString(o,"ret_code");if("0"!==d){const e=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,e),this.throwBroadlyMatchedException(this.exceptions.broad,a,e),new n(e)}}async setMarginMode(e,t,i={}){const s=this.safeValue(i,"leverage");if(void 0===s)throw new o(this.id+".setMarginMode requires a leverage parameter");if("ISOLATED"!==(e=e.toUpperCase())&&"CROSSED"!==e)throw new l(this.id+" marginType must be either isolated or crossed");await this.loadMarkets();const r=this.market(t);let a;const n=this.safeString(this.options,"defaultType","linear"),h=this.safeValue(this.options,"marketTypes",{}),c=this.safeString(h,t,n),d=r.linear||"linear"===c,u=r.swap&&r.inverse||"inverse"===c,f=r.futures||"futures"===c;d?a="privateLinearPostPositionSwitchIsolated":u?a="v2PrivatePostPositionSwitchIsolated":f&&(a="privateFuturesPostPositionSwitchIsolated");const p="ISOLATED"===e,m={symbol:r.id,is_isolated:p,buy_leverage:s,sell_leverage:s};return await this[a](this.extend(m,i))}async setLeverage(e,t,i={}){if(void 0===t)throw new o(this.id+" setLeverage() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r=this.safeString(this.options,"defaultType","linear"),a=this.safeValue(this.options,"marketTypes",{}),n=this.safeString(a,t,r),h=s.linear||"linear"===n,c=s.swap&&s.inverse||"inverse"===n,d=s.futures||"futures"===n;let u;h?u="privateLinearPostPositionSetLeverage":c?u="v2PrivatePostPositionLeverageSave":d&&(u="privateFuturesPostPositionLeverageSave");let f=e,p=e;if(i.buy_leverage&&i.sell_leverage&&h)f=i.buy_leverage,p=i.sell_leverage;else if(!e)throw new o(h?this.id+' setLeverage() requires either the parameter leverage or params["buy_leverage"] and params["sell_leverage"] for linear contracts':this.id+" setLeverage() requires parameter leverage for inverse and futures contracts");if(f<1||f>100||p<1||p>100)throw new l(this.id+" leverage should be between 1 and 100");const m={symbol:s.id,leverage_only:!0};return h?(m.buy_leverage=f,m.sell_leverage=p):m.leverage=f,await this[u](this.extend(m,i))}}},2291:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,BadRequest:n,AuthenticationError:o,DDoSProtection:h,BadResponse:c}=i(73449),d=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bytetrade",name:"ByteTrade",countries:["HK"],rateLimit:500,requiresWeb3:!0,certified:!1,has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchBidsAsks:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:void 0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","5d":"5d","1w":"1w","1M":"1M"},urls:{test:{market:"https://api-v2-test.byte-trade.com",public:"https://api-v2-test.byte-trade.com"},logo:"https://user-images.githubusercontent.com/1294454/67288762-2f04a600-f4e6-11e9-9fd6-c60641919491.jpg",api:{market:"https://api-v2.bttcdn.com",public:"https://api-v2.bttcdn.com"},www:"https://www.byte-trade.com",doc:"https://docs.byte-trade.com/#description"},api:{market:{get:["klines","depth","trades","tickers"]},public:{get:["symbols","currencies","balance","orders/open","orders/closed","orders/all","orders","orders/trades","depositaddress","withdrawals","deposits","transfers"],post:["transaction/createorder","transaction/cancelorder","transaction/withdraw","transaction/transfer"]}},fees:{trading:{taker:8e-4,maker:8e-4}},commonCurrencies:{1:"ByteTrade",44:"ByteHub",48:"Blocktonic",133:"TerraCredit"},exceptions:{"vertify error":o,"verify error":o,"transaction already in network":n,"invalid argument":n},options:{orderExpiration:31536e6}})}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"code");let a;a=r in this.commonCurrencies?this.commonCurrencies[r]:this.safeString(s,"name");const n=this.safeString(s,"fullname"),o=this.safeValue(s,"active"),h=this.safeValue(s,"limits"),c=this.safeValue(h,"deposit"),d=this.safeInteger(s,"basePrecision");let u=this.safeNumber(c,"max");-1===u&&(u=void 0);const l=this.safeValue(h,"withdraw");let f=this.safeNumber(l,"max");-1===f&&(f=void 0),i[a]={id:r,code:a,name:n,active:o,precision:d,fee:void 0,limits:{amount:{min:void 0,max:void 0},deposit:{min:this.safeNumber(c,"min"),max:u},withdraw:{min:this.safeNumber(l,"min"),max:f}},info:s}}return i}async fetchMarkets(e={}){const t=await this.publicGetSymbols(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"symbol");let a=this.safeString(s,"baseName"),n=this.safeString(s,"quoteName");const o=this.safeString(s,"base"),h=this.safeString(s,"quote"),c=a.split("@"+o)[0];let d=n.split("@"+h)[0];"126"===h&&(d="ZAR");const u=c+"/"+d;o in this.commonCurrencies&&(a=this.commonCurrencies[o]),h in this.commonCurrencies&&(n=this.commonCurrencies[h]);const l=a+"/"+n,f=this.safeValue(s,"limits",{}),p=this.safeValue(f,"amount",{}),m=this.safeValue(f,"price",{}),g=this.safeValue(s,"precision",{}),y={id:r,symbol:l,base:a,quote:n,baseId:o,quoteId:h,info:s,type:"spot",spot:!0,active:this.safeString(s,"active"),precision:{amount:this.safeInteger(g,"amount"),price:this.safeInteger(g,"price")},normalSymbol:u,limits:{amount:{min:this.safeNumber(p,"min"),max:this.safeNumber(p,"max")},price:{min:this.safeNumber(m,"min"),max:this.safeNumber(m,"max")},cost:{min:void 0,max:void 0}}};i.push(y)}return i}async fetchBalance(e={}){if(!("userid"in e)&&void 0===this.apiKey)throw new a(this.id+" fetchDeposits() requires this.apiKey or userid argument");await this.loadMarkets();const t={userid:this.apiKey},i=await this.publicGetBalance(this.extend(t,e)),s={info:i};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"code"),a=this.safeCurrencyCode(r,void 0),n=this.account();n.free=this.safeString(t,"free"),n.used=this.safeString(t,"used"),s[a]=n}return this.parseBalance(s,!1)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.marketGetDepth(this.extend(s,i)),a=this.safeValue(r,"timestamp");return this.parseOrderBook(r,e,a)}parseTicker(e,t){const i=this.safeInteger(e,"timestamp");let s;const r=this.safeString(e,"symbol");if(r in this.markets_by_id)t=this.markets_by_id[r];else{const t=this.safeString(e,"base"),i=this.safeString(e,"quote");void 0!==t&&void 0!==i&&(s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i))}return void 0===s&&void 0!==t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:this.safeNumber(e,"weightedAvgPrice"),open:this.safeNumber(e,"open"),close:this.safeNumber(e,"close"),last:this.safeNumber(e,"last"),previousClose:void 0,change:this.safeNumber(e,"change"),percentage:this.safeNumber(e,"percentage"),average:void 0,baseVolume:this.safeNumber(e,"baseVolume"),quoteVolume:this.safeNumber(e,"quoteVolume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.marketGetTickers(this.extend(s,t));if(Array.isArray(r)){const e=this.safeValue(r,0);if(void 0===e)throw new c(this.id+" fetchTicker() returned an empty response");return this.parseTicker(e,i)}return this.parseTicker(r,i)}async fetchBidsAsks(e,t={}){await this.loadMarkets();const i=await this.marketGetDepth(t);return this.parseTickers(i,e)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.marketGetTickers(t);return this.parseTickers(i,e)}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id,timeframe:this.timeframes[t]};void 0!==i&&(n.since=i),void 0!==s&&(n.limit=s);const o=await this.marketGetKlines(this.extend(n,r));return this.parseOHLCVs(o,a,t,i,s)}parseTrade(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeNumber(e,"price"),r=this.safeNumber(e,"amount"),a=this.safeNumber(e,"cost"),n=this.safeString(e,"id"),o=this.safeString(e,"type"),h=this.safeString(e,"takerOrMaker"),c=this.safeString(e,"side"),d=this.iso8601(i),u=this.safeString(e,"order");let l;if(void 0===t){const i=this.safeString(e,"symbol");t=this.safeValue(this.markets_by_id,i)}void 0!==t&&(l=t.symbol);const f=this.safeValue(e,"fee"),p=this.safeNumber(f,"cost"),m=this.safeNumber(f,"rate"),g=this.safeString(f,"code");return{info:e,timestamp:i,datetime:d,symbol:l,id:n,order:u,type:o,takerOrMaker:h,side:c,price:s,amount:r,cost:a,fee:{currency:this.safeCurrencyCode(g),cost:p,rate:m}}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==t&&(a.since=t),void 0!==i&&(a.limit=i);const n=await this.marketGetTrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseOrder(e,t){const i=this.safeString(e,"status");let s;const r=this.safeString(e,"symbol");if(r in this.markets_by_id)t=this.markets_by_id[r];else{const t=this.safeString(e,"base"),i=this.safeString(e,"quote");void 0!==t&&void 0!==i&&(s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i))}void 0===s&&void 0!==t&&(s=t.symbol);const a=this.safeInteger(e,"timestamp"),n=this.safeString(e,"datetime"),o=this.safeInteger(e,"lastTradeTimestamp"),h=this.safeString(e,"price"),c=this.safeString(e,"amount"),d=this.safeString(e,"filled"),u=this.safeString(e,"remaining"),l=this.safeString(e,"cost"),f=this.safeString(e,"average"),p=this.safeString(e,"id"),m=this.safeString(e,"type"),g=this.safeString(e,"side"),y=this.safeValue(e,"fee"),b=this.safeNumber(y,"cost"),v=this.safeNumber(y,"rate"),w=this.safeString(y,"code"),k={currency:this.safeCurrencyCode(w),cost:b,rate:v};return this.safeOrder2({info:e,id:p,clientOrderId:void 0,timestamp:a,datetime:n,lastTradeTimestamp:o,symbol:s,type:m,timeInForce:void 0,postOnly:void 0,side:g,price:h,stopPrice:void 0,amount:c,cost:l,average:f,filled:d,remaining:u,status:i,fee:k,trades:void 0},t)}async createOrder(e,t,i,s,r,n={}){if(this.checkRequiredDependencies(),void 0===this.apiKey)throw new a("createOrder() requires this.apiKey or userid in params");await this.loadMarkets();const o=this.market(e);let h,c;h="sell"===i?1:2,"limit"===t?c=1:(c=2,r=0);const u=o.normalSymbol,l=o.baseId,f=this.currency(o.base),p=this.amountToPrecision(e,s),m=this.toWei(p,f.precision),g=this.numberToString(m),y=o.quoteId,b=this.currency(o.quote),v=this.priceToPrecision(e,r),w=this.toWei(v,b.precision),k=this.numberToString(w),_=this.milliseconds(),S=this.safeInteger(this.options,"orderExpiration",31536e6),O=this.milliseconds()+S;let M=this.iso8601(_);M=M.split(".")[0];let T=this.iso8601(O);T=T.split(".")[0];const x=this.safeString(n,"dappId","Sagittarius"),I=this.safeString(this.options,"fee","300000000000000"),A=this.safeString(n,"totalFeeRate",8),C=this.safeString(n,"chainFeeRate",1),N=this.safeString(n,"fee",I),E=d.stringPow("2","64"),P=[this.numberToBE(1,32),this.numberToLE(Math.floor(_/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(O/1e3),4),this.numberToLE(1,1),this.numberToLE(32,1),this.numberToLE(0,8),this.numberToLE(N,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(h,1),this.numberToLE(c,1),this.numberToLE(u.length,1),this.stringToBinary(this.encode(u)),this.numberToLE(d.stringDiv(g,E,0),8),this.numberToLE(d.stringMod(g,E),8),this.numberToLE(d.stringDiv(k,E,0),8),this.numberToLE(d.stringMod(k,E),8),this.numberToLE(0,2),this.numberToLE(Math.floor(_/1e3),4),this.numberToLE(Math.floor(O/1e3),4),this.numberToLE(1,1),this.numberToLE(parseInt(C),2),this.numberToLE(1,1),this.numberToLE(parseInt(A),2),this.numberToLE(parseInt(y),4),this.numberToLE(parseInt(l),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(x.length,1),this.stringToBinary(this.encode(x)),this.numberToLE(0,1)],B=[this.numberToLE(Math.floor(_/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(O/1e3),4),this.numberToLE(1,1),this.numberToLE(32,1),this.numberToLE(0,8),this.numberToLE(N,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(h,1),this.numberToLE(c,1),this.numberToLE(u.length,1),this.stringToBinary(this.encode(u)),this.numberToLE(d.stringDiv(g,E,0),8),this.numberToLE(d.stringMod(g,E),8),this.numberToLE(d.stringDiv(k,E,0),8),this.numberToLE(d.stringMod(k,E),8),this.numberToLE(0,2),this.numberToLE(Math.floor(_/1e3),4),this.numberToLE(Math.floor(O/1e3),4),this.numberToLE(1,1),this.numberToLE(parseInt(C),2),this.numberToLE(1,1),this.numberToLE(parseInt(A),2),this.numberToLE(parseInt(y),4),this.numberToLE(parseInt(l),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(x.length,1),this.stringToBinary(this.encode(x)),this.numberToLE(0,1)],R=this.binaryConcatArray(B),V=this.hash(R,"sha256","hex").slice(0,40),L=[this.numberToLE(V.length,1),this.stringToBinary(this.encode(V)),this.numberToBE(0,4)],D=this.binaryConcatArray(L),q=this.hash(D,"sha256","hex").slice(0,40),G=this.binaryConcatArray(P),F=this.hash(G,"sha256","hex"),j=this.ecdsa(F,this.secret,"secp256k1",void 0,!0),U=this.binaryToBase16(this.numberToLE(this.sum(j.v,31),1))+j.r+j.s,H={timestamp:M,expiration:T,operations:[[32,{now:M,expiration:T,fee:N,creator:this.apiKey,side:h,order_type:c,market_name:u,amount:m,price:w,use_btt_as_fee:!1,money_id:parseInt(y),stock_id:parseInt(l),custom_no_btt_fee_rate:parseInt(A),custom_btt_fee_rate:parseInt(C)}]],validate_type:0,dapp:x,signatures:[U]},z={trObj:this.json(H)},K=await this.publicPostTransactionCreateorder(z),W=this.milliseconds(),X="0"===this.safeString(K,"code")?"open":"failed";return{info:K,id:q,timestamp:W,datetime:this.iso8601(W),lastTradeTimestamp:void 0,status:X,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0}}async fetchOrder(e,t,i={}){if(!("userid"in i)&&void 0===this.apiKey)throw new a("fetchOrder() requires this.apiKey or userid argument");await this.loadMarkets();const s={userid:this.apiKey};let r;void 0!==t&&(r=this.markets[t],s.symbol=r.id),s.id=e;const n=await this.publicGetOrders(this.extend(s,i));return this.parseOrder(n,r)}async fetchOpenOrders(e,t,i,s={}){if(!("userid"in s)&&void 0===this.apiKey)throw new a("fetchOpenOrders() requires this.apiKey or userid argument");await this.loadMarkets();const r={userid:this.apiKey};let n;void 0!==e&&(n=this.market(e),r.symbol=n.id),void 0!==i&&(r.limit=i),void 0!==t&&(r.since=t);const o=await this.publicGetOrdersOpen(this.extend(r,s));return this.parseOrders(o,n,t,i)}async fetchClosedOrders(e,t,i,s={}){if(!("userid"in s)&&void 0===this.apiKey)throw new a("fetchClosedOrders() requires this.apiKey or userid argument");let r;await this.loadMarkets();const n={userid:this.apiKey};void 0!==e&&(r=this.market(e),n.symbol=r.id),void 0!==i&&(n.limit=i),void 0!==t&&(n.since=t);const o=await this.publicGetOrdersClosed(this.extend(n,s));return this.parseOrders(o,r,t,i)}async fetchOrders(e,t,i,s={}){if(!("userid"in s)&&void 0===this.apiKey)throw new a("fetchOrders() requires this.apiKey or userid argument");let r;await this.loadMarkets();const n={userid:this.apiKey};void 0!==e&&(r=this.market(e),n.symbol=r.id),void 0!==i&&(n.limit=i),void 0!==t&&(n.since=t);const o=await this.publicGetOrdersAll(this.extend(n,s));return this.parseOrders(o,r,t,i)}async cancelOrder(e,t,i={}){if(void 0===this.apiKey)throw new a("cancelOrder() requires hasAlreadyAuthenticatedSuccessfully");if(void 0===t)throw new a(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r=s.baseId,n=s.quoteId,o=s.normalSymbol,h="300000000000000",c=this.milliseconds();let d=this.iso8601(c);d=d.split(".")[0];let u=this.iso8601(0);u=u.split(".")[0];const l=this.safeString(i,"dappId","Sagittarius"),f=[this.numberToBE(1,32),this.numberToLE(Math.floor(c/1e3),4),this.numberToLE(1,1),this.numberToLE(0,4),this.numberToLE(1,1),this.numberToLE(33,1),this.numberToLE(0,8),this.numberToLE(h,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(o.length,1),this.stringToBinary(this.encode(o)),this.base16ToBinary(e),this.numberToLE(parseInt(n),4),this.numberToLE(parseInt(r),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(l.length,1),this.stringToBinary(this.encode(l)),this.numberToLE(0,1)],p=this.binaryConcatArray(f),m=this.hash(p,"sha256","hex"),g=this.ecdsa(m,this.secret,"secp256k1",void 0,!0),y=this.binaryToBase16(this.numberToLE(this.sum(g.v,31),1))+g.r+g.s,b={timestamp:d,expiration:u,operations:[[33,{fee:h,creator:this.apiKey,order_id:e,market_name:o,money_id:parseInt(n),stock_id:parseInt(r)}]],validate_type:0,dapp:l,signatures:[y]},v={trObj:this.json(b)},w=await this.publicPostTransactionCancelorder(v),k=this.milliseconds(),_="0"===this.safeString(w,"code")?"canceled":"failed";return{info:w,id:void 0,timestamp:k,datetime:this.iso8601(k),lastTradeTimestamp:void 0,status:_,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0}}async fetchMyTrades(e,t,i,s={}){if(!("userid"in s)&&void 0===this.apiKey)throw new a("fetchMyTrades() requires this.apiKey or userid argument");await this.loadMarkets();const r=this.market(e),n={userid:this.apiKey};void 0!==e&&(n.symbol=r.id),void 0!==i&&(n.limit=i),void 0!==t&&(n.since=t);const o=await this.publicGetOrdersTrades(this.extend(n,s));return this.parseTrades(o,r,t,i)}async fetchDeposits(e,t,i,s={}){if(await this.loadMarkets(),!("userid"in s)&&void 0===this.apiKey)throw new a("fetchDeposits() requires this.apiKey or userid argument");let r;const n={userid:this.apiKey};void 0!==e&&(r=this.currency(e),n.currency=r.id),void 0!==t&&(n.since=t),void 0!==i&&(n.limit=i);const o=await this.publicGetDeposits(this.extend(n,s));return this.parseTransactions(o,r,t,i)}async fetchWithdrawals(e,t,i,s={}){if(await this.loadMarkets(),!("userid"in s)&&void 0===this.apiKey)throw new a("fetchWithdrawals() requires this.apiKey or userid argument");let r;const n={userid:this.apiKey};void 0!==e&&(r=this.currency(e),n.currency=r.id),void 0!==t&&(n.since=t),void 0!==i&&(n.limit=i);const o=await this.publicGetWithdrawals(this.extend(n,s));return this.parseTransactions(o,r,t,i)}parseTransactionStatus(e){return this.safeString({DEPOSIT_FAILED:"failed",FEE_SEND_FAILED:"failed",FEE_FAILED:"failed",PAY_SEND_FAILED:"failed",PAY_FAILED:"failed",BTT_FAILED:"failed",WITHDDRAW_FAILED:"failed",USER_FAILED:"failed",FEE_EXECUED:"pending",PAY_EXECUED:"pending",WITHDDRAW_EXECUTED:"pending",USER_EXECUED:"pending",BTT_SUCCED:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address");let r=this.safeString(e,"tag");void 0!==r&&r.length<1&&(r=void 0);const a=this.safeValue(e,"txid"),n=this.safeString(e,"code"),o=this.safeCurrencyCode(n,t),h=this.safeInteger(e,"timestamp"),c=this.safeString(e,"datetime"),d=this.safeString(e,"type"),u=this.parseTransactionStatus(this.safeString(e,"status")),l=this.safeNumber(e,"amount"),f=this.safeValue(e,"fee"),p=this.safeNumber(f,"cost"),m=this.safeString(f,"code");return{info:e,id:i,txid:a,timestamp:h,datetime:c,address:s,tag:r,type:d,amount:l,currency:o,status:u,updated:void 0,fee:{cost:p,currency:this.safeCurrencyCode(m,t)}}}async fetchDepositAddress(e,t={}){if(await this.loadMarkets(),!("userid"in t)&&void 0===this.apiKey)throw new a("fetchDepositAddress() requires this.apiKey or userid argument");const i=this.currency(e),s={userid:this.apiKey,code:i.id},r=await this.publicGetDepositaddress(s),n=this.safeString(r[0],"address"),o=this.safeString(r[0],"tag"),h=this.safeString(r[0],"chainType");return this.checkAddress(n),{currency:e,address:n,tag:o,network:h,info:r}}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t];return n+="/"+e,Object.keys(s).length&&(n+="?"+this.urlencode(s)),{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,c,d){if(503===e)throw new h(this.id+" "+e.toString()+" "+t+" "+n);if(void 0!==o&&"code"in o&&"1"===this.safeString(o,"code")){const e=this.safeString(o,"msg"),t=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions,e,t),new r(t)}}}},89124:(e,t,i)=>{"use strict";const s=i(48819),{AuthenticationError:r,ExchangeError:a,PermissionDenied:n,ExchangeNotAvailable:o,OnMaintenance:h,InvalidOrder:c,OrderNotFound:d,InsufficientFunds:u,ArgumentsRequired:l,BadSymbol:f,BadRequest:p,RequestTimeout:m,NetworkError:g}=i(73449),{TRUNCATE:y}=i(62115);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"cdax",name:"CDAX",countries:["RU"],rateLimit:100,userAgent:this.userAgents.chrome39,certified:!1,version:"v1",accounts:void 0,accountsById:void 0,hostname:"cdax.io",pro:!1,has:{cancelAllOrders:!0,cancelOrder:!0,cancelOrders:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!1,fetchDepositAddressesByNetwork:!1,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchPremiumIndexOHLCV:!1,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingLimits:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","4h":"4hour","1d":"1day","1w":"1week","1M":"1mon","1y":"1year"},urls:{logo:"https://user-images.githubusercontent.com/1294454/102157692-fd406280-3e90-11eb-8d46-4511b617cd17.jpg",api:{market:"https://{hostname}/api",public:"https://{hostname}/api",private:"https://{hostname}/api"},www:"https://cdax.io",referral:"https://cdax.io/invite?invite_code=esc74",doc:"https://github.com/cloudapidoc/API_Docs",fees:"https://cdax.io/about/fee"},api:{market:{get:{"history/kline":1,"detail/merged":1,depth:1,trade:1,"history/trade":1,detail:1,tickers:1,etp:1}},public:{get:{"common/symbols":1,"common/currencys":1,"common/timestamp":1,"common/exchange":1,"settings/currencys":1}},private:{get:{"account/accounts":.2,"account/accounts/{id}/balance":.2,"account/accounts/{sub-uid}":1,"account/history":4,"cross-margin/loan-info":1,"margin/loan-info":1,"fee/fee-rate/get":1,"order/openOrders":.4,"order/orders":.4,"order/orders/{id}":.4,"order/orders/{id}/matchresults":.4,"order/orders/getClientOrder":.4,"order/history":1,"order/matchresults":1,"query/deposit-withdraw":1,"margin/loan-orders":.2,"margin/accounts/balance":.2,"cross-margin/loan-orders":1,"cross-margin/accounts/balance":1,"points/actions":1,"points/orders":1,"subuser/aggregate-balance":10,"stable-coin/exchange_rate":1,"stable-coin/quote":1},post:{"account/transfer":1,"futures/transfer":1,"order/batch-orders":.4,"order/orders/place":.2,"order/orders/submitCancelClientOrder":.2,"order/orders/batchCancelOpenOrders":.4,"order/orders/{id}/submitcancel":.2,"order/orders/batchcancel":.4,"dw/withdraw/api/create":1,"dw/withdraw-virtual/{id}/cancel":1,"dw/transfer-in/margin":10,"dw/transfer-out/margin":10,"margin/orders":10,"margin/orders/{id}/repay":10,"cross-margin/transfer-in":1,"cross-margin/transfer-out":1,"cross-margin/orders":1,"cross-margin/orders/{id}/repay":1,"stable-coin/exchange":1,"subuser/transfer":10}}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,maker:this.parseNumber("0.002"),taker:this.parseNumber("0.002")}},exceptions:{broad:{"contract is restricted of closing positions on API.  Please contact customer service":h,maintain:h},exact:{"bad-request":p,"base-date-limit-error":p,"api-not-support-temp-addr":n,timeout:m,"gateway-internal-error":o,"account-frozen-balance-insufficient-error":u,"invalid-amount":c,"order-limitorder-amount-min-error":c,"order-limitorder-amount-max-error":c,"order-marketorder-amount-min-error":c,"order-limitorder-price-min-error":c,"order-limitorder-price-max-error":c,"order-holding-limit-failed":c,"order-orderprice-precision-error":c,"order-etp-nav-price-max-error":c,"order-orderstate-error":d,"order-queryorder-invalid":d,"order-update-error":o,"api-signature-check-failed":r,"api-signature-not-valid":r,"base-record-invalid":d,"base-symbol-trade-disabled":f,"base-symbol-error":f,"system-maintenance":h,"invalid symbol":f,"symbol trade not open now":f}},options:{defaultNetwork:"ERC20",networks:{ETH:"erc20",TRX:"trc20",HRC20:"hrc20",HECO:"hrc20",HT:"hrc20",ALGO:"algo",OMNI:""},fetchOrdersByStatesMethod:"private_get_order_orders",fetchOpenOrdersMethod:"fetch_open_orders_v1",createMarketBuyOrderRequiresPrice:!0,fetchMarketsMethod:"publicGetCommonSymbols",fetchBalanceMethod:"privateGetAccountAccountsIdBalance",createOrderMethod:"privatePostOrderOrdersPlace",language:"en-US"},commonCurrencies:{GET:"Themis",GTC:"Game.com",HIT:"HitChain",HOT:"Hydro Protocol",PNT:"Penta",SBTC:"Super Bitcoin",BIFI:"Bitcoin File"}})}async fetchTime(e={}){const t=await this.publicGetCommonTimestamp(e);return this.safeInteger(t,"data")}async fetchTradingLimits(e,t={}){await this.loadMarkets(),void 0===e&&(e=this.symbols);const i={};for(let s=0;s<e.length;s++){const r=e[s];i[r]=await this.fetchTradingLimitsById(this.marketId(r),t)}return i}async fetchTradingLimitsById(e,t={}){const i={symbol:e},s=await this.publicGetCommonExchange(this.extend(i,t));return this.parseTradingLimits(this.safeValue(s,"data",{}))}parseTradingLimits(e,t,i={}){return{info:e,limits:{amount:{min:this.safeNumber(e,"limit-order-must-greater-than"),max:this.safeNumber(e,"limit-order-must-less-than")}}}}costToPrecision(e,t){return this.decimalToPrecision(t,y,this.markets[e].precision.cost,this.precisionMode)}async fetchMarkets(e={}){const t=this.options.fetchMarketsMethod,i=await this[t](e),s=this.safeValue(i,"data");if(s.length<1)throw new g(this.id+" publicGetCommonSymbols returned empty response: "+this.json(s));const r=[];for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"base-currency"),a=this.safeString(t,"quote-currency"),n=i+a,o=this.safeCurrencyCode(i),h=this.safeCurrencyCode(a),c=o+"/"+h,d={amount:this.safeInteger(t,"amount-precision"),price:this.safeInteger(t,"price-precision"),cost:this.safeInteger(t,"value-precision")},u="OMG"===o?0:.002,l="OMG"===o?0:.002,f=this.safeNumber(t,"min-order-amt",Math.pow(10,-d.amount)),p=this.safeNumber(t,"max-order-amt"),m=this.safeNumber(t,"min-order-value",0),g="online"===this.safeString(t,"state");r.push({id:n,symbol:c,base:o,quote:h,baseId:i,quoteId:a,type:"spot",spot:!0,active:g,precision:d,taker:l,maker:u,limits:{amount:{min:f,max:p},price:{min:Math.pow(10,-d.price),max:void 0},cost:{min:m,max:void 0},leverage:{max:this.safeNumber(t,"leverage-ratio",1),superMax:this.safeNumber(t,"super-margin-leverage-ratio",1)}},info:t})}return r}parseTicker(e,t){const i=this.safeSymbol(void 0,t),s=this.safeInteger(e,"ts");let r,a,n,o;"bid"in e&&(Array.isArray(e.bid)?(r=this.safeNumber(e.bid,0),a=this.safeNumber(e.bid,1)):(r=this.safeNumber(e,"bid"),a=this.safeValue(e,"bidSize"))),"ask"in e&&(Array.isArray(e.ask)?(n=this.safeNumber(e.ask,0),o=this.safeNumber(e.ask,1)):(n=this.safeNumber(e,"ask"),o=this.safeValue(e,"askSize")));const h=this.safeNumber(e,"open"),c=this.safeNumber(e,"close"),d=this.safeNumber(e,"amount"),u=this.safeNumber(e,"vol"),l=this.vwap(d,u);return this.safeTicker({symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:r,bidVolume:a,ask:n,askVolume:o,vwap:l,open:h,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:d,quoteVolume:u,info:e},t)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id,type:"step0"},r=await this.marketGetDepth(this.extend(s,i));if("tick"in r){if(!r.tick)throw new f(this.id+" fetchOrderBook() returned empty response: "+this.json(r));const t=this.safeValue(r,"tick"),i=this.safeInteger(t,"ts",this.safeInteger(r,"ts")),s=this.parseOrderBook(t,e,i);return s.nonce=this.safeInteger(t,"version"),s}throw new a(this.id+" fetchOrderBook() returned unrecognized response: "+this.json(r))}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.marketGetDetailMerged(this.extend(s,t)),a=this.parseTicker(r.tick,i),n=this.safeInteger(r,"ts");return a.timestamp=n,a.datetime=this.iso8601(n),a}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.marketGetTickers(t),s=this.safeValue(i,"data"),r=this.safeInteger(i,"ts"),a={};for(let e=0;e<s.length;e++){const t=this.safeString(s[e],"symbol"),i=this.safeMarket(t),n=i.symbol,o=this.parseTicker(s[e],i);o.timestamp=r,o.datetime=this.iso8601(r),a[n]=o}return this.filterByArray(a,"symbol",e)}parseTrade(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t),r=this.safeInteger2(e,"ts","created-at"),a=this.safeString(e,"order-id");let n=this.safeString(e,"direction"),o=this.safeString(e,"type");if(void 0!==o){const e=o.split("-");n=e[0],o=e[1]}const h=this.safeString(e,"role"),c=this.safeString(e,"price"),d=this.safeString2(e,"filled-amount","amount");let u,l=this.safeString(e,"filled-fees"),f=this.safeCurrencyCode(this.safeString(e,"fee-currency"));const p=this.safeString(e,"filled-points");void 0!==p&&(void 0!==l&&"0.0"!==l||(l=p,f=this.safeCurrencyCode(this.safeString(e,"fee-deduct-currency")))),void 0!==l&&(u={cost:l,currency:f});const m=this.safeString2(e,"trade-id","tradeId"),g=this.safeString(e,"id",m);return this.safeTrade({id:g,info:e,order:a,timestamp:r,datetime:this.iso8601(r),symbol:s,type:o,side:n,takerOrMaker:h,price:c,amount:d,cost:void 0,fee:u},t)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();const a={id:e},n=await this.privateGetOrderOrdersIdMatchresults(this.extend(a,r));return this.parseTrades(n.data,void 0,i,s)}async fetchMyTrades(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==i&&(a.size=i),void 0!==t&&(a["start-time"]=t);const n=await this.privateGetOrderMatchresults(this.extend(a,s));return this.parseTrades(n.data,r,t,i)}async fetchTrades(e,t,i=1e3,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.size=i);const n=await this.marketGetHistoryTrade(this.extend(a,s)),o=this.safeValue(n,"data");let h=[];for(let e=0;e<o.length;e++){const t=this.safeValue(o[e],"data",[]);for(let e=0;e<t.length;e++){const i=this.parseTrade(t[e],r);h.push(i)}}return h=this.sortBy(h,"timestamp"),this.filterBySymbolSinceLimit(h,e,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,"id"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"amount")]}async fetchOHLCV(e,t="1m",i,s=1e3,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id,period:this.timeframes[t]};void 0!==s&&(n.size=s);const o=await this.marketGetHistoryKline(this.extend(n,r)),h=this.safeValue(o,"data",[]);return this.parseOHLCVs(h,a,t,i,s)}async fetchAccounts(e={}){return await this.loadMarkets(),(await this.privateGetAccountAccounts(e)).data}async fetchCurrencies(e={}){const t={language:this.options.language},i=await this.publicGetSettingsCurrencys(this.extend(t,e)),s=this.safeValue(i,"data"),r={};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeValue(t,"name"),a=this.safeInteger(t,"withdraw-precision"),n=this.safeCurrencyCode(i),o=this.safeValue(t,"deposit-enabled"),h=this.safeValue(t,"withdraw-enabled"),c=this.safeValue(t,"country-disabled"),d=this.safeValue(t,"visible",!1),u=this.safeString(t,"state"),l=d&&o&&h&&"online"===u&&!c,f=this.safeString(t,"display-name");r[n]={id:i,code:n,type:"crypto",name:f,active:l,fee:void 0,precision:a,limits:{amount:{min:Math.pow(10,-a),max:Math.pow(10,a)},deposit:{min:this.safeNumber(t,"deposit-min-amount"),max:Math.pow(10,a)},withdraw:{min:this.safeNumber(t,"withdraw-min-amount"),max:Math.pow(10,a)}},info:t}}return r}async fetchBalance(e={}){await this.loadMarkets(),await this.loadAccounts();const t=this.options.fetchBalanceMethod,i={id:this.accounts[0].id},s=await this[t](this.extend(i,e)),r=this.safeValue(s.data,"list",[]),a={info:s};for(let e=0;e<r.length;e++){const t=r[e],i=this.safeString(t,"currency"),s=this.safeCurrencyCode(i);let n;n=s in a?a[s]:this.account(),"trade"===t.type&&(n.free=this.safeString(t,"balance")),"frozen"===t.type&&(n.used=this.safeString(t,"balance")),a[s]=n}return this.parseBalance(a)}async fetchOrdersByStates(e,t,i,s,r={}){await this.loadMarkets();const a={states:e};let n;void 0!==t&&(n=this.market(t),a.symbol=n.id);const o=this.safeString(this.options,"fetchOrdersByStatesMethod","private_get_order_orders"),h=await this[o](this.extend(a,r));return this.parseOrders(h.data,n,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrderOrdersId(this.extend(s,i)),a=this.safeValue(r,"data");return this.parseOrder(a)}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByStates("pre-submitted,submitted,partial-filled,filled,partial-canceled,canceled",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){const r=this.safeString(this.options,"fetchOpenOrdersMethod","fetch_open_orders_v1");return await this[r](e,t,i,s)}async fetchOpenOrdersV1(e,t,i,s={}){if(void 0===e)throw new l(this.id+" fetchOpenOrdersV1() requires a symbol argument");return await this.fetchOrdersByStates("pre-submitted,submitted,partial-filled",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStates("filled,partial-canceled,canceled",e,t,i,s)}async fetchOpenOrdersV2(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.symbol=a.id);let n=this.safeString(s,"account-id");if(void 0===n){await this.loadAccounts();for(let e=0;e<this.accounts.length;e++){const t=this.accounts[e];if("spot"===t.type&&(n=this.safeString(t,"id"),void 0!==n))break}}r["account-id"]=n,void 0!==i&&(r.size=i);const o=this.omit(s,"account-id"),h=await this.privateGetOrderOpenOrders(this.extend(r,o)),c=this.safeValue(h,"data",[]);return this.parseOrders(c,a,t,i)}parseOrderStatus(e){return this.safeString({"partial-filled":"open","partial-canceled":"canceled",filled:"closed",canceled:"canceled",submitted:"open"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id");let s,r;const a=this.parseOrderStatus(this.safeString(e,"state")),n=this.safeString(e,"type");if(void 0!==n){const e=n.split("-");s=this.safeString(e,0),r=this.safeString(e,1)}const o=this.safeString(e,"symbol"),h=(t=this.safeMarket(o,t)).symbol,c=this.safeInteger(e,"created-at"),d=this.safeString(e,"client-order-id"),u=this.safeString2(e,"filled-amount","field-amount"),l=this.safeString(e,"price"),f=this.safeString2(e,"filled-cash-amount","field-cash-amount");let p=this.safeString(e,"amount");"buy-market"===n&&(p=void 0);const m=this.safeString2(e,"filled-fees","field-fees");let g;if(void 0!==m){let e;void 0!==t&&(e="sell"===s?t.quote:t.base),g={cost:m,currency:e}}return this.safeOrder2({info:e,id:i,clientOrderId:d,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:h,type:r,timeInForce:void 0,postOnly:void 0,side:s,price:l,stopPrice:void 0,average:void 0,cost:f,amount:p,filled:u,remaining:void 0,status:a,fee:g,trades:void 0},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),await this.loadAccounts();const n=this.market(e),o={"account-id":this.accounts[0].id,symbol:n.id,type:i+"-"+t},h=this.safeString2(a,"clientOrderId","client-order-id");if(void 0===h){const e=this.safeValue(this.options,"broker",{}),t=this.safeString(e,"id");o["client-order-id"]=t+this.uuid()}else o["client-order-id"]=h;if(a=this.omit(a,["clientOrderId","client-order-id"]),"market"===t&&"buy"===i)if(this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new c(this.id+" market buy order requires price argument to calculate cost (total amount of quote currency to spend for buying, amount * price). To switch off this warning exception and specify cost in the amount argument, set .options['createMarketBuyOrderRequiresPrice'] = false. Make sure you know what you're doing.");o.amount=this.costToPrecision(e,parseFloat(s)*parseFloat(r))}else o.amount=this.costToPrecision(e,s);else o.amount=this.amountToPrecision(e,s);"limit"!==t&&"ioc"!==t&&"limit-maker"!==t&&"stop-limit"!==t&&"stop-limit-fok"!==t||(o.price=this.priceToPrecision(e,r));const d=this.options.createOrderMethod,u=await this[d](this.extend(o,a)),l=this.milliseconds();return{info:u,id:this.safeString(u,"data"),timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:void 0,symbol:e,type:t,side:i,price:r,amount:s,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0}}async cancelOrder(e,t,i={}){const s=await this.privatePostOrderOrdersIdSubmitcancel({id:e});return this.extend(this.parseOrder(s),{id:e,status:"canceled"})}async cancelOrders(e,t,i={}){await this.loadMarkets();const s=this.safeValue2(i,"clientOrderIds","client-order-ids");i=this.omit(i,["clientOrderIds","client-order-ids"]);const r={};return void 0===s?r["order-ids"]=e:r["client-order-ids"]=s,await this.privatePostOrderOrdersBatchcancel(this.extend(r,i))}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s;return void 0!==e&&(s=this.market(e),i.symbol=s.id),await this.privatePostOrderOrdersBatchCancelOpenOrders(this.extend(i,t))}currencyToPrecision(e,t){return this.decimalToPrecision(t,0,this.currencies[e].precision)}safeNetwork(e){const t=e.length-1;return"1"===e[t]&&(e=e.slice(0,t)),this.safeString({},e,e)}parseDepositAddress(e,t){const i=this.safeString(e,"address");let s=this.safeString(e,"addressTag");""===s&&(s=void 0);const r=this.safeString(e,"currency");t=this.safeCurrency(r,t);const a=this.safeCurrencyCode(r,t),n=this.safeString(e,"chain"),o=this.safeValue(t,"networks",{}),h=this.indexBy(o,"id"),c=this.safeValue(h,n,n),d=this.safeString(c,"network");return this.checkAddress(i),{currency:a,address:i,tag:s,network:d,info:e}}async fetchDeposits(e,t,i,s={}){let r;(void 0===i||i>100)&&(i=100),await this.loadMarkets(),void 0!==e&&(r=this.currency(e));const a={type:"deposit",from:0};void 0!==r&&(a.currency=r.id),void 0!==i&&(a.size=i);const n=await this.privateGetQueryDepositWithdraw(this.extend(a,s));return this.parseTransactions(n.data,r,t,i)}async fetchWithdrawals(e,t,i,s={}){let r;(void 0===i||i>100)&&(i=100),await this.loadMarkets(),void 0!==e&&(r=this.currency(e));const a={type:"withdraw",from:0};void 0!==r&&(a.currency=r.id),void 0!==i&&(a.size=i);const n=await this.privateGetQueryDepositWithdraw(this.extend(a,s));return this.parseTransactions(n.data,r,t,i)}parseTransaction(e,t){const i=this.safeInteger(e,"created-at"),s=this.safeInteger(e,"updated-at"),r=this.safeCurrencyCode(this.safeString(e,"currency"));let a=this.safeString(e,"type");"withdraw"===a&&(a="withdrawal");const n=this.parseTransactionStatus(this.safeString(e,"state")),o=this.safeString(e,"address-tag");let h=this.safeNumber(e,"fee");return void 0!==h&&(h=Math.abs(h)),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"tx-hash"),timestamp:i,datetime:this.iso8601(i),address:this.safeString(e,"address"),tag:o,type:a,amount:this.safeNumber(e,"amount"),currency:r,status:n,updated:s,fee:{currency:r,cost:h,rate:void 0}}}parseTransactionStatus(e){return this.safeString({unknown:"failed",confirming:"pending",confirmed:"ok",safe:"ok",orphan:"failed",submitted:"pending",canceled:"canceled",reexamine:"pending",reject:"failed",pass:"pending","wallet-reject":"failed","confirm-error":"failed",repealed:"failed","wallet-transfer":"pending","pre-transfer":"pending"},e,e)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),await this.loadMarkets(),this.checkAddress(i);const a=this.currency(e),n={address:i,amount:t,currency:a.id.toLowerCase()};void 0!==s&&(n["addr-tag"]=s);const o=this.safeValue(this.options,"networks",{});let h=this.safeStringUpper(r,"network");h=this.safeStringLower(o,h,h),void 0!==h&&(n.chain="erc20"===h?a.id+h:h+a.id,r=this.omit(r,"network"));const c=await this.privatePostDwWithdrawApiCreate(this.extend(n,r));return{info:c,id:this.safeString(c,"data")}}sign(e,t="public",i="GET",s={},r,a){let n="/";"market"===t?n+=t:"public"===t||"private"===t?n+=this.version:"v2Public"!==t&&"v2Private"!==t||(n+="v2"),n+="/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("private"===t||"v2Private"===t){this.checkRequiredCredentials();const e=this.ymdhms(this.milliseconds(),"T");let t={SignatureMethod:"HmacSHA256",SignatureVersion:"2",AccessKeyId:this.apiKey,Timestamp:e};"POST"!==i&&(t=this.extend(t,o)),t=this.keysort(t);let s=this.urlencode(t);const h=[i,this.hostname,n,s].join("\n"),c=this.hmac(this.encode(h),this.encode(this.secret),"sha256","base64");s+="&"+this.urlencode({Signature:c}),n+="?"+s,"POST"===i?(a=this.json(o),r={"Content-Type":"application/json"}):r={"Content-Type":"application/x-www-form-urlencoded"}}else Object.keys(s).length&&(n+="?"+this.urlencode(s));return n=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+n,{url:n,method:i,body:a,headers:r}}calculateRateLimiterCost(e,t,i,s,r={},a={}){return this.safeInteger(r,"cost",1)}handleErrors(e,t,i,s,r,n,o,h,c){if(void 0!==o&&"status"in o&&"error"===this.safeString(o,"status")){const e=this.safeString(o,"err-code"),t=this.id+" "+n;this.throwBroadlyMatchedException(this.exceptions.broad,n,t),this.throwExactlyMatchedException(this.exceptions.exact,e,t);const i=this.safeString(o,"err-msg");throw this.throwExactlyMatchedException(this.exceptions.exact,i,t),new a(t)}}}},74228:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:n,NullResponse:o,InvalidOrder:h,NotSupported:c,InsufficientFunds:d,InvalidNonce:u,OrderNotFound:l,RateLimitExceeded:f,DDoSProtection:p}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"cex",name:"CEX.IO",countries:["GB","EU","CY","RU"],rateLimit:1500,has:{cancelOrder:!0,CORS:void 0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},timeframes:{"1m":"1m","1h":"1h","1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766442-8ddc33b0-5ed8-11e7-8b98-f786aef0f3c9.jpg",api:"https://cex.io/api",www:"https://cex.io",doc:"https://cex.io/cex-api",fees:["https://cex.io/fee-schedule","https://cex.io/limits-commissions"],referral:"https://cex.io/r/0/up105393824/0/"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["currency_profile","currency_limits/","last_price/{pair}/","last_prices/{currencies}/","ohlcv/hd/{yyyymmdd}/{pair}","order_book/{pair}/","ticker/{pair}/","tickers/{currencies}/","trade_history/{pair}/"],post:["convert/{pair}","price_stats/{pair}"]},private:{post:["active_orders_status/","archived_orders/{pair}/","balance/","cancel_order/","cancel_orders/{pair}/","cancel_replace_order/{pair}/","close_position/{pair}/","get_address/","get_myfee/","get_order/","get_order_tx/","open_orders/{pair}/","open_orders/","open_position/{pair}/","open_positions/{pair}/","place_order/{pair}/","raw_tx_history"]}},fees:{trading:{maker:this.parseNumber("0.0016"),taker:this.parseNumber("0.0025")},funding:{withdraw:{},deposit:{BTC:0,ETH:0,BCH:0,DASH:0,BTG:0,ZEC:0,XRP:0,XLM:0}}},exceptions:{exact:{},broad:{"Insufficient funds":d,"Nonce must be incremented":u,"Invalid Order":h,"Order not found":l,"limit exceeded":f,"Invalid API key":n,"There was an error while placing your order":h,"Sorry, too many clients already":p}},options:{fetchOHLCVWarning:!0,createMarketBuyOrderRequiresPrice:!0,order:{status:{c:"canceled",d:"closed",cd:"canceled",a:"open"}}}})}async fetchCurrenciesFromCache(e={}){const t=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(t,"timestamp"),s=this.safeInteger(t,"expires",1e3),r=this.milliseconds();if(void 0===i||r-i>s){const i=await this.publicGetCurrencyProfile(e);this.options.fetchCurrencies=this.extend(t,{response:i,timestamp:r})}return this.safeValue(this.options.fetchCurrencies,"response")}async fetchCurrencies(e={}){const t=await this.fetchCurrenciesFromCache(e);this.options.currencies={timestamp:this.milliseconds(),response:t};const i=this.safeValue(t,"data",[]),s=this.safeValue(i,"symbols",[]),r={};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"code"),a=this.safeCurrencyCode(i),n=this.safeInteger(t,"precision"),o=!0;r[a]={id:i,code:a,name:i,active:o,precision:n,fee:void 0,limits:{amount:{min:this.safeNumber(t,"minimumCurrencyAmount"),max:void 0},withdraw:{min:this.safeNumber(t,"minimalWithdrawalAmount"),max:void 0}},info:t}}return r}async fetchMarkets(e={}){const t=await this.fetchCurrenciesFromCache(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"symbols",[]),r=this.indexBy(s,"code"),a=this.safeValue(i,"pairs",[]),n=await this.publicGetCurrencyLimits(e),o=[],h=this.safeValue(n.data,"pairs");for(let e=0;e<h.length;e++){const t=h[e],i=this.safeString(t,"symbol1"),s=this.safeString(t,"symbol2"),n=i+"/"+s,c=this.safeCurrencyCode(i),d=this.safeCurrencyCode(s),u=c+"/"+d,l=this.safeValue(r,i,{}),f=this.safeValue(r,s,{});let p=this.safeInteger(f,"precision",8);for(let e=0;e<a.length;e++){const t=a[e];t.symbol1===i&&t.symbol2===s&&(p=this.safeInteger(t,"pricePrecision",p))}const m={amount:this.safeInteger(l,"precision",8)-this.safeInteger(l,"scale",0),price:p};o.push({id:n,info:t,symbol:u,base:c,quote:d,baseId:i,quoteId:s,type:"spot",spot:!0,active:void 0,precision:m,limits:{amount:{min:this.safeNumber(t,"minLotSize"),max:this.safeNumber(t,"maxLotSize")},price:{min:this.safeNumber(t,"minPrice"),max:this.safeNumber(t,"maxPrice")},cost:{min:this.safeNumber(t,"minLotSizeS2"),max:void 0}}})}return o}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i={info:t},s=this.omit(t,["username","timestamp"]),r=Object.keys(s);for(let e=0;e<r.length;e++){const t=r[e],a=this.safeValue(s,t,{}),n=this.account();n.free=this.safeString(a,"available"),n.used=this.safeString(a,"orders","0"),i[this.safeCurrencyCode(t)]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)};void 0!==t&&(s.depth=t);const r=await this.publicGetOrderBookPair(this.extend(s,i)),a=this.safeTimestamp(r,"timestamp");return this.parseOrderBook(r,e,a)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const n=this.market(e);if(void 0===i)i=this.milliseconds()-864e5;else if(this.options.fetchOHLCVWarning)throw new r(this.id+" fetchOHLCV warning: CEX can return historical candles for a certain date only, this might produce an empty or null reply. Set exchange.options['fetchOHLCVWarning'] = false or add ({ 'options': { 'fetchOHLCVWarning': false }}) to constructor params to suppress this warning message.");const h={pair:n.id,yyyymmdd:this.yyyymmdd(i,"")};try{const e=await this.publicGetOhlcvHdYyyymmddPair(this.extend(h,a)),r="data"+this.timeframes[t],o=this.safeString(e,r),c=JSON.parse(o);return this.parseOHLCVs(c,n,t,i,s)}catch(e){if(e instanceof o)return[]}}parseTicker(e,t){const i=this.safeTimestamp(e,"timestamp"),s=this.safeNumber(e,"volume"),r=this.safeNumber(e,"high"),a=this.safeNumber(e,"low"),n=this.safeNumber(e,"bid"),o=this.safeNumber(e,"ask"),h=this.safeNumber(e,"last");let c;return t&&(c=t.symbol),{symbol:c,timestamp:i,datetime:this.iso8601(i),high:r,low:a,bid:n,bidVolume:void 0,ask:o,askVolume:void 0,vwap:void 0,open:void 0,close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:s,quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i={currencies:Object.keys(this.currencies).join("/")},s=(await this.publicGetTickersCurrencies(this.extend(i,t))).data,r={};for(let e=0;e<s.length;e++){const t=s[e],i=t.pair.replace(":","/"),a=this.markets[i];r[i]=this.parseTicker(t,a)}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},r=await this.publicGetTickerPair(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid"),r=this.safeString(e,"type"),a=this.safeString(e,"price"),n=this.safeString(e,"amount");let o;return void 0!==t&&(o=t.symbol),this.safeTrade({info:e,id:s,timestamp:i,datetime:this.iso8601(i),symbol:o,type:void 0,side:r,order:void 0,takerOrMaker:void 0,price:a,amount:n,cost:void 0,fee:void 0},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id},n=await this.publicGetTradeHistoryPair(this.extend(a,s));return this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,r,a={}){if("market"===t&&"buy"===i&&this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new h(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");s*=r}await this.loadMarkets();const n={pair:this.marketId(e),type:i,amount:s};"limit"===t?n.price=r:n.order_type=t;const o=await this.privatePostPlaceOrderPair(this.extend(n,a)),c=this.safeNumber(o,"amount"),d=this.safeNumber(o,"pending"),u=this.safeValue(o,"time"),l=this.safeValue(o,"complete")?"closed":"open";let f;return void 0!==c&&void 0!==d&&(f=Math.max(c-d,0)),{id:this.safeString(o,"id"),info:o,clientOrderId:void 0,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:void 0,type:t,side:this.safeString(o,"type"),symbol:e,status:l,price:this.safeNumber(o,"price"),amount:c,cost:void 0,average:void 0,remaining:d,filled:f,fee:void 0,trades:void 0}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.privatePostCancelOrder(this.extend(s,i))}parseOrder(e,t){let i,s=this.safeValue(e,"time");if(s="string"==typeof s&&s.indexOf("T")>=0?this.parse8601(s):parseInt(s),void 0===t){const s=this.safeString(e,"symbol1"),r=this.safeString(e,"symbol2");i=this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(r),i in this.markets&&(t=this.market(i))}const r=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeNumber(e,"price");let n=this.safeNumber(e,"amount");void 0!==n&&(n=Math.abs(n));const o=this.safeNumber2(e,"pending","remains"),h=n-o;let c,d;if(void 0!==t){i=t.symbol;const s=this.safeNumber(e,"ta:"+t.quote),r=this.safeNumber(e,"tta:"+t.quote);d=this.sum(s,r);const a="fa:"+t.base,n="tfa:"+t.base,o="fa:"+t.quote,h="tfa:"+t.quote;let u=this.safeNumber(e,"tradingFeeMaker");if(u||(u=this.safeNumber(e,"tradingFeeTaker",u)),u&&(u/=100),a in e||n in e){const i=this.safeNumber2(e,a,n);c={currency:t.base,rate:u,cost:i}}else if(o in e||h in e){const i=this.safeNumber2(e,o,h);c={currency:t.quote,rate:u,cost:i}}}d||(d=a*h);const u=e.type;let l;const f=e.id;if("vtx"in e){l=[];for(let s=0;s<e.vtx.length;s++){const r=e.vtx[s],a=this.safeString(r,"type");if("cancel"===a)continue;const n=this.safeNumber(r,"price");if(void 0===n)continue;if("costsNothing"===a)continue;const o=this.parse8601(this.safeString(r,"time")),h=this.safeNumber(r,"amount"),c=this.safeNumber(r,"fee_amount");let d,u=h<0?-h:h;"sell"===a?(d=u,u=this.sum(c,d)/n):d=u*n,l.push({id:this.safeString(r,"id"),timestamp:o,datetime:this.iso8601(o),order:f,symbol:i,price:n,amount:u,cost:d,side:a,fee:{cost:c,currency:t.quote},info:r,type:void 0,takerOrMaker:void 0})}}return{id:f,clientOrderId:void 0,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:r,symbol:i,type:void 0===a?"market":"limit",timeInForce:void 0,postOnly:void 0,side:u,price:a,stopPrice:void 0,cost:d,amount:n,filled:h,remaining:o,trades:l,fee:c,info:e,average:void 0}}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a,n="privatePostOpenOrders";void 0!==e&&(a=this.market(e),r.pair=a.id,n+="Pair");const o=await this[n](this.extend(r,s));for(let e=0;e<o.length;e++)o[e]=this.extend(o[e],{status:"open"});return this.parseOrders(o,a,t,i)}async fetchClosedOrders(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new a(this.id+" fetchClosedOrders() requires a symbol argument");const r=this.market(e),n={pair:r.id},o=await this.privatePostArchivedOrdersPair(this.extend(n,s));return this.parseOrders(o,r,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e.toString()},r=await this.privatePostGetOrderTx(this.extend(s,i)),a=this.safeValue(r,"data",{});return this.parseOrder(a)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={limit:i,pair:this.market(e).id,dateFrom:t},a=await this.privatePostArchivedOrdersPair(this.extend(r,s)),n=[];for(let e=0;e<a.length;e++){const t=a[e],i=this.parseOrderStatus(this.safeString(t,"status")),s=this.safeString(t,"symbol1"),r=this.safeString(t,"symbol2"),o=this.safeCurrencyCode(s),h=this.safeCurrencyCode(r),c=o+"/"+h,d=this.safeString(t,"type"),u=this.safeNumber(t,"a:"+s+":cds"),l=this.safeNumber(t,"a:"+r+":cds"),f=this.safeNumber(t,"f:"+r+":cds"),p=this.safeNumber(t,"amount"),m=this.safeNumber(t,"price"),g=this.safeNumber(t,"remains"),y=p-g;let b,v,w,k;if(m){const e=this.safeNumber(t,"ta:"+r,0),i=this.safeNumber(t,"tta:"+r,0),s=this.safeNumber(t,"fa:"+r,0),a=this.safeNumber(t,"tfa:"+r,0);v="sell"===d?this.sum(this.sum(e,i),this.sum(s,a)):this.sum(e,i)-this.sum(s,a),k="limit",b=p,w=v/y}else k="market",b=u,v=l,w=b/v;const _=this.safeString(t,"time"),S=this.safeString(t,"lastTxTime"),O=this.parse8601(_);n.push({id:this.safeString(t,"id"),timestamp:O,datetime:this.iso8601(O),lastUpdated:this.parse8601(S),status:i,symbol:c,side:d,price:m,amount:b,average:w,type:k,filled:y,cost:v,remaining:g,fee:{cost:f,currency:h},info:t})}return n}parseOrderStatus(e){return this.safeString(this.options.order.status,e,e)}async editOrder(e,t,i,s,r,n,o={}){if(void 0===r)throw new a(this.id+" editOrder() requires a amount argument");if(void 0===n)throw new a(this.id+" editOrder() requires a price argument");await this.loadMarkets();const h=this.market(t),c={pair:h.id,type:s,amount:r,price:n,order_id:e},d=await this.privatePostCancelReplaceOrderPair(this.extend(c,o));return this.parseOrder(d,h)}async fetchDepositAddress(e,t={}){if("XRP"===e||"XLM"===e)throw new c(this.id+" fetchDepositAddress does not support XRP and XLM addresses yet (awaiting docs from CEX.io)");await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privatePostGetAddress(this.extend(i,t)),r=this.safeString(s,"data");return this.checkAddress(r),{currency:e,address:r,tag:void 0,network:void 0,info:s}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));a=this.json(this.extend({key:this.apiKey,signature:i.toUpperCase(),nonce:e},o)),r={"Content-Type":"application/json"}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,h,c,d){if(Array.isArray(h))return h;if("true"!==n){if(void 0===h)throw new o(this.id+" returned "+this.json(h));if((!("e"in h)||!("ok"in h)||"ok"!==h.ok)&&"error"in h){const e=this.safeString(h,"error"),t=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new r(t)}}}}},62939:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:n,RateLimitExceeded:o,InvalidNonce:h}=i(73449),c=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinbase",name:"Coinbase",countries:["US"],rateLimit:400,version:"v2",userAgent:this.userAgents.chrome,headers:{"CB-VERSION":"2018-05-30"},has:{cancelOrder:void 0,CORS:!0,createDepositAddress:!0,createOrder:void 0,deposit:void 0,fetchAccounts:!0,fetchBalance:!0,fetchBidsAsks:void 0,fetchBorrowRate:!1,fetchBorrowRates:!1,fetchClosedOrders:void 0,fetchCurrencies:!0,fetchDepositAddress:void 0,fetchDeposits:!0,fetchIndexOHLCV:!1,fetchL2OrderBook:!1,fetchLedger:!0,fetchMarkets:!0,fetchMarkOHLCV:!1,fetchMyBuys:!0,fetchMySells:!0,fetchMyTrades:void 0,fetchOHLCV:!1,fetchOpenOrders:void 0,fetchOrder:void 0,fetchOrderBook:!1,fetchOrders:void 0,fetchPremiumIndexOHLCV:!1,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:void 0,fetchTransactions:void 0,fetchWithdrawals:!0,withdraw:void 0},urls:{logo:"https://user-images.githubusercontent.com/1294454/40811661-b6eceae2-653a-11e8-829e-10bfadb078cf.jpg",api:"https://api.coinbase.com",www:"https://www.coinbase.com",doc:"https://developers.coinbase.com/api/v2",fees:"https://support.coinbase.com/customer/portal/articles/2109597-buy-sell-bank-transfer-fees",referral:"https://www.coinbase.com/join/58cbe25a355148797479dbd2"},requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["currencies","time","exchange-rates","users/{user_id}","prices/{symbol}/buy","prices/{symbol}/sell","prices/{symbol}/spot"]},private:{get:["accounts","accounts/{account_id}","accounts/{account_id}/addresses","accounts/{account_id}/addresses/{address_id}","accounts/{account_id}/addresses/{address_id}/transactions","accounts/{account_id}/transactions","accounts/{account_id}/transactions/{transaction_id}","accounts/{account_id}/buys","accounts/{account_id}/buys/{buy_id}","accounts/{account_id}/sells","accounts/{account_id}/sells/{sell_id}","accounts/{account_id}/deposits","accounts/{account_id}/deposits/{deposit_id}","accounts/{account_id}/withdrawals","accounts/{account_id}/withdrawals/{withdrawal_id}","payment-methods","payment-methods/{payment_method_id}","user","user/auth"],post:["accounts","accounts/{account_id}/primary","accounts/{account_id}/addresses","accounts/{account_id}/transactions","accounts/{account_id}/transactions/{transaction_id}/complete","accounts/{account_id}/transactions/{transaction_id}/resend","accounts/{account_id}/buys","accounts/{account_id}/buys/{buy_id}/commit","accounts/{account_id}/sells","accounts/{account_id}/sells/{sell_id}/commit","accounts/{account_id}/deposists","accounts/{account_id}/deposists/{deposit_id}/commit","accounts/{account_id}/withdrawals","accounts/{account_id}/withdrawals/{withdrawal_id}/commit"],put:["accounts/{account_id}","user"],delete:["accounts/{id}","accounts/{account_id}/transactions/{transaction_id}"]}},exceptions:{exact:{two_factor_required:n,param_required:r,validation_error:r,invalid_request:r,personal_details_required:n,identity_verification_required:n,jumio_verification_required:n,jumio_face_match_verification_required:n,unverified_email:n,authentication_error:n,invalid_authentication_method:n,invalid_token:n,revoked_token:n,expired_token:n,invalid_scope:n,not_found:r,rate_limit_exceeded:o,internal_server_error:r},broad:{"request timestamp expired":h}},commonCurrencies:{CGLD:"CELO"},options:{fetchCurrencies:{expires:5e3},accounts:["wallet","fiat"]}})}async fetchTime(e={}){const t=await this.publicGetTime(e),i=this.safeValue(t,"data",{});return this.safeTimestamp(i,"epoch")}async fetchAccounts(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(this.extend({limit:100},e)),i=this.safeValue(t,"data",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeValue(t,"currency",{}),a=this.safeString(r,"code"),n=this.safeCurrencyCode(a);s.push({id:this.safeString(t,"id"),type:this.safeString(t,"type"),code:n,info:t})}return s}async createDepositAddress(e,t={}){let i=this.safeString(t,"account_id");if(t=this.omit(t,"account_id"),void 0===i){await this.loadAccounts();for(let t=0;t<this.accounts.length;t++){const s=this.accounts[t];if(s.code===e&&"wallet"===s.type){i=s.id;break}}}if(void 0===i)throw new r(this.id+" createDepositAddress could not find the account with matching currency code, specify an `account_id` extra param");const s={account_id:i},a=await this.privatePostAccountsAccountIdAddresses(this.extend(s,t)),n=this.safeValue(a,"data",{});return{currency:e,tag:this.safeString(n,"destination_tag"),address:this.safeString(n,"address"),info:a}}async fetchMySells(e,t,i,s={}){const r=await this.prepareAccountRequest(i,s);await this.loadMarkets();const a=this.omit(s,["account_id","accountId"]),n=await this.privateGetAccountsAccountIdSells(this.extend(r,a));return this.parseTrades(n.data,void 0,t,i)}async fetchMyBuys(e,t,i,s={}){const r=await this.prepareAccountRequest(i,s);await this.loadMarkets();const a=this.omit(s,["account_id","accountId"]),n=await this.privateGetAccountsAccountIdBuys(this.extend(r,a));return this.parseTrades(n.data,void 0,t,i)}async fetchTransactionsWithMethod(e,t,i,s,r={}){const a=await this.prepareAccountRequestWithCurrencyCode(t,s,r);await this.loadMarkets();const n=this.omit(r,["account_id","accountId"]),o=await this[e](this.extend(a,n));return this.parseTransactions(o.data,void 0,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsWithMethod("privateGetAccountsAccountIdWithdrawals",e,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsWithMethod("privateGetAccountsAccountIdDeposits",e,t,i,s)}parseTransactionStatus(e){return this.safeString({created:"pending",completed:"ok",canceled:"canceled"},e,e)}parseTransaction(e,t){const i=this.safeValue(e,"subtotal",{}),s=this.safeValue(e,"fee",{}),r=this.safeString(e,"id"),a=this.parse8601(this.safeValue(e,"created_at")),n=this.parse8601(this.safeValue(e,"updated_at")),o=this.safeString(e,"resource"),h=this.safeNumber(i,"amount"),c=this.safeString(i,"currency"),d=this.safeCurrencyCode(c),u=this.safeNumber(s,"amount"),l=this.safeString(s,"currency"),f={cost:u,currency:this.safeCurrencyCode(l)};let p=this.parseTransactionStatus(this.safeString(e,"status"));return void 0===p&&(p=this.safeValue(e,"committed")?"ok":"pending"),{info:e,id:r,txid:r,timestamp:a,datetime:this.iso8601(a),address:void 0,tag:void 0,type:o,amount:h,currency:d,status:p,updated:n,fee:f}}parseTrade(e,t){let i;const s=this.safeValue(e,"total",{}),r=this.safeValue(e,"amount",{}),a=this.safeValue(e,"subtotal",{}),n=this.safeValue(e,"fee",{}),o=this.safeString(e,"id"),h=this.parse8601(this.safeValue(e,"created_at"));if(void 0===t){const e=this.safeString(r,"currency"),t=this.safeString(s,"currency");void 0!==e&&void 0!==t&&(i=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t))}const d=this.safeString(e,"resource"),u=this.safeString(a,"amount"),l=this.safeString(r,"amount"),f=this.parseNumber(u),p=this.parseNumber(l),m=this.parseNumber(c.stringDiv(u,l)),g=this.safeNumber(n,"amount"),y=this.safeString(n,"currency"),b={cost:g,currency:this.safeCurrencyCode(y)};return{info:e,id:o,order:void 0,timestamp:h,datetime:this.iso8601(h),symbol:i,type:void 0,side:d,takerOrMaker:void 0,price:m,amount:p,cost:f,fee:b}}async fetchMarkets(e={}){const t=await this.fetchCurrenciesFromCache(e),i=this.safeValue(t,"currencies",{}),s=this.safeValue(t,"exchangeRates",{}),r=this.safeValue(i,"data",[]),a=this.indexBy(r,"id"),n=this.safeValue(this.safeValue(s,"data",{}),"rates",{}),o=Object.keys(n),h=[];for(let e=0;e<o.length;e++){const t=o[e],i=this.safeCurrencyCode(t);if("crypto"==(t in a?"fiat":"crypto"))for(let e=0;e<r.length;e++){const s=r[e],a=this.safeString(s,"id"),n=this.safeCurrencyCode(a),o=i+"/"+n,c=t+"-"+a;h.push({id:c,symbol:o,base:i,quote:n,baseId:t,quoteId:a,type:"spot",spot:!0,active:void 0,info:s,precision:{amount:void 0,price:void 0},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(s,"min_size"),max:void 0},leverage:{max:1}}})}}return h}async fetchCurrenciesFromCache(e={}){const t=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(t,"timestamp"),s=this.safeInteger(t,"expires",1e3),r=this.milliseconds();if(void 0===i||r-i>s){const i=await this.publicGetCurrencies(e),s=await this.publicGetExchangeRates(e);this.options.fetchCurrencies=this.extend(t,{currencies:i,exchangeRates:s,timestamp:r})}return this.safeValue(this.options,"fetchCurrencies",{})}async fetchCurrencies(e={}){const t=await this.fetchCurrenciesFromCache(e),i=this.safeValue(t,"currencies",{}),s=this.safeValue(t,"exchangeRates",{}),r=this.safeValue(i,"data",[]),a=this.indexBy(r,"id"),n=this.safeValue(this.safeValue(s,"data",{}),"rates",{}),o=Object.keys(n),h={};for(let e=0;e<o.length;e++){const t=o[e],i=t in a?"fiat":"crypto",s=this.safeValue(a,t,{}),r=this.safeString(s,"id",t),n=this.safeString(s,"name"),c=this.safeCurrencyCode(r);h[c]={id:r,code:c,info:s,type:i,name:n,active:!0,fee:void 0,precision:void 0,limits:{amount:{min:this.safeNumber(s,"min_size"),max:void 0},withdraw:{min:void 0,max:void 0}}}}return h}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetExchangeRates(this.extend({},t)),s=this.safeValue(i,"data",{}),r=this.safeValue(s,"rates",{}),a=this.safeString(s,"currency"),n={},o=Object.keys(r);for(let e=0;e<o.length;e++){const t=o[e],i=t+"-"+a,s=this.safeMarket(i,void 0,"-");n[s.symbol]=this.parseTicker(r[t],s)}return this.filterByArray(n,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=this.extend({symbol:i.id},t),r=await this.publicGetPricesSymbolSpot(s),a=await this.publicGetPricesSymbolBuy(s),n=await this.publicGetPricesSymbolSell(s);return this.parseTicker([r,a,n],i)}parseTicker(e,t){const i=this.safeSymbol(void 0,t);let s,r,a;const n=this.milliseconds();if("string"==typeof e){const t=c.stringDiv("1",e);a=this.parseNumber(t)}else{const[t,i,n]=e,o=this.safeValue(t,"data",{}),h=this.safeValue(i,"data",{}),c=this.safeValue(n,"data",{});a=this.safeNumber(o,"amount"),r=this.safeNumber(h,"amount"),s=this.safeNumber(c,"amount")}return this.safeTicker({symbol:i,timestamp:n,datetime:this.iso8601(n),bid:r,ask:s,last:a,high:void 0,low:void 0,bidVolume:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:e})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(this.extend({limit:100},e)),i=this.safeValue(t,"data"),s=this.safeValue(e,"type",this.options.accounts),r={info:t};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"type");if(this.inArray(a,s)){const e=this.safeValue(t,"balance");if(void 0!==e){const t=this.safeString(e,"currency"),i=this.safeCurrencyCode(t),s=this.safeString(e,"amount"),a=s;let n=this.safeValue(r,i);void 0===n?(n=this.account(),n.free=a,n.total=s):(n.free=c.stringAdd(n.free,s),n.total=c.stringAdd(n.total,s)),r[i]=n}}}return this.parseBalance(r)}async fetchLedger(e,t,i,s={}){let r;await this.loadMarkets(),void 0!==e&&(r=this.currency(e));const a=await this.prepareAccountRequestWithCurrencyCode(e,i,s),n=this.omit(s,["account_id","accountId"]),o=await this.privateGetAccountsAccountIdTransactions(this.extend(a,n));return this.parseLedger(o.data,r,t,i)}parseLedgerEntryStatus(e){return this.safeString({completed:"ok"},e,e)}parseLedgerEntryType(e){return this.safeString({buy:"trade",sell:"trade",fiat_deposit:"transaction",fiat_withdrawal:"transaction",exchange_deposit:"transaction",exchange_withdrawal:"transaction",send:"transaction",pro_deposit:"transaction",pro_withdrawal:"transaction"},e,e)}parseLedgerEntry(e,t){const i=this.safeValue(e,"amount",{});let s,r=this.safeNumber(i,"amount");r<0?(s="out",r=-r):s="in";const a=this.safeString(i,"currency"),n=this.safeCurrencyCode(a,t);let o;const h=this.safeValue(e,"network",{}),c=this.safeValue(h,"transaction_fee");if(void 0!==c){const e=this.safeString(c,"currency"),i=this.safeCurrencyCode(e,t);o={cost:this.safeNumber(c,"amount"),currency:i}}const d=this.parse8601(this.safeValue(e,"created_at")),u=this.safeString(e,"id"),l=this.parseLedgerEntryType(this.safeString(e,"type")),f=this.parseLedgerEntryStatus(this.safeString(e,"status")),p=this.safeString(e,"resource_path");let m;if(void 0!==p){const e=p.split("/");e.length>3&&(m=e[3])}return{info:e,id:u,timestamp:d,datetime:this.iso8601(d),direction:s,account:m,referenceId:void 0,referenceAccount:void 0,type:l,currency:n,amount:r,before:void 0,after:void 0,status:f,fee:o}}async findAccountId(e){await this.loadMarkets(),await this.loadAccounts();for(let t=0;t<this.accounts.length;t++){const i=this.accounts[t];if(i.code===e)return i.id}}prepareAccountRequest(e,t={}){const i=this.safeString2(t,"account_id","accountId");if(void 0===i)throw new a(this.id+" method requires an account_id (or accountId) parameter");const s={account_id:i};return void 0!==e&&(s.limit=e),s}async prepareAccountRequestWithCurrencyCode(e,t,i={}){let s=this.safeString2(i,"account_id","accountId");if(void 0===s){if(void 0===e)throw new a(this.id+" method requires an account_id (or accountId) parameter OR a currency code argument");if(s=await this.findAccountId(e),void 0===s)throw new r(this.id+" could not find account id for "+e)}const n={account_id:s};return void 0!==t&&(n.limit=t),n}sign(e,t="public",i="GET",s={},r,a){let n="/"+this.version+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(o).length&&(n+="?"+this.urlencode(o));const h=this.urls.api+n;if("private"===t){const e=this.safeString(this.headers,"Authorization");if(void 0!==e)r={Authorization:e,"Content-Type":"application/json"};else if(this.token)r={Authorization:"Bearer "+this.token,"Content-Type":"application/json"};else{this.checkRequiredCredentials();const e=this.nonce().toString();let t="";"GET"!==i&&Object.keys(o).length&&(t=a=this.json(o));const s=e+i+n+t,h=this.hmac(this.encode(s),this.encode(this.secret));r={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":h,"CB-ACCESS-TIMESTAMP":e,"Content-Type":"application/json"}}}return{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;const d=this.id+" "+n;let u=this.safeString(o,"error");if(void 0!==u){const e=this.safeString(o,"error_description");throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,e,d),new r(d)}const l=this.safeValue(o,"errors");if(void 0!==l&&Array.isArray(l)&&l.length>0){u=this.safeString(l[0],"id");const e=this.safeString(l[0],"message");if(void 0!==u)throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,e,d),new r(d)}if(void 0===this.safeValue(o,"data"))throw new r(this.id+" failed due to a malformed response "+this.json(o))}}},18806:(e,t,i)=>{"use strict";const s=i(51241);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinbaseprime",name:"Coinbase Prime",pro:!0,hostname:"exchange.coinbase.com",urls:{test:{public:"https://public.sandbox.exchange.coinbase.com",private:"https://public.sandbox.exchange.coinbase.com"},logo:"https://user-images.githubusercontent.com/1294454/44539184-29f26e00-a70c-11e8-868f-e907fc236a7c.jpg",api:{public:"https://api.{hostname}",private:"https://api.{hostname}"},www:"https://exchange.coinbase.com",doc:"https://docs.exchange.coinbase.com"}})}}},51241:(e,t,i)=>{"use strict";const s=i(48819),{InsufficientFunds:r,ArgumentsRequired:a,ExchangeError:n,InvalidOrder:o,InvalidAddress:h,AuthenticationError:c,NotSupported:d,OrderNotFound:u,OnMaintenance:l,PermissionDenied:f,RateLimitExceeded:p}=i(73449),{TICK_SIZE:m}=i(62115),g=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinbasepro",name:"Coinbase Pro",countries:["US"],rateLimit:100,userAgent:this.userAgents.chrome,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!0,createDepositAddress:!0,createOrder:!0,deposit:!0,fetchAccounts:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:void 0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":60,"5m":300,"15m":900,"1h":3600,"6h":21600,"1d":86400},hostname:"pro.coinbase.com",urls:{test:{public:"https://api-public.sandbox.pro.coinbase.com",private:"https://api-public.sandbox.pro.coinbase.com"},logo:"https://user-images.githubusercontent.com/1294454/41764625-63b7ffde-760a-11e8-996d-a6328fa9347a.jpg",api:{public:"https://api.{hostname}",private:"https://api.{hostname}"},www:"https://pro.coinbase.com/",doc:"https://docs.pro.coinbase.com",fees:["https://docs.pro.coinbase.com/#fees","https://support.pro.coinbase.com/customer/en/portal/articles/2945310-fees"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["currencies","products","products/{id}","products/{id}/book","products/{id}/candles","products/{id}/stats","products/{id}/ticker","products/{id}/trades","time","products/spark-lines"]},private:{get:["accounts","accounts/{id}","accounts/{id}/holds","accounts/{id}/ledger","accounts/{id}/transfers","coinbase-accounts","fills","funding","fees","margin/profile_information","margin/buying_power","margin/withdrawal_power","margin/withdrawal_power_all","margin/exit_plan","margin/liquidation_history","margin/position_refresh_amounts","margin/status","oracle","orders","orders/{id}","orders/client:{client_oid}","otc/orders","payment-methods","position","profiles","profiles/{id}","reports/{report_id}","transfers","transfers/{transfer_id}","users/self/exchange-limits","users/self/hold-balances","users/self/trailing-volume","withdrawals/fee-estimate"],post:["conversions","deposits/coinbase-account","deposits/payment-method","coinbase-accounts/{id}/addresses","funding/repay","orders","position/close","profiles/margin-transfer","profiles/transfer","reports","withdrawals/coinbase","withdrawals/coinbase-account","withdrawals/crypto","withdrawals/payment-method"],delete:["orders","orders/client:{client_oid}","orders/{id}"]}},commonCurrencies:{CGLD:"CELO"},precisionMode:m,fees:{trading:{tierBased:!0,percentage:!0,maker:.005,taker:.005},funding:{tierBased:!1,percentage:!1,withdraw:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:25},deposit:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:10}}},exceptions:{exact:{"Insufficient funds":r,NotFound:u,"Invalid API Key":c,"invalid signature":c,"Invalid Passphrase":c,"Invalid order id":o,"Private rate limit exceeded":p,"Trading pair not available":f,"Product not found":o},broad:{"Order already done":u,"order not found":u,"price too small":o,"price too precise":o,"under maintenance":l,"size is too small":o,"Cancel only mode":l}}})}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"id"),a=this.safeString(s,"name"),n=this.safeCurrencyCode(r),o=this.safeValue(s,"details",{}),h=this.safeNumber(s,"max_precision"),c="online"===this.safeString(s,"status");i[n]={id:r,code:n,info:s,type:this.safeString(o,"type"),name:a,active:c,fee:void 0,precision:h,limits:{amount:{min:this.safeNumber(o,"min_size"),max:void 0},withdraw:{min:this.safeNumber(o,"min_withdrawal_amount"),max:void 0}}}}return i}async fetchMarkets(e={}){const t=await this.publicGetProducts(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"id"),a=this.safeString(s,"base_currency"),n=this.safeString(s,"quote_currency"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c=o+"/"+h,d={min:this.safeNumber(s,"quote_increment"),max:void 0},u={amount:this.safeNumber(s,"base_increment"),price:this.safeNumber(s,"quote_increment")},l="online"===this.safeString(s,"status");i.push(this.extend(this.fees.trading,{id:r,symbol:c,baseId:a,quoteId:n,base:o,quote:h,type:"spot",spot:!0,active:l,precision:u,limits:{amount:{min:this.safeNumber(s,"base_min_size"),max:this.safeNumber(s,"base_max_size")},price:d,cost:{min:this.safeNumber(s,"min_market_funds"),max:this.safeNumber(s,"max_market_funds")}},info:s}))}return i}async fetchAccounts(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"id"),a=this.safeString(s,"currency"),n=this.safeCurrencyCode(a);i.push({id:r,type:void 0,currency:n,info:s})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(s,"available"),n.used=this.safeString(s,"hold"),n.total=this.safeString(s,"balance"),i[a]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e),level:2},r=await this.publicGetProductsIdBook(this.extend(s,i)),a=this.parseOrderBook(r,e);return a.nonce=this.safeInteger(r,"sequence"),a}parseTicker(e,t){let i,s,r,a,n,o,h,c;const d=void 0===t?void 0:t.symbol;return Array.isArray(e)?(a=this.safeNumber(e,4),i=this.milliseconds()):(i=this.parse8601(this.safeValue(e,"time")),s=this.safeNumber(e,"bid"),r=this.safeNumber(e,"ask"),n=this.safeNumber(e,"high"),o=this.safeNumber(e,"low"),h=this.safeNumber(e,"open"),a=this.safeNumber2(e,"price","last"),c=this.safeNumber(e,"volume")),this.safeTicker({symbol:d,timestamp:i,datetime:this.iso8601(i),high:n,low:o,bid:s,bidVolume:void 0,ask:r,askVolume:void 0,vwap:void 0,open:h,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:c,quoteVolume:void 0,info:e})}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetProductsSparkLines(this.extend({},t)),s={},r=Object.keys(i);for(let e=0;e<r.length;e++){const t=r[e],a=this.safeValue(i,t,[]),n=this.safeValue(a,0,[]),o=this.safeMarket(t,void 0,"-");s[o.symbol]=this.parseTicker(n,o)}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={id:i.id},r=this.safeString(this.options,"fetchTickerMethod","publicGetProductsIdTicker"),a=await this[r](this.extend(s,t));return this.parseTicker(a,i)}parseTrade(e,t){const i=this.parse8601(this.safeString2(e,"time","created_at")),s=this.safeString(e,"product_id"),r=this.safeSymbol(s,t,"-");let a,n,o,h;if(void 0!==t){const i=this.safeStringLower(t,"quoteId")+"_value";h=this.safeNumber(e,i),n=t.quote;const s=this.safeString(e,"liquidity");void 0!==s&&(o="T"===s?"taker":"maker",a=t[o])}const c={cost:this.safeNumber2(e,"fill_fees","fee"),currency:n,rate:a},d=this.safeString(e,"trade_id");let u="buy"===e.side?"sell":"buy";const l=this.safeString(e,"order_id"),f=this.safeString(e,"maker_order_id"),p=this.safeString(e,"taker_order_id");(void 0!==l||void 0!==f&&void 0!==p)&&(u="buy"===e.side?"buy":"sell");const m=this.safeString(e,"price"),y=this.safeString(e,"size"),b=this.parseNumber(m),v=this.parseNumber(y);return void 0===h&&(h=this.parseNumber(g.stringMul(m,y))),{id:d,order:l,info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,takerOrMaker:o,side:u,price:b,amount:v,fee:c,cost:h}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={product_id:r.id};void 0!==i&&(n.limit=i);const o=await this.privateGetFills(this.extend(n,s));return this.parseTrades(o,r,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={id:r.id};void 0!==i&&(a.limit=i);const n=await this.publicGetProductsIdTrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeNumber(e,3),this.safeNumber(e,2),this.safeNumber(e,1),this.safeNumber(e,4),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n=this.timeframes[t],o={id:a.id,granularity:n};void 0!==i&&(o.start=this.iso8601(i),s=void 0===s?300:Math.min(300,s),o.end=this.iso8601(this.sum((s-1)*n*1e3,i)));const h=await this.publicGetProductsIdCandles(this.extend(o,r));return this.parseOHLCVs(h,a,t,i,s)}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeTimestamp(t,"epoch")}parseOrderStatus(e){return this.safeString({pending:"open",active:"open",open:"open",done:"closed",canceled:"canceled",canceling:"open"},e,e)}parseOrder(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"product_id");t=this.safeMarket(s,t,"-");let r=this.parseOrderStatus(this.safeString(e,"status"));const a=this.safeString(e,"done_reason");"closed"===r&&"canceled"===a&&(r="canceled");const n=this.safeString(e,"price"),o=this.safeString(e,"filled_size"),h=this.safeString(e,"size",o),c=this.safeString(e,"executed_value"),d=this.safeNumber(e,"fill_fees");let u;if(void 0!==d){let e;void 0!==t&&(e=t.quote),u={cost:d,currency:e,rate:void 0}}const l=this.safeString(e,"id"),f=this.safeString(e,"type"),p=this.safeString(e,"side"),m=this.safeString(e,"time_in_force"),g=this.safeValue(e,"post_only"),y=this.safeNumber(e,"stop_price"),b=this.safeString(e,"client_oid");return this.safeOrder2({id:l,clientOrderId:b,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:r,symbol:t.symbol,type:f,timeInForce:m,postOnly:g,side:p,price:n,stopPrice:y,cost:c,amount:h,filled:o,remaining:void 0,fee:u,average:void 0,trades:void 0},t)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={},r=this.safeString2(i,"clientOrderId","client_oid");let a;void 0===r?(a="privateGetOrdersId",s.id=e):(a="privateGetOrdersClientClientOid",s.client_oid=r,i=this.omit(i,["clientOrderId","client_oid"]));const n=await this[a](this.extend(s,i));return this.parseOrder(n)}async fetchOrderTrades(e,t,i,s,r={}){let a;await this.loadMarkets(),void 0!==t&&(a=this.market(t));const n={order_id:e},o=await this.privateGetFills(this.extend(n,r));return this.parseTrades(o,a,i,s)}async fetchOrders(e,t,i,s={}){return await this.fetchOpenOrders(e,t,i,this.extend({status:"all"},s))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.product_id=a.id),void 0!==i&&(r.limit=i);const n=await this.privateGetOrders(this.extend(r,s));return this.parseOrders(n,a,t,i)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOpenOrders(e,t,i,this.extend({status:"done"},s))}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o={type:t,side:i,product_id:n.id},h=this.safeString2(a,"clientOrderId","client_oid");void 0!==h&&(o.client_oid=h);const c=this.safeNumber2(a,"stopPrice","stop_price");void 0!==c&&(o.stop_price=this.priceToPrecision(e,c));const d=this.safeString2(a,"timeInForce","time_in_force");if(void 0!==d&&(o.time_in_force=d),this.safeValue2(a,"postOnly","post_only",!1)&&(o.post_only=!0),a=this.omit(a,["timeInForce","time_in_force","stopPrice","stop_price","clientOrderId","client_oid","postOnly","post_only"]),"limit"===t)o.price=this.priceToPrecision(e,r),o.size=this.amountToPrecision(e,s);else if("market"===t){let t=this.safeNumber2(a,"cost","funds");void 0===t?void 0!==r&&(t=s*r):a=this.omit(a,["cost","funds"]),void 0!==t?o.funds=this.costToPrecision(e,t):o.size=this.amountToPrecision(e,s)}const u=await this.privatePostOrders(this.extend(o,a));return this.parseOrder(u,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={},r=this.safeString2(i,"clientOrderId","client_oid");let a,n;return void 0===r?(a="privateDeleteOrdersId",s.id=e):(a="privateDeleteOrdersClientClientOid",s.client_oid=r,i=this.omit(i,["clientOrderId","client_oid"])),void 0!==t&&(n=this.market(t),s.product_id=n.symbol),await this[a](this.extend(s,i))}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s;return void 0!==e&&(s=this.market(e),i.product_id=s.symbol),await this.privateDeleteOrders(this.extend(i,t))}async fetchPaymentMethods(e={}){return await this.privateGetPaymentMethods(e)}async deposit(e,t,i,s={}){await this.loadMarkets();const r={currency:this.currency(e).id,amount:t};let a="privatePostDeposits";if("payment_method_id"in s)a+="PaymentMethod";else{if(!("coinbase_account_id"in s))throw new d(this.id+" deposit() requires one of `coinbase_account_id` or `payment_method_id` extra params");a+="CoinbaseAccount"}const o=await this[a](this.extend(r,s));if(!o)throw new n(this.id+" deposit() error: "+this.json(o));return{info:o,id:o.id}}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,amount:t};let o="privatePostWithdrawals";"payment_method_id"in r?o+="PaymentMethod":"coinbase_account_id"in r?o+="CoinbaseAccount":(o+="Crypto",a.crypto_address=i,void 0!==s&&(a.destination_tag=s));const h=await this[o](this.extend(a,r));if(!h)throw new n(this.id+" withdraw() error: "+this.json(h));return{info:h,id:h.id}}parseLedgerEntryType(e){return this.safeString({transfer:"transfer",match:"trade",fee:"fee",rebate:"rebate",conversion:"trade"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"id");let s,r=this.safeString(e,"amount");const a=this.safeString(e,"balance"),n=g.stringSub(a,r);g.stringLt(r,"0")?(s="out",r=g.stringAbs(r)):s="in";const o=this.parseNumber(r),h=this.parseNumber(a),c=this.parseNumber(n),d=this.parse8601(this.safeValue(e,"created_at")),u=this.parseLedgerEntryType(this.safeString(e,"type")),l=this.safeCurrencyCode(void 0,t),f=this.safeValue(e,"details",{});let p,m,y;return"transfer"===u?(p=this.safeString(f,"from"),m=this.safeString(f,"to"),y=this.safeString(f,"profile_transfer_id")):y=this.safeString(f,"order_id"),{id:i,currency:l,account:p,referenceAccount:m,referenceId:y,status:"ok",amount:o,before:c,after:h,fee:void 0,direction:s,timestamp:d,datetime:this.iso8601(d),type:u,info:e}}async fetchLedger(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchLedger() requires a code param");await this.loadMarkets(),await this.loadAccounts();const r=this.currency(e),o=this.indexBy(this.accounts,"currency"),h=this.safeValue(o,e);if(void 0===h)throw new n(this.id+" fetchLedger() could not find account id for "+e);const c={id:h.id};void 0!==t&&(c.start_date=this.iso8601(t)),void 0!==i&&(c.limit=i);const d=await this.privateGetAccountsIdLedger(this.extend(c,s));for(let t=0;t<d.length;t++)d[t].currency=e;return this.parseLedger(d,r,t,i)}async fetchTransactions(e,t,i,s={}){let r;await this.loadMarkets(),await this.loadAccounts();let a=this.safeString(s,"id");if(void 0===a&&void 0!==e){r=this.currency(e);const t=this.indexBy(this.accounts,"currency"),i=this.safeValue(t,e);if(void 0===i)throw new n(this.id+" fetchTransactions() could not find account id for "+e);a=i.id}const o={};let h;if(void 0!==a&&(o.id=a),void 0!==i&&(o.limit=i),void 0===a){h=await this.privateGetTransfers(this.extend(o,s));for(let e=0;e<h.length;e++){const t=this.safeString(h[e],"account_id"),i=this.safeValue(this.accountsById,t),s=this.safeString(i,"currency");h[e].currency=s}}else{h=await this.privateGetAccountsIdTransfers(this.extend(o,s));for(let t=0;t<h.length;t++)h[t].currency=e}return this.parseTransactions(h,r,t,i)}async fetchDeposits(e,t,i,s={}){return this.fetchTransactions(e,t,i,this.extend({type:"deposit"},s))}async fetchWithdrawals(e,t,i,s={}){return this.fetchTransactions(e,t,i,this.extend({type:"withdraw"},s))}parseTransactionStatus(e){if(this.safeValue(e,"canceled_at"))return"canceled";const t=this.safeValue(e,"processed_at"),i=this.safeValue(e,"completed_at");return i?"ok":t&&!i?"failed":"pending"}parseTransaction(e,t){const i=this.safeValue(e,"details",{}),s=this.safeString(e,"id"),r=this.safeString(i,"crypto_transaction_hash"),a=this.parse8601(this.safeString(e,"created_at")),n=this.parse8601(this.safeString(e,"processed_at")),o=this.safeString(e,"currency"),h=this.safeCurrencyCode(o,t),c=this.parseTransactionStatus(e);let d=this.safeNumber(e,"amount"),u=this.safeString(e,"type"),l=this.safeString(i,"crypto_address");const f=this.safeString(i,"destination_tag");let p;if(l=this.safeString(e,"crypto_address",l),"withdraw"===u){u="withdrawal",l=this.safeString(i,"sent_to_address",l);const e=this.safeNumber(i,"fee");void 0!==e&&(void 0!==d&&(d-=e),p={cost:e,currency:h})}return{info:e,id:s,txid:r,timestamp:a,datetime:this.iso8601(a),address:l,tag:f,type:u,amount:d,currency:h,status:c,updated:n,fee:p}}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);let s=this.safeValue(this.options,"coinbaseAccounts");void 0===s&&(s=await this.privateGetCoinbaseAccounts(),this.options.coinbaseAccounts=s,this.options.coinbaseAccountsByCurrencyId=this.indexBy(s,"currency"));const r=i.id,a=this.safeValue(this.options.coinbaseAccountsByCurrencyId,r);if(void 0===a)throw new h(this.id+" fetchDepositAddress() could not find currency code "+e+" with id = "+r+" in this.options['coinbaseAccountsByCurrencyId']");const n={id:a.id},o=await this.privatePostCoinbaseAccountsIdAddresses(this.extend(n,t)),c=this.safeString(o,"address"),d=this.safeString(o,"destination_tag");return{currency:e,address:this.checkAddress(c),tag:d,info:o}}sign(e,t="public",i="GET",s={},r,a){let n="/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(o).length&&(n+="?"+this.urlencode(o));const h=this.implodeHostname(this.urls.api[t])+n;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();let t="";"GET"!==i&&Object.keys(o).length&&(t=a=this.json(o));const s=e+i+n+t;let h;try{h=this.base64ToBinary(this.secret)}catch(e){throw new c(this.id+" sign() invalid base64 secret")}const d=this.hmac(this.encode(s),h,"sha256","base64");r={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":d,"CB-ACCESS-TIMESTAMP":e,"CB-ACCESS-PASSPHRASE":this.password,"Content-Type":"application/json"}}return{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o,h,c){if(400===e||404===e){if("{"===a[0]){const e=this.safeString(o,"message"),t=this.id+" "+e;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new n(t)}throw new n(this.id+" "+a)}}async request(e,t="public",i="GET",s={},r,a,o={},h={}){const c=await this.fetch2(e,t,i,s,r,a,o,h);if("string"!=typeof c&&"message"in c)throw new n(this.id+" "+this.json(c));return c}}},51770:(e,t,i)=>{"use strict";const s=i(48819),{BadSymbol:r,ExchangeError:a,AuthenticationError:n}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coincheck",name:"coincheck",countries:["JP","ID"],rateLimit:1500,has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182088-1d6d6380-c2ec-11ea-9c64-8ab9f9b289f5.jpg",api:"https://coincheck.com/api",www:"https://coincheck.com",doc:"https://coincheck.com/documents/exchange/api",fees:["https://coincheck.com/exchange/fee","https://coincheck.com/info/fee"]},api:{public:{get:["exchange/orders/rate","order_books","rate/{pair}","ticker","trades"]},private:{get:["accounts","accounts/balance","accounts/leverage_balance","bank_accounts","deposit_money","exchange/orders/opens","exchange/orders/transactions","exchange/orders/transactions_pagination","exchange/leverage/positions","lending/borrows/matches","send_money","withdraws"],post:["bank_accounts","deposit_money/{id}/fast","exchange/orders","exchange/transfers/to_leverage","exchange/transfers/from_leverage","lending/borrows","lending/borrows/{id}/repay","send_money","withdraws"],delete:["bank_accounts/{id}","exchange/orders/{id}","withdraws/{id}"]}},markets:{"BTC/JPY":{id:"btc_jpy",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy",type:"spot",spot:!0},"ETC/JPY":{id:"etc_jpy",symbol:"ETC/JPY",base:"ETC",quote:"JPY",baseId:"etc",quoteId:"jpy",type:"spot",spot:!0},"FCT/JPY":{id:"fct_jpy",symbol:"FCT/JPY",base:"FCT",quote:"JPY",baseId:"fct",quoteId:"jpy",type:"spot",spot:!0},"MONA/JPY":{id:"mona_jpy",symbol:"MONA/JPY",base:"MONA",quote:"JPY",baseId:"mona",quoteId:"jpy",type:"spot",spot:!0},"ETC/BTC":{id:"etc_btc",symbol:"ETC/BTC",base:"ETC",quote:"BTC",baseId:"etc",quoteId:"btc",type:"spot",spot:!0}},fees:{trading:{tierBased:!1,percentage:!0,maker:this.parseNumber("0"),taker:this.parseNumber("0")}},exceptions:{exact:{"disabled API Key":n,"invalid authentication":n},broad:{}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountsBalance(e),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){const r=s[e],a=this.currency(r).id;if(a in t){const e=this.account(),s=a+"_reserved";e.free=this.safeString(t,a),e.used=this.safeString(t,s),i[r]=e}}return this.parseBalance(i)}async fetchOpenOrders(e,t,i,s={}){let r;await this.loadMarkets(),void 0!==e&&(r=this.market(e));const a=await this.privateGetExchangeOrdersOpens(s),n=this.safeValue(a,"orders",[]),o=this.parseOrders(n,r,t,i),h=[];for(let e=0;e<o.length;e++)h.push(this.extend(o[e],{status:"open"}));return h}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"order_type"),r=this.parse8601(this.safeString(e,"created_at")),a=this.safeString(e,"pending_amount"),n=this.safeString(e,"pending_amount"),o=this.safeString(e,"rate"),h=this.safeString(e,"pair"),c=this.safeSymbol(h,t,"_");return this.safeOrder2({id:i,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,amount:a,remaining:n,filled:void 0,side:s,type:void 0,timeInForce:void 0,postOnly:void 0,status:void 0,symbol:c,price:o,stopPrice:void 0,cost:void 0,fee:void 0,info:e,average:void 0,trades:void 0},t)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.market(e).id},r=await this.publicGetOrderBooks(this.extend(s,i));return this.parseOrderBook(r,e)}async fetchTicker(e,t={}){if("BTC/JPY"!==e)throw new r(this.id+" fetchTicker () supports BTC/JPY only");await this.loadMarkets();const i={pair:this.market(e).id},s=await this.publicGetTicker(this.extend(i,t)),a=this.safeTimestamp(s,"timestamp"),n=this.safeNumber(s,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeNumber(s,"high"),low:this.safeNumber(s,"low"),bid:this.safeNumber(s,"bid"),bidVolume:void 0,ask:this.safeNumber(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(s,"volume"),quoteVolume:void 0,info:s}}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"id"),r=this.safeString(e,"rate"),a=this.safeString(e,"pair");let n,o,h,c,d,u,l,f,p;if(t=this.safeValue(this.markets_by_id,a,t),void 0!==a)if(a in this.markets_by_id)o=(t=this.markets_by_id[a]).baseId,h=t.quoteId,n=t.symbol;else{const e=a.split("_");o=e[0],h=e[1],n=this.safeCurrencyCode(o)+"/"+this.safeCurrencyCode(h)}if(void 0===n&&void 0!==t&&(n=t.symbol),"liquidity"in e){"T"===this.safeString(e,"liquidity")?c="taker":"M"===this.safeString(e,"liquidity")&&(c="maker");const t=this.safeValue(e,"funds",{});d=this.safeString(t,o),u=this.safeString(t,h),f={currency:this.safeString(e,"fee_currency"),cost:this.safeString(e,"fee")},l=this.safeString(e,"side"),p=this.safeString(e,"order_id")}else d=this.safeString(e,"amount"),l=this.safeString(e,"order_type");return this.safeTrade({id:s,info:e,datetime:this.iso8601(i),timestamp:i,symbol:n,type:void 0,side:l,order:p,takerOrMaker:c,price:r,amount:d,cost:u,fee:f},t)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a=await this.privateGetExchangeOrdersTransactions(this.extend({},s)),n=this.safeValue(a,"transactions",[]);return this.parseTrades(n,r,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id};void 0!==i&&(a.limit=i);const n=await this.publicGetTrades(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n={pair:this.marketId(e)};if("market"===t){const e=t+"_"+i;n.order_type=e,n[("buy"===i?e+"_":"")+"amount"]=s}else n.order_type=i,n.rate=r,n.amount=s;const o=await this.privatePostExchangeOrders(this.extend(n,a));return{info:o,id:this.safeString(o,"id")}}async cancelOrder(e,t,i={}){const s={id:e};return await this.privateDeleteExchangeOrdersId(this.extend(s,i))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();const e=this.nonce().toString();let t="";"GET"===i?Object.keys(o).length&&(n+="?"+this.urlencode(this.keysort(o))):Object.keys(o).length&&(t=a=this.urlencode(this.keysort(o)));const s=e+n+t;r={"Content-Type":"application/x-www-form-urlencoded","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":e,"ACCESS-SIGNATURE":this.hmac(this.encode(s),this.encode(this.secret))}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,n,o,h,c){if(void 0!==o&&!this.safeValue(o,"success",!0)){const e=this.safeString(o,"error"),t=this.id+" "+this.json(o);throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,n,t),new a(this.id+" "+this.json(o))}}}},78427:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,InsufficientFunds:n,OrderNotFound:o,InvalidOrder:h,AuthenticationError:c,PermissionDenied:d,ExchangeNotAvailable:u,RequestTimeout:l}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinex",name:"CoinEx",version:"v1",countries:["CN"],rateLimit:1e3,has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182089-1e05fa00-c2ec-11ea-8da9-cc73b45abbbc.jpg",api:{public:"https://api.coinex.com",private:"https://api.coinex.com",perpetualPublic:"https://api.coinex.com/perpetual",perpetualPrivate:"https://api.coinex.com/perpetual"},www:"https://www.coinex.com",doc:"https://github.com/coinexcom/coinex_exchange_api/wiki",fees:"https://www.coinex.com/fees",referral:"https://www.coinex.com/register?refer_code=yw5fz"},api:{public:{get:["common/currency/rate","common/asset/config","market/info","market/list","market/ticker","market/ticker/all","market/depth","market/deals","market/kline"]},private:{get:["balance/coin/deposit","balance/coin/withdraw","balance/info","future/account","future/config","future/limitprice","future/loan/history","future/market","margin/account","margin/config","margin/loan/history","margin/market","order","order/deals","order/finished","order/finished/{id}","order/pending","order/status","order/status/batch","order/user/deals","sub_account/balance","sub_account/transfer/history"],post:["balance/coin/withdraw","future/flat","future/loan","future/transfer","margin/flat","margin/loan","margin/transfer","order/batchlimit","order/ioc","order/limit","order/market","sub_account/transfer"],delete:["balance/coin/withdraw","order/pending/batch","order/pending"]},perpetualPublic:{get:["ping","time","market/list","market/limit_config","market/ticker","market/ticker/all","market/depth","market/deals","market/funding_history","market/user_deals","market/kline"]},perpetualPrivate:{get:["asset/query","order/pending","order/finished","order/stop_pending","order/status","position/pending","position/funding"],post:["market/adjust_leverage","market/position_expect","order/put_limit","order/put_market","order/put_stop_limit","order/cancel","order/cancel_all","order/cancel_stop","order/cancel_stop_all","order/close_limit","order/close_market","position/adjust_margin"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BCH:0,BTC:.001,LTC:.001,ETH:.001,ZEC:1e-4,DASH:1e-4}}},limits:{amount:{min:.001,max:void 0}},precision:{amount:8,price:8},options:{createMarketBuyOrderRequiresPrice:!0},commonCurrencies:{ACM:"Actinium"}})}async fetchMarkets(e={}){const t=await this.publicGetMarketInfo(e),i=this.safeValue(t,"data",{}),s=[],r=Object.keys(i);for(let e=0;e<r.length;e++){const t=i[r[e]],a=this.safeString(t,"name"),n=this.safeString(t,"trading_name"),o=n,h=this.safeString(t,"pricing_name"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(h);let u=c+"/"+d;n===a&&(u=a);const l={amount:this.safeInteger(t,"trading_decimal"),price:this.safeInteger(t,"pricing_decimal")},f=void 0;s.push({id:a,symbol:u,base:c,quote:d,baseId:o,quoteId:h,type:"spot",spot:!0,active:f,taker:this.safeNumber(t,"taker_fee_rate"),maker:this.safeNumber(t,"maker_fee_rate"),info:t,precision:l,limits:{amount:{min:this.safeNumber(t,"min_amount"),max:void 0},price:{min:Math.pow(10,-l.price),max:void 0}}})}return s}parseTicker(e,t){const i=this.safeInteger(e,"date");let s;void 0!==t&&(s=t.symbol),e=this.safeValue(e,"ticker",{});const r=this.safeNumber(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber2(e,"vol","volume"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.publicGetMarketTicker(this.extend(s,t));return this.parseTicker(r.data,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketTickerAll(t),s=this.safeValue(i,"data"),r=this.safeInteger(s,"date"),a=this.safeValue(s,"ticker"),n=Object.keys(a),o={};for(let e=0;e<n.length;e++){const t=n[e],i=this.safeMarket(t),s=i.symbol,h=this.parseTicker({date:r,ticker:a[t]},i);h.symbol=s,o[s]=h}return this.filterByArray(o,"symbol",e)}async fetchOrderBook(e,t=20,i={}){await this.loadMarkets(),void 0===t&&(t=20);const s={market:this.marketId(e),merge:"0.0000000001",limit:t.toString()},r=await this.publicGetMarketDepth(this.extend(s,i));return this.parseOrderBook(r.data,e)}parseTrade(e,t){let i=this.safeTimestamp(e,"create_time");void 0===i&&(i=this.safeInteger(e,"date_ms"));const s=this.safeString(e,"id"),r=this.safeString(e,"order_id"),a=this.safeString(e,"price"),n=this.safeString(e,"amount"),o=this.safeString(e,"market"),h=this.safeSymbol(o,t),c=this.safeString(e,"deal_money");let d;const u=this.safeString(e,"fee");if(void 0!==u){const t=this.safeString(e,"fee_asset");d={cost:u,currency:this.safeCurrencyCode(t)}}const l=this.safeString(e,"role"),f=this.safeString(e,"type");return this.safeTrade({info:e,timestamp:i,datetime:this.iso8601(i),symbol:h,id:s,order:r,type:void 0,side:f,takerOrMaker:l,price:a,amount:n,cost:c,fee:d},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id},n=await this.publicGetMarketDeals(this.extend(a,s));return this.parseTrades(n.data,r,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,2),this.safeNumber(e,5)]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={market:a.id,type:this.timeframes[t]};void 0!==s&&(n.limit=s);const o=await this.publicGetMarketKline(this.extend(n,r)),h=this.safeValue(o,"data",[]);return this.parseOHLCVs(h,a,t,i,s)}async fetchMarginBalance(e={}){await this.loadMarkets();const t=this.safeString(e,"symbol");let i,s=this.safeString(e,"market");if(void 0!==t)i=this.market(t),s=i.id;else if(void 0===s)throw new a(this.id+" fetching a margin account requires a market parameter or a symbol parameter");e=this.omit(e,["symbol","market"]);const r={market:s},n=await this.privateGetMarginAccount(this.extend(r,e)),o={info:n},h=this.safeValue(n,"data",{}),c=this.safeValue(h,"can_transfer",{}),d=this.safeValue(h,"balance",{}),u=this.account(),l=this.safeString(h,"sell_asset_type"),f=this.safeCurrencyCode(l);u.free=this.safeString(c,"sell_type"),u.total=this.safeString(d,"sell_type"),o[f]=u;const p=this.account(),m=this.safeString(h,"buy_asset_type"),g=this.safeCurrencyCode(m);return p.free=this.safeString(c,"buy_type"),p.total=this.safeString(d,"buy_type"),o[g]=p,this.parseBalance(o)}async fetchSpotBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalanceInfo(e),i={info:t},s=this.safeValue(t,"data",{}),r=Object.keys(s);for(let e=0;e<r.length;e++){const t=r[e],a=this.safeCurrencyCode(t),n=this.safeValue(s,t,{}),o=this.account();o.free=this.safeString(n,"available"),o.used=this.safeString(n,"frozen"),i[a]=o}return this.parseBalance(i)}async fetchBalance(e={}){const t=this.safeString(e,"type","main");return e=this.omit(e,"type"),"margin"===t?await this.fetchMarginBalance(e):await this.fetchSpotBalance(e)}parseOrderStatus(e){return this.safeString({not_deal:"open",part_deal:"open",done:"closed",cancel:"canceled"},e,e)}parseOrder(e,t){const i=this.safeTimestamp(e,"create_time"),s=this.safeString(e,"price"),r=this.safeString(e,"deal_money"),a=this.safeString(e,"amount"),n=this.safeString(e,"deal_amount"),o=this.safeString(e,"avg_price"),h=this.safeString(e,"left");let c;const d=this.safeString(e,"market");t=this.safeMarket(d,t);const u=this.safeString(e,"fee_asset");let l=this.safeCurrencyCode(u);void 0!==t&&(c=t.symbol,void 0===l&&(l=t.quote));const f=this.parseOrderStatus(this.safeString(e,"status")),p=this.safeString(e,"order_type"),m=this.safeString(e,"type");return this.safeOrder2({id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:f,symbol:c,type:p,timeInForce:void 0,postOnly:void 0,side:m,price:s,stopPrice:void 0,cost:r,average:o,amount:a,filled:n,remaining:h,trades:void 0,fee:{currency:l,cost:this.safeString(e,"deal_fee")},info:e},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n="privatePostOrder"+this.capitalize(t),o=this.market(e),c={market:o.id,type:i};if("market"===t&&"buy"===i)if(this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new h(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");c.amount=this.costToPrecision(e,s*r)}else c.amount=this.costToPrecision(e,s);else c.amount=this.amountToPrecision(e,s);"limit"!==t&&"ioc"!==t||(c.price=this.priceToPrecision(e,r));const d=await this[n](this.extend(c,a)),u=this.safeValue(d,"data");return this.parseOrder(u,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),r={id:e,market:s.id},a=await this.privateDeleteOrderPending(this.extend(r,i)),n=this.safeValue(a,"data");return this.parseOrder(n,s)}async cancelAllOrders(e,t={}){if(void 0===e)throw new a(this.id+" cancellAllOrders() requires a symbol argument");await this.loadMarkets();const i=this.market(e).id,s={account_id:this.safeString(t,"id","0"),market:i};return await this.privateDeleteOrderPending(this.extend(s,t))}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={id:e,market:s.id},n=await this.privateGetOrder(this.extend(r,i)),o=this.safeValue(n,"data");return this.parseOrder(o,s)}async fetchOrdersByStatus(e,t,i,s,r={}){await this.loadMarkets(),void 0===s&&(s=100);const a={page:1,limit:s};let n;void 0!==t&&(n=this.market(t),a.market=n.id);const o="privateGetOrder"+this.capitalize(e),h=await this[o](this.extend(a,r)),c=this.safeValue(h,"data"),d=this.safeValue(c,"data",[]);return this.parseOrders(d,n,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("pending",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("finished",e,t,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets(),void 0===i&&(i=100);const r={page:1,limit:i};let a;void 0!==e&&(a=this.market(e),r.market=a.id);const n=await this.privateGetOrderUserDeals(this.extend(r,s)),o=this.safeValue(n,"data"),h=this.safeValue(o,"data",[]);return this.parseTrades(h,a,t,i)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e);s&&(i=i+":"+s);const n={coin_type:a.id,coin_address:i,actual_amount:parseFloat(t),transfer_method:"onchain"},o=await this.privatePostBalanceCoinWithdraw(this.extend(n,r)),h=this.safeValue(o,"data",{});return this.parseTransaction(h,a)}parseTransactionStatus(e){return this.safeString({audit:"pending",pass:"pending",processing:"pending",confirming:"pending",not_pass:"failed",cancel:"canceled",finish:"ok",fail:"failed"},e,e)}parseTransaction(e,t){const i=this.safeString2(e,"coin_withdraw_id","coin_deposit_id"),s=this.safeString(e,"coin_address");let r=this.safeString(e,"remark");void 0!==r&&r.length<1&&(r=void 0);let a=this.safeValue(e,"tx_id");void 0!==a&&a.length<1&&(a=void 0);const n=this.safeString(e,"coin_type"),o=this.safeCurrencyCode(n,t),h=this.safeTimestamp(e,"create_time"),c="coin_withdraw_id"in e?"withdraw":"deposit",d=this.parseTransactionStatus(this.safeString(e,"status"));let u=this.safeNumber(e,"amount"),l=this.safeNumber(e,"tx_fee");"deposit"===c&&(l=0);const f={cost:l,currency:o};return void 0!==u&&(u-=l),{info:e,id:i,txid:a,timestamp:h,datetime:this.iso8601(h),address:s,tag:r,type:c,amount:u,currency:o,status:d,updated:void 0,fee:f}}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchWithdrawals() requires a currency code argument");await this.loadMarkets();const r=this.currency(e),n={coin_type:r.id};void 0!==i&&(n.Limit=i);const o=await this.privateGetBalanceCoinWithdraw(this.extend(n,s));let h=this.safeValue(o,"data");return Array.isArray(h)||(h=this.safeValue(h,"data",[])),this.parseTransactions(h,r,t,i)}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchDeposits() requires a currency code argument");await this.loadMarkets();const r=this.currency(e),n={coin_type:r.id};void 0!==i&&(n.Limit=i);const o=await this.privateGetBalanceCoinDeposit(this.extend(n,s));let h=this.safeValue(o,"data");return Array.isArray(h)||(h=this.safeValue(h,"data",[])),this.parseTransactions(h,r,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){e=this.implodeParams(e,s);let n=this.urls.api[t]+"/"+this.version+"/"+e,o=this.omit(s,this.extractParams(e));if("public"===t||"perpetualPublic"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();const e=this.nonce();o=this.extend({access_id:this.apiKey,tonce:e.toString()},o),o=this.keysort(o);const t=this.rawencode(o);r={Authorization:this.hash(this.encode(t+"&secret_key="+this.secret)).toUpperCase(),"Content-Type":"application/json"},"GET"===i||"DELETE"===i?n+="?"+t:a=this.json(o)}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,f,p,m,g){if(void 0===p)return;const y=this.safeString(p,"code"),b=this.safeValue(p,"data"),v=this.safeString(p,"message");if("0"!==y||"Success"!==v&&"Succeeded"!==v&&"Ok"!==v&&!b){const e={23:d,24:c,25:c,34:c,35:u,36:l,107:n,600:o,601:h,602:h,606:h};throw new(this.safeValue(e,y,r))(p.message)}}}},56810:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,AuthenticationError:a,RateLimitExceeded:n,ArgumentsRequired:o}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinfalcon",name:"CoinFalcon",countries:["GB"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/41822275-ed982188-77f5-11e8-92bb-496bcd14ca52.jpg",api:"https://coinfalcon.com",www:"https://coinfalcon.com",doc:"https://docs.coinfalcon.com",fees:"https://coinfalcon.com/fees",referral:"https://coinfalcon.com/?ref=CFJSVGTUPASB"},api:{public:{get:["markets","markets/{market}","markets/{market}/orders","markets/{market}/trades"]},private:{get:["user/accounts","user/orders","user/orders/{id}","user/orders/{id}/trades","user/trades","user/fees","account/withdrawals/{id}","account/withdrawals","account/deposit/{id}","account/deposits","account/deposit_address"],post:["user/orders","account/withdraw"],delete:["user/orders/{id}","account/withdrawals/{id}"]}},fees:{trading:{tierBased:!0,maker:0,taker:.002}},precision:{amount:8,price:8}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=this.safeValue(t,"data"),s=[];for(let e=0;e<i.length;e++){const t=i[e],[r,a]=t.name.split("-"),n=this.safeCurrencyCode(r),o=this.safeCurrencyCode(a),h=n+"/"+o,c={amount:this.safeInteger(t,"size_precision"),price:this.safeInteger(t,"price_precision")};s.push({id:t.name,symbol:h,base:n,quote:o,baseId:r,quoteId:a,type:"spot",spot:!0,active:!0,precision:c,limits:{amount:{min:Math.pow(10,-c.amount),max:void 0},price:{min:Math.pow(10,-c.price),max:void 0},cost:{min:void 0,max:void 0}},info:t})}return s}parseTicker(e,t){const i=this.safeString(e,"name"),s=this.safeSymbol(i,t,"-"),r=this.milliseconds(),a=this.safeNumber(e,"last_price");return{symbol:s,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:this.safeNumber(e,"change_in_24h"),percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeNumber(e,"volume"),info:e}}async fetchTicker(e,t={}){return await this.loadMarkets(),(await this.fetchTickers(t))[e]}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarkets(t),s=this.safeValue(i,"data"),r={};for(let e=0;e<s.length;e++){const t=this.parseTicker(s[e]);r[t.symbol]=t}return this.filterByArray(r,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.marketId(e),level:"3"},r=await this.publicGetMarketsMarketOrders(this.extend(s,i)),a=this.safeValue(r,"data",{});return this.parseOrderBook(a,e,void 0,"bids","asks","price","size")}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"price"),r=this.safeString(e,"size"),a=t.symbol,n=this.safeString(e,"id"),o=this.safeString(e,"side"),h=this.safeString(e,"order_id");let c;const d=this.safeString(e,"fee");if(void 0!==d){const t=this.safeString(e,"fee_currency_code");c={cost:d,currency:this.safeCurrencyCode(t)}}return this.safeTrade({info:e,timestamp:i,datetime:this.iso8601(i),symbol:a,id:n,order:h,type:void 0,side:o,takerOrMaker:void 0,price:s,amount:r,cost:void 0,fee:c},t)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==t&&(a.start_time=this.iso8601(t)),void 0!==i&&(a.limit=i);const n=await this.privateGetUserTrades(this.extend(a,s)),h=this.safeValue(n,"data",[]);return this.parseTrades(h,r,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==t&&(a.since=this.iso8601(t));const n=await this.publicGetMarketsMarketTrades(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseTrades(o,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUserAccounts(e),i={info:t},s=this.safeValue(t,"data");for(let e=0;e<s.length;e++){const t=s[e],r=this.safeString(t,"currency_code"),a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(t,"available_balance"),n.used=this.safeString(t,"hold_balance"),n.total=this.safeString(t,"balance"),i[a]=n}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({fulfilled:"closed",canceled:"canceled",pending:"open",open:"open",partially_filled:"open"},e,e)}parseOrder(e,t){const i=this.safeString(e,"market"),s=this.safeSymbol(i,t,"-"),r=this.parse8601(this.safeString(e,"created_at")),a=this.safeString(e,"price"),n=this.safeString(e,"size"),o=this.safeString(e,"size_filled"),h=this.parseOrderStatus(this.safeString(e,"status"));let c=this.safeString(e,"operation_type");void 0!==c&&(c=c.split("_"),c=c[0]);const d=this.safeString(e,"order_type"),u=this.safeValue(e,"post_only");return this.safeOrder2({id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,status:h,symbol:s,type:c,timeInForce:void 0,postOnly:u,side:d,price:a,stopPrice:void 0,cost:void 0,amount:n,filled:o,remaining:void 0,trades:void 0,fee:void 0,info:e,lastTradeTimestamp:void 0,average:void 0},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o={market:n.id,size:this.amountToPrecision(e,s),order_type:i};"limit"===t&&(r=this.priceToPrecision(e,r),o.price=r.toString()),o.operation_type=t+"_order";const h=await this.privatePostUserOrders(this.extend(o,a)),c=this.safeValue(h,"data",{});return this.parseOrder(c,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateDeleteUserOrdersId(this.extend(s,i)),a=this.market(t),n=this.safeValue(r,"data",{});return this.parseOrder(n,a)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetUserOrdersId(this.extend(s,i)),a=this.safeValue(r,"data",{});return this.parseOrder(a)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.market=a.id),void 0!==t&&(r.since_time=this.iso8601(t));const n=await this.privateGetUserOrders(this.extend(r,s)),o=this.safeValue(n,"data",[]),h=this.filterByArray(o,"status",["pending","open","partially_filled"],!1);return this.parseOrders(h,a,t,i)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id.toLowerCase()),void 0!==t&&(r.since_time=this.iso8601(t));const n=await this.privateGetAccountDeposits(this.extend(r,s)),o=this.safeValue(n,"data",[]);return o.reverse(),this.parseTransactions(o,a,void 0,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id.toLowerCase()),void 0!==t&&(r.since_time=this.iso8601(t));const n=await this.privateGetAccountWithdrawals(this.extend(r,s)),o=this.safeValue(n,"data",[]);return o.reverse(),this.parseTransactions(o,a,void 0,i)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),n={currency:a.id.toLowerCase(),address:i,amount:t};void 0!==s&&(n.tag=s);const o=await this.privatePostAccountWithdraw(this.extend(n,r)),h=this.safeValue(o,"data",[]);return this.parseTransaction(h,a)}parseTransactionStatus(e){return this.safeString({completed:"ok",denied:"failed",approval_pending:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address"),r=this.safeString(e,"tag"),a=this.safeString(e,"txid"),n=this.safeString(e,"currency_code"),o=this.safeCurrencyCode(n,t);let h=this.safeString(e,"type");"withdraw"===h&&(h="withdrawal");const c=this.parseTransactionStatus(this.safeString(e,"status")),d=this.safeString(e,"amount"),u=this.parseNumber(d),l=this.safeString(e,"fee");let f=0;return void 0!==l&&(f=this.parseNumber(l)),{info:e,id:i,txid:a,timestamp:void 0,datetime:void 0,address:s,tag:r,type:h,amount:u,currency:o,status:c,updated:void 0,fee:{currency:o,cost:f}}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n="/api/"+this.version+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),"GET"===i?Object.keys(o).length&&(n+="?"+this.urlencode(o)):a=this.json(o);const e=this.seconds().toString();let t=[e,i,n].join("|");a&&(t+="|"+a);const s=this.hmac(this.encode(t),this.encode(this.secret));r={"CF-API-KEY":this.apiKey,"CF-API-TIMESTAMP":e,"CF-API-SIGNATURE":s,"Content-Type":"application/json"}}return{url:this.urls.api+n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,o,h,c,d,u){if(!(e<400))throw new(this.safeValue({401:a,429:n},e,r))(h)}}},70948:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,InvalidOrder:n,OrderNotFound:o,RateLimitExceeded:h,InsufficientFunds:c,AuthenticationError:d}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinmate",name:"CoinMate",countries:["GB","CZ","EU"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,fetchTransactions:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87460806-1c9f3f00-c616-11ea-8c46-a77018a8f3f4.jpg",api:"https://coinmate.io/api",www:"https://coinmate.io",fees:"https://coinmate.io/fees",doc:["https://coinmate.docs.apiary.io","https://coinmate.io/developers"],referral:"https://coinmate.io?referral=YTFkM1RsOWFObVpmY1ZjMGREQmpTRnBsWjJJNVp3PT0"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["orderBook","ticker","transactions","tradingPairs"]},private:{post:["balances","bitcoinCashWithdrawal","bitcoinCashDepositAddresses","bitcoinDepositAddresses","bitcoinWithdrawal","bitcoinWithdrawalFees","buyInstant","buyLimit","cancelOrder","cancelOrderWithInfo","createVoucher","dashDepositAddresses","dashWithdrawal","ethereumWithdrawal","ethereumDepositAddresses","litecoinWithdrawal","litecoinDepositAddresses","openOrders","order","orderHistory","orderById","pusherAuth","redeemVoucher","replaceByBuyLimit","replaceByBuyInstant","replaceBySellLimit","replaceBySellInstant","rippleDepositAddresses","rippleWithdrawal","sellInstant","sellLimit","transactionHistory","traderFees","tradeHistory","transfer","transferHistory","unconfirmedBitcoinDeposits","unconfirmedBitcoinCashDeposits","unconfirmedDashDeposits","unconfirmedEthereumDeposits","unconfirmedLitecoinDeposits","unconfirmedRippleDeposits"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.0012,taker:.0025,tiers:{taker:[[0,.0025],[1e4,.0023],[1e5,.0021],[25e4,.002],[5e5,.0015],[1e6,.0013],[3e6,.001],[15e6,5e-4]],maker:[[0,.0012],[1e4,.0011],[1e6,.001],[25e4,8e-4],[5e5,5e-4],[1e6,3e-4],[3e6,2e-4],[15e6,0]]}},promotional:{trading:{maker:5e-4,taker:.0015,tiers:{taker:[[0,.0015],[1e4,.14/100],[1e5,.0013],[25e4,.0012],[5e5,.0011],[1e6,.001],[3e6,8e-4],[15e6,5e-4]],maker:[[0,5e-4],[1e4,4e-4],[1e6,3e-4],[25e4,2e-4],[5e5,0],[1e6,0],[3e6,0],[15e6,0]]}}}},options:{promotionalMarkets:["ETH/EUR","ETH/CZK","ETH/BTC","XRP/EUR","XRP/CZK","XRP/BTC","DASH/EUR","DASH/CZK","DASH/BTC","BCH/EUR","BCH/CZK","BCH/BTC"]},exceptions:{exact:{"No order with given ID":o},broad:{"Not enough account balance available":c,"Incorrect order ID":n,"Minimum Order Size ":n,"TOO MANY REQUESTS":h,"Access denied.":d}}})}async fetchMarkets(e={}){const t=await this.publicGetTradingPairs(e),i=this.safeValue(t,"data"),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"name"),a=this.safeString(t,"firstCurrency"),n=this.safeString(t,"secondCurrency"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c=o+"/"+h,d=this.safeValue(this.options,"promotionalMarkets",[]);let u=this.safeValue(this.fees,"trading");if(this.inArray(c,d)){const e=this.safeValue(this.fees,"promotional",{});u=this.safeValue(e,"trading",u)}s.push({id:r,symbol:c,base:o,quote:h,baseId:a,quoteId:n,type:"spot",spot:!0,active:void 0,maker:u.maker,taker:u.taker,info:t,precision:{price:this.safeInteger(t,"priceDecimals"),amount:this.safeInteger(t,"lotDecimals")},limits:{amount:{min:this.safeNumber(t,"minAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalances(e),i=this.safeValue(t,"data"),s={info:t},r=Object.keys(i);for(let e=0;e<r.length;e++){const t=r[e],a=this.safeCurrencyCode(t),n=this.safeValue(i,t),o=this.account();o.free=this.safeString(n,"available"),o.used=this.safeString(n,"reserved"),o.total=this.safeString(n,"balance"),s[a]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currencyPair:this.marketId(e),groupByPriceLimit:"False"},r=(await this.publicGetOrderBook(this.extend(s,i))).data,a=this.safeTimestamp(r,"timestamp");return this.parseOrderBook(r,e,a,"bids","asks","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();const i={currencyPair:this.marketId(e)},s=await this.publicGetTicker(this.extend(i,t)),r=this.safeValue(s,"data"),a=this.safeTimestamp(r,"timestamp"),n=this.safeNumber(r,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeNumber(r,"high"),low:this.safeNumber(r,"low"),bid:this.safeNumber(r,"bid"),bidVolume:void 0,ask:this.safeNumber(r,"ask"),vwap:void 0,askVolume:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(r,"amount"),quoteVolume:void 0,info:r}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={limit:1e3};if(void 0!==i&&(r.limit=i),void 0!==t&&(r.timestampFrom=t),void 0!==e){const t=this.currency(e);r.currency=t.id}const a=(await this.privatePostTransferHistory(this.extend(r,s))).data;return this.parseTransactions(a,void 0,t,i)}parseTransactionStatus(e){return this.safeString({COMPLETED:"ok"},e,e)}parseTransaction(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeNumber(e,"amount"),r=this.safeNumber(e,"fee"),a=this.safeString(e,"txid"),n=this.safeString(e,"destination"),o=this.safeString(e,"destinationTag"),h=this.safeString(e,"amountCurrency"),c=this.safeCurrencyCode(h,t),d=this.safeStringLower(e,"transferType"),u=this.parseTransactionStatus(this.safeString(e,"transferStatus"));return{id:this.safeString(e,"transactionId"),timestamp:i,datetime:this.iso8601(i),currency:c,amount:s,type:d,txid:a,address:n,tag:o,status:u,fee:{cost:r,currency:c},info:e}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets(),void 0===i&&(i=1e3);const r={limit:i};if(void 0!==e){const t=this.market(e);r.currencyPair=t.id}void 0!==t&&(r.timestampFrom=t);const a=(await this.privatePostTradeHistory(this.extend(r,s))).data;return this.parseTrades(a,void 0,t,i)}parseTrade(e,t){const i=this.safeString(e,"currencyPair");t=this.safeMarket(i,t,"_");const s=this.safeString(e,"price"),r=this.safeString(e,"amount"),a=this.safeStringLower2(e,"type","tradeType"),n=this.safeStringLower(e,"orderType"),o=this.safeString(e,"orderId"),h=this.safeString(e,"transactionId"),c=this.safeInteger2(e,"timestamp","createdTimestamp");let d;const u=this.safeString(e,"fee");void 0!==u&&(d={cost:u,currency:t.quote});let l=this.safeString(e,"feeType");return l="MAKER"===l?"maker":"taker",this.safeTrade({id:h,info:e,timestamp:c,datetime:this.iso8601(c),symbol:t.symbol,type:n,side:a,order:o,takerOrMaker:l,price:s,amount:r,cost:void 0,fee:d},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currencyPair:r.id,minutesIntoHistory:10},n=await this.publicGetTransactions(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseTrades(o,r,t,i)}async fetchOpenOrders(e,t,i,s={}){const r=await this.privatePostOpenOrders(this.extend({},s));return this.parseOrders(r.data,void 0,t,i,{status:"open"})}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={currencyPair:r.id};void 0!==i&&(n.limit=i);const o=await this.privatePostOrderHistory(this.extend(n,s));return this.parseOrders(o.data,r,t,i)}parseOrderStatus(e){return this.safeString({FILLED:"closed",CANCELLED:"canceled",PARTIALLY_FILLED:"open",OPEN:"open"},e,e)}parseOrderType(e){return this.safeString({LIMIT:"limit",MARKET:"market"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeInteger(e,"timestamp"),r=this.safeStringLower(e,"type"),a=this.safeString(e,"price"),n=this.safeString(e,"originalAmount"),o=this.safeString2(e,"remainingAmount","amount"),h=this.parseOrderStatus(this.safeString(e,"status")),c=this.parseOrderType(this.safeString(e,"orderTradeType")),d=this.safeString(e,"avgPrice"),u=this.safeString(e,"currencyPair"),l=this.safeSymbol(u,t,"_"),f=this.safeString(e,"clientOrderId"),p=this.safeNumber(e,"stopPrice");return this.safeOrder2({id:i,clientOrderId:f,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:l,type:c,timeInForce:void 0,postOnly:void 0,side:r,price:a,stopPrice:p,amount:n,cost:void 0,average:d,filled:void 0,remaining:o,status:h,trades:void 0,info:e,fee:void 0},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let n="privatePost"+this.capitalize(i);const o={currencyPair:this.marketId(e)};"market"===t?("buy"===i?o.total=this.amountToPrecision(e,s):o.amount=this.amountToPrecision(e,s),n+="Instant"):(o.amount=this.amountToPrecision(e,s),o.price=this.priceToPrecision(e,r),n+=this.capitalize(t));const h=await this[n](this.extend(o,a));return{info:h,id:this.safeString(h,"data")}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e};let r;t&&(r=this.market(t));const a=await this.privatePostOrderById(this.extend(s,i)),n=this.safeValue(a,"data");return this.parseOrder(n,r)}async cancelOrder(e,t,i={}){const s={orderId:e};return{info:await this.privatePostCancelOrderWithInfo(this.extend(s,i))}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api+"/"+e;if("public"===t)Object.keys(s).length&&(n+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));a=this.urlencode(this.extend({clientId:this.uid,nonce:e,publicKey:this.apiKey,signature:i.toUpperCase()},s)),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o&&"error"in o&&o.error){const e=this.safeString(o,"errorMessage"),t=this.id+" "+e;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new r(this.id+" "+this.json(o))}if(e>400){if(n){const e=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,n,e),this.throwBroadlyMatchedException(this.exceptions.broad,n,e),new r(e)}throw new r(this.id+" "+n)}}}},69261:(e,t,i)=>{"use strict";const s=i(48819),{BadSymbol:r,BadRequest:a,ExchangeError:n,ArgumentsRequired:o,OrderNotFound:h,OnMaintenance:c}=i(73449),d=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinone",name:"CoinOne",countries:["KR"],rateLimit:667,version:"v2",has:{cancelOrder:!0,CORS:void 0,createMarketOrder:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:void 0,fetchDepositAddresses:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/38003300-adc12fba-323f-11e8-8525-725f53c4a659.jpg",api:"https://api.coinone.co.kr",www:"https://coinone.co.kr",doc:"https://doc.coinone.co.kr"},requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["orderbook/","trades/","ticker/"]},private:{post:["account/deposit_address/","account/btc_deposit_address/","account/balance/","account/daily_balance/","account/user_info/","account/virtual_account/","order/cancel_all/","order/cancel/","order/limit_buy/","order/limit_sell/","order/complete_orders/","order/limit_orders/","order/order_info/","transaction/auth_number/","transaction/history/","transaction/krw/history/","transaction/btc/","transaction/coin/"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002}},precision:{price:4,amount:4,cost:8},exceptions:{405:c,104:h,108:r,107:a},commonCurrencies:{SOC:"Soda Coin"}})}async fetchMarkets(e={}){const t=await this.publicGetTicker({currency:"all"}),i=[],s=this.safeCurrencyCode("krw"),r=Object.keys(t);for(let e=0;e<r.length;e++){const a=r[e],n=this.safeValue(t,a,{});if(void 0===this.safeValue(n,"currency"))continue;const o=this.safeCurrencyCode(a);i.push({info:n,id:a,symbol:o+"/"+s,base:o,quote:s,baseId:a,quoteId:"krw",type:"spot",spot:!0,active:!0})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostAccountBalance(e),i={info:t},s=this.omit(t,["errorCode","result","normalWallets"]),r=Object.keys(s);for(let e=0;e<r.length;e++){const t=r[e],a=s[t],n=this.safeCurrencyCode(t),o=this.account();o.free=this.safeString(a,"avail"),o.total=this.safeString(a,"balance"),i[n]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currency:this.market(e).id,format:"json"},r=await this.publicGetOrderbook(this.extend(s,i)),a=this.safeTimestamp(r,"timestamp");return this.parseOrderBook(r,e,a,"bid","ask","price","qty")}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(this.extend({currency:"all",format:"json"},t)),s={},r=Object.keys(i),a=this.safeTimestamp(i,"timestamp");for(let e=0;e<r.length;e++){const t=r[e];let n,o=t;if(t in this.markets_by_id){n=this.markets_by_id[t],o=n.symbol;const e=i[t];s[o]=this.parseTicker(e,n),s[o].timestamp=a}}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={currency:i.id,format:"json"},r=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(r,i)}parseTicker(e,t){const i=this.safeTimestamp(e,"timestamp"),s=this.safeNumber(e,"first"),r=this.safeNumber(e,"last"),a=this.safeNumber(e,"yesterday_last"),n=this.safeSymbol(void 0,t);return this.safeTicker({symbol:n,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:s,close:r,last:r,previousClose:a,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"volume"),quoteVolume:void 0,info:e},t)}parseTrade(e,t){const i=this.safeTimestamp(e,"timestamp"),s=void 0!==t?t.symbol:void 0,r=this.safeString(e,"is_ask");let a=this.safeString(e,"type");void 0!==r?"1"===r?a="sell":"0"===r&&(a="buy"):"ask"===a?a="sell":"bid"===a&&(a="buy");const n=this.safeString(e,"price"),o=this.safeString(e,"qty"),h=this.safeString(e,"orderId");let c,u=this.safeString(e,"fee");if(void 0!==u){u=d.stringAbs(u);let i,s=this.safeString(e,"feeRate");s=d.stringAbs(s),void 0!==t&&(i="sell"===a?t.quote:t.base),c={cost:u,currency:i,rate:s}}return this.safeTrade({id:this.safeString(e,"id"),info:e,timestamp:i,datetime:this.iso8601(i),order:h,symbol:s,type:void 0,side:a,takerOrMaker:void 0,price:n,amount:o,cost:void 0,fee:c},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currency:r.id,format:"json"},n=await this.publicGetTrades(this.extend(a,s)),o=this.safeValue(n,"completeOrders",[]);return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){if("limit"!==t)throw new n(this.id+" allows limit orders only");await this.loadMarkets();const o={price:r,currency:this.marketId(e),qty:s},h="privatePostOrder"+this.capitalize(t)+this.capitalize(i),c=await this[h](this.extend(o,a));return this.parseOrder(c)}async fetchOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={order_id:e,currency:s.id},a=await this.privatePostOrderOrderInfo(this.extend(r,i)),n=this.safeValue(a,"info",{});return n.status=this.safeString(n,"status"),this.parseOrder(n,s)}parseOrderStatus(e){return this.safeString({live:"open",partially_filled:"open",filled:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"orderId"),s=this.safeString(e,"price"),r=this.safeTimestamp(e,"timestamp");let a=this.safeString(e,"type");"ask"===a?a="sell":"bid"===a&&(a="buy");const n=this.safeString(e,"remainQty"),o=this.safeString(e,"qty");let h,c,u,l=this.safeString(e,"status");"live"===l&&void 0!==n&&void 0!==o&&d.stringLt(n,o)&&(l="canceled"),l=this.parseOrderStatus(l);const f=this.safeStringLower(e,"currency");let p;void 0!==f&&(f in this.markets_by_id?t=this.markets_by_id[f]:(c=this.safeCurrencyCode(f),u="KRW",h=c+"/"+u)),void 0===h&&void 0!==t&&(h=t.symbol,c=t.base,u=t.quote);const m=this.safeString(e,"fee");if(void 0!==m){const t="sell"===a?u:c;p={cost:m,rate:this.safeString(e,"feeRate"),currency:t}}return this.safeOrder2({info:e,id:i,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:h,type:"limit",timeInForce:void 0,postOnly:void 0,side:a,price:s,stopPrice:void 0,cost:void 0,average:void 0,amount:o,filled:void 0,remaining:n,status:l,fee:p,trades:void 0},t)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new n(this.id+" allows fetching closed orders with a specific symbol");await this.loadMarkets();const r=this.market(e),a={currency:r.id},o=await this.privatePostOrderLimitOrders(this.extend(a,s)),h=this.safeValue(o,"limitOrders",[]);return this.parseOrders(h,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={currency:r.id},n=await this.privatePostOrderCompleteOrders(this.extend(a,s)),h=this.safeValue(n,"completeOrders",[]);return this.parseTrades(h,r,t,i)}async cancelOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" cancelOrder() requires a symbol argument. To cancel the order, pass a symbol argument and {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument of cancelOrder.");const s=this.safeNumber(i,"price"),r=this.safeNumber(i,"qty"),a=this.safeInteger(i,"is_ask");if(void 0===s||void 0===r||void 0===a)throw new o(this.id+" cancelOrder() requires {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument.");await this.loadMarkets();const n={order_id:e,price:s,qty:r,is_ask:a,currency:this.marketId(t)};return await this.privatePostOrderCancel(this.extend(n,i))}async fetchDepositAddresses(e,t={}){await this.loadMarkets();const i=await this.privatePostAccountDepositAddress(t),s=this.safeValue(i,"walletAddress",{}),r=Object.keys(s),a={};for(let e=0;e<r.length;e++){const t=r[e],i=s[t];if(!i||"-1"===i)continue;const n=t.split("_"),o=this.safeValue(n,0),h=this.safeValue(n,1),c=this.safeCurrencyCode(o);let d=this.safeValue(a,c);void 0===d&&(d={currency:c,address:void 0,tag:void 0,info:i});const u=this.safeString(d,"address",i);this.checkAddress(u),d.address=u,d.info=u,"tag"!==h&&"memo"!==h||(d.tag=i,d.info=[u,i]),a[c]=d}return a}sign(e,t="public",i="GET",s={},r,a){const n=this.implodeParams(e,s),o=this.omit(s,this.extractParams(e));let h=this.urls.api+"/";if("public"===t)h+=n,Object.keys(o).length&&(h+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),h+=this.version+"/"+n;const e=this.nonce().toString(),t=this.json(this.extend({access_token:this.apiKey,nonce:e},s)),i=this.stringToBase64(t);a=this.decode(i);const o=this.secret.toUpperCase();r={"Content-Type":"application/json","X-COINONE-PAYLOAD":i,"X-COINONE-SIGNATURE":this.hmac(i,this.encode(o),"sha512")}}return{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o,h,c){if(void 0!==o){if(!("result"in o))throw new n(this.id+" "+a);if("success"!==o.result){const e=this.safeString(o,"errorCode"),t=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,e,t),new n(t)}}}}},98974:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:n}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinspot",name:"CoinSpot",countries:["AU"],rateLimit:1e3,has:{cancelOrder:void 0,CORS:void 0,createMarketOrder:void 0,createOrder:!0,fetchBalance:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28208429-3cacdf9a-6896-11e7-854e-4c79a772a30f.jpg",api:{public:"https://www.coinspot.com.au/pubapi",private:"https://www.coinspot.com.au/api"},www:"https://www.coinspot.com.au",doc:"https://www.coinspot.com.au/api",referral:"https://www.coinspot.com.au/register?code=PJURCU"},api:{public:{get:["latest"]},private:{post:["orders","orders/history","my/coin/deposit","my/coin/send","quote/buy","quote/sell","my/balances","my/orders","my/buy","my/sell","my/buy/cancel","my/sell/cancel","ro/my/balances","ro/my/balances/{cointype}","ro/my/deposits","ro/my/withdrawals","ro/my/transactions","ro/my/transactions/{cointype}","ro/my/transactions/open","ro/my/transactions/{cointype}/open","ro/my/sendreceive","ro/my/affiliatepayments","ro/my/referralpayments"]}},markets:{"BTC/AUD":{id:"btc",symbol:"BTC/AUD",base:"BTC",quote:"AUD",baseId:"btc",quoteId:"aud",type:"spot",spot:!0},"ETH/AUD":{id:"eth",symbol:"ETH/AUD",base:"ETH",quote:"AUD",baseId:"eth",quoteId:"aud",type:"spot",spot:!0},"XRP/AUD":{id:"xrp",symbol:"XRP/AUD",base:"XRP",quote:"AUD",baseId:"xrp",quoteId:"aud",type:"spot",spot:!0},"LTC/AUD":{id:"ltc",symbol:"LTC/AUD",base:"LTC",quote:"AUD",baseId:"ltc",quoteId:"aud",type:"spot",spot:!0},"DOGE/AUD":{id:"doge",symbol:"DOGE/AUD",base:"DOGE",quote:"AUD",baseId:"doge",quoteId:"aud",type:"spot",spot:!0},"RFOX/AUD":{id:"rfox",symbol:"RFOX/AUD",base:"RFOX",quote:"AUD",baseId:"rfox",quoteId:"aud",type:"spot",spot:!0},"POWR/AUD":{id:"powr",symbol:"POWR/AUD",base:"POWR",quote:"AUD",baseId:"powr",quoteId:"aud",type:"spot",spot:!0},"NEO/AUD":{id:"neo",symbol:"NEO/AUD",base:"NEO",quote:"AUD",baseId:"neo",quoteId:"aud",type:"spot",spot:!0},"TRX/AUD":{id:"trx",symbol:"TRX/AUD",base:"TRX",quote:"AUD",baseId:"trx",quoteId:"aud",type:"spot",spot:!0},"EOS/AUD":{id:"eos",symbol:"EOS/AUD",base:"EOS",quote:"AUD",baseId:"eos",quoteId:"aud",type:"spot",spot:!0},"XLM/AUD":{id:"xlm",symbol:"XLM/AUD",base:"XLM",quote:"AUD",baseId:"xlm",quoteId:"aud",type:"spot",spot:!0},"RHOC/AUD":{id:"rhoc",symbol:"RHOC/AUD",base:"RHOC",quote:"AUD",baseId:"rhoc",quoteId:"aud",type:"spot",spot:!0},"GAS/AUD":{id:"gas",symbol:"GAS/AUD",base:"GAS",quote:"AUD",baseId:"gas",quoteId:"aud",type:"spot",spot:!0}},commonCurrencies:{DRK:"DASH"},options:{fetchBalance:"private_post_my_balances"}})}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString(this.options,"fetchBalance","private_post_my_balances"),i=await this[t](e),s={info:i},r=this.safeValue2(i,"balance","balances");if(Array.isArray(r))for(let e=0;e<r.length;e++){const t=r[e],i=Object.keys(t);for(let e=0;e<i.length;e++){const r=i[e],a=t[r],n=this.safeCurrencyCode(r),o=this.account();o.total=this.safeString(a,"balance"),s[n]=o}}else{const e=Object.keys(r);for(let t=0;t<e.length;t++){const i=e[t],a=this.safeCurrencyCode(i),n=this.account();n.total=this.safeString(r,i),s[a]=n}}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={cointype:this.market(e).id},r=await this.privatePostOrders(this.extend(s,i));return this.parseOrderBook(r,e,void 0,"buyorders","sellorders","rate","amount")}async fetchTicker(e,t={}){await this.loadMarkets();const i=await this.publicGetLatest(t);let s=this.marketId(e);s=s.toLowerCase();const r=i.prices[s],a=this.milliseconds(),n=this.safeNumber(r,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:void 0,low:void 0,bid:this.safeNumber(r,"bid"),bidVolume:void 0,ask:this.safeNumber(r,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:r}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={cointype:r.id},n=await this.privatePostOrdersHistory(this.extend(a,s)),o=this.safeValue(n,"orders",[]);return this.parseTrades(o,r,t,i)}parseTrade(e,t){const i=this.safeString(e,"rate"),s=this.safeString(e,"amount"),r=this.safeNumber(e,"total"),a=this.safeInteger(e,"solddate"),n=this.safeString(e,"market"),o=this.safeSymbol(n,t,"/");return this.safeTrade({info:e,id:void 0,symbol:o,timestamp:a,datetime:this.iso8601(a),order:void 0,type:void 0,side:void 0,takerOrMaker:void 0,price:i,amount:s,cost:r,fee:void 0},t)}async createOrder(e,t,i,s,a,n={}){await this.loadMarkets();const o="privatePostMy"+this.capitalize(i);if("market"===t)throw new r(this.id+" allows limit orders only");const h={cointype:this.marketId(e),amount:s,rate:a};return await this[o](this.extend(h,n))}async cancelOrder(e,t,i={}){const s=this.safeString(i,"side");if("buy"!==s&&"sell"!==s)throw new a(this.id+' cancelOrder() requires a side parameter, "buy" or "sell"');i=this.omit(i,"side");const r="privatePostMy"+this.capitalize(s)+"Cancel",n={id:e};return await this[r](this.extend(n,i))}sign(e,t="public",i="GET",s={},r,a){if(!this.apiKey)throw new n(this.id+" requires apiKey for all requests");const o=this.urls.api[t]+"/"+e;if("private"===t){this.checkRequiredCredentials();const e=this.nonce();a=this.json(this.extend({nonce:e},s)),r={"Content-Type":"application/json",key:this.apiKey,sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}}},57268:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,BadRequest:a,InvalidNonce:n,RequestTimeout:o,ExchangeNotAvailable:h,InsufficientFunds:c,OrderNotFound:d,InvalidOrder:u,DDoSProtection:l,AuthenticationError:f,BadSymbol:p,AccountSuspended:m}=i(73449),{TICK_SIZE:g}=i(62115);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"crex24",name:"CREX24",countries:["EE"],rateLimit:500,version:"v2",has:{cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchBidsAsks:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:void 0,fetchTradingFees:void 0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","1w":"1w","1M":"1mo"},urls:{logo:"https://user-images.githubusercontent.com/1294454/47813922-6f12cc00-dd5d-11e8-97c6-70f957712d47.jpg",api:"https://api.crex24.com",www:"https://crex24.com",referral:"https://crex24.com/?refid=slxsjsjtil8xexl9hksr",doc:"https://docs.crex24.com/trade-api/v2",fees:"https://crex24.com/fees"},api:{public:{get:["currencies","instruments","tickers","recentTrades","orderBook","ohlcv","tradingFeeSchedules","withdrawalFees","currencyTransport","currenciesWithdrawalFees"]},trading:{get:["orderStatus","orderTrades","activeOrders","orderHistory","tradeHistory","tradingFee","tradeFee"],post:["placeOrder","modifyOrder","cancelOrdersById","cancelOrdersByInstrument","cancelAllOrders"]},account:{get:["balance","depositAddress","moneyTransfers","moneyTransferStatus","previewWithdrawal"],post:["withdraw"]}},precisionMode:g,fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:-1e-4},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{ACM:"Actinium",BCC:"BCH",BIT:"BitMoney",BULL:"BuySell",CLC:"CaluraCoin",CREDIT:"TerraCredit",DMS:"Documentchain",EGG:"NestEGG Coin",EPS:"Epanus",FUND:"FUNDChains",GHOST:"GHOSTPRISM",GTC:"GastroCoin",IQ:"IQ.Cash",ONE:"One Hundred Coin",PUT:"PutinCoin",SBTC:"SBTCT",SUPER:"SuperCoin",UNI:"Universe",YOYO:"YOYOW"},options:{networks:{ETH:"ERC20",TRX:"TRC20",BSC:"BEP20"},fetchOrdersMethod:"tradingGetOrderHistory",fetchClosedOrdersMethod:"tradingGetOrderHistory",fetchTickersMethod:"publicGetTicker24hr",defaultTimeInForce:"GTC",hasAlreadyAuthenticatedSuccessfully:!1,warnOnFetchOpenOrdersWithoutSymbol:!0,parseOrderToPrecision:!1,newOrderRespType:"RESULT"},exceptions:{exact:{"Parameter 'filter' contains invalid value.":a,"Mandatory parameter 'instrument' is missing.":a,"The value of parameter 'till' must be greater than or equal to the value of parameter 'from'.":a,"Failed to verify request signature.":f,"Nonce error. Make sure that the value passed in the 'X-CREX24-API-NONCE' header is greater in each consecutive request than in the previous one for the corresponding API-Key provided in 'X-CREX24-API-KEY' header.":n,"Market orders are not supported by the instrument currently.":u,"Parameter 'instrument' contains invalid value.":p,"Trading has been disabled for the account until the verification is passed. To initiate the verification process, please log into your account at crex24.com and proceed to 'My account' -> 'Verification'.":m},broad:{"try again later":h,"API Key":f,"Insufficient funds":c,"has been delisted.":p,"is currently suspended.":p,"Mandatory parameter":a,"can not trade":m}}})}nonce(){return this.milliseconds()}async fetchMarkets(e={}){const t=await this.publicGetInstruments(e),i=await this.publicGetTradingFeeSchedules(e),s=[];for(let e=0;e<t.length;e++){const r=t[e],a=this.safeString(r,"symbol"),n=this.safeString(r,"baseCurrency"),o=this.safeString(r,"quoteCurrency"),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=h+"/"+c,u=this.safeNumber(r,"tickSize"),l=this.safeNumber(r,"minPrice"),f=this.safeNumber(r,"maxPrice"),p=this.safeNumber(r,"minVolume"),m=this.safeNumber(r,"maxVolume"),g=this.safeNumber(r,"minQuoteVolume"),y=this.safeNumber(r,"maxQuoteVolume"),b={amount:p,price:u};let v,w;const k=this.safeString(r,"feeSchedule");for(let e=0;e<i.length;e++)if(this.safeString(i[e],"name")===k){const t=this.safeValue(i[e],"feeRates",[]);for(let e=0;e<t.length;e++)if(0===this.safeNumber(t[e],"volumeThreshold")){v=this.safeNumber(t[e],"maker"),w=this.safeNumber(t[e],"taker");break}break}const _="active"===r.state;s.push({id:a,symbol:d,base:h,quote:c,baseId:n,quoteId:o,info:r,type:"spot",spot:!0,active:_,precision:b,maker:v,taker:w,limits:{amount:{min:p,max:m},price:{min:l,max:f},cost:{min:g,max:y}}})}return s}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"symbol"),a=this.safeCurrencyCode(r),n=this.safeInteger(s,"withdrawalPrecision"),o=Math.pow(10,-n),h=this.safeValue(s,"BaseAddress"),c=s.depositsAllowed&&s.withdrawalsAllowed&&!s.isDelisted,d=s.isFiat?"fiat":"crypto";i[a]={id:r,code:a,address:h,info:s,type:d,name:this.safeString(s,"name"),active:c,fee:this.safeNumber(s,"flatWithdrawalFee"),precision:o,limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},deposit:{min:this.safeNumber(s,"minDeposit"),max:void 0},withdraw:{min:this.safeNumber(s,"minWithdrawal"),max:this.safeNumber(s,"maxWithdrawal")}}}}return i}async fetchFundingFees(e,t={}){await this.loadMarkets();const i=await this.publicGetCurrenciesWithdrawalFees(t),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currency"),a=this.safeCurrencyCode(r),n=this.safeValue(t,"fees");s[a]={};for(let e=0;e<n.length;e++){const t=n[e],i=this.safeString(t,"feeCurrency"),r=this.safeCurrencyCode(i),o=this.safeNumber(t,"amount");s[a][r]=o}}return{withdraw:s,deposit:{},info:i}}async fetchBalance(e={}){await this.loadMarkets();const t=await this.accountGetBalance(this.extend({},e)),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(s,"available"),n.used=this.safeString(s,"reserved"),i[a]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={instrument:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.publicGetOrderBook(this.extend(s,i));return this.parseOrderBook(r,e,void 0,"buyLevels","sellLevels","price","volume")}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"timestamp")),s=this.safeString(e,"instrument"),r=this.safeSymbol(s,t,"-"),a=this.safeNumber(e,"last");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:this.safeNumber(e,"percentChange"),average:void 0,baseVolume:this.safeNumber(e,"baseVolume"),quoteVolume:this.safeNumber(e,"quoteVolume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={instrument:i.id},a=await this.publicGetTickers(this.extend(s,t));if(a.length<1)throw new r(this.id+" fetchTicker could not load quotes for symbol "+e);return this.parseTicker(a[0],i)}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.instrument=t.join(",")}const s=await this.publicGetTickers(this.extend(i,t));return this.parseTickers(s,e)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"timestamp")),s=this.safeString(e,"price"),r=this.safeString(e,"volume"),a=this.safeString(e,"id"),n=this.safeString(e,"side"),o=this.safeString(e,"orderId"),h=this.safeString(e,"instrument"),c=this.safeSymbol(h,t,"-");let d;const u=this.safeString(e,"feeCurrency"),l=this.safeCurrencyCode(u),f=this.safeString(e,"fee");return void 0!==f&&(d={cost:f,currency:l}),this.safeTrade({info:e,timestamp:i,datetime:this.iso8601(i),symbol:c,id:a,order:o,type:void 0,takerOrMaker:void 0,side:n,price:s,cost:void 0,amount:r,fee:d},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={instrument:r.id};void 0!==i&&(a.limit=i);const n=await this.publicGetRecentTrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"timestamp")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={granularity:this.timeframes[t],instrument:a.id};void 0!==s&&(n.limit=s);const o=await this.publicGetOhlcv(this.extend(n,r));return this.parseOHLCVs(o,a,t,i,s)}parseOrderStatus(e){const t={submitting:"open",unfilledActive:"open",partiallyFilledActive:"open",filled:"closed",partiallyFilledCancelled:"canceled",unfilledCancelled:"canceled"};return e in t?t[e]:e}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"status")),s=this.safeString(e,"instrument"),r=this.safeSymbol(s,t,"-"),a=this.parse8601(this.safeString(e,"timestamp")),n=this.safeNumber(e,"price"),o=this.safeNumber(e,"volume"),h=this.safeNumber(e,"remainingVolume"),c=this.parse8601(this.safeString(e,"lastUpdate")),d=this.safeString(e,"id"),u=this.safeString(e,"type"),l=this.safeString(e,"side"),f=this.safeString(e,"timeInForce"),p=this.safeNumber(e,"stopPrice");return this.safeOrder({info:e,id:d,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:c,symbol:r,type:u,timeInForce:f,side:l,price:n,stopPrice:p,amount:o,cost:void 0,average:void 0,filled:void 0,remaining:h,status:i,fee:void 0,trades:void 0})}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o={instrument:n.id,volume:this.amountToPrecision(e,s),type:t,side:i};let h=!1,c=!1;if("limit"===t?h=!0:"stopLimit"===t&&(h=!0,c=!0),h){if(void 0===r)throw new u(this.id+" createOrder() requires a price argument for a "+t+" order");o.price=this.priceToPrecision(e,r)}if(c){const i=this.safeNumber(a,"stopPrice");if(void 0===i)throw new u(this.id+" createOrder() requires a stopPrice extra param for a "+t+" order");o.stopPrice=this.priceToPrecision(e,i),a=this.omit(a,"stopPrice")}const d=await this.tradingPostPlaceOrder(this.extend(o,a));return this.parseOrder(d,n)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.tradingGetOrderStatus(this.extend(s,i));if(r.length<1)throw new d(this.id+" fetchOrder could not fetch order id "+e);return this.parseOrder(r[0])}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={};if(void 0!==t&&(r.from=this.ymdhms(t,"T")),void 0!==i&&(r.limit=i),void 0!==e){const t=this.market(e);r.instrument=t.id}const a=this.safeString(this.options,"fetchOrdersMethod","tradingGetOrderHistory"),n=await this[a](this.extend(r,s));return this.parseOrders(n)}async fetchOrdersByIds(e,t,i,s={}){await this.loadMarkets();const r={id:e.join(",")},a=await this.tradingGetOrderStatus(this.extend(r,s));return this.parseOrders(a,void 0,t,i)}async fetchOpenOrders(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.instrument=r.id);const n=await this.tradingGetActiveOrders(this.extend(a,s));return this.parseOrders(n,r,t,i)}async fetchClosedOrders(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.instrument=r.id),void 0!==t&&(a.from=this.ymdhms(t,"T")),void 0!==i&&(a.limit=i);const n=this.safeString(this.options,"fetchClosedOrdersMethod","tradingGetOrderHistory"),o=await this[n](this.extend(a,s));return this.parseOrders(o,r,t,i)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={ids:[parseInt(e)]},r=await this.tradingPostCancelOrdersById(this.extend(s,i));return this.parseOrder(r)}async cancelAllOrders(e,t={}){return await this.tradingPostCancelAllOrders(t)}async fetchMyTrades(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.instrument=r.id),void 0!==t&&(a.from=this.ymdhms(t,"T")),void 0!==i&&(a.limit=i);const n=await this.tradingGetTradeHistory(this.extend(a,s));return this.parseTrades(n,r,t,i)}async fetchTransactions(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.currency(e),a.currency=r.id),void 0!==t&&(a.from=this.ymdhms(t,"T"));const n=await this.accountGetMoneyTransfers(this.extend(a,s));return this.parseTransactions(n,r,t,i)}async fetchDeposits(e,t,i,s={}){return this.fetchTransactions(e,t,i,this.extend({type:"deposit"},s))}async fetchWithdrawals(e,t,i,s={}){return this.fetchTransactions(e,t,i,this.extend({type:"withdrawal"},s))}parseTransactionStatus(e){return this.safeString({pending:"pending",success:"ok",failed:"failed"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address"),r=this.safeString(e,"paymentId"),a=this.safeValue(e,"txId"),n=this.safeString(e,"currency"),o=this.safeCurrencyCode(n,t),h=this.safeString(e,"type"),c=this.parse8601(this.safeString(e,"createdAt")),d=this.parse8601(this.safeString(e,"processedAt")),u=this.parseTransactionStatus(this.safeString(e,"status")),l=this.safeNumber(e,"amount"),f={cost:this.safeNumber(e,"fee"),currency:o};return{info:e,id:i,txid:a,timestamp:c,datetime:this.iso8601(c),address:s,tag:r,type:h,amount:l,currency:o,status:u,updated:d,fee:f}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.accountGetDepositAddress(this.extend(i,t)),r=this.safeString(s,"address"),a=this.safeString(s,"paymentId");return{currency:e,address:this.checkAddress(r),tag:a,network:void 0,info:s}}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),n={currency:a.id,address:i,amount:parseFloat(this.currencyToPrecision(e,t)),feeCurrency:a.id};void 0!==s&&(n.paymentId=s);const o=this.safeValue(this.options,"networks",{});let h=this.safeStringUpper(r,"network");h=this.safeString(o,h,h),void 0!==h&&(n.transport=h,r=this.omit(r,"network"));const c=await this.accountPostWithdraw(this.extend(n,r));return this.parseTransaction(c)}sign(e,t="public",i="GET",s={},r,a){let n="/"+this.version+"/"+t+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(o).length&&(n+="?"+this.urlencode(o));const h=this.urls.api+n;if("trading"===t||"account"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.base64ToBinary(this.secret);let o=n+e;r={"X-CREX24-API-KEY":this.apiKey,"X-CREX24-API-NONCE":e},"POST"===i&&(r["Content-Type"]="application/json",o+=a=this.json(s)),r["X-CREX24-API-SIGN"]=this.hmac(this.encode(o),t,"sha512","base64")}return{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,n,c,d,u,p){if(!this.isJsonEncodedObject(c))return;if(e>=200&&e<300)return;const m=this.safeString(d,"errorDescription"),g=this.id+" "+c;if(this.throwExactlyMatchedException(this.exceptions.exact,m,g),this.throwBroadlyMatchedException(this.exceptions.broad,m,g),400===e)throw new a(g);if(401===e)throw new f(g);if(403===e)throw new f(g);if(429===e)throw new l(g);if(500===e)throw new r(g);if(503===e)throw new h(g);if(504===e)throw new o(g);throw new r(g)}}},49610:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:n,InsufficientFunds:o,OrderNotFound:h,InvalidOrder:c,DDoSProtection:d,InvalidNonce:u,AuthenticationError:l,BadRequest:f}=i(73449),{TICK_SIZE:p}=i(62115);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"currencycom",name:"Currency.com",countries:["BY"],rateLimit:500,certified:!0,pro:!0,version:"v1",has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFees:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","1w":"1w"},urls:{logo:"https://user-images.githubusercontent.com/1294454/83718672-36745c00-a63e-11ea-81a9-677b1f789a4d.jpg",api:{public:"https://api-adapter.backend.currency.com/api",private:"https://api-adapter.backend.currency.com/api"},test:{public:"https://demo-api-adapter.backend.currency.com/api",private:"https://demo-api-adapter.backend.currency.com/api"},www:"https://www.currency.com",referral:"https://currency.com/trading/signup?c=362jaimv&pid=referral",doc:["https://currency.com/api"],fees:"https://currency.com/fees-charges"},api:{public:{get:["time","exchangeInfo","depth","aggTrades","klines","ticker/24hr"]},private:{get:["leverageSettings","openOrders","tradingPositions","account","myTrades"],post:["order","updateTradingPosition","updateTradingOrder","closeTradingPosition"],delete:["order"]}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,taker:this.parseNumber("0.002"),maker:this.parseNumber("0.002")}},precisionMode:p,options:{defaultTimeInForce:"GTC",warnOnFetchOpenOrdersWithoutSymbol:!0,recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1,parseOrderToPrecision:!1,newOrderRespType:{market:"FULL",limit:"RESULT",stop:"RESULT"}},exceptions:{broad:{"FIELD_VALIDATION_ERROR Cancel is available only for LIMIT order":c,"API key does not exist":l,"Order would trigger immediately.":c,"Account has insufficient balance for requested action.":o,"Rest API trading is not enabled.":n},exact:{"-1000":n,"-1013":c,"-1021":u,"-1022":l,"-1100":c,"-1104":r,"-1025":l,"-1128":f,"-2010":r,"-2011":h,"-2013":h,"-2014":l,"-2015":l}},commonCurrencies:{ACN:"Accenture",BNS:"Bank of Nova Scotia",CAR:"Avis Budget Group Inc",EDU:"New Oriental Education & Technology Group Inc",ETN:"Eaton",FOX:"Fox Corporation",IQ:"iQIYI",PLAY:"Dave & Buster's Entertainment"}})}nonce(){return this.milliseconds()-this.options.timeDifference}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeInteger(t,"serverTime")}async loadTimeDifference(e={}){const t=await this.publicGetTime(e),i=this.milliseconds();return this.options.timeDifference=parseInt(i-t.serverTime),this.options.timeDifference}async fetchMarkets(e={}){const t=await this.publicGetExchangeInfo(e);this.options.adjustForTimeDifference&&await this.loadTimeDifference();const i=this.safeValue(t,"symbols"),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"symbol"),a=this.safeString(t,"baseAsset"),n=this.safeString(t,"quoteAsset"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n);let c=o+"/"+h;r.indexOf("/")>=0&&(c=r);const d=this.safeValue(t,"filters",[]),u=this.indexBy(d,"filterType"),l={amount:1/Math.pow(1,this.safeInteger(t,"baseAssetPrecision")),price:this.safeNumber(t,"tickSize")},f="TRADING"===this.safeString(t,"status");let p=this.safeStringLower(t,"marketType");"leverage"===p&&(p="margin");const m={id:r,symbol:c,base:o,quote:h,baseId:a,quoteId:n,type:p,spot:"spot"===p,margin:"margin"===p,info:t,active:f,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:void 0},price:{min:void 0,max:void 0},cost:{min:-Math.log10(l.amount),max:void 0}}},g=this.safeNumber2(t,"exchangeFee","tradingFee"),y=this.safeNumber(t,"makerFee",g),b=this.safeNumber(t,"takerFee",g);if(void 0!==y&&(m.maker=y/100),void 0!==b&&(m.taker=b/100),"PRICE_FILTER"in u){const e=this.safeValue(u,"PRICE_FILTER",{});m.precision.price=this.safeNumber(e,"tickSize"),m.limits.price={min:this.safeNumber(e,"minPrice"),max:void 0};const t=this.safeNumber(e,"maxPrice");void 0!==t&&t>0&&(m.limits.price.max=t)}if("LOT_SIZE"in u){const e=this.safeValue(u,"LOT_SIZE",{});m.precision.amount=this.safeNumber(e,"stepSize"),m.limits.amount={min:this.safeNumber(e,"minQty"),max:this.safeNumber(e,"maxQty")}}if("MARKET_LOT_SIZE"in u){const e=this.safeValue(u,"MARKET_LOT_SIZE",{});m.limits.market={min:this.safeNumber(e,"minQty"),max:this.safeNumber(e,"maxQty")}}if("MIN_NOTIONAL"in u){const e=this.safeValue(u,"MIN_NOTIONAL",{});m.limits.cost.min=this.safeNumber(e,"minNotional")}s.push(m)}return s}async fetchAccounts(e={}){const t=await this.privateGetAccount(e),i=this.safeValue(t,"balances",[]),s=[];for(let e=0;e<i.length;e++){const r=i[e],a=this.safeInteger(r,"accountId"),n=this.safeString(r,"asset"),o=this.safeCurrencyCode(n);s.push({id:a,type:void 0,currency:o,info:t})}return s}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privateGetAccount(e);return{info:t,maker:this.safeNumber(t,"makerCommission"),taker:this.safeNumber(t,"takerCommission")}}parseBalanceResponse(e){const t={info:e},i=this.safeValue(e,"balances",[]);for(let e=0;e<i.length;e++){const s=i[e],r=this.safeString(s,"asset"),a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(s,"free"),n.used=this.safeString(s,"locked"),t[a]=n}return this.parseBalance(t)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccount(e);return this.parseBalanceResponse(t)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.publicGetDepth(this.extend(s,i)),a=this.parseOrderBook(r,e);return a.nonce=this.safeInteger(r,"lastUpdateId"),a}parseTicker(e,t){const i=this.safeInteger(e,"closeTime"),s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t),a=this.safeNumber(e,"lastPrice"),n=this.safeNumber(e,"openPrice");let o;return void 0!==n&&void 0!==a&&(o=this.sum(n,a)/2),{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"highPrice"),low:this.safeNumber(e,"lowPrice"),bid:this.safeNumber(e,"bidPrice"),bidVolume:this.safeNumber(e,"bidQty"),ask:this.safeNumber(e,"askPrice"),askVolume:this.safeNumber(e,"askQty"),vwap:this.safeNumber(e,"weightedAvgPrice"),open:n,close:a,last:a,previousClose:this.safeNumber(e,"prevClosePrice"),change:this.safeNumber(e,"priceChange"),percentage:this.safeNumber(e,"priceChangePercent"),average:o,baseVolume:this.safeNumber(e,"volume"),quoteVolume:this.safeNumber(e,"quoteVolume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetTicker24hr(this.extend(s,t));return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker24hr(t);return this.parseTickers(i,e)}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id,interval:this.timeframes[t]};void 0!==i&&(n.startTime=i),void 0!==s&&(n.limit=s);const o=await this.publicGetKlines(this.extend(n,r));return this.parseOHLCVs(o,a,t,i,s)}parseTrade(e,t){const i=this.safeInteger2(e,"T","time"),s=this.safeString2(e,"p","price"),r=this.safeString2(e,"q","qty"),a=this.safeString2(e,"a","id");let n;const o=this.safeString(e,"orderId");let h,c;"m"in e?n=e.m?"sell":"buy":"isBuyerMaker"in e?n=e.isBuyerMaker?"sell":"buy":"isBuyer"in e&&(n=e.isBuyer?"buy":"sell"),"commission"in e&&(h={cost:this.safeString(e,"commission"),currency:this.safeCurrencyCode(this.safeString(e,"commissionAsset"))}),"isMaker"in e&&(c=e.isMaker?"maker":"taker");const d=this.safeString(e,"symbol"),u=this.safeSymbol(d,t);return this.safeTrade({info:e,timestamp:i,datetime:this.iso8601(i),symbol:u,id:a,order:o,type:void 0,takerOrMaker:c,side:n,price:s,amount:r,cost:void 0,fee:h},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.limit=i);const n=await this.publicGetAggTrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseOrderStatus(e){return this.safeString({NEW:"open",PARTIALLY_FILLED:"open",FILLED:"closed",CANCELED:"canceled",PENDING_CANCEL:"canceling",REJECTED:"rejected",EXPIRED:"expired"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"status")),s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t,"/");let a;"time"in e?a=this.safeInteger(e,"time"):"transactTime"in e&&(a=this.safeInteger(e,"transactTime"));const n=this.safeNumber(e,"price"),o=this.safeNumber(e,"origQty"),h=this.safeNumber(e,"executedQty"),c=this.safeNumber(e,"cummulativeQuoteQty"),d=this.safeString(e,"orderId"),u=this.safeStringLower(e,"type"),l=this.safeStringLower(e,"side");let f;const p=this.safeValue(e,"fills");void 0!==p&&(f=this.parseTrades(p,t));const m=this.safeString(e,"timeInForce");return this.safeOrder({info:e,id:d,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:r,type:u,timeInForce:m,side:l,price:n,stopPrice:void 0,amount:o,cost:c,average:void 0,filled:h,remaining:void 0,status:i,fee:void 0,trades:f})}async createOrder(e,t,i,s,r,n={}){await this.loadMarkets();const o=this.market(e);let h;if(o.margin&&(h=this.safeInteger(n,"accountId"),void 0===h))throw new a(this.id+" createOrder() requires an accountId parameter for "+o.type+" market "+e);const c=t.toUpperCase(),d=this.safeValue(this.options.newOrderRespType,t,"RESULT"),u={symbol:o.id,quantity:this.amountToPrecision(e,s),type:c,side:i.toUpperCase(),newOrderRespType:d};"LIMIT"===c?(u.price=this.priceToPrecision(e,r),u.timeInForce=this.options.defaultTimeInForce):"STOP"===c&&(u.price=this.priceToPrecision(e,r));const l=await this.privatePostOrder(this.extend(u,n));return this.parseOrder(l,o)}async fetchOpenOrders(e,t,i,s={}){let a;await this.loadMarkets();const n={};if(void 0!==e)a=this.market(e),n.symbol=a.id;else if(this.options.warnOnFetchOpenOrdersWithoutSymbol){const e=this.symbols.length,t=parseInt(e/2);throw new r(this.id+" fetchOpenOrders() WARNING: fetching open orders without specifying a symbol is rate-limited to one call per "+t.toString()+" seconds. Do not call this method frequently to avoid ban. Set "+this.id+'.options["warnOnFetchOpenOrdersWithoutSymbol"] = false to suppress this warning message.')}const o=await this.privateGetOpenOrders(this.extend(n,s));return this.parseOrders(o,a,t,i)}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r=this.safeValue(i,"origClientOrderId"),n={symbol:s.id};void 0===r?n.orderId=e:n.origClientOrderId=r;const o=await this.privateDeleteOrder(this.extend(n,i));return this.parseOrder(o,s)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={symbol:r.id};void 0!==i&&(n.limit=i);const o=await this.privateGetMyTrades(this.extend(n,s));return this.parseTrades(o,r,t,i)}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t]+"/"+this.version+"/"+e;if("historicalTrades"===e&&(r={"X-MBX-APIKEY":this.apiKey}),"private"===t){this.checkRequiredCredentials();let e=this.urlencode(this.extend({timestamp:this.nonce(),recvWindow:this.options.recvWindow},s));e+="&signature="+this.hmac(this.encode(e),this.encode(this.secret)),r={"X-MBX-APIKEY":this.apiKey},"GET"===i||"DELETE"===i?n+="?"+e:(a=e,r["Content-Type"]="application/x-www-form-urlencoded")}else Object.keys(s).length&&(n+="?"+this.urlencode(s));return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,u){if(418===e||429===e)throw new d(this.id+" "+e.toString()+" "+t+" "+n);if(e>=400){if(n.indexOf("Price * QTY is zero or less")>=0)throw new c(this.id+" order cost = amount * price is zero or less "+n);if(n.indexOf("LOT_SIZE")>=0)throw new c(this.id+" order amount should be evenly divisible by lot size "+n);if(n.indexOf("PRICE_FILTER")>=0)throw new c(this.id+" order price is invalid, i.e. exceeds allowed price precision, exceeds min price or max price limits or is invalid float value in general, use this.priceToPrecision (symbol, amount) "+n)}if(void 0===o)return;const l=this.safeString(o,"code");if(void 0!==l&&"0"!==l){const e=this.id+" "+this.json(o);this.throwExactlyMatchedException(this.exceptions.exact,l,e);const t=this.safeString(o,"msg");throw this.throwBroadlyMatchedException(this.exceptions.broad,t,e),new r(e)}}}},34237:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,InsufficientFunds:a,BadRequest:n,BadSymbol:o,InvalidOrder:h,AuthenticationError:c,ArgumentsRequired:d,OrderNotFound:u,ExchangeNotAvailable:l}=i(73449),{TICK_SIZE:f}=i(62115);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"delta",name:"Delta Exchange",countries:["VC"],rateLimit:300,version:"v2",has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","1d":"1d","7d":"7d","1w":"1w","2w":"2w","1M":"30d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/99450025-3be60a00-2931-11eb-9302-f4fd8d8589aa.jpg",test:{public:"https://testnet-api.delta.exchange",private:"https://testnet-api.delta.exchange"},api:{public:"https://api.delta.exchange",private:"https://api.delta.exchange"},www:"https://www.delta.exchange",doc:["https://docs.delta.exchange"],fees:"https://www.delta.exchange/fees",referral:"https://www.delta.exchange/app/signup/?code=IULYNB"},api:{public:{get:["assets","settings","indices","products","tickers","tickers/{symbol}","l2orderbook/{symbol}","trades/{symbol}","history/candles","history/sparklines"]},private:{get:["orders","orders/leverage","positions","positions/margined","orders/history","fills","fills/history/download/csv","wallet/balances","wallet/transactions","wallet/transactions/download","deposits/address"],post:["orders","orders/batch","orders/leverage","positions/change_margin"],put:["orders","orders/batch"],delete:["orders","orders/all","orders/batch"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0015,maker:.001,tiers:{taker:[[0,.0015],[100,.0013],[250,.0013],[1e3,.001],[5e3,9e-4],[1e4,75e-5],[2e4,65e-5]],maker:[[0,.001],[100,.001],[250,9e-4],[1e3,75e-5],[5e3,6e-4],[1e4,5e-4],[2e4,5e-4]]}}},precisionMode:f,requiredCredentials:{apiKey:!0,secret:!1},exceptions:{exact:{insufficient_margin:a,order_size_exceed_available:h,risk_limits_breached:n,invalid_contract:o,immediate_liquidation:h,out_of_bankruptcy:h,self_matching_disrupted_post_only:h,immediate_execution_post_only:h,bad_schema:n,invalid_api_key:c,invalid_signature:c,open_order_not_found:u,unavailable:l},broad:{}}})}async fetchTime(e={}){const t=await this.publicGetSettings(e),i=this.safeValue(t,"result",{});return this.safeIntegerProduct(i,"server_time",.001)}async fetchStatus(e={}){const t=await this.publicGetSettings(e),i=this.safeValue(t,"result",{}),s="true"===this.safeValue(i,"under_maintenance")?"maintenance":"ok",r=this.safeIntegerProduct(i,"server_time",.001);return this.status=this.extend(this.status,{status:s,updated:r}),this.status}async fetchCurrencies(e={}){const t=await this.publicGetAssets(e),i=this.safeValue(t,"result",[]),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"symbol"),a=this.safeInteger(t,"id"),n=this.safeCurrencyCode(r),o=this.safeString(t,"deposit_status"),h="enabled"===this.safeString(t,"withdrawal_status"),c="enabled"===o&&h,d=this.safeInteger(t,"precision");s[n]={id:r,numericId:a,code:n,name:this.safeString(t,"name"),info:t,active:c,fee:this.safeNumber(t,"base_withdrawal_fee"),precision:1/Math.pow(10,d),limits:{amount:{min:void 0,max:void 0},withdraw:{min:this.safeNumber(t,"min_withdrawal_amount"),max:void 0}}}}return s}async loadMarkets(e=!1,t={}){const i=await super.loadMarkets(e,t);return(void 0===this.safeValue(this.options,"currenciesByNumericId")||e)&&(this.options.currenciesByNumericId=this.indexBy(this.currencies,"numericId")),(void 0===this.safeValue(this.options,"marketsByNumericId")||e)&&(this.options.marketsByNumericId=this.indexBy(this.markets,"numericId")),i}async fetchMarkets(e={}){const t=await this.publicGetProducts(e),i=this.safeValue(t,"result",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e];let r=this.safeString(t,"contract_type");const a=this.safeValue(t,"quoting_asset",{}),n=this.safeValue(t,"underlying_asset",{}),o=this.safeString(n,"symbol"),h=this.safeString(a,"symbol"),c=this.safeString(t,"symbol"),d=this.safeInteger(t,"id"),u=this.safeCurrencyCode(o),l=this.safeCurrencyCode(h);let f=c,p=!1,m=!1,g=!1;"perpetual_futures"===r?(r="swap",p=!0,m=!1,g=!1,c.indexOf("_")<0&&(f=u+"/"+l)):"call_options"===r||"put_options"===r||"move_options"===r?(r="option",p=!1,g=!0,m=!1):"futures"===r&&(r="future",p=!1,g=!1,m=!0);const y={amount:1,price:this.safeNumber(t,"tick_size")},b={amount:{min:1,max:this.safeNumber(t,"position_size_limit")},price:{min:y.price,max:void 0},cost:{min:this.safeNumber(t,"min_size"),max:void 0}},v="live"===this.safeString(t,"state"),w=this.safeNumber(t,"maker_commission_rate"),k=this.safeNumber(t,"taker_commission_rate");s.push({id:c,numericId:d,symbol:f,base:u,quote:l,baseId:o,quoteId:h,type:r,spot:!1,option:g,swap:p,future:m,maker:w,taker:k,precision:y,limits:b,info:t,active:v})}return s}parseTicker(e,t){const i=this.safeIntegerProduct(e,"timestamp",.001),s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t),a=this.safeNumber(e,"close"),n=this.safeNumber(e,"open"),o=this.safeNumber(e,"volume"),h=this.safeNumber(e,"turnover"),c=this.vwap(o,h);return this.safeTicker({symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:c,open:n,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:h,info:e},t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetTickersSymbol(this.extend(s,t)),a=this.safeValue(r,"result",{});return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=this.safeValue(i,"result",[]),r={};for(let e=0;e<s.length;e++){const t=this.parseTicker(s[e]);r[t.symbol]=t}return this.filterByArray(r,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.depth=t);const r=await this.publicGetL2orderbookSymbol(this.extend(s,i)),a=this.safeValue(r,"result",{});return this.parseOrderBook(a,e,void 0,"buy","sell","price","size")}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"order_id");let r=this.parse8601(this.safeString(e,"created_at"));r=this.safeIntegerProduct(e,"timestamp",.001,r);const a=this.safeString(e,"price"),n=this.safeString(e,"size"),o=this.safeValue(e,"product",{}),h=this.safeString(o,"symbol"),c=this.safeSymbol(h,t),d=this.safeString(e,"seller_role");let u=this.safeString(e,"side");void 0===u&&("taker"===d?u="sell":"maker"===d&&(u="buy"));const l=this.safeString(e,"role"),f=this.safeValue(e,"meta_data",{});let p=this.safeString(f,"order_type");void 0!==p&&(p=p.replace("_order",""));const m=this.safeString(e,"commission");let g;if(void 0!==m){const e=this.safeValue(o,"settling_asset",{}),t=this.safeString(e,"symbol");g={cost:m,currency:this.safeCurrencyCode(t)}}return this.safeTrade({id:i,order:s,timestamp:r,datetime:this.iso8601(r),symbol:c,type:p,side:u,price:a,amount:n,cost:void 0,takerOrMaker:l,fee:g,info:e},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},n=await this.publicGetTradesSymbol(this.extend(a,s)),o=this.safeValue(n,"result",[]);return this.parseTrades(o,r,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id,resolution:this.timeframes[t]},o=this.parseTimeframe(t);if(s=s||2e3,void 0===i){const e=this.seconds();n.end=e,n.start=e-s*o}else{const e=parseInt(i/1e3);n.start=e,n.end=this.sum(e,s*o)}const h=await this.publicGetHistoryCandles(this.extend(n,r)),c=this.safeValue(h,"result",[]);return this.parseOHLCVs(c,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetWalletBalances(e),i=this.safeValue(t,"result",[]),s={info:t},r=this.safeValue(this.options,"currenciesByNumericId",{});for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"asset_id"),n=this.safeValue(r,a),o=void 0===n?a:n.code,h=this.account();h.total=this.safeString(t,"balance"),h.free=this.safeString(t,"available_balance"),s[o]=h}return this.parseBalance(s)}async fetchPosition(e,t){await this.loadMarkets();const i={product_id:this.market(e).numericId},s=await this.privateGetPositions(this.extend(i,t));return this.safeValue(s,"result",{})}async fetchPositions(e,t={}){await this.loadMarkets();const i=await this.privateGetPositionsMargined(t);return this.safeValue(i,"result",[])}parseOrderStatus(e){return this.safeString({open:"open",pending:"open",closed:"closed",cancelled:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"client_order_id"),r=this.parse8601(this.safeString(e,"created_at")),a=this.safeString(e,"product_id"),n=this.safeValue(this.options,"marketsByNumericId",{}),o=void 0===(t=this.safeValue(n,a,t))?a:t.symbol,h=this.parseOrderStatus(this.safeString(e,"state")),c=this.safeString(e,"side");let d=this.safeString(e,"order_type");d=d.replace("_order","");const u=this.safeString(e,"limit_price"),l=this.safeString(e,"size"),f=this.safeString(e,"unfilled_size"),p=this.safeString(e,"average_fill_price");let m;const g=this.safeString(e,"paid_commission");if(void 0!==g){let e;if(void 0!==t){const i=this.safeValue(t.info,"settling_asset",{}),s=this.safeString(i,"symbol");e=this.safeCurrencyCode(s)}m={cost:g,currency:e}}return this.safeOrder2({info:e,id:i,clientOrderId:s,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:o,type:d,side:c,price:u,amount:l,cost:void 0,average:p,filled:void 0,remaining:f,status:h,fee:m,trades:void 0},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=t+"_order",o=this.market(e),h={product_id:o.numericId,size:this.amountToPrecision(e,s),side:i,order_type:n};"limit"===t&&(h.limit_price=this.priceToPrecision(e,r));const c=this.safeString2(a,"clientOrderId","client_order_id");a=this.omit(a,["clientOrderId","client_order_id"]),void 0!==c&&(h.client_order_id=c);const d=await this.privatePostOrders(this.extend(h,a)),u=this.safeValue(d,"result",{});return this.parseOrder(u,o)}async editOrder(e,t,i,s,r,a,n={}){await this.loadMarkets();const o=this.market(t),h={id:parseInt(e),product_id:o.numericId};void 0!==r&&(h.size=parseInt(this.amountToPrecision(t,r))),void 0!==a&&(h.limit_price=this.priceToPrecision(t,a));const c=await this.privatePutOrders(this.extend(h,n)),d=this.safeValue(c,"result");return this.parseOrder(d,o)}async cancelOrder(e,t,i={}){if(void 0===t)throw new d(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={id:parseInt(e),product_id:s.numericId},a=await this.privateDeleteOrders(this.extend(r,i)),n=this.safeValue(a,"result");return this.parseOrder(n,s)}async cancelAllOrders(e,t={}){if(void 0===e)throw new d(this.id+" cancelAllOrders() requires a symbol argument");await this.loadMarkets();const i={product_id:this.market(e).numericId};return this.privateDeleteOrdersAll(this.extend(i,t))}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("privateGetOrders",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("privateGetOrdersHistory",e,t,i,s)}async fetchOrdersWithMethod(e,t,i,s,r={}){await this.loadMarkets();const a={};let n;void 0!==t&&(n=this.market(t),a.product_ids=n.numericId),void 0!==i&&(a.start_time=i.toString()+"000"),void 0!==s&&(a.page_size=s);const o=await this[e](this.extend(a,r)),h=this.safeValue(o,"result",[]);return this.parseOrders(h,n,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.product_ids=a.numericId),void 0!==t&&(r.start_time=t.toString()+"000"),void 0!==i&&(r.page_size=i);const n=await this.privateGetFills(this.extend(r,s)),o=this.safeValue(n,"result",[]);return this.parseTrades(o,a,t,i)}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.asset_id=a.numericId),void 0!==i&&(r.page_size=i);const n=await this.privateGetWalletTransactions(this.extend(r,s)),o=this.safeValue(n,"result",[]);return this.parseLedger(o,a,t,i)}parseLedgerEntryType(e){return this.safeString({pnl:"pnl",deposit:"transaction",withdrawal:"transaction",commission:"fee",conversion:"trade",referral_bonus:"referral",commission_rebate:"rebate"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"uuid");let s;const r=this.safeValue(e,"meta_data",{}),a=this.safeString(r,"transaction_id");let n=this.safeString(e,"transaction_type");"deposit"===n||"commission_rebate"===n||"referral_bonus"===n||"pnl"===n||"withdrawal_cancellation"===n||"promo_credit"===n?s="in":"withdrawal"!==n&&"commission"!==n&&"conversion"!==n&&"perpetual_futures_funding"!==n||(s="out"),n=this.parseLedgerEntryType(n);const o=this.safeInteger(e,"asset_id"),h=this.safeValue(this.options,"currenciesByNumericId"),c=void 0===(t=this.safeValue(h,o,t))?void 0:t.code,d=this.safeNumber(e,"amount"),u=this.parse8601(this.safeString(e,"created_at")),l=this.safeNumber(e,"balance");return{info:e,id:i,direction:s,account:void 0,referenceId:a,referenceAccount:void 0,type:n,currency:c,amount:d,before:Math.max(0,l-d),after:l,status:"ok",timestamp:u,datetime:this.iso8601(u),fee:void 0}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={asset_symbol:this.currency(e).id},s=await this.privateGetDepositsAddress(this.extend(i,t)),r=this.safeValue(s,"result",{}),a=this.safeString(r,"address");return this.checkAddress(a),{currency:e,address:a,tag:void 0,network:void 0,info:s}}sign(e,t="public",i="GET",s={},r,a){const n="/"+this.version+"/"+this.implodeParams(e,s);let o=this.urls.api[t]+n;const h=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(h).length&&(o+="?"+this.urlencode(h));else if("private"===t){this.checkRequiredCredentials();const e=this.seconds().toString();r={"api-key":this.apiKey,timestamp:e};let t=i+e+n;if("GET"===i||"DELETE"===i){if(Object.keys(h).length){const e="?"+this.urlencode(h);t+=e,o+=e}}else t+=a=this.json(h),r["Content-Type"]="application/json";const s=this.hmac(this.encode(t),this.encode(this.secret));r.signature=s}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;const d=this.safeValue(o,"error",{}),u=this.safeString(d,"code");if(void 0!==u){const e=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,u,e),this.throwBroadlyMatchedException(this.exceptions.broad,u,e),new r(e)}}}},41680:(e,t,i)=>{"use strict";const s=i(48819),{TICK_SIZE:r}=i(62115),{AuthenticationError:a,ExchangeError:n,ArgumentsRequired:o,PermissionDenied:h,InvalidOrder:c,OrderNotFound:d,DDoSProtection:u,NotSupported:l,ExchangeNotAvailable:f,InsufficientFunds:p,BadRequest:m,InvalidAddress:g,OnMaintenance:y}=i(73449),b=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"deribit",name:"Deribit",countries:["NL"],version:"v2",userAgent:void 0,rateLimit:50,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!0,createDepositAddress:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchIndexOHLCV:!1,fetchMarkets:!0,fetchMarkOHLCV:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:void 0,fetchOrderTrades:!0,fetchPositions:!0,fetchPremiumIndexOHLCV:!1,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:void 0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1","3m":"3","5m":"5","10m":"10","15m":"15","30m":"30","1h":"60","2h":"120","3h":"180","6h":"360","12h":"720","1d":"1D"},urls:{test:"https://test.deribit.com",logo:"https://user-images.githubusercontent.com/1294454/41933112-9e2dd65a-798b-11e8-8440-5bab2959fcb8.jpg",api:"https://www.deribit.com",www:"https://www.deribit.com",doc:["https://docs.deribit.com/v2","https://github.com/deribit"],fees:"https://www.deribit.com/pages/information/fees",referral:{url:"https://www.deribit.com/reg-1189.4038",discount:.1}},api:{public:{get:{auth:1,exchange_token:1,fork_token:1,set_heartbeat:1,disable_heartbeat:1,get_time:1,hello:1,test:1,subscribe:1,unsubscribe:1,unsubscribe_all:1,get_announcements:1,get_book_summary_by_currency:1,get_book_summary_by_instrument:1,get_contract_size:1,get_currencies:1,get_delivery_prices:1,get_funding_chart_data:1,get_funding_rate_history:1,get_funding_rate_value:1,get_historical_volatility:1,get_index:1,get_index_price:1,get_index_price_names:1,get_instrument:1,get_instruments:1,get_last_settlements_by_currency:1,get_last_settlements_by_instrument:1,get_last_trades_by_currency:1,get_last_trades_by_currency_and_time:1,get_last_trades_by_instrument:1,get_last_trades_by_instrument_and_time:1,get_mark_price_history:1,get_order_book:1,get_trade_volumes:1,get_tradingview_chart_data:1,get_volatility_index_data:1,ticker:1}},private:{get:{logout:1,enable_cancel_on_disconnect:1,disable_cancel_on_disconnect:1,get_cancel_on_disconnect:1,subscribe:1,unsubscribe:1,unsubscribe_all:1,change_api_key_name:1,change_scope_in_api_key:1,change_subaccount_name:1,create_api_key:1,create_subaccount:1,disable_api_key:1,disable_tfa_for_subaccount:1,enable_affiliate_program:1,enable_api_key:1,get_access_log:1,get_account_summary:1,get_affiliate_program_info:1,get_email_language:1,get_new_announcements:1,get_portfolio_margins:1,get_position:1,get_positions:1,get_subaccounts:1,get_subaccounts_details:1,get_transaction_log:1,list_api_keys:1,remove_api_key:1,remove_subaccount:1,reset_api_key:1,set_announcement_as_read:1,set_api_key_as_default:1,set_email_for_subaccount:1,set_email_language:1,set_password_for_subaccount:1,toggle_notifications_from_subaccount:1,toggle_subaccount_login:1,execute_block_trade:4,get_block_trade:1,get_last_block_trades_by_currency:1,invalidate_block_trade_signature:1,verify_block_trade:4,buy:4,sell:4,edit:4,edit_by_label:4,cancel:4,cancel_all:4,cancel_all_by_currency:4,cancel_all_by_instrument:4,cancel_by_label:4,close_position:4,get_margins:1,get_mmp_config:1,get_open_orders_by_currency:1,get_open_orders_by_instrument:1,get_order_history_by_currency:1,get_order_history_by_instrument:1,get_order_margin_by_ids:1,get_order_state:1,get_stop_order_history:1,get_trigger_order_history:1,get_user_trades_by_currency:1,get_user_trades_by_currency_and_time:1,get_user_trades_by_instrument:1,get_user_trades_by_instrument_and_time:1,get_user_trades_by_order:1,reset_mmp:1,set_mmp_config:1,get_settlement_history_by_instrument:1,get_settlement_history_by_currency:1,cancel_transfer_by_id:1,cancel_withdrawal:1,create_deposit_address:1,get_current_deposit_address:1,get_deposits:1,get_transfers:1,get_withdrawals:1,submit_transfer_to_subaccount:1,submit_transfer_to_user:1,withdraw:1}}},exceptions:{9999:h,1e4:a,10001:n,10002:c,10003:c,10004:d,10005:c,10006:c,10007:c,10008:c,10009:p,10010:d,10011:c,10012:c,10013:h,10014:h,10015:h,10016:h,10017:h,10018:h,10019:h,10020:n,10021:c,10022:c,10023:c,10024:c,10025:c,10026:c,10027:c,10028:u,10029:d,10030:n,10031:n,10032:c,10033:l,10034:c,10035:c,10036:c,10040:f,10041:y,10043:c,10044:c,10045:c,10046:c,10047:u,10048:n,11008:c,11029:m,11030:n,11031:n,11035:u,11036:c,11037:m,11038:c,11039:c,11041:c,11042:h,11043:m,11044:c,11045:m,11046:m,11047:m,11048:n,11049:m,11050:m,11051:y,11052:n,11053:n,11090:g,11091:g,11092:g,11093:u,11094:n,11095:n,11096:n,12e3:a,12001:u,12002:n,12998:a,12003:a,12004:a,12005:a,12100:n,12999:a,13e3:a,13001:a,13002:h,13003:a,13004:a,13005:a,13006:a,13007:a,13008:n,13009:a,13010:m,13011:m,13012:h,13013:m,13014:m,13015:m,13016:m,13017:n,13018:n,13019:n,13020:n,13021:h,13025:n,"-32602":m,"-32601":m,"-32700":m,"-32000":m},precisionMode:r,options:{code:"BTC",fetchBalance:{code:"BTC"}}})}async fetchTime(e={}){const t=await this.publicGetGetTime(e);return this.safeInteger(t,"result")}codeFromOptions(e,t={}){const i=this.safeValue(this.options,"code","BTC"),s=this.safeValue(this.options,e,{}),r=this.safeValue(s,"code",i);return this.safeValue(t,"code",r)}async fetchStatus(e={}){return await this.publicGetTest(this.extend({},e)),this.status=this.extend(this.status,{status:"ok",updated:this.milliseconds()}),this.status}async fetchMarkets(e={}){const t=await this.publicGetGetCurrencies(e),i=this.safeValue(t,"result",[]),s=[];for(let t=0;t<i.length;t++){const r={currency:this.safeString(i[t],"currency")},a=await this.publicGetGetInstruments(this.extend(r,e)),n=this.safeValue(a,"result",[]);for(let e=0;e<n.length;e++){const t=n[e],i=this.safeString(t,"instrument_name"),r=this.safeString(t,"base_currency"),a=this.safeString(t,"quote_currency"),o=this.safeCurrencyCode(r),h=this.safeCurrencyCode(a),c=this.safeString(t,"kind"),d="future"===c,u="option"===c,l=this.safeValue(t,"is_active"),f=this.safeNumber(t,"min_trade_amount"),p=this.safeNumber(t,"tick_size"),m={amount:f,price:p};s.push({id:i,symbol:i,base:o,quote:h,active:l,precision:m,taker:this.safeNumber(t,"taker_commission"),maker:this.safeNumber(t,"maker_commission"),limits:{amount:{min:f,max:void 0},price:{min:p,max:void 0},cost:{min:void 0,max:void 0}},type:c,spot:!1,future:d,option:u,info:t})}}return s}async fetchBalance(e={}){await this.loadMarkets();const t=this.codeFromOptions("fetchBalance",e),i={currency:this.currency(t).id},s=await this.privateGetGetAccountSummary(this.extend(i,e)),r={info:s},a=this.safeValue(s,"result",{}),n=this.safeString(a,"currency"),o=this.safeCurrencyCode(n),h=this.account();return h.free=this.safeString(a,"available_funds"),h.used=this.safeString(a,"maintenance_margin"),h.total=this.safeString(a,"equity"),r[o]=h,this.parseBalance(r)}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetCreateDepositAddress(this.extend(i,t)),r=this.safeValue(s,"result",{}),a=this.safeString(r,"address");return this.checkAddress(a),{currency:e,address:a,tag:void 0,info:s}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetGetCurrentDepositAddress(this.extend(i,t)),r=this.safeValue(s,"result",{}),a=this.safeString(r,"address");return this.checkAddress(a),{currency:e,address:a,tag:void 0,network:void 0,info:s}}parseTicker(e,t){const i=this.safeInteger2(e,"timestamp","creation_timestamp"),s=this.safeString(e,"instrument_name"),r=this.safeSymbol(s,t),a=this.safeNumber2(e,"last_price","last"),n=this.safeValue(e,"stats",e);return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber2(n,"high","max_price"),low:this.safeNumber2(n,"low","min_price"),bid:this.safeNumber2(e,"best_bid_price","bid_price"),bidVolume:this.safeNumber(e,"best_bid_amount"),ask:this.safeNumber2(e,"best_ask_price","ask_price"),askVolume:this.safeNumber(e,"best_ask_amount"),vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeNumber(n,"volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={instrument_name:i.id},r=await this.publicGetTicker(this.extend(s,t)),a=this.safeValue(r,"result");return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.codeFromOptions("fetchTickers",t),s={currency:this.currency(i).id},r=await this.publicGetGetBookSummaryByCurrency(this.extend(s,t)),a=this.safeValue(r,"result",[]),n={};for(let e=0;e<a.length;e++){const t=this.parseTicker(a[e]);n[t.symbol]=t}return this.filterByArray(n,"symbol",e)}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={instrument_name:a.id,resolution:this.timeframes[t]},h=this.parseTimeframe(t),c=this.milliseconds();if(void 0===i){if(void 0===s)throw new o(this.id+" fetchOHLCV() requires a since argument or a limit argument");n.start_timestamp=c-(s-1)*h*1e3,n.end_timestamp=c}else n.start_timestamp=i,n.end_timestamp=void 0===s?c:this.sum(i,s*h*1e3);const d=await this.publicGetGetTradingviewChartData(this.extend(n,r)),u=this.safeValue(d,"result",{}),l=this.convertTradingViewToOHLCV(u,"ticks","open","high","low","close","volume",!0);return this.parseOHLCVs(l,a,t,i,s)}parseTrade(e,t){const i=this.safeString(e,"trade_id"),s=this.safeString(e,"instrument_name"),r=this.safeSymbol(s,t),a=this.safeInteger(e,"timestamp"),n=this.safeString(e,"direction"),o=this.safeString(e,"price"),h=this.safeString(e,"amount"),c=this.safeString(e,"liquidity");let d;void 0!==c&&(d="M"===c?"maker":"taker");const u=this.safeString(e,"fee");let l;if(void 0!==u){const t=this.safeString(e,"fee_currency");l={cost:u,currency:this.safeCurrencyCode(t)}}return this.safeTrade({id:i,info:e,timestamp:a,datetime:this.iso8601(a),symbol:r,order:this.safeString(e,"order_id"),type:this.safeString(e,"order_type"),side:n,takerOrMaker:d,price:o,amount:h,cost:void 0,fee:l},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={instrument_name:r.id,include_old:!0},n=void 0===t?"publicGetGetLastTradesByInstrument":"publicGetGetLastTradesByInstrumentAndTime";void 0!==t&&(a.start_timestamp=t),void 0!==i&&(a.count=i);const o=await this[n](this.extend(a,s)),h=this.safeValue(o,"result",{}),c=this.safeValue(h,"trades",[]);return this.parseTrades(c,r,t,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={instrument_name:this.market(e).id};void 0!==t&&(s.depth=t);const r=await this.publicGetGetOrderBook(this.extend(s,i)),a=this.safeValue(r,"result",{}),n=this.safeInteger(a,"timestamp"),o=this.safeInteger(a,"change_id"),h=this.parseOrderBook(a,e,n);return h.nonce=o,h}parseOrderStatus(e){return this.safeString({open:"open",cancelled:"canceled",filled:"closed",rejected:"rejected",untriggered:"open"},e,e)}parseTimeInForce(e){return this.safeString({good_til_cancelled:"GTC",fill_or_kill:"FOK",immediate_or_cancel:"IOC"},e,e)}parseOrder(e,t){const i=this.safeInteger(e,"creation_timestamp"),s=this.safeInteger(e,"last_update_timestamp"),r=this.safeString(e,"order_id"),a=this.safeString(e,"price"),n=this.safeString(e,"average_price"),o=this.safeString(e,"amount"),h=this.safeString(e,"filled_amount");let c;void 0!==h&&b.stringGt(h,"0")&&(c=s);const d=this.parseOrderStatus(this.safeString(e,"order_state")),u=this.safeString(e,"instrument_name");t=this.safeMarket(u,t);const l=this.safeStringLower(e,"direction");let f,p=this.safeString(e,"commission");void 0!==p&&(p=b.stringAbs(p),f={cost:p,currency:t.base});const m=this.safeString(e,"order_type");let g=this.safeValue(e,"trades");void 0!==g&&(g=this.parseTrades(g,t));const y=this.parseTimeInForce(this.safeString(e,"time_in_force")),v=this.safeValue(e,"stop_price"),w=this.safeValue(e,"post_only");return this.safeOrder2({info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:c,symbol:t.symbol,type:m,timeInForce:y,postOnly:w,side:l,price:a,stopPrice:v,amount:o,cost:void 0,average:n,filled:h,remaining:void 0,status:d,fee:f,trades:g},t)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privateGetGetOrderState(this.extend(s,i)),a=this.safeValue(r,"result");return this.parseOrder(a)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),h={instrument_name:n.id,amount:this.amountToPrecision(e,s),type:t};let c=!1,d=!1;if("limit"===t?c=!0:"stop_limit"===t&&(c=!0,d=!0),c){if(void 0===r)throw new o(this.id+" createOrder() requires a price argument for a "+t+" order");h.price=this.priceToPrecision(e,r)}if(d){const i=this.safeNumber2(a,"stop_price","stopPrice");if(void 0===i)throw new o(this.id+" createOrder() requires a stop_price or stopPrice param for a "+t+" order");h.stop_price=this.priceToPrecision(e,i),a=this.omit(a,["stop_price","stopPrice"])}const u="privateGet"+this.capitalize(i),l=await this[u](this.extend(h,a)),f=this.safeValue(l,"result",{}),p=this.safeValue(f,"order"),m=this.safeValue(f,"trades",[]);return p.trades=m,this.parseOrder(p,n)}async editOrder(e,t,i,s,r,a,n={}){if(void 0===r)throw new o(this.id+" editOrder() requires an amount argument");if(void 0===a)throw new o(this.id+" editOrder() requires a price argument");await this.loadMarkets();const h={order_id:e,amount:this.amountToPrecision(t,r),price:this.priceToPrecision(t,a)},c=await this.privateGetEdit(this.extend(h,n)),d=this.safeValue(c,"result",{}),u=this.safeValue(d,"order"),l=this.safeValue(d,"trades",[]);return u.trades=l,this.parseOrder(u)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privateGetCancel(this.extend(s,i)),a=this.safeValue(r,"result",{});return this.parseOrder(a)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s;if(void 0===e)s="privateGetCancelAll";else{s="privateGetCancelAllByInstrument";const t=this.market(e);i.instrument_name=t.id}return await this[s](this.extend(i,t))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a,n;if(void 0===e){const e=this.codeFromOptions("fetchOpenOrders",s),t=this.currency(e);r.currency=t.id,n="privateGetGetOpenOrdersByCurrency"}else a=this.market(e),r.instrument_name=a.id,n="privateGetGetOpenOrdersByInstrument";const o=await this[n](this.extend(r,s)),h=this.safeValue(o,"result",[]);return this.parseOrders(h,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a,n;if(void 0===e){const e=this.codeFromOptions("fetchClosedOrders",s),t=this.currency(e);r.currency=t.id,n="privateGetGetOrderHistoryByCurrency"}else a=this.market(e),r.instrument_name=a.id,n="privateGetGetOrderHistoryByInstrument";const o=await this[n](this.extend(r,s)),h=this.safeValue(o,"result",[]);return this.parseOrders(h,a,t,i)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();const a={order_id:e},n=await this.privateGetGetUserTradesByOrder(this.extend(a,r)),o=this.safeValue(n,"result",{});return this.parseTrades(o,void 0,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={include_old:!0};let a,n;if(void 0===e){const e=this.codeFromOptions("fetchMyTrades",s),i=this.currency(e);r.currency=i.id,void 0===t?n="privateGetGetUserTradesByCurrency":(n="privateGetGetUserTradesByCurrencyAndTime",r.start_timestamp=t)}else a=this.market(e),r.instrument_name=a.id,void 0===t?n="privateGetGetUserTradesByInstrument":(n="privateGetGetUserTradesByInstrumentAndTime",r.start_timestamp=t);void 0!==i&&(r.count=i);const o=await this[n](this.extend(r,s)),h=this.safeValue(o,"result",{}),c=this.safeValue(h,"trades",[]);return this.parseTrades(c,a,t,i)}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchDeposits() requires a currency code argument");await this.loadMarkets();const r=this.currency(e),a={currency:r.id};void 0!==i&&(a.count=i);const n=await this.privateGetGetDeposits(this.extend(a,s)),h=this.safeValue(n,"result",{}),c=this.safeValue(h,"data",[]);return this.parseTransactions(c,r,t,i,s)}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchWithdrawals() requires a currency code argument");await this.loadMarkets();const r=this.currency(e),a={currency:r.id};void 0!==i&&(a.count=i);const n=await this.privateGetGetWithdrawals(this.extend(a,s)),h=this.safeValue(n,"result",{}),c=this.safeValue(h,"data",[]);return this.parseTransactions(c,r,t,i,s)}parseTransactionStatus(e){return this.safeString({completed:"ok",unconfirmed:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"currency"),s=this.safeCurrencyCode(i,t),r=this.safeInteger2(e,"created_timestamp","received_timestamp"),a=this.safeInteger(e,"updated_timestamp"),n=this.parseTransactionStatus(this.safeString(e,"state")),o=this.safeString(e,"address"),h=this.safeNumber(e,"fee");let c,d="deposit";return void 0!==h&&(d="withdrawal",c={cost:h,currency:s}),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"transaction_id"),timestamp:r,datetime:this.iso8601(r),address:o,addressTo:o,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:d,amount:this.safeNumber(e,"amount"),currency:s,status:n,updated:a,fee:c}}async fetchPosition(e,t={}){await this.loadMarkets();const i={instrument_name:this.market(e).id},s=await this.privateGetGetPosition(this.extend(i,t));return this.safeValue(s,"result")}async fetchPositions(e,t={}){await this.loadMarkets();const i=this.codeFromOptions("fetchPositions",t),s={currency:this.currency(i).id},r=await this.privateGetGetPositions(this.extend(s,t));return this.safeValue(r,"result",[])}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,address:i,amount:t};void 0!==this.twofa&&(a.tfa=this.oath());const n=await this.privateGetWithdraw(this.extend(a,r));return{info:n,id:this.safeString(n,"id")}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n="/api/"+this.version+"/"+t+"/"+e;if("public"===t&&Object.keys(s).length&&(n+="?"+this.urlencode(s)),"private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.milliseconds().toString(),a="";Object.keys(s).length&&(n+="?"+this.urlencode(s));const o=t+"\n"+e+"\n"+i+"\n"+n+"\n"+a+"\n",h=this.hmac(this.encode(o),this.encode(this.secret),"sha256");r={Authorization:"deri-hmac-sha256 id="+this.apiKey+",ts="+t+",sig="+h+",nonce="+e}}return{url:this.urls.api+n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o,h,c){if(!o)return;const d=this.safeValue(o,"error");if(void 0!==d){const e=this.safeString(d,"code"),t=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,e,t),new n(t)}}}},6755:(e,t,i)=>{"use strict";const s=i(48819),{AccountSuspended:r,BadRequest:a,BadResponse:n,NetworkError:o,DDoSProtection:h,AuthenticationError:c,PermissionDenied:d,ExchangeError:u,InsufficientFunds:l,InvalidOrder:f,InvalidNonce:p,OrderNotFound:m,InvalidAddress:g,RateLimitExceeded:y,BadSymbol:b}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"digifinex",name:"DigiFinex",countries:["SG"],version:"v3",rateLimit:900,has:{cancelOrder:!0,cancelOrders:!0,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","12h":"720","1d":"1D","1w":"1W"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87443315-01283a00-c5fe-11ea-8628-c2a0feaf07ac.jpg",api:"https://openapi.digifinex.com",www:"https://www.digifinex.com",doc:["https://docs.digifinex.com"],fees:"https://digifinex.zendesk.com/hc/en-us/articles/360000328422-Fee-Structure-on-DigiFinex",referral:"https://www.digifinex.com/en-ww/from/DhOzBg?channelCode=ljaUPp"},api:{public:{get:["{market}/symbols","kline","margin/currencies","margin/symbols","markets","order_book","ping","spot/symbols","time","trades","trades/symbols","ticker","currencies"]},private:{get:["{market}/financelog","{market}/mytrades","{market}/order","{market}​/order​/detail","{market}/order/current","{market}/order/history","margin/assets","margin/financelog","margin/mytrades","margin/order","margin/order/current","margin/order/history","margin/positions","otc/financelog","spot/assets","spot/financelog","spot/mytrades","spot/order","spot/order/current","spot/order/history","deposit/address","deposit/history","withdraw/history"],post:["{market}/order/cancel","{market}/order/new","{market}​/order​/batch_new","margin/order/cancel","margin/order/new","margin/position/close","spot/order/cancel","spot/order/new","transfer","withdraw/new","withdraw/cancel"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:this.parseNumber("0.002"),taker:this.parseNumber("0.002")}},exceptions:{exact:{10001:[a,"Wrong request method, please check it's a GET ot POST request"],10002:[c,"Invalid ApiKey"],10003:[c,"Sign doesn't match"],10004:[a,"Illegal request parameters"],10005:[h,"Request frequency exceeds the limit"],10006:[d,"Unauthorized to execute this request"],10007:[d,"IP address Unauthorized"],10008:[p,"Timestamp for this request is invalid, timestamp must within 1 minute"],10009:[o,"Unexist endpoint, please check endpoint URL"],10011:[r,"ApiKey expired. Please go to client side to re-create an ApiKey"],20001:[d,"Trade is not open for this trading pair"],20002:[d,"Trade of this trading pair is suspended"],20003:[f,"Invalid price or amount"],20007:[f,"Price precision error"],20008:[f,"Amount precision error"],20009:[f,"Amount is less than the minimum requirement"],20010:[f,"Cash Amount is less than the minimum requirement"],20011:[l,"Insufficient balance"],20012:[a,"Invalid trade type, valid value: buy/sell)"],20013:[f,"No order info found"],20014:[a,"Invalid date, Valid format: 2018-07-25)"],20015:[a,"Date exceeds the limit"],20018:[d,"Your trading rights have been banned by the system"],20019:[b,'Wrong trading pair symbol. Correct format:"usdt_btc". Quote asset is in the front'],20020:[h,"You have violated the API operation trading rules and temporarily forbid trading. At present, we have certain restrictions on the user's transaction rate and withdrawal rate."],5e4:[u,"Exception error"],20021:[a,"Invalid currency"],20022:[a,"The ending timestamp must be larger than the starting timestamp"],20023:[a,"Invalid transfer type"],20024:[a,"Invalid amount"],20025:[a,"This currency is not transferable at the moment"],20026:[l,"Transfer amount exceed your balance"],20027:[d,"Abnormal account status"],20028:[d,"Blacklist for transfer"],20029:[d,"Transfer amount exceed your daily limit"],20030:[a,"You have no position on this trading pair"],20032:[d,"Withdrawal limited"],20033:[a,"Wrong Withdrawal ID"],20034:[d,"Withdrawal service of this crypto has been closed"],20035:[d,"Withdrawal limit"],20036:[u,"Withdrawal cancellation failed"],20037:[g,"The withdrawal address, Tag or chain type is not included in the withdrawal management list"],20038:[g,"The withdrawal address is not on the white list"],20039:[u,"Can't be canceled in current status"],20040:[y,"Withdraw too frequently; limitation: 3 times a minute, 100 times a day"],20041:[d,"Beyond the daily withdrawal limit"],20042:[b,"Current trading pair does not support API trading"]},broad:{}},options:{defaultType:"spot",types:["spot","margin","otc"]},commonCurrencies:{BHT:"Black House Test",EPS:"Epanus",MBN:"Mobilian Coin",TEL:"TEL666"}})}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i=this.safeValue(t,"data",[]),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currency"),a=this.safeCurrencyCode(r),n=this.safeValue(t,"deposit_status",1),o=this.safeValue(t,"withdraw_status",1),h=n&&o,c=this.safeNumber(t,"withdraw_fee_rate");a in s?Array.isArray(s[a].info)?s[a].info.push(t):s[a].info=[s[a].info,t]:s[a]={id:r,code:a,info:t,type:void 0,name:void 0,active:h,fee:c,precision:8,limits:{amount:{min:void 0,max:void 0},withdraw:{min:this.safeNumber(t,"min_withdraw_amount"),max:void 0}}}}return s}async fetchMarkets(e={}){const t=this.safeValue(this.options,"fetchMarkets",{}),i=this.safeString(t,"method","fetch_markets_v2");return await this[i](e)}async fetchMarketsV2(e={}){const t=await this.publicGetTradesSymbols(e),i=this.safeValue(t,"symbol_list",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"symbol"),a=this.safeString(t,"base_asset"),n=this.safeString(t,"quote_asset"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c=o+"/"+h,d={amount:this.safeInteger(t,"amount_precision"),price:this.safeInteger(t,"price_precision")},u={amount:{min:this.safeNumber(t,"minimum_amount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(t,"minimum_value"),max:void 0}},l=!!this.safeInteger(t,"is_allow",1),f="spot",p="spot"===f,m="margin"===f;s.push({id:r,symbol:c,base:o,quote:h,baseId:a,quoteId:n,active:l,type:f,spot:p,margin:m,precision:d,limits:u,info:t})}return s}async fetchMarketsV1(e={}){const t=await this.publicGetMarkets(e),i=this.safeValue(t,"data",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"market"),[a,n]=r.split("_"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c=o+"/"+h,d={amount:this.safeInteger(t,"volume_precision"),price:this.safeInteger(t,"price_precision")},u={amount:{min:this.safeNumber(t,"min_volume"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(t,"min_amount"),max:void 0}},l=void 0;s.push({id:r,symbol:c,base:o,quote:h,baseId:a,quoteId:n,active:l,precision:d,limits:u,info:t})}return s}async fetchBalance(e={}){const t=this.safeString(this.options,"defaultType","spot"),i=this.safeString(e,"type",t);e=this.omit(e,"type");const s="privateGet"+this.capitalize(i)+"Assets",r=await this[s](e),a=this.safeValue(r,"list",[]),n={info:r};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t,"currency"),s=this.safeCurrencyCode(i),r=this.account();r.used=this.safeString(t,"frozen"),r.free=this.safeString(t,"free"),r.total=this.safeString(t,"total"),n[s]=r}return this.parseBalance(n)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.publicGetOrderBook(this.extend(s,i)),a=this.safeTimestamp(r,"date");return this.parseOrderBook(r,e,a)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s={},r=this.safeValue(i,"ticker",[]),a=this.safeInteger(i,"date");for(let e=0;e<r.length;e++){const t=this.extend({date:a},r[e]),i=this.parseTicker(t);s[i.symbol]=i}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetTicker(this.extend(s,t)),a=this.safeInteger(r,"date"),n=this.safeValue(r,"ticker",[]),o=this.safeValue(n,0,{}),h=this.extend({date:a},o);return this.parseTicker(h,i)}parseTicker(e,t){const i=this.safeStringUpper(e,"symbol"),s=this.safeSymbol(i,t,"_"),r=this.safeTimestamp(e,"date"),a=this.safeNumber(e,"last"),n=this.safeNumber(e,"change");return{symbol:s,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:n,average:void 0,baseVolume:this.safeNumber(e,"vol"),quoteVolume:this.safeNumber(e,"base_vol"),info:e}}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"order_id"),r=this.safeTimestamp2(e,"date","timestamp"),a=this.safeString2(e,"type","side"),n=this.safeString(e,"price"),o=this.safeString(e,"amount"),h=this.safeString(e,"symbol"),c=this.safeSymbol(h,t,"_"),d=this.safeValue(e,"is_maker"),u=this.safeString(e,"fee");let l;if(void 0!==u){const t=this.safeString(e,"fee_currency");l={cost:u,currency:this.safeCurrencyCode(t)}}return this.safeTrade({id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:c,type:void 0,order:s,side:a,price:n,amount:o,cost:void 0,takerOrMaker:d,fee:l},t)}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeTimestamp(t,"server_time")}async fetchStatus(e={}){return await this.publicGetPing(e),this.status=this.extend(this.status,{status:"ok",updated:this.milliseconds()}),this.status}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.limit=i);const n=await this.publicGetTrades(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseTrades(o,r,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeNumber(e,5),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,2),this.safeNumber(e,1)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id,period:this.timeframes[t]};if(void 0!==i){const e=parseInt(i/1e3);if(n.start_time=e,void 0!==s){const i=this.parseTimeframe(t);n.end_time=this.sum(e,s*i)}}else if(void 0!==s){const e=this.seconds(),i=this.parseTimeframe(t);n.startTime=this.sum(e,-s*i)}const o=await this.publicGetKline(this.extend(n,r)),h=this.safeValue(o,"data",[]);return this.parseOHLCVs(h,a,t,i,s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o=this.safeString(this.options,"defaultType","spot"),h=this.safeString(a,"type",o);a=this.omit(a,"type");const c={market:h,symbol:n.id,amount:this.amountToPrecision(e,s)};let d="";"market"===t?d="_market":c.price=this.priceToPrecision(e,r),c.type=i+d;const u=await this.privatePostMarketOrderNew(this.extend(c,a)),l=this.parseOrder(u,n);return this.extend(l,{symbol:e,side:i,type:t,amount:s,price:r})}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=this.safeString(this.options,"defaultType","spot"),r=this.safeString(i,"type",s);i=this.omit(i,"type");const a={market:r,order_id:e},n=await this.privatePostMarketOrderCancel(this.extend(a,i));if(1!==this.safeValue(n,"success",[]).length)throw new m(this.id+" cancelOrder "+e+" not found");return n}async cancelOrders(e,t,i={}){await this.loadMarkets();const s=this.safeString(this.options,"defaultType","spot"),r=this.safeString(i,"type",s);i=this.omit(i,"type");const a={market:r,order_id:e.join(",")},n=await this.privatePostCancelOrder(this.extend(a,i));if(this.safeValue(n,"success",[]).length<1)throw new m(this.id+" cancelOrders error");return n}parseOrderStatus(e){return this.safeString({0:"open",1:"open",2:"closed",3:"canceled",4:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_id"),s=this.safeTimestamp(e,"created_date"),r=this.safeTimestamp(e,"finished_date");let a,n=this.safeString(e,"type");if(void 0!==n){const e=n.split("_");e.length>1?(n=e[0],a=e[1]):a="limit"}const o=this.parseOrderStatus(this.safeString(e,"status")),h=this.safeString(e,"symbol"),c=this.safeSymbol(h,t,"_"),d=this.safeString(e,"amount"),u=this.safeString(e,"executed_amount"),l=this.safeString(e,"price"),f=this.safeString(e,"avg_price");return this.safeOrder2({info:e,id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:r,symbol:c,type:a,timeInForce:void 0,postOnly:void 0,side:n,price:l,stopPrice:void 0,amount:d,filled:u,remaining:void 0,cost:void 0,average:f,status:o,fee:void 0,trades:void 0},t)}async fetchOpenOrders(e,t,i,s={}){const r=this.safeString(this.options,"defaultType","spot"),a=this.safeString(s,"type",r);let n;s=this.omit(s,"type"),await this.loadMarkets();const o={market:a};void 0!==e&&(n=this.market(e),o.symbol=n.id);const h=await this.privateGetMarketOrderCurrent(this.extend(o,s)),c=this.safeValue(h,"data",[]);return this.parseOrders(c,n,t,i)}async fetchOrders(e,t,i,s={}){const r=this.safeString(this.options,"defaultType","spot"),a=this.safeString(s,"type",r);let n;s=this.omit(s,"type"),await this.loadMarkets();const o={market:a};void 0!==e&&(n=this.market(e),o.symbol=n.id),void 0!==t&&(o.start_time=parseInt(t/1e3)),void 0!==i&&(o.limit=i);const h=await this.privateGetMarketOrderHistory(this.extend(o,s)),c=this.safeValue(h,"data",[]);return this.parseOrders(c,n,t,i)}async fetchOrder(e,t,i={}){const s=this.safeString(this.options,"defaultType","spot"),r=this.safeString(i,"type",s);let a;i=this.omit(i,"type"),await this.loadMarkets(),void 0!==t&&(a=this.market(t));const n={market:r,order_id:e},o=await this.privateGetMarketOrder(this.extend(n,i)),h=this.safeValue(o,"data",[]),c=this.safeValue(h,0);if(void 0===c)throw new m(this.id+" fetchOrder() order "+e+" not found");return this.parseOrder(c,a)}async fetchMyTrades(e,t,i,s={}){const r=this.safeString(this.options,"defaultType","spot"),a=this.safeString(s,"type",r);let n;s=this.omit(s,"type"),await this.loadMarkets();const o={market:a};void 0!==e&&(n=this.market(e),o.symbol=n.id),void 0!==t&&(o.start_time=parseInt(t/1e3)),void 0!==i&&(o.limit=i);const h=await this.privateGetMarketMytrades(this.extend(o,s)),c=this.safeValue(h,"list",[]);return this.parseTrades(c,n,t,i)}parseLedgerEntryType(e){return this.safeString({},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"num"),s=this.parseLedgerEntryType(this.safeString(e,"type")),r=this.safeCurrencyCode(this.safeString(e,"currency_mark"),t),a=this.safeTimestamp(e,"time");return{info:e,id:i,direction:void 0,account:void 0,referenceId:void 0,referenceAccount:void 0,type:s,currency:r,amount:void 0,before:void 0,after:this.safeNumber(e,"balance"),status:"ok",timestamp:a,datetime:this.iso8601(a),fee:void 0}}async fetchLedger(e,t,i,s={}){const r=this.safeString(this.options,"defaultType","spot"),a=this.safeString(s,"type",r);s=this.omit(s,"type"),await this.loadMarkets();const n={market:a};let o;void 0!==e&&(o=this.currency(e),n.currency_mark=o.id),void 0!==t&&(n.start_time=parseInt(t/1e3)),void 0!==i&&(n.limit=i);const h=await this.privateGetMarketFinancelog(this.extend(n,s)),c=this.safeValue(h,"data",{}),d=this.safeValue(c,"finance",[]);return this.parseLedger(d,o,t,i)}parseDepositAddress(e,t){const i=this.safeString(e,"address"),s=this.safeString(e,"addressTag"),r=this.safeStringUpper(e,"currency");return{info:e,currency:this.safeCurrencyCode(r),address:i,tag:s,network:void 0}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetDepositAddress(this.extend(i,t)),r=this.safeValue(s,"data",[]),a=this.parseDepositAddresses(r),n=this.safeValue(a,e);if(void 0===n)throw new g(this.id+" fetchDepositAddress did not return an address for "+e+" - create the deposit address in the user settings on the exchange website first.");return n}async fetchTransactionsByType(e,t,i,s,r={}){let a;await this.loadMarkets();const n={};void 0!==t&&(a=this.currency(t),n.currency=a.id),void 0!==s&&(n.size=Math.min(500,s));const o="deposit"===e?"privateGetDepositHistory":"privateGetWithdrawHistory",h=await this[o](this.extend(n,r)),c=this.safeValue(h,"data",[]);return this.parseTransactions(c,a,i,s,{type:e})}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsByType("deposit",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsByType("withdrawal",e,t,i,s)}parseTransactionStatus(e){return this.safeString({0:"pending",1:"canceled",2:"pending",3:"failed",4:"pending",5:"failed",6:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString2(e,"id","withdraw_id"),s=this.safeString(e,"address");let r=this.safeString(e,"memo");void 0!==r&&r.length<1&&(r=void 0);const a=this.safeString(e,"hash"),n=this.safeStringUpper(e,"currency"),o=this.safeCurrencyCode(n,t),h=this.parse8601(this.safeString(e,"created_date")),c=this.parse8601(this.safeString(e,"finished_date")),d=this.parseTransactionStatus(this.safeString(e,"state")),u=this.safeNumber(e,"amount"),l=this.safeNumber(e,"fee");let f;return void 0!==l&&(f={currency:o,cost:l}),{info:e,id:i,txid:a,timestamp:h,datetime:this.iso8601(h),address:s,addressTo:s,addressFrom:void 0,tag:r,tagTo:r,tagFrom:void 0,type:void 0,amount:u,currency:o,status:d,updated:c,fee:f}}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),n={address:i,amount:parseFloat(t),currency:a.id};void 0!==s&&(n.memo=s);const o=await this.privatePostWithdrawNew(this.extend(n,r));return this.parseTransaction(o,a)}sign(e,t="public",i="GET",s={},r,a){const n=this.version;let o=this.urls.api+"/"+n+"/"+this.implodeParams(e,s);const h=this.omit(s,this.extractParams(e)),c=this.urlencode(this.keysort(h));if("private"===t){const e=this.nonce().toString(),t=c,s=this.hmac(this.encode(t),this.encode(this.secret));"GET"===i?c&&(o+="?"+c):"POST"===i&&(r={"Content-Type":"application/x-www-form-urlencoded"},c&&(a=c)),r={"ACCESS-KEY":this.apiKey,"ACCESS-SIGN":s,"ACCESS-TIMESTAMP":e}}else c&&(o+="?"+c);return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o,h,c){if(!o)return;const d=this.safeString(o,"code");if("0"===d||"200"===d)return;const l=this.id+" "+a;if(void 0===d)throw new n(l);const f=[u,l],[p,m]=this.safeValue(this.exceptions.exact,d,f);throw new p(m)}}},68170:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,BadSymbol:n}=i(73449),o=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"eqonex",name:"EQONEX",countries:["US","SG"],rateLimit:10,has:{cancelOrder:!0,CORS:void 0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:void 0,fetchTrades:!0,fetchTradingFees:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":1,"5m":2,"15m":3,"1h":4,"6h":5,"1d":6,"7d":7},urls:{logo:"https://user-images.githubusercontent.com/51840849/122649755-1a076c80-d138-11eb-8f2e-9a9166a03d79.jpg",test:{public:"https://testnet.eqonex.com/api",private:"https://testnet.eqonex.com/api"},api:{public:"https://eqonex.com/api",private:"https://eqonex.com/api"},www:"https://eqonex.com",doc:["https://developer.eqonex.com"],referral:"https://eqonex.com?referredByCode=zpa8kij4ouvBFup3"},api:{public:{get:["health","getInstruments","getInstrumentPairs","getOrderBook","getRisk","getTradeHistory","getFundingRateHistory","getChart","getExchangeInfo"]},private:{post:["logon","order","cancelOrder","cancelReplaceOrder","getOrder","getOrders","getOrderStatus","getOrderHistory","userTrades","getPositions","cancelAll","getUserHistory","getRisk","getDepositAddresses","getDepositHistory","getWithdrawRequests","sendWithdrawRequest","getTransferHistory"]}},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},exceptions:{broad:{"symbol not found":n}}})}async fetchMarkets(e={}){const t=await this.publicGetGetInstrumentPairs(this.extend({verbose:!0},e)),i=this.safeValue(t,"instrumentPairs",[]),s=[];for(let e=0;e<i.length;e++){const t=this.parseMarket(i[e]);s.push(t)}return s}parseMarket(e){const t=this.safeString(e,"instrumentId"),i=this.safeString(e,"symbol"),s=this.safeString(e,"assetType"),r="PAIR"===s,a="PERPETUAL_SWAP"===s,n=a?"swap":"spot",o=this.safeString(e,"currency"),h=this.safeString(e,"contAmtCurr"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(h);return{id:t,uppercaseId:i,symbol:a?i:c+"/"+d,base:c,quote:d,baseId:o,quoteId:h,type:n,spot:r,swap:a,active:1===this.safeInteger(e,"securityStatus"),precision:{amount:this.safeInteger(e,"quantity_scale"),price:this.safeInteger(e,"price_scale")},limits:{amount:{min:this.safeNumber(e,"minTradeVol"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:e}}async fetchCurrencies(e={}){const t=await this.publicGetGetInstruments(e),i={},s=this.safeValue(t,"instruments",[]);for(let e=0;e<s.length;e++){const t=this.parseCurrency(s[e]);i[t.code]=t}return i}parseCurrency(e){const t=this.safeString(e,0),i=this.safeString(e,1),s=this.safeCurrencyCode(i),r=this.safeInteger(e,2),a=this.safeInteger(e,3),n=Math.max(r,a),o=this.safeString(e,6),h=1===this.safeInteger(e,4);return{id:t,info:e,uppercaseId:i,code:s,name:o,precision:n,fee:this.safeNumber(e,5),active:h,limits:{amount:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={pairId:parseInt(a.id),timespan:this.timeframes[t]};void 0!==s&&(n.limit=s);const o=await this.publicGetGetChart(this.extend(n,r)),h=this.safeValue(o,"chart",[]);return this.parseOHLCVs(h,a,t,i,s)}parseOHLCV(e,t){return[this.safeInteger(e,0),this.parseNumber(this.convertFromScale(this.safeString(e,1),t.precision.price)),this.parseNumber(this.convertFromScale(this.safeString(e,2),t.precision.price)),this.parseNumber(this.convertFromScale(this.safeString(e,3),t.precision.price)),this.parseNumber(this.convertFromScale(this.safeString(e,4),t.precision.price)),this.parseNumber(this.convertFromScale(this.safeString(e,5),t.precision.amount))]}parseBidAsk(e,t=0,i=1,s){if(void 0===s)throw new a(this.id+" parseBidAsk() requires a market argument");const r=this.safeString(e,t),n=this.safeString(e,i);return[this.parseNumber(this.convertFromScale(r,s.precision.price)),this.parseNumber(this.convertFromScale(n,s.precision.amount))]}parseOrderBook(e,t,i,s="bids",r="asks",a=0,n=1,o){const h={timestamp:i,datetime:this.iso8601(i),nonce:void 0},c=[s,r];for(let t=0;t<c.length;t++){const i=c[t],s=[],r=this.safeValue(e,i);for(let e=0;e<r.length;e++)s.push(this.parseBidAsk(r[e],a,n,o));h[i]=s}return h[s]=this.sortBy(h[s],0,!0),h[r]=this.sortBy(h[r],0),h}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={pairId:parseInt(s.id)},a=await this.publicGetGetOrderBook(this.extend(r,i));return this.parseOrderBook(a,e,void 0,"bids","asks",0,1,s)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pairId:parseInt(r.id)},n=await this.publicGetGetTradeHistory(this.extend(a,s)),o=this.safeValue(n,"trades",[]);return this.parseTrades(o,r,t,i,s)}parseTrade(e,t){let i,s,r,a,n,h,c,d,u;if(Array.isArray(e)){i=this.safeString(e,3),h=this.convertFromScale(this.safeString(e,0),t.precision.price),c=this.convertFromScale(this.safeString(e,1),t.precision.amount),s=this.toMilliseconds(this.safeString(e,2));const r=this.safeInteger(e,4);1===r?n="buy":2===r&&(n="sell")}else{i=this.safeString(e,"execId"),s=this.safeInteger(e,"time");const l=this.safeString(e,"symbol");u=this.safeSymbol(l,t),r=this.safeString(e,"orderId"),n=this.safeStringLower(e,"side"),a=this.parseOrderType(this.safeString(e,"ordType")),h=this.safeString(e,"lastPx"),c=this.safeString(e,"qty");let f=this.safeString(e,"commission");if(void 0!==f){f=o.stringNeg(f);const t=this.safeString(e,"commCurrency");d={cost:f,currency:this.safeCurrencyCode(t)}}}return void 0===u&&void 0!==t&&(u=t.symbol),this.safeTrade({info:e,id:i,timestamp:s,datetime:this.iso8601(s),symbol:u,order:r,type:a,side:n,takerOrMaker:void 0,price:h,amount:c,cost:void 0,fee:d},t)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetPositions(e),i=this.safeValue(t,"positions",[]),s={info:t};for(let e=0;e<i.length;e++){const t=i[e];if("ASSET"===this.safeString(t,"assetType")){const e=this.safeString(t,"symbol"),i=this.safeCurrencyCode(e),r=this.safeString(t,"quantity"),a=this.safeString(t,"availableQuantity"),n=this.safeInteger(t,"quantity_scale"),o=this.account();o.free=this.convertFromScale(a,n),o.total=this.convertFromScale(r,n),s[i]=o}}return this.parseBalance(s)}async createOrder(e,t,i,s,r,n={}){await this.loadMarkets();const o=this.market(e),h="buy"===i?1:2,c=this.getScale(s),d={instrumentId:parseInt(o.id),symbol:o.uppercaseId,side:h,quantity:this.convertToScale(this.numberToString(s),c),quantity_scale:c};if("market"===t)d.ordType=1;else if("limit"===t){d.ordType=2;const e=this.getScale(r);d.price=this.convertToScale(this.numberToString(r),e),d.priceScale=e}else{const e=this.safeNumber2(n,"stopPrice","stopPx");if(n=this.omit(n,["stopPrice","stopPx"]),void 0===e){if("stop"===t){if(void 0===r)throw new a(this.id+" createOrder() requires a price argument or a stopPrice parameter or a stopPx parameter for "+t+" orders");d.ordType=3,d.stopPx=this.convertToScale(this.numberToString(r),this.getScale(r))}else if("stop limit"===t)throw new a(this.id+" createOrder() requires a stopPrice parameter or a stopPx parameter for "+t+" orders")}else if("stop"===t)d.ordType=3,d.stopPx=this.convertToScale(this.numberToString(e),this.getScale(e));else if("stop limit"===t){d.ordType=4;const t=this.getScale(r),i=this.getScale(e);d.price_scale=t,d.stopPx_scale=i,d.stopPx=this.convertToScale(this.numberToString(e),i),d.price=this.convertToScale(this.numberToString(r),t)}}const u=await this.privatePostOrder(this.extend(d,n));return this.parseOrder(u,o)}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={origOrderId:parseInt(e),instrumentId:parseInt(s.id)},n=await this.privatePostCancelOrder(this.extend(r,i));return this.parseOrder(n,s)}async editOrder(e,t,i,s,r,n,o={}){await this.loadMarkets();const h=this.market(t),c="buy"===s?1:2,d=this.getScale(r),u={origOrderId:e,instrumentId:parseInt(h.id),symbol:h.uppercaseId,side:c,quantity:this.convertToScale(this.numberToString(r),d),quantity_scale:d};if("market"===i)u.ordType=1;else if("limit"===i)u.ordType=2,u.price=this.convertToScale(this.numberToString(n),this.getScale(n));else{const e=this.safeNumber2(o,"stopPrice","stopPx");if(o=this.omit(o,["stopPrice","stopPx"]),void 0===e){if("stop"===i){if(void 0===n)throw new a(this.id+" editOrder() requires a price argument or a stopPrice parameter or a stopPx parameter for "+i+" orders");u.ordType=3,u.stopPx=this.convertToScale(this.numberToString(n),this.getScale(n))}else if("stop limit"===i)throw new a(this.id+" editOrder() requires a stopPrice parameter or a stopPx parameter for "+i+" orders")}else if("stop"===i)u.ordType=3,u.stopPx=this.convertToScale(this.numberToString(e),this.getScale(e));else if("stop limit"===i){u.ordType=4;const t=this.getScale(n),i=this.getScale(e);u.price_scale=t,u.stopPx_scale=i,u.stopPx=this.convertToScale(this.numberToString(e),i),u.price=this.convertToScale(this.numberToString(n),t)}}const l=await this.privatePostOrder(this.extend(u,o));return this.parseOrder(l,h)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:parseInt(e)},r=await this.privatePostGetOrderStatus(this.extend(s,i));return this.parseOrder(r)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({ordStatus:"2"},s))}async fetchCanceledOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({ordStatus:"4"},s))}async fetchOrders(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.instrumentId=parseInt(r.id)),void 0!==i&&(a.limit=i);const n=await this.privatePostGetOrders(this.extend(a,s)),o=this.safeValue(n,"orders",[]);return this.parseOrders(o,r,t,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.instrumentId=a.id),void 0!==t&&(r.startTime=t);const n=await this.privatePostUserTrades(this.extend(r,s)),o=this.safeValue(n,"trades",[]);return this.parseTrades(o,a,t,i,s)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={instrumentId:parseInt(i.id)},r=await this.privatePostGetDepositAddresses(this.extend(s,t)),a=this.safeValue(r,"addresses",[]),n=this.safeValue(a,0);return this.parseDepositAddress(n,i)}parseDepositAddress(e,t){const i=this.safeString(e,"symbol"),s=this.safeCurrencyCode(i,t),r=this.safeString(e,"address");return this.checkAddress(r),{currency:s,address:r,tag:void 0,network:void 0,info:e}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.instrumentId=parseInt(a.id));const n=await this.privatePostGetDepositHistory(this.extend(r,s)),o=this.safeValue(n,"deposits",[]);return this.parseTransactions(o,a,t,i,{type:"deposit"})}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.instrumentId=parseInt(a.id));const n=await this.privatePostGetWithdrawRequests(this.extend(r,s)),o=this.safeValue(n,"addresses",[]);return this.parseTransactions(o,a,t,i,{type:"withdrawal"})}parseTransaction(e,t){const i=this.safeString(e,"id","transactionId"),s=this.safeString(e,"transactionUuid"),r=this.safeInteger(e,"timestamp");let a=this.safeString(e,"address");"null"===a&&(a=void 0);const n=this.safeString(e,"type");let o=this.safeNumber(e,"balance_change");if(void 0===o){o=this.safeString(e,"quantity");const t=this.safeInteger(e,"quantity_scale");o=this.parseNumber(this.convertFromScale(o,t))}const h=this.safeString(e,"symbol"),c=this.safeCurrencyCode(h,t),d=this.parseTransactionStatus(this.safeString(e,"status"));return{info:e,id:i,txid:s,timestamp:r,datetime:this.iso8601(r),addressFrom:void 0,address:a,addressTo:void 0,tagFrom:void 0,tag:void 0,tagTo:void 0,type:n,amount:o,currency:c,status:d,updated:void 0,comment:void 0,fee:void 0}}parseTransactionStatus(e){return this.safeString({0:"pending",1:"ok"},e,e)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),n=this.getScale(t),o=this.convertToScale(t,n),h={instrumentId:parseInt(a.id),symbol:a.uppercaseId,quantity:o,quantity_scale:n,address:i},c=await this.privatePostSendWithdrawRequest(this.extend(h,r));return this.parseTransaction(c,a)}async fetchTradingFees(e={}){const t=await this.publicGetGetExchangeInfo(e),i=this.safeValue(t,"spotFees",[]),s={},r={};for(let e=0;e<i.length;e++){const t=i[e];void 0!==this.safeString(t,"tier")&&(s[t.tier]=this.safeNumber(t,"taker"),r[t.tier]=this.safeNumber(t,"maker"))}return{info:i,tierBased:!0,maker:r,taker:s}}async fetchTradingLimits(e,t={}){await this.loadMarkets();const i=await this.publicGetGetExchangeInfo(t);return{info:this.safeValue(i,"tradingLimits",[]),limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}}async fetchFundingLimits(e={}){const t=await this.publicGetGetExchangeInfo(e);return{info:this.safeValue(t,"withdrawLimits",[]),withdraw:void 0}}parseOrder(e,t){let i=this.safeString2(e,"orderId","id");i=this.safeString(e,"origOrderId",i);const s=this.safeString(e,"clOrdId"),r=this.parseOrderType(this.safeString(e,"ordType")),a=this.parseOrderSide(this.safeString(e,"side")),n=this.parseOrderStatus(this.safeString(e,"ordStatus")),h=this.safeString(e,"instrumentId"),c=this.safeSymbol(h,t),d=this.toMilliseconds(this.safeString(e,"timeStamp"));let u=this.safeString(e,"price");const l=this.safeInteger(e,"price_scale");u=this.convertFromScale(u,l);let f=this.safeString(e,"quantity");const p=this.safeInteger(e,"quantity_scale");f=this.convertFromScale(f,p);let m=this.safeString(e,"cumQty");const g=this.safeInteger(e,"cumQty_scale");m=this.convertFromScale(m,g);let y=this.safeString(e,"leavesQty");const b=this.safeInteger(e,"leavesQty_scale");let v;y=this.convertFromScale(y,b);const w=this.safeInteger(e,"feeInstrumentId"),k=this.safeCurrencyCode(w);let _,S=this.safeString(e,"feeTotal");const O=this.safeInteger(e,"fee_scale");void 0!==S&&(S=o.stringNeg(S),_=this.convertFromScale(S,O)),void 0!==S&&(v={currency:k,cost:_,rate:void 0});let M=this.parseTimeInForce(this.safeString(e,"timeInForce"));"0"===M&&(M=void 0);const T=this.safeInteger(e,"stopPx_scale",0),x=this.parseNumber(this.convertFromScale(this.safeString(e,"stopPx"),T));return this.safeOrder2({info:e,id:i,clientOrderId:s,timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:void 0,symbol:c,type:r,timeInForce:M,postOnly:void 0,side:a,price:u,stopPrice:x,amount:f,cost:void 0,average:void 0,filled:m,remaining:y,status:n,fee:v,trades:void 0},t)}parseOrderStatus(e){return this.safeString({0:"open",1:"open",2:"closed",3:"open",4:"canceled",5:"canceled",6:"canceling",7:"canceled",8:"rejected",9:"canceled",A:"open",B:"open",C:"expired",D:"open",E:"canceling",F:"open"},e,e)}parseOrderSide(e){return this.safeString({1:"buy",2:"sell"},e,e)}parseOrderType(e){return this.safeString({1:"market",2:"limit",3:"stop",4:"stop limit"},e,e)}parseTimeInForce(e){return this.safeString({1:"GTC",3:"IOC",4:"FOK",5:"GTX",6:"GTD"},e,e)}toMilliseconds(e){if(void 0===e)return e;const t=e.split("-"),i=this.safeString(t,0),s=this.safeString(t,1);if(void 0===i||void 0===s)return;if(8!==i.length)return;const r=i.slice(0,4)+"-"+i.slice(4,6)+"-"+i.slice(6,8);return this.parse8601(r+" "+s)}convertFromScale(e,t){if(void 0===e||void 0===t)return;const i=new o(e);return i.decimals=i.decimals+t,i.reduce(),i.toString()}getScale(e){const t=this.numberToString(e);return this.precisionFromString(t)}convertToScale(e,t){if(void 0===e||void 0===t)return;const i=new o(e);i.decimals=i.decimals-t,i.reduce();const s=i.toString();return parseInt(s)}nonce(){return this.milliseconds()}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;const d=this.safeString(o,"error");if(void 0!==d){const e=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions,d,e),this.throwBroadlyMatchedException(this.exceptions,n,e),new r(this.id+" "+n)}}sign(e,t="public",i="GET",s={},r,a){let n=this.implodeParams(e,s),o=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else if("private"===t){const e=this.safeValue(s,"format"),t=this.safeValue(s,"type"),i={};void 0!==e&&(i.format=e),void 0!==t&&(i.type=t),Object.keys(i).length&&(n+="?"+this.urlencode(i)),s=this.omit(s,["format","type"]),this.checkRequiredCredentials();const h=this.nonce();o=this.extend(o,{userId:this.uid,nonce:h}),s.nonce=this.nonce(),a=this.json(o);const c=this.hmac(this.encode(a),this.encode(this.secret),"sha384");r={"Content-Type":"application/json",requestToken:this.apiKey,signature:c}}return n=this.urls.api[t]+"/"+n,{url:n,method:i,body:a,headers:r}}}},16159:(e,t,i)=>{"use strict";const s=i(68170);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"equos",name:"EQUOS",urls:{logo:"https://user-images.githubusercontent.com/1294454/107758499-05edd180-6d38-11eb-9e09-0b69602a7a15.jpg"}})}}},74101:(e,t,i)=>{"use strict";const s=i(48819),{ArgumentsRequired:r,ExchangeError:a,OrderNotFound:n,AuthenticationError:o,InsufficientFunds:h,InvalidOrder:c,InvalidNonce:d,OnMaintenance:u,RateLimitExceeded:l,BadRequest:f,PermissionDenied:p}=i(73449),m=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"exmo",name:"EXMO",countries:["LT"],rateLimit:350,version:"v1.1",has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:"emulated",fetchOrderBook:!0,fetchOrderBooks:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFees:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","45m":"45","1h":"60","2h":"120","3h":"180","4h":"240","1d":"D","1w":"W","1M":"M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766491-1b0ea956-5eda-11e7-9225-40d67b481b8d.jpg",api:{public:"https://api.exmo.com",private:"https://api.exmo.com",web:"https://exmo.me"},www:"https://exmo.me",referral:"https://exmo.me/?ref=131685",doc:["https://exmo.me/en/api_doc?ref=131685","https://github.com/exmo-dev/exmo_api_lib/tree/master/nodejs"],fees:"https://exmo.com/en/docs/fees"},api:{web:{get:["ctrl/feesAndLimits","en/docs/fees"]},public:{get:["currency","currency/list/extended","order_book","pair_settings","ticker","trades","candles_history","required_amount","payments/providers/crypto/list"]},private:{post:["user_info","order_create","order_cancel","stop_market_order_create","stop_market_order_cancel","user_open_orders","user_trades","user_cancelled_orders","order_trades","deposit_address","withdraw_crypt","withdraw_get_txid","excode_create","excode_load","code_check","wallet_history","wallet_operations","margin/user/order/create","margin/user/order/update","margin/user/order/cancel","margin/user/position/close","margin/user/position/margin_add","margin/user/position/margin_remove","margin/currency/list","margin/pair/list","margin/settings","margin/funding/list","margin/user/info","margin/user/order/list","margin/user/order/history","margin/user/order/trades","margin/user/order/max_quantity","margin/user/position/list","margin/user/position/margin_remove_info","margin/user/position/margin_add_info","margin/user/wallet/list","margin/user/wallet/history","margin/user/trade/list","margin/trades","margin/liquidation/feed"]}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,maker:this.parseNumber("0.002"),taker:this.parseNumber("0.002")},funding:{tierBased:!1,percentage:!1}},options:{networks:{ETH:"ERC20",TRX:"TRC20"}},exceptions:{exact:{40005:o,40009:d,40015:a,40016:u,40017:o,40032:p,40033:p,40034:l,50052:h,50054:h,50304:n,50173:n,50277:c,50319:c,50321:c,50381:c},broad:{"range period is too long":f,"invalid syntax":f,"API rate limit exceeded":l}}})}async fetchTradingFees(e={}){return{maker:this.fees.trading.maker,taker:this.fees.trading.taker}}parseFixedFloatValue(e){if(void 0===e||"-"===e)return;if(""===e)return 0;const t=e.indexOf("%")>=0,i=e.split(" ")[0].replace("%",""),s=parseFloat(i);if(s>0&&t)throw new a(this.id+" parseFixedFloatValue detected an unsupported non-zero percentage-based fee "+e);return s}async fetchFundingFees(e={}){await this.loadMarkets();const t=await this.publicGetCurrencyListExtended(e),i=await this.publicGetPaymentsProvidersCryptoList(e),s={info:i,withdraw:{},deposit:{}};for(let e=0;e<t.length;e++){const r=t[e],a=this.safeString(r,"name"),n=this.safeCurrencyCode(a),o=this.safeValue(i,a,[]);for(let e=0;e<o.length;e++){const t=o[e],i=this.safeString(t,"type"),r=this.safeString(t,"commission_desc"),a=this.parseFixedFloatValue(r),h=this.safeNumber(s[i],n);(void 0===h||void 0!==a&&a<h)&&(s[i][n]=a)}}return this.options.fundingFees=s,s}async fetchCurrencies(e={}){const t=await this.publicGetCurrencyListExtended(e),i=await this.publicGetPaymentsProvidersCryptoList(e),s={};for(let e=0;e<t.length;e++){const r=t[e],a=this.safeString(r,"name"),n=this.safeString(r,"description"),o=this.safeValue(i,a);let h=!1,c="crypto";const d={deposit:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}};let u;if(void 0===o)h=!0,c="fiat";else for(let e=0;e<o.length;e++){const t=o[e],i=this.safeString(t,"type"),s=this.safeNumber(t,"min");let r=this.safeNumber(t,"max");if(0===r&&(r=void 0),this.safeValue(t,"enabled")&&(h=!0,(void 0===d[i].min||s<d[i].min)&&(d[i].min=s,d[i].max=r,"withdraw"===i))){const e=this.safeString(t,"commission_desc");u=this.parseFixedFloatValue(e)}}const l=this.safeCurrencyCode(a);s[l]={id:a,code:l,name:n,type:c,active:h,fee:u,precision:8,limits:d,info:o}}return s}async fetchMarkets(e={}){const t=await this.publicGetPairSettings(e),i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){const r=i[e],a=t[r],n=r.replace("_","/"),[o,h]=n.split("/"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(h),u=this.safeString(a,"commission_taker_percent"),l=this.safeString(a,"commission_maker_percent"),f=this.parseNumber(m.stringDiv(u,"100")),p=this.parseNumber(m.stringDiv(l,"100"));s.push({id:r,symbol:n,base:c,quote:d,baseId:o,quoteId:h,type:"spot",spot:!0,active:!0,taker:f,maker:p,limits:{amount:{min:this.safeNumber(a,"min_quantity"),max:this.safeNumber(a,"max_quantity")},price:{min:this.safeNumber(a,"min_price"),max:this.safeNumber(a,"max_price")},cost:{min:this.safeNumber(a,"min_amount"),max:this.safeNumber(a,"max_amount")}},precision:{amount:8,price:this.safeInteger(a,"price_precision")},info:a})}return s}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();const n=this.market(e),o={symbol:n.id,resolution:this.timeframes[t]},h=this.safeValue(this.options,"fetchOHLCV"),c=this.safeInteger(h,"maxLimit",3e3),d=this.parseTimeframe(t),u=this.milliseconds();if(void 0===i){if(void 0===s)throw new r(this.id+" fetchOHLCV() requires a since argument or a limit argument");if(s>c)throw new f(this.id+" fetchOHLCV will serve "+c.toString()+" candles at most");o.from=parseInt(u/1e3)-s*d-1,o.to=parseInt(u/1e3)}else if(o.from=parseInt(i/1e3)-1,void 0===s)o.to=parseInt(u/1e3);else{if(s>c)throw new f(this.id+" fetchOHLCV will serve "+c.toString()+" candles at most");const e=this.sum(i,s*d*1e3);o.to=parseInt(e/1e3)}const l=await this.publicGetCandlesHistory(this.extend(o,a)),p=this.safeValue(l,"candles",[]);return this.parseOHLCVs(p,n,t,i,s)}parseOHLCV(e,t){return[this.safeInteger(e,"t"),this.safeNumber(e,"o"),this.safeNumber(e,"h"),this.safeNumber(e,"l"),this.safeNumber(e,"c"),this.safeNumber(e,"v")]}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostUserInfo(e),i={info:t},s=this.safeValue(t,"balances",{}),r=this.safeValue(t,"reserved",{}),a=Object.keys(s);for(let e=0;e<a.length;e++){const t=a[e],n=this.safeCurrencyCode(t),o=this.account();t in s&&(o.free=this.safeString(s,t)),t in r&&(o.used=this.safeString(r,t)),i[n]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={pair:s.id};void 0!==t&&(r.limit=t);const a=await this.publicGetOrderBook(this.extend(r,i)),n=this.safeValue(a,s.id);return this.parseOrderBook(n,e,void 0,"bid","ask")}async fetchOrderBooks(e,t,i={}){let s;if(await this.loadMarkets(),void 0===e){if(s=this.ids.join(","),s.length>2048){const e=this.ids.length;throw new a(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else s=this.marketIds(e),s=s.join(",");const r={pair:s};void 0!==t&&(r.limit=t);const n=await this.publicGetOrderBook(this.extend(r,i)),o={},h=Object.keys(n);for(let e=0;e<h.length;e++){const t=h[e];let i=t;t in this.markets_by_id&&(i=this.markets_by_id[t].symbol),o[i]=this.parseOrderBook(n[t],i,void 0,"bid","ask")}return o}parseTicker(e,t){const i=this.safeTimestamp(e,"updated");let s;void 0!==t&&(s=t.symbol);const r=this.safeNumber(e,"last_trade");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy_price"),bidVolume:void 0,ask:this.safeNumber(e,"sell_price"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeNumber(e,"avg"),baseVolume:this.safeNumber(e,"vol"),quoteVolume:this.safeNumber(e,"vol_curr"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s={},r=Object.keys(i);for(let e=0;e<r.length;e++){const t=r[e],a=this.markets_by_id[t],n=a.symbol,o=i[t];s[n]=this.parseTicker(o,a)}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s=this.market(e);return this.parseTicker(i[s.id],s)}parseTrade(e,t){const i=this.safeTimestamp(e,"date");let s;const r=this.safeString(e,"trade_id"),a=this.safeString(e,"order_id"),n=this.safeString(e,"price"),o=this.safeString(e,"quantity"),h=this.safeString(e,"amount"),c=this.safeString(e,"type"),d=this.safeString(e,"pair");if(void 0!==d)if(d in this.markets_by_id)t=this.markets_by_id[d];else{const[e,t]=d.split("_");s=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}void 0===s&&void 0!==t&&(s=t.symbol);const u=this.safeString(e,"exec_type");let l;const f=this.safeString(e,"commission_amount");if(void 0!==f){const t=this.safeString(e,"commission_currency"),i=this.safeCurrencyCode(t);let s=this.safeString(e,"commission_percent");void 0!==s&&(s=m.stringDiv(s,"1000",18)),l={cost:f,currency:i,rate:s}}return this.safeTrade({id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,order:a,type:void 0,side:c,takerOrMaker:u,price:n,amount:o,cost:h,fee:l},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id},n=await this.publicGetTrades(this.extend(a,s)),o=this.safeValue(n,r.id,[]);return this.parseTrades(o,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades() requires a symbol argument (a single symbol or an array)");let a,n;if(await this.loadMarkets(),Array.isArray(e)){if(e.length<1)throw new r(this.id+" fetchMyTrades() requires a non-empty symbol array");a=this.marketIds(e).join(",")}else n=this.market(e),a=n.id;const o={pair:a};void 0!==i&&(o.limit=i);const h=await this.privatePostUserTrades(this.extend(o,s));let c=[];const d=Object.keys(h);for(let e=0;e<d.length;e++){const s=d[e];let r;if(s in this.markets_by_id)n=this.markets_by_id[s],r=n.symbol;else{const[e,t]=s.split("_");r=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}const a=h[s],o=this.parseTrades(a,n,t,i,{symbol:r});c=this.arrayConcat(c,o)}return this.filterBySinceLimit(c,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=("market"===t?t+"_":"")+i;let o=r;"market"===t&&void 0===r&&(o=0);const h={pair:this.market(e).id,quantity:this.amountToPrecision(e,s),type:n,price:this.priceToPrecision(e,o)};let d="privatePostOrderCreate",u=this.safeValue2(a,"client_id","clientOrderId");if(void 0!==u){if(u=this.safeInteger2(a,"client_id","clientOrderId"),void 0===u)throw new f(this.id+" createOrder client order id must be an integer / numeric literal");h.client_id=u,a=this.omit(a,["client_id","clientOrderId"])}if("stop"===t||"stop_limit"===t||"trailing_stop"===t){const i=this.safeNumber2(a,"stop_price","stopPrice");if(void 0===i)throw new c(this.id+" createOrder() requires a stopPrice extra param for a "+t+" order");a=this.omit(a,["stopPrice","stop_price"]),h.stop_price=this.priceToPrecision(e,i),d="privatePostMarginUserOrderCreate"}const l=await this[d](this.extend(h,a)),p=this.safeString(l,"order_id"),m=this.milliseconds();return{id:p,info:l,timestamp:m,datetime:this.iso8601(m),lastTradeTimestamp:void 0,status:"open",symbol:e,type:t,side:i,price:r,cost:void 0,amount:s,remaining:s,filled:0,fee:void 0,trades:void 0,clientOrderId:u,average:void 0}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e};return await this.privatePostOrderCancel(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e.toString()},r=await this.privatePostOrderTrades(this.extend(s,i)),a=this.parseOrder(r);return this.extend(a,{id:e.toString()})}async fetchOrderTrades(e,t,i,s,r={}){let a;void 0!==t&&(a=this.market(t));const n={order_id:e.toString()},o=await this.privatePostOrderTrades(this.extend(n,r)),h=this.safeValue(o,"trades");return this.parseTrades(h,a,i,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=await this.privatePostUserOpenOrders(s),a=Object.keys(r);let n=[];for(let e=0;e<a.length;e++){const t=a[e];let i;t in this.markets_by_id&&(i=this.markets_by_id[t]);const s=this.parseOrders(r[t],i);n=this.arrayConcat(n,s)}return this.filterBySymbolSinceLimit(n,e,t,i)}parseOrder(e,t){let i,s=this.safeString(e,"order_id"),r=this.safeTimestamp(e,"created");const a=this.safeString(e,"type");if(void 0===t){let i;"pair"in e?i=e.pair:"in_currency"in e&&"out_currency"in e&&(i="buy"===a?e.in_currency+"_"+e.out_currency:e.out_currency+"_"+e.in_currency),void 0!==i&&i in this.markets_by_id&&(t=this.markets_by_id[i])}let n=this.safeNumber(e,"quantity");if(void 0===n){const t="buy"===a?"in_amount":"out_amount";n=this.safeNumber(e,t)}let o=this.safeNumber(e,"price"),h=this.safeNumber(e,"amount"),c=0;const d=[],u=this.safeValue(e,"trades",[]);let l,f,p;const m=u.length;if(m>0){l=0;for(let e=0;e<m;e++){const i=this.parseTrade(u[e],t);void 0===s&&(s=i.order),void 0===r&&(r=i.timestamp),r>i.timestamp&&(r=i.timestamp),c=this.sum(c,i.amount),l=this.sum(l,i.fee.cost),d.push(i)}f=d[m-1].timestamp}let g,y,b=this.safeString(e,"status");void 0!==n&&(g=n-c,b=c>=n?"closed":"open"),void 0===t&&(t=this.getMarketFromTrades(d)),void 0!==t&&(i=t.symbol,y=t.quote),void 0===h?void 0!==o&&(h=o*c):c>0&&(void 0===p&&(p=h/c),void 0===o&&(o=h/c));const v={cost:l,currency:y};return{id:s,clientOrderId:this.safeInteger(e,"client_id"),datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:f,status:b,symbol:i,type:"limit",timeInForce:void 0,postOnly:void 0,side:a,price:o,stopPrice:void 0,cost:h,amount:n,filled:c,remaining:g,average:p,trades:d,fee:v,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=await this.privatePostDepositAddress(t),s=this.safeString(i,e);let r,a;if(s){const e=s.split(",");r=e[0],e.length>1&&(a=e[1])}return this.checkAddress(r),{currency:e,address:r,tag:a,network:void 0,info:i}}getMarketFromTrades(e){const t=this.indexBy(e,"pair"),i=Object.keys(t);if(1===i.length)return this.markets[i[0]]}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),await this.loadMarkets();const a={amount:t,currency:this.currency(e).id,address:i};void 0!==s&&(a.invoice=s);const n=this.safeValue(this.options,"networks",{});let o=this.safeStringUpper(r,"network");o=this.safeString(n,o,o),void 0!==o&&(a.transport=o,r=this.omit(r,"network"));const h=await this.privatePostWithdrawCrypt(this.extend(a,r));return{info:h,id:h.task_id}}parseTransactionStatus(e){return this.safeString({transferred:"ok",paid:"ok",pending:"pending",processing:"pending",verifying:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"order_id"),s=this.safeTimestamp2(e,"dt","created"),r=this.safeTimestamp(e,"updated");let a=this.safeNumber(e,"amount");void 0!==a&&(a=Math.abs(a));const n=this.parseTransactionStatus(this.safeStringLower(e,"status"));let o=this.safeString(e,"txid");if(void 0===o){const t=this.safeValue(e,"extra",{}),i=this.safeString(t,"txid");""!==i&&(o=i)}const h=this.safeString(e,"type"),c=this.safeString2(e,"curr","currency"),d=this.safeCurrencyCode(c,t);let u;const l=void 0;let f;const p=this.safeString(e,"account");if("deposit"===h)f=p;else if("withdrawal"===h&&(u=p,void 0!==u)){const e=u.split(":");2===e.length&&(u=this.safeString(e,1),u=u.replace(" ",""))}let m;if(!this.fees.funding.percentage){const t="withdrawal"===h?"withdraw":"deposit";let i=this.safeNumber(e,"commission");void 0===i&&(i=this.safeNumber(this.options.fundingFees[t],d)),"cashback"===this.safeString(e,"provider")&&(i=0),void 0!==i&&("withdrawal"===h&&(a-=i),m={cost:i,currency:d,rate:void 0})}return{info:e,id:i,timestamp:s,datetime:this.iso8601(s),currency:d,amount:a,address:u,addressTo:u,addressFrom:void 0,tag:l,tagTo:l,tagFrom:void 0,status:n,type:h,updated:r,comment:f,txid:o,fee:m}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==t&&(r.date=parseInt(t/1e3)),void 0!==e&&(a=this.currency(e));const n=await this.privatePostWalletHistory(this.extend(r,s));return this.parseTransactions(n.history,a,t,i)}async fetchWithdrawals(e,t,i,s={}){let r;await this.loadMarkets();const a={type:"withdraw"};void 0!==i&&(a.limit=i),void 0!==e&&(r=this.currency(e),a.currency=r.id);const n=await this.privatePostWalletOperations(this.extend(a,s));return this.parseTransactions(n.items,r,t,i)}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t]+"/";if("web"!==t&&(n+=this.version+"/"),n+=e,"public"===t||"web"===t)Object.keys(s).length&&(n+="?"+this.urlencode(s));else if("private"===t){this.checkRequiredCredentials();const e=this.nonce();a=this.urlencode(this.extend({nonce:e},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:n,method:i,body:a,headers:r}}nonce(){return this.milliseconds()}handleErrors(e,t,i,s,r,n,o,h,c){if(void 0!==o&&("result"in o||"errmsg"in o)){let e=this.safeValue(o,"result",!1);if("string"==typeof e&&(e="true"===e||"1"===e),!e){let e;const t=this.safeString2(o,"error","errmsg"),i=t.split(":");if(i.length>1){const t=i[0].split(" ");e=t.length>1?t[1]:t[0]}const s=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,e,s),this.throwBroadlyMatchedException(this.exceptions.broad,t,s),new a(s)}}}}},63513:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r}=i(73449),a=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"flowbtc",name:"flowBTC",countries:["BR"],version:"v1",rateLimit:1e3,has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87443317-01c0d080-c5fe-11ea-95c2-9ebe1a8fafd9.jpg",api:"https://publicapi.flowbtc.com.br",www:"https://www.flowbtc.com.br",doc:"https://www.flowbtc.com.br/api.html"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{post:["GetTicker","GetTrades","GetTradesByDate","GetOrderBook","GetProductPairs","GetProducts"]},private:{post:["CreateAccount","GetUserInfo","SetUserInfo","GetAccountInfo","GetAccountTrades","GetDepositAddresses","Withdraw","CreateOrder","ModifyOrder","CancelOrder","CancelAllOrders","GetAccountOpenOrders","GetOrderFee"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.005}}})}async fetchMarkets(e={}){const t=await this.publicPostGetProductPairs(e),i=this.safeValue(t,"productPairs"),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"name"),a=this.safeString(t,"product1Label"),n=this.safeString(t,"product2Label"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c={amount:this.safeInteger(t,"product1DecimalPlaces"),price:this.safeInteger(t,"product2DecimalPlaces")},d=o+"/"+h;s[d]={id:r,symbol:d,base:o,quote:h,baseId:a,quoteId:n,type:"spot",spot:!0,active:void 0,precision:c,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:t}}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetAccountInfo(e),i=this.safeValue(t,"currencies"),s={info:t};for(let e=0;e<i.length;e++){const t=i[e],r=t.name,a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(t,"balance"),n.total=this.safeString(t,"hold"),s[a]=n}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={productPair:this.market(e).id},r=await this.publicPostGetOrderBook(this.extend(s,i));return this.parseOrderBook(r,e,void 0,"bids","asks","px","qty")}async fetchTicker(e,t={}){await this.loadMarkets();const i={productPair:this.market(e).id},s=await this.publicPostGetTicker(this.extend(i,t)),r=this.milliseconds(),a=this.safeNumber(s,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(s,"high"),low:this.safeNumber(s,"low"),bid:this.safeNumber(s,"bid"),bidVolume:void 0,ask:this.safeNumber(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(s,"volume24hr"),quoteVolume:this.safeNumber(s,"volume24hrProduct2"),info:s}}parseTrade(e,t){const i=this.safeTimestamp(e,"unixtime"),s=0===e.incomingOrderSide?"buy":"sell",r=this.safeString(e,"tid"),n=this.safeString(e,"px"),o=this.safeString(e,"qty"),h=this.parseNumber(n),c=this.parseNumber(o),d=this.parseNumber(a.stringMul(n,o));return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:r,order:void 0,type:void 0,side:s,price:h,amount:c,cost:d,takerOrMaker:void 0,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={ins:r.id,startIndex:-1},n=await this.publicPostGetTrades(this.extend(a,s));return this.parseTrades(n.trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n="market"===t?1:0,o={ins:this.marketId(e),side:i,orderType:n,qty:s,px:this.priceToPrecision(e,r)},h=await this.privatePostCreateOrder(this.extend(o,a));return{info:h,id:h.serverOrderId}}async cancelOrder(e,t,i={}){if(await this.loadMarkets(),"ins"in i){const t={serverOrderId:e};return await this.privatePostCancelOrder(this.extend(t,i))}throw new r(this.id+" cancelOrder() requires an `ins` parameter for cancelling an order")}sign(e,t="public",i="GET",s={},r,a){const n=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(s).length&&(a=this.json(s));else{this.checkRequiredCredentials();const e=this.nonce(),t=e.toString()+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));a=this.json(this.extend({apiKey:this.apiKey,apiNonce:e,apiSig:i.toUpperCase()},s)),r={"Content-Type":"application/json"}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o&&!this.safeValue(o,"isAccepted",!0))throw new r(this.id+" "+this.json(o))}}},89636:(e,t,i)=>{"use strict";const s=i(48819),{TICK_SIZE:r}=i(62115),{ExchangeError:a,InvalidOrder:n,BadRequest:o,InsufficientFunds:h,OrderNotFound:c,AuthenticationError:d,RateLimitExceeded:u,ExchangeNotAvailable:l,CancelPending:f,ArgumentsRequired:p,PermissionDenied:m,BadSymbol:g,DuplicateOrderId:y}=i(73449),b=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"ftx",name:"FTX",countries:["BS"],rateLimit:100,certified:!0,pro:!0,hostname:"ftx.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/67149189-df896480-f2b0-11e9-8816-41593e17f9ec.jpg",www:"https://ftx.com",api:{public:"https://{hostname}",private:"https://{hostname}"},doc:"https://github.com/ftexchange/ftx",fees:"https://ftexchange.zendesk.com/hc/en-us/articles/360024479432-Fees",referral:{url:"https://ftx.com/#a=ccxt",discount:.05}},has:{margin:!0,swap:!0,future:!0,cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchBorrowRate:!0,fetchBorrowRateHistory:!1,fetchBorrowRates:!0,fetchClosedOrders:void 0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:void 0,fetchFundingRate:!0,fetchFundingHistory:!0,fetchFundingRateHistory:!0,fetchFundingRates:void 0,fetchIndexOHLCV:!0,fetchMarkets:!0,fetchMarkOHLCV:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchPositions:!0,fetchPremiumIndexOHLCV:!1,fetchTicker:!0,fetchTickers:!0,fetchTime:!1,fetchTrades:!0,fetchTradingFees:!0,fetchWithdrawals:!0,setLeverage:!0,setMarginMode:!1,withdraw:!0},timeframes:{"15s":"15","1m":"60","5m":"300","15m":"900","1h":"3600","4h":"14400","1d":"86400","3d":"259200","1w":"604800","2w":"1209600","1M":"2592000"},api:{public:{get:["coins","markets","markets/{market_name}","markets/{market_name}/orderbook","markets/{market_name}/trades","markets/{market_name}/candles","futures","futures/{future_name}","futures/{future_name}/stats","funding_rates","indexes/{index_name}/weights","expired_futures","indexes/{market_name}/candles","wallet/coins","lt/tokens","lt/{token_name}","etfs/rebalance_info","options/requests","options/trades","options/historical_volumes/BTC","stats/24h_options_volume","options/open_interest/BTC","options/historical_open_interest/BTC","spot_margin/history","spot_margin/borrow_summary","nft/nfts","nft/{nft_id}","nft/{nft_id}/trades","nft/all_trades","nft/{nft_id}/account_info","nft/collections","ftxpay/apps/{user_specific_id}/details","pnl/historical_changes"],post:["ftxpay/apps/{user_specific_id}/orders"]},private:{get:["subaccounts","subaccounts/{nickname}/balances","account","positions","wallet/balances","wallet/all_balances","wallet/deposit_address/{coin}","wallet/deposits","wallet/withdrawals","wallet/airdrops","wallet/withdrawal_fee","wallet/saved_addresses","orders","orders/history","orders/{order_id}","orders/by_client_id/{client_order_id}","conditional_orders","conditional_orders/{conditional_order_id}/triggers","conditional_orders/history","fills","funding_payments","lt/balances","lt/creations","lt/redemptions","options/my_requests","options/requests/{request_id}/quotes","options/my_quotes","options/account_info","options/positions","options/fills","staking/stakes","staking/unstake_requests","staking/balances","staking/staking_rewards","otc/quotes/{quoteId}","spot_margin/borrow_rates","spot_margin/lending_rates","spot_margin/market_info","spot_margin/borrow_history","spot_margin/lending_history","spot_margin/offers","spot_margin/lending_info","nft/balances","nft/bids","nft/deposits","nft/withdrawals","nft/fills","nft/gallery/{gallery_id}","nft/gallery_settings","stats/latency_stats"],post:["subaccounts","subaccounts/update_name","subaccounts/transfer","account/leverage","wallet/withdrawals","wallet/saved_addresses","orders","conditional_orders","orders/{order_id}/modify","orders/by_client_id/{client_order_id}/modify","conditional_orders/{order_id}/modify","lt/{token_name}/create","lt/{token_name}/redeem","options/requests","options/requests/{request_id}/quotes","options/quotes/{quote_id}/accept","staking/unstake_requests","srm_stakes/stakes","otc/quotes/{quote_id}/accept","otc/quotes","spot_margin/offers","nft/offer","nft/buy","nft/auction","nft/edit_auction","nft/cancel_auction","nft/bids","nft/redeem","nft/gallery_settings","ftxpay/apps/{user_specific_id}/orders"],delete:["subaccounts","wallet/saved_addresses/{saved_address_id}","orders/{order_id}","orders/by_client_id/{client_order_id}","orders","conditional_orders/{order_id}","options/requests/{request_id}","options/quotes/{quote_id}","staking/unstake_requests/{request_id}"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:this.parseNumber("0.0002"),taker:this.parseNumber("0.0007"),tiers:{taker:[[this.parseNumber("0"),this.parseNumber("0.0007")],[this.parseNumber("2000000"),this.parseNumber("0.0006")],[this.parseNumber("5000000"),this.parseNumber("0.00055")],[this.parseNumber("10000000"),this.parseNumber("0.0005")],[this.parseNumber("25000000"),this.parseNumber("0.045")],[this.parseNumber("50000000"),this.parseNumber("0.0004")]],maker:[[this.parseNumber("0"),this.parseNumber("0.0002")],[this.parseNumber("2000000"),this.parseNumber("0.00015")],[this.parseNumber("5000000"),this.parseNumber("0.0001")],[this.parseNumber("10000000"),this.parseNumber("0.00005")],[this.parseNumber("25000000"),this.parseNumber("0")],[this.parseNumber("50000000"),this.parseNumber("0")]]}},funding:{withdraw:{}}},exceptions:{exact:{"Please slow down":u,"Size too small for provide":n,"Not enough balances":h,InvalidPrice:n,"Size too small":n,"Size too large":n,"Missing parameter price":n,"Order not found":c,"Order already closed":n,"Trigger price too high":n,"Trigger price too low":n,"Order already queued for cancellation":f,"Duplicate client order ID":y,"Spot orders cannot be reduce-only":n,"Invalid reduce-only order":n,"Account does not have enough balances":h,"Not authorized for subaccount-specific access":m,"Not approved to trade this product":m},broad:{"Not logged in":d,"Account does not have enough margin for order":h,"Invalid parameter":o,"The requested URL was not found on the server":o,"No such coin":o,"No such subaccount":o,"No such future":g,"No such market":g,"Do not send more than":u,"An unexpected error occurred":l,"Please retry request":l,"Please try again":l,"Try again":l,"Only have permissions for subaccount":m}},precisionMode:r,options:{cancelOrder:{method:"privateDeleteOrdersOrderId"},fetchOpenOrders:{method:"privateGetOrders"},fetchOrders:{method:"privateGetOrdersHistory"},sign:{"ftx.com":"FTX","ftx.us":"FTXUS"},networks:{SOL:"sol",SPL:"sol",TRX:"trx",TRC20:"trx",ETH:"erc20",ERC20:"erc20",OMNI:"omni",BEP2:"bep2",BNB:"bep2"}}})}async fetchCurrencies(e={}){const t=await this.publicGetCoins(e),i=this.safeValue(t,"result",[]),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"id"),a=this.safeCurrencyCode(r),n=this.safeString(t,"name");s[a]={id:r,code:a,info:t,type:void 0,name:n,active:void 0,fee:void 0,precision:void 0,limits:{withdraw:{min:void 0,max:void 0},amount:{min:void 0,max:void 0}}}}return s}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[],s=this.safeValue(t,"result",[]);for(let e=0;e<s.length;e++){const t=s[e],r=this.safeString(t,"name"),a=this.safeString2(t,"baseCurrency","underlying"),n=this.safeString(t,"quoteCurrency","USD"),o=this.safeString(t,"type"),h=this.safeCurrencyCode(a),c=this.safeCurrencyCode(n),d="future"===o?this.safeString(t,"name"):h+"/"+c,u=this.safeValue(t,"enabled"),l=this.safeNumber(t,"sizeIncrement"),f=this.safeNumber(t,"priceIncrement"),p={amount:l,price:f};i.push({id:r,symbol:d,base:h,quote:c,baseId:a,quoteId:n,type:o,future:"future"===o,spot:"spot"===o,active:u,precision:p,limits:{amount:{min:l,max:void 0},price:{min:f,max:void 0},cost:{min:void 0,max:void 0},leverage:{max:20}},info:t})}return i}parseTicker(e,t){let i;const s=this.safeString(e,"name");if(s in this.markets_by_id)t=this.markets_by_id[s];else if("future"===this.safeString(e,"type"))i=s;else{const t=this.safeCurrencyCode(this.safeString(e,"baseCurrency")),s=this.safeCurrencyCode(this.safeString(e,"quoteCurrency"));void 0!==t&&void 0!==s&&(i=t+"/"+s)}void 0===i&&void 0!==t&&(i=t.symbol);const r=this.safeNumber(e,"last"),a=this.safeTimestamp(e,"time",this.milliseconds());let n=this.safeNumber(e,"change24h");return void 0!==n&&(n*=100),this.safeTicker({symbol:i,timestamp:a,datetime:this.iso8601(a),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:this.safeNumber(e,"bidSize"),ask:this.safeNumber(e,"ask"),askVolume:this.safeNumber(e,"askSize"),vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:n,average:void 0,baseVolume:void 0,quoteVolume:this.safeNumber(e,"quoteVolume24h"),info:e},t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market_name:i.id},r=await this.publicGetMarketsMarketName(this.extend(s,t)),a=this.safeValue(r,"result",{});return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarkets(t),s=this.safeValue(i,"result",[]);return this.parseTickers(s,e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market_name:this.market(e).id};void 0!==t&&(s.depth=t);const r=await this.publicGetMarketsMarketNameOrderbook(this.extend(s,i)),a=this.safeValue(r,"result",{});return this.parseOrderBook(a,e)}parseOHLCV(e,t){return[this.safeInteger(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}getMarketId(e,t,i={}){const s=this.getMarketParams(e,t,i);return this.safeString(s,1,e)}getMarketParams(e,t,i={}){let s,r;return e in this.markets?(s=this.market(e),r=s.id):r=this.safeString(i,t,e),[s,r]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const[a,n]=this.getMarketParams(e,"market_name",r),o={resolution:this.timeframes[t],market_name:n},h=this.safeString(r,"price");r=this.omit(r,"price"),s=void 0===s?1501:s,void 0===i?(o.end_time=this.seconds(),o.limit=s,o.start_time=o.end_time-s*this.parseTimeframe(t)):(o.start_time=parseInt(i/1e3),o.limit=s,o.end_time=this.sum(o.start_time,s*this.parseTimeframe(t)));let c="publicGetMarketsMarketNameCandles";"index"===h&&(e in this.markets&&(o.market_name=a.baseId),c="publicGetIndexesMarketNameCandles");const d=await this[c](this.extend(o,r)),u=this.safeValue(d,"result",[]);return this.parseOHLCVs(u,a,t,i,s)}async fetchIndexOHLCV(e,t="1m",i,s,r={}){return await this.fetchOHLCV(e,t,i,s,this.extend({price:"index"},r))}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"liquidity"),r=this.safeString(e,"market");let a;if(r in this.markets_by_id)a=(t=this.markets_by_id[r]).symbol;else{const t=this.safeCurrencyCode(this.safeString(e,"baseCurrency")),i=this.safeCurrencyCode(this.safeString(e,"quoteCurrency"));a=void 0!==t&&void 0!==i?t+"/"+i:r}const n=this.parse8601(this.safeString(e,"time")),o=this.safeString(e,"price"),h=this.safeString(e,"size");void 0===a&&void 0!==t&&(a=t.symbol);const c=this.safeString(e,"side");let d;const u=this.safeString(e,"fee");if(void 0!==u){const t=this.safeString(e,"feeCurrency");d={cost:u,currency:this.safeCurrencyCode(t),rate:this.safeString(e,"feeRate")}}const l=this.safeString(e,"orderId");return this.safeTrade({info:e,timestamp:n,datetime:this.iso8601(n),symbol:a,id:i,order:l,type:void 0,takerOrMaker:s,side:c,price:o,amount:h,cost:void 0,fee:d},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const[r,a]=this.getMarketParams(e,"market_name",s),n={market_name:a};void 0!==t&&(n.start_time=parseInt(t/1e3),n.end_time=this.seconds()),void 0!==i&&(n.limit=i);const o=await this.publicGetMarketsMarketNameTrades(this.extend(n,s)),h=this.safeValue(o,"result",[]);return this.parseTrades(h,r,t,i)}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privateGetAccount(e),i=this.safeValue(t,"result",{});return{info:t,maker:this.safeNumber(i,"makerFee"),taker:this.safeNumber(i,"takerFee")}}async fetchFundingRateHistory(e,t,i,s={}){await this.loadMarkets();const r={};if(void 0!==e){const t=this.market(e);r.future=t.id}void 0!==t&&(r.start_time=parseInt(t/1e3));const a=this.safeInteger(s,"till"),n=this.safeString(s,"end_time");s=this.omit(s,["end_time","till"]),void 0!==a?r.end_time=parseInt(a/1e3):void 0!==n&&(r.end_time=n);const o=await this.publicGetFundingRates(this.extend(r,s)),h=this.safeValue(o,"result"),c=[];for(let e=0;e<h.length;e++){const t=h[e],i=this.safeString(t,"future"),s=this.safeSymbol(i),r=this.parse8601(this.safeString(h[e],"time"));c.push({info:t,symbol:s,fundingRate:this.safeNumber(t,"rate"),timestamp:r,datetime:this.iso8601(r)})}const d=this.sortBy(c,"timestamp");return this.filterBySymbolSinceLimit(d,e,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetWalletBalances(e),i={info:t},s=this.safeValue(t,"result",[]);for(let e=0;e<s.length;e++){const t=s[e],r=this.safeCurrencyCode(this.safeString(t,"coin")),a=this.account();a.free=this.safeString2(t,"availableWithoutBorrow","free"),a.total=this.safeString(t,"total"),i[r]=a}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({new:"open",open:"open",closed:"closed",triggered:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"createdAt"));let r=this.parseOrderStatus(this.safeString(e,"status"));const a=this.safeString(e,"size"),n=this.safeString(e,"filledSize");let o,h=this.safeString(e,"remainingSize");b.stringEquals(h,"0")&&(h=b.stringSub(a,n),b.stringGt(h,"0")&&(r="canceled"));const c=this.safeString(e,"market");void 0!==c&&(o=c in this.markets_by_id?(t=this.markets_by_id[c]).symbol:c),void 0===o&&void 0!==t&&(o=t.symbol);const d=this.safeString(e,"side"),u=this.safeString(e,"type"),l=this.safeString(e,"avgFillPrice"),f=this.safeString2(e,"price","triggerPrice",l),p=this.parse8601(this.safeString(e,"triggeredAt")),m=this.safeString(e,"clientId"),g=this.safeNumber(e,"triggerPrice"),y=this.safeValue(e,"postOnly");return this.safeOrder2({info:e,id:i,clientOrderId:m,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:p,symbol:o,type:u,timeInForce:void 0,postOnly:y,side:d,price:f,stopPrice:g,amount:a,cost:void 0,average:l,filled:n,remaining:h,status:r,fee:void 0,trades:void 0},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),h={market:o.id,side:i,type:t,size:parseFloat(this.amountToPrecision(e,s))},c=this.safeString2(a,"clientId","clientOrderId");let d;if(void 0!==c&&(h.clientId=c,a=this.omit(a,["clientId","clientOrderId"])),"limit"===t)d="privatePostOrders",h.price=parseFloat(this.priceToPrecision(e,r));else if("market"===t)d="privatePostOrders",h.price=null;else if("stop"===t||"takeProfit"===t){d="privatePostConditionalOrders";const i=this.safeNumber2(a,"stopPrice","triggerPrice");if(void 0===i)throw new p(this.id+" createOrder () requires a stopPrice parameter or a triggerPrice parameter for "+t+" orders");a=this.omit(a,["stopPrice","triggerPrice"]),h.triggerPrice=parseFloat(this.priceToPrecision(e,i)),void 0!==r&&(h.orderPrice=parseFloat(this.priceToPrecision(e,r)))}else{if("trailingStop"!==t)throw new n(this.id+" createOrder () does not support order type "+t+", only limit, market, stop, trailingStop, or takeProfit orders are supported");{const i=this.safeNumber(a,"trailValue",r);if(void 0===i)throw new p(this.id+" createOrder () requires a trailValue parameter or a price argument (negative or positive) for a "+t+" order");d="privatePostConditionalOrders",h.trailValue=parseFloat(this.priceToPrecision(e,i))}}const u=await this[d](this.extend(h,a)),l=this.safeValue(u,"result",[]);return this.parseOrder(l,o)}async editOrder(e,t,i,s,r,a,n={}){await this.loadMarkets();const o=this.market(t),h={};let c;const d=this.safeString2(n,"client_order_id","clientOrderId"),u=this.safeNumber(n,"triggerPrice"),l=this.safeNumber(n,"orderPrice"),f=this.safeNumber(n,"trailValue");n=this.omit(n,["client_order_id","clientOrderId","triggerPrice","orderPrice","trailValue"]);const p=void 0!==u,m=void 0!==l,g=void 0!==f;p||m||g?(c="privatePostConditionalOrdersOrderIdModify",h.order_id=e,p&&(h.triggerPrice=parseFloat(this.priceToPrecision(t,u))),m&&(h.orderPrice=parseFloat(this.priceToPrecision(t,l))),g&&(h.trailValue=parseFloat(this.priceToPrecision(t,f)))):(void 0===d?(c="privatePostOrdersOrderIdModify",h.order_id=e):(c="privatePostOrdersByClientIdClientOrderIdModify",h.client_order_id=d),void 0!==a&&(h.price=parseFloat(this.priceToPrecision(t,a)))),void 0!==r&&(h.size=parseFloat(this.amountToPrecision(t,r)));const y=await this[c](this.extend(h,n)),b=this.safeValue(y,"result",{});return this.parseOrder(b,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={},r=this.safeValue(this.options,"cancelOrder",{}),a=this.safeString(r,"method","privateDeleteOrdersOrderId");let n=this.safeString(i,"method",a);const o=this.safeValue(i,"type"),h=this.safeValue2(i,"client_order_id","clientOrderId");void 0===h?(s.order_id=parseInt(e),"stop"!==o&&"trailingStop"!==o&&"takeProfit"!==o||(n="privateDeleteConditionalOrdersOrderId")):(s.client_order_id=h,n="privateDeleteOrdersByClientIdClientOrderId");const c=this.omit(i,["method","type","client_order_id","clientOrderId"]),d=await this[n](this.extend(s,c));return this.safeValue(d,"result",{})}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={},s=this.getMarketId(e,"market",t);void 0!==s&&(i.market=s);const r=await this.privateDeleteOrders(this.extend(i,t));return this.safeValue(r,"result",{})}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={},r=this.safeValue2(i,"client_order_id","clientOrderId");let a="privateGetOrdersOrderId";void 0===r?s.order_id=e:(s.client_order_id=r,i=this.omit(i,["client_order_id","clientOrderId"]),a="privateGetOrdersByClientIdClientOrderId");const n=await this[a](this.extend(s,i)),o=this.safeValue(n,"result",{});return this.parseOrder(o)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={},[a,n]=this.getMarketParams(e,"market",s);void 0!==n&&(r.market=n);const o=this.safeValue(this.options,"fetchOpenOrders",{}),h=this.safeString(o,"method","privateGetOrders");let c=this.safeString(s,"method",h);const d=this.safeValue(s,"type");"stop"!==d&&"trailingStop"!==d&&"takeProfit"!==d||(c="privateGetConditionalOrders");const u=this.omit(s,["method","type"]),l=await this[c](this.extend(r,u)),f=this.safeValue(l,"result",[]);return this.parseOrders(f,a,t,i)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={},[a,n]=this.getMarketParams(e,"market",s);void 0!==n&&(r.market=n),void 0!==i&&(r.limit=i),void 0!==t&&(r.start_time=parseInt(t/1e3));const o=this.safeValue(this.options,"fetchOrders",{}),h=this.safeString(o,"method","privateGetOrdersHistory");let c=this.safeString(s,"method",h);const d=this.safeValue(s,"type");"stop"!==d&&"trailingStop"!==d&&"takeProfit"!==d||(c="privateGetConditionalOrdersHistory");const u=this.omit(s,["method","type"]),l=await this[c](this.extend(r,u)),f=this.safeValue(l,"result",[]);return this.parseOrders(f,a,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const[r,a]=this.getMarketParams(e,"market",s),n={};void 0!==a&&(n.market=a),void 0!==t&&(n.start_time=parseInt(t/1e3),n.end_time=this.seconds());const o=await this.privateGetFills(this.extend(n,s)),h=this.safeValue(o,"result",[]);return this.parseTrades(h,r,t,i)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),await this.loadMarkets(),this.checkAddress(i);const a=this.currency(e),n={coin:a.id,size:t,address:i};void 0!==this.password&&(n.password=this.password),void 0!==s&&(n.tag=s);const o=this.safeValue(this.options,"networks",{});let h=this.safeStringUpper(r,"network");h=this.safeStringLower(o,h,h),void 0!==h&&(n.method=h,r=this.omit(r,"network"));const c=await this.privatePostWalletWithdrawals(this.extend(n,r)),d=this.safeValue(c,"result",{});return this.parseTransaction(d,a)}async fetchPositions(e,t={}){await this.loadMarkets();const i=await this.privateGetPositions(this.extend({showAvgPrice:!0},t)),s=this.safeValue(i,"result",[]),r=[];for(let e=0;e<s.length;e++)r.push(this.parsePosition(s[e]));return this.filterByArray(r,"symbol",e,!1)}parsePosition(e,t){const i=this.safeString(e,"size"),s="buy"===this.safeString(e,"side")?"long":"short",r=this.safeString(e,"future"),a=this.safeSymbol(r,t),n=this.safeString(e,"estimatedLiquidationPrice"),o=this.safeString(e,"initialMarginRequirement"),h=parseInt(b.stringDiv("1",o,0)),c=this.safeString(e,"entryPrice"),d=b.stringMul(i,c),u=b.stringMul(d,o),l=this.safeString(e,"maintenanceMarginRequirement"),f=b.stringMul(d,l),p=this.safeString(e,"recentPnl"),m=this.parseNumber(b.stringMul(b.stringDiv(p,u,4),"100")),g=this.safeString(e,"recentAverageOpenPrice");let y,v,w;if(void 0!==g&&b.stringGt(n,"0")){y="long"===s?b.stringSub(c,n):b.stringSub(n,c);const e=b.stringMul(y,i);v=b.stringAdd(e,f),w=this.parseNumber(b.stringDiv(f,v,4))}return{info:e,symbol:a,timestamp:void 0,datetime:void 0,initialMargin:this.parseNumber(u),initialMarginPercentage:this.parseNumber(o),maintenanceMargin:this.parseNumber(f),maintenanceMarginPercentage:this.parseNumber(l),entryPrice:this.parseNumber(g),notional:this.parseNumber(d),leverage:h,unrealizedPnl:this.parseNumber(p),contracts:this.parseNumber(i),contractSize:this.parseNumber("1"),marginRatio:w,liquidationPrice:this.parseNumber(n),markPrice:this.parseNumber(c),collateral:this.parseNumber(v),marginType:"cross",side:s,percentage:m}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={coin:this.currency(e).id},s=this.safeValue(this.options,"networks",{});let r=this.safeStringUpper(t,"network");r=this.safeStringLower(s,r,r),void 0!==r&&(i.method=r,t=this.omit(t,"network"));const a=await this.privateGetWalletDepositAddressCoin(this.extend(i,t)),n=this.safeValue(a,"result",{}),o=this.safeString(n,"address"),h=this.safeString(n,"tag");return this.checkAddress(o),{currency:e,address:o,tag:h,network:void 0,info:a}}parseTransactionStatus(e){return this.safeString({confirmed:"ok",complete:"ok",cancelled:"canceled"},e,e)}parseTransaction(e,t){const i=this.safeCurrencyCode(this.safeString(e,"coin")),s=this.safeString(e,"id"),r=this.safeNumber(e,"size"),a=this.parseTransactionStatus(this.safeString(e,"status")),n=this.parse8601(this.safeString(e,"time")),o=this.safeString(e,"txid");let h,c=this.safeValue(e,"address");if("string"!=typeof c&&(h=this.safeString(c,"tag"),c=this.safeString(c,"address")),void 0===c){const t=this.safeString(e,"notes");void 0!==t&&t.indexOf("Transfer to")>=0&&(c=t.slice(12))}const d=this.safeNumber(e,"fee");return{info:e,id:s,txid:o,timestamp:n,datetime:this.iso8601(n),addressFrom:void 0,address:c,addressTo:c,tagFrom:void 0,tag:h,tagTo:h,type:void 0,amount:r,currency:i,status:a,updated:void 0,fee:{currency:i,cost:d,rate:void 0}}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r=await this.privateGetWalletDeposits(s),a=this.safeValue(r,"result",[]);let n;return void 0!==e&&(n=this.currency(e)),this.parseTransactions(a,n,t,i,{type:"deposit"})}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r=await this.privateGetWalletWithdrawals(s),a=this.safeValue(r,"result",[]);let n;return void 0!==e&&(n=this.currency(e)),this.parseTransactions(a,n,t,i,{type:"withdrawal"})}sign(e,t="public",i="GET",s={},r,a){let n="/api/"+this.implodeParams(e,s);const o=this.safeValue(this.options,"sign",{}),h=this.safeString(o,this.hostname,"FTX"),c=h+"-SUBACCOUNT",d=this.safeString2(s,c,"subaccount");void 0!==d&&(s=this.omit(s,[c,"subaccount"]));const u=this.omit(s,this.extractParams(e));let l=this.implodeHostname(this.urls.api[t])+n;if("POST"!==i&&Object.keys(u).length){const e="?"+this.urlencode(u);l+=e,n+=e}if("private"===t){this.checkRequiredCredentials();const e=this.milliseconds().toString();let t=e+i+n;r={},"POST"!==i&&"DELETE"!==i||(t+=a=this.json(u),r["Content-Type"]="application/json");const s=this.hmac(this.encode(t),this.encode(this.secret),"sha256");r[h+"-KEY"]=this.apiKey,r[h+"-TS"]=e,r[h+"-SIGN"]=s,void 0!==d&&(r[c]=d)}return{url:l,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,n,o,h,c){if(void 0!==o&&!this.safeValue(o,"success")){const e=this.id+" "+n,t=this.safeString(o,"error");throw this.throwExactlyMatchedException(this.exceptions.exact,t,e),this.throwBroadlyMatchedException(this.exceptions.broad,t,e),new a(e)}}async setLeverage(e,t,i={}){if(e<1||e>20)throw new o(this.id+" leverage should be between 1 and 20");const s={leverage:e};return await this.privatePostAccountLeverage(this.extend(s,i))}parseIncome(e,t){const i=this.safeString(e,"future"),s=this.safeSymbol(i,t),r=this.safeNumber(e,"payment"),a=this.safeCurrencyCode("USD"),n=this.safeString(e,"id"),o=this.safeString(e,"time"),h=this.parse8601(o),c=this.safe_number(e,"rate");return{info:e,symbol:s,code:a,timestamp:h,datetime:this.iso8601(h),id:n,amount:r,rate:c}}parseIncomes(e,t,i,s){const r=[];for(let i=0;i<e.length;i++){const s=e[i],a=this.parseIncome(s,t);r.push(a)}const a=this.sortBy(r,"timestamp");return this.filterBySinceLimit(a,i,s,"timestamp")}async fetchFundingHistory(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.future=a.id),void 0!==t&&(r.startTime=t);const n=await this.privateGetFundingPayments(this.extend(r,s)),o=this.safeValue(n,"result",[]);return this.parseIncomes(o,a,t,i)}parseFundingRate(e,t){const i=this.safeNumber(e,"nextFundingRate"),s=this.safeString(e,"nextFundingTime"),r=this.parse8601(s);let a;void 0!==r&&(a=r-36e5);const n=this.safeNumber(e,"predictedExpirationPrice");return{info:e,symbol:t.symbol,markPrice:void 0,indexPrice:void 0,interestRate:this.parseNumber("0"),estimatedSettlePrice:n,timestamp:void 0,datetime:void 0,previousFundingRate:void 0,nextFundingRate:i,previousFundingTimestamp:a,nextFundingTimestamp:r,previousFundingDatetime:this.iso8601(a),nextFundingDatetime:this.iso8601(r)}}async fetchFundingRate(e,t={}){await this.loadMarkets();const i=this.market(e),s={future_name:i.id},r=await this.publicGetFuturesFutureNameStats(this.extend(s,t)),a=this.safeValue(r,"result",{});return this.parseFundingRate(a,i)}async fetchBorrowRates(e={}){await this.loadMarkets();const t=await this.privateGetSpotMarginBorrowRates(),i=this.milliseconds(),s=this.safeValue(t,"result"),r={};for(let e=0;e<s.length;e++){const t=s[e],a=this.safeCurrencyCode(this.safeString(t,"coin"));r[a]={currency:a,rate:this.safeNumber(t,"previous"),period:36e5,timestamp:i,datetime:this.iso8601(i),info:t}}return r}}},31087:(e,t,i)=>{"use strict";const s=i(89636);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"ftxus",name:"FTX US",countries:["US"],certified:!1,hostname:"ftx.us",urls:{logo:"https://user-images.githubusercontent.com/1294454/141506670-12f6115f-f425-4cd8-b892-b51d157ca01f.jpg",www:"https://ftx.us/",docs:"https://docs.ftx.us/",fees:"https://help.ftx.us/hc/en-us/articles/360043579273-Fees"}})}}},94663:(e,t,i)=>{"use strict";const s=i(48819),r=i(6832),{TICK_SIZE:a}=i(62115),{ExchangeError:n,BadRequest:o,ArgumentsRequired:h,AuthenticationError:c,PermissionDenied:d,AccountSuspended:u,InsufficientFunds:l,RateLimitExceeded:f,ExchangeNotAvailable:p,BadSymbol:m,InvalidOrder:g,OrderNotFound:y}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"gateio",name:"Gate.io",countries:["KR"],rateLimit:10/3,version:"v4",certified:!0,pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/31784029-0313c702-b509-11e7-9ccc-bc0da6a0e435.jpg",doc:"https://www.gate.io/docs/apiv4/en/index.html",www:"https://gate.io/",api:{public:"https://api.gateio.ws/api/v4",private:"https://api.gateio.ws/api/v4"},referral:{url:"https://www.gate.io/ref/2436035",discount:.2}},has:{margin:!0,swap:!0,future:!0,cancelAllOrders:!0,cancelOrder:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchBorrowRate:!1,fetchBorrowRateHistory:!1,fetchBorrowRates:!1,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchFundingHistory:!0,fetchFundingRate:!0,fetchFundingRateHistory:!0,fetchFundingRates:!0,fetchIndexOHLCV:!0,fetchMarkets:!0,fetchMarkOHLCV:!0,fetchMyTrades:!0,fetchNetworkDepositAddress:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrdersByStatus:!0,fetchPositions:!0,fetchPremiumIndexOHLCV:!1,fetchTicker:!0,fetchTickers:!0,fetchTime:!1,fetchTrades:!0,fetchTradingFees:!0,fetchWithdrawals:!0,setLeverage:!0,transfer:!0,withdraw:!0},api:{public:{spot:{get:{currencies:1,"currencies/{currency}":1,currency_pairs:1,"currency_pairs/{currency_pair}":1,tickers:1,order_book:1,trades:1,candlesticks:1}},margin:{get:{currency_pairs:1,"currency_pairs/{currency_pair}":1,"cross/currencies":1,"cross/currencies/{currency}":1,funding_book:1}},futures:{get:{"{settle}/contracts":1.5,"{settle}/contracts/{contract}":1.5,"{settle}/order_book":1.5,"{settle}/trades":1.5,"{settle}/candlesticks":1.5,"{settle}/tickers":1.5,"{settle}/funding_rate":1.5,"{settle}/insurance":1.5,"{settle}/contract_stats":1.5,"{settle}/liq_orders":1.5}},delivery:{get:{"{settle}/contracts":1.5,"{settle}/contracts/{contract}":1.5,"{settle}/order_book":1.5,"{settle}/trades":1.5,"{settle}/candlesticks":1.5,"{settle}/tickers":1.5,"{settle}/insurance":1.5}}},private:{withdrawals:{post:{"":3e3},delete:{"{withdrawal_id}":300}},wallet:{get:{deposit_address:300,withdrawals:300,deposits:300,sub_account_transfers:300,withdraw_status:300,sub_account_balances:300,fee:300},post:{transfers:300,sub_account_transfers:300}},spot:{get:{accounts:1,open_orders:1,orders:1,"orders/{order_id}":1,my_trades:1,price_orders:1,"price_orders/{order_id}":1},post:{batch_orders:1,orders:1,cancel_batch_orders:1,price_orders:1},delete:{orders:1,"orders/{order_id}":1,price_orders:1,"price_orders/{order_id}":1}},margin:{get:{accounts:1.5,account_book:1.5,funding_accounts:1.5,loans:1.5,"loans/{loan_id}":1.5,"loans/{loan_id}/repayment":1.5,loan_records:1.5,"loan_records/{load_record_id}":1.5,auto_repay:1.5,transferable:1.5,"cross/accounts":1.5,"cross/account_book":1.5,"cross/loans":1.5,"cross/loans/{loan_id}":1.5,"cross/loans/repayments":1.5,"cross/transferable":1.5},post:{loans:1.5,merged_loans:1.5,"loans/{loan_id}/repayment":1.5,auto_repay:1.5,"cross/loans":1.5,"cross/loans/repayments":1.5},patch:{"loans/{loan_id}":1.5,"loan_records/{loan_record_id}":1.5},delete:{"loans/{loan_id}":1.5}},futures:{get:{"{settle}/accounts":1.5,"{settle}/account_book":1.5,"{settle}/positions":1.5,"{settle}/positions/{contract}":1.5,"{settle}/orders":1.5,"{settle}/orders/{order_id}":1.5,"{settle}/my_trades":1.5,"{settle}/position_close":1.5,"{settle}/liquidates":1.5,"{settle}/price_orders":1.5,"{settle}/price_orders/{order_id}":1.5},post:{"{settle}/positions/{contract}/margin":1.5,"{settle}/positions/{contract}/leverage":1.5,"{settle}/positions/{contract}/risk_limit":1.5,"{settle}/dual_mode":1.5,"{settle}/dual_comp/positions/{contract}":1.5,"{settle}/dual_comp/positions/{contract}/margin":1.5,"{settle}/dual_comp/positions/{contract}/leverage":1.5,"{settle}/dual_comp/positions/{contract}/risk_limit":1.5,"{settle}/orders":1.5,"{settle}/price_orders":1.5},delete:{"{settle}/orders":1.5,"{settle}/orders/{order_id}":1.5,"{settle}/price_orders":1.5,"{settle}/price_orders/{order_id}":1.5}},delivery:{get:{"{settle}/accounts":1.5,"{settle}/account_book":1.5,"{settle}/positions":1.5,"{settle}/positions/{contract}":1.5,"{settle}/orders":1.5,"{settle}/orders/{order_id}":1.5,"{settle}/my_trades":1.5,"{settle}/position_close":1.5,"{settle}/liquidates":1.5,"{settle}/price_orders":1.5,"{settle}/price_orders/{order_id}":1.5},post:{"{settle}/positions/{contract}/margin":1.5,"{settle}/positions/{contract}/leverage":1.5,"{settle}/positions/{contract}/risk_limit":1.5,"{settle}/orders":1.5,"{settle}/price_orders":1.5},delete:{"{settle}/orders":1.5,"{settle}/orders/{order_id}":1.5,"{settle}/price_orders":1.5,"{settle}/price_orders/{order_id}":1.5}}}},timeframes:{"10s":"10s","1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","8h":"8h","1d":"1d","7d":"7d"},commonCurrencies:{"88MPH":"MPH",BIFI:"Bitcoin File",BOX:"DefiBox",BTCBEAR:"BEAR",BTCBULL:"BULL",BYN:"BeyondFi",EGG:"Goose Finance",GTC:"Game.com",GTC_HT:"Game.com HT",GTC_BSC:"Game.com BSC",HIT:"HitChain",MPH:"Morpher",RAI:"Rai Reflex Index",SBTC:"Super Bitcoin",TNC:"Trinity Network Credit",TON:"TONToken",VAI:"VAIOT"},requiredCredentials:{apiKey:!0,secret:!0},options:{createOrder:{expiration:86400},networks:{TRC20:"TRX",ERC20:"ETH",BEP20:"BSC"},accountsByType:{spot:"spot",margin:"margin",futures:"futures",delivery:"delivery"},defaultType:"spot",swap:{fetchMarkets:{settlementCurrencies:["usdt","btc"]}},futures:{fetchMarkets:{settlementCurrencies:["usdt","btc"]}}},precisionMode:a,fees:{trading:{tierBased:!0,feeSide:"get",percentage:!0,maker:this.parseNumber("0.002"),taker:this.parseNumber("0.002"),tiers:{maker:[[this.parseNumber("0"),this.parseNumber("0.002")],[this.parseNumber("1.5"),this.parseNumber("0.00185")],[this.parseNumber("3"),this.parseNumber("0.00175")],[this.parseNumber("6"),this.parseNumber("0.00165")],[this.parseNumber("12.5"),this.parseNumber("0.00155")],[this.parseNumber("25"),this.parseNumber("0.00145")],[this.parseNumber("75"),this.parseNumber("0.00135")],[this.parseNumber("200"),this.parseNumber("0.00125")],[this.parseNumber("500"),this.parseNumber("0.00115")],[this.parseNumber("1250"),this.parseNumber("0.00105")],[this.parseNumber("2500"),this.parseNumber("0.00095")],[this.parseNumber("3000"),this.parseNumber("0.00085")],[this.parseNumber("6000"),this.parseNumber("0.00075")],[this.parseNumber("11000"),this.parseNumber("0.00065")],[this.parseNumber("20000"),this.parseNumber("0.00055")],[this.parseNumber("40000"),this.parseNumber("0.00055")],[this.parseNumber("75000"),this.parseNumber("0.00055")]],taker:[[this.parseNumber("0"),this.parseNumber("0.002")],[this.parseNumber("1.5"),this.parseNumber("0.00195")],[this.parseNumber("3"),this.parseNumber("0.00185")],[this.parseNumber("6"),this.parseNumber("0.00175")],[this.parseNumber("12.5"),this.parseNumber("0.00165")],[this.parseNumber("25"),this.parseNumber("0.00155")],[this.parseNumber("75"),this.parseNumber("0.00145")],[this.parseNumber("200"),this.parseNumber("0.00135")],[this.parseNumber("500"),this.parseNumber("0.00125")],[this.parseNumber("1250"),this.parseNumber("0.00115")],[this.parseNumber("2500"),this.parseNumber("0.00105")],[this.parseNumber("3000"),this.parseNumber("0.00095")],[this.parseNumber("6000"),this.parseNumber("0.00085")],[this.parseNumber("11000"),this.parseNumber("0.00075")],[this.parseNumber("20000"),this.parseNumber("0.00065")],[this.parseNumber("40000"),this.parseNumber("0.00065")],[this.parseNumber("75000"),this.parseNumber("0.00065")]]}},swap:{tierBased:!0,feeSide:"base",percentage:!0,maker:this.parseNumber("0.0"),taker:this.parseNumber("0.0005"),tiers:{maker:[[this.parseNumber("0"),this.parseNumber("0.0000")],[this.parseNumber("1.5"),this.parseNumber("-0.00005")],[this.parseNumber("3"),this.parseNumber("-0.00005")],[this.parseNumber("6"),this.parseNumber("-0.00005")],[this.parseNumber("12.5"),this.parseNumber("-0.00005")],[this.parseNumber("25"),this.parseNumber("-0.00005")],[this.parseNumber("75"),this.parseNumber("-0.00005")],[this.parseNumber("200"),this.parseNumber("-0.00005")],[this.parseNumber("500"),this.parseNumber("-0.00005")],[this.parseNumber("1250"),this.parseNumber("-0.00005")],[this.parseNumber("2500"),this.parseNumber("-0.00005")],[this.parseNumber("3000"),this.parseNumber("-0.00008")],[this.parseNumber("6000"),this.parseNumber("-0.01000")],[this.parseNumber("11000"),this.parseNumber("-0.01002")],[this.parseNumber("20000"),this.parseNumber("-0.01005")],[this.parseNumber("40000"),this.parseNumber("-0.02000")],[this.parseNumber("75000"),this.parseNumber("-0.02005")]],taker:[[this.parseNumber("0"),this.parseNumber("0.00050")],[this.parseNumber("1.5"),this.parseNumber("0.00048")],[this.parseNumber("3"),this.parseNumber("0.00046")],[this.parseNumber("6"),this.parseNumber("0.00044")],[this.parseNumber("12.5"),this.parseNumber("0.00042")],[this.parseNumber("25"),this.parseNumber("0.00040")],[this.parseNumber("75"),this.parseNumber("0.00038")],[this.parseNumber("200"),this.parseNumber("0.00036")],[this.parseNumber("500"),this.parseNumber("0.00034")],[this.parseNumber("1250"),this.parseNumber("0.00032")],[this.parseNumber("2500"),this.parseNumber("0.00030")],[this.parseNumber("3000"),this.parseNumber("0.00030")],[this.parseNumber("6000"),this.parseNumber("0.00030")],[this.parseNumber("11000"),this.parseNumber("0.00030")],[this.parseNumber("20000"),this.parseNumber("0.00030")],[this.parseNumber("40000"),this.parseNumber("0.00030")],[this.parseNumber("75000"),this.parseNumber("0.00030")]]}}},exceptions:{exact:{INVALID_PARAM_VALUE:o,INVALID_PROTOCOL:o,INVALID_ARGUMENT:o,INVALID_REQUEST_BODY:o,MISSING_REQUIRED_PARAM:h,BAD_REQUEST:o,INVALID_CONTENT_TYPE:o,NOT_ACCEPTABLE:o,METHOD_NOT_ALLOWED:o,NOT_FOUND:n,INVALID_CREDENTIALS:c,INVALID_KEY:c,IP_FORBIDDEN:c,READ_ONLY:d,INVALID_SIGNATURE:c,MISSING_REQUIRED_HEADER:c,REQUEST_EXPIRED:c,ACCOUNT_LOCKED:u,FORBIDDEN:d,SUB_ACCOUNT_NOT_FOUND:n,SUB_ACCOUNT_LOCKED:u,MARGIN_BALANCE_EXCEPTION:n,MARGIN_TRANSFER_FAILED:n,TOO_MUCH_FUTURES_AVAILABLE:n,FUTURES_BALANCE_NOT_ENOUGH:l,ACCOUNT_EXCEPTION:n,SUB_ACCOUNT_TRANSFER_FAILED:n,ADDRESS_NOT_USED:n,TOO_FAST:f,WITHDRAWAL_OVER_LIMIT:n,API_WITHDRAW_DISABLED:p,INVALID_WITHDRAW_ID:n,INVALID_WITHDRAW_CANCEL_STATUS:n,INVALID_PRECISION:g,INVALID_CURRENCY:m,INVALID_CURRENCY_PAIR:m,POC_FILL_IMMEDIATELY:n,ORDER_NOT_FOUND:y,ORDER_CLOSED:g,ORDER_CANCELLED:g,QUANTITY_NOT_ENOUGH:g,BALANCE_NOT_ENOUGH:l,MARGIN_NOT_SUPPORTED:g,MARGIN_BALANCE_NOT_ENOUGH:l,AMOUNT_TOO_LITTLE:g,AMOUNT_TOO_MUCH:g,REPEATED_CREATION:g,LOAN_NOT_FOUND:y,LOAN_RECORD_NOT_FOUND:y,NO_MATCHED_LOAN:n,NOT_MERGEABLE:n,NO_CHANGE:n,REPAY_TOO_MUCH:n,TOO_MANY_CURRENCY_PAIRS:g,TOO_MANY_ORDERS:g,MIXED_ACCOUNT_TYPE:g,AUTO_BORROW_TOO_MUCH:n,TRADE_RESTRICTED:l,USER_NOT_FOUND:n,CONTRACT_NO_COUNTER:n,CONTRACT_NOT_FOUND:m,RISK_LIMIT_EXCEEDED:n,INSUFFICIENT_AVAILABLE:l,LIQUIDATE_IMMEDIATELY:g,LEVERAGE_TOO_HIGH:g,LEVERAGE_TOO_LOW:g,ORDER_NOT_OWNED:n,ORDER_FINISHED:n,POSITION_CROSS_MARGIN:n,POSITION_IN_LIQUIDATION:n,POSITION_IN_CLOSE:n,POSITION_EMPTY:g,REMOVE_TOO_MUCH:n,RISK_LIMIT_NOT_MULTIPLE:n,RISK_LIMIT_TOO_HIGH:n,RISK_LIMIT_TOO_lOW:n,PRICE_TOO_DEVIATED:g,SIZE_TOO_LARGE:g,SIZE_TOO_SMALL:g,PRICE_OVER_LIQUIDATION:g,PRICE_OVER_BANKRUPT:g,ORDER_POC_IMMEDIATE:g,INCREASE_POSITION:g,CONTRACT_IN_DELISTING:n,INTERNAL:n,SERVER_ERROR:n,TOO_BUSY:p}},broad:{}})}async fetchMarkets(e={}){const t=this.safeString2(this.options,"fetchMarkets","defaultType","spot"),i=this.safeString(e,"type",t),s=this.omit(e,"type"),a="spot"===i,o="margin"===i,h="futures"===i,c="swap"===i,d="option"===i;if(!(a||o||h||c))throw new n(this.id+" does not support '"+i+"' type, set exchange.options['defaultType'] to 'spot', 'margin', 'swap' or 'futures'");let u;const l=[],f=this.getSupportedMapping(i,{spot:"publicSpotGetCurrencyPairs",margin:"publicMarginGetCurrencyPairs",swap:"publicFuturesGetSettleContracts",futures:"publicDeliveryGetSettleContracts"});if(c||h||d){const e=this.getSettlementCurrencies(i,"fetchMarkets");for(let t=0;t<e.length;t++){const n=e[t];s.settle=n,u=await this[f](s);for(let e=0;e<u.length;e++){const t=u[e],s=this.safeString(t,"name"),f=s.split("_"),p=this.safeString(f,0),m=this.safeString(f,1),g=this.safeString(f,2),y=m.toLowerCase()===n,b=p.toLowerCase()===n,v=this.safeCurrencyCode(p),w=this.safeCurrencyCode(m);let k="";k=void 0!==g?v+"/"+w+":"+this.safeCurrencyCode(n)+"-"+g:v+"/"+w+":"+this.safeCurrencyCode(n);const _=this.safeString(t,"order_price_deviate"),S=this.safeString(t,"mark_price"),O=r.stringSub("1",_),M=r.stringAdd("1",_),T=r.stringMul(O,S),x=r.stringMul(M,S),I=this.safeString(t,"taker_fee_rate"),A=this.safeString(t,"maker_fee_rate",I),C="futures"===i?"swap":i,N=this.safeNumber(t,"order_price_round");l.push({info:t,id:s,baseId:p,quoteId:m,settleId:this.safeSymbol(n),base:v,quote:w,symbol:k,type:i,spot:a,margin:o,futures:h,swap:c,option:d,derivative:!0,contract:!0,linear:y,inverse:b,taker:this.parseNumber(r.stringDiv(I,"100")),maker:this.parseNumber(r.stringDiv(A,"100")),contractSize:this.safeString(t,"quanto_multiplier"),precision:{amount:this.parseNumber("1"),price:N},limits:{leverage:{min:this.safeNumber(t,"leverage_min"),max:this.safeNumber(t,"leverage_max")},amount:{min:this.safeNumber(t,"order_size_min"),max:this.safeNumber(t,"order_size_max")},price:{min:T,max:x}},expiry:this.safeInteger(t,"expire_time"),fees:this.safeValue(this.fees,C,{})})}}}else{u=await this[f](s);for(let e=0;e<u.length;e++){const t=u[e],s=this.safeString(t,"id"),a="spot"===i,n="futures"===i,h="swap"===i,c="option"===i,[d,f]=s.split("_"),p=this.safeCurrencyCode(d),m=this.safeCurrencyCode(f),g=p+"/"+m,y=this.safeString(t,"fee"),b=this.safeString(t,"maker_fee_rate",y),v=this.safeString(t,"amount_precision"),w=this.safeString(t,"precision"),k=this.parseNumber(this.parsePrecision(v)),_=this.parseNumber(this.parsePrecision(w)),S=this.safeString(t,"trade_status");l.push({info:t,id:s,baseId:d,quoteId:f,settleId:void 0,base:p,quote:m,symbol:g,type:i,spot:a,margin:o,futures:n,swap:h,option:c,contract:!1,derivative:!1,linear:!1,inverse:!1,taker:this.parseNumber(r.stringDiv(y,"100")),maker:this.parseNumber(r.stringDiv(b,"100")),precision:{amount:k,price:_},active:"tradable"===S,limits:{amount:{min:k,max:void 0},price:{min:_,max:void 0},cost:{min:this.safeNumber(t,"min_quote_amount"),max:void 0},leverage:{max:this.safeNumber(t,"lever",1)}}})}}return l}prepareRequest(e){return e.contract?{contract:e.id,settle:e.settleId}:{currency_pair:e.id}}getSettlementCurrencies(e,t){const i=this.safeValue(this.options,e,{}),s=this.safeValue(i,t,{}),r="swap"===e?["usdt"]:["btc"];return this.safeValue(s,"settlementCurrencies",r)}async fetchCurrencies(e={}){const t=await this.publicSpotGetCurrencies(e),i={},s=this.parseNumber("1e-6");for(let e=0;e<t.length;e++){const r=t[e],a=this.safeString(r,"currency"),n=this.safeCurrencyCode(a),o=this.safeValue(r,"delisted"),h=this.safeValue(r,"withdraw_disabled"),c=this.safeValue(r,"disabled_disabled"),d=this.safeValue(r,"trade_disabled"),u=!(o&&h&&c&&d);i[n]={id:a,name:void 0,code:n,precision:s,info:r,active:u,fee:void 0,fees:[],limits:this.limits}}return i}async fetchFundingRate(e,t={}){await this.loadMarkets();const i=this.market(e),s={contract:i.id,settle:i.quote.toLowerCase()},r=await this.publicFuturesGetSettleContractsContract(this.extend(s,t));return this.parseFundingRate(r)}async fetchFundingRates(e,t={}){await this.loadMarkets();const i={settle:this.safeString(t,"settle").toLowerCase()},s=await this.publicFuturesGetSettleContracts(this.extend(i,t)),r=this.parseFundingRates(s);return this.filterByArray(r,"symbol",e)}parseFundingRate(e,t){const i=this.safeString(e,"name"),s=this.safeSymbol(i,t),r=this.safeNumber(e,"mark_price"),a=this.safeNumber(e,"index_price"),n=this.safeNumber(e,"interest_rate"),o=this.safeString(e,"funding_rate"),h=1e3*this.safeString(e,"funding_interval"),c=1e3*this.safeInteger(e,"funding_next_apply"),d=1e3*this.safeNumber(e,"funding_next_apply")-h,u=this.safeNumber(e,"funding_rate_indicative"),l=this.milliseconds();return{info:e,symbol:s,markPrice:r,indexPrice:a,interestRate:n,estimatedSettlePrice:void 0,timestamp:l,datetime:this.iso8601(l),previousFundingRate:o,nextFundingRate:u,previousFundingTimestamp:d,nextFundingTimestamp:c,previousFundingDatetime:this.iso8601(d),nextFundingDatetime:this.iso8601(c)}}async fetchNetworkDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateWalletGetDepositAddress(this.extend(i,t)),r=this.safeValue(s,"multichain_addresses"),a=this.safeString(s,"currency");e=this.safeCurrencyCode(a);const n={};for(let t=0;t<r.length;t++){const i=r[t];if(this.safeInteger(i,"obtain_failed"))continue;const s=this.safeString(i,"chain"),a=this.safeString(i,"address");let o=this.safeString(i,"payment_id");o=o.length?o:void 0,n[s]={info:i,code:e,address:a,tag:o}}return n}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateWalletGetDepositAddress(this.extend(i,t)),r=this.safeString(s,"currency");e=this.safeCurrencyCode(r);const a=this.safeString(s,"address");let n,o;if(a.indexOf(" ")>=0){const e=a.split(" ");o=e[0],n=e[1]}else o=a;return{info:s,code:e,address:o,tag:n,network:void 0}}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privateWalletGetFee(e),i={},s=this.safeNumber(t,"taker_fee"),r=this.safeNumber(t,"maker_fee");for(let e=0;e<this.symbols.length;e++){const a=this.symbols[e];i[a]={maker:r,taker:s,info:t,symbol:a}}return i}async fetchFundingFees(e={}){await this.loadMarkets();const t=await this.privateWalletGetWithdrawStatus(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r);i[a]={};let n=this.safeValue(s,"withdraw_fix_on_chains");void 0===n&&(n={},n[a]=this.safeNumber(s,"withdraw_fix"));const o=Object.keys(n);for(let e=0;e<o.length;e++){const t=o[e];i[a][t]=this.parseNumber(n[t])}}return{info:t,withdraw:i,deposit:{}}}async fetchFundingHistory(e,t,i,s={}){if(void 0===e)throw new h(this.id+" fetchFundingHistory() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a=this.prepareRequest(r);a.type="fund",void 0!==t&&(a.from=t),void 0!==i&&(a.limit=i);const n=this.getSupportedMapping(r.type,{swap:"privateFuturesGetSettleAccountBook",futures:"privateDeliveryGetSettleAccountBook"}),o=await this[n](this.extend(a,s)),c=[];for(let t=0;t<o.length;t++){const i=o[t],s=this.safeTimestamp(i,"time");c.push({info:i,symbol:e,code:this.safeCurrencyCode(this.safeString(i,"text")),timestamp:s,datetime:this.iso8601(s),id:void 0,amount:this.safeNumber(i,"change")})}const d=this.sortBy(c,"timestamp");return this.filterBySymbolSinceLimit(d,e,t,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r=this.prepareRequest(s),a=s.spot||s.margin,n=this.getSupportedMapping(s.type,{spot:"publicSpotGetOrderBook",margin:"publicSpotGetOrderBook",swap:"publicFuturesGetSettleOrderBook",futures:"publicDeliveryGetSettleOrderBook"});void 0!==t&&(r.limit=t);const o=await this[n](this.extend(r,i));let h=this.safeInteger(o,"current");a||(h*=1e3);const c=a?0:"p",d=a?1:"s";return this.parseOrderBook(o,e,h,"bids","asks",c,d)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=this.prepareRequest(i),r=this.getSupportedMapping(i.type,{spot:"publicSpotGetTickers",margin:"publicSpotGetTickers",swap:"publicFuturesGetSettleTickers",futures:"publicDeliveryGetSettleTickers"}),a=await this[r](this.extend(s,t)),n=this.safeValue(a,0);return this.parseTicker(n,i)}parseTicker(e,t){const i=this.safeString2(e,"currency_pair","contract"),s=this.safeSymbol(i,t),r=this.safeNumber(e,"last"),a=this.safeNumber(e,"lowest_ask"),n=this.safeNumber(e,"highest_bid"),o=this.safeNumber(e,"high_24h"),h=this.safeNumber(e,"low_24h"),c=this.safeNumber2(e,"base_volume","volume_24h_base"),d=this.safeNumber2(e,"quote_volume","volume_24h_quote"),u=this.safeNumber(e,"change_percentage");return this.safeTicker({symbol:s,timestamp:void 0,datetime:void 0,high:o,low:h,bid:n,bidVolume:void 0,ask:a,askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:u,average:void 0,baseVolume:c,quoteVolume:d,info:e},t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.safeString2(this.options,"fetchTickers","defaultType","spot"),s=this.safeString(t,"type",i);t=this.omit(t,"type");const r=this.getSupportedMapping(s,{spot:"publicSpotGetTickers",margin:"publicSpotGetTickers",swap:"publicFuturesGetSettleTickers",futures:"publicDeliveryGetSettleTickers"}),a={},n="futures"===s,o="swap"===s,h=this.safeString(t,"settle");(o||n)&&void 0===h&&(a.settle=o?"usdt":"btc");const c=await this[r](this.extend(a,t));return this.parseTickers(c,e)}fetchBalanceHelper(e){const t=this.account();return t.used=this.safeString2(e,"locked","position_margin"),t.free=this.safeString(e,"available"),t}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString2(this.options,"fetchBalance","defaultType","spot"),i=this.safeString(e,"type",t);e=this.omit(e,"type");const s="swap"===i,r="futures"===i,a=this.getSupportedMapping(i,{spot:"privateSpotGetAccounts",margin:"privateMarginGetAccounts",swap:"privateFuturesGetSettleAccounts",futures:"privateDeliveryGetSettleAccounts"}),n={};let o=[];if(s||r){const t=s?"usdt":"btc";n.settle=this.safeString(e,"settle",t),o=[await this[a](this.extend(n,e))]}else o=await this[a](this.extend(n,e));const h="margin"===i,c={info:o};for(let e=0;e<o.length;e++){const t=o[e];if(h){const e=this.safeString(t,"currency_pair"),i=this.safeSymbol(e,void 0,"_"),s=this.safeValue(t,"base",{}),r=this.safeValue(t,"quote",{}),a=this.safeCurrencyCode(this.safeString(s,"currency",{})),n=this.safeCurrencyCode(this.safeString(r,"currency",{})),o={};o[a]=this.fetchBalanceHelper(s),o[n]=this.fetchBalanceHelper(r),c[i]=this.parseBalance(o)}else c[this.safeCurrencyCode(this.safeString(t,"currency",{}))]=this.fetchBalanceHelper(t)}return h?c:this.parseBalance(c)}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n=this.safeString(r,"price"),o=this.prepareRequest(a);o.interval=this.timeframes[t];let h="publicSpotGetCandlesticks";if(a.contract){a.futures?h="publicDeliveryGetSettleCandlesticks":a.swap&&(h="publicFuturesGetSettleCandlesticks");const e="index"===n;("mark"===n||e)&&(o.contract=n+"_"+a.id,r=this.omit(r,"price"))}if(void 0===i)void 0!==s&&(o.limit=s);else{const e=this.parseTimeframe(t),r=1e3*e;i=this.sum(i-i%r,r),o.from=parseInt(i/1e3),void 0!==s&&(o.to=this.sum(o.from,s*e-1))}const c=await this[h](this.extend(o,r));return this.parseOHLCVs(c,a,t,i,s)}async fetchMarkOHLCV(e,t="1m",i,s,r={}){return await this.fetchOHLCV(e,t,i,s,this.extend({price:"mark"},r))}async fetchFundingRateHistory(e,t,i,s={}){if(void 0===e)throw new h(this.id+" fetchFundingRateHistory() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={contract:r.id,settle:r.settleId};void 0!==i&&(a.limit=i);const n=await this.publicFuturesGetSettleFundingRate(this.extend(a,s)),o=[];for(let t=0;t<n.length;t++){const i=n[t],s=this.safeTimestamp(i,"t");o.push({info:i,symbol:e,fundingRate:this.safeNumber(i,"r"),timestamp:s,datetime:this.iso8601(s)})}const c=this.sortBy(o,"timestamp");return this.filterBySymbolSinceLimit(c,e,t,i)}async fetchIndexOHLCV(e,t="1m",i,s,r={}){return await this.fetchOHLCV(e,t,i,s,this.extend({price:"index"},r))}parseOHLCV(e,t){return Array.isArray(e)?[this.safeTimestamp(e,0),this.safeNumber(e,5),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,2),this.safeNumber(e,1)]:[this.safeTimestamp(e,"t"),this.safeNumber(e,"o"),this.safeNumber(e,"h"),this.safeNumber(e,"l"),this.safeNumber(e,"c"),this.safeNumber(e,"v")]}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a=this.prepareRequest(r),n=this.getSupportedMapping(r.type,{spot:"publicSpotGetTrades",margin:"publicSpotGetTrades",swap:"publicFuturesGetSettleTrades",futures:"publicDeliveryGetSettleTrades"});void 0!==i&&(a.limit=i),void 0!==t&&r.contract&&(a.from=parseInt(t/1e3));const o=await this[n](this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a=this.prepareRequest(r);void 0!==i&&(a.limit=i),void 0!==t&&(a.from=parseInt(t/1e3));const n=this.getSupportedMapping(r.type,{spot:"privateSpotGetMyTrades",margin:"privateSpotGetMyTrades",swap:"privateFuturesGetSettleMyTrades",futures:"privateDeliveryGetSettleMyTrades"}),o=await this[n](this.extend(a,s));return this.parseTrades(o,r,t,i)}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"create_time"),a=this.safeString2(e,"create_time_ms","time",s);let n;if(a.indexOf(".")>0){const e=a.split(".");n=parseInt(e[0])}t.contract&&(n*=1e3);const o=this.safeString2(e,"currency_pair","contract"),h=this.safeSymbol(o,t);let c=this.safeString2(e,"amount","size");const d=this.safeString(e,"price"),u=r.stringAbs(r.stringMul(c,d)),l=this.parseNumber(d),f=this.parseNumber(u),p=r.stringLt(c,"0")?"sell":"buy";c=r.stringAbs(c);const m=this.parseNumber(c),g=this.safeString(e,"side",p),y=this.safeString(e,"order_id"),b=this.safeString(e,"gt_fee");let v,w;"0"===b?(v=this.safeString(e,"fee_currency"),w=this.safeNumber(e,"fee")):(v="GT",w=this.parseNumber(b));const k={cost:w,currency:v},_=this.safeString(e,"role");return{info:e,id:i,timestamp:n,datetime:this.iso8601(n),symbol:h,order:y,type:void 0,side:g,takerOrMaker:_,price:l,amount:m,cost:f,fee:k}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.limit=i),void 0!==t&&(r.from=parseInt(t/1e3),r.to=t+2592e3);const n=await this.privateWalletGetDeposits(this.extend(r,s));return this.parseTransactions(n,a)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.limit=i),void 0!==t&&(r.from=parseInt(t/1e3),r.to=t+2592e3);const n=await this.privateWalletGetWithdrawals(this.extend(r,s));return this.parseTransactions(n,a)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,address:i,amount:this.currencyToPrecision(e,t)};void 0!==s&&(a.memo=s);const n=this.safeValue(this.options,"networks",{});let o=this.safeStringUpper(r,"network");o=this.safeStringLower(n,o,o),void 0!==o&&(a.chain=o,r=this.omit(r,"network"));const h=await this.privateWithdrawalsPost(this.extend(a,r)),c=this.safeString(h,"currency");return{info:h,id:this.safeString(h,"id"),code:this.safeCurrencyCode(c),amount:this.safeNumber(h,"amount"),address:this.safeString(h,"address"),tag:this.safeString(h,"memo")}}parseTransactionStatus(e){return this.safeString({PEND:"pending",REQUEST:"pending",DMOVE:"pending",CANCEL:"failed",DONE:"ok"},e,e)}parseTransactionType(e){return this.safeString({d:"deposit",w:"withdrawal"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id");let s;void 0!==i&&(s=this.parseTransactionType(i[0]));const r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r),n=this.safeNumber(e,"amount"),o=this.safeString(e,"txid"),h=this.safeString(e,"status"),c=this.parseTransactionStatus(h),d=this.safeString(e,"address"),u=this.safeNumber(e,"fee");let l=this.safeString(e,"memo");""===l&&(l=void 0);const f=this.safeTimestamp(e,"timestamp");return{info:e,id:i,txid:o,currency:a,amount:n,address:d,tag:l,status:c,type:s,timestamp:f,datetime:this.iso8601(f),fee:u}}async createOrder(e,t,i,s,a,n={}){await this.loadMarkets();const c=this.market(e),d=c.contract,u=this.safeNumber(n,"stopPrice");let l="Orders";const f=this.safeValue2(n,"reduce_only","reduceOnly"),p=this.safeValue2(n,"tif","time_in_force","gtc");let m=this.safeValue(n,"timeInForce",p);n=this.omit(n,["stopPrice","reduce_only","reduceOnly","tif","time_in_force","timeInForce"]);const y="limit"===t,b="market"===t;if(y&&void 0===a)throw new h(this.id+" createOrder() requires a price argument for "+t+" orders");if(d){const t=this.amountToPrecision(e,s),n="sell"===i?r.stringNeg(t):t;s=parseInt(n),b&&(m="ioc",a=0)}else if(!y)throw new g(this.id+" createOrder() does not support "+t+" orders for "+c.type+" markets");let v;const w=this.safeValue(n,"trigger");if(void 0===u&&void 0===w){if(d)v={contract:c.id,size:s,price:this.priceToPrecision(e,a),settle:c.settleId},void 0!==f&&(v.reduce_only=f),void 0!==m&&(v.tif=m);else{const r=this.safeValue(this.options,"createOrder",{}),o=this.safeString(r,"account","spot"),h=this.safeString(n,"account",o);n=this.omit(n,"account"),v={currency_pair:c.id,type:t,account:h,side:i,amount:this.amountToPrecision(e,s),price:this.priceToPrecision(e,a)},void 0!==m&&(v.time_in_force=m)}let r=this.safeString2(n,"text","clientOrderId");if(void 0!==r){if(r.length>28)throw new o(this.id+" createOrder() clientOrderId or text param must be up to 28 characters");n=this.omit(n,["text","clientOrderId"]),"t"!==r[0]&&(r="t-"+r),v.text=r}}else{if(d){const t="sell"===i?1:2;v={initial:{contract:c.id,size:s,price:this.priceToPrecision(e,a)},trigger:{price:this.priceToPrecision(e,u),rule:t},settle:c.settleId};const r=this.safeInteger(n,"expiration");void 0!==r&&(v.trigger.expiration=r,n=this.omit(n,"expiration")),void 0!==f&&(v.initial.reduce_only=f),void 0!==m&&(v.initial.tif=m)}else{const r=this.safeValue(this.options,"createOrder",{}),o=this.safeString(r,"account","normal"),h=this.safeString(n,"account",o);n=this.omit(n,"account");const d=this.safeInteger(r,"expiration"),l=this.safeInteger(n,"expiration",d),f="sell"===i?">=":"<=",p=this.safeValue(w,"price",u);v={trigger:{price:this.priceToPrecision(e,p),rule:f,expiration:l},put:{type:t,side:i,price:this.priceToPrecision(e,a),amount:this.amountToPrecision(e,s),account:h,time_in_force:m},market:c.id}}l="PriceOrders"}const k=this.getSupportedMapping(c.type,{spot:"privateSpotPost"+l,margin:"privateSpotPost"+l,swap:"privateFuturesPostSettle"+l,future:"privateDeliveryPostSettle"+l}),_=await this[k](this.deepExtend(v,n));return this.parseOrder(_,c)}parseOrderStatus(e){return this.safeString({filled:"closed",cancelled:"canceled",liquidated:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeString2(e,"currency_pair","contract"),a=this.safeSymbol(s,t);let n=this.safeTimestamp(e,"create_time");n=this.safeInteger(e,"create_time_ms",n);let o=this.safeTimestamp(e,"update_time");o=this.safeInteger(e,"update_time_ms",o);const h=this.safeString2(e,"amount","size"),c=r.stringAbs(h),d=this.safeString(e,"price"),u=this.safeString(e,"left"),l=this.safeString(e,"filled_total");let f,p;this.safeValue(t,"contract")?(p=c?r.stringGt(h,"0")?"buy":"sell":void 0,f=this.safeString(e,"finish_as","open")):(f=this.safeString(e,"status"),p=this.safeString(e,"side"));const m=this.parseOrderStatus(f),g=this.safeString(e,"type"),y=this.safeStringUpper2(e,"time_in_force","tif"),b=[],v=this.safeNumber(e,"gt_fee");v&&b.push({currency:"GT",cost:v});const w=this.safeNumber(e,"fee");w&&b.push({currency:this.safeCurrencyCode(this.safeString(e,"fee_currency")),cost:w});const k=this.safeString(e,"rebated_fee");k&&b.push({currency:this.safeCurrencyCode(this.safeString(e,"rebated_fee_currency")),cost:this.parseNumber(r.stringNeg(k))});const _=this.safeNumber(e,"mkfr"),S=this.safeNumber(e,"tkfr");return _&&b.push({currency:this.safeCurrencyCode(this.safeString(e,"settleId")),cost:_}),S&&b.push({currency:this.safeCurrencyCode(this.safeString(t,"settleId")),cost:S}),this.safeOrder2({id:i,clientOrderId:i,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:o,status:m,symbol:a,type:g,timeInForce:y,postOnly:void 0,side:p,price:d,stopPrice:void 0,average:void 0,amount:c,cost:l,filled:void 0,remaining:u,fee:void 0,fees:b,trades:void 0,info:e},t)}async fetchOrder(e,t,i={}){if(void 0===t)throw new h(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={order_id:e};s.spot||s.margin?r.currency_pair=s.id:r.settle=s.settleId;const a=this.getSupportedMapping(s.type,{spot:"privateSpotGetOrdersOrderId",swap:"privateFuturesGetSettleOrdersOrderId",futures:"privateDeliveryGetSettlePriceOrdersOrderId"}),n=await this[a](this.extend(r,i));return this.parseOrder(n,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=this.safeString2(this.options,"fetchMarkets","defaultType","spot"),a=this.safeString(s,"type",r);if(void 0===e&&"spot"===a||"margin"===a||"cross_margin"===a){const e={account:a};void 0!==i&&(e.limit=i);const r=await this.privateSpotGetOpenOrders(this.extend(e,s));let n=[];for(let e=0;e<r.length;e++){const s=r[e],a=this.safeValue(s,"orders",[]),o=this.parseOrders(a,void 0,t,i);n=this.arrayConcat(n,o)}return this.filterBySinceLimit(n,t,i)}return await this.fetchOrdersByStatus("open",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("finished",e,t,i,s)}async fetchOrdersByStatus(e,t,i,s,r={}){if(void 0===t)throw new h(this.id+" fetchOrdersByStatus requires a symbol argument");await this.loadMarkets();const a=this.market(t),n=this.prepareRequest(a);n.status=e,void 0!==s&&(n.limit=s),void 0!==i&&(a.spot||a.margin)&&(n.start=parseInt(i/1e3));const o=this.getSupportedMapping(a.type,{spot:"privateSpotGetOrders",margin:"privateSpotGetOrders",swap:"privateFuturesGetSettleOrders",futures:"privateDeliveryGetSettleOrders"});"margin"!==a.type&&"cross_margin"!==a.type||(n.account=a.type);const c=await this[o](this.extend(n,r));return this.parseOrders(c,a,i,s)}async cancelOrder(e,t,i={}){if(void 0===t)throw new h(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={order_id:e};s.contract?r.settle=s.settleId:r.currency_pair=s.id;const a=this.getSupportedMapping(s.type,{spot:"privateSpotDeleteOrdersOrderId",margin:"privateSpotDeleteOrdersOrderId",swap:"privateFuturesDeleteSettleOrdersOrderId",futures:"privateDeliveryDeleteSettleOrdersOrderId"}),n=await this[a](this.extend(r,i));return this.parseOrder(n,s)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s;return void 0!==e&&(s=this.market(e),i.symbol=s.id),await this.privateSpotDeleteOrders(this.extend(i,t))}async transfer(e,t,i,s,r={}){await this.loadMarkets();const a=this.currency(e),o=this.safeValue(this.options,"accountsByType",{}),h=this.safeString(o,i,i),c=this.safeString(o,s,s);if(void 0===h){const e=Object.keys(o);throw new n(this.id+" fromAccount must be one of "+e.join(", "))}if(void 0===c){const e=Object.keys(o);throw new n(this.id+" toAccount must be one of "+e.join(", "))}const d=this.currencyToPrecision(e,t),u={currency:a.id,from:h,to:c,amount:d};return"futures"!==c&&"delivery"!==c||(u.settle=a.id),{info:await this.privateWalletPostTransfers(this.extend(u,r)),from:h,to:c,amount:d,code:e}}async setLeverage(e,t,i={}){if(void 0===t)throw new h(this.id+" setLeverage() requires a symbol argument");if(e<0||e>100)throw new o(this.id+" leverage should be between 1 and 100");await this.loadMarkets();const s=this.market(t),r=this.getSupportedMapping(s.type,{swap:"privateFuturesPostSettlePositionsContractLeverage",futures:"privateDeliveryPostSettlePositionsContractLeverage"}),a=this.prepareRequest(s);if(a.query={leverage:e.toString()},"cross_leverage_limit"in i){if(0!==e)throw new o(this.id+" cross margin leverage(valid only when leverage is 0)");a.cross_leverage_limit=i.cross_leverage_limit.toString(),i=this.omit(i,"cross_leverage_limit")}return await this[r](this.extend(a,i))}parsePosition(e,t){const i=this.safeValue(e,"contract");t=this.safeMarket(i,t);const s=this.milliseconds(),a=this.safeString(e,"size");let n;a>0?n="buy":a<0&&(n="sell");const o=this.safeString(e,"maintenance_rate"),h=this.safeString(e,"value"),c=this.safeString(e,"margin"),d=this.safeString(e,"unrealised_pnl");return{info:e,symbol:this.safeString(t,"symbol"),timestamp:s,datetime:this.iso8601(s),initialMargin:this.parseNumber(c),initialMarginPercentage:this.parseNumber(r.stringDiv(c,h)),maintenanceMargin:this.parseNumber(r.stringMul(o,h)),maintenanceMarginPercentage:this.parseNumber(o),entryPrice:this.safeNumber(e,"entry_price"),notional:this.parseNumber(h),leverage:this.safeNumber(e,"leverage"),unrealizedPnl:this.parseNumber(d),contracts:this.parseNumber(a),contractSize:this.safeNumber(t,"contractSize"),marginRatio:void 0,liquidationPrice:this.safeNumber(e,"liq_price"),markPrice:this.safeNumber(e,"mark_price"),collateral:void 0,marginType:void 0,side:n,percentage:this.parseNumber(r.stringDiv(d,c))}}parsePositions(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.parsePosition(e[i]));return t}async fetchPositions(e,t={}){await this.loadMarkets();const i=this.safeString2(this.options,"fetchPositions","defaultType","swap"),s=this.safeString(t,"type",i),r=this.getSupportedMapping(s,{swap:"privateFuturesGetSettlePositions",futures:"privateDeliveryGetSettlePositions"}),a="swap"===s?"usdt":"btc",n={settle:this.safeString(t,"settle",a)},o=await this[r](n),h=this.parsePositions(o);return this.filterByArray(h,"symbol",e,!1)}sign(e,t=[],i="GET",s={},r,a){const n=t[0],o=t[1];let h=this.omit(s,this.extractParams(e));const c="/"+o+(""===(e=this.implodeParams(e,s))?"":"/"+e);let d=this.urls.api[n]+c;if("public"===n)Object.keys(h).length&&(d+="?"+this.urlencode(h));else{let e="";if("GET"===i||"DELETE"===i)Object.keys(h).length&&(e=this.urlencode(h),d+="?"+e);else{const t=this.safeValue(h,"query",{});Object.keys(t).length&&(e=this.urlencode(t),d+="?"+e),h=this.omit(h,"query"),a=this.json(h)}const t=void 0===a?"":a,s=this.hash(this.encode(t),"sha512"),n=this.seconds().toString(),o="/api/"+this.version+c,u=[i.toUpperCase(),o,e,s,n].join("\n"),l=this.hmac(this.encode(u),this.encode(this.secret),"sha512");r={KEY:this.apiKey,Timestamp:n,SIGN:l,"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o,h,c){if(void 0===o)return;const d=this.safeString(o,"label");if(void 0!==d){const e=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,e),new n(e)}}}},23094:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,BadRequest:n,OrderNotFound:o,InvalidOrder:h,InvalidNonce:c,InsufficientFunds:d,AuthenticationError:u,PermissionDenied:l,NotSupported:f,OnMaintenance:p,RateLimitExceeded:m,ExchangeNotAvailable:g}=i(73449),{TICK_SIZE:y}=i(62115),b=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"gemini",name:"Gemini",countries:["US"],rateLimit:1500,version:"v1",has:{cancelOrder:!0,CORS:void 0,createDepositAddress:!0,createMarketOrder:void 0,createOrder:!0,fetchBalance:!0,fetchBidsAsks:void 0,fetchClosedOrders:void 0,fetchDepositAddress:void 0,fetchDeposits:void 0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:void 0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:void 0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27816857-ce7be644-6096-11e7-82d6-3c257263229c.jpg",api:{public:"https://api.gemini.com",private:"https://api.gemini.com",web:"https://docs.gemini.com"},www:"https://gemini.com/",doc:["https://docs.gemini.com/rest-api","https://docs.sandbox.gemini.com"],test:{public:"https://api.sandbox.gemini.com",private:"https://api.sandbox.gemini.com",web:"https://docs.gemini.com"},fees:["https://gemini.com/api-fee-schedule","https://gemini.com/trading-fees","https://gemini.com/transfer-fees"]},api:{web:{get:["rest-api"]},public:{get:["v1/symbols","v1/symbols/details/{symbol}","v1/pubticker/{symbol}","v2/ticker/{symbol}","v2/candles/{symbol}/{timeframe}","v1/trades/{symbol}","v1/auction/{symbol}","v1/auction/{symbol}/history","v1/pricefeed","v1/book/{symbol}","v1/earn/rates"]},private:{post:["v1/order/new","v1/order/cancel","v1/wrap/{symbol}","v1/order/cancel/session","v1/order/cancel/all","v1/order/status","v1/orders","v1/mytrades","v1/notionalvolume","v1/tradevolume","v1/clearing/new","v1/clearing/status","v1/clearing/cancel","v1/clearing/confirm","v1/balances","v1/notionalbalances/{currency}","v1/transfers","v1/addresses/{network}","v1/deposit/{network}/newAddress","v1/deposit/{currency}/newAddress","v1/withdraw/{currency}","v1/account/transfer/{currency}","v1/payments/addbank","v1/payments/methods","v1/payments/sen/withdraw","v1/balances/earn","v1/earn/interest","v1/approvedAddresses/{network}/request","v1/approvedAddresses/account/{network}","v1/approvedAddresses/{network}/remove","v1/account","v1/account/create","v1/account/list","v1/heartbeat"]}},precisionMode:y,fees:{trading:{taker:.0035,maker:.001}},httpExceptions:{400:n,403:l,404:o,406:d,429:m,500:r,502:g,503:p},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1hr","6h":"6hr","1d":"1day"},exceptions:{exact:{AuctionNotOpen:n,ClientOrderIdTooLong:n,ClientOrderIdMustBeString:n,ConflictingOptions:n,EndpointMismatch:n,EndpointNotFound:n,IneligibleTiming:n,InsufficientFunds:d,InvalidJson:n,InvalidNonce:c,InvalidOrderType:h,InvalidPrice:h,InvalidQuantity:h,InvalidSide:h,InvalidSignature:u,InvalidSymbol:n,InvalidTimestampInPayload:n,Maintenance:p,MarketNotOpen:h,MissingApikeyHeader:u,MissingOrderField:h,MissingRole:u,MissingPayloadHeader:u,MissingSignatureHeader:u,NoSSL:u,OptionsMustBeArray:n,OrderNotFound:o,RateLimit:m,System:r,UnsupportedOption:n},broad:{"The Gemini Exchange is currently undergoing maintenance.":p,"We are investigating technical issues with the Gemini Exchange.":g}},options:{fetchMarketsMethod:"fetch_markets_from_web",fetchTickerMethod:"fetchTickerV1",networkIds:{bitcoin:"BTC",ethereum:"ERC20",bitcoincash:"BCH",litecoin:"LTC",zcash:"ZEC",filecoin:"FIL",dogecoin:"DOGE",tezos:"XTZ"},networks:{BTC:"bitcoin",ERC20:"ethereum",BCH:"bitcoincash",LTC:"litecoin",ZEC:"zcash",FIL:"filecoin",DOGE:"dogecoin",XTZ:"tezos"}}})}async fetchMarkets(e={}){const t=this.safeValue(this.options,"fetchMarketsMethod","fetch_markets_from_api");return await this[t](e)}async fetchMarketsFromWeb(e={}){const t=(await this.webGetRestApi(e)).split('<h1 id="symbols-and-minimums">Symbols and minimums</h1>'),i=t.length,s=this.id+" the "+this.name+" API doc HTML markup has changed, breaking the parser of order limits and precision info for "+this.name+" markets.";if(2!==i)throw new f(s);const r=t[1].split("tbody>");if(r.length<2)throw new f(s);const a=r[1].split("\n<tr>\n"),n=a.length;if(n<2)throw new f(s);const o=[];for(let e=1;e<n;e++){const t=a[e],i=t.split("</td>\n");if(i.length<5)throw new f(s);const r=i[0].replace("<td>",""),n=i[1].replace("<td>","").split(" "),h=this.safeNumber(n,0),c=i[2].replace("<td>","").split(" "),d=this.safeNumber(c,0),u=r.length-0,l=u-3,p=r.slice(l,u),m=this.safeCurrencyCode(p),g=i[3].replace("<td>","").split(" "),y=this.safeNumber(g,0),b=r.replace(p,""),v=this.safeCurrencyCode(b),w=v+"/"+m,k=void 0;o.push({id:r,info:t,symbol:w,base:v,quote:m,baseId:b,quoteId:p,type:"spot",spot:!0,active:k,precision:{amount:d,price:y},limits:{amount:{min:h,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}})}return o}async fetchMarketsFromAPI(e={}){const t=await this.publicGetV1Symbols(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=s,a=s.length-0,n=s.slice(0,a-3),o=s.slice(a-3,a),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=h+"/"+c,u={amount:void 0,price:void 0};i.push({id:s,info:r,symbol:d,base:h,quote:c,baseId:n,quoteId:o,precision:u,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},active:void 0})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.limit_bids=t,s.limit_asks=t);const r=await this.publicGetV1BookSymbol(this.extend(s,i));return this.parseOrderBook(r,e,void 0,"bids","asks","price","amount")}async fetchTickerV1(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetV1PubtickerSymbol(this.extend(s,t));return this.parseTicker(r,i)}async fetchTickerV2(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetV2TickerSymbol(this.extend(s,t));return this.parseTicker(r,i)}async fetchTickerV1AndV2(e,t={}){const i=await this.fetchTickerV1(e,t),s=await this.fetchTickerV2(e,t);return this.deepExtend(i,{open:s.open,high:s.high,low:s.low,change:s.change,percentage:s.percentage,average:s.average,info:s.info})}async fetchTicker(e,t={}){const i=this.safeValue(this.options,"fetchTickerMethod","fetchTickerV1");return await this[i](e,t)}parseTicker(e,t){const i=this.safeValue(e,"volume",{}),s=this.safeInteger(i,"timestamp");let r;const a=this.safeStringLower(e,"pair");let n,o,h,c;void 0!==a&&(a in this.markets_by_id?t=this.markets_by_id[a]:(7==a.length-0?(n=a.slice(0,4),o=a.slice(4,7)):(n=a.slice(0,3),o=a.slice(3,6)),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),r=h+"/"+c)),void 0===r&&void 0!==t&&(r=t.symbol,n=t.baseId.toUpperCase(),o=t.quoteId.toUpperCase(),h=t.base,c=t.quote);const d=this.safeNumber(e,"price"),u=this.safeNumber2(e,"last","close",d),l=this.safeNumber(e,"percentChange24h"),f=this.safeNumber(e,"open"),p=this.safeNumber(i,n),m=this.safeNumber(i,o),g=this.vwap(p,m);return this.safeTicker({symbol:r,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:g,open:f,close:u,last:u,previousClose:void 0,change:void 0,percentage:l,average:void 0,baseVolume:p,quoteVolume:m,info:e},t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetV1Pricefeed(t);return this.parseTickers(i,e)}parseTrade(e,t){const i=this.safeInteger(e,"timestampms"),s=this.safeString(e,"tid"),r=this.safeString(e,"order_id"),a=this.safeString(e,"fee_currency"),n=this.safeCurrencyCode(a),o={cost:this.safeNumber(e,"fee_amount"),currency:n},h=this.safeString(e,"price"),c=this.safeString(e,"amount"),d=this.parseNumber(h),u=this.parseNumber(c),l=this.parseNumber(b.stringMul(h,c)),f=this.safeStringLower(e,"type"),p=this.safeSymbol(void 0,t);return{id:s,order:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:p,type:void 0,side:f,takerOrMaker:void 0,price:d,cost:l,amount:u,fee:o}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},n=await this.publicGetV1TradesSymbol(this.extend(a,s));return this.parseTrades(n,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostV1Balances(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(s,"available"),n.total=this.safeString(s,"amount"),i[a]=n}return this.parseBalance(i)}parseOrder(e,t){const i=this.safeInteger(e,"timestampms"),s=this.safeString(e,"original_amount"),r=this.safeString(e,"remaining_amount"),a=this.safeString(e,"executed_amount");let n="closed";e.is_live&&(n="open"),e.is_cancelled&&(n="canceled");const o=this.safeString(e,"price"),h=this.safeString(e,"avg_execution_price");let c=this.safeString(e,"type");c="exchange limit"===c?"limit":"market buy"===c||"market sell"===c?"market":e.type;const d=this.safeString(e,"symbol"),u=this.safeSymbol(d,t),l=this.safeString(e,"order_id"),f=this.safeStringLower(e,"side"),p=this.safeString(e,"client_order_id");return this.safeOrder2({id:l,clientOrderId:p,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:n,symbol:u,type:c,timeInForce:void 0,postOnly:void 0,side:f,price:o,stopPrice:void 0,average:h,cost:void 0,amount:s,filled:a,remaining:r,fee:void 0,trades:void 0},t)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privatePostV1OrderStatus(this.extend(s,i));return this.parseOrder(r)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=await this.privatePostV1Orders(s);let a;return void 0!==e&&(a=this.market(e)),this.parseOrders(r,a,t,i)}async createOrder(e,t,i,s,a,n={}){if(await this.loadMarkets(),"market"===t)throw new r(this.id+" allows limit orders only");const o=this.nonce(),h=this.amountToPrecision(e,s),c=this.priceToPrecision(e,a),d={client_order_id:o.toString(),symbol:this.marketId(e),amount:h,price:c,side:i,type:"exchange limit"},u=await this.privatePostV1OrderNew(this.extend(d,n));return{info:u,id:u.order_id}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e};return await this.privatePostV1OrderCancel(this.extend(s,i))}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={symbol:r.id};void 0!==i&&(n.limit_trades=i),void 0!==t&&(n.timestamp=parseInt(t/1e3));const o=await this.privatePostV1Mytrades(this.extend(n,s));return this.parseTrades(o,r,t,i)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,amount:t,address:i},n=await this.privatePostV1WithdrawCurrency(this.extend(a,r));return{info:n,id:this.safeString(n,"txHash")}}nonce(){return this.milliseconds()}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==i&&(r.limit_transfers=i),void 0!==t&&(r.timestamp=t);const a=await this.privatePostV1Transfers(this.extend(r,s));return this.parseTransactions(a)}parseTransaction(e,t){const i=this.safeInteger(e,"timestampms"),s=this.safeString(e,"currency"),r=this.safeCurrencyCode(s,t),a=this.safeString(e,"destination"),n=this.safeStringLower(e,"type");let o,h="pending";e.status&&(h="ok");const c=this.safeNumber(e,"feeAmount");return void 0!==c&&(o={cost:c,currency:r}),{info:e,id:this.safeString(e,"eid"),txid:this.safeString(e,"txHash"),timestamp:i,datetime:this.iso8601(i),address:a,tag:void 0,type:n,amount:this.safeNumber(e,"amount"),currency:r,status:h,updated:void 0,fee:o}}parseDepositAddress(e,t){return{currency:t,network:void 0,address:this.safeString(e,"address"),tag:void 0,info:e}}async fetchDepositAddressesByNetwork(e,t={}){await this.loadMarkets();const i=this.safeString(t,"network");if(void 0===i)throw new a(this.id+"fetchDepositAddressesByNetwork() requires a network parameter");t=this.omit(t,"network");const s=this.safeValue(this.options,"networks",{}),r=this.safeString(s,i,i),n=this.safeValue(this.options,"networkIds",{}),o=this.safeString(n,r,i),h={network:r},c=await this.privatePostV1AddressesNetwork(this.extend(h,t)),d=this.parseDepositAddresses(c,[e],!1,{network:o,currency:e});return this.groupBy(d,"network")}sign(e,t="public",i="GET",s={},r,a){let n="/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("private"===t){if(this.checkRequiredCredentials(),this.apiKey.indexOf("account")<0)throw new u(this.id+" sign() requires an account-key, master-keys are not-supported");const e=this.nonce(),t=this.extend({request:n,nonce:e},o);let i=this.json(t);i=this.stringToBase64(i);const s=this.hmac(i,this.encode(this.secret),"sha384");r={"Content-Type":"text/plain","X-GEMINI-APIKEY":this.apiKey,"X-GEMINI-PAYLOAD":this.decode(i),"X-GEMINI-SIGNATURE":s}}else Object.keys(o).length&&(n+="?"+this.urlencode(o));return n=this.urls.api[t]+n,{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o){if("error"===this.safeString(o,"result")){const e=this.safeString(o,"reason"),t=this.safeString(o,"message"),i=this.id+" "+t;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new r(i)}}else if("string"==typeof n){const e=this.id+" "+n;this.throwBroadlyMatchedException(this.exceptions.broad,n,e)}}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privatePostV1DepositCurrencyNewAddress(this.extend(i,t)),r=this.safeString(s,"address");return this.checkAddress(r),{currency:e,address:r,tag:void 0,info:s}}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={timeframe:this.timeframes[t],symbol:a.id},o=await this.publicGetV2CandlesSymbolTimeframe(this.extend(n,r));return this.parseOHLCVs(o,a,t,i,s)}}},28267:(e,t,i)=>{"use strict";const s=i(48819),{BadSymbol:r,PermissionDenied:a,ExchangeError:n,ExchangeNotAvailable:o,OrderNotFound:h,InsufficientFunds:c,InvalidOrder:d,RequestTimeout:u,AuthenticationError:l}=i(73449),{TRUNCATE:f,DECIMAL_PLACES:p,TICK_SIZE:m}=i(62115),g=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"hitbtc",name:"HitBTC",countries:["HK"],rateLimit:1500,version:"2",pro:!0,has:{cancelOrder:!0,CORS:void 0,createDepositAddress:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchBorrowRate:!1,fetchBorrowRates:!1,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:void 0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:void 0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTransactions:!0,fetchWithdrawals:void 0,transfer:!0,withdraw:!0},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","4h":"H4","1d":"D1","1w":"D7","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766555-8eaec20e-5edc-11e7-9c5b-6dc69fc42f5e.jpg",test:{public:"https://api.demo.hitbtc.com",private:"https://api.demo.hitbtc.com"},api:{public:"https://api.hitbtc.com",private:"https://api.hitbtc.com"},www:"https://hitbtc.com",referral:"https://hitbtc.com/?ref_id=5a5d39a65d466",doc:["https://api.hitbtc.com","https://github.com/hitbtc-com/hitbtc-api/blob/master/APIv2.md"],fees:["https://hitbtc.com/fees-and-limits","https://support.hitbtc.com/hc/en-us/articles/115005148605-Fees-and-limits"]},api:{public:{get:["currency","currency/{currency}","symbol","symbol/{symbol}","ticker","ticker/{symbol}","trades","trades/{symbol}","orderbook","orderbook/{symbol}","candles","candles/{symbol}"]},private:{get:["trading/balance","order","order/{clientOrderId}","trading/fee/all","trading/fee/{symbol}","margin/account","margin/account/{symbol}","margin/position","margin/position/{symbol}","margin/order","margin/order/{clientOrderId}","history/order","history/trades","history/order/{orderId}/trades","account/balance","account/crypto/address/{currency}","account/crypto/addresses/{currency}","account/crypto/used-addresses/{currency}","account/crypto/estimate-withdraw","account/crypto/is-mine/{address}","account/transactions","account/transactions/{id}","sub-acc","sub-acc/acl","sub-acc/balance/{subAccountUserID}","sub-acc/deposit-address/{subAccountUserId}/{currency}"],post:["order","margin/order","account/crypto/address/{currency}","account/crypto/withdraw","account/crypto/transfer-convert","account/transfer","account/transfer/internal","sub-acc/freeze","sub-acc/activate","sub-acc/transfer"],put:["order/{clientOrderId}","margin/account/{symbol}","margin/order/{clientOrderId}","account/crypto/withdraw/{id}","sub-acc/acl/{subAccountUserId}"],delete:["order","order/{clientOrderId}","margin/account","margin/account/{symbol}","margin/position","margin/position/{symbol}","margin/order","margin/order/{clientOrderId}","account/crypto/withdraw/{id}"],patch:["order/{clientOrderId}"]}},precisionMode:m,fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.002}},options:{networks:{ETH:"T20",ERC20:"T20",TRX:"TTRX",TRC20:"TTRX",OMNI:""},defaultTimeInForce:"FOK",accountsByType:{bank:"bank",exchange:"exchange",main:"bank",funding:"bank",spot:"exchange",trade:"exchange",trading:"exchange"},fetchBalanceMethod:{account:"account",bank:"account",main:"account",funding:"account",exchange:"trading",spot:"trading",trade:"trading",trading:"trading"}},commonCurrencies:{AUTO:"Cube",BCC:"BCC",BDP:"BidiPass",BET:"DAO.Casino",BIT:"BitRewards",BOX:"BOX Token",CPT:"Cryptaur",GET:"Themis",HSR:"HC",IQ:"IQ.Cash",LNC:"LinkerCoin",PLA:"PlayChip",PNT:"Penta",SBTC:"Super Bitcoin",STX:"STOX",TV:"Tokenville",USD:"USDT",XMT:"MTL",XPNT:"PNT"},exceptions:{504:u,1002:l,1003:a,2010:d,2001:r,2011:d,2020:d,20002:h,20001:c}})}feeToPrecision(e,t){return this.decimalToPrecision(t,f,8,p)}async fetchMarkets(e={}){const t=await this.publicGetSymbol(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"id"),a=this.safeString(s,"baseCurrency"),n=this.safeString(s,"quoteCurrency"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n);let c=o+"/"+h;r.indexOf("_")>=0&&(c=r);const d=this.safeString(s,"quantityIncrement"),u=this.safeString(s,"tickSize"),l=this.parseNumber(d),f=this.parseNumber(u),p={price:f,amount:l},m=this.safeNumber(s,"takeLiquidityRate"),y=this.safeNumber(s,"provideLiquidityRate"),b=this.safeString(s,"feeCurrency"),v=this.safeCurrencyCode(b);i.push(this.extend(this.fees.trading,{info:s,id:r,symbol:c,base:o,quote:h,baseId:a,quoteId:n,type:"spot",spot:!0,active:!0,taker:m,maker:y,precision:p,feeCurrency:v,limits:{amount:{min:l,max:void 0},price:{min:f,max:void 0},cost:{min:this.parseNumber(g.stringMul(d,u)),max:void 0}}}))}return i}async transfer(e,t,i,s,r={}){await this.loadMarkets();const a=this.currency(e),o=this.currencyToPrecision(e,t),h={currency:a.id,amount:o};let c=this.safeString(r,"type");if(void 0===c){const e=this.safeValue(this.options,"accountsByType",{}),t=this.safeString(e,i),r=this.safeString(e,s),a=Object.keys(e);if(void 0===t)throw new n(this.id+" fromAccount must be one of "+a.join(", ")+" instead of "+t);if(void 0===r)throw new n(this.id+" toAccount must be one of "+a.join(", ")+" instead of "+r);if(t===r)throw new n(this.id+" from and to cannot be the same account");c=t+"To"+this.capitalize(r)}h.type=c;const d=await this.privatePostAccountTransfer(this.extend(h,r));return{info:d,id:this.safeString(d,"id"),timestamp:void 0,datetime:void 0,amount:o,currency:e,fromAccount:i,toAccount:s,status:void 0}}async fetchCurrencies(e={}){const t=await this.publicGetCurrency(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"id"),a=this.safeInteger(s,"precisionTransfer",8),n=1/Math.pow(10,a),o=this.safeCurrencyCode(r),h=this.safeValue(s,"payinEnabled"),c=this.safeValue(s,"payoutEnabled"),d=this.safeValue(s,"transferEnabled");let u=h&&c&&d;"disabled"in s&&s.disabled&&(u=!1);let l="fiat";"crypto"in s&&s.crypto&&(l="crypto");const f=this.safeString(s,"fullName");i[o]={id:r,code:o,type:l,payin:h,payout:c,transfer:d,info:s,name:f,active:u,fee:this.safeNumber(s,"payoutFee"),precision:n,limits:{amount:{min:1/Math.pow(10,a),max:Math.pow(10,a)},withdraw:{min:void 0,max:Math.pow(10,n)}}}}return i}parseTradingFee(e,t){return{info:e,symbol:this.safeSymbol(void 0,t),maker:this.safeNumber(e,"provideLiquidityRate"),taker:this.safeNumber(e,"takeLiquidityRate")}}async fetchTradingFee(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.privateGetTradingFeeSymbol(s);return this.parseTradingFee(r,i)}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString(e,"type","trading"),i=this.safeValue(this.options,"fetchBalanceMethod",{}),s=this.safeString(i,t);if(void 0===s)throw new n(this.id+" fetchBalance account type must be either main or trading");const r="privateGet"+this.capitalize(s)+"Balance",a=this.omit(e,"type"),o=await this[r](a),h={info:o,timestamp:void 0,datetime:void 0};for(let e=0;e<o.length;e++){const t=o[e],i=this.safeString(t,"currency"),s=this.safeCurrencyCode(i),r=this.account();r.free=this.safeString(t,"available"),r.used=this.safeString(t,"reserved"),h[s]=r}return this.parseBalance(h)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"timestamp")),this.safeNumber(e,"open"),this.safeNumber(e,"max"),this.safeNumber(e,"min"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id,period:this.timeframes[t]};void 0!==i&&(n.from=this.iso8601(i)),void 0!==s&&(n.limit=s);const o=await this.publicGetCandlesSymbol(this.extend(n,r));return this.parseOHLCVs(o,a,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.limit=t);const r=await this.publicGetOrderbookSymbol(this.extend(s,i));return this.parseOrderBook(r,e,void 0,"bid","ask","price","size")}parseTicker(e,t){const i=this.parse8601(e.timestamp),s=this.safeSymbol(void 0,t),r=this.safeNumber(e,"volume"),a=this.safeNumber(e,"volumeQuote"),n=this.safeNumber(e,"open"),o=this.safeNumber(e,"last"),h=this.vwap(r,a);return this.safeTicker({symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:h,open:n,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:r,quoteVolume:a,info:e},t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"symbol"),a=this.safeMarket(r);s[a.symbol]=this.parseTicker(t,a)}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetTickerSymbol(this.extend(s,t));if("message"in r)throw new n(this.id+" "+r.message);return this.parseTicker(r,i)}parseTrade(e,t){const i=this.parse8601(e.timestamp),s=this.safeString(e,"symbol"),r=(t=this.safeMarket(s,t)).symbol;let a;const n=this.safeNumber(e,"fee");void 0!==n&&(a={cost:n,currency:t?t.feeCurrency:void 0});const o=this.safeString(e,"clientOrderId"),h=this.safeString(e,"price"),c=this.safeString(e,"quantity"),d=this.parseNumber(h),u=this.parseNumber(c),l=this.parseNumber(g.stringMul(h,c)),f=this.safeString(e,"side");return{info:e,id:this.safeString(e,"id"),order:o,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,side:f,takerOrMaker:void 0,price:d,amount:u,cost:l,fee:a}}async fetchTransactions(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.currency(e),a.asset=r.id),void 0!==t&&(a.startTime=t);const n=await this.privateGetAccountTransactions(this.extend(a,s));return this.parseTransactions(n,r,t,i)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"createdAt")),r=this.parse8601(this.safeString(e,"updatedAt")),a=this.safeString(e,"currency"),n=this.safeCurrencyCode(a,t),o=this.parseTransactionStatus(this.safeString(e,"status")),h=this.safeNumber(e,"amount"),c=this.safeString(e,"address"),d=this.safeString(e,"hash");let u;const l=this.safeNumber(e,"fee");void 0!==l&&(u={cost:l,currency:n});const f=this.parseTransactionType(this.safeString(e,"type"));return{info:e,id:i,txid:d,timestamp:s,datetime:this.iso8601(s),address:c,tag:void 0,type:f,amount:h,currency:n,status:o,updated:r,fee:u}}parseTransactionStatus(e){return this.safeString({pending:"pending",failed:"failed",success:"ok"},e,e)}parseTransactionType(e){return this.safeString({payin:"deposit",payout:"withdrawal",withdraw:"withdrawal"},e,e)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.limit=i),void 0!==t&&(a.sort="ASC",a.from=this.iso8601(t));const n=await this.publicGetTradesSymbol(this.extend(a,s));return this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e);let o=this.uuid().split("-").join("");o=o.slice(0,32),s=parseFloat(s);const h={clientOrderId:o,symbol:n.id,side:i,quantity:this.amountToPrecision(e,s),type:t};"limit"===t?h.price=this.priceToPrecision(e,r):h.timeInForce=this.options.defaultTimeInForce;const c=await this.privatePostOrder(this.extend(h,a)),u=this.parseOrder(c);if("rejected"===u.status)throw new d(this.id+" order was rejected by the exchange "+this.json(u));return u}async editOrder(e,t,i,s,r,a,n={}){await this.loadMarkets();let o=this.uuid().split("-").join("");o=o.slice(0,32);const h={clientOrderId:e,requestClientId:o};void 0!==r&&(h.quantity=this.amountToPrecision(t,r)),void 0!==a&&(h.price=this.priceToPrecision(t,a));const c=await this.privatePatchOrderClientOrderId(this.extend(h,n));return this.parseOrder(c)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={clientOrderId:e},r=await this.privateDeleteOrderClientOrderId(this.extend(s,i));return this.parseOrder(r)}parseOrderStatus(e){return this.safeString({new:"open",suspended:"open",partiallyFilled:"open",filled:"closed",canceled:"canceled",expired:"failed"},e,e)}parseOrder(e,t){const i=this.parse8601(this.safeString(e,"createdAt")),s=this.parse8601(this.safeString(e,"updatedAt")),r=this.safeString(e,"symbol"),a=(t=this.safeMarket(r,t)).symbol,n=this.safeNumber(e,"quantity"),o=this.safeNumber(e,"cumQuantity"),h=this.parseOrderStatus(this.safeString(e,"status")),c=this.safeString(e,"clientOrderId"),d=c,u=this.safeNumber(e,"price"),l=this.safeString(e,"type"),f=this.safeString(e,"side");let p=this.safeValue(e,"tradesReport");const m=this.safeNumber(e,"avgPrice");void 0!==p&&(p=this.parseTrades(p,t));const g=this.safeString(e,"timeInForce");return this.safeOrder({id:c,clientOrderId:d,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:s,status:h,symbol:a,type:l,timeInForce:g,side:f,price:u,stopPrice:void 0,average:m,amount:n,cost:void 0,filled:o,remaining:void 0,fee:void 0,trades:p,info:e})}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={clientOrderId:e},r=await this.privateGetHistoryOrder(this.extend(s,i));if(r.length>0)return this.parseOrder(r[0]);throw new h(this.id+" order "+e+" not found")}async fetchOpenOrder(e,t,i={}){await this.loadMarkets();const s={clientOrderId:e},r=await this.privateGetOrderClientOrderId(this.extend(s,i));return this.parseOrder(r)}async fetchOpenOrders(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.symbol=r.id);const n=await this.privateGetOrder(this.extend(a,s));return this.parseOrders(n,r,t,i)}async fetchClosedOrders(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==i&&(a.limit=i),void 0!==t&&(a.from=this.iso8601(t));const n=await this.privateGetHistoryOrder(this.extend(a,s)),o=this.parseOrders(n,r),h=[];for(let e=0;e<o.length;e++){const t=o[e],i=t.status;"closed"!==i&&"canceled"!==i||h.push(t)}return this.filterBySinceLimit(h,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==t&&(r.from=this.iso8601(t)),void 0!==i&&(r.limit=i);const n=await this.privateGetHistoryTrades(this.extend(r,s));return this.parseTrades(n,a,t,i)}async fetchOrderTrades(e,t,i,s,r={}){let a;await this.loadMarkets(),void 0!==t&&(a=this.market(t));const n={orderId:e},o=await this.privateGetHistoryOrderOrderIdTrades(this.extend(n,r));if(o.length>0)return this.parseTrades(o,a,i,s);throw new h(this.id+" order "+e+" not found, "+this.id+'.fetchOrderTrades() requires an exchange-specific order id, you need to grab it from order["info"]["id"]')}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},r=await this.privatePostAccountCryptoAddressCurrency(this.extend(s,t)),a=this.safeString(r,"address");return this.checkAddress(a),{currency:i,address:a,tag:this.safeString(r,"paymentId"),info:r}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},r=this.safeString(t,"network");if(void 0!==r){t=this.omit(t,"network");const e=this.safeValue(this.options,"networks"),i=this.safeString(e,r,r);s.currency+=i}const a=await this.privateGetAccountCryptoAddressCurrency(this.extend(s,t)),n=this.safeString(a,"address");this.checkAddress(n);const o=this.safeString(a,"paymentId");return{currency:i.code,address:n,tag:o,network:void 0,info:a}}async convertCurrencyNetwork(e,t,i,s,r){await this.loadMarkets();const a=this.currency(e),o=this.safeValue(this.options,"networks",{});if((i=this.safeString(o,i,i))===(s=this.safeString(o,s,s)))throw new n(this.id+" fromNetwork cannot be the same as toNetwork");const h={fromCurrency:a.id+i,toCurrency:a.id+s,amount:parseFloat(this.currencyToPrecision(e,t))};return{info:await this.privatePostAccountCryptoTransferConvert(this.extend(h,r))}}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),await this.loadMarkets(),this.checkAddress(i);const a={currency:this.currency(e).id,amount:parseFloat(t),address:i};s&&(a.paymentId=s);const n=this.safeValue(this.options,"networks",{});let o=this.safeStringUpper(r,"network");o=this.safeString(n,o,o),void 0!==o&&(a.currency+=o,r=this.omit(r,"network"));const h=await this.privatePostAccountCryptoWithdraw(this.extend(a,r));return{info:h,id:h.id}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n="/api/"+this.version+"/";const o=this.omit(s,this.extractParams(e));if("public"===t)n+=t+"/"+this.implodeParams(e,s),Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),n+=this.implodeParams(e,s),"GET"===i?Object.keys(o).length&&(n+="?"+this.urlencode(o)):Object.keys(o).length&&(a=this.json(o));const t=this.encode(this.apiKey+":"+this.secret),h=this.stringToBase64(t);r={Authorization:"Basic "+this.decode(h),"Content-Type":"application/json"}}return n=this.urls.api[t]+n,{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,h,c,u){if(void 0!==h&&e>=400){const t=this.id+" "+a;if(503===e||504===e)throw new o(t);if(429===e)return;if("{"===a[0]&&"error"in h){const e=this.safeString(h.error,"code");if(this.throwExactlyMatchedException(this.exceptions,e,t),"Duplicate clientOrderId"===this.safeString(h.error,"message"))throw new d(t)}throw new n(t)}}}},22683:(e,t,i)=>{const s=i(48819),{TICK_SIZE:r}=i(62115),a=i(6832),{BadSymbol:n,BadRequest:o,OnMaintenance:h,AccountSuspended:c,PermissionDenied:d,ExchangeError:u,RateLimitExceeded:l,ExchangeNotAvailable:f,OrderNotFound:p,InsufficientFunds:m,InvalidOrder:g,AuthenticationError:y,ArgumentsRequired:b}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"hitbtc3",name:"HitBTC",countries:["HK"],rateLimit:100,version:"3",pro:!0,has:{cancelOrder:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTransactions:!0,fetchWithdrawals:!1,withdraw:!0,transfer:!0},precisionMode:r,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766555-8eaec20e-5edc-11e7-9c5b-6dc69fc42f5e.jpg",test:{public:"https://api.demo.hitbtc.com",private:"https://api.demo.hitbtc.com"},api:{public:"https://api.hitbtc.com/api/3",private:"https://api.hitbtc.com/api/3"},www:"https://hitbtc.com",referral:"https://hitbtc.com/?ref_id=5a5d39a65d466",doc:["https://api.hitbtc.com","https://github.com/hitbtc-com/hitbtc-api/blob/master/APIv2.md"],fees:["https://hitbtc.com/fees-and-limits","https://support.hitbtc.com/hc/en-us/articles/115005148605-Fees-and-limits"]},api:{public:{get:["public/currency","public/symbol","public/ticker","public/price/rate","public/trades","public/orderbook","public/candles","public/futures/info","public/futures/history/funding","public/futures/candles/index_price","public/futures/candles/mark_price","public/futures/candles/premium_index","public/futures/candles/open_interest"]},private:{get:["spot/balance","spot/order","spot/order/{client_order_id}","spot/fee","spot/fee/{symbol}","spot/history/order","spot/history/trade","margin/account","margin/account/isolated/{symbol}","margin/order","margin/order/{client_order_id}","margin/history/order","margin/history/trade","futures/balance","futures/account","futures/account/isolated/{symbol}","futures/order","futures/order/{client_order_id}","futures/fee","futures/fee/{symbol}","futures/history/order","futures/history/trade","wallet/balance","wallet/crypto/address","wallet/crypto/address/recent-deposit","wallet/crypto/address/recent-withdraw","wallet/crypto/address/check-mine","wallet/transactions","wallet/crypto/check-offchain-available","wallet/crypto/fee/estimate","sub-account","sub-account/acl","sub-account/balance/{subAccID}","sub-account/crypto/address/{subAccID}/{currency}"],post:["spot/order","margin/order","futures/order","wallet/convert","wallet/crypto/withdraw","wallet/transfer","sub-account/freeze","sub-account/activate","sub-account/transfer","sub-account/acl"],patch:["spot/order/{client_order_id}","margin/order/{client_order_id}","futures/order/{client_order_id}"],delete:["spot/order","spot/order/{client_order_id}","margin/position","margin/position/isolated/{symbol}","margin/order","margin/order/{client_order_id}","futures/position","futures/position/isolated/{symbol}","futures/order","futures/order/{client_order_id}","wallet/crypto/withdraw/{id}"],put:["margin/account/isolated/{symbol}","futures/account/isolated/{symbol}","wallet/crypto/withdraw/{id}"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:this.parseNumber("0.0009"),maker:this.parseNumber("0.0009"),tiers:{maker:[[this.parseNumber("0"),this.parseNumber("0.0009")],[this.parseNumber("10"),this.parseNumber("0.0007")],[this.parseNumber("100"),this.parseNumber("0.0006")],[this.parseNumber("500"),this.parseNumber("0.0005")],[this.parseNumber("1000"),this.parseNumber("0.0003")],[this.parseNumber("5000"),this.parseNumber("0.0002")],[this.parseNumber("10000"),this.parseNumber("0.0001")],[this.parseNumber("20000"),this.parseNumber("0")],[this.parseNumber("50000"),this.parseNumber("-0.0001")],[this.parseNumber("100000"),this.parseNumber("-0.0001")]],taker:[[this.parseNumber("0"),this.parseNumber("0.0009")],[this.parseNumber("10"),this.parseNumber("0.0008")],[this.parseNumber("100"),this.parseNumber("0.0007")],[this.parseNumber("500"),this.parseNumber("0.0007")],[this.parseNumber("1000"),this.parseNumber("0.0006")],[this.parseNumber("5000"),this.parseNumber("0.0006")],[this.parseNumber("10000"),this.parseNumber("0.0005")],[this.parseNumber("20000"),this.parseNumber("0.0004")],[this.parseNumber("50000"),this.parseNumber("0.0003")],[this.parseNumber("100000"),this.parseNumber("0.0002")]]}}},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","4h":"H4","1d":"D1","1w":"D7","1M":"1M"},exceptions:{exact:{429:l,500:u,503:f,504:f,600:d,800:u,1002:y,1003:d,1004:y,1005:y,2001:n,2002:o,2003:o,2010:o,2011:o,2012:o,2020:o,2022:o,10001:o,10021:c,10022:o,20001:m,20002:p,20003:u,20004:u,20005:u,20006:u,20007:u,20008:g,20009:g,20010:h,20011:u,20012:u,20014:u,20016:u,20031:u,20032:u,20033:u,20034:u,20040:u,20041:u,20042:u,20043:u,20044:d,20045:u,20080:u,21001:u,21003:c,21004:c},broad:{}},options:{networks:{ETH:"USDT20",ERC20:"USDT20",TRX:"USDTRX",TRC20:"USDTRX",OMNI:"USDT"},accountsByType:{spot:"spot",wallet:"wallet",derivatives:"derivatives"}}})}nonce(){return this.milliseconds()}async fetchMarkets(e={}){const t=await this.publicGetPublicSymbol(e),i=[],s=Object.keys(t);for(let e=0;e<s.length;e++){const r=s[e],n=this.safeValue(t,r),o=this.safeString(n,"type"),h=this.safeInteger(n,"expiry"),c="futures"===o,d=c,u="spot"===o,l=this.safeValue(n,"margin_trading",!1),f=u&&l,p=void 0!==h,m=c&&!p,g=!1,y=this.safeString2(n,"base_currency","underlying"),b=this.safeString(n,"quote_currency"),v=this.safeString(n,"fee_currency"),w=this.safeCurrencyCode(y),k=this.safeCurrencyCode(b),_=this.safeCurrencyCode(v);let S,O,M,T,x,I=w+"/"+k,A="spot";c&&(M=1,S=v,O=this.safeCurrencyCode(S),T=void 0!==k&&k===O,x=!T,I=I+":"+O,p?(I=I+"-"+h,A="future"):A="swap");const C=this.safeString(n,"quantity_increment"),N=this.safeString(n,"tick_size"),E=this.parseNumber(C),P=this.parseNumber(N),B=this.safeNumber(n,"take_rate"),R=this.safeNumber(n,"make_rate");i.push({id:r,symbol:I,base:w,quote:k,settle:O,baseId:y,quoteId:b,settleId:S,type:A,spot:u,margin:f,swap:m,future:p,futures:p,option:g,derivative:d,contract:c,linear:T,inverse:x,taker:B,maker:R,contractSize:M,active:!0,expiry:h,expiryDatetime:void 0,strike:void 0,optionType:void 0,feeCurrency:_,precision:{price:E,amount:P},limits:{leverage:{min:1,max:this.safeNumber(n,"max_initial_leverage",1)},amount:{min:E,max:void 0},price:{min:P,max:void 0},cost:{min:this.parseNumber(a.stringMul(C,N)),max:void 0}},info:n})}return i}async fetchCurrencies(e={}){const t=await this.publicGetPublicCurrency(e),i={},s=Object.keys(t);for(let e=0;e<s.length;e++){const r=s[e],a=this.safeCurrencyCode(r),n=t[r],o=this.safeString(n,"full_name"),h=this.safeNumber(n,"precision_transfer"),c=this.safeValue(n,"payin_enabled",!1),d=this.safeValue(n,"payout_enabled",!1),u=this.safeValue(n,"transfer_enabled",!1),l=c&&d&&u,f=this.safeValue(n,"networks",[]),p={};let m;for(let e=0;e<f.length;e++){const t=f[e];let i=this.safeString(t,"protocol");0===i.length&&(i=this.safeString(t,"network"));const s=this.safeNetwork(i);m=this.safeNumber(t,"payout_fee");const r=this.safeNumber(t,"precision_payout"),a=this.safeValue(n,"payin_enabled",!1),o=this.safeValue(n,"payout_enabled",!1),h=this.safeValue(n,"transfer_enabled",!1),c=a&&o&&h;p[s]={info:t,id:i,network:s,fee:m,active:c,precision:r,limits:{withdraw:{min:void 0,max:void 0}}}}const g=Object.keys(p).length;i[a]={info:n,code:a,id:r,precision:h,name:o,active:l,networks:p,fee:g<=1?m:void 0,limits:{amount:{min:void 0,max:void 0}}}}return i}safeNetwork(e){return void 0===e?void 0:e.toUpperCase()}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=this.safeStringUpper(t,"network");if(void 0!==s&&"USDT"===e){const e=this.safeValue(this.options,"networks"),r=this.safeString(e,s);void 0!==r&&(i.currency=r),t=this.omit(t,"network")}const r=await this.privateGetWalletCryptoAddress(this.extend(i,t)),a=this.safeValue(r,0),n=this.safeString(a,"address"),o=this.safeString(a,"currency");return{info:r,address:n,tag:this.safeString(a,"payment_id"),code:this.safeCurrencyCode(o),network:void 0}}async fetchBalance(e={}){const t=this.safeStringLower(e,"type","spot");e=this.omit(e,["type"]);const i=this.safeValue(this.options,"accountsByType",{}),s=this.safeString(i,t);let r;if("wallet"===s)r=await this.privateGetWalletBalance(e);else if("spot"===s)r=await this.privateGetSpotBalance(e);else{if("derivatives"!==s){const e=Object.keys(i);throw new o(this.id+" fetchBalance() type parameter must be one of "+e.join(", "))}r=await this.privateGetFuturesBalance(e)}const a={info:r};for(let e=0;e<r.length;e++){const t=r[e],i=this.safeString(t,"currency"),s=this.safeCurrencyCode(i),n=this.account();n.free=this.safeString(t,"available"),n.used=this.safeString(t,"reserved"),a[s]=n}return this.parseBalance(a)}async fetchTicker(e,t={}){const i=await this.fetchTickers([e],t);return this.safeValue(i,e)}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e).join(",");i.symbols=t}const s=await this.publicGetPublicTicker(this.extend(i,t)),r={},a=Object.keys(s);for(let e=0;e<a.length;e++){const t=a[e],i=this.safeMarket(t),n=i.symbol,o=s[t];r[n]=this.parseTicker(o,i)}return this.filterByArray(r,"symbol",e)}parseTicker(e,t){const i=this.parse8601(e.timestamp),s=this.safeSymbol(void 0,t),r=this.safeNumber(e,"volume"),a=this.safeNumber(e,"volume_quote"),n=this.safeNumber(e,"open"),o=this.safeNumber(e,"last"),h=this.vwap(r,a);return this.safeTicker({symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:h,open:n,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:r,quoteVolume:a,info:e},t)}async fetchTrades(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.symbols=r.id),void 0!==i&&(a.limit=i),void 0!==t&&(a.since=t);const n=await this.publicGetPublicTrades(this.extend(a,s)),o=Object.keys(n);let h=[];for(let e=0;e<o.length;e++){const t=o[e],i=this.market(t),s=n[t],r=this.parseTrades(s,i);h=this.arrayConcat(h,r)}return h}async fetchMyTrades(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==i&&(a.limit=i),void 0!==t&&(a.since=t);const n=await this.privateGetSpotHistoryTrade(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseTrade(e,t){const i=this.parse8601(e.timestamp),s=this.safeString(e,"symbol"),r=(t=this.safeMarket(s,t)).symbol;let n;const o=this.safeNumber(e,"fee"),h=this.safeValue(e,"taker");let c;if(void 0!==h&&(c=h?"taker":"maker"),void 0!==o){const e=this.safeValue(t,"info",{}),i=this.safeString(e,"fee_currency");n={cost:o,currency:this.safeCurrencyCode(i)}}const d=this.safeString(e,"clientOrderId"),u=this.safeString(e,"price"),l=this.safeString2(e,"quantity","qty"),f=this.parseNumber(u),p=this.parseNumber(l),m=this.parseNumber(a.stringMul(u,l)),g=this.safeString(e,"side");return{info:e,id:this.safeString(e,"id"),order:d,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,side:g,takerOrMaker:c,price:f,amount:p,cost:m,fee:n}}async fetchTransactionsHelper(e,t,i,s,r){await this.loadMarkets();const a={types:e};let n;void 0!==t&&(n=this.currency(t),a.currencies=n.id),void 0!==i&&(a.from=this.iso8601(i)),void 0!==s&&(a.limit=s);const o=await this.privateGetWalletTransactions(this.extend(a,r));return this.parseTransactions(o,n,i,s,r)}parseTransactionStatus(e){return this.safeString({PENDING:"pending",FAILED:"failed",SUCCESS:"ok"},e,e)}parseTransactionType(e){return this.safeString({DEPOSIT:"deposit",WITHDRAW:"withdrawal"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"created_at")),r=this.parse8601(this.safeString(e,"updated_at")),a=this.parseTransactionType(this.safeString(e,"type")),n=this.parseTransactionStatus(this.safeString(e,"status")),o=this.safeValue(e,"native"),h=this.safeString(o,"currency"),c=this.safeCurrencyCode(h),d=this.safeString(o,"hash"),u=this.safeString(o,"address"),l=u,f=this.safeString(o,"payment_id"),p=f,m=this.safeValue(o,"senders"),g=this.safeString(m,0),y=this.safeNumber(o,"amount");let b;const v=this.safeNumber(o,"fee");return void 0!==v&&(b={code:c,cost:v}),{info:e,id:i,txid:d,code:c,amount:y,address:u,addressFrom:g,addressTo:l,tag:f,tagFrom:void 0,tagTo:p,timestamp:s,datetime:this.iso8601(s),updated:r,status:n,type:a,fee:b}}async fetchTransactions(e,t,i,s={}){return await this.fetchTransactionsHelper("DEPOSIT,WITHDRAW",e,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsHelper("DEPOSIT",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsHelper("WITHDRAW",e,t,i,s)}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();const s={};if(void 0!==e){const t=this.marketIds(e);s.symbols=t.join(",")}void 0!==t&&(s.depth=t);const r=await this.publicGetPublicOrderbook(this.extend(s,i)),a={},n=Object.keys(r);for(let e=0;e<n.length;e++){const t=n[e],i=r[t],s=this.safeSymbol(t),o=this.parse8601(this.safeString(i,"timestamp"));a[s]=this.parseOrderBook(r[t],s,o,"bid","ask")}return a}async fetchOrderBook(e,t,i={}){return(await this.fetchOrderBooks([e],t,i))[e]}parseTradingFee(e,t){const i=this.safeNumber(e,"take_rate"),s=this.safeNumber(e,"make_rate"),r=this.safeString(e,"symbol");return{info:e,symbol:this.safeSymbol(r,t),taker:i,maker:s}}async fetchTradingFee(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.privateGetSpotFeeSymbol(this.extend(s,t));return this.parseTradingFee(r,i)}async fetchTradingFees(e,t={}){await this.loadMarkets();const i=await this.privateGetSpotFee(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTradingFee(i[e]);s[t.symbol]=t}return s}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbols:a.id,period:this.timeframes[t]};void 0!==i&&(n.from=this.iso8601(i)),void 0!==s&&(n.limit=s);const o=await this.publicGetPublicCandles(this.extend(n,r)),h=this.safeValue(o,a.id);return this.parseOHLCVs(h,a,t,i,s)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"timestamp")),this.safeNumber(e,"open"),this.safeNumber(e,"max"),this.safeNumber(e,"min"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchClosedOrders(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==t&&(a.from=this.iso8601(t)),void 0!==i&&(a.limit=i);const n=await this.privateGetSpotHistoryOrder(this.extend(a,s)),o=this.parseOrders(n,r,t,i);return this.filterByArray(o,"status",["closed","canceled"],!1)}async fetchOrder(e,t,i={}){let s;await this.loadMarkets(),void 0!==t&&(s=this.market(t));const r={client_order_id:e},a=await this.privateGetSpotHistoryOrder(this.extend(r,i)),n=this.safeValue(a,0);return this.parseOrder(n,s)}async fetchOrderTrades(e,t,i,s,r={}){let a;await this.loadMarkets(),void 0!==t&&(a=this.market(t));const n={order_id:e},o=await this.privateGetSpotHistoryTrade(this.extend(n,r));return this.parseTrades(o,a,i,s)}async fetchOpenOrders(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.symbol=r.id);const n=await this.privateGetSpotOrder(this.extend(a,s));return this.parseOrders(n,r,t,i)}async fetchOpenOrder(e,t,i={}){let s;await this.loadMarkets(),void 0!==t&&(s=this.market(t));const r={client_order_id:e},a=await this.privateGetSpotOrderClientOrderId(this.extend(r,i));return this.parseOrder(a,s)}async cancelAllOrders(e,t={}){let i;await this.loadMarkets();const s={};void 0!==e&&(i=this.market(e),s.symbol=i.id);const r=await this.privateDeleteSpotOrder(this.extend(s,t));return this.parseOrders(r,i)}async cancelOrder(e,t,i={}){let s;await this.loadMarkets();const r={client_order_id:e};void 0!==t&&(s=this.market(t));const a=await this.privateDeleteSpotOrderClientOrderId(this.extend(r,i));return this.parseOrder(a,s)}async editOrder(e,t,i,s,r,a,n={}){let o;await this.loadMarkets();const h={client_order_id:e,quantity:this.amountToPrecision(t,r)};if("limit"===i||"stopLimit"===i){if(void 0===a)throw new u(this.id+" limit order requires price");h.price=this.priceToPrecision(t,a)}void 0!==t&&(o=this.market(t));const c=await this.privatePatchSpotOrderClientOrderId(this.extend(h,n));return this.parseOrder(c,o)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o={type:t,side:i,quantity:this.amountToPrecision(e,s),symbol:n.id};if("limit"===t||"stopLimit"===t){if(void 0===r)throw new u(this.id+" limit order requires price");o.price=this.priceToPrecision(e,r)}const h=await this.privatePostSpotOrder(this.extend(o,a));return this.parseOrder(h,n)}parseOrderStatus(e){return this.safeString({new:"open",suspended:"open",partiallyFilled:"open",filled:"closed",canceled:"canceled",expired:"failed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"client_order_id"),s=this.safeString(e,"side"),r=this.safeString(e,"type"),a=this.safeString(e,"quantity"),n=this.safeString(e,"price"),o=this.safeString(e,"price_average"),h=this.safeString(e,"created_at"),c=this.parse8601(h),d=this.safeString(e,"updated_at");let u;d!==h&&(u=this.parse8601(d));const l=this.safeString(e,"quantity_cumulative"),f=this.parseOrderStatus(this.safeString(e,"status")),p=this.safeString(e,"marketId"),m=(t=this.safeMarket(p,t)).symbol,g=this.safeValue(e,"post_only"),y=this.safeString(e,"time_in_force"),b=this.safeValue(e,"trades");return this.safeOrder2({info:e,id:i,clientOrderId:i,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:u,symbol:m,price:n,amount:a,type:r,side:s,timeInForce:y,postOnly:g,filled:l,remaining:void 0,cost:void 0,status:f,average:o,trades:b,fee:void 0},t)}async transfer(e,t,i,s,r={}){await this.loadMarkets();const a=this.currency(e),n=this.currencyToPrecision(e,t),h=this.safeValue(this.options,"accountsByType",{});i=i.toLowerCase(),s=s.toLowerCase();const c=this.safeString(h,i),d=this.safeString(h,s),u=Object.keys(h);if(void 0===c)throw new b(this.id+" transfer() fromAccount argument must be one of "+u.join(", "));if(void 0===d)throw new b(this.id+" transfer() toAccount argument must be one of "+u.join(", "));if(c===d)throw new o(this.id+" transfer() fromAccount and toAccount arguments cannot be the same account");const l={currency:a.id,amount:n,source:c,destination:d},f=await this.privatePostWalletTransfer(this.extend(l,r));return{info:f,id:this.safeString(f,0),timestamp:void 0,datetime:void 0,amount:this.parseNumber(n),currency:e,fromAccount:i,toAccount:s,status:void 0}}async convertCurrencyNetwork(e,t,i,s,r){if(await this.loadMarkets(),"USDT"!==e)throw new u(this.id+" convertCurrencyNetwork() only supports USDT currently");const a=this.safeValue(this.options,"networks",{});if(i=i.toUpperCase(),s=s.toUpperCase(),(i=this.safeString(a,i))===(s=this.safeString(a,s)))throw new o(this.id+" fromNetwork cannot be the same as toNetwork");if(void 0===i||void 0===s){const e=Object.keys(a);throw new b(this.id+" convertCurrencyNetwork() requires a fromNetwork parameter and a toNetwork parameter, supported networks are "+e.join(", "))}const n={from_currency:i,to_currency:s,amount:this.currencyToPrecision(e,t)};return{info:await this.privatePostWalletConvert(this.extend(n,r))}}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),await this.loadMarkets(),this.checkAddress(i);const a={currency:this.currency(e).id,amount:t,address:i};void 0!==s&&(a.payment_id=s);const n=this.safeValue(this.options,"networks",{}),o=this.safeStringUpper(r,"network");if(void 0!==o&&"USDT"===e){const e=this.safeString(n,o);void 0!==e&&(a.currency=e),r=this.omit(r,"network")}const h=await this.privatePostWalletCryptoWithdraw(this.extend(a,r));return{info:h,id:this.safeString(h,"id")}}handleErrors(e,t,i,s,r,a,n,o,h){const c=this.safeValue(n,"error"),d=this.safeString(c,"code");if(void 0!==d){const e=this.id+" "+a,t=this.safeString2(c,"message","description");throw this.throwExactlyMatchedException(this.exceptions.exact,d,e),this.throwBroadlyMatchedException(this.exceptions.broad,t,e),new u(e)}}sign(e,t="public",i="GET",s={},r,a){const n=this.omit(s,this.extractParams(e)),o=this.implodeParams(e,s);let h,c=this.urls.api[t]+"/"+o;const d=Object.keys(n).length;if(r={"Content-Type":"application/json"},"GET"===i?d&&(h="?"+this.urlencode(n),c+=h):a=this.json(s),"private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=[i,"/api/3/"+o];"GET"===i?void 0!==h&&t.push(h):t.push(a),t.push(e);const s=t.join(""),n=this.hmac(this.encode(s),this.encode(this.secret),"sha256","hex"),c=this.apiKey+":"+n+":"+e,d=this.stringToBase64(c);r.Authorization="HS256 "+d}return{url:c,method:i,body:a,headers:r}}}},94693:(e,t,i)=>{"use strict";const s=i(48819),{BadRequest:r,AuthenticationError:a,NetworkError:n,ArgumentsRequired:o,OrderNotFound:h,InsufficientFunds:c}=i(73449),{TICK_SIZE:d}=i(62115),u=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"hollaex",name:"HollaEx",countries:["KR"],rateLimit:333,version:"v2",has:{cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createLimitBuyOrder:!0,createLimitSellOrder:!0,createMarketBuyOrder:!0,createMarketSellOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:"emulated",fetchDepositAddresses:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:void 0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1h":"1h","1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/75841031-ca375180-5ddd-11ea-8417-b975674c23cb.jpg",api:"https://api.hollaex.com",www:"https://hollaex.com",doc:"https://apidocs.hollaex.com",referral:"https://pro.hollaex.com/signup?affiliation_code=QSWA6G"},precisionMode:d,requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["health","constants","kit","tiers","ticker","tickers","orderbook","orderbooks","trades","chart","charts","udf/config","udf/history","udf/symbols"]},private:{get:["user","user/balance","user/deposits","user/withdrawals","user/withdrawal/fee","user/trades","orders","orders/{order_id}"],post:["user/request-withdrawal","order"],delete:["order/all","order"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:.001}},exceptions:{broad:{"Invalid token":a,"Order not found":h,"Insufficient balance":c},exact:{400:r,403:a,404:r,405:r,410:r,429:r,500:n,503:n}},options:{"api-expires":parseInt(this.timeout/1e3)}})}async fetchMarkets(e={}){const t=await this.publicGetConstants(e),i=this.safeValue(t,"pairs",{}),s=Object.keys(i),r=[];for(let e=0;e<s.length;e++){const t=i[s[e]],a=this.safeString(t,"name"),n=this.safeString(t,"pair_base"),o=this.safeString(t,"pair_2"),h=this.commonCurrencyCode(n.toUpperCase()),c=this.commonCurrencyCode(o.toUpperCase()),d=h+"/"+c,u=this.safeValue(t,"active"),l=this.fees.trading.maker,f=this.fees.trading.taker;r.push({id:a,symbol:d,base:h,quote:c,baseId:n,quoteId:o,type:"spot",spot:!0,active:u,precision:{price:this.safeNumber(t,"increment_price"),amount:this.safeNumber(t,"increment_size")},limits:{amount:{min:this.safeNumber(t,"min_size"),max:this.safeNumber(t,"max_size")},price:{min:this.safeNumber(t,"min_price"),max:this.safeNumber(t,"max_price")},cost:{min:void 0,max:void 0}},taker:f,maker:l,info:t})}return r}async fetchCurrencies(e={}){const t=await this.publicGetConstants(e),i=this.safeValue(t,"coins",{}),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){const t=i[s[e]],a=this.safeString(t,"symbol"),n=this.safeInteger(t,"id"),o=this.safeCurrencyCode(a),h=this.safeString(t,"fullname"),c=this.safeValue(t,"active"),d=this.safeNumber(t,"withdrawal_fee"),u=this.safeNumber(t,"increment_unit"),l=this.safeValue(t,"withdrawal_limits",[]);r[o]={id:a,numericId:n,code:o,info:t,name:h,active:c,fee:d,precision:u,limits:{amount:{min:this.safeNumber(t,"min"),max:this.safeNumber(t,"max")},withdraw:{min:void 0,max:this.safeValue(l,0)}}}}return r}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();const s=await this.publicGetOrderbooks(i),r={},a=Object.keys(s);for(let e=0;e<a.length;e++){const t=a[e],i=s[t],n=this.safeSymbol(t,void 0,"-"),o=this.parse8601(this.safeString(i,"timestamp"));r[n]=this.parseOrderBook(s[t],o)}return r}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.marketId(e),r={symbol:s},a=await this.publicGetOrderbooks(this.extend(r,i)),n=this.safeValue(a,s),o=this.parse8601(this.safeString(n,"timestamp"));return this.parseOrderBook(n,e,o)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(this.extend(t));return this.parseTickers(i,e)}parseTickers(e,t,i={}){const s={},r=Object.keys(e);for(let t=0;t<r.length;t++){const a=r[t],n=e[a],o=this.safeString(n,"symbol",a),h=this.safeMarket(o,void 0,"-");s[h.symbol]=this.extend(this.parseTicker(n,h),i)}return this.filterByArray(s,"symbol",t)}parseTicker(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t,"-"),r=this.parse8601(this.safeString2(e,"time","timestamp")),a=this.safeNumber(e,"close");return{symbol:s,info:e,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeNumber(e,"open"),close:a,last:this.safeNumber(e,"last",a),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"volume"),quoteVolume:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},n=await this.publicGetTrades(this.extend(a,s)),o=this.safeValue(n,r.id,[]);return this.parseTrades(o,r,t,i)}parseTrade(e,t){const i=this.safeString(e,"symbol"),s=(t=this.safeMarket(i,t,"-")).symbol,r=this.safeString(e,"timestamp"),a=this.parse8601(r),n=this.safeString(e,"side"),o=this.safeString(e,"price"),h=this.safeString(e,"size"),c=this.parseNumber(o),d=this.parseNumber(h),l=this.parseNumber(u.stringMul(o,h)),f=this.safeNumber(e,"fee");let p;if(void 0!==f){const e=t.quote;p={cost:f,currency:void 0!==t?t.quote:e}}return{info:e,id:void 0,timestamp:a,datetime:r,symbol:s,order:void 0,type:void 0,side:n,takerOrMaker:void 0,price:c,amount:d,cost:l,fee:p}}async fetchOHLCV(e,t="1h",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id,resolution:this.timeframes[t]},h=this.parseTimeframe(t);if(void 0===i){if(void 0===s)throw new o(this.id+" fetchOHLCV() requires a 'since' or a 'limit' argument");{const e=this.seconds(),t=e-h*s;n.to=e,n.from=t}}else if(void 0===s)n.from=parseInt(i/1e3),n.to=this.seconds();else{const e=parseInt(i/1e3);n.from=e,n.to=this.sum(e,h*s)}const c=await this.publicGetChart(this.extend(n,r));return this.parseOHLCVs(c,a,t,i,s)}parseOHLCV(e,t,i="1h",s,r){return[this.parse8601(this.safeString(e,"time")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUserBalance(e),i=this.parse8601(this.safeString(t,"updated_at")),s={info:t,timestamp:i,datetime:this.iso8601(i)},r=Object.keys(this.currencies_by_id);for(let e=0;e<r.length;e++){const i=r[e],a=this.safeCurrencyCode(i),n=this.account();n.free=this.safeString(t,i+"_available"),n.total=this.safeString(t,i+"_balance"),s[a]=n}return this.parseBalance(s)}async fetchOpenOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privateGetOrdersOrderId(this.extend(s,i));return this.parseOrder(r)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({open:!0},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"filled"},s))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privateGetOrders(this.extend(s,i)),a=this.safeValue(r,"data",[]),n=this.safeValue(a,0);if(void 0===n)throw new h(this.id+" fetchOrder() could not find order id "+e);return this.parseOrder(n)}async fetchOrders(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==t&&(a.start_date=this.iso8601(t)),void 0!==i&&(a.limit=i);const n=await this.privateGetOrders(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseOrders(o,r,t,i)}parseOrderStatus(e){return this.safeString({new:"open",pfilled:"open",filled:"closed",canceled:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t,"-"),r=this.safeString(e,"id"),a=this.parse8601(this.safeString(e,"created_at")),n=this.safeString(e,"type"),o=this.safeString(e,"side"),h=this.safeString(e,"price"),c=this.safeString(e,"size"),d=this.safeString(e,"filled"),u=this.parseOrderStatus(this.safeString(e,"status"));return this.safeOrder2({id:r,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,status:u,symbol:s,type:n,timeInForce:void 0,postOnly:void 0,side:o,price:h,stopPrice:void 0,amount:c,filled:d,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,info:e,average:void 0},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o={symbol:n.id,side:i,size:s,type:t};"market"!==t&&(o.price=r);const h=this.safeFloat2(a,"stopPrice","stop");void 0!==h&&(o.stop=parseFloat(this.priceToPrecision(e,h)),a=this.omit(a,["stopPrice","stop"]));const c=await this.privatePostOrder(this.extend(o,a));return this.parseOrder(c,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privateDeleteOrder(this.extend(s,i));return this.parseOrder(r)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s;void 0!==e&&(s=this.market(e),i.symbol=s.id);const r=await this.privateDeleteOrderAll(this.extend(i,t));return this.parseOrders(r,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==i&&(r.limit=i),void 0!==t&&(r.start_date=this.iso8601(t));const n=await this.privateGetUserTrades(this.extend(r,s)),o=this.safeValue(n,"data",[]);return this.parseTrades(o,a,t,i)}parseDepositAddress(e,t){let i,s=this.safeString(e,"address");if(void 0!==s){const e=s.split(":");s=this.safeString(e,0),i=this.safeString(e,1)}this.checkAddress(s);const r=this.safeString(e,"currency");t=this.safeCurrency(r,t);const a=this.safeString(e,"network");return{currency:t.code,address:s,tag:i,network:a,info:e}}async fetchDepositAddresses(e,t={}){await this.loadMarkets();const i=this.safeString(t,"network");t=this.omit(t,"network");const s=await this.privateGetUser(t),r=this.safeValue(s,"wallet",[]),a=void 0===i?r:this.filterBy(r,"network",i);return this.parseDepositAddresses(a,e)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.limit=i),void 0!==t&&(r.start_date=this.iso8601(t));const n=await this.privateGetUserDeposits(this.extend(r,s)),o=this.safeValue(n,"data",[]);return this.parseTransactions(o,a,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.limit=i),void 0!==t&&(r.start_date=this.iso8601(t));const n=await this.privateGetUserWithdrawals(this.extend(r,s)),o=this.safeValue(n,"data",[]);return this.parseTransactions(o,a,t,i)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"transaction_id"),r=this.parse8601(this.safeString(e,"created_at")),a=this.parse8601(this.safeString(e,"updated_at")),n=this.safeString(e,"type"),o=this.safeNumber(e,"amount");let h,c,d,u=this.safeString(e,"address");if(void 0!==u){const e=u.split(":");u=this.safeString(e,0),c=this.safeString(e,1),h=u,d=c}const l=this.safeString(e,"currency"),f=this.safeCurrencyCode(l);let p=this.safeValue(e,"status");const m=this.safeValue(e,"dismissed"),g=this.safeValue(e,"rejected");p=p?"ok":m?"canceled":g?"failed":"pending";const y={currency:f,cost:this.safeNumber(e,"fee")};return{info:e,id:i,txid:s,timestamp:r,datetime:this.iso8601(r),addressFrom:void 0,address:u,addressTo:h,tagFrom:void 0,tag:c,tagTo:d,type:n,amount:o,currency:f,status:p,updated:a,fee:y}}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets(),void 0!==s&&(i+=":"+s);const a={currency:this.currency(e).id,amount:t,address:i};let n=this.safeString(r,"otp_code");return void 0===n&&void 0===this.twofa||(void 0===n&&(n=this.oath()),a.otp_code=n),{info:await this.privatePostUserRequestWithdrawal(this.extend(a,r)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){const n=this.omit(s,this.extractParams(e));e="/"+this.version+"/"+this.implodeParams(e,s),"GET"!==i&&"DELETE"!==i||Object.keys(n).length&&(e+="?"+this.urlencode(n));const o=this.urls.api+e;if("private"===t){this.checkRequiredCredentials();const t=this.safeInteger2(this.options,"api-expires","expires",parseInt(this.timeout/1e3)),s=this.sum(this.seconds(),t).toString();let o=i+e+s;r={"api-key":this.encode(this.apiKey),"api-expires":s},"POST"===i&&(r["Content-type"]="application/json",Object.keys(n).length&&(o+=a=this.json(n)));const h=this.hmac(this.encode(o),this.encode(this.secret));r["api-signature"]=h}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,n,o,h){if(void 0!==n&&e>=400&&e<=503){const t=this.id+" "+a,i=this.safeString(n,"message");this.throwBroadlyMatchedException(this.exceptions.broad,i,t);const s=e.toString();this.throwExactlyMatchedException(this.exceptions.exact,s,t)}}}},68639:(e,t,i)=>{"use strict";const s=i(48819),{ArgumentsRequired:r,AuthenticationError:a,ExchangeError:n,PermissionDenied:o,ExchangeNotAvailable:h,OnMaintenance:c,InvalidOrder:d,OrderNotFound:u,InsufficientFunds:l,BadSymbol:f,BadRequest:p,RequestTimeout:m,NetworkError:g,InvalidAddress:y,NotSupported:b}=i(73449),{TICK_SIZE:v,TRUNCATE:w}=i(62115),k=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"huobi",name:"Huobi",countries:["CN"],rateLimit:100,userAgent:this.userAgents.chrome39,certified:!0,version:"v1",accounts:void 0,accountsById:void 0,hostname:"api.huobi.pro",pro:!0,has:{swap:!0,future:!0,cancelAllOrders:!0,cancelOrder:!0,cancelOrders:!0,CORS:void 0,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchBorrowRate:!0,fetchBorrowRates:!0,fetchBorrowRatesPerSymbol:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDepositAddressesByNetwork:!0,fetchDeposits:!0,fetchFundingRate:!0,fetchFundingRateHistory:!0,fetchIndexOHLCV:!0,fetchMarkets:!0,fetchMarkOHLCV:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchPremiumIndexOHLCV:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingLimits:!0,fetchWithdrawals:!0,transfer:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","4h":"4hour","1d":"1day","1w":"1week","1M":"1mon","1y":"1year"},urls:{logo:"https://user-images.githubusercontent.com/1294454/76137448-22748a80-604e-11ea-8069-6e389271911d.jpg",hostnames:{contract:"api.hbdm.com",spot:"api.huobi.pro"},api:{contract:"https://{hostname}",spot:"https://{hostname}",market:"https://{hostname}",public:"https://{hostname}",private:"https://{hostname}",v2Public:"https://{hostname}",v2Private:"https://{hostname}"},www:"https://www.huobi.com",doc:["https://huobiapi.github.io/docs/spot/v1/cn/","https://huobiapi.github.io/docs/dm/v1/cn/","https://huobiapi.github.io/docs/coin_margined_swap/v1/cn/","https://huobiapi.github.io/docs/usdt_swap/v1/cn/","https://huobiapi.github.io/docs/option/v1/cn/"],fees:"https://www.huobi.com/about/fee/"},api:{v2Public:{get:{"reference/currencies":1,"market-status":1}},v2Private:{get:{"account/ledger":1,"account/withdraw/quota":1,"account/withdraw/address":1,"account/deposit/address":1,"account/repayment":5,"reference/transact-fee-rate":1,"account/asset-valuation":.2,"point/account":5,"sub-user/user-list":1,"sub-user/user-state":1,"sub-user/account-list":1,"sub-user/deposit-address":1,"sub-user/query-deposit":1,"user/api-key":1,"user/uid":1,"algo-orders/opening":1,"algo-orders/history":1,"algo-orders/specific":1,"c2c/offers":1,"c2c/offer":1,"c2c/transactions":1,"c2c/repayment":1,"c2c/account":1,"etp/reference":1,"etp/transactions":5,"etp/transaction":5,"etp/rebalance":1,"etp/limit":1},post:{"account/transfer":1,"account/repayment":5,"point/transfer":5,"sub-user/management":1,"sub-user/creation":1,"sub-user/tradable-market":1,"sub-user/transferability":1,"sub-user/api-key-generation":1,"sub-user/api-key-modification":1,"sub-user/api-key-deletion":1,"sub-user/deduct-mode":1,"algo-orders":1,"algo-orders/cancel-all-after":1,"algo-orders/cancellation":1,"c2c/offer":1,"c2c/cancellation":1,"c2c/cancel-all":1,"c2c/repayment":1,"c2c/transfer":1,"etp/creation":5,"etp/redemption":5,"etp/{transactId}/cancel":10,"etp/batch-cancel":50}},market:{get:{"history/kline":1,"detail/merged":1,depth:1,trade:1,"history/trade":1,detail:1,tickers:1,etp:1}},public:{get:{"common/symbols":1,"common/currencys":1,"common/timestamp":1,"common/exchange":1,"settings/currencys":1}},private:{get:{"account/accounts":.2,"account/accounts/{id}/balance":.2,"account/accounts/{sub-uid}":1,"account/history":4,"cross-margin/loan-info":1,"margin/loan-info":1,"fee/fee-rate/get":1,"order/openOrders":.4,"order/orders":.4,"order/orders/{id}":.4,"order/orders/{id}/matchresults":.4,"order/orders/getClientOrder":.4,"order/history":1,"order/matchresults":1,"query/deposit-withdraw":1,"margin/loan-orders":.2,"margin/accounts/balance":.2,"cross-margin/loan-orders":1,"cross-margin/accounts/balance":1,"points/actions":1,"points/orders":1,"subuser/aggregate-balance":10,"stable-coin/exchange_rate":1,"stable-coin/quote":1},post:{"account/transfer":1,"futures/transfer":1,"order/batch-orders":.4,"order/orders/place":.2,"order/orders/submitCancelClientOrder":.2,"order/orders/batchCancelOpenOrders":.4,"order/orders/{id}/submitcancel":.2,"order/orders/batchcancel":.4,"dw/withdraw/api/create":1,"dw/withdraw-virtual/{id}/cancel":1,"dw/transfer-in/margin":10,"dw/transfer-out/margin":10,"margin/orders":10,"margin/orders/{id}/repay":10,"cross-margin/transfer-in":1,"cross-margin/transfer-out":1,"cross-margin/orders":1,"cross-margin/orders/{id}/repay":1,"stable-coin/exchange":1,"subuser/transfer":10}},spot:{public:{get:{"v2/market-status":1,"v1/common/symbols":1,"v1/common/currencys":1,"v2/reference/currencies":1,"v1/common/timestamp":1,"v1/common/exchange":1,"market/history/kline":1,"market/detail/merged":1,"market/tickers":1,"market/depth":1,"market/trade":1,"market/history/trade":1,"market/detail/":1,"market/etp":1,"v2/etp/reference":1,"v2/etp/rebalance":1}},private:{get:{"v1/account/accounts":.2,"v1/account/accounts/{account-id}/balance":.2,"v2/account/valuation":1,"v2/account/asset-valuation":.2,"v1/account/history":4,"v2/account/ledger":1,"v2/point/account":5,"v2/account/deposit/address":1,"v2/account/withdraw/quota":1,"v2/account/withdraw/address":1,"v2/reference/currencies":1,"v1/query/deposit-withdraw":1,"v2/user/api-key":1,"v2/user/uid":1,"v2/sub-user/user-list":1,"v2/sub-user/user-state":1,"v2/sub-user/account-list":1,"v2/sub-user/deposit-address":1,"v2/sub-user/query-deposit":1,"v1/subuser/aggregate-balance":10,"v1/account/accounts/{sub-uid}":1,"v1/order/openOrders":.4,"v1/order/orders/{order-id}":.4,"v1/order/orders/getClientOrder":.4,"v1/order/orders/{order-id}/matchresults":.4,"v1/order/orders":.4,"v1/order/history":1,"v1/order/matchresults":1,"v2/reference/transact-fee-rate":1,"v2/algo-orders/opening":1,"v2/algo-orders/history":1,"v2/algo-orders/specific":1,"v1/margin/loan-info":1,"v1/margin/loan-orders":.2,"v1/margin/accounts/balance":.2,"v1/cross-margin/loan-info":1,"v1/cross-margin/loan-orders":1,"v1/cross-margin/accounts/balance":1,"v2/account/repayment":5,"v1/stable-coin/quote":1,"v2/etp/transactions":5,"v2/etp/transaction":5,"v2/etp/limit":1},post:{"v1/account/transfer":1,"v1/futures/transfer":1,"v2/point/transfer":5,"v2/account/transfer":1,"v1/dw/withdraw/api/create":1,"v1/dw/withdraw-virtual/{withdraw-id}/cancel":1,"v2/sub-user/deduct-mode":1,"v2/sub-user/creation":1,"v2/sub-user/management":1,"v2/sub-user/tradable-market":1,"v2/sub-user/transferability":1,"v2/sub-user/api-key-generation":1,"v2/sub-user/api-key-modification":1,"v2/sub-user/api-key-deletion":1,"v1/subuser/transfer":10,"v1/order/orders/place":.2,"v1/order/batch-orders":.4,"v1/order/orders/{order-id}/submitcancel":.2,"v1/order/orders/submitCancelClientOrder":.2,"v1/order/orders/batchCancelOpenOrders":.4,"v1/order/orders/batchcancel":.4,"v2/algo-orders/cancel-all-after":1,"v2/algo-orders":1,"v2/algo-orders/cancellation":1,"v2/account/repayment":5,"v1/dw/transfer-in/margin":10,"v1/dw/transfer-out/margin":10,"v1/margin/orders":10,"v1/margin/orders/{order-id}/repay":10,"v1/cross-margin/transfer-in":1,"v1/cross-margin/transfer-out":1,"v1/cross-margin/orders":1,"v1/cross-margin/orders/{order-id}/repay":1,"v1/stable-coin/exchange":1,"v2/etp/creation":5,"v2/etp/redemption":5,"v2/etp/{transactId}/cancel":10,"v2/etp/batch-cancel":50}}},contract:{public:{get:{"api/v1/timestamp":1,"api/v1/contract_contract_info":1,"api/v1/contract_index":1,"api/v1/contract_price_limit":1,"api/v1/contract_open_interest":1,"api/v1/contract_delivery_price":1,"market/depth":1,"market/bbo":1,"market/history/kline":1,"index/market/history/mark_price_kline":1,"market/detail/merged":1,"market/detail/batch_merged":1,"market/trade":1,"market/history/trade":1,"api/v1/contract_risk_info":1,"api/v1/contract_insurance_fund":1,"api/v1/contract_adjustfactor":1,"api/v1/contract_his_open_interest":1,"api/v1/contract_ladder_margin":1,"api/v1/contract_api_state":1,"api/v1/contract_elite_account_ratio":1,"api/v1/contract_elite_position_ratio":1,"api/v1/contract_liquidation_orders":1,"api/v1/contract_settlement_records":1,"index/market/history/index":1,"index/market/history/basis":1,"api/v1/contract_estimated_settlement_price":1,"swap-api/v1/swap_contract_info":1,"swap-api/v1/swap_index":1,"swap-api/v1/swap_price_limit":1,"swap-api/v1/swap_open_interest":1,"swap-ex/market/depth":1,"swap-ex/market/bbo":1,"swap-ex/market/history/kline":1,"index/market/history/swap_mark_price_kline":1,"swap-ex/market/detail/merged":1,"swap-ex/market/detail/batch_merged":1,"swap-ex/market/trade":1,"swap-ex/market/history/trade":1,"swap-api/v1/swap_risk_info":1,"swap-api/v1/swap_insurance_fund":1,"swap-api/v1/swap_adjustfactor":1,"swap-api/v1/swap_his_open_interest":1,"swap-api/v1/swap_ladder_margin":1,"swap-api/v1/swap_api_state":1,"swap-api/v1/swap_elite_account_ratio":1,"swap-api/v1/swap_elite_position_ratio":1,"swap-api/v1/swap_estimated_settlement_price":1,"swap-api/v1/swap_liquidation_orders":1,"swap-api/v1/swap_settlement_records":1,"swap-api/v1/swap_funding_rate":1,"swap-api/v1/swap_batch_funding_rate":1,"swap-api/v1/swap_historical_funding_rate":1,"index/market/history/swap_premium_index_kline":1,"index/market/history/swap_estimated_rate_kline":1,"index/market/history/swap_basis":1,"linear-swap-api/v1/swap_contract_info":1,"linear-swap-api/v1/swap_index":1,"linear-swap-api/v1/swap_price_limit":1,"linear-swap-api/v1/swap_open_interest":1,"linear-swap-ex/market/depth":1,"linear-swap-ex/market/bbo":1,"linear-swap-ex/market/history/kline":1,"index/market/history/linear_swap_mark_price_kline":1,"linear-swap-ex/market/detail/merged":1,"linear-swap-ex/market/detail/batch_merged":1,"linear-swap-ex/market/trade":1,"linear-swap-ex/market/history/trade":1,"linear-swap-api/v1/swap_risk_info":1,"swap-api/v1/linear-swap-api/v1/swap_insurance_fund":1,"linear-swap-api/v1/swap_adjustfactor":1,"linear-swap-api/v1/swap_cross_adjustfactor":1,"linear-swap-api/v1/swap_his_open_interest":1,"linear-swap-api/v1/swap_ladder_margin":1,"linear-swap-api/v1/swap_cross_ladder_margin":1,"linear-swap-api/v1/swap_api_state":1,"linear-swap-api/v1/swap_cross_transfer_state":1,"linear-swap-api/v1/swap_cross_trade_state":1,"linear-swap-api/v1/swap_elite_account_ratio":1,"linear-swap-api/v1/swap_elite_position_ratio":1,"linear-swap-api/v1/swap_liquidation_orders":1,"linear-swap-api/v1/swap_settlement_records":1,"linear-swap-api/v1/swap_funding_rate":1,"linear-swap-api/v1/swap_batch_funding_rate":1,"linear-swap-api/v1/swap_historical_funding_rate":1,"index/market/history/linear_swap_premium_index_kline":1,"index/market/history/linear_swap_estimated_rate_kline":1,"index/market/history/linear_swap_basis":1,"linear-swap-api/v1/swap_estimated_settlement_price":1}},private:{get:{"api/v1/contract_api_trading_status":1,"swap-api/v1/swap_api_trading_status":1,"linear-swap-api/v1/swap_api_trading_status":1},post:{"api/v1/contract_balance_valuation":1,"api/v1/contract_account_info":1,"api/v1/contract_position_info":1,"api/v1/contract_sub_auth":1,"api/v1/contract_sub_account_list":1,"api/v1/contract_sub_account_info_list":1,"api/v1/contract_sub_account_info":1,"api/v1/contract_sub_position_info":1,"api/v1/contract_financial_record":1,"api/v1/contract_financial_record_exact":1,"api/v1/contract_user_settlement_records":1,"api/v1/contract_order_limit":1,"api/v1/contract_fee":1,"api/v1/contract_transfer_limit":1,"api/v1/contract_position_limit":1,"api/v1/contract_account_position_info":1,"api/v1/contract_master_sub_transfer":1,"api/v1/contract_master_sub_transfer_record":1,"api/v1/contract_available_level_rate":1,"api/v1/contract_order":1,"v1/contract_batchorder":1,"api/v1/contract_cancel":1,"api/v1/contract_cancelall":1,"api/v1/contract_switch_lever_rate":1,"api/v1/lightning_close_position":1,"api/v1/contract_order_info":1,"api/v1/contract_order_detail":1,"api/v1/contract_openorders":1,"api/v1/contract_hisorders":1,"api/v1/contract_hisorders_exact":1,"api/v1/contract_matchresults":1,"api/v1/contract_matchresults_exact":1,"api/v1/contract_trigger_order":1,"api/v1/contract_trigger_cancel":1,"api/v1/contract_trigger_cancelall":1,"api/v1/contract_trigger_openorders":1,"api/v1/contract_trigger_hisorders":1,"api/v1/contract_tpsl_order":1,"api/v1/contract_tpsl_cancel":1,"api/v1/contract_tpsl_cancelall":1,"api/v1/contract_tpsl_openorders":1,"api/v1/contract_tpsl_hisorders":1,"api/v1/contract_relation_tpsl_order":1,"api/v1/contract_track_order":1,"api/v1/contract_track_cancel":1,"api/v1/contract_track_cancelall":1,"api/v1/contract_track_openorders":1,"api/v1/contract_track_hisorders":1,"swap-api/v1/swap_balance_valuation":1,"swap-api/v1/swap_account_info":1,"swap-api/v1/swap_position_info":1,"swap-api/v1/swap_account_position_info":1,"swap-api/v1/swap_sub_auth":1,"swap-api/v1/swap_sub_account_list":1,"swap-api/v1/swap_sub_account_info_list":1,"swap-api/v1/swap_sub_account_info":1,"swap-api/v1/swap_sub_position_info":1,"swap-api/v1/swap_financial_record":1,"swap-api/v1/swap_financial_record_exact":1,"swap-api/v1/swap_user_settlement_records":1,"swap-api/v1/swap_available_level_rate":1,"swap-api/v1/swap_order_limit":1,"swap-api/v1/swap_fee":1,"swap-api/v1/swap_transfer_limit":1,"swap-api/v1/swap_position_limit":1,"swap-api/v1/swap_master_sub_transfer":1,"swap-api/v1/swap_master_sub_transfer_record":1,"swap-api/v1/swap_order":1,"swap-api/v1/swap_batchorder":1,"swap-api/v1/swap_cancel":1,"swap-api/v1/swap_cancelall":1,"swap-api/v1/swap_lightning_close_position":1,"swap-api/v1/swap_switch_lever_rate":1,"swap-api/v1/swap_order_info":1,"swap-api/v1/swap_order_detail":1,"swap-api/v1/swap_openorders":1,"swap-api/v1/swap_hisorders":1,"swap-api/v1/swap_hisorders_exact":1,"swap-api/v1/swap_matchresults":1,"swap-api/v1/swap_matchresults_exact":1,"swap-api/v1/swap_trigger_order":1,"swap-api/v1/swap_trigger_cancel":1,"swap-api/v1/swap_trigger_cancelall":1,"swap-api/v1/swap_trigger_openorders":1,"swap-api/v1/swap_trigger_hisorders":1,"swap-api/v1/swap_tpsl_order":1,"swap-api/v1/swap_tpsl_cancel":1,"swap-api/v1/swap_tpsl_cancelall":1,"swap-api/v1/swap_tpsl_openorders":1,"swap-api/v1/swap_tpsl_hisorders":1,"swap-api/v1/swap_relation_tpsl_order":1,"swap-api/v1/swap_track_order":1,"swap-api/v1/swap_track_cancel":1,"swap-api/v1/swap_track_cancelall":1,"swap-api/v1/swap_track_openorders":1,"swap-api/v1/swap_track_hisorders":1,"linear-swap-api/v1/swap_balance_valuation":1,"linear-swap-api/v1/swap_account_info":1,"linear-swap-api/v1/swap_cross_account_info":1,"linear-swap-api/v1/swap_position_info":1,"linear-swap-api/v1/swap_cross_position_info":1,"linear-swap-api/v1/swap_account_position_info":1,"linear-swap-api/v1/swap_cross_account_position_info":1,"linear-swap-api/v1/swap_sub_auth":1,"linear-swap-api/v1/swap_sub_account_list":1,"linear-swap-api/v1/swap_cross_sub_account_list":1,"linear-swap-api/v1/swap_sub_account_info_list":1,"linear-swap-api/v1/swap_cross_sub_account_info_list":1,"linear-swap-api/v1/swap_sub_account_info":1,"linear-swap-api/v1/swap_cross_sub_account_info":1,"linear-swap-api/v1/swap_sub_position_info":1,"linear-swap-api/v1/swap_cross_sub_position_info":1,"linear-swap-api/v1/swap_financial_record":1,"linear-swap-api/v1/swap_financial_record_exact":1,"linear-swap-api/v1/swap_user_settlement_records":1,"linear-swap-api/v1/swap_cross_user_settlement_records":1,"linear-swap-api/v1/swap_available_level_rate":1,"linear-swap-api/v1/swap_cross_available_level_rate":1,"linear-swap-api/v1/swap_order_limit":1,"linear-swap-api/v1/swap_fee":1,"linear-swap-api/v1/swap_transfer_limit":1,"linear-swap-api/v1/swap_cross_transfer_limit":1,"linear-swap-api/v1/swap_position_limit":1,"linear-swap-api/v1/swap_cross_position_limit":1,"linear-swap-api/v1/swap_master_sub_transfer":1,"linear-swap-api/v1/swap_master_sub_transfer_record":1,"linear-swap-api/v1/swap_transfer_inner":1,"linear-swap-api/v1/swap_order":1,"linear-swap-api/v1/swap_cross_order":1,"linear-swap-api/v1/swap_batchorder":1,"linear-swap-api/v1/swap_cross_batchorder":1,"linear-swap-api/v1/swap_cancel":1,"linear-swap-api/v1/swap_cross_cancel":1,"linear-swap-api/v1/swap_cancelall":1,"linear-swap-api/v1/swap_cross_cancelall":1,"linear-swap-api/v1/swap_switch_lever_rate":1,"linear-swap-api/v1/swap_cross_switch_lever_rate":1,"linear-swap-api/v1/swap_lightning_close_position":1,"linear-swap-api/v1/swap_cross_lightning_close_position":1,"linear-swap-api/v1/swap_order_info":1,"linear-swap-api/v1/swap_cross_order_info":1,"linear-swap-api/v1/swap_order_detail":1,"linear-swap-api/v1/swap_cross_order_detail":1,"linear-swap-api/v1/swap_openorders":1,"linear-swap-api/v1/swap_cross_openorders":1,"linear-swap-api/v1/swap_hisorders":1,"linear-swap-api/v1/swap_cross_hisorders":1,"linear-swap-api/v1/swap_hisorders_exact":1,"linear-swap-api/v1/swap_cross_hisorders_exact":1,"linear-swap-api/v1/swap_matchresults":1,"linear-swap-api/v1/swap_cross_matchresults":1,"linear-swap-api/v1/swap_matchresults_exact":1,"linear-swap-api/v1/swap_cross_matchresults_exact":1,"linear-swap-api/v1/swap_trigger_order":1,"linear-swap-api/v1/swap_cross_trigger_order":1,"linear-swap-api/v1/swap_trigger_cancel":1,"linear-swap-api/v1/swap_cross_trigger_cancel":1,"linear-swap-api/v1/swap_trigger_cancelall":1,"linear-swap-api/v1/swap_cross_trigger_cancelall":1,"linear-swap-api/v1/swap_trigger_openorders":1,"linear-swap-api/v1/swap_cross_trigger_openorders":1,"linear-swap-api/v1/swap_trigger_hisorders":1,"linear-swap-api/v1/swap_cross_trigger_hisorders":1,"linear-swap-api/v1/swap_tpsl_order":1,"linear-swap-api/v1/swap_cross_tpsl_order":1,"linear-swap-api/v1/swap_tpsl_cancel":1,"linear-swap-api/v1/swap_cross_tpsl_cancel":1,"linear-swap-api/v1/swap_tpsl_cancelall":1,"linear-swap-api/v1/swap_cross_tpsl_cancelall":1,"linear-swap-api/v1/swap_tpsl_openorders":1,"linear-swap-api/v1/swap_cross_tpsl_openorders":1,"linear-swap-api/v1/swap_tpsl_hisorders":1,"linear-swap-api/v1/swap_cross_tpsl_hisorders":1,"linear-swap-api/v1/swap_relation_tpsl_order":1,"linear-swap-api/v1/swap_cross_relation_tpsl_order":1,"linear-swap-api/v1/swap_track_order":1,"linear-swap-api/v1/swap_cross_track_order":1,"linear-swap-api/v1/swap_track_cancel":1,"linear-swap-api/v1/swap_cross_track_cancel":1,"linear-swap-api/v1/swap_track_cancelall":1,"linear-swap-api/v1/swap_cross_track_cancelall":1,"linear-swap-api/v1/swap_track_openorders":1,"linear-swap-api/v1/swap_cross_track_openorders":1,"linear-swap-api/v1/swap_track_hisorders":1,"linear-swap-api/v1/swap_cross_track_hisorders":1}}}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,maker:this.parseNumber("0.002"),taker:this.parseNumber("0.002")}},exceptions:{broad:{"contract is restricted of closing positions on API.  Please contact customer service":c,maintain:c},exact:{"bad-request":p,"base-date-limit-error":p,"api-not-support-temp-addr":o,timeout:m,"gateway-internal-error":h,"account-frozen-balance-insufficient-error":l,"invalid-amount":d,"order-limitorder-amount-min-error":d,"order-limitorder-amount-max-error":d,"order-marketorder-amount-min-error":d,"order-limitorder-price-min-error":d,"order-limitorder-price-max-error":d,"order-holding-limit-failed":d,"order-orderprice-precision-error":d,"order-etp-nav-price-max-error":d,"order-orderstate-error":u,"order-queryorder-invalid":u,"order-update-error":h,"api-signature-check-failed":a,"api-signature-not-valid":a,"base-record-invalid":u,"base-symbol-trade-disabled":f,"base-symbol-error":f,"system-maintenance":c,"invalid symbol":f,"symbol trade not open now":f,"require-symbol":f}},precisionMode:v,options:{defaultType:"spot",defaultSubType:"inverse",defaultNetwork:"ERC20",networks:{ETH:"erc20",TRX:"trc20",HRC20:"hrc20",HECO:"hrc20",HT:"hrc20",ALGO:"algo",OMNI:""},fetchOrdersByStatesMethod:"spot_private_get_v1_order_orders",createMarketBuyOrderRequiresPrice:!0,language:"en-US",broker:{id:"AA03022abc"},accountsByType:{spot:"pro",future:"futures"},typesByAccount:{pro:"spot",futures:"future"}},commonCurrencies:{GET:"Themis",GTC:"Game.com",HIT:"HitChain",HOT:"Hydro Protocol",PNT:"Penta",SBTC:"Super Bitcoin",BIFI:"Bitcoin File"}})}async fetchTime(e={}){const t=this.safeValue(this.options,"fetchTime",{}),i=this.safeString(this.options,"defaultType","spot");let s=this.safeString(t,"type",i);s=this.safeString(e,"type",s);let r="spotPublicGetV1CommonTimestamp";"future"!==s&&"swap"!==s||(r="contractPublicGetApiV1Timestamp");const a=await this[r](e);return this.safeInteger2(a,"data","ts")}parseTradingFee(e,t){const i=this.safeString(e,"symbol");return{info:e,symbol:this.safeSymbol(i,t),maker:this.safeNumber(e,"actualMakerRate"),taker:this.safeNumber(e,"actualTakerRate")}}async fetchTradingFee(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbols:i.id},r=await this.spotPrivateGetV2ReferenceTransactFeeRate(this.extend(s,t)),a=this.safeValue(r,"data",[]),n=this.safeValue(a,0,{});return this.parseTradingFee(n,i)}async fetchTradingLimits(e,t={}){await this.loadMarkets(),void 0===e&&(e=this.symbols);const i={};for(let s=0;s<e.length;s++){const r=e[s];i[r]=await this.fetchTradingLimitsById(this.marketId(r),t)}return i}async fetchTradingLimitsById(e,t={}){const i={symbol:e},s=await this.spotPublicGetV1CommonExchange(this.extend(i,t));return this.parseTradingLimits(this.safeValue(s,"data",{}))}parseTradingLimits(e,t,i={}){return{info:e,limits:{amount:{min:this.safeNumber(e,"limit-order-must-greater-than"),max:this.safeNumber(e,"limit-order-must-less-than")}}}}costToPrecision(e,t){return this.decimalToPrecision(t,w,this.markets[e].precision.cost,this.precisionMode)}async fetchMarkets(e={}){const t=this.safeValue(this.options,"fetchMarkets",{}),i=this.safeString(this.options,"defaultType","spot");let s=this.safeString(t,"type",i);if(s=this.safeString(e,"type",s),"spot"!==s&&"future"!==s&&"swap"!==s)throw new n(this.id+" does not support '"+s+"' type, set exchange.options['defaultType'] to 'spot', 'future', 'swap'");let r="spotPublicGetV1CommonSymbols";const a=this.omit(e,["type","subType"]),o="spot"===s,h="spot"!==s,c="future"===s,d="swap"===s;let u,l;if(h){const i=this.safeString(this.options,"defaultSubType","inverse");let s=this.safeString(t,"subType",i);if(s=this.safeString(e,"subType",s),"inverse"!==s&&"linear"!==s)throw new n(this.id+" does not support '"+s+"' type, set exchange.options['defaultSubType'] to 'inverse' or 'linear'");u="linear"===s,l="inverse"===s||c,c?r="contractPublicGetApiV1ContractContractInfo":d&&(l?r="contractPublicGetSwapApiV1SwapContractInfo":u&&(r="contractPublicGetLinearSwapApiV1SwapContractInfo"))}const f=await this[r](a),p=this.safeValue(f,"data");if(p.length<1)throw new g(this.id+" fetchMarkets() returned an empty response: "+this.json(p));const m=[];for(let e=0;e<p.length;e++){const t=p[e];let i,r,a,n;if(h)if(n=this.safeString(t,"contract_code"),d){const e=n.split("-");i=this.safeString(t,"symbol"),r=this.safeString(e,1),a=l?i:r}else c&&(i=this.safeString(t,"symbol"),r="USD",a=i);else i=this.safeString(t,"base-currency"),r=this.safeString(t,"quote-currency"),n=i+r;const f=this.safeCurrencyCode(i),g=this.safeCurrencyCode(r),y=this.safeCurrencyCode(a);let b,v=f+"/"+g;h&&(l?v+=":"+f:u&&(v+=":"+g),c&&(b=this.safeInteger(t,"delivery_time"),v+="-"+this.yymmdd(b)));const w=this.safeNumber(t,"contract_size");let k,_,S;o?(k=this.safeString(t,"price-precision"),k=this.parseNumber("1e-"+k),_=this.safeString(t,"amount-precision"),_=this.parseNumber("1e-"+_),S=this.safeString(t,"value-precision"),S=this.parseNumber("1e-"+S)):(k=this.safeNumber(t,"price_tick"),_=1);const O={amount:_,price:k,cost:S};let M,T;o&&(M="OMG"===f?0:.002,T="OMG"===f?0:.002);const x=this.safeNumber(t,"min-order-amt",Math.pow(10,-O.amount)),I=this.safeNumber(t,"max-order-amt"),A=this.safeNumber(t,"min-order-value",0);let C;o?C="online"===this.safeString(t,"state"):h&&(C=1===this.safeInteger(t,"contract_status")),m.push({id:n,symbol:v,base:f,quote:g,settle:y,baseId:i,quoteId:r,settleId:a,type:s,contract:h,spot:o,future:c,swap:d,linear:u,inverse:l,expiry:b,expiryDatetime:this.iso8601(b),contractSize:w,active:C,precision:O,taker:T,maker:M,limits:{amount:{min:x,max:I},price:{min:k,max:void 0},cost:{min:A,max:void 0},leverage:{max:this.safeNumber(t,"leverage-ratio",1),superMax:this.safeNumber(t,"super-margin-leverage-ratio",1)}},info:t})}return m}parseTicker(e,t){const i=this.safeString2(e,"symbol","contract_code"),s=this.safeSymbol(i,t),r=this.safeInteger(e,"ts");let a,n,o,h;"bid"in e&&(Array.isArray(e.bid)?(a=this.safeNumber(e.bid,0),n=this.safeNumber(e.bid,1)):(a=this.safeNumber(e,"bid"),n=this.safeValue(e,"bidSize"))),"ask"in e&&(Array.isArray(e.ask)?(o=this.safeNumber(e.ask,0),h=this.safeNumber(e.ask,1)):(o=this.safeNumber(e,"ask"),h=this.safeValue(e,"askSize")));const c=this.safeNumber(e,"open"),d=this.safeNumber(e,"close"),u=this.safeNumber(e,"amount"),l=this.safeNumber(e,"vol"),f=this.vwap(u,l);return this.safeTicker({symbol:s,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:a,bidVolume:n,ask:o,askVolume:h,vwap:f,open:c,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:u,quoteVolume:l,info:e},t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={};let r="symbol",a="spotPublicGetMarketDetailMerged";i.future?a="contractPublicGetMarketDetailMerged":i.swap&&(i.inverse?a="contractPublicGetSwapExMarketDetailMerged":i.linear&&(a="contractPublicGetLinearSwapExMarketDetailMerged"),r="contract_code"),s[r]=i.id;const n=await this[a](this.extend(s,t)),o=this.safeValue(n,"tick",{}),h=this.parseTicker(o,i),c=this.safeInteger(n,"ts");return h.timestamp=c,h.datetime=this.iso8601(c),h}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.safeValue(this.options,"fetchTickers",{}),s=this.safeString(this.options,"defaultType","spot");let r=this.safeString(i,"type",s);r=this.safeString(t,"type",r);let a="spotPublicGetMarketTickers";if("future"===r)a="contractPublicGetMarketDetailBatchMerged";else if("swap"===r){const e=this.safeString(this.options,"defaultSubType","inverse");let s=this.safeString(i,"subType",e);s=this.safeString(t,"subType",s),"inverse"===s?a="contractPublicGetSwapExMarketDetailBatchMerged":"linear"===s&&(a="contractPublicGetLinearSwapExMarketDetailBatchMerged")}const n=this.omit(t,["type","subType"]),o=await this[a](n),h=this.safeValue2(o,"data","ticks",[]),c=this.safeInteger(o,"ts"),d={};for(let e=0;e<h.length;e++){const t=this.parseTicker(h[e]),i=t.symbol;t.timestamp=c,t.datetime=this.iso8601(c),d[i]=t}return this.filterByArray(d,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={type:"step0"};let a="symbol",o="spotPublicGetMarketDepth";s.future?o="contractPublicGetMarketDepth":s.swap&&(s.inverse?o="contractPublicGetSwapExMarketDepth":s.linear&&(o="contractPublicGetLinearSwapExMarketDepth"),a="contract_code"),r[a]=s.id;const h=await this[o](this.extend(r,i));if("tick"in h){if(!h.tick)throw new f(this.id+" fetchOrderBook() returned empty response: "+this.json(h));const t=this.safeValue(h,"tick"),i=this.safeInteger(t,"ts",this.safeInteger(h,"ts")),s=this.parseOrderBook(t,e,i);return s.nonce=this.safeInteger(t,"version"),s}throw new n(this.id+" fetchOrderBook() returned unrecognized response: "+this.json(h))}parseTrade(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t),r=this.safeInteger2(e,"ts","created-at"),a=this.safeString(e,"order-id");let n=this.safeString(e,"direction"),o=this.safeString(e,"type");if(void 0!==o){const e=o.split("-");n=e[0],o=e[1]}const h=this.safeString(e,"role"),c=this.safeString(e,"price"),d=this.safeString2(e,"filled-amount","amount"),u=this.parseNumber(c),l=this.parseNumber(d),f=this.parseNumber(k.stringMul(c,d));let p,m=this.safeNumber(e,"filled-fees"),g=this.safeCurrencyCode(this.safeString(e,"fee-currency"));const y=this.safeNumber(e,"filled-points");void 0!==y&&(void 0!==m&&0!==m||(m=y,g=this.safeCurrencyCode(this.safeString(e,"fee-deduct-currency")))),void 0!==m&&(p={cost:m,currency:g});const b=this.safeString2(e,"trade-id","tradeId");return{id:this.safeString(e,"id",b),info:e,order:a,timestamp:r,datetime:this.iso8601(r),symbol:s,type:o,side:n,takerOrMaker:h,price:u,amount:l,cost:f,fee:p}}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();const a={"order-id":e},n=await this.spotPrivateGetV1OrderOrdersOrderIdMatchresults(this.extend(a,r));return this.parseTrades(n.data,void 0,i,s)}async fetchMyTrades(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==i&&(a.size=i),void 0!==t&&(a["start-time"]=t);const n=await this.spotPrivateGetV1OrderMatchresults(this.extend(a,s));return this.parseTrades(n.data,r,t,i)}async fetchTrades(e,t,i=1e3,s={}){await this.loadMarkets();const r=this.market(e),a={};let n="symbol",o="spotPublicGetMarketHistoryTrade";r.future?o="contractPublicGetMarketHistoryTrade":r.swap&&(r.inverse?o="contractPublicGetSwapExMarketHistoryTrade":r.linear&&(o="contractPublicGetLinearSwapExMarketHistoryTrade"),n="contract_code"),a[n]=r.id,void 0!==i&&(a.size=i);const h=await this[o](this.extend(a,s)),c=this.safeValue(h,"data");let d=[];for(let e=0;e<c.length;e++){const t=this.safeValue(c[e],"data",[]);for(let e=0;e<t.length;e++){const i=this.parseTrade(t[e],r);d.push(i)}}return d=this.sortBy(d,"timestamp"),this.filterBySymbolSinceLimit(d,e,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,"id"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"amount")]}async fetchOHLCV(e,t="1m",i,s=1e3,r={}){await this.loadMarkets();const a=this.market(e),n={period:this.timeframes[t]};let o="symbol";const h=this.safeString(r,"price");r=this.omit(r,"price");let c="spotPublicGetMarketHistoryKline";if(a.future)if("mark"===h)c="contractPublicGetIndexMarketHistoryMarkPriceKline";else if("index"===h)c="contractPublicGetIndexMarketHistoryIndex";else{if("premiumIndex"===h)throw new p(this.id+" "+a.type+" has no api endpoint for "+h+" kline data");c="contractPublicGetMarketHistoryKline"}else if(a.swap){if(a.inverse)if("mark"===h)c="contractPublicGetIndexMarketHistorySwapMarkPriceKline";else{if("index"===h)throw new p(this.id+" "+a.type+" has no api endpoint for "+h+" kline data");c="premiumIndex"===h?"contractPublicGetIndexMarketHistorySwapPremiumIndexKline":"contractPublicGetSwapExMarketHistoryKline"}else if(a.linear)if("mark"===h)c="contractPublicGetIndexMarketHistoryLinearSwapMarkPriceKline";else{if("index"===h)throw new p(this.id+" "+a.type+" has no api endpoint for "+h+" kline data");c="premiumIndex"===h?"contractPublicGetIndexMarketHistoryLinearSwapPremiumIndexKline":"contractPublicGetLinearSwapExMarketHistoryKline"}o="contract_code"}n[o]=a.id,void 0!==s&&(n.size=s);const d=await this[c](this.extend(n,r)),u=this.safeValue(d,"data",[]);return this.parseOHLCVs(u,a,t,i,s)}async fetchIndexOHLCV(e,t="1m",i,s,r={}){return await this.fetchOHLCV(e,t,i,s,this.extend({price:"index"},r))}async fetchMarkOHLCV(e,t="1m",i,s,r={}){return await this.fetchOHLCV(e,t,i,s,this.extend({price:"mark"},r))}async fetchPremiumIndexOHLCV(e,t="1m",i,s,r={}){return await this.fetchOHLCV(e,t,i,s,this.extend({price:"premiumIndex"},r))}async fetchAccounts(e={}){return await this.loadMarkets(),(await this.spotPrivateGetV1AccountAccounts(e)).data}async fetchAccountIdByType(e,t={}){const i=await this.loadAccounts(),s=this.safeValue(t,"account-id");if(void 0!==s)return s;const r=this.indexBy(i,"type"),a=this.safeValue(i,0,{}),n=this.safeValue(r,e,a);return this.safeString(n,"id")}async fetchCurrencies(e={}){const t=await this.spotPublicGetV2ReferenceCurrencies(),i=this.safeValue(t,"data",[]),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currency"),a=this.safeCurrencyCode(r),n=this.safeValue(t,"chains",[]),o={},h="normal"===this.safeString(t,"instStatus");let c,d,u,l;for(let e=0;e<n.length;e++){const t=n[e],i=this.safeString(t,"chain");let s=this.safeString(t,"baseChainProtocol");const a="h"+r;void 0===s&&(s=a===i?"ERC20":this.safeString(t,"displayName"));const h=this.safeNetwork(s);u=this.safeNumber(t,"minWithdrawAmt"),l=this.safeNumber(t,"maxWithdrawAmt");const f=this.safeString(t,"withdrawStatus"),p=this.safeString(t,"depositStatus"),m="allowed"===f&&"allowed"===p;let g=this.safeString(t,"withdrawPrecision");void 0!==g&&(g=this.parseNumber("1e-"+g),d=void 0===d?g:Math.max(g,d)),c=this.safeNumber(t,"transactFeeWithdraw"),o[h]={info:t,id:i,network:h,limits:{withdraw:{min:u,max:l}},active:m,fee:c,precision:g}}const f=Object.keys(o).length;s[a]={info:t,code:a,id:r,active:h,fee:f<=1?c:void 0,name:void 0,limits:{amount:{min:void 0,max:void 0},withdraw:{min:f<=1?u:void 0,max:f<=1?l:void 0}},precision:d,networks:o}}return s}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeValue(this.options,"fetchTickers",{}),i=this.safeString(this.options,"defaultType","spot");let s=this.safeString(t,"type",i);s=this.safeString(e,"type",s),e=this.omit(e,"type");const r={};let a;const n="spot"===s,o="future"===s,h="swap"===s;if(n){await this.loadAccounts();const t=await this.fetchAccountIdByType(s,e);r["account-id"]=t,a="spotPrivateGetV1AccountAccountsAccountIdBalance"}else if(o)a="contractPrivatePostApiV1ContractAccountInfo";else if(h){const i=this.safeString(this.options,"defaultSubType","inverse");let s=this.safeString(t,"subType",i);s=this.safeString(e,"subType",s),"inverse"===s?a="contractPrivatePostSwapApiV1SwapAccountInfo":"linear"===s&&(a="contractPrivatePostLinearSwapApiV1SwapAccountInfo")}const c=await this[a](this.extend(r,e)),d={info:c},u=this.safeValue(c,"data");if(n){const e=this.safeValue(u,"list",[]);for(let t=0;t<e.length;t++){const i=e[t],s=this.safeString(i,"currency"),r=this.safeCurrencyCode(s);let a;a=r in d?d[r]:this.account(),"trade"===i.type&&(a.free=this.safeString(i,"balance")),"frozen"===i.type&&(a.used=this.safeString(i,"balance")),d[r]=a}}else if(o)for(let e=0;e<u.length;e++){const t=u[e],i=this.safeString(t,"symbol"),s=this.safeCurrencyCode(i),r=this.account();r.free=this.safeString(t,"margin_available"),r.used=this.safeString(t,"margin_frozen"),d[s]=r}else if(h){for(let e=0;e<u.length;e++){const t=u[e],i=this.safeString2(t,"contract_code","margin_account"),s=this.safeSymbol(i),r=this.account();r.free=this.safeString(t,"margin_available"),r.used=this.safeString(t,"margin_frozen");const a=this.safeString2(t,"margin_asset","symbol"),n={};n[this.safeCurrencyCode(a)]=r,d[s]=this.parseBalance(n)}return d}return this.parseBalance(d)}async fetchOrdersByStates(e,t,i,s,r={}){await this.loadMarkets();const a={states:e};let n;void 0!==t&&(n=this.market(t),a.symbol=n.id);const o=this.safeString(this.options,"fetchOrdersByStatesMethod","spot_private_get_v1_order_orders"),h=await this[o](this.extend(a,r));return this.parseOrders(h.data,n,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={};let r="spotPrivateGetV1OrderOrdersOrderId";void 0!==this.safeString(i,"clientOrderId")?r="spotPrivateGetV1OrderOrdersGetClientOrder":s["order-id"]=e;const a=await this[r](this.extend(s,i)),n=this.safeValue(a,"data");return this.parseOrder(n)}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByStates("pre-submitted,submitted,partial-filled,filled,partial-canceled,canceled",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStates("filled,partial-canceled,canceled",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.symbol=a.id);let n=this.safeString(s,"account-id");if(void 0===n){await this.loadAccounts();for(let e=0;e<this.accounts.length;e++){const t=this.accounts[e];if("spot"===t.type&&(n=this.safeString(t,"id"),void 0!==n))break}}r["account-id"]=n,void 0!==i&&(r.size=i);const o=this.omit(s,"account-id"),h=await this.spotPrivateGetV1OrderOpenOrders(this.extend(r,o)),c=this.safeValue(h,"data",[]);return this.parseOrders(c,a,t,i)}parseOrderStatus(e){return this.safeString({"partial-filled":"open","partial-canceled":"canceled",filled:"closed",canceled:"canceled",submitted:"open"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id");let s,r,a;if("type"in e){const t=e.type.split("-");s=t[0],r=t[1],a=this.parseOrderStatus(this.safeString(e,"state"))}const n=this.safeString(e,"symbol");t=this.safeMarket(n,t);const o=this.safeSymbol(n,t),h=this.safeInteger(e,"created-at"),c=this.safeString(e,"client-order-id"),d=this.safeString(e,"amount"),u=this.safeString2(e,"filled-amount","field-amount"),l=this.safeString(e,"price"),f=this.safeString2(e,"filled-cash-amount","field-cash-amount"),p=this.safeNumber2(e,"filled-fees","field-fees");let m;if(void 0!==p){let e;void 0!==t&&(e="sell"===s?t.quote:t.base),m={cost:p,currency:e}}return this.safeOrder2({info:e,id:i,clientOrderId:c,timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:void 0,symbol:o,type:r,timeInForce:void 0,postOnly:void 0,side:s,price:l,stopPrice:void 0,average:void 0,cost:f,amount:d,filled:u,remaining:void 0,status:a,fee:m,trades:void 0},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),await this.loadAccounts();const n=this.market(e),o={"account-id":await this.fetchAccountIdByType(n.type),symbol:n.id,type:i+"-"+t},h=this.safeString2(a,"clientOrderId","client-order-id");if(void 0===h){const e=this.safeValue(this.options,"broker",{}),t=this.safeString(e,"id");o["client-order-id"]=t+this.uuid()}else o["client-order-id"]=h;if(a=this.omit(a,["clientOrderId","client-order-id"]),"market"===t&&"buy"===i)if(this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new d(this.id+" market buy order requires price argument to calculate cost (total amount of quote currency to spend for buying, amount * price). To switch off this warning exception and specify cost in the amount argument, set .options['createMarketBuyOrderRequiresPrice'] = false. Make sure you know what you're doing.");o.amount=this.costToPrecision(e,parseFloat(s)*parseFloat(r))}else o.amount=this.costToPrecision(e,s);else o.amount=this.amountToPrecision(e,s);"limit"!==t&&"ioc"!==t&&"limit-maker"!==t&&"stop-limit"!==t&&"stop-limit-fok"!==t||(o.price=this.priceToPrecision(e,r));const c=await this.spotPrivatePostV1OrderOrdersPlace(this.extend(o,a)),u=this.milliseconds();return{info:c,id:this.safeString(c,"data"),timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:void 0,status:void 0,symbol:e,type:t,side:i,price:r,amount:s,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0}}async cancelOrder(e,t,i={}){const s=this.safeString2(i,"client-order-id","clientOrderId"),r={};let a="spotPrivatePostV1OrderOrdersOrderIdSubmitcancel";void 0===s?r["order-id"]=e:(r["client-order-id"]=s,a="spotPrivatePostV1OrderOrdersSubmitCancelClientOrder",i=this.omit(i,["client-order-id","clientOrderId"]));const n=await this[a](this.extend(r,i));return this.extend(this.parseOrder(n),{id:e,status:"canceled"})}async cancelOrders(e,t,i={}){await this.loadMarkets();const s=this.safeValue2(i,"clientOrderIds","client-order-ids");i=this.omit(i,["clientOrderIds","client-order-ids"]);const r={};return void 0===s?r["order-ids"]=e:r["client-order-ids"]=s,await this.spotPrivatePostV1OrderOrdersBatchcancel(this.extend(r,i))}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s;return void 0!==e&&(s=this.market(e),i.symbol=s.id),await this.spotPrivatePostV1OrderOrdersBatchCancelOpenOrders(this.extend(i,t))}currencyToPrecision(e,t){return this.decimalToPrecision(t,0,this.currencies[e].precision)}safeNetwork(e){const t=e.length-1;return"1"===e[t]&&(e=e.slice(0,t)),this.safeString({},e,e)}parseDepositAddress(e,t){const i=this.safeString(e,"address");let s=this.safeString(e,"addressTag");""===s&&(s=void 0);const r=this.safeString(e,"currency");t=this.safeCurrency(r,t);const a=this.safeCurrencyCode(r,t),n=this.safeString(e,"chain"),o=this.safeValue(t,"networks",{}),h=this.indexBy(o,"id"),c=this.safeValue(h,n,n),d=this.safeString(c,"network");return this.checkAddress(i),{currency:a,address:i,tag:s,network:d,info:e}}async fetchDepositAddressesByNetwork(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.spotPrivateGetV2AccountDepositAddress(this.extend(i,t)),r=this.safeValue(s,"data",[]),a=this.parseDepositAddresses(r,[e],!1);return this.indexBy(a,"network")}async fetchDepositAddress(e,t={}){const i=this.safeStringUpper(t,"network"),s=this.safeValue(this.options,"networks",{}),r=this.safeStringUpper(s,i,i);t=this.omit(t,"network");const a=await this.fetchDepositAddressesByNetwork(e,t);let n;if(void 0===r){if(n=this.safeValue(a,e),void 0===n){const t=this.safeString(s,e,e);if(n=this.safeValue(a,t),void 0===n){const t=this.safeString(this.options,"defaultNetwork","ERC20");if(n=this.safeValue(a,t),void 0===n){const t=Object.values(a);if(n=this.safeValue(t,0),void 0===n)throw new y(this.id+" fetchDepositAddress() cannot find deposit address for "+e)}}}return n}if(n=this.safeValue(a,r),void 0===n)throw new y(this.id+" fetchDepositAddress() cannot find "+r+" deposit address for "+e);return n}async fetchDeposits(e,t,i,s={}){let r;(void 0===i||i>100)&&(i=100),await this.loadMarkets(),void 0!==e&&(r=this.currency(e));const a={type:"deposit",from:0};void 0!==r&&(a.currency=r.id),void 0!==i&&(a.size=i);const n=await this.spotPrivateGetV1QueryDepositWithdraw(this.extend(a,s));return this.parseTransactions(n.data,r,t,i)}async fetchWithdrawals(e,t,i,s={}){let r;(void 0===i||i>100)&&(i=100),await this.loadMarkets(),void 0!==e&&(r=this.currency(e));const a={type:"withdraw",from:0};void 0!==r&&(a.currency=r.id),void 0!==i&&(a.size=i);const n=await this.spotPrivateGetV1QueryDepositWithdraw(this.extend(a,s));return this.parseTransactions(n.data,r,t,i)}parseTransaction(e,t){const i=this.safeInteger(e,"created-at"),s=this.safeInteger(e,"updated-at"),r=this.safeCurrencyCode(this.safeString(e,"currency"));let a=this.safeString(e,"type");"withdraw"===a&&(a="withdrawal");const n=this.parseTransactionStatus(this.safeString(e,"state")),o=this.safeString(e,"address-tag");let h=this.safeNumber(e,"fee");return void 0!==h&&(h=Math.abs(h)),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"tx-hash"),timestamp:i,datetime:this.iso8601(i),address:this.safeString(e,"address"),tag:o,type:a,amount:this.safeNumber(e,"amount"),currency:r,status:n,updated:s,fee:{currency:r,cost:h,rate:void 0}}}parseTransactionStatus(e){return this.safeString({unknown:"failed",confirming:"pending",confirmed:"ok",safe:"ok",orphan:"failed",submitted:"pending",canceled:"canceled",reexamine:"pending",reject:"failed",pass:"pending","wallet-reject":"failed","confirm-error":"failed",repealed:"failed","wallet-transfer":"pending","pre-transfer":"pending"},e,e)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),await this.loadMarkets(),this.checkAddress(i);const a=this.currency(e),n={address:i,amount:t,currency:a.id.toLowerCase()};void 0!==s&&(n["addr-tag"]=s);const o=this.safeValue(this.options,"networks",{});let h=this.safeStringUpper(r,"network");h=this.safeStringLower(o,h,h),void 0!==h&&(n.chain="erc20"===h?a.id+h:h+a.id,r=this.omit(r,"network"));const c=await this.spotPrivatePostV1DwWithdrawApiCreate(this.extend(n,r));return{info:c,id:this.safeString(c,"data")}}parseTransfer(e,t){return{info:e,id:this.safeString(e,"data"),timestamp:void 0,datetime:void 0,currency:this.safeCurrencyCode(void 0,t),amount:void 0,fromAccount:void 0,toAccount:void 0,status:void 0}}async transfer(e,t,i,s,r={}){await this.loadMarkets();const a=this.currency(e);let o=this.safeString(r,"type");if(void 0===o){const e=this.safeValue(this.options,"accountsByType",{});i=i.toLowerCase(),s=s.toLowerCase();const t=this.safeString(e,i),r=this.safeString(e,s);if(void 0===t){const t=Object.keys(e);throw new n(this.id+" fromAccount must be one of "+t.join(", "))}if(void 0===r){const t=Object.keys(e);throw new n(this.id+" toAccount must be one of "+t.join(", "))}o=i+"-to-"+s}const h={currency:a.id,amount:parseFloat(this.currencyToPrecision(e,t)),type:o},c=await this.spotPrivatePostFuturesTransfer(this.extend(h,r)),d=this.parseTransfer(c,a);return this.extend(d,{amount:t,currency:e,fromAccount:i,toAccount:s})}async fetchBorrowRatesPerSymbol(e={}){await this.loadMarkets();const t=await this.spotPrivateGetV1MarginLoanInfo(e),i=this.milliseconds(),s=this.safeValue(t,"data"),r={info:t};for(let e=0;e<s.length;e++){const t=s[e],a=this.safeValue(t,"currencies"),n={};for(let e=0;e<a.length;e++){const t=a[e],s=this.safeString(t,"currency"),r=this.safeCurrencyCode(s,"currency");n[r]={currency:r,rate:this.safeNumber(t,"actual-rate"),span:864e5,timestamp:i,datetime:this.iso8601(i)}}r[this.markets_by_id[this.safeString(t,"symbol")].symbol]=n}return r}async fetchBorrowRates(e={}){await this.loadMarkets();const t=await this.spotPrivateGetV1MarginLoanInfo(e),i=this.milliseconds(),s=this.safeValue(t,"data"),r={};for(let e=0;e<s.length;e++){const t=s[e],a=this.safeValue(t,"currencies");for(let e=0;e<a.length;e++){const t=a[e],s=this.safeString(t,"currency"),n=this.safeCurrencyCode(s,"currency");r[n]={currency:n,rate:this.safeNumber(t,"actual-rate"),span:864e5,timestamp:i,datetime:this.iso8601(i),info:void 0}}}return r}sign(e,t="public",i="GET",s={},r,a){let n="/";const o=this.omit(s,this.extractParams(e));if("string"==typeof t){if("market"===t?n+=t:"public"===t||"private"===t?n+=this.version:"v2Public"!==t&&"v2Private"!==t||(n+="v2"),n+="/"+this.implodeParams(e,s),"private"===t||"v2Private"===t){this.checkRequiredCredentials();const e=this.ymdhms(this.milliseconds(),"T");let t={SignatureMethod:"HmacSHA256",SignatureVersion:"2",AccessKeyId:this.apiKey,Timestamp:e};"POST"!==i&&(t=this.extend(t,o)),t=this.keysort(t);let s=this.urlencode(t);const h=[i,this.hostname,n,s].join("\n"),c=this.hmac(this.encode(h),this.encode(this.secret),"sha256","base64");s+="&"+this.urlencode({Signature:c}),n+="?"+s,"POST"===i?(a=this.json(o),r={"Content-Type":"application/json"}):r={"Content-Type":"application/x-www-form-urlencoded"}}else Object.keys(o).length&&(n+="?"+this.urlencode(o));n=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+n}else{const h=this.safeString(t,0),c=this.safeString(t,1);n+=this.implodeParams(e,s);const d=this.safeString(this.urls.hostnames,h);if("public"===c)Object.keys(o).length&&(n+="?"+this.urlencode(o));else if("private"===c){this.checkRequiredCredentials();const e=this.ymdhms(this.milliseconds(),"T");let t={SignatureMethod:"HmacSHA256",SignatureVersion:"2",AccessKeyId:this.apiKey,Timestamp:e};"POST"!==i&&(t=this.extend(t,o)),t=this.keysort(t);let s=this.urlencode(t);const h=[i,d,n,s].join("\n"),c=this.hmac(this.encode(h),this.encode(this.secret),"sha256","base64");s+="&"+this.urlencode({Signature:c}),n+="?"+s,"POST"===i?(a=this.json(o),r={"Content-Type":"application/json"}):r={"Content-Type":"application/x-www-form-urlencoded"}}n=this.implodeParams(this.urls.api[h],{hostname:d})+n}return{url:n,method:i,body:a,headers:r}}calculateRateLimiterCost(e,t,i,s,r={},a={}){return this.safeInteger(r,"cost",1)}handleErrors(e,t,i,s,r,a,o,h,c){if(void 0!==o&&"status"in o&&"error"===this.safeString(o,"status")){const e=this.safeString(o,"err-code"),t=this.id+" "+a;this.throwBroadlyMatchedException(this.exceptions.broad,a,t),this.throwExactlyMatchedException(this.exceptions.exact,e,t);const i=this.safeString(o,"err-msg");throw this.throwExactlyMatchedException(this.exceptions.exact,i,t),new n(t)}}async fetchFundingRateHistory(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchFundingRateHistory() requires a symbol argument");await this.loadMarkets();const a=this.market(e),n={contract_code:a.id};let o;if(a.inverse)o="contractPublicGetSwapApiV1SwapHistoricalFundingRate";else{if(!a.linear)throw new b(this.id+" fetchFundingRateHistory() supports inverse and linear swaps only");o="contractPublicGetLinearSwapApiV1SwapHistoricalFundingRate"}const h=await this[o](this.extend(n,s)),c=this.safeValue(h,"data"),d=this.safeValue(c,"data"),u=[];for(let e=0;e<d.length;e++){const t=d[e],i=this.safeString(t,"contract_code"),s=this.safeSymbol(i),r=this.safeString(t,"funding_time");u.push({info:t,symbol:s,fundingRate:this.safeNumber(t,"funding_rate"),timestamp:r,datetime:this.iso8601(r)})}const l=this.sortBy(u,"timestamp");return this.filterBySymbolSinceLimit(l,e,t,i)}parseFundingRate(e,t){const i=this.safeNumber(e,"estimated_rate"),s=this.safeInteger(e,"funding_time"),r=this.safeInteger(e,"next_funding_time"),a=this.safeString(e,"contract_code");return{info:e,symbol:this.safeSymbol(a,t),markPrice:void 0,indexPrice:void 0,interestRate:void 0,estimatedSettlePrice:void 0,timestamp:void 0,datetime:void 0,previousFundingRate:this.safeNumber(e,"funding_rate"),nextFundingRate:i,previousFundingTimestamp:s,nextFundingTimestamp:r,previousFundingDatetime:this.iso8601(s),nextFundingDatetime:this.iso8601(r)}}async fetchFundingRate(e,t={}){await this.loadMarkets();const i=this.market(e);let s;if(i.inverse)s="contractPublicGetSwapApiV1SwapFundingRate";else{if(!i.linear)throw new b(this.id+" fetchFundingRateHistory() supports inverse and linear swaps only");s="contractPublicGetLinearSwapApiV1SwapFundingRate"}const r={contract_code:i.id},a=await this[s](this.extend(r,t)),n=this.safeValue(a,"data",{});return this.parseFundingRate(n,i)}}},54072:(e,t,i)=>{"use strict";const s=i(48819),{AuthenticationError:r,ExchangeError:a,PermissionDenied:n,ExchangeNotAvailable:o,OnMaintenance:h,InvalidOrder:c,OrderNotFound:d,InsufficientFunds:u,ArgumentsRequired:l,BadSymbol:f,BadRequest:p,RequestTimeout:m,NetworkError:g}=i(73449),{TRUNCATE:y}=i(62115),b=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"huobijp",name:"Huobi Japan",countries:["JP"],rateLimit:100,userAgent:this.userAgents.chrome39,certified:!1,version:"v1",accounts:void 0,accountsById:void 0,hostname:"api-cloud.huobi.co.jp",pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,cancelOrders:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!1,fetchDepositAddressesByNetwork:!1,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchPremiumIndexOHLCV:!1,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingLimits:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","4h":"4hour","1d":"1day","1w":"1week","1M":"1mon","1y":"1year"},urls:{logo:"https://user-images.githubusercontent.com/1294454/85734211-85755480-b705-11ea-8b35-0b7f1db33a2f.jpg",api:{market:"https://{hostname}",public:"https://{hostname}",private:"https://{hostname}",v2Public:"https://{hostname}",v2Private:"https://{hostname}"},www:"https://www.huobi.co.jp",referral:"https://www.huobi.co.jp/register/?invite_code=znnq3",doc:"https://api-doc.huobi.co.jp",fees:"https://www.huobi.co.jp/support/fee"},api:{v2Public:{get:{"reference/currencies":1,"market-status":1}},v2Private:{get:{"account/ledger":1,"account/withdraw/quota":1,"account/withdraw/address":1,"account/deposit/address":1,"account/repayment":5,"reference/transact-fee-rate":1,"account/asset-valuation":.2,"point/account":5,"sub-user/user-list":1,"sub-user/user-state":1,"sub-user/account-list":1,"sub-user/deposit-address":1,"sub-user/query-deposit":1,"user/api-key":1,"user/uid":1,"algo-orders/opening":1,"algo-orders/history":1,"algo-orders/specific":1,"c2c/offers":1,"c2c/offer":1,"c2c/transactions":1,"c2c/repayment":1,"c2c/account":1,"etp/reference":1,"etp/transactions":5,"etp/transaction":5,"etp/rebalance":1,"etp/limit":1},post:{"account/transfer":1,"account/repayment":5,"point/transfer":5,"sub-user/management":1,"sub-user/creation":1,"sub-user/tradable-market":1,"sub-user/transferability":1,"sub-user/api-key-generation":1,"sub-user/api-key-modification":1,"sub-user/api-key-deletion":1,"sub-user/deduct-mode":1,"algo-orders":1,"algo-orders/cancel-all-after":1,"algo-orders/cancellation":1,"c2c/offer":1,"c2c/cancellation":1,"c2c/cancel-all":1,"c2c/repayment":1,"c2c/transfer":1,"etp/creation":5,"etp/redemption":5,"etp/{transactId}/cancel":10,"etp/batch-cancel":50}},market:{get:{"history/kline":1,"detail/merged":1,depth:1,trade:1,"history/trade":1,detail:1,tickers:1,etp:1}},public:{get:{"common/symbols":1,"common/currencys":1,"common/timestamp":1,"common/exchange":1,"settings/currencys":1}},private:{get:{"account/accounts":.2,"account/accounts/{id}/balance":.2,"account/accounts/{sub-uid}":1,"account/history":4,"cross-margin/loan-info":1,"margin/loan-info":1,"fee/fee-rate/get":1,"order/openOrders":.4,"order/orders":.4,"order/orders/{id}":.4,"order/orders/{id}/matchresults":.4,"order/orders/getClientOrder":.4,"order/history":1,"order/matchresults":1,"query/deposit-withdraw":1,"margin/loan-orders":.2,"margin/accounts/balance":.2,"cross-margin/loan-orders":1,"cross-margin/accounts/balance":1,"points/actions":1,"points/orders":1,"subuser/aggregate-balance":10,"stable-coin/exchange_rate":1,"stable-coin/quote":1},post:{"account/transfer":1,"futures/transfer":1,"order/batch-orders":.4,"order/orders/place":.2,"order/orders/submitCancelClientOrder":.2,"order/orders/batchCancelOpenOrders":.4,"order/orders/{id}/submitcancel":.2,"order/orders/batchcancel":.4,"dw/withdraw/api/create":1,"dw/withdraw-virtual/{id}/cancel":1,"dw/transfer-in/margin":10,"dw/transfer-out/margin":10,"margin/orders":10,"margin/orders/{id}/repay":10,"cross-margin/transfer-in":1,"cross-margin/transfer-out":1,"cross-margin/orders":1,"cross-margin/orders/{id}/repay":1,"stable-coin/exchange":1,"subuser/transfer":10}}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,maker:this.parseNumber("0.002"),taker:this.parseNumber("0.002")}},exceptions:{broad:{"contract is restricted of closing positions on API.  Please contact customer service":h,maintain:h},exact:{"bad-request":p,"base-date-limit-error":p,"api-not-support-temp-addr":n,timeout:m,"gateway-internal-error":o,"account-frozen-balance-insufficient-error":u,"invalid-amount":c,"order-limitorder-amount-min-error":c,"order-limitorder-amount-max-error":c,"order-marketorder-amount-min-error":c,"order-limitorder-price-min-error":c,"order-limitorder-price-max-error":c,"order-holding-limit-failed":c,"order-orderprice-precision-error":c,"order-etp-nav-price-max-error":c,"order-orderstate-error":d,"order-queryorder-invalid":d,"order-update-error":o,"api-signature-check-failed":r,"api-signature-not-valid":r,"base-record-invalid":d,"base-symbol-trade-disabled":f,"base-symbol-error":f,"system-maintenance":h,"invalid symbol":f,"symbol trade not open now":f}},options:{defaultNetwork:"ERC20",networks:{ETH:"erc20",TRX:"trc20",HRC20:"hrc20",HECO:"hrc20",HT:"hrc20",ALGO:"algo",OMNI:""},fetchOrdersByStatesMethod:"private_get_order_orders",fetchOpenOrdersMethod:"fetch_open_orders_v1",createMarketBuyOrderRequiresPrice:!0,fetchMarketsMethod:"publicGetCommonSymbols",fetchBalanceMethod:"privateGetAccountAccountsIdBalance",createOrderMethod:"privatePostOrderOrdersPlace",language:"en-US",broker:{id:"AA03022abc"}},commonCurrencies:{GET:"Themis",GTC:"Game.com",HIT:"HitChain",HOT:"Hydro Protocol",PNT:"Penta",SBTC:"Super Bitcoin",BIFI:"Bitcoin File"}})}async fetchTime(e={}){const t=await this.publicGetCommonTimestamp(e);return this.safeInteger(t,"data")}async fetchTradingLimits(e,t={}){await this.loadMarkets(),void 0===e&&(e=this.symbols);const i={};for(let s=0;s<e.length;s++){const r=e[s];i[r]=await this.fetchTradingLimitsById(this.marketId(r),t)}return i}async fetchTradingLimitsById(e,t={}){const i={symbol:e},s=await this.publicGetCommonExchange(this.extend(i,t));return this.parseTradingLimits(this.safeValue(s,"data",{}))}parseTradingLimits(e,t,i={}){return{info:e,limits:{amount:{min:this.safeNumber(e,"limit-order-must-greater-than"),max:this.safeNumber(e,"limit-order-must-less-than")}}}}costToPrecision(e,t){return this.decimalToPrecision(t,y,this.markets[e].precision.cost,this.precisionMode)}async fetchMarkets(e={}){const t=this.options.fetchMarketsMethod,i=await this[t](e),s=this.safeValue(i,"data");if(s.length<1)throw new g(this.id+" publicGetCommonSymbols returned empty response: "+this.json(s));const r=[];for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"base-currency"),a=this.safeString(t,"quote-currency"),n=i+a,o=this.safeCurrencyCode(i),h=this.safeCurrencyCode(a),c=o+"/"+h,d={amount:this.safeInteger(t,"amount-precision"),price:this.safeInteger(t,"price-precision"),cost:this.safeInteger(t,"value-precision")},u="OMG"===o?0:.002,l="OMG"===o?0:.002,f=this.safeNumber(t,"min-order-amt",Math.pow(10,-d.amount)),p=this.safeNumber(t,"max-order-amt"),m=this.safeNumber(t,"min-order-value",0),g="online"===this.safeString(t,"state");r.push({id:n,symbol:c,base:o,quote:h,baseId:i,quoteId:a,type:"spot",spot:!0,active:g,precision:d,taker:l,maker:u,limits:{amount:{min:f,max:p},price:{min:Math.pow(10,-d.price),max:void 0},cost:{min:m,max:void 0},leverage:{max:this.safeNumber(t,"leverage-ratio",1),superMax:this.safeNumber(t,"super-margin-leverage-ratio",1)}},info:t})}return r}parseTicker(e,t){const i=this.safeSymbol(void 0,t),s=this.safeInteger(e,"ts");let r,a,n,o;"bid"in e&&(Array.isArray(e.bid)?(r=this.safeNumber(e.bid,0),a=this.safeNumber(e.bid,1)):(r=this.safeNumber(e,"bid"),a=this.safeValue(e,"bidSize"))),"ask"in e&&(Array.isArray(e.ask)?(n=this.safeNumber(e.ask,0),o=this.safeNumber(e.ask,1)):(n=this.safeNumber(e,"ask"),o=this.safeValue(e,"askSize")));const h=this.safeNumber(e,"open"),c=this.safeNumber(e,"close"),d=this.safeNumber(e,"amount"),u=this.safeNumber(e,"vol"),l=this.vwap(d,u);return this.safeTicker({symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:r,bidVolume:a,ask:n,askVolume:o,vwap:l,open:h,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:d,quoteVolume:u,info:e},t)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id,type:"step0"},r=await this.marketGetDepth(this.extend(s,i));if("tick"in r){if(!r.tick)throw new f(this.id+" fetchOrderBook() returned empty response: "+this.json(r));const t=this.safeValue(r,"tick"),i=this.safeInteger(t,"ts",this.safeInteger(r,"ts")),s=this.parseOrderBook(t,e,i);return s.nonce=this.safeInteger(t,"version"),s}throw new a(this.id+" fetchOrderBook() returned unrecognized response: "+this.json(r))}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.marketGetDetailMerged(this.extend(s,t)),a=this.parseTicker(r.tick,i),n=this.safeInteger(r,"ts");return a.timestamp=n,a.datetime=this.iso8601(n),a}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.marketGetTickers(t),s=this.safeValue(i,"data"),r=this.safeInteger(i,"ts"),a={};for(let e=0;e<s.length;e++){const t=this.safeString(s[e],"symbol"),i=this.safeMarket(t),n=i.symbol,o=this.parseTicker(s[e],i);o.timestamp=r,o.datetime=this.iso8601(r),a[n]=o}return this.filterByArray(a,"symbol",e)}parseTrade(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t),r=this.safeInteger2(e,"ts","created-at"),a=this.safeString(e,"order-id");let n=this.safeString(e,"direction"),o=this.safeString(e,"type");if(void 0!==o){const e=o.split("-");n=e[0],o=e[1]}const h=this.safeString(e,"role"),c=this.safeString(e,"price"),d=this.safeString2(e,"filled-amount","amount"),u=this.parseNumber(c),l=this.parseNumber(d),f=this.parseNumber(b.stringMul(c,d));let p,m=this.safeNumber(e,"filled-fees"),g=this.safeCurrencyCode(this.safeString(e,"fee-currency"));const y=this.safeNumber(e,"filled-points");void 0!==y&&(void 0!==m&&0!==m||(m=y,g=this.safeCurrencyCode(this.safeString(e,"fee-deduct-currency")))),void 0!==m&&(p={cost:m,currency:g});const v=this.safeString2(e,"trade-id","tradeId");return{id:this.safeString(e,"id",v),info:e,order:a,timestamp:r,datetime:this.iso8601(r),symbol:s,type:o,side:n,takerOrMaker:h,price:u,amount:l,cost:f,fee:p}}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();const a={id:e},n=await this.privateGetOrderOrdersIdMatchresults(this.extend(a,r));return this.parseTrades(n.data,void 0,i,s)}async fetchMyTrades(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==i&&(a.size=i),void 0!==t&&(a["start-time"]=t);const n=await this.privateGetOrderMatchresults(this.extend(a,s));return this.parseTrades(n.data,r,t,i)}async fetchTrades(e,t,i=1e3,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.size=i);const n=await this.marketGetHistoryTrade(this.extend(a,s)),o=this.safeValue(n,"data");let h=[];for(let e=0;e<o.length;e++){const t=this.safeValue(o[e],"data",[]);for(let e=0;e<t.length;e++){const i=this.parseTrade(t[e],r);h.push(i)}}return h=this.sortBy(h,"timestamp"),this.filterBySymbolSinceLimit(h,e,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,"id"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"amount")]}async fetchOHLCV(e,t="1m",i,s=1e3,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id,period:this.timeframes[t]};void 0!==s&&(n.size=s);const o=await this.marketGetHistoryKline(this.extend(n,r)),h=this.safeValue(o,"data",[]);return this.parseOHLCVs(h,a,t,i,s)}async fetchAccounts(e={}){return await this.loadMarkets(),(await this.privateGetAccountAccounts(e)).data}async fetchCurrencies(e={}){const t={language:this.options.language},i=await this.publicGetSettingsCurrencys(this.extend(t,e)),s=this.safeValue(i,"data"),r={};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeValue(t,"name"),a=this.safeInteger(t,"withdraw-precision"),n=this.safeCurrencyCode(i),o=this.safeValue(t,"deposit-enabled"),h=this.safeValue(t,"withdraw-enabled"),c=this.safeValue(t,"country-disabled"),d=this.safeValue(t,"visible",!1),u=this.safeString(t,"state"),l=d&&o&&h&&"online"===u&&!c,f=this.safeString(t,"display-name");r[n]={id:i,code:n,type:"crypto",name:f,active:l,fee:void 0,precision:a,limits:{amount:{min:Math.pow(10,-a),max:Math.pow(10,a)},deposit:{min:this.safeNumber(t,"deposit-min-amount"),max:Math.pow(10,a)},withdraw:{min:this.safeNumber(t,"withdraw-min-amount"),max:Math.pow(10,a)}},info:t}}return r}async fetchBalance(e={}){await this.loadMarkets(),await this.loadAccounts();const t=this.options.fetchBalanceMethod,i={id:this.accounts[0].id},s=await this[t](this.extend(i,e)),r=this.safeValue(s.data,"list",[]),a={info:s};for(let e=0;e<r.length;e++){const t=r[e],i=this.safeString(t,"currency"),s=this.safeCurrencyCode(i);let n;n=s in a?a[s]:this.account(),"trade"===t.type&&(n.free=this.safeString(t,"balance")),"frozen"===t.type&&(n.used=this.safeString(t,"balance")),a[s]=n}return this.parseBalance(a)}async fetchOrdersByStates(e,t,i,s,r={}){await this.loadMarkets();const a={states:e};let n;void 0!==t&&(n=this.market(t),a.symbol=n.id);const o=this.safeString(this.options,"fetchOrdersByStatesMethod","private_get_order_orders"),h=await this[o](this.extend(a,r));return this.parseOrders(h.data,n,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrderOrdersId(this.extend(s,i)),a=this.safeValue(r,"data");return this.parseOrder(a)}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByStates("pre-submitted,submitted,partial-filled,filled,partial-canceled,canceled",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){const r=this.safeString(this.options,"fetchOpenOrdersMethod","fetch_open_orders_v1");return await this[r](e,t,i,s)}async fetchOpenOrdersV1(e,t,i,s={}){if(void 0===e)throw new l(this.id+" fetchOpenOrdersV1() requires a symbol argument");return await this.fetchOrdersByStates("pre-submitted,submitted,partial-filled",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStates("filled,partial-canceled,canceled",e,t,i,s)}async fetchOpenOrdersV2(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.symbol=a.id);let n=this.safeString(s,"account-id");if(void 0===n){await this.loadAccounts();for(let e=0;e<this.accounts.length;e++){const t=this.accounts[e];if("spot"===t.type&&(n=this.safeString(t,"id"),void 0!==n))break}}r["account-id"]=n,void 0!==i&&(r.size=i);const o=this.omit(s,"account-id"),h=await this.privateGetOrderOpenOrders(this.extend(r,o)),c=this.safeValue(h,"data",[]);return this.parseOrders(c,a,t,i)}parseOrderStatus(e){return this.safeString({"partial-filled":"open","partial-canceled":"canceled",filled:"closed",canceled:"canceled",submitted:"open"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id");let s,r,a;if("type"in e){const t=e.type.split("-");s=t[0],r=t[1],a=this.parseOrderStatus(this.safeString(e,"state"))}const n=this.safeString(e,"symbol");t=this.safeMarket(n,t);const o=this.safeSymbol(n,t),h=this.safeInteger(e,"created-at"),c=this.safeString(e,"client-order-id"),d=this.safeString(e,"amount"),u=this.safeString2(e,"filled-amount","field-amount"),l=this.safeString(e,"price"),f=this.safeString2(e,"filled-cash-amount","field-cash-amount"),p=this.safeNumber2(e,"filled-fees","field-fees");let m;if(void 0!==p){let e;void 0!==t&&(e="sell"===s?t.quote:t.base),m={cost:p,currency:e}}return this.safeOrder2({info:e,id:i,clientOrderId:c,timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:void 0,symbol:o,type:r,timeInForce:void 0,postOnly:void 0,side:s,price:l,stopPrice:void 0,average:void 0,cost:f,amount:d,filled:u,remaining:void 0,status:a,fee:m,trades:void 0},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),await this.loadAccounts();const n=this.market(e),o={"account-id":this.accounts[0].id,symbol:n.id,type:i+"-"+t},h=this.safeString2(a,"clientOrderId","client-order-id");if(void 0===h){const e=this.safeValue(this.options,"broker",{}),t=this.safeString(e,"id");o["client-order-id"]=t+this.uuid()}else o["client-order-id"]=h;if(a=this.omit(a,["clientOrderId","client-order-id"]),"market"===t&&"buy"===i)if(this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new c(this.id+" market buy order requires price argument to calculate cost (total amount of quote currency to spend for buying, amount * price). To switch off this warning exception and specify cost in the amount argument, set .options['createMarketBuyOrderRequiresPrice'] = false. Make sure you know what you're doing.");o.amount=this.costToPrecision(e,parseFloat(s)*parseFloat(r))}else o.amount=this.costToPrecision(e,s);else o.amount=this.amountToPrecision(e,s);"limit"!==t&&"ioc"!==t&&"limit-maker"!==t&&"stop-limit"!==t&&"stop-limit-fok"!==t||(o.price=this.priceToPrecision(e,r));const d=this.options.createOrderMethod,u=await this[d](this.extend(o,a)),l=this.milliseconds();return{info:u,id:this.safeString(u,"data"),timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:void 0,symbol:e,type:t,side:i,price:r,amount:s,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0}}async cancelOrder(e,t,i={}){const s=await this.privatePostOrderOrdersIdSubmitcancel({id:e});return this.extend(this.parseOrder(s),{id:e,status:"canceled"})}async cancelOrders(e,t,i={}){await this.loadMarkets();const s=this.safeValue2(i,"clientOrderIds","client-order-ids");i=this.omit(i,["clientOrderIds","client-order-ids"]);const r={};return void 0===s?r["order-ids"]=e:r["client-order-ids"]=s,await this.privatePostOrderOrdersBatchcancel(this.extend(r,i))}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s;return void 0!==e&&(s=this.market(e),i.symbol=s.id),await this.privatePostOrderOrdersBatchCancelOpenOrders(this.extend(i,t))}currencyToPrecision(e,t){return this.decimalToPrecision(t,0,this.currencies[e].precision)}safeNetwork(e){const t=e.length-1;return"1"===e[t]&&(e=e.slice(0,t)),this.safeString({},e,e)}parseDepositAddress(e,t){const i=this.safeString(e,"address");let s=this.safeString(e,"addressTag");""===s&&(s=void 0);const r=this.safeString(e,"currency");t=this.safeCurrency(r,t);const a=this.safeCurrencyCode(r,t),n=this.safeString(e,"chain"),o=this.safeValue(t,"networks",{}),h=this.indexBy(o,"id"),c=this.safeValue(h,n,n),d=this.safeString(c,"network");return this.checkAddress(i),{currency:a,address:i,tag:s,network:d,info:e}}async fetchDeposits(e,t,i,s={}){let r;(void 0===i||i>100)&&(i=100),await this.loadMarkets(),void 0!==e&&(r=this.currency(e));const a={type:"deposit",from:0};void 0!==r&&(a.currency=r.id),void 0!==i&&(a.size=i);const n=await this.privateGetQueryDepositWithdraw(this.extend(a,s));return this.parseTransactions(n.data,r,t,i)}async fetchWithdrawals(e,t,i,s={}){let r;(void 0===i||i>100)&&(i=100),await this.loadMarkets(),void 0!==e&&(r=this.currency(e));const a={type:"withdraw",from:0};void 0!==r&&(a.currency=r.id),void 0!==i&&(a.size=i);const n=await this.privateGetQueryDepositWithdraw(this.extend(a,s));return this.parseTransactions(n.data,r,t,i)}parseTransaction(e,t){const i=this.safeInteger(e,"created-at"),s=this.safeInteger(e,"updated-at"),r=this.safeCurrencyCode(this.safeString(e,"currency"));let a=this.safeString(e,"type");"withdraw"===a&&(a="withdrawal");const n=this.parseTransactionStatus(this.safeString(e,"state")),o=this.safeString(e,"address-tag");let h=this.safeNumber(e,"fee");return void 0!==h&&(h=Math.abs(h)),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"tx-hash"),timestamp:i,datetime:this.iso8601(i),address:this.safeString(e,"address"),tag:o,type:a,amount:this.safeNumber(e,"amount"),currency:r,status:n,updated:s,fee:{currency:r,cost:h,rate:void 0}}}parseTransactionStatus(e){return this.safeString({unknown:"failed",confirming:"pending",confirmed:"ok",safe:"ok",orphan:"failed",submitted:"pending",canceled:"canceled",reexamine:"pending",reject:"failed",pass:"pending","wallet-reject":"failed","confirm-error":"failed",repealed:"failed","wallet-transfer":"pending","pre-transfer":"pending"},e,e)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),await this.loadMarkets(),this.checkAddress(i);const a=this.currency(e),n={address:i,amount:t,currency:a.id.toLowerCase()};void 0!==s&&(n["addr-tag"]=s);const o=this.safeValue(this.options,"networks",{});let h=this.safeStringUpper(r,"network");h=this.safeStringLower(o,h,h),void 0!==h&&(n.chain="erc20"===h?a.id+h:h+a.id,r=this.omit(r,"network"));const c=await this.privatePostDwWithdrawApiCreate(this.extend(n,r));return{info:c,id:this.safeString(c,"data")}}sign(e,t="public",i="GET",s={},r,a){let n="/";"market"===t?n+=t:"public"===t||"private"===t?n+=this.version:"v2Public"!==t&&"v2Private"!==t||(n+="v2"),n+="/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("private"===t||"v2Private"===t){this.checkRequiredCredentials();const e=this.ymdhms(this.milliseconds(),"T");let t={SignatureMethod:"HmacSHA256",SignatureVersion:"2",AccessKeyId:this.apiKey,Timestamp:e};"POST"!==i&&(t=this.extend(t,o)),t=this.keysort(t);let s=this.urlencode(t);const h=[i,this.hostname,n,s].join("\n"),c=this.hmac(this.encode(h),this.encode(this.secret),"sha256","base64");s+="&"+this.urlencode({Signature:c}),n+="?"+s,"POST"===i?(a=this.json(o),r={"Content-Type":"application/json"}):r={"Content-Type":"application/x-www-form-urlencoded"}}else Object.keys(s).length&&(n+="?"+this.urlencode(s));return n=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+n,{url:n,method:i,body:a,headers:r}}calculateRateLimiterCost(e,t,i,s,r={},a={}){return this.safeInteger(r,"cost",1)}handleErrors(e,t,i,s,r,n,o,h,c){if(void 0!==o&&"status"in o&&"error"===this.safeString(o,"status")){const e=this.safeString(o,"err-code"),t=this.id+" "+n;this.throwBroadlyMatchedException(this.exceptions.broad,n,t),this.throwExactlyMatchedException(this.exceptions.exact,e,t);const i=this.safeString(o,"err-msg");throw this.throwExactlyMatchedException(this.exceptions.exact,i,t),new a(t)}}}},53775:(e,t,i)=>{"use strict";const s=i(68639);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"huobipro",alias:!0})}}},22574:(e,t,i)=>{"use strict";const s=i(48819),{PAD_WITH_ZERO:r}=i(62115),{InvalidOrder:a,InsufficientFunds:n,ExchangeError:o,ExchangeNotAvailable:h,DDoSProtection:c,BadRequest:d,NotSupported:u,InvalidAddress:l,AuthenticationError:f}=i(73449),p=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"idex",name:"IDEX",countries:["US"],rateLimit:1500,version:"v2",pro:!0,certified:!0,requiresWeb3:!0,has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:void 0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:void 0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","6h":"6h","1d":"1d"},urls:{test:{MATIC:"https://api-sandbox-matic.idex.io"},logo:"https://user-images.githubusercontent.com/51840849/94481303-2f222100-01e0-11eb-97dd-bc14c5943a86.jpg",api:{MATIC:"https://api-matic.idex.io"},www:"https://idex.io",doc:["https://docs.idex.io/"]},api:{public:{get:["ping","time","exchange","assets","markets","tickers","candles","trades","orderbook","wsToken"]},private:{get:["user","wallets","balances","orders","fills","deposits","withdrawals"],post:["wallets","orders","orders/test","withdrawals"],delete:["orders"]}},options:{defaultTimeInForce:"gtc",defaultSelfTradePrevention:"cn",network:"MATIC"},exceptions:{INVALID_ORDER_QUANTITY:a,INSUFFICIENT_FUNDS:n,SERVICE_UNAVAILABLE:h,EXCEEDED_RATE_LIMIT:c,INVALID_PARAMETER:d,WALLET_NOT_ASSOCIATED:l,INVALID_WALLET_SIGNATURE:f},requiredCredentials:{walletAddress:!0,privateKey:!0,apiKey:!0,secret:!0},paddingMode:r,commonCurrencies:{},requireCredentials:{privateKey:!0,apiKey:!0,secret:!0}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=await this.publicGetExchange(),s=this.safeNumber(i,"makerFeeRate"),r=this.safeNumber(i,"takerFeeRate"),a=this.safeNumber(i,"makerTradeMinimum"),n=this.safeNumber(i,"takerTradeMinimum"),o=Math.min(a,n),h=[];for(let e=0;e<t.length;e++){const i=t[e],a=this.safeString(i,"market"),n=this.safeString(i,"baseAsset"),c=this.safeString(i,"quoteAsset"),d=this.safeCurrencyCode(n),u=this.safeCurrencyCode(c),l=d+"/"+u,f=this.safeString(i,"baseAssetPrecision"),p=this.safeString(i,"quoteAssetPrecision"),m=this.parsePrecision(f),g=this.parsePrecision(p),y="active"===this.safeString(i,"status");let b;"ETH"===u&&(b=o);const v={amount:parseInt(f),price:parseInt(p)};h.push({symbol:l,id:a,base:d,quote:u,baseId:n,quoteId:c,type:"spot",spot:!0,active:y,info:i,precision:v,taker:r,maker:s,limits:{amount:{min:this.parseNumber(m),max:void 0},price:{min:this.parseNumber(g),max:void 0},cost:{min:b,max:void 0}}})}return h}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.publicGetTickers(this.extend(s,t)),a=this.safeValue(r,0);return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t);return this.parseTickers(i,e)}parseTicker(e,t){const i=this.safeString(e,"market"),s=this.safeSymbol(i,t,"-"),r=this.safeNumber(e,"baseVolume"),a=this.safeNumber(e,"quoteVolume"),n=this.safeInteger(e,"time"),o=this.safeNumber(e,"open"),h=this.safeNumber(e,"high"),c=this.safeNumber(e,"low"),d=this.safeNumber(e,"close"),u=this.safeNumber(e,"ask"),l=this.safeNumber(e,"bid");let f,p=this.safeNumber(e,"percentChange");return void 0!==p&&(p=1+p/100),void 0!==d&&void 0!==o&&(f=d-o),{symbol:s,timestamp:n,datetime:this.iso8601(n),high:h,low:c,bid:l,bidVolume:void 0,ask:u,askVolume:void 0,vwap:void 0,open:o,close:d,last:d,previousClose:void 0,change:f,percentage:p,average:void 0,baseVolume:r,quoteVolume:a,info:e}}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={market:a.id,interval:t};void 0!==i&&(n.start=i),void 0!==s&&(n.limit=s);const o=await this.publicGetCandles(this.extend(n,r));return Array.isArray(o)?this.parseOHLCVs(o,a,t,i,s):[]}parseOHLCV(e,t){return[this.safeInteger(e,"start"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==t&&(a.start=t),void 0!==i&&(a.limit=i);const n=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseTrade(e,t){const i=this.safeString(e,"fillId"),s=this.safeString(e,"price"),r=this.safeString(e,"quantity"),a=this.parseNumber(s),n=this.parseNumber(r);let o=this.safeNumber(e,"quoteQuantity");void 0===o&&(o=this.parseNumber(p.stringMul(s,r)));const h=this.safeInteger(e,"time"),c=this.safeString(e,"market"),d=this.safeSymbol(c,t,"-"),u="buy"===this.safeString(e,"makerSide")?"sell":"buy",l=this.safeString(e,"side",u),f=this.safeString(e,"liquidity","taker"),m=this.safeNumber(e,"fee");let g;if(void 0!==m){const t=this.safeString(e,"feeAsset");g={cost:m,currency:this.safeCurrencyCode(t)}}const y=this.safeString(e,"orderId");return{info:e,timestamp:h,datetime:this.iso8601(h),symbol:d,id:i,order:y,type:"limit",side:l,takerOrMaker:f,price:a,amount:n,cost:o,fee:g}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id,level:2};void 0!==t&&(s.limit=t);const r=await this.publicGetOrderbook(this.extend(s,i));return{symbol:e,timestamp:void 0,datetime:void 0,nonce:this.safeInteger(r,"sequence"),bids:this.parseSide(r,"bids"),asks:this.parseSide(r,"asks")}}parseSide(e,t){const i=this.safeValue(e,t,[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeNumber(t,0),a=this.safeNumber(t,1),n=this.safeInteger(t,2);s.push([r,a,n])}const r="bids"===t;return this.sortBy(s,0,r)}async fetchCurrencies(e={}){const t=await this.publicGetAssets(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"name"),a=this.safeString(s,"symbol"),n=this.safeString(s,"exchangeDecimals"),o=this.safeCurrencyCode(a),h=this.parsePrecision(n),c=this.parseNumber(h);i[o]={id:a,code:o,info:s,type:void 0,name:r,active:void 0,fee:void 0,precision:parseInt(n),limits:{amount:{min:c,max:void 0},withdraw:{min:c,max:void 0}}}}return i}async fetchBalance(e={}){this.checkRequiredCredentials(),await this.loadMarkets();const t={nonce:this.uuidv1(),wallet:this.walletAddress},i=this.extend(t,e);if(void 0===i.wallet)throw new d(this.id+' wallet is undefined, set this.walletAddress or "address" in params');let s;try{s=await this.privateGetBalances(i)}catch(e){if(!(e instanceof l))throw e;{const e=i.wallet;await this.associateWallet(e),s=await this.privateGetBalances(i)}}const r={info:s,timestamp:void 0,datetime:void 0};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"asset"),a=this.safeCurrencyCode(i),n=this.account();n.total=this.safeString(t,"quantity"),n.free=this.safeString(t,"availableForTrade"),n.used=this.safeString(t,"locked"),r[a]=n}return this.parseBalance(r)}async fetchMyTrades(e,t,i,s={}){let r;this.checkRequiredCredentials(),await this.loadMarkets();const a={nonce:this.uuidv1(),wallet:this.walletAddress};void 0!==e&&(r=this.market(e),a.market=r.id),void 0!==t&&(a.start=t),void 0!==i&&(a.limit=i);const n=this.extend(a,s);if(void 0===n.wallet)throw new d(this.id+' walletAddress is undefined, set this.walletAddress or "address" in params');let o;try{o=await this.privateGetFills(n)}catch(e){if(!(e instanceof l))throw e;{const e=n.wallet;await this.associateWallet(e),o=await this.privateGetFills(n)}}return this.parseTrades(o,r,t,i)}async fetchOrder(e,t,i={}){const s={orderId:e};return await this.fetchOrdersHelper(t,void 0,void 0,this.extend(s,i))}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersHelper(e,t,i,this.extend({closed:!1},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersHelper(e,t,i,this.extend({closed:!0},s))}async fetchOrdersHelper(e,t,i,s={}){await this.loadMarkets();const r={nonce:this.uuidv1(),wallet:this.walletAddress};let a;void 0!==e&&(a=this.market(e),r.market=a.id),void 0!==t&&(r.start=t),void 0!==i&&(r.limit=i);const n=await this.privateGetOrders(this.extend(r,s));return Array.isArray(n)?this.parseOrders(n,a,t,i):this.parseOrder(n,a)}parseOrderStatus(e){return this.safeString({active:"open",partiallyFilled:"open",rejected:"canceled",filled:"closed"},e,e)}parseOrder(e,t){const i=this.safeInteger(e,"time"),s=this.safeValue(e,"fills",[]),r=this.safeString(e,"orderId"),a=this.safeString(e,"clientOrderId"),n=this.safeString(e,"market"),o=this.safeString(e,"side"),h=this.safeSymbol(n,t,"-"),c=this.parseTrades(s,t),d=this.safeString(e,"type"),u=this.safeNumber(e,"originalQuantity"),l=this.safeNumber(e,"executedQuantity"),f=this.safeNumber(e,"avgExecutionPrice"),p=this.safeNumber(e,"price"),m=this.safeString(e,"status"),g=this.parseOrderStatus(m);return this.safeOrder({info:e,id:r,clientOrderId:a,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:h,type:d,timeInForce:void 0,postOnly:void 0,side:o,price:p,stopPrice:void 0,amount:u,cost:void 0,average:f,filled:l,remaining:void 0,status:g,fee:void 0,trades:c})}async associateWallet(e,t={}){const i=this.uuidv1(),s=this.remove0xPrefix(e),r=[this.base16ToBinary(i),this.base16ToBinary(s)],a=this.binaryConcatArray(r),n=this.hash(a,"keccak","hex"),o={parameters:{nonce:i,wallet:e},signature:this.signMessageString(n,this.privateKey)};return await this.privatePostWallets(o)}async createOrder(e,t,i,s,r,a={}){this.checkRequiredCredentials(),await this.loadMarkets();const n=this.market(e),o=this.uuidv1();let h;const c={stopLoss:3,stopLossLimit:4,takeProfit:5,takeProfitLimit:6};let l;if("stopLossLimit"===t||"takeProfitLimit"===t||"stopPrice"in a){if(!("stopPrice"in a))throw new d(this.id+" stopPrice is a required parameter for "+t+"orders");l=this.priceToPrecision(e,a.stopPrice)}const f={limit:1,limitMaker:2};let p;const m=t.toLowerCase().indexOf("limit")>=0;if(t in f)h=f[t],p=this.priceToPrecision(e,r);else if(t in c)h=c[t],p=this.priceToPrecision(e,r);else{if("market"!==t)throw new d(this.id+" "+t+" is not a valid order type");h=0}let g=0;if("quoteOrderQuantity"in a){if("market"!==t)throw new u(this.id+" quoteOrderQuantity is not supported for "+t+" orders, only supported for market orders");g=1,s=this.safeNumber(a,"quoteOrderQuantity")}const y="buy"===i?0:1,b=this.remove0xPrefix(this.walletAddress),v="ETH"===this.safeString(this.options,"network","ETH")?1:2,w=this.amountToPrecision(e,s),k={gtc:0,ioc:2,fok:3},_=this.safeString(this.options,"defaultTimeInForce","gtc"),S=this.safeString(a,"timeInForce",_);let O;if(!(S in k)){const e=Object.keys(k).join(", ");throw new d(this.id+" "+S+" is not a valid timeInForce, please choose one of "+e)}O=k[S];const M={dc:0,co:1,cn:2,cb:3},T=this.safeString(this.options,"defaultSelfTradePrevention","cn"),x=this.safeString(a,"selfTradePrevention",T);let I;if(!(x in M)){const e=Object.keys(M).join(", ");throw new d(this.id+" "+x+" is not a valid selfTradePrevention, please choose one of "+e)}I=M[x];const A=[this.numberToBE(v,1),this.base16ToBinary(o),this.base16ToBinary(b),this.stringToBinary(this.encode(n.id)),this.numberToBE(h,1),this.numberToBE(y,1),this.stringToBinary(this.encode(w)),this.numberToBE(g,1)];if(m){const e=this.stringToBinary(this.encode(p));A.push(e)}if(t in c){const e=this.stringToBinary(this.encode(l||p));A.push(e)}const C=this.safeString(a,"clientOrderId");void 0!==C&&A.push(this.stringToBinary(this.encode(C)));const N=[this.numberToBE(O,1),this.numberToBE(I,1),this.numberToBE(0,8)],E=this.arrayConcat(A,N),P=this.binaryConcatArray(E),B=this.hash(P,"keccak","hex"),R=this.signMessageString(B,this.privateKey),V={parameters:{nonce:o,market:n.id,side:i,type:t,wallet:this.walletAddress,timeInForce:S,selfTradePrevention:x},signature:R};m&&(V.parameters.price=p),t in c&&(V.parameters.stopPrice=l||p),0===g?V.parameters.quantity=w:V.parameters.quoteOrderQuantity=w,void 0!==C&&(V.parameters.clientOrderId=C);const L=await this.privatePostOrders(V);return this.parseOrder(L,n)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkRequiredCredentials(),await this.loadMarkets();const a=this.uuidv1(),n=this.currencyToPrecision(e,t),o=this.currency(e),h=this.remove0xPrefix(this.walletAddress),c=[this.base16ToBinary(a),this.base16ToBinary(h),this.stringToBinary(this.encode(o.id)),this.stringToBinary(this.encode(n)),this.numberToBE(1,1)],d=this.binaryConcatArray(c),u=this.hash(d,"keccak","hex"),l=this.signMessageString(u,this.privateKey),f={parameters:{nonce:a,wallet:i,asset:o.id,quantity:n},signature:l},p=await this.privatePostWithdrawals(f);return{info:p,id:this.safeString(p,"withdrawalId")}}async cancelOrder(e,t,i={}){let s;this.checkRequiredCredentials(),await this.loadMarkets(),void 0!==t&&(s=this.market(t));const r=this.uuidv1(),a=this.remove0xPrefix(this.walletAddress),n=[this.base16ToBinary(r),this.base16ToBinary(a),this.stringToBinary(this.encode(e))],o=this.binaryConcatArray(n),h=this.hash(o,"keccak","hex"),c=this.signMessageString(h,this.privateKey),d={parameters:{nonce:r,wallet:this.walletAddress,orderId:e},signature:c},u=await this.privateDeleteOrders(this.extend(d,i)),l=this.safeValue(u,0);return this.parseOrder(l,s)}handleErrors(e,t,i,s,r,a,n,h,c){const d=this.safeString(n,"code"),u=this.safeString(n,"message");if(d in this.exceptions)throw new(0,this.exceptions[d])(this.id+" "+u);if(void 0!==d)throw new o(this.id+" "+u)}async fetchDeposits(e,t,i,s={}){return s=this.extend({method:"privateGetDeposits"},s),this.fetchTransactionsHelper(e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return s=this.extend({method:"privateGetWithdrawals"},s),this.fetchTransactionsHelper(e,t,i,s)}async fetchTransactionsHelper(e,t,i,s={}){await this.loadMarkets();const r={nonce:this.uuidv1(),wallet:this.walletAddress};let a;void 0!==e&&(a=this.currency(e),r.asset=a.id),void 0!==t&&(r.start=t),void 0!==i&&(r.limit=i);const n=s.method;s=this.omit(s,"method");const o=await this[n](this.extend(r,s));return this.parseTransactions(o,a,t,i)}parseTransactionStatus(e){return this.safeString({mined:"ok"},e,e)}parseTransaction(e,t){let i;"depositId"in e?i="deposit":"withdrawalId"in e&&(i="withdrawal");const s=this.safeString2(e,"depositId","withdrawId"),r=this.safeCurrencyCode(this.safeString(e,"asset"),t),a=this.safeNumber(e,"quantity"),n=this.safeString(e,"txId"),o=this.safeInteger(e,"txTime");let h;"fee"in e&&(h={cost:this.safeNumber(e,"fee"),currency:"ETH"});const c=this.safeString(e,"txStatus"),d=this.parseTransactionStatus(c),u=this.safeInteger(e,"confirmationTime");return{info:e,id:s,txid:n,timestamp:o,datetime:this.iso8601(o),address:void 0,tag:void 0,type:i,amount:a,currency:r,status:d,updated:u,fee:h}}sign(e,t="public",i="GET",s={},r,a){const n=this.safeString(this.options,"network","ETH"),o=this.safeString(this.options,"version","v1");let h,c=this.urls.api[n]+"/"+o+"/"+e;if(Object.keys(s).length>0&&("GET"===i?(h=this.urlencode(s),c=c+"?"+h):a=this.json(s)),r={"Content-Type":"application/json"},void 0!==this.apiKey&&(r["IDEX-API-Key"]=this.apiKey),"private"===t){let e;e="GET"===i?h:a,r["IDEX-HMAC-Signature"]=this.hmac(this.encode(e),this.encode(this.secret),"sha256","hex")}return{url:c,method:i,body:a,headers:r}}}},73585:(e,t,i)=>{"use strict";const s=i(48819),r=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"independentreserve",name:"Independent Reserve",countries:["AU","NZ"],rateLimit:1e3,has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182090-1e9e9080-c2ec-11ea-8e49-563db9a38f37.jpg",api:{public:"https://api.independentreserve.com/Public",private:"https://api.independentreserve.com/Private"},www:"https://www.independentreserve.com",doc:"https://www.independentreserve.com/API"},api:{public:{get:["GetValidPrimaryCurrencyCodes","GetValidSecondaryCurrencyCodes","GetValidLimitOrderTypes","GetValidMarketOrderTypes","GetValidOrderTypes","GetValidTransactionTypes","GetMarketSummary","GetOrderBook","GetAllOrders","GetTradeHistorySummary","GetRecentTrades","GetFxRates","GetOrderMinimumVolumes","GetCryptoWithdrawalFees"]},private:{post:["GetOpenOrders","GetClosedOrders","GetClosedFilledOrders","GetOrderDetails","GetAccounts","GetTransactions","GetFiatBankAccounts","GetDigitalCurrencyDepositAddress","GetDigitalCurrencyDepositAddresses","GetTrades","GetBrokerageFees","GetDigitalCurrencyWithdrawal","PlaceLimitOrder","PlaceMarketOrder","CancelOrder","SynchDigitalCurrencyDepositAddressWithBlockchain","RequestFiatWithdrawal","WithdrawFiatCurrency","WithdrawDigitalCurrency"]}},fees:{trading:{taker:.005,maker:.005,percentage:!0,tierBased:!1}},commonCurrencies:{PLA:"PlayChip"}})}async fetchMarkets(e={}){const t=await this.publicGetGetValidPrimaryCurrencyCodes(e),i=await this.publicGetGetValidSecondaryCurrencyCodes(e),s=await this.publicGetGetOrderMinimumVolumes(e),r=[];for(let e=0;e<t.length;e++){const a=t[e],n=this.safeCurrencyCode(a),o=this.safeNumber(s,a);for(let e=0;e<i.length;e++){const t=i[e],s=this.safeCurrencyCode(t),h=a+"/"+t,c=n+"/"+s;r.push({id:h,symbol:c,base:n,quote:s,baseId:a,quoteId:t,info:h,type:"spot",spot:!0,active:void 0,precision:this.precision,limits:{amount:{min:o,max:void 0}}})}}return r}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetAccounts(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"CurrencyCode"),a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(s,"AvailableBalance"),n.total=this.safeString(s,"TotalBalance"),i[a]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={primaryCurrencyCode:s.baseId,secondaryCurrencyCode:s.quoteId},a=await this.publicGetGetOrderBook(this.extend(r,i)),n=this.parse8601(this.safeString(a,"CreatedTimestampUtc"));return this.parseOrderBook(a,e,n,"BuyOrders","SellOrders","Price","Volume")}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"CreatedTimestampUtc"));let s;t&&(s=t.symbol);const r=this.safeNumber(e,"LastPrice");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"DayHighestPrice"),low:this.safeNumber(e,"DayLowestPrice"),bid:this.safeNumber(e,"CurrentHighestBidPrice"),bidVolume:void 0,ask:this.safeNumber(e,"CurrentLowestOfferPrice"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeNumber(e,"DayAvgPrice"),baseVolume:this.safeNumber(e,"DayVolumeXbtInSecondaryCurrrency"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={primaryCurrencyCode:i.baseId,secondaryCurrencyCode:i.quoteId},r=await this.publicGetGetMarketSummary(this.extend(s,t));return this.parseTicker(r,i)}parseOrder(e,t){let i;const s=this.safeString(e,"PrimaryCurrencyCode"),r=this.safeString(e,"SecondaryCurrencyCode");let a,n;void 0!==s&&void 0!==r?(a=this.safeCurrencyCode(s),n=this.safeCurrencyCode(r),i=a+"/"+n):void 0!==t&&(i=t.symbol,a=t.base,n=t.quote);let o,h=this.safeString2(e,"Type","OrderType");h.indexOf("Bid")>=0?o="buy":h.indexOf("Offer")>=0&&(o="sell"),h.indexOf("Market")>=0?h="market":h.indexOf("Limit")>=0&&(h="limit");const c=this.parse8601(this.safeString(e,"CreatedTimestampUtc")),d=this.safeString2(e,"VolumeOrdered","Volume"),u=this.safeString(e,"VolumeFilled"),l=this.safeString(e,"Outstanding"),f=this.safeNumber(e,"FeePercent");let p;void 0!==f&&void 0!==u&&(p=f*u);const m={rate:f,cost:p,currency:a},g=this.safeString(e,"OrderGuid"),y=this.parseOrderStatus(this.safeString(e,"Status")),b=this.safeString(e,"Value"),v=this.safeString(e,"AvgPrice"),w=this.safeString(e,"Price");return this.safeOrder2({info:e,id:g,clientOrderId:void 0,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:i,type:h,timeInForce:void 0,postOnly:void 0,side:o,price:w,stopPrice:void 0,cost:b,average:v,amount:d,filled:u,remaining:l,status:y,fee:m,trades:void 0},t)}parseOrderStatus(e){return this.safeString({Open:"open",PartiallyFilled:"open",Filled:"closed",PartiallyFilledAndCancelled:"canceled",Cancelled:"canceled",PartiallyFilledAndExpired:"canceled",Expired:"canceled"},e,e)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=await this.privatePostGetOrderDetails(this.extend({orderGuid:e},i));let r;return void 0!==t&&(r=this.market(t)),this.parseOrder(s,r)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=this.ordered({});let a;void 0!==e&&(a=this.market(e),r.primaryCurrencyCode=a.baseId,r.secondaryCurrencyCode=a.quoteId),void 0===i&&(i=50),r.pageIndex=1,r.pageSize=i;const n=await this.privatePostGetOpenOrders(this.extend(r,s)),o=this.safeValue(n,"Data",[]);return this.parseOrders(o,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r=this.ordered({});let a;void 0!==e&&(a=this.market(e),r.primaryCurrencyCode=a.baseId,r.secondaryCurrencyCode=a.quoteId),void 0===i&&(i=50),r.pageIndex=1,r.pageSize=i;const n=await this.privatePostGetClosedOrders(this.extend(r,s)),o=this.safeValue(n,"Data",[]);return this.parseOrders(o,a,t,i)}async fetchMyTrades(e,t,i=50,s={}){await this.loadMarkets();const r=this.safeInteger(s,"pageIndex",1);void 0===i&&(i=50);const a=this.ordered({pageIndex:r,pageSize:i}),n=await this.privatePostGetTrades(this.extend(a,s));let o;return void 0!==e&&(o=this.market(e)),this.parseTrades(n.Data,o,t,i)}parseTrade(e,t){const i=this.parse8601(e.TradeTimestampUtc),s=this.safeString(e,"TradeGuid"),a=this.safeString(e,"OrderGuid"),n=this.safeString2(e,"Price","SecondaryCurrencyTradePrice"),o=this.safeString2(e,"VolumeTraded","PrimaryCurrencyAmount"),h=this.parseNumber(n),c=this.parseNumber(o),d=this.parseNumber(r.stringMul(n,o)),u=this.safeString(e,"PrimaryCurrencyCode"),l=this.safeString(e,"SecondaryCurrencyCode");let f;void 0!==u&&void 0!==l&&(f=u+"/"+l);const p=this.safeSymbol(f,t,"/");let m=this.safeString(e,"OrderType");return void 0!==m&&(m.indexOf("Bid")>=0?m="buy":m.indexOf("Offer")>=0&&(m="sell")),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:p,order:a,type:void 0,side:m,takerOrMaker:void 0,price:h,amount:c,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={primaryCurrencyCode:r.baseId,secondaryCurrencyCode:r.quoteId,numberOfRecentTradesToRetrieve:50},n=await this.publicGetGetRecentTrades(this.extend(a,s));return this.parseTrades(n.Trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o=this.capitalize(t),h="privatePostPlace"+o+"Order";let c=o;c+="sell"===i?"Offer":"Bid";const d=this.ordered({primaryCurrencyCode:n.baseId,secondaryCurrencyCode:n.quoteId,orderType:c});"limit"===t&&(d.price=r),d.volume=s;const u=await this[h](this.extend(d,a));return{info:u,id:u.OrderGuid}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderGuid:e};return await this.privatePostCancelOrder(this.extend(s,i))}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t]+"/"+e;if("public"===t)Object.keys(s).length&&(n+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.nonce(),t=[n,"apiKey="+this.apiKey,"nonce="+e.toString()],i=Object.keys(s);for(let e=0;e<i.length;e++){const r=i[e],a=s[r].toString();t.push(r+"="+a)}const o=t.join(","),h=this.hmac(this.encode(o),this.encode(this.secret)),c=this.ordered({});c.apiKey=this.apiKey,c.nonce=e,c.signature=h.toUpperCase();for(let e=0;e<i.length;e++){const t=i[e];c[t]=s[t]}a=this.json(c),r={"Content-Type":"application/json"}}return{url:n,method:i,body:a,headers:r}}}},14535:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,InsufficientFunds:n,InvalidOrder:o,OrderNotFound:h,AuthenticationError:c,BadSymbol:d}=i(73449),u=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"indodax",name:"INDODAX",countries:["ID"],has:{cancelOrder:!0,CORS:void 0,createMarketOrder:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchMyTrades:void 0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:void 0,fetchTicker:!0,fetchTickers:void 0,fetchTime:!0,fetchTrades:!0,withdraw:!0},version:"2.0",urls:{logo:"https://user-images.githubusercontent.com/51840849/87070508-9358c880-c221-11ea-8dc5-5391afbbb422.jpg",api:{public:"https://indodax.com/api",private:"https://indodax.com/tapi"},www:"https://www.indodax.com",doc:"https://github.com/btcid/indodax-official-api-docs",referral:"https://indodax.com/ref/testbitcoincoid/1"},api:{public:{get:["server_time","pairs","{pair}/ticker","{pair}/trades","{pair}/depth"]},private:{post:["getInfo","transHistory","trade","tradeHistory","getOrder","openOrders","cancelOrder","orderHistory","withdrawCoin"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:.003}},exceptions:{exact:{invalid_pair:d,"Insufficient balance.":n,"invalid order.":h,"Invalid credentials. API not found or session has expired.":c,"Invalid credentials. Bad sign.":c},broad:{"Minimum price":o,"Minimum order":o}},options:{recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1},commonCurrencies:{STR:"XLM",BCHABC:"BCH",BCHSV:"BSV",DRK:"DASH",NEM:"XEM"}})}nonce(){return this.milliseconds()-this.options.timeDifference}async fetchTime(e={}){const t=await this.publicGetServerTime(e);return this.safeInteger(t,"server_time")}async loadTimeDifference(e={}){const t=await this.fetchTime(e),i=this.milliseconds();return this.options.timeDifference=i-t,this.options.timeDifference}async fetchMarkets(e={}){const t=await this.publicGetPairs(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"ticker_id"),a=this.safeString(s,"traded_currency"),n=this.safeString(s,"base_currency"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c=o+"/"+h,d=this.safeNumber(s,"trade_fee_percent"),u=!this.safeInteger(s,"is_maintenance"),l={amount:8,price:this.safeInteger(s,"price_round")},f={amount:{min:this.safeNumber(s,"trade_min_traded_currency"),max:void 0},price:{min:this.safeNumber(s,"trade_min_base_currency"),max:void 0},cost:{min:void 0,max:void 0}};i.push({id:r,symbol:c,base:o,quote:h,baseId:a,quoteId:n,type:"spot",spot:!0,active:u,taker:d,percentage:!0,precision:l,limits:f,info:s})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetInfo(e),i=this.safeValue(t,"return",{}),s=this.safeValue(i,"balance",{}),r=this.safeValue(i,"balance_hold",{}),a=this.safeTimestamp(i,"server_time"),n={info:t,timestamp:a,datetime:this.iso8601(a)},o=Object.keys(s);for(let e=0;e<o.length;e++){const t=o[e],i=this.safeCurrencyCode(t),a=this.account();a.free=this.safeString(s,t),a.used=this.safeString(r,t),n[i]=a}return this.parseBalance(n)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},r=await this.publicGetPairDepth(this.extend(s,i));return this.parseOrderBook(r,e,void 0,"buy","sell")}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},r=(await this.publicGetPairTicker(this.extend(s,t))).ticker,a=this.safeTimestamp(r,"server_time"),n="vol_"+i.baseId.toLowerCase(),o="vol_"+i.quoteId.toLowerCase(),h=this.safeNumber(r,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeNumber(r,"high"),low:this.safeNumber(r,"low"),bid:this.safeNumber(r,"buy"),bidVolume:void 0,ask:this.safeNumber(r,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(r,n),quoteVolume:this.safeNumber(r,o),info:r}}parseTrade(e,t){const i=this.safeTimestamp(e,"date"),s=this.safeString(e,"tid");let r;void 0!==t&&(r=t.symbol);const a=this.safeString(e,"type"),n=this.safeString(e,"price"),o=this.safeString(e,"amount"),h=this.parseNumber(n),c=this.parseNumber(o),d=this.parseNumber(u.stringMul(n,o));return{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,side:a,order:void 0,takerOrMaker:void 0,price:h,amount:c,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id},n=await this.publicGetPairTrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseOrderStatus(e){return this.safeString({open:"open",filled:"closed",cancelled:"canceled"},e,e)}parseOrder(e,t){let i;"type"in e&&(i=e.type);const s=this.parseOrderStatus(this.safeString(e,"status","open"));let r,a;const n=this.safeString(e,"price");let o,h;if(void 0!==t){r=t.symbol;let i=t.quoteId,s=t.baseId;"idr"===t.quoteId&&"order_rp"in e&&(i="rp"),"idr"===t.baseId&&"remain_rp"in e&&(s="rp"),a=this.safeString(e,"order_"+i),a||(o=this.safeString(e,"order_"+s),h=this.safeString(e,"remain_"+s))}const c=this.safeInteger(e,"submit_time"),d=this.safeString(e,"order_id");return this.safeOrder2({info:e,id:d,clientOrderId:void 0,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:r,type:"limit",timeInForce:void 0,postOnly:void 0,side:i,price:n,stopPrice:void 0,cost:a,average:void 0,amount:o,filled:void 0,remaining:h,status:s,fee:void 0,trades:void 0})}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder() requires a symbol");await this.loadMarkets();const s=this.market(t),r={pair:s.id,order_id:e},n=await this.privatePostGetOrder(this.extend(r,i)),o=n.return,h=this.parseOrder(this.extend({id:e},o.order),s);return this.extend({info:n},h)}async fetchOpenOrders(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.pair=r.id);const n=(await this.privatePostOpenOrders(this.extend(a,s))).return.orders;if(!n)return[];if(void 0!==e)return this.parseOrders(n,r,t,i);const o=Object.keys(n);let h=[];for(let e=0;e<o.length;e++){const s=o[e],a=n[s];r=this.markets_by_id[s];const c=this.parseOrders(a,r,t,i);h=this.arrayConcat(h,c)}return h}async fetchClosedOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const r={};let n;void 0!==e&&(n=this.market(e),r.pair=n.id);const o=await this.privatePostOrderHistory(this.extend(r,s));let h=this.parseOrders(o.return.orders,n);return h=this.filterBy(h,"status","closed"),this.filterBySymbolSinceLimit(h,e,t,i)}async createOrder(e,t,i,s,a,n={}){if("limit"!==t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();const o=this.market(e),h={pair:o.id,type:i,price:a},c=o.baseId;"buy"===i?h[o.quoteId]=s*a:h[o.baseId]=s,h[c]=s;const d=await this.privatePostTrade(this.extend(h,n)),u=this.safeValue(d,"return",{});return{info:d,id:this.safeString(u,"order_id")}}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder() requires a symbol argument");const s=this.safeValue(i,"side");if(void 0===s)throw new a(this.id+' cancelOrder() requires an extra "side" param');await this.loadMarkets();const r={order_id:e,pair:this.market(t).id,type:s};return await this.privatePostCancelOrder(this.extend(r,i))}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),n=this.milliseconds(),o={currency:a.id,withdraw_amount:t,withdraw_address:i,request_id:n.toString()};s&&(o.withdraw_memo=s);const h=await this.privatePostWithdrawCoin(this.extend(o,r));let c;return"txid"in h&&h.txid.length>0&&(c=h.txid),{info:h,id:c}}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t];return"public"===t?n+="/"+this.implodeParams(e,s):(this.checkRequiredCredentials(),a=this.urlencode(this.extend({method:e,timestamp:this.nonce(),recvWindow:this.options.recvWindow},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}),{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;if(Array.isArray(o))return;const d=this.safeValue(o,"error","");if(!("success"in o)&&""===d)return;if(1===this.safeInteger(o,"success",0)){if("return"in o)return;throw new r(this.id+": malformed response: "+this.json(o))}const u=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,d,u),new r(u)}}},21431:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,AuthenticationError:a,ArgumentsRequired:n}=i(73449),o=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"itbit",name:"itBit",countries:["US"],rateLimit:2e3,version:"v1",has:{cancelOrder:!0,CORS:!0,createMarketOrder:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,fetchTransactions:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27822159-66153620-60ad-11e7-89e7-005f6d7f3de0.jpg",api:"https://api.itbit.com",www:"https://www.itbit.com",doc:["https://api.itbit.com/docs","https://www.itbit.com/api"]},api:{public:{get:["markets/{symbol}/ticker","markets/{symbol}/order_book","markets/{symbol}/trades"]},private:{get:["wallets","wallets/{walletId}","wallets/{walletId}/balances/{currencyCode}","wallets/{walletId}/funding_history","wallets/{walletId}/trades","wallets/{walletId}/orders","wallets/{walletId}/orders/{id}"],post:["wallet_transfers","wallets","wallets/{walletId}/cryptocurrency_deposits","wallets/{walletId}/cryptocurrency_withdrawals","wallets/{walletId}/orders","wire_withdrawal"],delete:["wallets/{walletId}/orders/{id}"]}},markets:{"BTC/USD":{id:"XBTUSD",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"XBT",quoteId:"USD",type:"spot",spot:!0},"BTC/SGD":{id:"XBTSGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD",baseId:"XBT",quoteId:"SGD",type:"spot",spot:!0},"BTC/EUR":{id:"XBTEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"XBT",quoteId:"EUR",type:"spot",spot:!0},"ETH/USD":{id:"ETHUSD",symbol:"ETH/USD",base:"ETH",quote:"USD",baseId:"ETH",quoteId:"USD",type:"spot",spot:!0},"ETH/EUR":{id:"ETHEUR",symbol:"ETH/EUR",base:"ETH",quote:"EUR",baseId:"ETH",quoteId:"EUR",type:"spot",spot:!0},"ETH/SGD":{id:"ETHSGD",symbol:"ETH/SGD",base:"ETH",quote:"SGD",baseId:"ETH",quoteId:"SGD",type:"spot",spot:!0},PAXGUSD:{id:"PAXGUSD",symbol:"PAXG/USD",base:"PAXG",quote:"USD",baseId:"PAXG",quoteId:"USD",type:"spot",spot:!0},BCHUSD:{id:"BCHUSD",symbol:"BCH/USD",base:"BCH",quote:"USD",baseId:"BCH",quoteId:"USD",type:"spot",spot:!0},LTCUSD:{id:"LTCUSD",symbol:"LTC/USD",base:"LTC",quote:"USD",baseId:"LTC",quoteId:"USD",type:"spot",spot:!0}},fees:{trading:{maker:-3e-4,taker:.35/100}},commonCurrencies:{XBT:"BTC"}})}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},r=await this.publicGetMarketsSymbolOrderBook(this.extend(s,i));return this.parseOrderBook(r,e)}async fetchTicker(e,t={}){await this.loadMarkets();const i={symbol:this.marketId(e)},s=await this.publicGetMarketsSymbolTicker(this.extend(i,t)),a=this.safeString(s,"serverTimeUTC");if(!a)throw new r(this.id+" fetchTicker returned a bad response: "+this.json(s));const n=this.parse8601(a),o=this.safeNumber(s,"vwap24h"),h=this.safeNumber(s,"volume24h");let c;void 0!==h&&void 0!==o&&(c=h*o);const d=this.safeNumber(s,"lastPrice");return{symbol:e,timestamp:n,datetime:this.iso8601(n),high:this.safeNumber(s,"high24h"),low:this.safeNumber(s,"low24h"),bid:this.safeNumber(s,"bid"),bidVolume:void 0,ask:this.safeNumber(s,"ask"),askVolume:void 0,vwap:o,open:this.safeNumber(s,"openToday"),close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:h,quoteVolume:c,info:s}}parseTrade(e,t){const i=this.safeString2(e,"executionId","matchNumber"),s=this.parse8601(this.safeString(e,"timestamp")),r=this.safeString(e,"direction"),a=this.safeString(e,"orderId");let n=this.safeNumber(e,"commissionPaid");const h=this.safeString(e,"commissionCurrency"),c=this.safeCurrencyCode(h);let d=this.safeNumber(e,"rebatesApplied");void 0!==d&&(d=-d);const u=this.safeString(e,"rebateCurrency"),l=this.safeCurrencyCode(u),f=this.safeString2(e,"price","rate"),p=this.safeString2(e,"currency1Amount","amount"),m=this.parseNumber(f),g=this.parseNumber(p),y=this.parseNumber(o.stringMul(f,p));let b;const v=this.safeString(e,"instrument");if(void 0!==v)if(v in this.markets_by_id)t=this.markets_by_id[v];else{const t=this.safeString(e,"currency1"),i=this.safeString(e,"currency2");b=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}void 0===b&&void 0!==t&&(b=t.symbol);const w={info:e,id:i,timestamp:s,datetime:this.iso8601(s),symbol:b,order:a,type:void 0,side:r,takerOrMaker:void 0,price:m,amount:g,cost:y,fee:void 0};return void 0!==n&&(void 0!==d?c===l?(n=this.sum(n,d),w.fee={cost:n,currency:c}):w.fees=[{cost:n,currency:c},{cost:d,currency:l}]:w.fee={cost:n,currency:c}),"fee"in w||"fees"in w||(w.fee=void 0),w}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r=this.safeString(s,"walletId");if(void 0===r)throw new n(this.id+" fetchMyTrades() requires a walletId parameter");const a={walletId:r};void 0!==i&&(a.perPage=i);const o=(await this.privateGetWalletsWalletIdFundingHistory(this.extend(a,s))).fundingHistory,h=[];for(let e=0;e<o.length;e++){const t=o[e],i=this.safeString(t,"time"),s=this.parse8601(i),r=this.safeString(t,"currency"),a=this.safeString(t,"destinationAddress"),n=this.safeString(t,"txnHash"),c=this.safeStringLower(t,"transactionType"),d=this.safeString(t,"status"),u=this.parseTransferStatus(d);h.push({id:this.safeString(t,"withdrawalId"),timestamp:s,datetime:this.iso8601(s),currency:this.safeCurrencyCode(r),address:a,tag:void 0,txid:n,type:c,status:u,amount:this.safeNumber(t,"amount"),fee:void 0,info:t})}return h}parseTransferStatus(e){return this.safeString({cancelled:"canceled",completed:"ok"},e,"pending")}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a=this.safeString(s,"walletId");if(void 0===a)throw new r(this.id+" fetchMyTrades() requires a walletId parameter");const n={walletId:a};void 0!==t&&(n.rangeStart=this.ymdhms(t,"T")),void 0!==i&&(n.perPage=i);const o=await this.privateGetWalletsWalletIdTrades(this.extend(n,s)),h=this.safeValue(o,"tradingHistory",[]);let c;return void 0!==e&&(c=this.market(e)),this.parseTrades(h,c,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},n=await this.publicGetMarketsSymbolTrades(this.extend(a,s)),o=this.safeValue(n,"recentTrades",[]);return this.parseTrades(o,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.fetchWallets(e),i=t[0].balances,s={info:t};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(t,"availableBalance"),n.total=this.safeString(t,"totalBalance"),s[a]=n}return this.parseBalance(s)}async fetchWallets(e={}){if(await this.loadMarkets(),!this.uid)throw new a(this.id+" fetchWallets() requires uid API credential");const t={userId:this.uid};return await this.privateGetWallets(this.extend(t,e))}async fetchWallet(e,t={}){await this.loadMarkets();const i={walletId:e};return await this.privateGetWalletsWalletId(this.extend(i,t))}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"open"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"filled"},s))}async fetchOrders(e,t,i,s={}){let a;if(await this.loadMarkets(),void 0!==e&&(a=this.market(e)),!("walletId"in s))throw new r(this.id+" fetchOrders() requires a walletId parameter");const n={walletId:s.walletId},o=await this.privateGetWalletsWalletIdOrders(this.extend(n,s));return this.parseOrders(o,a,t,i)}parseOrderStatus(e){return this.safeString({submitted:"open",open:"open",filled:"closed",cancelled:"canceled",rejected:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"side"),s=this.safeString(e,"type"),r=this.markets_by_id[e.instrument].symbol,a=this.parse8601(e.createdTime),n=this.safeString(e,"amount"),o=this.safeString(e,"amountFilled"),h=this.safeString(e,"price"),c=this.safeString(e,"volumeWeightedAveragePrice"),d=this.safeString(e,"clientOrderIdentifier"),u=this.safeString(e,"id"),l="True"===this.safeString(e,"postOnly");return this.safeOrder2({id:u,clientOrderId:d,info:e,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,status:this.parseOrderStatus(this.safeString(e,"status")),symbol:r,type:s,timeInForce:void 0,postOnly:l,side:i,price:h,stopPrice:void 0,cost:void 0,average:c,amount:n,filled:o,remaining:void 0,fee:void 0,trades:void 0},t)}nonce(){return this.milliseconds()}async createOrder(e,t,i,s,a,n={}){if(await this.loadMarkets(),"market"===t)throw new r(this.id+" allows limit orders only");if(!("walletId"in n))throw new r(this.id+" createOrder() requires a walletId parameter");s=s.toString(),a=a.toString();const o=this.market(e),h={side:i,type:t,currency:o.id.replace(o.quote,""),amount:s,display:s,price:a,instrument:o.id},c=await this.privatePostWalletsWalletIdOrders(this.extend(h,n));return{info:c,id:c.id}}async fetchOrder(e,t,i={}){if(await this.loadMarkets(),!("walletId"in i))throw new r(this.id+" fetchOrder() requires a walletId parameter");const s={id:e},a=await this.privateGetWalletsWalletIdOrdersId(this.extend(s,i));return this.parseOrder(a)}async cancelOrder(e,t,i={}){if(!("walletId"in i))throw new r(this.id+" cancelOrder() requires a walletId parameter");const s={id:e};return await this.privateDeleteWalletsWalletIdOrdersId(this.extend(s,i))}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("GET"===i&&Object.keys(o).length&&(n+="?"+this.urlencode(o)),"POST"===i&&Object.keys(o).length&&(a=this.json(o)),"private"===t){this.checkRequiredCredentials();const e=this.nonce().toString(),t=e,s=[i,n,"POST"===i?a:"",e,t],o=e+this.json(s).replace("\\/","/"),h=this.hash(this.encode(o),"sha256","binary"),c=this.stringToBinary(this.encode(n)),d=this.binaryConcat(c,h),u=this.hmac(d,this.encode(this.secret),"sha512","base64");r={Authorization:this.apiKey+":"+u,"Content-Type":"application/json","X-Auth-Timestamp":t,"X-Auth-Nonce":e}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o&&void 0!==this.safeString(o,"code"))throw new r(this.id+" "+this.json(o))}}},66594:(e,t,i)=>{"use strict";const s=i(48819),{BadSymbol:r,BadRequest:a,ExchangeNotAvailable:n,ArgumentsRequired:o,PermissionDenied:h,AuthenticationError:c,ExchangeError:d,OrderNotFound:u,DDoSProtection:l,InvalidNonce:f,InsufficientFunds:p,CancelPending:m,InvalidOrder:g,InvalidAddress:y,RateLimitExceeded:b,OnMaintenance:v}=i(73449),{TRUNCATE:w,DECIMAL_PLACES:k}=i(62115);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kraken",name:"Kraken",countries:["US"],version:"0",rateLimit:3e3,certified:!1,pro:!0,has:{margin:!0,cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createDepositAddress:!0,createOrder:!0,fetchBalance:!0,fetchBorrowRate:!1,fetchBorrowRateHistory:!1,fetchBorrowRates:!1,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchLedgerEntry:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:"emulated",fetchPositions:!0,fetchPremiumIndexOHLCV:!1,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFees:!0,fetchWithdrawals:!0,setMarginMode:!1,withdraw:!0},marketsByAltname:{},timeframes:{"1m":1,"5m":5,"15m":15,"30m":30,"1h":60,"4h":240,"1d":1440,"1w":10080,"2w":21600},urls:{logo:"https://user-images.githubusercontent.com/51840849/76173629-fc67fb00-61b1-11ea-84fe-f2de582f58a3.jpg",api:{public:"https://api.kraken.com",private:"https://api.kraken.com",zendesk:"https://kraken.zendesk.com/api/v2/help_center/en-us/articles"},www:"https://www.kraken.com",doc:"https://www.kraken.com/features/api",fees:"https://www.kraken.com/en-us/features/fee-schedule"},fees:{trading:{tierBased:!0,percentage:!0,taker:.0026,maker:.0016,tiers:{taker:[[0,.0026],[5e4,.0024],[1e5,.0022],[25e4,.002],[5e5,.0018],[1e6,.0016],[25e5,.0014],[5e6,.0012],[1e7,1e-4]],maker:[[0,.0016],[5e4,.0014],[1e5,.0012],[25e4,.001],[5e5,8e-4],[1e6,6e-4],[25e5,4e-4],[5e6,2e-4],[1e7,0]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,ETH:.005,XRP:.02,XLM:2e-5,LTC:.02,DOGE:2,ZEC:1e-4,ICN:.02,REP:.01,ETC:.005,MLN:.003,XMR:.05,DASH:.005,GNO:.01,EOS:.5,BCH:.001,XTZ:.05,USD:5,EUR:5,CAD:10,JPY:300},deposit:{BTC:0,ETH:0,XRP:0,XLM:0,LTC:0,DOGE:0,ZEC:0,ICN:0,REP:0,ETC:0,MLN:0,XMR:0,DASH:0,GNO:0,EOS:0,BCH:0,XTZ:.05,USD:5,EUR:0,CAD:5,JPY:0}}},handleContentTypeApplicationZip:!0,api:{zendesk:{get:["360000292886","201893608"]},public:{get:["Assets","AssetPairs","Depth","OHLC","Spread","Ticker","Time","Trades"]},private:{post:{AddOrder:0,AddExport:1,Balance:1,CancelAll:1,CancelOrder:0,ClosedOrders:2,DepositAddresses:1,DepositMethods:1,DepositStatus:1,ExportStatus:1,GetWebSocketsToken:1,Ledgers:2,OpenOrders:1,OpenPositions:1,QueryLedgers:1,QueryOrders:1,QueryTrades:1,RetrieveExport:1,RemoveExport:1,TradeBalance:1,TradesHistory:2,TradeVolume:1,Withdraw:1,WithdrawCancel:1,WithdrawInfo:1,WithdrawStatus:1}}},commonCurrencies:{XBT:"BTC","XBT.M":"BTC.M",XDG:"DOGE",REPV2:"REP",REP:"REPV1"},options:{delistedMarketsById:{},inactiveCurrencies:["CAD","USD","JPY","GBP"],networks:{ETH:"ERC20",TRX:"TRC20"},depositMethods:{"1INCH":"1inch (1INCH)",AAVE:"Aave",ADA:"ADA",ALGO:"Algorand",ANKR:"ANKR (ANKR)",ANT:"Aragon (ANT)",ATOM:"Cosmos",AXS:"Axie Infinity Shards (AXS)",BADGER:"Bager DAO (BADGER)",BAL:"Balancer (BAL)",BAND:"Band Protocol (BAND)",BAT:"BAT",BCH:"Bitcoin Cash",BNC:"Bifrost (BNC)",BNT:"Bancor (BNT)",BTC:"Bitcoin",CHZ:"Chiliz (CHZ)",COMP:"Compound (COMP)",CQT:"\tCovalent Query Token (CQT)",CRV:"Curve DAO Token (CRV)",CTSI:"Cartesi (CTSI)",DAI:"Dai",DASH:"Dash",DOGE:"Dogecoin",DOT:"Polkadot",DYDX:"dYdX (DYDX)",ENJ:"Enjin Coin (ENJ)",EOS:"EOS",ETC:"Ether Classic (Hex)",ETH:"Ether (Hex)",EWT:"Energy Web Token",FEE:"Kraken Fee Credit",FIL:"Filecoin",FLOW:"Flow",GHST:"Aavegotchi (GHST)",GNO:"GNO",GRT:"GRT",ICX:"Icon",INJ:"Injective Protocol (INJ)",KAR:"Karura (KAR)",KAVA:"Kava",KEEP:"Keep Token (KEEP)",KNC:"Kyber Network (KNC)",KSM:"Kusama",LINK:"Link",LPT:"Livepeer Token (LPT)",LRC:"Loopring (LRC)",LSK:"Lisk",LTC:"Litecoin",MANA:"MANA",MATIC:"Polygon (MATIC)",MINA:"Mina",MIR:"Mirror Protocol (MIR)",MKR:"Maker (MKR)",MLN:"MLN",MOVR:"Moonriver (MOVR)",NANO:"NANO",OCEAN:"OCEAN",OGN:"Origin Protocol (OGN)",OMG:"OMG",OXT:"Orchid (OXT)",OXY:"Oxygen (OXY)",PAXG:"PAX (Gold)",PERP:"Perpetual Protocol (PERP)",PHA:"Phala (PHA)",QTUM:"QTUM",RARI:"Rarible (RARI)",RAY:"Raydium (RAY)",REN:"Ren Protocol (REN)",REP:"REPv2",REPV1:"REP",SAND:"The Sandbox (SAND)",SC:"Siacoin",SDN:"Shiden (SDN)",SOL:"Solana",SNX:"Synthetix  Network (SNX)",SRM:"Serum",STORJ:"Storj (STORJ)",SUSHI:"Sushiswap (SUSHI)",TBTC:"tBTC",TRX:"Tron",UNI:"UNI",USDC:"USDC",USDT:"Tether USD (ERC20)","USDT-TRC20":"Tether USD (TRC20)",WAVES:"Waves",WBTC:"Wrapped Bitcoin (WBTC)",XLM:"Stellar XLM",XMR:"Monero",XRP:"Ripple XRP",XTZ:"XTZ",YFI:"YFI",ZEC:"Zcash (Transparent)",ZRX:"0x (ZRX)"}},exceptions:{"EQuery:Invalid asset pair":r,"EAPI:Invalid key":c,"EFunding:Unknown withdraw key":y,"EFunding:Invalid amount":p,"EService:Unavailable":n,"EDatabase:Internal error":n,"EService:Busy":n,"EQuery:Unknown asset":r,"EAPI:Rate limit exceeded":l,"EOrder:Rate limit exceeded":l,"EGeneral:Internal error":n,"EGeneral:Temporary lockout":l,"EGeneral:Permission denied":h,"EOrder:Unknown order":g,"EOrder:Order minimum not met":g,"EGeneral:Invalid arguments":a,"ESession:Invalid session":c,"EAPI:Invalid nonce":f,"EFunding:No funding method":a,"EFunding:Unknown asset":r,"EService:Market in post_only mode":v}})}costToPrecision(e,t){return this.decimalToPrecision(t,w,this.markets[e].precision.price,k)}feeToPrecision(e,t){return this.decimalToPrecision(t,w,this.markets[e].precision.amount,k)}async fetchMarkets(e={}){const t=await this.publicGetAssetPairs(e),i=this.safeValue(t,"result",{}),s=Object.keys(i);let r=[];for(let e=0;e<s.length;e++){const t=s[e],a=i[t],n=this.safeString(a,"base"),o=this.safeString(a,"quote"),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=t.indexOf(".d")>=0,u=this.safeString(a,"altname"),l=d?u:h+"/"+c,f=this.safeValue(a,"fees_maker",[]),p=this.safeValue(f,0,[]),m=this.safeNumber(p,1);let g;void 0!==m&&(g=parseFloat(m)/100);const y=this.safeValue(a,"fees",[]),b=this.safeValue(y,0,[]),v=this.safeNumber(b,1);let w;void 0!==v&&(w=parseFloat(v)/100);const k={amount:this.safeInteger(a,"lot_decimals"),price:this.safeInteger(a,"pair_decimals")},_=this.safeNumber(a,"ordermin"),S=this.safeValue(a,"leverage_buy",[]),O=S.length,M=this.safeValue(S,O-1,1);r.push({id:t,symbol:l,base:h,quote:c,baseId:n,quoteId:o,darkpool:d,info:a,altname:a.altname,maker:g,taker:w,type:"spot",spot:!0,active:!0,precision:k,limits:{amount:{min:_,max:void 0},price:{min:Math.pow(10,-k.price),max:void 0},cost:{min:void 0,max:void 0},leverage:{max:M}}})}return r=this.appendInactiveMarkets(r),this.marketsByAltname=this.indexBy(r,"altname"),r}safeCurrency(e,t){if(void 0!==e&&e.length>3&&(0===e.indexOf("X")||0===e.indexOf("Z"))){if(e.indexOf(".")>0)return super.safeCurrency(e,t);e=e.slice(1)}return super.safeCurrency(e,t)}appendInactiveMarkets(e){const t={amount:8,price:8},i={min:Math.pow(10,-t.price),max:void 0},s={darkpool:!1,info:void 0,maker:void 0,taker:void 0,active:!1,precision:t,limits:{amount:{min:Math.pow(10,-t.amount),max:Math.pow(10,t.amount)},price:i,cost:{min:0,max:void 0}}},r=[];for(let t=0;t<r.length;t++)e.push(this.extend(s,r[t]));return e}async fetchCurrencies(e={}){const t=await this.publicGetAssets(e),i=this.safeValue(t,"result"),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){const t=s[e],a=i[t],n=this.safeCurrencyCode(this.safeString(a,"altname")),o=this.safeInteger(a,"decimals"),h=!this.inArray(n,this.options.inactiveCurrencies);r[n]={id:t,code:n,info:a,name:n,active:h,fee:void 0,precision:o,limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},withdraw:{min:void 0,max:Math.pow(10,o)}}}}return r}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privatePostTradeVolume(e),i=this.safeNumber(t.result,"volume"),s=this.fees.trading.tiers;let r=s.taker[1],a=s.maker[1];for(let e=0;e<s.taker.length;e++)i>=s.taker[e][0]&&(r=s.taker[e][1]);for(let e=0;e<s.maker.length;e++)i>=s.maker[e][0]&&(a=s.maker[e][1]);return{info:t,maker:a,taker:r}}parseBidAsk(e,t=0,i=1){return[this.safeNumber(e,t),this.safeNumber(e,i),this.safeInteger(e,2)]}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e);if(s.darkpool)throw new d(this.id+" does not provide an order book for darkpool symbol "+e);const r={pair:s.id};void 0!==t&&(r.count=t);const a=await this.publicGetDepth(this.extend(r,i)),n=this.safeValue(a,"result",{});let o=this.safeValue(n,s.id);const h=this.safeValue(s,"info",{}),c=this.safeValue(h,"wsname");return void 0!==c&&(o=this.safeValue(n,c,o)),this.parseOrderBook(o,e)}parseTicker(e,t){const i=this.milliseconds();let s;t&&(s=t.symbol);const r=parseFloat(e.v[1]),a=parseFloat(e.p[1]);let n;void 0!==r&&void 0!==a&&(n=r*a);const o=parseFloat(e.c[0]);return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.h[1]),low:parseFloat(e.l[1]),bid:parseFloat(e.b[0]),bidVolume:void 0,ask:parseFloat(e.a[0]),askVolume:void 0,vwap:a,open:this.safeNumber(e,"o"),close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:r,quoteVolume:n,info:e}}async fetchTickers(e,t={}){await this.loadMarkets(),e=void 0===e?this.symbols:e;const i=[];for(let t=0;t<e.length;t++){const s=e[t],r=this.markets[s];r.active&&!r.darkpool&&i.push(r.id)}const s={pair:i.join(",")},r=(await this.publicGetTicker(this.extend(s,t))).result,a=Object.keys(r),n={};for(let e=0;e<a.length;e++){const t=a[e],i=this.markets_by_id[t],s=i.symbol,o=r[t];n[s]=this.parseTicker(o,i)}return this.filterByArray(n,"symbol",e)}async fetchTicker(e,t={}){if(await this.loadMarkets(),e.indexOf(".d")>=0)throw new d(this.id+" does not provide a ticker for darkpool symbol "+e);const i=this.market(e),s={pair:i.id},r=(await this.publicGetTicker(this.extend(s,t))).result[i.id];return this.parseTicker(r,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,6)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={pair:a.id,interval:this.timeframes[t]};void 0!==i&&(n.since=parseInt((i-1)/1e3));const o=await this.publicGetOHLC(this.extend(n,r)),h=this.safeValue(o,"result",{}),c=this.safeValue(h,a.id,[]);return this.parseOHLCVs(c,a,t,i,s)}parseLedgerEntryType(e){return this.safeString({trade:"trade",withdrawal:"transaction",deposit:"transaction",transfer:"transfer",margin:"margin"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"id");let s;const r=this.safeString(e,"refid"),a=this.parseLedgerEntryType(this.safeString(e,"type")),n=this.safeCurrencyCode(this.safeString(e,"asset"),t);let o=this.safeNumber(e,"amount");o<0?(s="out",o=Math.abs(o)):s="in";const h=this.safeNumber(e,"time");let c;void 0!==h&&(c=parseInt(1e3*h));const d={cost:this.safeNumber(e,"fee"),currency:n};return{info:e,id:i,direction:s,account:void 0,referenceId:r,referenceAccount:void 0,type:a,currency:n,amount:o,before:void 0,after:this.safeNumber(e,"balance"),status:"ok",timestamp:c,datetime:this.iso8601(c),fee:d}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.asset=a.id),void 0!==t&&(r.start=parseInt(t/1e3));const n=await this.privatePostLedgers(this.extend(r,s)),o=this.safeValue(n,"result",{}),h=this.safeValue(o,"ledger",{}),c=Object.keys(h),d=[];for(let e=0;e<c.length;e++){const t=c[e],i=h[t];i.id=t,d.push(i)}return this.parseLedger(d,a,t,i)}async fetchLedgerEntriesByIds(e,t,i={}){await this.loadMarkets(),e=e.join(",");const s=this.extend({id:e},i),r=(await this.privatePostQueryLedgers(s)).result,a=Object.keys(r),n=[];for(let e=0;e<a.length;e++){const t=a[e],i=r[t];i.id=t,n.push(i)}return this.parseLedger(n)}async fetchLedgerEntry(e,t,i={}){return(await this.fetchLedgerEntriesByIds([e],t,i))[0]}parseTrade(e,t){let i,s,r,a,n,o,h,c,d;if(Array.isArray(e))i=this.safeTimestamp(e,2),s="s"===e[3]?"sell":"buy",r="l"===e[4]?"limit":"market",a=this.safeString(e,0),n=this.safeString(e,1),e.length>6&&(o=this.safeString(e,6));else if("string"==typeof e)o=e;else if("ordertxid"in e){const d=this.safeString(e,"pair"),u=this.findMarketByAltnameOrId(d);if(void 0!==u?t=u:void 0!==d&&(t=this.getDelistedMarketById(d)),h=this.safeString(e,"ordertxid"),o=this.safeString2(e,"id","postxid"),i=this.safeTimestamp(e,"time"),s=this.safeString(e,"type"),r=this.safeString(e,"ordertype"),a=this.safeString(e,"price"),n=this.safeString(e,"vol"),"fee"in e){let i;void 0!==t&&(i=t.quote),c={cost:this.safeString(e,"fee"),currency:i}}}void 0!==t&&(d=t.symbol);const u=this.safeString(e,"cost");return this.safeTrade({id:o,order:h,info:e,timestamp:i,datetime:this.iso8601(i),symbol:d,type:r,side:s,takerOrMaker:void 0,price:a,amount:n,cost:u,fee:c},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a=r.id,n={pair:a};if(void 0!==t&&(n.since=1e6*t,n.since=t.toString()+"000000"),void 0!==i&&1e3!==i&&this.safeValue(this.options,"fetchTradesWarning",!0))throw new d(this.id+" fetchTrades() cannot serve "+i.toString()+" trades without breaking the pagination, see https://github.com/ccxt/ccxt/issues/5698 for more details. Set exchange.options['fetchTradesWarning'] to acknowledge this warning and silence it.");const o=(await this.publicGetTrades(this.extend(n,s))).result,h=o[a],c=h.length;if(c<=0)return[];const u=h[c-1],l=this.safeString(o,"last");return u.push(l),this.parseTrades(h,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostBalance(e),i=this.safeValue(t,"result",{}),s={info:t,timestamp:void 0,datetime:void 0},r=Object.keys(i);for(let e=0;e<r.length;e++){const t=r[e],a=this.safeCurrencyCode(t),n=this.account();n.total=this.safeString(i,t),s[a]=n}return this.parseBalance(s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n={pair:this.market(e).id,type:i,ordertype:t,volume:this.amountToPrecision(e,s)},h=this.safeString2(a,"userref","clientOrderId");if(a=this.omit(a,["userref","clientOrderId"]),void 0!==h&&(n.userref=h),"limit"===t)n.price=this.priceToPrecision(e,r);else if("stop-loss"===t||"take-profit"===t){const i=this.safeNumber2(a,"price","stopPrice",r);if(void 0===i)throw new o(this.id+" createOrder() requires a price argument or a price/stopPrice parameter for a "+t+" order");n.price=this.priceToPrecision(e,i)}else if("stop-loss-limit"===t||"take-profit-limit"===t){const i=this.safeNumber2(a,"price","stopPrice"),s=this.safeNumber(a,"price2"),h=void 0!==i,c=void 0!==s;if(h&&c)n.price=this.priceToPrecision(e,i),n.price2=this.priceToPrecision(e,s);else{if(void 0===r||!h&&!c)throw new o(this.id+" createOrder() requires a price argument and/or price/stopPrice/price2 parameters for a "+t+" order");h?(n.price=this.priceToPrecision(e,i),n.price2=this.priceToPrecision(e,r)):c&&(n.price=this.priceToPrecision(e,r),n.price2=this.priceToPrecision(e,s))}}a=this.omit(a,["price","stopPrice","price2"]);const c=await this.privatePostAddOrder(this.extend(n,a)),d=this.safeValue(c,"result");return this.parseOrder(d)}findMarketByAltnameOrId(e){return e in this.marketsByAltname?this.marketsByAltname[e]:e in this.markets_by_id?this.markets_by_id[e]:void 0}getDelistedMarketById(e){if(void 0===e)return e;let t=this.safeValue(this.options.delistedMarketsById,e);if(void 0!==t)return t;let i=3,s=3,r=6;8===e.length?(i=4,s=4,r=8):7===e.length&&(i=4,s=4,r=7);const a=e.slice(0,i),n=e.slice(s,r),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n);return t={symbol:o+"/"+h,base:o,quote:h,baseId:a,quoteId:n},this.options.delistedMarketsById[e]=t,t}parseOrderStatus(e){return this.safeString({pending:"open",open:"open",closed:"closed",canceled:"canceled",expired:"expired"},e,e)}parseOrder(e,t){const i=this.safeValue(e,"descr",{}),s=this.safeString(i,"order");let r,a,n,o,h;if(void 0!==s){const e=s.split(" ");r=this.safeString(e,0),h=this.safeNumber(e,1),n=this.safeString(e,2),a=this.safeString(e,4),o=this.safeNumber(e,5)}r=this.safeString(i,"type",r),a=this.safeString(i,"ordertype",a),n=this.safeString(i,"pair",n);const c=this.findMarketByAltnameOrId(n);let d;void 0!==c?t=c:void 0!==n&&(t=this.getDelistedMarketById(n));const u=this.safeTimestamp(e,"opentm");h=this.safeNumber(e,"vol",h);const l=this.safeNumber(e,"vol_exec");let f;const p=this.safeNumber(e,"cost");o=this.safeNumber(i,"price",o),void 0!==o&&0!==o||(o=this.safeNumber(i,"price2")),void 0!==o&&0!==o||(o=this.safeNumber(e,"price",o));const m=this.safeNumber(e,"price");if(void 0!==t&&(d=t.symbol,"fee"in e)){const i=e.oflags;f={cost:this.safeNumber(e,"fee"),rate:void 0},i.indexOf("fciq")>=0?f.currency=t.quote:i.indexOf("fcib")>=0&&(f.currency=t.base)}const g=this.parseOrderStatus(this.safeString(e,"status"));let y=this.safeString(e,"id");if(void 0===y){const t=this.safeValue(e,"txid");y=this.safeString(t,0)}const b=this.safeString(e,"userref"),v=this.safeValue(e,"trades");let w;void 0!==v&&(w=this.parseTrades(v,t,void 0,void 0,{order:y}));const k=this.safeNumber(e,"stopprice");return this.safeOrder({id:y,clientOrderId:b,info:e,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:void 0,status:g,symbol:d,type:a,timeInForce:void 0,postOnly:void 0,side:r,price:o,stopPrice:k,cost:p,amount:h,filled:l,average:m,remaining:void 0,fee:f,trades:w})}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.safeValue2(i,"userref","clientOrderId"),r={trades:!0};let a=i;void 0!==s?(r.userref=s,a=this.omit(i,["userref","clientOrderId"])):r.txid=e;const n=await this.privatePostQueryOrders(this.extend(r,a)),o=this.safeValue(n,"result",[]);if(!(e in o))throw new u(this.id+" fetchOrder() could not find order id "+e);const h=this.parseOrder(this.extend({id:e},o[e]));return this.extend({info:n},h)}async fetchOrderTrades(e,t,i,s,r={}){const a=this.safeValue(r,"trades"),n=[];if(void 0===a)throw new o(this.id+" fetchOrderTrades() requires a unified order structure in the params argument or a 'trades' param (an array of trade id strings)");for(let e=0;e<a.length;e++){const t=a[e];"string"==typeof t?n.push(t):n.push(t.id)}await this.loadMarkets();const h=this.safeValue(this.options,"fetchOrderTrades",{}),c=this.safeInteger(h,"batchSize",20),d=n.length;let u=parseInt(d/c);u=this.sum(u,1);let l=[];for(let e=0;e<u;e++){const r=[];for(let t=0;t<c;t++){const i=this.sum(e*c,t);i<d&&r.push(n[i])}const a={txid:r.join(",")},o=await this.privatePostQueryTrades(a),h=this.safeValue(o,"result"),u=Object.keys(h);for(let e=0;e<u.length;e++)h[u[e]].id=u[e];const f=this.parseTrades(h,void 0,i,s),p=this.filterBySymbol(f,t);l=this.arrayConcat(l,p)}return l}async fetchOrdersByIds(e,t,i={}){await this.loadMarkets();const s=await this.privatePostQueryOrders(this.extend({trades:!0,txid:e.join(",")},i)),r=this.safeValue(s,"result",{}),a=[],n=Object.keys(r);for(let e=0;e<n.length;e++){const t=n[e],i=r[t],s=this.parseOrder(this.extend({id:t},i));a.push(s)}return a}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==t&&(r.start=parseInt(t/1e3));const a=(await this.privatePostTradesHistory(this.extend(r,s))).result.trades,n=Object.keys(a);for(let e=0;e<n.length;e++)a[n[e]].id=n[e];let o;return void 0!==e&&(o=this.market(e)),this.parseTrades(a,o,t,i)}async cancelOrder(e,t,i={}){let s;await this.loadMarkets();const r=this.safeValue2(i,"userref","clientOrderId");try{s=await this.privatePostCancelOrder(this.extend({txid:r||e},i))}catch(e){if(this.last_http_response&&this.last_http_response.indexOf("EOrder:Unknown order")>=0)throw new u(this.id+" cancelOrder() error "+this.last_http_response);throw e}return s}async cancelAllOrders(e,t={}){return await this.loadMarkets(),await this.privatePostCancelAll(t)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==t&&(r.start=parseInt(t/1e3));let a=s;const n=this.safeValue2(s,"userref","clientOrderId");void 0!==n&&(r.userref=n,a=this.omit(s,["userref","clientOrderId"]));const o=await this.privatePostOpenOrders(this.extend(r,a));let h;void 0!==e&&(h=this.market(e));const c=this.safeValue(o,"result",{}),d=this.safeValue(c,"open",[]);return this.parseOrders(d,h,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==t&&(r.start=parseInt(t/1e3));let a=s;const n=this.safeValue2(s,"userref","clientOrderId");void 0!==n&&(r.userref=n,a=this.omit(s,["userref","clientOrderId"]));const o=await this.privatePostClosedOrders(this.extend(r,a));let h;void 0!==e&&(h=this.market(e));const c=this.safeValue(o,"result",{}),d=this.safeValue(c,"closed",[]);return this.parseOrders(d,h,t,i)}parseTransactionStatus(e){return this.safeString({Initial:"pending",Pending:"pending",Success:"ok",Settled:"pending",Failure:"failed",Partial:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"refid"),s=this.safeString(e,"txid"),r=this.safeTimestamp(e,"time"),a=this.safeString(e,"asset"),n=this.safeCurrencyCode(a,t),o=this.safeString(e,"info"),h=this.safeNumber(e,"amount"),c=this.parseTransactionStatus(this.safeString(e,"status")),d=this.safeString(e,"type");let u=this.safeNumber(e,"fee");return void 0===u&&"deposit"===d&&(u=0),{info:e,id:i,currency:n,amount:h,address:o,tag:void 0,status:c,type:d,updated:void 0,txid:s,timestamp:r,datetime:this.iso8601(r),fee:{currency:n,cost:u}}}parseTransactionsByType(e,t,i,s,r){const a=[];for(let i=0;i<t.length;i++){const s=this.parseTransaction(this.extend({type:e},t[i]));a.push(s)}return this.filterByCurrencySinceLimit(a,i,s,r)}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchDeposits() requires a currency code argument");await this.loadMarkets();const r={asset:this.currency(e).id},a=await this.privatePostDepositStatus(this.extend(r,s));return this.parseTransactionsByType("deposit",a.result,e,t,i)}async fetchTime(e={}){const t=await this.publicGetTime(e),i=this.safeValue(t,"result",{});return this.safeTimestamp(i,"unixtime")}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchWithdrawals() requires a currency code argument");await this.loadMarkets();const r={asset:this.currency(e).id},a=await this.privatePostWithdrawStatus(this.extend(r,s));return this.parseTransactionsByType("withdrawal",a.result,e,t,i)}async createDepositAddress(e,t={}){return await this.fetchDepositAddress(e,this.extend({new:"true"},t))}async fetchDepositMethods(e,t={}){await this.loadMarkets();const i={asset:this.currency(e).id},s=await this.privatePostDepositMethods(this.extend(i,t));return this.safeValue(s,"result")}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);let s=this.safeStringUpper(t,"network");const r=this.safeValue(this.options,"networks",{});s=this.safeString(r,s,s),t=this.omit(t,"network"),"USDT"===e&&"TRC20"===s&&(e=e+"-"+s);const a=this.safeValue(this.options,"depositMethods",{}),n=this.safeString(a,e);let o=this.safeString(t,"method",n);if(void 0===o){const t=await this.fetchDepositMethods(e);if(void 0!==s)for(let e=0;e<t.length;e++){const i=this.safeString(t[e],"method");if(i.indexOf(s)>=0){o=i;break}}if(void 0===o){const e=this.safeValue(t,0,{});o=this.safeString(e,"method")}}const h={asset:i.id,method:o},c=await this.privatePostDepositAddresses(this.extend(h,t)),d=this.safeValue(c,"result",[]),u=this.safeValue(d,0,{});if(void 0===u)throw new y(this.id+" privatePostDepositAddresses() returned no addresses for "+e);return this.parseDepositAddress(u,i)}parseDepositAddress(e,t){const i=this.safeString(e,"address"),s=this.safeString(e,"tag"),r=(t=this.safeCurrency(void 0,t)).code;return this.checkAddress(i),{currency:r,address:i,tag:s,network:void 0,info:e}}async withdraw(e,t,i,s,r={}){if([s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),"key"in r){await this.loadMarkets();const i={asset:this.currency(e).id,amount:t},s=await this.privatePostWithdraw(this.extend(i,r)),a=this.safeValue(s,"result",{});return{info:a,id:this.safeString(a,"refid")}}throw new d(this.id+" withdraw() requires a 'key' parameter (withdrawal key name, as set up on your account)")}async fetchPositions(e,t={}){await this.loadMarkets();const i=await this.privatePostOpenPositions(this.extend({},t));return this.safeValue(i,"result")}sign(e,t="public",i="GET",s={},r,a){let n="/"+this.version+"/"+t+"/"+e;if("public"===t)Object.keys(s).length&&(n+="?"+this.urlencode(s));else if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();a=this.urlencode(this.extend({nonce:e},s));const t=this.encode(e+a),i=this.hash(t,"sha256","binary"),o=this.stringToBinary(this.encode(n)),h=this.binaryConcat(o,i),c=this.base64ToBinary(this.secret),d=this.hmac(h,c,"sha512","base64");r={"API-Key":this.apiKey,"API-Sign":d,"Content-Type":"application/x-www-form-urlencoded"}}else n="/"+e;return n=this.urls.api[t]+n,{url:n,method:i,body:a,headers:r}}nonce(){return this.milliseconds()}handleErrors(e,t,i,s,r,a,o,h,c){if(520===e)throw new n(this.id+" "+e.toString()+" "+t);if(a.indexOf("Invalid order")>=0)throw new g(this.id+" "+a);if(a.indexOf("Invalid nonce")>=0)throw new f(this.id+" "+a);if(a.indexOf("Insufficient funds")>=0)throw new p(this.id+" "+a);if(a.indexOf("Cancel pending")>=0)throw new m(this.id+" "+a);if(a.indexOf("Invalid arguments:volume")>=0)throw new g(this.id+" "+a);if(a.indexOf("Rate limit exceeded")>=0)throw new b(this.id+" "+a);if(void 0!==o&&"{"===a[0]&&"string"!=typeof o&&"error"in o&&o.error.length){const e=this.id+" "+a;for(let t=0;t<o.error.length;t++){const i=o.error[t];this.throwExactlyMatchedException(this.exceptions,i,e)}throw new d(e)}}}},6987:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:n,InsufficientFunds:o,OrderNotFound:h,InvalidOrder:c,AccountSuspended:d,InvalidNonce:u,NotSupported:l,BadRequest:f,AuthenticationError:p,BadSymbol:m,RateLimitExceeded:g,PermissionDenied:y}=i(73449),b=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kucoin",name:"KuCoin",countries:["SC"],rateLimit:334,version:"v2",certified:!1,pro:!0,comment:"Platform 2.0",quoteJsonNumbers:!1,has:{swap:!1,future:!1,cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createDepositAddress:!0,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchBorrowRate:!1,fetchBorrowRates:!1,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFee:!0,fetchFundingHistory:!0,fetchFundingRateHistory:!1,fetchIndexOHLCV:!1,fetchL3OrderBook:!0,fetchLedger:!0,fetchMarkets:!0,fetchMarkOHLCV:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrdersByStatus:!0,fetchPremiumIndexOHLCV:!1,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,transfer:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87295558-132aaf80-c50e-11ea-9801-a2fb0c57c799.jpg",referral:"https://www.kucoin.com/?rcode=E5wkqe",api:{public:"https://openapi-v2.kucoin.com",private:"https://openapi-v2.kucoin.com",futuresPrivate:"https://api-futures.kucoin.com",futuresPublic:"https://api-futures.kucoin.com"},test:{public:"https://openapi-sandbox.kucoin.com",private:"https://openapi-sandbox.kucoin.com",futuresPrivate:"https://api-sandbox-futures.kucoin.com",futuresPublic:"https://api-sandbox-futures.kucoin.com"},www:"https://www.kucoin.com",doc:["https://docs.kucoin.com"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["timestamp","status","symbols","markets","market/allTickers","market/orderbook/level{level}_{limit}","market/orderbook/level2_20","market/orderbook/level2_100","market/histories","market/candles","market/stats","currencies","currencies/{currency}","prices","mark-price/{symbol}/current","margin/config"],post:["bullet-public"]},private:{get:["market/orderbook/level{level}","market/orderbook/level2","market/orderbook/level3","accounts","accounts/{accountId}","accounts/ledgers","accounts/{accountId}/holds","accounts/transferable","sub/user","sub-accounts","sub-accounts/{subUserId}","deposit-addresses","deposits","hist-deposits","hist-orders","hist-withdrawals","withdrawals","withdrawals/quotas","orders","order/client-order/{clientOid}","orders/{orderId}","limit/orders","fills","limit/fills","margin/account","margin/borrow","margin/borrow/outstanding","margin/borrow/borrow/repaid","margin/lend/active","margin/lend/done","margin/lend/trade/unsettled","margin/lend/trade/settled","margin/lend/assets","margin/market","margin/trade/last","stop-order/{orderId}","stop-order","stop-order/queryOrderByClientOid"],post:["accounts","accounts/inner-transfer","accounts/sub-transfer","deposit-addresses","withdrawals","orders","orders/multi","margin/borrow","margin/order","margin/repay/all","margin/repay/single","margin/lend","margin/toggle-auto-lend","bullet-private","stop-order"],delete:["withdrawals/{withdrawalId}","orders","orders/client-order/{clientOid}","orders/{orderId}","margin/lend/{orderId}","stop-order/cancelOrderByClientOid","stop-order/{orderId}","stop-order/cancel"]},futuresPublic:{get:["contracts/active","contracts/{symbol}","ticker","level2/snapshot","level2/depth20","level2/depth100","level2/message/query","level3/message/query","level3/snapshot","trade/history","interest/query","index/query","mark-price/{symbol}/current","premium/query","funding-rate/{symbol}/current","timestamp","status","kline/query"],post:["bullet-public"]},futuresPrivate:{get:["account-overview","transaction-history","deposit-address","deposit-list","withdrawals/quotas","withdrawal-list","transfer-list","orders","stopOrders","recentDoneOrders","orders/{order-id}","orders/byClientOid","fills","recentFills","openOrderStatistics","position","positions","funding-history"],post:["withdrawals","transfer-out","orders","position/margin/auto-deposit-status","position/margin/deposit-margin","bullet-private"],delete:["withdrawals/{withdrawalId}","cancel/transfer-out","orders/{order-id}","orders","stopOrders"]}},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","8h":"8hour","12h":"12hour","1d":"1day","1w":"1week"},exceptions:{exact:{"order not exist":h,"order not exist.":h,order_not_exist:h,order_not_exist_or_not_allow_to_cancel:c,"Order size below the minimum requirement.":c,"The withdrawal amount is below the minimum requirement.":r,"Unsuccessful! Exceeded the max. funds out-transfer limit":o,400:f,401:p,403:l,404:l,405:l,429:g,500:n,503:n,101030:y,200004:o,230003:o,260100:o,3e5:c,4e5:m,400001:p,400002:u,400003:p,400004:p,400005:p,400006:p,400007:p,400008:l,400100:f,400350:c,400500:c,411100:d,415e3:f,5e5:n},broad:{"Exceeded the access frequency":g,"require more permission":y}},fees:{trading:{tierBased:!0,percentage:!0,taker:this.parseNumber("0.001"),maker:this.parseNumber("0.001"),tiers:{taker:[[this.parseNumber("0"),this.parseNumber("0.001")],[this.parseNumber("50"),this.parseNumber("0.001")],[this.parseNumber("200"),this.parseNumber("0.0009")],[this.parseNumber("500"),this.parseNumber("0.0008")],[this.parseNumber("1000"),this.parseNumber("0.0007")],[this.parseNumber("2000"),this.parseNumber("0.0007")],[this.parseNumber("4000"),this.parseNumber("0.0006")],[this.parseNumber("8000"),this.parseNumber("0.0005")],[this.parseNumber("15000"),this.parseNumber("0.00045")],[this.parseNumber("25000"),this.parseNumber("0.0004")],[this.parseNumber("40000"),this.parseNumber("0.00035")],[this.parseNumber("60000"),this.parseNumber("0.0003")],[this.parseNumber("80000"),this.parseNumber("0.00025")]],maker:[[this.parseNumber("0"),this.parseNumber("0.001")],[this.parseNumber("50"),this.parseNumber("0.0009")],[this.parseNumber("200"),this.parseNumber("0.0007")],[this.parseNumber("500"),this.parseNumber("0.0005")],[this.parseNumber("1000"),this.parseNumber("0.0003")],[this.parseNumber("2000"),this.parseNumber("0")],[this.parseNumber("4000"),this.parseNumber("0")],[this.parseNumber("8000"),this.parseNumber("0")],[this.parseNumber("15000"),this.parseNumber("-0.00005")],[this.parseNumber("25000"),this.parseNumber("-0.00005")],[this.parseNumber("40000"),this.parseNumber("-0.00005")],[this.parseNumber("60000"),this.parseNumber("-0.00005")],[this.parseNumber("80000"),this.parseNumber("-0.00005")]]}},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{HOT:"HOTNOW",EDGE:"DADI",WAX:"WAXP",TRY:"Trias",VAI:"VAIOT"},options:{version:"v1",symbolSeparator:"-",fetchMyTradesMethod:"private_get_fills",fetchBalance:"trade",fetchMarkets:{fetchTickersFees:!0},versions:{public:{GET:{status:"v1","market/orderbook/level2_20":"v1","market/orderbook/level2_100":"v1","market/orderbook/level{level}_{limit}":"v1"}},private:{GET:{"market/orderbook/level2":"v3","market/orderbook/level3":"v3","market/orderbook/level{level}":"v3"},POST:{"accounts/inner-transfer":"v2","accounts/sub-transfer":"v2"}},futuresPrivate:{GET:{"account-overview":"v1",positions:"v1"},POST:{"transfer-out":"v2"}},futuresPublic:{GET:{"level3/snapshot":"v2"}}},accountsByType:{trade:"trade",trading:"trade",spot:"trade",margin:"margin",main:"main",funding:"main",futures:"contract",contract:"contract",pool:"pool","pool-x":"pool"},networks:{ETH:"eth",ERC20:"eth",TRX:"trx",TRC20:"trx",KCC:"kcc",TERRA:"luna"}}})}nonce(){return this.milliseconds()}async loadTimeDifference(e={}){const t=await this.publicGetTimestamp(e),i=this.milliseconds(),s=this.safeInteger(t,"data");return this.options.timeDifference=parseInt(i-s),this.options.timeDifference}async fetchTime(e={}){const t=await this.publicGetTimestamp(e);return this.safeInteger(t,"data")}async fetchStatus(e={}){const t=await this.publicGetStatus(e),i=this.safeValue(t,"data",{});let s=this.safeValue(i,"status");return void 0!==s&&(s="open"===s?"ok":"maintenance",this.status=this.extend(this.status,{status:s,updated:this.milliseconds()})),this.status}async fetchMarkets(e={}){const t=await this.publicGetSymbols(e),i=this.safeValue(t,"data"),s=this.safeValue(this.options,"fetchMarkets",{});let r={};this.safeValue(s,"fetchTickersFees",!0)&&(r=await this.publicGetMarketAllTickers(e));const a=this.safeValue(r,"data",{}),n=this.safeValue(a,"ticker",[]),o=this.indexBy(n,"symbol"),h=[];for(let e=0;e<i.length;e++){const t=i[e],s=this.safeString(t,"symbol"),[r,a]=s.split("-"),n=this.safeCurrencyCode(r),c=this.safeCurrencyCode(a),d=n+"/"+c,u=this.safeValue(t,"enableTrading"),l=this.safeValue(t,"isMarginEnabled"),f=this.safeNumber(t,"baseMaxSize"),p=this.safeString(t,"baseMinSize"),m=this.safeString(t,"quoteMaxSize"),g=this.parseNumber(p),y=this.parseNumber(m),v=this.safeNumber(t,"quoteMinSize"),w={amount:this.precisionFromString(this.safeString(t,"baseIncrement")),price:this.precisionFromString(this.safeString(t,"priceIncrement"))},k={amount:{min:g,max:f},price:{min:this.safeNumber(t,"priceIncrement"),max:this.parseNumber(b.stringDiv(m,p))},cost:{min:v,max:y},leverage:{max:this.safeNumber(t,"maxLeverage",1)}},_=this.safeValue(o,s,{}),S=this.safeString(_,"makerFeeRate"),O=this.safeString(_,"makerFeeRate"),M=this.safeString(_,"makerCoefficient"),T=this.safeString(_,"takerCoefficient"),x=this.parseNumber(b.stringMul(S,M)),I=this.parseNumber(b.stringMul(O,T));h.push({id:s,symbol:d,baseId:r,quoteId:a,base:n,quote:c,type:"spot",spot:!0,margin:l,active:u,maker:x,taker:I,precision:w,limits:k,info:t})}return h}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i=this.safeValue(t,"data",[]),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currency"),a=this.safeString(t,"fullName"),n=this.safeCurrencyCode(r),o=this.safeInteger(t,"precision"),h=this.safeValue(t,"isWithdrawEnabled",!1),c=this.safeValue(t,"isDepositEnabled",!1),d=this.safeNumber(t,"withdrawalMinFee"),u=h&&c;s[n]={id:r,name:a,code:n,precision:o,info:t,active:u,fee:d,limits:this.limits}}return s}async fetchAccounts(e={}){const t=await this.privateGetAccounts(e),i=this.safeValue(t,"data"),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"id"),a=this.safeString(t,"currency"),n=this.safeCurrencyCode(a),o=this.safeString(t,"type");s.push({id:r,type:o,currency:n,info:t})}return s}async fetchFundingFee(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetWithdrawalsQuotas(this.extend(i,t)),r=s.data,a={};return a[e]=this.safeNumber(r,"withdrawMinFee"),{info:s,withdraw:a,deposit:{}}}isFuturesMethod(e,t){const i=this.safeString2(this.options,e,"defaultType","trade"),s=this.safeString(t,"type",i),a=this.safeValue(this.options,"accountsByType"),n=this.safeString(a,s);if(void 0===n){const e=Object.keys(a);throw new r(this.id+" type must be one of "+e.join(", "))}return t=this.omit(t,"type"),"contract"===n||"futures"===n}async fetchFundingHistory(e,t,i,s={}){if(this.isFuturesMethod("fetchFundingHistory",s)){if(void 0===e)throw new a(this.id+" fetchFundingHistory() requires a symbol argument");await this.loadMarkets();const r={symbol:this.market(e).id};void 0!==t&&(r.startAt=t),void 0!==i&&(r.maxCount=i);const n="futuresPrivateGetFundingHistory",o=await this[n](this.extend(r,s)),h=this.safeValue(o,"data"),c=this.safeValue(h,"dataList"),d=[];for(let e=0;e<c.length;e++){const t=this.safeInteger(c[e],"timePoint");d.push({info:c[e],symbol:this.safeSymbol(c[e],"symbol"),code:this.safeCurrencyCode(c[e],"settleCurrency"),timestamp:t,datetime:this.iso8601(t),id:this.safeNumber(c[e],"id"),amount:this.safeNumber(c[e],"funding"),fundingRate:this.safeNumber(c[e],"fundingRate"),markPrice:this.safeNumber(c[e],"markPrice"),positionQty:this.safeNumber(c[e],"positionQty"),positionCost:this.safeNumber(c[e],"positionCost")})}return d}throw new l(this.id+" fetchFundingHistory() supports linear and inverse contracts only")}parseTicker(e,t){let i=this.safeNumber(e,"changeRate");void 0!==i&&(i*=100);let s=this.safeNumber2(e,"last","lastTradedPrice");s=this.safeNumber(e,"price",s);const r=this.safeString(e,"symbol"),a=(t=this.safeMarket(r,t,"-")).symbol,n=this.safeNumber(e,"vol"),o=this.safeNumber(e,"volValue"),h=this.vwap(n,o),c=this.safeInteger2(e,"time","datetime");return this.safeTicker({symbol:a,timestamp:c,datetime:this.iso8601(c),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber2(e,"buy","bestBid"),bidVolume:this.safeNumber(e,"bestBidSize"),ask:this.safeNumber2(e,"sell","bestAsk"),askVolume:this.safeNumber(e,"bestAskSize"),vwap:h,open:this.safeNumber(e,"open"),close:s,last:s,previousClose:void 0,change:this.safeNumber(e,"changePrice"),percentage:i,average:this.safeNumber(e,"averagePrice"),baseVolume:n,quoteVolume:o,info:e},t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketAllTickers(t),s=this.safeValue(i,"data",{}),r=this.safeValue(s,"ticker",[]),a=this.safeInteger(s,"time"),n={};for(let e=0;e<r.length;e++){r[e].time=a;const t=this.parseTicker(r[e]),i=this.safeString(t,"symbol");void 0!==i&&(n[i]=t)}return this.filterByArray(n,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetMarketStats(this.extend(s,t));return this.parseTicker(r.data,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,2),this.safeNumber(e,5)]}async fetchOHLCV(e,t="15m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id,type:this.timeframes[t]},o=1e3*this.parseTimeframe(t);let h=this.milliseconds();void 0!==i?(n.startAt=parseInt(Math.floor(i/1e3)),void 0===s&&(s=this.safeInteger(this.options,"fetchOHLCVLimit",1500)),h=this.sum(i,s*o)):void 0!==s&&(i=h-s*o,n.startAt=parseInt(Math.floor(i/1e3))),n.endAt=parseInt(Math.floor(h/1e3));const c=await this.publicGetMarketCandles(this.extend(n,r)),d=this.safeValue(c,"data",[]);return this.parseOHLCVs(d,a,t,i,s)}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privatePostDepositAddresses(this.extend(i,t)),r=this.safeValue(s,"data",{});let a=this.safeString(r,"address");void 0!==a&&(a=a.replace("bitcoincash:",""));const n=this.safeString(r,"memo");return"NIM"!==e&&this.checkAddress(a),{info:s,currency:e,address:a,tag:n}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=this.safeValue(this.options,"networks",{});let r=this.safeStringUpper(t,"network");r=this.safeStringLower(s,r,r),void 0!==r&&(i.chain=r,t=this.omit(t,"network"));const a=await this.privateGetDepositAddresses(this.extend(i,t)),n=this.safeValue(a,"data",{}),o=this.safeString(n,"address"),h=this.safeString(n,"memo");return"NIM"!==e&&this.checkAddress(o),{info:a,currency:e,address:o,tag:h,network:void 0}}async fetchL3OrderBook(e,t,i={}){return await this.fetchOrderBook(e,t,{level:3})}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.marketId(e),a=this.safeInteger(i,"level",2),n={symbol:s,level:a};let o="privateGetMarketOrderbookLevelLevel";if(2===a&&void 0!==t){if(20!==t&&100!==t)throw new r(this.id+" fetchOrderBook limit argument must be undefined, 20 or 100");n.limit=t,o="publicGetMarketOrderbookLevelLevelLimit"}const h=await this[o](this.extend(n,i)),c=this.safeValue(h,"data",{}),d=this.safeInteger(c,"time"),u=this.parseOrderBook(c,e,d,"bids","asks",a-2,a-1);return u.nonce=this.safeInteger(c,"sequence"),u}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.marketId(e),o=this.safeString2(a,"clientOid","clientOrderId",this.uuid());a=this.omit(a,["clientOid","clientOrderId"]);const h={clientOid:o,side:i,symbol:n,type:t},c=this.safeNumber2(a,"cost","funds");let d,u;"market"===t?void 0!==c?(a=this.omit(a,["cost","funds"]),u=this.amountToPrecision(e,c),h.funds=u):(d=this.amountToPrecision(e,s),h.size=this.amountToPrecision(e,s)):(d=this.amountToPrecision(e,s),h.size=d,h.price=this.priceToPrecision(e,r));const l=await this.privatePostOrders(this.extend(h,a)),f=this.safeValue(l,"data",{}),p=this.milliseconds();return{id:this.safeString(f,"orderId"),clientOrderId:o,info:f,timestamp:p,datetime:this.iso8601(p),lastTradeTimestamp:void 0,symbol:e,type:t,side:i,price:r,amount:this.parseNumber(d),cost:this.parseNumber(u),average:void 0,filled:void 0,remaining:void 0,status:void 0,fee:void 0,trades:void 0}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={},r=this.safeString2(i,"clientOid","clientOrderId");let a="privateDeleteOrdersOrderId";return void 0!==r?(s.clientOid=r,a="privateDeleteOrdersClientOrderClientOid"):s.orderId=e,i=this.omit(i,["clientOid","clientOrderId"]),await this[a](this.extend(s,i))}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s;return void 0!==e&&(s=this.market(e),i.symbol=s.id),await this.privateDeleteOrders(this.extend(i,t))}async fetchOrdersByStatus(e,t,i,s,r={}){await this.loadMarkets();const a={status:e};let n;void 0!==t&&(n=this.market(t),a.symbol=n.id),void 0!==i&&(a.startAt=i),void 0!==s&&(a.pageSize=s);const o=await this.privateGetOrders(this.extend(a,r)),h=this.safeValue(o,"data",{}),c=this.safeValue(h,"items",[]);return this.parseOrders(c,n,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("done",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("active",e,t,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={},r=this.safeString2(i,"clientOid","clientOrderId");let a="privateGetOrdersOrderId";if(void 0!==r)s.clientOid=r,a="privateGetOrdersClientOrderClientOid";else{if(void 0===e)throw new c(this.id+" fetchOrder() requires an order id");s.orderId=e}i=this.omit(i,["clientOid","clientOrderId"]);const n=await this[a](this.extend(s,i));let o;void 0!==t&&(o=this.market(t));const h=this.safeValue(n,"data");return this.parseOrder(h,o)}parseOrder(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t,"-"),r=this.safeString(e,"id"),a=this.safeString(e,"type"),n=this.safeInteger(e,"createdAt"),o=this.iso8601(n),h=this.safeString(e,"price"),c=this.safeString(e,"side"),d=this.safeString(e,"feeCurrency"),u=this.safeCurrencyCode(d),l=this.safeNumber(e,"fee"),f=this.safeString(e,"size"),p=this.safeString(e,"dealSize"),m=this.safeString(e,"dealFunds");let g=this.safeValue(e,"isActive",!1)?"open":"closed";g=this.safeValue(e,"cancelExist",!1)?"canceled":g;const y={currency:u,cost:l},b=this.safeString(e,"clientOid"),v=this.safeString(e,"timeInForce"),w=this.safeNumber(e,"stopPrice"),k=this.safeValue(e,"postOnly");return this.safeOrder2({id:r,clientOrderId:b,symbol:s,type:a,timeInForce:v,postOnly:k,side:c,amount:f,price:h,stopPrice:w,cost:m,filled:p,remaining:void 0,timestamp:n,datetime:o,fee:y,status:g,info:e,lastTradeTimestamp:void 0,average:void 0,trades:void 0},t)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a={};let n;void 0!==e&&(n=this.market(e),a.symbol=n.id),void 0!==i&&(a.pageSize=i);const o=this.options.fetchMyTradesMethod;let h=!1;if("private_get_fills"===o)void 0!==t&&(a.startAt=t);else if("private_get_limit_fills"===o)h=!0;else{if("private_get_hist_orders"!==o)throw new r(this.id+" invalid fetchClosedOrder method");void 0!==t&&(a.startAt=parseInt(t/1e3))}const c=await this[o](this.extend(a,s)),d=this.safeValue(c,"data",{});let u;return u=h?d:this.safeValue(d,"items",[]),this.parseTrades(u,n,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==t&&(a.startAt=Math.floor(t/1e3)),void 0!==i&&(a.pageSize=i);const n=await this.publicGetMarketHistories(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseTrades(o,r,t,i)}parseTrade(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t,"-"),r=this.safeString2(e,"tradeId","id"),a=this.safeString(e,"orderId"),n=this.safeString(e,"liquidity");let o=this.safeInteger(e,"time");void 0!==o?o=parseInt(o/1e6):(o=this.safeInteger(e,"createdAt"),"dealValue"in e&&void 0!==o&&(o*=1e3));const h=this.safeString2(e,"price","dealPrice"),c=this.safeString2(e,"size","amount"),d=this.parseNumber(h),u=this.parseNumber(c),l=this.safeString(e,"side");let f;const p=this.safeNumber(e,"fee");if(void 0!==p){const i=this.safeString(e,"feeCurrency");let s=this.safeCurrencyCode(i);void 0===s&&void 0!==t&&(s="sell"===l?t.quote:t.base),f={cost:p,currency:s,rate:this.safeNumber(e,"feeRate")}}let m=this.safeString(e,"type");"match"===m&&(m=void 0);let g=this.safeNumber2(e,"funds","dealValue");return void 0===g&&(g=this.parseNumber(b.stringMul(h,c))),{info:e,id:r,order:a,timestamp:o,datetime:this.iso8601(o),symbol:s,type:m,takerOrMaker:n,side:l,price:d,amount:u,cost:g,fee:f}}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),await this.loadMarkets(),this.checkAddress(i);const a={currency:this.currency(e).id,address:i,amount:t};void 0!==s&&(a.memo=s);const n=this.safeValue(this.options,"networks",{});let o=this.safeStringUpper(r,"network");o=this.safeStringLower(n,o,o),void 0!==o&&(a.chain=o,r=this.omit(r,"network"));const h=await this.privatePostWithdrawals(this.extend(a,r)),c=this.safeValue(h,"data",{});return{id:this.safeString(c,"withdrawalId"),info:h}}parseTransactionStatus(e){return this.safeString({SUCCESS:"ok",PROCESSING:"ok",FAILURE:"failed"},e)}parseTransaction(e,t){const i=this.safeString(e,"currency"),s=this.safeCurrencyCode(i,t);let r=this.safeString(e,"address");const a=this.safeNumber(e,"amount");let n=this.safeString(e,"walletTxId");if(void 0!==n){const e=n.split("@");e.length>1&&void 0===r&&e[1].length>1&&(r=e[1]),n=e[0]}let o=void 0===n?"withdrawal":"deposit";const h=this.safeString(e,"status"),c=this.parseTransactionStatus(h);let d;const u=this.safeNumber(e,"fee");if(void 0!==u){let e;void 0!==a&&(e=u/a),d={cost:u,rate:e,currency:s}}const l=this.safeString(e,"memo");let f=this.safeInteger2(e,"createdAt","createAt");const p=this.safeString(e,"id");let m=this.safeInteger(e,"updatedAt");!("createdAt"in e)&&(o="address"in e?"withdrawal":"deposit",void 0!==f&&(f*=1e3),void 0!==m&&(m*=1e3));const g=this.safeString(e,"remark");return{id:p,info:e,timestamp:f,datetime:this.iso8601(f),address:r,addressTo:r,addressFrom:void 0,tag:l,tagTo:l,tagFrom:void 0,currency:s,amount:a,txid:n,type:o,status:c,comment:g,fee:d,updated:m}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.pageSize=i);let n="privateGetDeposits";void 0!==t&&(t<1550448e6?(r.startAt=parseInt(t/1e3),n="privateGetHistDeposits"):r.startAt=t);const o=(await this[n](this.extend(r,s))).data.items;return this.parseTransactions(o,a,t,i,{type:"deposit"})}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.pageSize=i);let n="privateGetWithdrawals";void 0!==t&&(t<1550448e6?(r.startAt=parseInt(t/1e3),n="privateGetHistWithdrawals"):r.startAt=t);const o=(await this[n](this.extend(r,s))).data.items;return this.parseTransactions(o,a,t,i,{type:"withdrawal"})}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString2(this.options,"fetchBalance","defaultType","trade"),i=this.safeString(e,"type",t),s=this.safeValue(this.options,"accountsByType"),a=this.safeString(s,i);if(void 0===a){const e=Object.keys(s);throw new r(this.id+" type must be one of "+e.join(", "))}if(e=this.omit(e,"type"),"contract"===a||"futures"===a){const t=await this.futuresPrivateGetAccountOverview(e),i={info:t,timestamp:void 0,datetime:void 0},s=this.safeValue(t,"data"),r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r),n=this.account();return n.free=this.safeString(s,"availableBalance"),n.total=this.safeString(s,"accountEquity"),i[a]=n,this.parseBalance(i)}{const t={type:a},i=await this.privateGetAccounts(this.extend(t,e)),s=this.safeValue(i,"data",[]),r={info:i,timestamp:void 0,datetime:void 0};for(let e=0;e<s.length;e++){const t=s[e];if(this.safeString(t,"type")===a){const e=this.safeString(t,"currency"),i=this.safeCurrencyCode(e),s=this.account();s.total=this.safeString(t,"balance"),s.free=this.safeString(t,"available"),s.used=this.safeString(t,"holds"),r[i]=s}}return this.parseBalance(r)}}async transfer(e,t,i,s,a={}){await this.loadMarkets();const n=this.currency(e),o=this.currencyToPrecision(e,t),h=this.safeValue(this.options,"accountsByType",{}),c=this.safeString(h,i);if(void 0===c){const e=Object.keys(h);throw new r(this.id+" fromAccount must be one of "+e.join(", "))}const d=this.safeString(h,s);if(void 0===d){const e=Object.keys(h);throw new r(this.id+" toAccount must be one of "+e.join(", "))}if("contract"===c){if("main"!==d)throw new r(this.id+" only supports transferring from futures account to main account");const e={currency:n.id,amount:o};"bizNo"in a||(e.bizNo=this.uuid22());const t=await this.futuresPrivatePostTransferOut(this.extend(e,a)),i=this.safeValue(t,"data"),s=this.safeInteger(i,"createdAt"),h=this.safeString(i,"applyId"),u=this.safeString(i,"currency"),l=this.safeCurrencyCode(u),f=this.safeNumber(i,"amount");let p;return"PROCESSING"===this.safeString(i,"status")&&(p="pending"),{info:t,currency:l,timestamp:s,datetime:this.iso8601(s),amount:f,fromAccount:c,toAccount:d,id:h,status:p}}{const t={currency:n.id,from:c,to:d,amount:o};"clientOid"in a||(t.clientOid=this.uuid());const i=await this.privatePostAccountsInnerTransfer(this.extend(t,a)),s=this.safeValue(i,"data");return{info:i,id:this.safeString(s,"orderId"),timestamp:void 0,datetime:void 0,currency:e,amount:o,fromAccount:c,toAccount:d,status:void 0}}}parseLedgerEntryType(e){return this.safeString({"Assets Transferred in After Upgrading":"transfer",Deposit:"transaction",Withdrawal:"transaction",Transfer:"transfer",Trade_Exchange:"trade","KuCoin Bonus":"bonus","Referral Bonus":"referral",Rewards:"bonus","Airdrop/Fork":"airdrop","Other rewards":"bonus","Fee Rebate":"rebate","Buy Crypto":"trade","Sell Crypto":"sell","Public Offering Purchase":"trade","Refunded Fees":"fee","KCS Pay Fees":"fee","Margin Trade":"trade",Loans:"Loans","Instant Exchange":"trade","Sub-account transfer":"transfer","Liquidation Fees":"fee"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"currency"),r=this.safeCurrencyCode(s,t),a=this.safeNumber(e,"amount"),n=this.safeString(e,"bizType"),o=this.parseLedgerEntryType(n),h=this.safeString(e,"direction"),c=this.safeInteger(e,"createdAt"),d=this.iso8601(c),u=this.safeString(e,"accountType"),l=this.safeString(e,"context");let f,p;if(void 0!==l&&""!==l){const e=JSON.parse(l),t=this.safeString(e,"orderId"),i=this.safeString(e,"tradeId");f=void 0!==i?i:t}const m=this.safeNumber(e,"fee");let g;return 0!==m&&(g=r,p={cost:m,currency:g}),{id:i,direction:h,account:u,referenceId:f,referenceAccount:u,type:o,currency:r,amount:a,timestamp:c,datetime:d,before:void 0,after:void 0,status:void 0,fee:p,info:e}}async fetchLedger(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();const r={};let a;void 0!==t&&(r.startAt=t),void 0!==e&&(a=this.currency(e),r.currency=a.id);const n=await this.privateGetAccountsLedgers(this.extend(r,s)),o=this.safeValue(n,"data"),h=this.safeValue(o,"items");return this.parseLedger(h,a,t,i)}async fetchPositions(e,t={}){const i=await this.futuresPrivateGetPositions(t);return this.safeValue(i,"data",i)}sign(e,t="public",i="GET",s={},r,a){const n=this.safeValue(this.options,"versions",{}),o=this.safeValue(n,t,{}),h=this.safeValue(o,i,{}),c=this.safeString(h,e,this.options.version),d=this.safeString(s,"version",c);s=this.omit(s,"version");let u="/api/"+d+"/"+this.implodeParams(e,s);const l=this.omit(s,this.extractParams(e));let f="";r=void 0!==r?r:{},Object.keys(l).length&&("GET"===i||"DELETE"===i?u+="?"+this.urlencode(l):(f=a=this.json(l),r["Content-Type"]="application/json"));const p=this.urls.api[t]+u;if("private"===t||"futuresPrivate"===t){this.checkRequiredCredentials();const e=this.nonce().toString();if(r=this.extend({"KC-API-KEY-VERSION":"2","KC-API-KEY":this.apiKey,"KC-API-TIMESTAMP":e},r),"2"===this.safeString(r,"KC-API-KEY-VERSION")){const e=this.hmac(this.encode(this.password),this.encode(this.secret),"sha256","base64");r["KC-API-PASSPHRASE"]=e}else r["KC-API-PASSPHRASE"]=this.password;const t=e+i+u+f,s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64");r["KC-API-SIGN"]=s;const a=this.safeValue(this.options,"partner",{}),n=this.safeString(a,"id"),o=this.safeString(a,"secret");if(void 0!==n&&void 0!==o){const t=e+n+this.apiKey,i=this.hmac(this.encode(t),this.encode(o),"sha256","base64");r["KC-API-PARTNER-SIGN"]=i,r["KC-API-PARTNER"]=n}}return{url:p,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,n,o,h){if(!n)return void this.throwBroadlyMatchedException(this.exceptions.broad,a,a);const c=this.safeString(n,"code"),d=this.safeString(n,"msg","");this.throwExactlyMatchedException(this.exceptions.exact,d,this.id+" "+d),this.throwExactlyMatchedException(this.exceptions.exact,c,this.id+" "+d)}}},14400:(e,t,i)=>{"use strict";const s=i(48819),{ArgumentsRequired:r,InsufficientFunds:a,OrderNotFound:n,NotSupported:o}=i(73449),h=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kuna",name:"Kuna",countries:["UA"],rateLimit:1e3,version:"v2",has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:"emulated",fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,withdraw:void 0},timeframes:void 0,urls:{extension:".json",referral:"https://kuna.io?r=kunaid-gvfihe8az7o4",logo:"https://user-images.githubusercontent.com/51840849/87153927-f0578b80-c2c0-11ea-84b6-74612568e9e1.jpg",api:{xreserve:"https://api.xreserve.fund",v3:"https://api.kuna.io",public:"https://kuna.io",private:"https://kuna.io"},www:"https://kuna.io",doc:"https://kuna.io/documents/api",fees:"https://kuna.io/documents/api"},api:{xreserve:{get:{nonce:1,fee:1,"delegated-transactions":1},post:{"delegate-transfer":1}},v3:{public:{get:{timestamp:1,currencies:1,markets:1,tickers:1,k:1,trades_history:1,fees:1,"exchange-rates":1,"exchange-rates/currency":1,"book/market":1,"kuna_codes/code/check":1,landing_page_statistic:1,"translations/locale":1,"trades/market/hist":1},post:{http_test:1,deposit_channels:1,withdraw_channels:1,subscription_plans:1,send_to:1,confirm_token:1,kunaid:1,"withdraw/prerequest":1,"deposit/prerequest":1,"deposit/exchange-rates":1}},sign:{get:{"reset_password/token":1},post:{"signup/google":1,"signup/resend_confirmation":1,signup:1,signin:1,"signin/two_factor":1,"signin/resend_confirm_device":1,"signin/confirm_device":1,reset_password:1,"cool-signin":1},put:{"reset_password/token":1,"signup/code/confirm":1}},private:{post:{"auth/w/order/submit":1,"auth/r/orders":1,"auth/r/orders/market":1,"auth/r/orders/markets":1,"auth/api_tokens/delete":1,"auth/api_tokens/create":1,"auth/api_tokens":1,"auth/signin_history/uniq":1,"auth/signin_history":1,"auth/disable_withdraw_confirmation":1,"auth/change_password":1,"auth/deposit_address":1,"auth/announcements/accept":1,"auth/announcements/unaccepted":1,"auth/otp/deactivate":1,"auth/otp/activate":1,"auth/otp/secret":1,"auth/r/order/market/:order_id/trades":1,"auth/r/orders/market/hist":1,"auth/r/orders/hist":1,"auth/r/orders/hist/markets":1,"auth/r/orders/details":1,"auth/assets-history":1,"auth/assets-history/withdraws":1,"auth/assets-history/deposits":1,"auth/r/wallets":1,"auth/markets/favorites":1,"auth/markets/favorites/list":1,"auth/me/update":1,"auth/me":1,"auth/fund_sources":1,"auth/fund_sources/list":1,"auth/withdraw/resend_confirmation":1,"auth/withdraw":1,"auth/withdraw/details":1,"auth/withdraw/info":1,"auth/payment_addresses":1,"auth/deposit/prerequest":1,"auth/deposit/exchange-rates":1,"auth/deposit":1,"auth/deposit/details":1,"auth/deposit/info":1,"auth/kuna_codes/count":1,"auth/kuna_codes/details":1,"auth/kuna_codes/edit":1,"auth/kuna_codes/send-pdf":1,"auth/kuna_codes":1,"auth/kuna_codes/redeemed-by-me":1,"auth/kuna_codes/issued-by-me":1,"auth/payment_requests/invoice":1,"auth/payment_requests/type":1,"auth/referral_program/weekly_earnings":1,"auth/referral_program/stats":1,"auth/merchant/payout_services":1,"auth/merchant/withdraw":1,"auth/merchant/payment_services":1,"auth/merchant/deposit":1,"auth/verification/auth_token":1,"auth/kunaid_purchase/create":1,"auth/devices/list":1,"auth/sessions/list":1,"auth/subscriptions/reactivate":1,"auth/subscriptions/cancel":1,"auth/subscriptions/prolong":1,"auth/subscriptions/create":1,"auth/subscriptions/list":1,"auth/kuna_ids/list":1,"order/cancel/multi":1,"order/cancel":1},put:{"auth/fund_sources/id":1,"auth/kuna_codes/redeem":1},delete:{"auth/markets/favorites":1,"auth/fund_sources":1,"auth/devices":1,"auth/devices/list":1,"auth/sessions/list":1,"auth/sessions":1}}},public:{get:["depth","k_with_pending_trades","k","markets","order_book","order_book/{market}","tickers","tickers/{market}","timestamp","trades","trades/{market}"]},private:{get:["members/me","deposits","deposit","deposit_address","orders","order","trades/my","withdraws","withdraw"],post:["orders","orders/multi","orders/clear","order/delete","withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.0025,maker:.0025},funding:{withdraw:{UAH:"1%",BTC:.001,BCH:.001,ETH:.01,WAVES:.01,GOL:0,GBG:0},deposit:{}}},commonCurrencies:{PLA:"Plair"},exceptions:{2002:a,2003:n}})}async fetchTime(e={}){return 1e3*await this.publicGetTimestamp(e)}async fetchMarkets(e={}){const t=["btc","rub","uah","usd","usdt","usdc"],i=[],s=await this.publicGetTickers(e),r=Object.keys(s);for(let e=0;e<r.length;e++){const s=r[e];for(let e=0;e<t.length;e++){const r=t[e],a=s.slice(1),n=a.indexOf(r),o=a.slice(n);if(n>0&&o===r){const e=s[0]+a.replace(r,""),t=this.safeCurrencyCode(e),n=this.safeCurrencyCode(r),o=t+"/"+n;i.push({id:s,symbol:o,base:t,quote:n,baseId:e,quoteId:r,type:"spot",spot:!0,active:void 0,precision:{amount:void 0,price:void 0},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:void 0})}}}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.publicGetDepth(this.extend(s,i)),a=this.safeTimestamp(r,"timestamp");return this.parseOrderBook(r,e,a)}parseTicker(e,t){const i=this.safeTimestamp(e,"at");let s;e=e.ticker,t&&(s=t.symbol);const r=this.safeNumber(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:this.safeNumber(e,"open"),close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"vol"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){const t=s[e];let a,n=t;if(t in this.markets_by_id)a=this.markets_by_id[t],n=a.symbol;else{let e=t.slice(0,3),i=t.slice(3,6);e=e.toUpperCase(),i=i.toUpperCase(),e=this.safeCurrencyCode(e),i=this.safeCurrencyCode(i),n=e+"/"+i}r[n]=this.parseTicker(i[t],a)}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.publicGetTickersMarket(this.extend(s,t));return this.parseTicker(r,i)}async fetchL3OrderBook(e,t,i={}){return await this.fetchOrderBook(e,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id},n=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at"));let s;t&&(s=t.symbol);let r=this.safeString2(e,"side","trend");if(void 0!==r){const e={ask:"sell",bid:"buy"};r=this.safeString(e,r,r)}const a=this.safeString(e,"price"),n=this.safeString(e,"volume"),o=this.parseNumber(a),c=this.parseNumber(n);let d=this.safeNumber(e,"funds");void 0===d&&(d=this.parseNumber(h.stringMul(a,n)));const u=this.safeString(e,"order_id");return{id:this.safeString(e,"id"),info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,side:r,order:u,takerOrMaker:void 0,price:o,amount:c,cost:d,fee:void 0}}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=await this.fetchTrades(e,i,s,r),n=this.buildOHLCVC(a,t,i,s),o=[];for(let e=0;e<n.length;e++){const t=n[e];o.push([t[0],t[1],t[2],t[3],t[4],t[5]])}return o}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetMembersMe(e),i=this.safeValue(t,"accounts"),s={info:i};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(t,"balance"),n.used=this.safeString(t,"locked"),s[a]=n}return this.parseBalance(s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n={market:this.marketId(e),side:i,volume:s.toString(),ord_type:t};"limit"===t&&(n.price=r.toString());const o=await this.privatePostOrders(this.extend(n,a)),h=this.safeValue(o,"market"),c=this.safeValue(this.markets_by_id,h);return this.parseOrder(o,c)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privatePostOrderDelete(this.extend(s,i)),a=this.parseOrder(r),o=a.status;if("closed"===o||"canceled"===o)throw new n(this.id+" "+this.json(a));return a}parseOrderStatus(e){return this.safeString({done:"closed",wait:"open",cancel:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"market"),s=this.safeSymbol(i,t),r=this.parse8601(this.safeString(e,"created_at")),a=this.parseOrderStatus(this.safeString(e,"state")),n=this.safeString(e,"type"),o=this.safeString(e,"side"),h=this.safeString(e,"id");return this.safeOrder2({id:h,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:a,symbol:s,type:n,timeInForce:void 0,postOnly:void 0,side:o,price:this.safeString(e,"price"),stopPrice:void 0,amount:this.safeString(e,"volume"),filled:this.safeString(e,"executed_volume"),remaining:this.safeString(e,"remaining_volume"),trades:void 0,fee:void 0,info:e,cost:void 0,average:void 0},t)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:parseInt(e)},r=await this.privateGetOrder(this.extend(s,i));return this.parseOrder(r)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const a=this.market(e),n={market:a.id},o=await this.privateGetOrders(this.extend(n,s));return this.parseOrders(o,a,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const a=this.market(e),n={market:a.id},o=await this.privateGetTradesMy(this.extend(n,s));return this.parseTrades(o,a,t,i)}nonce(){return this.milliseconds()}encodeParams(e){if("orders"in e){const t=e.orders;let i=this.urlencode(this.keysort(this.omit(e,"orders")));for(let e=0;e<t.length;e++){const s=t[e],r=Object.keys(s);for(let e=0;e<r.length;e++){const t=r[e];i+="&orders%5B%5D%5B"+t+"%5D="+s[t].toString()}}return i}return this.urlencode(this.keysort(e))}sign(e,t="public",i="GET",s={},r,a){let n;if(Array.isArray(t)){const[h,c]=t;if(n=this.urls.api[h]+"/"+h+"/"+this.implodeParams(e,s),"public"===c)"GET"===i?Object.keys(s).length&&(n+="?"+this.urlencode(s)):"POST"!==i&&"PUT"!==i||(r={"Content-Type":"application/json"},a=this.json(s));else if("private"===c)throw new o(this.id+" private v3 API is not supported yet")}else{let o="/api/"+this.version+"/"+this.implodeParams(e,s);"extension"in this.urls&&(o+=this.urls.extension);const h=this.omit(s,this.extractParams(e));if(n=this.urls.api[t]+o,"public"===t)Object.keys(h).length&&(n+="?"+this.urlencode(h));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.encodeParams(this.extend({access_key:this.apiKey,tonce:e},s)),h=i+"|"+o+"|"+t,c=t+"&signature="+this.hmac(this.encode(h),this.encode(this.secret));"GET"===i?n+="?"+c:(a=c,r={"Content-Type":"application/x-www-form-urlencoded"})}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,n,o,h){if(void 0!==n&&400===e){const e=this.safeValue(n,"error"),t=this.safeString(e,"code"),i=this.id+" "+this.json(n);this.throwExactlyMatchedException(this.exceptions,t,i)}}}},22444:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,AuthenticationError:a,ArgumentsRequired:n,InvalidNonce:o,BadRequest:h,ExchangeNotAvailable:c,PermissionDenied:d,AccountSuspended:u,RateLimitExceeded:l,InsufficientFunds:f}=i(73449),{TICK_SIZE:p}=i(62115);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"latoken",name:"Latoken",countries:["KY"],version:"v2",rateLimit:1e3,has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchOrder:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/61511972-24c39f00-aa01-11e9-9f7c-471f1d6e5214.jpg",api:"https://api.latoken.com",www:"https://latoken.com",doc:["https://api.latoken.com"],fees:"https://latoken.com/fees",referral:"https://latoken.com/invite?r=mvgp2djk"},api:{public:{get:{"book/{currency}/{quote}":1,"chart/week":1,"chart/week/{currency}/{quote}":1,currency:1,"currency/available":1,"currency/quotes":1,"currency/{currency}":1,pair:1,"pair/available":1,ticker:1,"ticker/{base}/{quote}":1,time:1,"trade/history/{currency}/{quote}":1,"trade/fee/{currency}/{quote}":1,"trade/feeLevels":1,"transaction/bindings":1}},private:{get:{"auth/account":1,"auth/account/currency/{currency}/{type}":1,"auth/order":1,"auth/order/getOrder/{id}":1,"auth/order/pair/{currency}/{quote}":1,"auth/order/pair/{currency}/{quote}/active":1,"auth/stopOrder":1,"auth/stopOrder/getOrder/{id}":1,"auth/stopOrder/pair/{currency}/{quote}":1,"auth/stopOrder/pair/{currency}/{quote}/active":1,"auth/trade":1,"auth/trade/pair/{currency}/{quote}":1,"auth/trade/fee/{currency}/{quote}":1,"auth/transaction":1,"auth/transaction/bindings":1,"auth/transaction/bindings/{currency}":1,"auth/transaction/{id}":1,"auth/transfer":1},post:{"auth/order/cancel":1,"auth/order/cancelAll":1,"auth/order/cancelAll/{currency}/{quote}":1,"auth/order/place":1,"auth/spot/deposit":1,"auth/spot/withdraw":1,"auth/stopOrder/cancel":1,"auth/stopOrder/cancelAll":1,"auth/stopOrder/cancelAll/{currency}/{quote}":1,"auth/stopOrder/place":1,"auth/transaction/depositAddress":1,"auth/transaction/withdraw":1,"auth/transaction/withdraw/cancel":1,"auth/transaction/withdraw/confirm":1,"auth/transaction/withdraw/resendCode":1,"auth/transfer/email":1,"auth/transfer/id":1,"auth/transfer/phone":1}}},precisionMode:p,fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,maker:this.parseNumber("0.0049"),taker:this.parseNumber("0.0049")}},commonCurrencies:{MT:"Monarch",TPAY:"Tetra Pay",TRADE:"Smart Trade Coin",TSL:"Treasure SL"},exceptions:{exact:{INTERNAL_ERROR:r,SERVICE_UNAVAILABLE:c,NOT_AUTHORIZED:a,FORBIDDEN:d,BAD_REQUEST:h,NOT_FOUND:r,ACCESS_DENIED:d,REQUEST_REJECTED:r,HTTP_MEDIA_TYPE_NOT_SUPPORTED:h,MEDIA_TYPE_NOT_ACCEPTABLE:h,METHOD_ARGUMENT_NOT_VALID:h,VALIDATION_ERROR:h,ACCOUNT_EXPIRED:u,BAD_CREDENTIALS:a,COOKIE_THEFT:a,CREDENTIALS_EXPIRED:u,INSUFFICIENT_AUTHENTICATION:a,UNKNOWN_LOCATION:a,TOO_MANY_REQUESTS:l,INSUFFICIENT_FUNDS:f},broad:{"invalid API key, signature or digest":a,"request expired or bad":o,"For input string":h}},options:{defaultType:"spot",types:{wallet:"ACCOUNT_TYPE_WALLET",spot:"ACCOUNT_TYPE_SPOT"},accounts:{ACCOUNT_TYPE_WALLET:"wallet",ACCOUNT_TYPE_SPOT:"spot"}}})}nonce(){return this.milliseconds()-this.options.timeDifference}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeInteger(t,"serverTime")}async loadTimeDifference(e={}){const t=await this.fetchTime(e),i=this.milliseconds();return this.options.timeDifference=i-t,this.options.timeDifference}async fetchMarkets(e={}){const t=await this.fetchCurrenciesFromCache(e),i=await this.publicGetPair(e);this.safeValue(this.options,"adjustForTimeDifference",!0)&&await this.loadTimeDifference();const s=this.indexBy(t,"id"),r=[];for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"id"),n=this.safeString(t,"baseCurrency"),o=this.safeString(t,"quoteCurrency"),h=this.safeValue(s,n),c=this.safeValue(s,o);if(void 0!==h&&void 0!==c){const e=this.safeCurrencyCode(this.safeString(h,"tag")),i=this.safeCurrencyCode(this.safeString(c,"tag")),s=e+"/"+i,d={price:this.safeNumber(t,"priceTick"),amount:this.safeNumber(t,"quantityTick")},u=i.toLowerCase(),l=this.capitalize(u),f={amount:{min:this.safeNumber(t,"minOrderQuantity"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(t,"minOrderCost"+l),max:this.safeNumber(t,"maxOrderCost"+l)}},p="PAIR_STATUS_ACTIVE"===this.safeString(t,"status");r.push({id:a,info:t,symbol:s,base:e,quote:i,baseId:n,quoteId:o,type:"spot",spot:!0,active:p,precision:d,limits:f})}}return r}async fetchCurrenciesFromCache(e={}){const t=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(t,"timestamp"),s=this.safeInteger(t,"expires",1e3),r=this.milliseconds();if(void 0===i||r-i>s){const i=await this.publicGetCurrency(e);this.options.fetchCurrencies=this.extend(t,{response:i,timestamp:r})}return this.safeValue(this.options.fetchCurrencies,"response")}async fetchCurrencies(e={}){const t=await this.fetchCurrenciesFromCache(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"id"),a=this.safeString(s,"tag"),n=this.safeCurrencyCode(a),o=this.safeString(s,"decimals"),h=this.parseNumber("1e-"+o),c=this.safeNumber(s,"fee"),d=this.safeString(s,"type").split("_"),u=d.length,l=this.safeValue(d,u-1).toLowerCase(),f="CURRENCY_STATUS_ACTIVE"===this.safeString(s,"status"),p=this.safeString(s,"name");i[n]={id:r,code:n,info:s,name:p,type:l,active:f,fee:c,precision:h,limits:{amount:{min:this.safeNumber(s,"minTransferAmount"),max:void 0},withdraw:{min:void 0,max:void 0}}}}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAuthAccount(e),i={info:t,timestamp:void 0,datetime:void 0};let s;const r=this.safeString2(this.options,"fetchBalance","defaultType","spot"),a=this.safeString(e,"type",r),n=this.safeValue(this.options,"types",{}),o=this.safeString(n,a,a),h=this.groupBy(t,"type"),c=this.safeValue(h,o,[]);for(let e=0;e<c.length;e++){const t=c[e],r=this.safeString(t,"currency"),a=this.safeInteger(t,"timestamp");void 0!==a&&(s=void 0===s?a:Math.max(s,a));const n=this.safeCurrencyCode(r),o=this.account();o.free=this.safeString(t,"available"),o.used=this.safeString(t,"blocked"),i[n]=o}return i.timestamp=s,i.datetime=this.iso8601(s),this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={currency:s.baseId,quote:s.quoteId};void 0!==t&&(r.limit=t);const a=await this.publicGetBookCurrencyQuote(this.extend(r,i));return this.parseOrderBook(a,e,void 0,"bid","ask","price","quantity")}parseTicker(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t),r=this.safeNumber(e,"lastPrice"),a=this.safeNumber(e,"change24h"),n=this.nonce();return this.safeTicker({symbol:s,timestamp:n,datetime:this.iso8601(n),low:this.safeNumber(e,"low"),high:this.safeNumber(e,"high"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:a,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeNumber(e,"volume24h"),info:e})}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={base:i.baseId,quote:i.quoteId},r=await this.publicGetTickerBaseQuote(this.extend(s,t));return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t);return this.parseTickers(i,e)}parseTrade(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeString(e,"price"),r=this.safeString(e,"quantity"),a=this.safeString(e,"cost"),n=this.safeValue(e,"makerBuyer");let o=this.safeString(e,"direction");void 0===o?o=n?"sell":"buy":"TRADE_DIRECTION_BUY"===o?o="buy":"TRADE_DIRECTION_SELL"===o&&(o="sell");const h=n&&"buy"===o?"maker":"taker",c=this.safeString(e,"baseCurrency"),d=this.safeString(e,"quoteCurrency"),u=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=u+"/"+l;f in this.markets&&(t=this.market(f));const p=this.safeString(e,"id"),m=this.safeString(e,"order"),g=this.safeString(e,"fee");let y;return void 0!==g&&(y={cost:g,currency:l}),this.safeTrade({info:e,timestamp:i,datetime:this.iso8601(i),symbol:f,id:p,order:m,type:void 0,takerOrMaker:h,side:o,price:s,amount:r,cost:a,fee:y},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currency:r.baseId,quote:r.quoteId};void 0!==i&&(a.limit=i);const n=await this.publicGetTradeHistoryCurrencyQuote(this.extend(a,s));return this.parseTrades(n,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a,n="privateGetAuthTrade";void 0!==e&&(a=this.market(e),r.currency=a.baseId,r.quote=a.quoteId,n="privateGetAuthTradePairCurrencyQuote"),void 0!==i&&(r.limit=i);const o=await this[n](this.extend(r,s));return this.parseTrades(o,a,t,i)}parseOrderStatus(e){return this.safeString({ORDER_STATUS_PLACED:"open",ORDER_STATUS_CLOSED:"closed",ORDER_STATUS_CANCELLED:"canceled"},e,e)}parseOrderType(e){return this.safeString({ORDER_TYPE_MARKET:"market",ORDER_TYPE_LIMIT:"limit"},e,e)}parseTimeInForce(e){return this.safeString({ORDER_CONDITION_GOOD_TILL_CANCELLED:"GTC",ORDER_CONDITION_IMMEDIATE_OR_CANCEL:"IOC",ORDER_CONDITION_FILL_OR_KILL:"FOK"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeInteger(e,"timestamp"),r=this.safeString(e,"baseCurrency"),a=this.safeString(e,"quoteCurrency"),n=this.safeCurrencyCode(r),o=this.safeCurrencyCode(a);let h;void 0!==n&&void 0!==o&&(h=n+"/"+o,h in this.markets&&(t=this.market(h)));const c=this.safeString(e,"side");let d;if(void 0!==c){const e=c.split("_");d=this.safeStringLower(e,e.length-1)}const u=this.parseOrderType(this.safeString(e,"type")),l=this.safeString(e,"price"),f=this.safeString(e,"quantity"),p=this.safeString(e,"filled"),m=this.safeString(e,"cost");let g=this.parseOrderStatus(this.safeString(e,"status"));const y=this.safeString(e,"message");void 0!==y&&(y.indexOf("cancel")>=0?g="canceled":y.indexOf("accept")>=0&&(g="open"));const b=this.safeString(e,"clientOrderId"),v=this.parseTimeInForce(this.safeString(e,"condition"));return this.safeOrder2({id:i,clientOrderId:b,info:e,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,status:g,symbol:h,type:u,timeInForce:v,postOnly:void 0,side:d,price:l,stopPrice:void 0,cost:m,amount:f,filled:p,average:void 0,remaining:void 0,fee:void 0,trades:void 0},t)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={currency:r.baseId,quote:r.quoteId},o=await this.privateGetAuthOrderPairCurrencyQuoteActive(this.extend(a,s));return this.parseOrders(o,r,t,i)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a,n="privateGetAuthOrder";void 0!==e&&(a=this.market(e),r.currency=a.baseId,r.quote=a.quoteId,n="privateGetAuthOrderPairCurrencyQuote"),void 0!==i&&(r.limit=i);const o=await this[n](this.extend(r,s));return this.parseOrders(o,a,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetAuthOrderGetOrderId(this.extend(s,i));return this.parseOrder(r)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o=t.toUpperCase(),h={baseCurrency:n.baseId,quoteCurrency:n.quoteId,side:i.toUpperCase(),condition:"GTC",type:o,clientOrderId:this.uuid()};"LIMIT"===o&&(h.price=this.priceToPrecision(e,r)),h.quantity=this.amountToPrecision(e,s),h.timestamp=this.seconds();const c=await this.privatePostAuthOrderPlace(this.extend(h,a));return this.parseOrder(c,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privatePostAuthOrderCancel(this.extend(s,i));return this.parseOrder(r)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s,r="privatePostAuthOrderCancelAll";return void 0!==e&&(s=this.market(e),i.currency=s.baseId,i.quote=s.quoteId,r="privatePostAuthOrderCancelAllCurrencyQuote"),await this[r](this.extend(i,t))}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r=await this.privateGetAuthTransaction(this.extend({},s));let a;void 0!==e&&(a=this.currency(e));const n=this.safeValue(r,"content",[]);return this.parseTransactions(n,a,t,i)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeInteger(e,"timestamp"),r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r,t),n=this.parseTransactionStatus(this.safeString(e,"status")),o=this.safeNumber(e,"amount");let h=this.safeString(e,"senderAddress");""===h&&(h=void 0);let c=this.safeString(e,"recipientAddress");""===c&&(c=void 0);const d=this.safeString(e,"transactionHash"),u=this.safeString(e,"memo");let l;const f=this.safeNumber(e,"transactionFee");void 0!==f&&(l={cost:f,currency:a});const p=this.parseTransactionType(this.safeString(e,"type"));return{info:e,id:i,txid:d,timestamp:s,datetime:this.iso8601(s),addressFrom:h,addressTo:c,address:c,tagFrom:void 0,tagTo:u,tag:u,type:p,amount:o,currency:a,status:n,updated:void 0,fee:l}}parseTransactionStatus(e){return this.safeString({TRANSACTION_STATUS_CONFIRMED:"ok",TRANSACTION_STATUS_EXECUTED:"ok"},e,e)}parseTransactionType(e){return this.safeString({TRANSACTION_TYPE_DEPOSIT:"deposit",TRANSACTION_TYPE_WITHDRAWAL:"withdrawal"},e,e)}sign(e,t="public",i="GET",s,r,a){const n="/"+this.version+"/"+this.implodeParams(e,s);let o=n;const h=this.omit(s,this.extractParams(e)),c=this.urlencode(h);if("GET"===i&&Object.keys(h).length&&(o+="?"+c),"private"===t){this.checkRequiredCredentials();const e=i+n+c,t=this.hmac(this.encode(e),this.encode(this.secret),"sha512");r={"X-LA-APIKEY":this.apiKey,"X-LA-SIGNATURE":t,"X-LA-DIGEST":"HMAC-SHA512"},"POST"===i&&(r["Content-Type"]="application/json",a=this.json(h))}return{url:this.urls.api+o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(!o)return;const d=this.safeString(o,"message"),u=this.id+" "+n;void 0!==d&&(this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,d,u));const l=this.safeString(o,"error"),f=this.safeString(l,"message");if(void 0!==l||void 0!==f)throw this.throwExactlyMatchedException(this.exceptions.exact,l,u),this.throwBroadlyMatchedException(this.exceptions.broad,n,u),new r(u)}}},45557:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,InvalidNonce:n,OrderNotFound:o,InvalidOrder:h,DDoSProtection:c,BadRequest:d,AuthenticationError:u}=i(73449),l=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"latoken1",name:"Latoken",countries:["KY"],version:"v1",rateLimit:2e3,certified:!1,userAgent:this.userAgents.chrome,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createMarketOrder:void 0,createOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:void 0,fetchOrderBook:!0,fetchOrdersByStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,privateAPI:!0,publicAPI:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/61511972-24c39f00-aa01-11e9-9f7c-471f1d6e5214.jpg",api:"https://api.latoken.com",www:"https://latoken.com",doc:["https://api.latoken.com"],referral:"https://latoken.com/invite?r=mvgp2djk"},api:{public:{get:["ExchangeInfo/time","ExchangeInfo/limits","ExchangeInfo/pairs","ExchangeInfo/pairs/{currency}","ExchangeInfo/pair","ExchangeInfo/currencies","ExchangeInfo/currencies/{symbol}","MarketData/tickers","MarketData/ticker/{symbol}","MarketData/orderBook/{symbol}","MarketData/orderBook/{symbol}/{limit}","MarketData/trades/{symbol}","MarketData/trades/{symbol}/{limit}"]},private:{get:["Account/balances","Account/balances/{currency}","Order/status","Order/active","Order/get_order","Order/trades"],post:["Order/new","Order/test-order","Order/cancel","Order/cancel_all"]}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,maker:this.parseNumber("0.001"),taker:this.parseNumber("0.001")}},commonCurrencies:{MT:"Monarch",TPAY:"Tetra Pay",TRADE:"Smart Trade Coin",TSL:"Treasure SL"},options:{createOrderMethod:"private_post_order_new"},exceptions:{exact:{"Signature or ApiKey is not valid":u,"Request is out of time":n,"Symbol must be specified":d},broad:{"Request limit reached":c,Pair:d,"Price needs to be greater than":h,"Amount needs to be greater than":h,"The Symbol field is required":h,"OrderType is not valid":h,"Side is not valid":h,"Cancelable order whit":o,Order:o}}})}nonce(){return this.milliseconds()}async fetchTime(e={}){const t=await this.publicGetExchangeInfoTime(e);return this.safeInteger(t,"unixTimeMiliseconds")}async fetchMarkets(e={}){const t=await this.publicGetExchangeInfoPairs(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"symbol"),a=this.safeString(s,"baseCurrency"),n=this.safeString(s,"quotedCurrency"),o=this.safeInteger(s,"pairId"),h=this.safeCurrencyCode(a),c=this.safeCurrencyCode(n),d=h+"/"+c,u=this.safeString(s,"pricePrecision"),l=this.parsePrecision(u),f={price:parseInt(u),amount:this.safeInteger(s,"amountPrecision")},p={amount:{min:this.safeNumber(s,"minQty"),max:void 0},price:{min:this.parseNumber(l),max:void 0},cost:{min:void 0,max:void 0}};i.push({id:r,numericId:o,info:s,symbol:d,base:h,quote:c,baseId:a,quoteId:n,type:"spot",spot:!0,active:void 0,precision:f,limits:p})}return i}async fetchCurrencies(e={}){const t=await this.publicGetExchangeInfoCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"symbol"),a=this.safeInteger(s,"currencyId"),n=this.safeCurrencyCode(r),o=this.safeInteger(s,"precission"),h=this.safeNumber(s,"fee"),c=void 0;i[n]={id:r,numericId:a,code:n,info:s,name:n,active:c,fee:h,precision:o,limits:{amount:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountBalances(e),i={info:t,timestamp:void 0,datetime:void 0};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"symbol"),a=this.safeCurrencyCode(r),n=this.safeString(s,"frozen"),o=this.safeString(s,"pending"),h=this.account();h.used=l.stringAdd(n,o),h.free=this.safeString(s,"available"),h.total=this.safeString(s,"amount"),i[a]=h}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(e).id,limit:10};void 0!==t&&(s.limit=t);const r=await this.publicGetMarketDataOrderBookSymbolLimit(this.extend(s,i));return this.parseOrderBook(r,e,void 0,"bids","asks","price","quantity")}parseTicker(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t),r=this.safeNumber(e,"open"),a=this.safeNumber(e,"close");let n;void 0!==r&&void 0!==a&&(n=a-r);const o=this.safeNumber(e,"priceChange"),h=this.nonce();return{symbol:s,timestamp:h,datetime:this.iso8601(h),low:this.safeNumber(e,"low"),high:this.safeNumber(e,"high"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:r,close:a,last:a,previousClose:void 0,change:n,percentage:o,average:void 0,baseVolume:void 0,quoteVolume:this.safeNumber(e,"volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetMarketDataTickerSymbol(this.extend(s,t));return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketDataTickers(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]);s[t.symbol]=t}return this.filterByArray(s,"symbol",e)}parseTrade(e,t){let i=this.safeInteger2(e,"timestamp","time");void 0!==i&&i<12309408e5&&(i*=1e3);const s=this.safeString(e,"price"),r=this.safeString(e,"amount"),a=this.parseNumber(s),n=this.parseNumber(r),o=this.parseNumber(l.stringMul(s,r)),h=this.safeString(e,"side");let c;void 0!==t&&(c=t.symbol);const d=this.safeString(e,"id"),u=this.safeString(e,"orderId"),f=this.safeNumber(e,"commission");let p;return void 0!==f&&(p={cost:f,currency:void 0}),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:c,id:d,order:u,type:void 0,takerOrMaker:void 0,side:h,price:a,amount:n,cost:o,fee:p}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.limit=i);const n=await this.publicGetMarketDataTradesSymbol(this.extend(a,s)),o=this.safeValue(n,"trades",[]);return this.parseTrades(o,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={symbol:r.id},o=await this.privateGetOrderTrades(this.extend(n,s)),h=this.safeValue(o,"trades",[]);return this.parseTrades(h,r,t,i)}parseOrderStatus(e){return this.safeString({active:"open",partiallyFilled:"open",filled:"closed",cancelled:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"orderId"),s=this.safeTimestamp(e,"timeCreated"),r=this.safeString(e,"symbol"),a=this.safeSymbol(r,t),n=this.safeString(e,"side"),o=this.safeString(e,"orderType"),h=this.safeString(e,"price"),c=this.safeString(e,"amount"),d=this.safeString(e,"executedAmount"),u=this.parseOrderStatus(this.safeString(e,"orderStatus")),l=this.safeTimestamp(e,"timeFilled");let f;void 0!==l&&l>0&&(f=l);const p=this.safeString(e,"cliOrdId");return this.safeOrder2({id:i,clientOrderId:p,info:e,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:f,status:u,symbol:a,type:o,timeInForce:void 0,postOnly:void 0,side:n,price:h,stopPrice:void 0,cost:void 0,amount:c,filled:d,average:void 0,remaining:void 0,fee:void 0,trades:void 0},t)}async fetchOpenOrders(e,t,i,s={}){return this.fetchOrdersWithMethod("private_get_order_active",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return this.fetchOrdersByStatus("filled",e,t,i,s)}async fetchCanceledOrders(e,t,i,s={}){return this.fetchOrdersByStatus("cancelled",e,t,i,s)}async fetchOrdersByStatus(e,t,i,s,r={}){const a={status:e};return this.fetchOrdersWithMethod("private_get_order_status",t,i,s,this.extend(a,r))}async fetchOrdersWithMethod(e,t,i,s,r={}){if(void 0===t)throw new a(this.id+" fetchOrdersWithMethod() requires a symbol argument");await this.loadMarkets();const n=this.market(t),o={symbol:n.id};void 0!==s&&(o.limit=s);const h=await this[e](this.extend(o,r));return this.parseOrders(h,n,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},r=await this.privateGetOrderGetOrder(this.extend(s,i));return this.parseOrder(r)}async createOrder(e,t,i,s,a,n={}){if(await this.loadMarkets(),"limit"!==t)throw new r(this.id+" allows limit orders only");const o={symbol:this.marketId(e),side:i,price:this.priceToPrecision(e,a),amount:this.amountToPrecision(e,s),orderType:t},h=this.safeString(this.options,"createOrderMethod","private_post_order_new"),c=await this[h](this.extend(o,n));return this.parseOrder(c)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},r=await this.privatePostOrderCancel(this.extend(s,i));return this.parseOrder(r)}async cancelAllOrders(e,t={}){if(void 0===e)throw new a(this.id+" cancelAllOrders() requires a symbol argument");await this.loadMarkets();const i=this.marketId(e),s={symbol:i},r=await this.privatePostOrderCancelAll(this.extend(s,t)),n=[],o=this.safeValue(r,"cancelledOrders",[]);for(let e=0;e<o.length;e++){const t=this.parseOrder({symbol:i,orderId:o[e],orderStatus:"canceled"});n.push(t)}return n}sign(e,t="public",i="GET",s,r,a){let n="/api/"+this.version+"/"+this.implodeParams(e,s),o=this.omit(s,this.extractParams(e));if("private"===t){const e=this.nonce();o=this.extend({timestamp:e},o)}const h=this.urlencode(o);if(Object.keys(o).length&&(n+="?"+h),"private"===t){this.checkRequiredCredentials();const e=this.hmac(this.encode(n),this.encode(this.secret));r={"X-LA-KEY":this.apiKey,"X-LA-SIGNATURE":e},"POST"===i&&(r["Content-Type"]="application/x-www-form-urlencoded",a=h)}return{url:this.urls.api+n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(!o)return;const d=this.safeString(o,"message"),u=this.id+" "+n;void 0!==d&&(this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,d,u));const l=this.safeValue(o,"error",{}),f=this.safeString(l,"message");if(void 0!==f)throw this.throwExactlyMatchedException(this.exceptions.exact,f,u),this.throwBroadlyMatchedException(this.exceptions.broad,f,u),new r(u)}}},31524:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,DDoSProtection:a,AuthenticationError:n,InvalidOrder:o,ArgumentsRequired:h}=i(73449),c=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"lbank",name:"LBank",countries:["CN"],version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:void 0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"minute1","5m":"minute5","15m":"minute15","30m":"minute30","1h":"hour1","2h":"hour2","4h":"hour4","6h":"hour6","8h":"hour8","12h":"hour12","1d":"day1","1w":"week1"},urls:{logo:"https://user-images.githubusercontent.com/1294454/38063602-9605e28a-3302-11e8-81be-64b1e53c4cfb.jpg",api:"https://api.lbank.info",www:"https://www.lbank.info",doc:"https://github.com/LBank-exchange/lbank-official-api-docs",fees:"https://lbankinfo.zendesk.com/hc/en-gb/articles/360012072873-Trading-Fees",referral:"https://www.lbex.io/invite?icode=7QCY"},api:{public:{get:["currencyPairs","ticker","depth","trades","kline","accuracy"]},private:{post:["user_info","create_order","cancel_order","orders_info","orders_info_history","withdraw","withdrawCancel","withdraws","withdrawConfigs"]}},fees:{trading:{maker:this.parseNumber("0.001"),taker:this.parseNumber("0.001")},funding:{withdraw:{}}},commonCurrencies:{VET_ERC20:"VEN",PNT:"Penta"},options:{cacheSecretAsPem:!0}})}async fetchMarkets(e={}){const t=await this.publicGetAccuracy(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=s.symbol,a=r.split("_");let n,o;a.length>2?(n=a[0]+"_"+a[1],o=a[2]):(n=a[0],o=a[1]);const h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=h+"/"+c,u={amount:this.safeInteger(s,"quantityAccuracy"),price:this.safeInteger(s,"priceAccuracy")};i.push({id:r,symbol:d,base:h,quote:c,baseId:n,quoteId:o,type:"spot",spot:!0,active:!0,precision:u,limits:{amount:{min:Math.pow(10,-u.amount),max:void 0},price:{min:Math.pow(10,-u.price),max:Math.pow(10,u.price)},cost:{min:void 0,max:void 0}},info:r})}return i}parseTicker(e,t){let i;if(void 0===t){const t=this.safeString(e,"symbol");if(t in this.markets_by_id)i=this.markets_by_id[t].symbol;else{const e=t.split("_");let s,r;e.length>2?(s=e[0]+"_"+e[1],r=e[2]):(s=e[0],r=e[1]),i=this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(r)}}const s=this.safeInteger(e,"timestamp"),r=e;e=r.ticker;const a=this.safeNumber(e,"latest"),n=this.safeNumber(e,"change");let o,h,c;if(void 0!==n){const e=this.sum(1,n/100);e>0&&(o=a/this.sum(1,e))}return void 0!==a&&void 0!==o&&(h=a-o,c=this.sum(a,o)/2),void 0!==t&&(i=t.symbol),{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:h,percentage:n,average:c,baseVolume:this.safeNumber(e,"vol"),quoteVolume:this.safeNumber(e,"turnover"),info:r}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(this.extend({symbol:"all"},t)),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]);s[t.symbol]=t}return this.filterByArray(s,"symbol",e)}async fetchOrderBook(e,t=60,i={}){await this.loadMarkets();let s=60;void 0!==t&&(s=Math.min(t,s));const r={symbol:this.marketId(e),size:s},a=await this.publicGetDepth(this.extend(r,i));return this.parseOrderBook(a,e)}parseTrade(e,t){let i;void 0!==t&&(i=t.symbol);const s=this.safeInteger(e,"date_ms"),r=this.safeString(e,"price"),a=this.safeString(e,"amount"),n=this.parseNumber(r),o=this.parseNumber(a),h=this.parseNumber(c.stringMul(r,a)),d=this.safeString(e,"tid");let u=this.safeString(e,"type");return u=u.replace("_market",""),{id:d,info:this.safeValue(e,"info",e),timestamp:s,datetime:this.iso8601(s),symbol:i,order:void 0,type:void 0,side:u,takerOrMaker:void 0,price:n,amount:o,cost:h,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id,size:100};void 0!==t&&(a.time=parseInt(t)),void 0!==i&&(a.size=i);const n=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}async fetchOHLCV(e,t="5m",i,s=1e3,r={}){await this.loadMarkets();const a=this.market(e);if(void 0===i)throw new h(this.id+" fetchOHLCV() requires a `since` argument");if(void 0===s)throw new h(this.id+" fetchOHLCV() requires a `limit` argument");const n={symbol:a.id,type:this.timeframes[t],size:s,time:parseInt(i/1e3)},o=await this.publicGetKline(this.extend(n,r));return this.parseOHLCVs(o,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostUserInfo(e),i={info:t,timestamp:void 0,datetime:void 0},s=this.safeValue(t,"info",{}),r=this.safeValue(s,"free",{}),a=this.safeValue(s,"freeze",{}),n=this.safeValue(s,"asset",{}),o=Object.keys(r);for(let e=0;e<o.length;e++){const t=o[e],s=this.safeCurrencyCode(t),h=this.account();h.free=this.safeString(r,t),h.used=this.safeString(a,t),h.total=this.safeString(n,t),i[s]=h}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({"-1":"cancelled",0:"open",1:"open",2:"closed",4:"closed"},e)}parseOrder(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t,"_"),r=this.safeInteger(e,"create_time"),a=this.safeString(e,"price"),n=this.safeString(e,"amount"),o=this.safeString(e,"deal_amount"),h=this.safeString(e,"avg_price"),c=this.parseOrderStatus(this.safeString(e,"status")),d=this.safeString(e,"order_id"),u=this.safeString(e,"order_type"),l=this.safeString(e,"type");return this.safeOrder2({id:d,clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:c,symbol:s,type:u,timeInForce:void 0,postOnly:void 0,side:l,price:a,stopPrice:void 0,cost:void 0,amount:n,filled:o,remaining:void 0,trades:void 0,fee:void 0,info:this.safeValue(e,"info",e),average:h},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e);let o={symbol:n.id,type:i,amount:s};"market"===t?o.type+="_market":o.price=r;const h=await this.privatePostCreateOrder(this.extend(o,a));return o=this.omit(o,"type"),o.order_id=h.order_id,o.type=i,o.order_type=t,o.create_time=this.milliseconds(),o.info=h,this.parseOrder(o,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={symbol:this.market(t).id,order_id:e};return await this.privatePostCancelOrder(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=this.market(t),r={symbol:s.id,order_id:e},a=await this.privatePostOrdersInfo(this.extend(r,i)),n=this.safeValue(a,"orders",[]),o=this.parseOrders(n,s);return 1===o.length?o[0]:o}async fetchOrders(e,t,i,s={}){await this.loadMarkets(),void 0===i&&(i=100);const r={symbol:this.market(e).id,current_page:1,page_length:i},a=await this.privatePostOrdersInfoHistory(this.extend(r,s)),n=this.safeValue(a,"orders",[]);return this.parseOrders(n,void 0,t,i)}async fetchClosedOrders(e,t,i,s={}){const r=await this.fetchOrders(e,t,i,s),a=this.filterBy(r,"status","closed"),n=this.filterBy(r,"status","cancelled"),o=this.arrayConcat(a,n);return this.filterBySymbolSinceLimit(o,e,t,i)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a={assetCode:this.currency(e).id,amount:t,account:i};void 0!==s&&(a.memo=s);const n=this.privatePostWithdraw(this.extend(a,r));return{id:this.safeString(n,"id"),info:n}}convertSecretToPem(e){const t=e.length-0;let i=parseInt(t/64);i=this.sum(i,1);let s="-----BEGIN PRIVATE KEY-----\n";for(let e=0;e<i;e++){const t=64*e,i=this.sum(t,64);s+=this.secret.slice(t,i)+"\n"}return s+"-----END PRIVATE KEY-----"}sign(e,t="public",i="GET",s={},r,a){const n=this.omit(s,this.extractParams(e));let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);if(o+=".do","public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();const e=this.keysort(this.extend({api_key:this.apiKey},s)),t=this.rawencode(e),i=this.hash(this.encode(t)).toUpperCase();let n;this.safeValue(this.options,"cacheSecretAsPem",!0)?(n=this.safeValue(this.options,"pem"),void 0===n&&(n=this.convertSecretToPem(this.secret),this.options.pem=n)):n=this.convertSecretToPem(this.secret);const o=this.binaryToBase64(this.rsa(i,this.encode(n),"RS256"));e.sign=o,a=this.urlencode(e),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,h,c,d,u,l){if(void 0!==d&&"false"===this.safeString(d,"result")){const e=this.safeString(d,"error_code"),t=this.safeString({1e4:"Internal error",10001:"The required parameters can not be empty",10002:"verification failed",10003:"Illegal parameters",10004:"User requests are too frequent",10005:"Key does not exist",10006:"user does not exist",10007:"Invalid signature",10008:"This currency pair is not supported",10009:"Limit orders can not be missing orders and the number of orders",10010:"Order price or order quantity must be greater than 0",10011:"Market orders can not be missing the amount of the order",10012:"market sell orders can not be missing orders",10013:"is less than the minimum trading position 0.001",10014:"Account number is not enough",10015:"The order type is wrong",10016:"Account balance is not enough",10017:"Abnormal server",10018:"order inquiry can not be more than 50 less than one",10019:"withdrawal orders can not be more than 3 less than one",10020:"less than the minimum amount of the transaction limit of 0.001",10022:"Insufficient key authority"},e,this.json(d));throw new(this.safeValue({10002:n,10004:a,10005:n,10006:n,10007:n,10009:o,10010:o,10011:o,10012:o,10013:o,10014:o,10015:o,10016:o,10022:n},e,r))(t)}}}},24352:(e,t,i)=>{"use strict";const s=i(48819),{TICK_SIZE:r}=i(62115),{ExchangeError:a,ArgumentsRequired:n,InvalidNonce:o,OrderNotFound:h,InvalidOrder:c,InsufficientFunds:d,AuthenticationError:u,DDoSProtection:l,NotSupported:f,BadSymbol:p}=i(73449),m=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"liquid",name:"Liquid",countries:["JP","CN","TW"],version:"2",rateLimit:1e3,has:{cancelOrder:!0,CORS:void 0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/45798859-1a872600-bcb4-11e8-8746-69291ce87b04.jpg",api:"https://api.liquid.com",www:"https://www.liquid.com",doc:["https://developers.liquid.com"],fees:"https://help.liquid.com/getting-started-with-liquid/the-platform/fee-structure",referral:"https://www.liquid.com/sign-up/?affiliate=SbzC62lt30976"},api:{public:{get:["currencies","products","products/{id}","products/{id}/price_levels","executions","ir_ladders/{currency}","fees"]},private:{get:["accounts","accounts/balance","accounts/main_asset","accounts/{id}","accounts/{currency}/reserved_balance_details","crypto_accounts","crypto_withdrawal","crypto_withdrawals","crypto_withdrawals/crypto_networks","executions/me","fiat_accounts","fund_infos","loan_bids","loans","orders","orders/{id}","orders/{id}/trades","trades","trades/{id}/loans","trading_accounts","trading_accounts/{id}","transactions","withdrawals","user/fee_tier","user/fees","trading_accounts/{id}","bank_accounts","accounts/{currency}/reserved_balance_details"],post:["crypto_withdrawals","fund_infos","fiat_accounts","loan_bids","orders","withdrawals","fees/estimate"],put:["crypto_withdrawal/{id}/cancel","loan_bids/{id}/close","loans/{id}","orders/{id}","orders/{id}/cancel","trades/{id}","trades/{id}/adjust_margin","trades/{id}/close","trades/close_all","trading_accounts/{id}","withdrawals/{id}/cancel"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.003,maker:0,tiers:{perpetual:{maker:[[0,0],[25e3,0],[5e4,-25e-5],[1e5,-25e-5],[1e6,-25e-5],[1e7,-25e-5],[25e6,-25e-5],[5e7,-25e-5],[75e6,-25e-5],[1e8,-25e-5],[2e8,-25e-5],[3e8,-25e-5]],taker:[[0,.0012],[25e3,.00115],[5e4,.0011],[1e5,.00105],[1e6,.001],[1e7,95e-5],[25e6,9e-4],[5e7,85e-5],[75e6,8e-4],[1e8,75e-5],[2e8,7e-4],[3e8,65e-5]]},spot:{taker:[[0,.003],[1e4,.0029],[2e4,.0028],[5e4,.0026],[1e5,.002],[1e6,.0016],[5e6,.0012],[1e7,.001],[25e6,9e-4],[5e7,8e-4],[1e8,7e-4],[2e8,6e-4],[5e8,4e-4],[1e9,3e-4]],maker:[[0,0],[1e4,.002],[2e4,.0019],[5e4,.0018],[1e5,.0016],[1e6,8e-4],[5e6,7e-4],[1e7,5e-4],[25e6,0],[5e7,0],[1e8,0],[2e8,0],[5e8,0],[1e9,0]]}}}},precisionMode:r,exceptions:{"API rate limit exceeded. Please retry after 300s":l,"API Authentication failed":u,"Nonce is too small":o,"Order not found":h,"Can not update partially filled order":c,"Can not update non-live order":h,not_enough_free_balance:d,must_be_positive:c,less_than_order_size:c,price_too_high:c,price_too_small:c,product_disabled:p},commonCurrencies:{HOT:"HOT Token",MIOTA:"IOTA",TON:"Tokamak Network",BIFI:"Bifrost Finance"},options:{cancelOrderException:!0,networks:{ETH:"ERC20",TRX:"TRC20",XLM:"Stellar",ALGO:"Algorand"}}})}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r),n=this.safeString(s,"name"),o=s.depositable&&s.withdrawable,h=this.safeInteger(s,"assets_precision");i[a]={id:r,code:a,info:s,name:n,active:o,fee:this.safeNumber(s,"withdrawal_fee"),precision:h,limits:{amount:{min:Math.pow(10,-h),max:Math.pow(10,h)},withdraw:{min:this.safeNumber(s,"minimum_withdrawal"),max:void 0}}}}return i}async fetchMarkets(e={}){const t=await this.publicGetProducts(e),i=await this.publicGetProducts({perpetual:"1"}),s=await this.fetchCurrencies(),r=this.indexBy(s,"code"),a=[],n=this.arrayConcat(t,i);for(let e=0;e<n.length;e++){const t=n[e],i=this.safeString(t,"id"),s=this.safeString(t,"base_currency"),o=this.safeString(t,"quoted_currency");let h="spot",c=!0,d=!1;"Perpetual"===this.safeString(t,"product_type")&&(c=!1,d=!0,h="swap");const u=this.safeCurrencyCode(s),l=this.safeCurrencyCode(o);let f;f=d?this.safeString(t,"currency_pair_code"):u+"/"+l;let p=this.fees.trading.maker,m=this.fees.trading.taker;"swap"===h&&(p=this.safeNumber(t,"maker_fee",this.fees.trading.maker),m=this.safeNumber(t,"taker_fee",this.fees.trading.taker));const g=!this.safeValue(t,"disabled",!1),y=this.safeValue(r,u),b={amount:1e-8,price:this.safeNumber(t,"tick_size")};let v;void 0!==y&&(v=this.safeNumber(y.info,"minimum_order_quantity"));const w=this.safeNumber(t,"last_traded_price");let k,_;if(w){const e=this.safeNumber(t,"multiplier_down"),i=this.safeNumber(t,"multiplier_up");void 0!==e&&(k=w*e),void 0!==i&&(_=w*i)}const S={amount:{min:v,max:void 0},price:{min:k,max:_},cost:{min:void 0,max:void 0}};a.push({id:i,symbol:f,base:u,quote:l,baseId:s,quoteId:o,type:h,spot:c,swap:d,maker:p,taker:m,limits:S,precision:b,active:g,info:t})}return a}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(e),i={info:t,timestamp:void 0,datetime:void 0},s=this.safeValue(t,"crypto_accounts",[]),r=this.safeValue(t,"fiat_accounts",[]);for(let e=0;e<s.length;e++){const t=s[e],r=this.safeString(t,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.total=this.safeString(t,"balance"),n.used=this.safeString(t,"reserved_balance"),i[a]=n}for(let e=0;e<r.length;e++){const t=r[e],s=this.safeString(t,"currency"),a=this.safeCurrencyCode(s),n=this.account();n.total=this.safeString(t,"balance"),n.used=this.safeString(t,"reserved_balance"),i[a]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},r=await this.publicGetProductsIdPriceLevels(this.extend(s,i));return this.parseOrderBook(r,e,void 0,"buy_price_levels","sell_price_levels")}parseTicker(e,t){const i=this.milliseconds();let s,r;if("last_traded_price"in e&&e.last_traded_price&&e.last_traded_price.length>0&&(s=this.safeNumber(e,"last_traded_price")),void 0===t){const i=this.safeString(e,"id");if(i in this.markets_by_id)t=this.markets_by_id[i];else{const i=this.safeString(e,"base_currency"),s=this.safeString(e,"quoted_currency");r in this.markets?t=this.markets[r]:r=this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(s)}}void 0!==t&&(r=t.symbol);const a=this.safeNumber(e,"last_price_24h");return this.safeTicker({symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high_market_ask"),low:this.safeNumber(e,"low_market_bid"),bid:this.safeNumber(e,"market_bid"),bidVolume:void 0,ask:this.safeNumber(e,"market_ask"),askVolume:void 0,vwap:void 0,open:a,close:s,last:s,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"volume_24h"),quoteVolume:void 0,info:e},t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetProducts(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]);s[t.symbol]=t}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={id:i.id},r=await this.publicGetProductsId(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.safeTimestamp(e,"created_at"),s=this.safeString(e,"order_id"),r=this.safeString(e,"taker_side"),a=this.safeString(e,"my_side"),n=void 0!==a?a:r;let o;void 0!==a&&(o=r===a?"taker":"maker");const h=this.safeString(e,"price"),c=this.safeString(e,"quantity"),d=this.parseNumber(h),u=this.parseNumber(c),l=this.parseNumber(m.stringMul(h,c)),f=this.safeString(e,"id");let p;return void 0!==t&&(p=t.symbol),{info:e,id:f,order:s,timestamp:i,datetime:this.iso8601(i),symbol:p,type:void 0,side:n,takerOrMaker:o,price:d,amount:u,cost:l,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={product_id:r.id};void 0!==i&&(a.limit=i),void 0!==t&&(a.timestamp=parseInt(t/1e3));const n=await this.publicGetExecutions(this.extend(a,s)),o=void 0!==t?n:n.models;return this.parseTrades(o,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={product_id:r.id,with_details:!0};void 0!==i&&(a.limit=i);const n=await this.privateGetExecutionsMe(this.extend(a,s));return this.parseTrades(n.models,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.safeString2(a,"clientOrderId","client_order_id");a=this.omit(a,["clientOrderId","client_order_id"]);const o={order_type:t,product_id:this.marketId(e),side:i,quantity:this.amountToPrecision(e,s)};void 0!==n&&(o.client_order_id=n),"limit"!==t&&"limit_post_only"!==t&&"market_with_range"!==t&&"stop"!==t||(o.price=this.priceToPrecision(e,r));const h=await this.privatePostOrders(this.extend(o,a));return this.parseOrder(h)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privatePutOrdersIdCancel(this.extend(s,i)),a=this.parseOrder(r);if("closed"===a.status&&this.options.cancelOrderException)throw new h(this.id+" order closed already: "+this.json(r));return a}async editOrder(e,t,i,s,r,a,o={}){if(await this.loadMarkets(),void 0===a)throw new n(this.id+" editOrder() requires the price argument");const h={order:{quantity:this.amountToPrecision(t,r),price:this.priceToPrecision(t,a)},id:e},c=await this.privatePutOrdersId(this.extend(h,o));return this.parseOrder(c)}parseOrderStatus(e){return this.safeString({live:"open",filled:"closed",cancelled:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeTimestamp(e,"created_at"),r=this.safeString(e,"product_id");t=this.safeValue(this.markets_by_id,r);const a=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeNumber(e,"quantity");let o=this.safeNumber(e,"filled_quantity");const h=this.safeNumber(e,"price");let c,d;void 0!==t&&(c=t.symbol,d=t.quote);const u=this.safeString(e,"order_type");let l=0,f=0,p=this.safeNumber(e,"average_price");const m=this.parseTrades(this.safeValue(e,"executions",[]),t,void 0,void 0,{order:i,type:u}),g=m.length;for(let e=0;e<g;e++){const t=m[e];t.order=i,t.type=u,f=this.sum(f,t.amount),l=this.sum(l,t.cost)}let y,b,v;g>0&&(b=m[g-1].timestamp,!p&&f>0&&(p=l/f),void 0===y&&(y=l),void 0===o&&(o=f)),void 0!==n&&void 0!==o&&(v=n-o);const w=this.safeString(e,"side");return{id:i,clientOrderId:this.safeString(e,"client_order_id"),timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:b,type:u,timeInForce:void 0,postOnly:void 0,status:a,symbol:c,side:w,price:h,stopPrice:void 0,amount:n,filled:o,cost:y,remaining:v,average:p,trades:m,fee:{currency:d,cost:this.safeNumber(e,"order_fee")},info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(r)}async fetchOrders(e,t,i,s={}){let r;await this.loadMarkets();const a={with_details:1};void 0!==e&&(r=this.market(e),a.product_id=r.id),void 0!==i&&(a.limit=i);const n=await this.privateGetOrders(this.extend(a,s)),o=this.safeValue(n,"models",[]);return this.parseOrders(o,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"live"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"filled"},s))}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),n={crypto_withdrawal:{currency:a.id,address:i,amount:t}};if(void 0!==s)if("XRP"===e)n.crypto_withdrawal.payment_id=s;else{if("XLM"!==e)throw new f(this.id+" withdraw() only supports a tag along the address for XRP or XLM");n.crypto_withdrawal.memo_type="text",n.crypto_withdrawal.memo_value=s}const o=this.safeValue(this.options,"networks",{}),h=this.safeValue(r,"crypto_withdrawal",{});let c=this.safeStringUpper(h,"network");c=this.safeString(o,c,c),void 0!==c&&(n.crypto_withdrawal.network=c,r.crypto_withdrawal=this.omit(r.crypto_withdrawal,"network"));const d=await this.privatePostCryptoWithdrawals(this.deepExtend(n,r));return this.parseTransaction(d,a)}async fetchWithdrawals(e,t,i,s={}){let r;await this.loadMarkets(),void 0!==e&&(r=this.currency(e));const a=await this.privateGetCryptoWithdrawals(this.extend({},s)),n=this.safeValue(a,"models",[]);return this.parseTransactions(n,r,t,i)}parseTransactionStatus(e){return this.safeString({pending:"pending",cancelled:"canceled",approved:"ok",processing:"pending",processed:"ok",reverted:"failed",to_be_reviewed:"pending",declined:"failed",broadcasted:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address"),r=this.safeString2(e,"payment_id","memo_value"),a=this.safeString(e,"transaction_hash"),n=this.safeString2(e,"currency","asset"),o=this.safeCurrencyCode(n,t),h=this.safeTimestamp(e,"created_at"),c=this.safeTimestamp(e,"updated_at"),d=this.parseTransactionStatus(this.safeString(e,"state")),u=this.safeString(e,"amount"),l=this.safeString(e,"withdrawal_fee"),f=this.parseNumber(m.stringSub(u,l));return{info:e,id:i,txid:a,timestamp:h,datetime:this.iso8601(h),address:s,tag:r,type:"withdrawal",amount:f,currency:o,status:d,updated:c,fee:{currency:o,cost:this.parseNumber(l)}}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n="/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if(r={"X-Quoine-API-Version":this.version,"Content-Type":"application/json"},"private"===t){this.checkRequiredCredentials(),"GET"===i?Object.keys(o).length&&(n+="?"+this.urlencode(o)):Object.keys(o).length&&(a=this.json(o));const e=this.nonce(),t={path:n,token_id:this.apiKey,iat:Math.floor(e/1e3)};"client_order_id"in o||(t.nonce=e),r["X-Quoine-Auth"]=this.jwt(t,this.encode(this.secret))}else Object.keys(o).length&&(n+="?"+this.urlencode(o));return n=this.urls.api+n,{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,n,o,h,c){if(e>=200&&e<300)return;if(401===e)return void this.throwExactlyMatchedException(this.exceptions,n,n);if(429===e)throw new l(this.id+" "+n);if(void 0===o)return;const d=this.id+" "+n,u=this.safeString(o,"message"),f=this.safeValue(o,"errors");if(void 0!==u)this.throwExactlyMatchedException(this.exceptions,u,d);else{if(void 0===f)throw new a(d);{const e=Object.keys(f);for(let t=0;t<e.length;t++){const i=f[e[t]];for(let e=0;e<i.length;e++){const t=i[e];this.throwExactlyMatchedException(this.exceptions,t,d)}}}}}}},85439:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a}=i(73449),n=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"luno",name:"luno",countries:["GB","SG","ZA"],rateLimit:1e3,version:"1",has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFees:!0},urls:{referral:"https://www.luno.com/invite/44893A",logo:"https://user-images.githubusercontent.com/1294454/27766607-8c1a69d8-5ede-11e7-930c-540b5eb9be24.jpg",api:{public:"https://api.luno.com/api",private:"https://api.luno.com/api",exchange:"https://api.luno.com/api/exchange"},www:"https://www.luno.com",doc:["https://www.luno.com/en/api","https://npmjs.org/package/bitx","https://github.com/bausmeier/node-bitx"]},api:{exchange:{get:["markets"]},public:{get:["orderbook","orderbook_top","ticker","tickers","trades"]},private:{get:["accounts/{id}/pending","accounts/{id}/transactions","balance","beneficiaries","fee_info","funding_address","listorders","listtrades","orders/{id}","quotes/{id}","withdrawals","withdrawals/{id}","transfers"],post:["accounts","accounts/{id}/name","postorder","marketorder","stoporder","funding_address","withdrawals","send","quotes","oauth2/grant"],put:["accounts/{id}/name","quotes/{id}"],delete:["quotes/{id}","withdrawals/{id}"]}}})}async fetchMarkets(e={}){const t=await this.exchangeGetMarkets(e),i=[],s=this.safeValue(t,"markets",[]);for(let e=0;e<s.length;e++){const t=s[e],r=this.safeString(t,"market_id"),a=this.safeString(t,"base_currency"),n=this.safeString(t,"counter_currency"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c=o+"/"+h,d="ACTIVE"===this.safeString(t,"trading_status"),u={amount:this.safeInteger(t,"volume_scale"),price:this.safeInteger(t,"price_scale")};i.push({id:r,symbol:c,base:o,quote:h,baseId:a,quoteId:n,type:"spot",spot:!0,active:d,precision:u,limits:{amount:{min:this.safeNumber(t,"min_volume"),max:this.safeNumber(t,"max_volume")},price:{min:this.safeNumber(t,"min_price"),max:this.safeNumber(t,"max_price")},cost:{min:void 0,max:void 0}},info:t})}return i}async fetchAccounts(e={}){const t=await this.privateGetBalance(e),i=this.safeValue(t,"balance",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"account_id"),a=this.safeString(t,"asset"),n=this.safeCurrencyCode(a);s.push({id:r,type:void 0,currency:n,info:t})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i=this.safeValue(t,"balance",[]),s={info:t,timestamp:void 0,datetime:void 0};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"asset"),a=this.safeCurrencyCode(r),o=this.safeString(t,"reserved"),h=this.safeString(t,"unconfirmed"),c=this.safeString(t,"balance"),d=n.stringAdd(o,h),u=n.stringAdd(c,h);if(a in s)s[a].used=n.stringAdd(s[a].used,d),s[a].total=n.stringAdd(s[a].total,u);else{const e=this.account();e.used=d,e.total=u,s[a]=e}}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s="publicGetOrderbook";void 0!==t&&t<=100&&(s+="Top");const r={pair:this.marketId(e)},a=await this[s](this.extend(r,i)),n=this.safeInteger(a,"timestamp");return this.parseOrderBook(a,e,n,"bids","asks","price","volume")}parseOrderStatus(e){return this.safeString({PENDING:"open"},e,e)}parseOrder(e,t){const i=this.safeInteger(e,"creation_timestamp");let s,r=this.parseOrderStatus(this.safeString(e,"state"));r=r;const a=this.safeString(e,"type");"ASK"===a||"SELL"===a?s="sell":"BID"!==a&&"BUY"!==a||(s="buy");const n=this.safeString(e,"pair"),o=this.safeSymbol(n,t),h=this.safeString(e,"limit_price"),c=this.safeString(e,"limit_volume"),d=this.safeNumber(e,"fee_counter"),u=this.safeNumber(e,"fee_base"),l=this.safeString(e,"base"),f=this.safeString(e,"counter"),p={currency:void 0};d?(p.cost=d,void 0!==t&&(p.currency=t.quote)):(p.cost=u,void 0!==t&&(p.currency=t.base));const m=this.safeString(e,"order_id");return this.safeOrder2({id:m,clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:r,symbol:o,type:void 0,timeInForce:void 0,postOnly:void 0,side:s,price:h,stopPrice:void 0,amount:c,filled:l,cost:f,remaining:void 0,trades:void 0,fee:p,info:e,average:void 0},t)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(r)}async fetchOrdersByState(e,t,i,s,r={}){await this.loadMarkets();const a={};let n;void 0!==e&&(a.state=e),void 0!==t&&(n=this.market(t),a.pair=n.id);const o=await this.privateGetListorders(this.extend(a,r)),h=this.safeValue(o,"orders",[]);return this.parseOrders(h,n,i,s)}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByState(void 0,e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByState("PENDING",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByState("COMPLETE",e,t,i,s)}parseTicker(e,t){const i=this.safeInteger(e,"timestamp");let s;t&&(s=t.symbol);const r=this.safeNumber(e,"last_trade");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"rolling_24_hour_volume"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=this.indexBy(i.tickers,"pair"),r=Object.keys(s),a={};for(let e=0;e<r.length;e++){const t=r[e],i=this.safeMarket(t),n=i.symbol,o=s[t];a[n]=this.parseTicker(o,i)}return this.filterByArray(a,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},r=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.safeString(e,"order_id");let s,r;if(void 0!==i){const t=this.safeString(e,"type");"ASK"===t||"SELL"===t?r="sell":"BID"!==t&&"BUY"!==t||(r="buy"),s="sell"===r&&e.is_buy?"maker":"buy"!==r||e.is_buy?"taker":"maker"}else r=e.is_buy?"buy":"sell";const a=this.safeNumber(e,"fee_base"),n=this.safeNumber(e,"fee_counter");let o,h;void 0!==a?0!==a&&(o=t.base,h=a):void 0!==n&&0!==n&&(o=t.quote,h=n);const c=this.safeInteger(e,"timestamp");return{info:e,id:void 0,timestamp:c,datetime:this.iso8601(c),symbol:t.symbol,order:i,type:void 0,side:r,takerOrMaker:s,price:this.safeNumber(e,"price"),amount:this.safeNumber(e,"volume"),cost:this.safeNumber(e,"counter"),fee:{cost:h,currency:o}}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id};void 0!==t&&(a.since=t);const n=await this.publicGetTrades(this.extend(a,s)),o=this.safeValue(n,"trades",[]);return this.parseTrades(o,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={pair:r.id};void 0!==t&&(n.since=t),void 0!==i&&(n.limit=i);const o=await this.privateGetListtrades(this.extend(n,s)),h=this.safeValue(o,"trades",[]);return this.parseTrades(h,r,t,i)}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privateGetFeeInfo(e);return{info:t,maker:this.safeNumber(t,"maker_fee"),taker:this.safeNumber(t,"taker_fee")}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let n="privatePost";const o={pair:this.marketId(e)};"market"===t?(n+="Marketorder",o.type=i.toUpperCase(),"buy"===i?o.counter_volume=parseFloat(this.amountToPrecision(e,s)):o.base_volume=parseFloat(this.amountToPrecision(e,s))):(n+="Postorder",o.volume=parseFloat(this.amountToPrecision(e,s)),o.price=parseFloat(this.priceToPrecision(e,r)),o.type="buy"===i?"BID":"ASK");const h=await this[n](this.extend(o,a));return{info:h,id:h.order_id}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e};return await this.privatePostStoporder(this.extend(s,i))}async fetchLedgerByEntries(e,t=-1,i=1,s={}){const r={min_row:t,max_row:this.sum(t,i)};return await this.fetchLedger(e,void 0,i,this.extend(r,s))}async fetchLedger(e,t,i,s={}){let n;await this.loadMarkets(),await this.loadAccounts();let o=this.safeString(s,"id"),h=this.safeValue(s,"min_row"),c=this.safeValue(s,"max_row");if(void 0===o){if(void 0===e)throw new a(this.id+" fetchLedger() requires a currency code argument if no account id specified in params");n=this.currency(e);const t=this.indexBy(this.accounts,"currency"),i=this.safeValue(t,e);if(void 0===i)throw new r(this.id+" fetchLedger() could not find account id for "+e);o=i.id}if(void 0===h&&void 0===c)c=0,h=-1e3;else if(void 0===h||void 0===c)throw new r(this.id+" fetchLedger() require both params 'max_row' and 'min_row' or neither to be defined");if(void 0!==i&&c-h>i&&(c<=0?h=c-i:h>0&&(c=h+i)),c-h>1e3)throw new r(this.id+" fetchLedger() requires the params 'max_row' - 'min_row' <= 1000");const d={id:o,min_row:h,max_row:c},u=await this.privateGetAccountsIdTransactions(this.extend(s,d)),l=this.safeValue(u,"transactions",[]);return this.parseLedger(l,n,t,i)}parseLedgerComment(e){const t=e.split(" ");let i;const s=this.safeString(t,0),r=this.safeString(t,2),a=this.safeString(t,3);let n=this.safeString({Withdrawal:"fee",Trading:"fee",Payment:"transaction",Sent:"transaction",Deposit:"transaction",Received:"transaction",Released:"released",Reserved:"reserved",Sold:"trade",Bought:"trade",Failure:"failed"},s,void 0);return void 0===n&&"fee"===r&&(n="fee"),"reserved"===n&&"order"===a&&(i=this.safeString(t,4)),{type:n,referenceId:i}}parseLedgerEntry(e,t){const i=this.safeString(e,"row_index"),s=this.safeString(e,"account_id"),r=this.safeValue(e,"timestamp"),a=this.safeString(e,"currency"),n=this.safeCurrencyCode(a,t),o=this.safeNumber(e,"available_delta"),h=this.safeNumber(e,"balance_delta"),c=this.safeNumber(e,"balance"),d=this.safeString(e,"description");let u=c,l=0;const f=this.parseLedgerComment(d),p=f.type,m=f.referenceId;let g,y;return 0!==h?(u=c-h,y="ok",l=Math.abs(h)):o<0?(y="pending",l=Math.abs(o)):o>0&&(y="canceled",l=Math.abs(o)),h>0||o>0?g="in":(h<0||o<0)&&(g="out"),{id:i,direction:g,account:s,referenceId:m,referenceAccount:void 0,type:p,currency:n,amount:l,timestamp:r,datetime:this.iso8601(r),before:u,after:c,status:y,fee:void 0,info:e}}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if(Object.keys(o).length&&(n+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();const e=this.stringToBase64(this.apiKey+":"+this.secret);r={Authorization:"Basic "+this.decode(e)}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o&&void 0!==this.safeValue(o,"error"))throw new r(this.id+" "+this.json(o))}}},25591:(e,t,i)=>{"use strict";const s=i(48819),r=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"lykke",name:"Lykke",countries:["CH"],version:"v1",rateLimit:200,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:void 0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0},timeframes:{"1m":"Minute","5m":"Min5","15m":"Min15","30m":"Min30","1h":"Hour","4h":"Hour4","6h":"Hour6","12h":"Hour12","1d":"Day","1w":"Week","1M":"Month"},requiredCredentials:{apiKey:!0,secret:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/34487620-3139a7b0-efe6-11e7-90f5-e520cef74451.jpg",api:{mobile:"https://public-api.lykke.com/api",public:"https://hft-api.lykke.com/api",private:"https://hft-api.lykke.com/api"},test:{mobile:"https://public-api.lykke.com/api",public:"https://hft-service-dev.lykkex.net/api",private:"https://hft-service-dev.lykkex.net/api"},www:"https://www.lykke.com",doc:["https://hft-api.lykke.com/swagger/ui/","https://www.lykke.com/lykke_api"],fees:"https://www.lykke.com/trading-conditions"},api:{mobile:{get:["AssetPairs/rate","AssetPairs/rate/{assetPairId}","AssetPairs/dictionary/{market}","Assets/dictionary","Candles/history/{market}/available","Candles/history/{market}/{assetPair}/{period}/{type}/{from}/{to}","Company/ownershipStructure","Company/registrationsCount","IsAlive","Market","Market/{market}","Market/capitalization/{market}","OrderBook","OrderBook/{assetPairId}","Trades/{AssetPairId}","Trades/Last/{assetPair}/{n}"],post:["AssetPairs/rate/history","AssetPairs/rate/history/{assetPairId}"]},public:{get:["AssetPairs","AssetPairs/{id}","IsAlive","OrderBooks","OrderBooks/{AssetPairId}"]},private:{get:["Orders","Orders/{id}","Wallets","History/trades"],post:["Orders/limit","Orders/market","Orders/{id}/Cancel","Orders/v2/market","Orders/v2/limit","Orders/stoplimit","Orders/bulk"],delete:["Orders","Orders/{id}"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:0},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001},deposit:{BTC:0}}},commonCurrencies:{CAN:"CanYaCoin",XPD:"Lykke XPD"}})}parseTrade(e,t){const i=this.safeString(e,"AssetPairId"),s=this.safeSymbol(i,t),a=this.safeString2(e,"id","Id"),n=this.safeString(e,"OrderId"),o=this.parse8601(this.safeString2(e,"dateTime","DateTime")),h=this.safeString2(e,"price","Price");let c=this.safeString2(e,"volume","Amount"),d=this.safeStringLower(e,"action");void 0===d&&(d="-"===c[0]?"sell":"buy"),c=r.stringAbs(c);const u=this.parseNumber(h),l=this.parseNumber(c),f=this.parseNumber(r.stringMul(h,c)),p={cost:0,currency:t.quote};return{id:a,info:e,timestamp:o,datetime:this.iso8601(o),symbol:s,type:void 0,order:n,side:d,takerOrMaker:void 0,price:u,amount:l,cost:f,fee:p}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e);void 0===i&&(i=100);const a={AssetPairId:r.id,skip:0,take:i},n=await this.mobileGetTradesAssetPairId(this.extend(a,s));return this.parseTrades(n,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==i&&(r.take=i),void 0!==e&&(a=this.market(e),r.assetPairId=a.id);const n=await this.privateGetHistoryTrades(this.extend(r,s));return this.parseTrades(n,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetWallets(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"AssetId"),a=this.safeCurrencyCode(r),n=this.account();n.total=this.safeString(s,"Balance"),n.used=this.safeString(s,"Reserved"),i[a]=n}return this.parseBalance(i)}async cancelOrder(e,t,i={}){const s={id:e};return await this.privateDeleteOrdersId(this.extend(s,i))}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s;return void 0!==e&&(s=this.market(e),i.assetPairId=s.id),await this.privateDeleteOrders(this.extend(i,t))}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o={AssetPairId:n.id,OrderAction:this.capitalize(i),Volume:s,Asset:n.baseId};"limit"===t&&(o.Price=r);const h="privatePostOrdersV2"+this.capitalize(t),c=await this[h](this.extend(o,a));return{id:this.safeString(c,"Id"),info:c,clientOrderId:void 0,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:e,type:t,side:i,price:r=this.safeNumber(c,"Price"),amount:s,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:void 0,fee:void 0,trades:void 0}}async fetchMarkets(e={}){const t=await this.publicGetAssetPairs(),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"Id"),a=this.safeString(s,"Name"),[n,o]=a.split("/"),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=h+"/"+c,u=this.safeString(s,"Accuracy"),l=this.parsePrecision(u),f={price:parseInt(u),amount:this.safeInteger(s,"InvertedAccuracy")};i.push({id:r,symbol:d,base:h,quote:c,type:"spot",spot:!0,active:!0,info:s,precision:f,limits:{amount:{min:this.safeNumber(s,"MinVolume"),max:void 0},price:{min:this.parseNumber(l),max:void 0},cost:{min:this.safeNumber(s,"MinInvertedVolume"),max:void 0}},baseId:void 0,quoteId:void 0})}return i}parseTicker(e,t){const i=this.milliseconds();let s;t&&(s=t.symbol);const r=this.safeNumber(e,"lastPrice");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeNumber(e,"volume24H"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.mobileGetMarketMarket(this.extend(s,t));return this.parseTicker(r,i)}parseOrderStatus(e){return this.safeString({Open:"open",Pending:"open",InOrderBook:"open",Processing:"open",Matched:"closed",Cancelled:"canceled",Rejected:"rejected",Replaced:"canceled",Placed:"open"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"Status")),s=this.safeString(e,"AssetPairId"),a=this.safeSymbol(s,t),n=this.parse8601(this.safeString(e,"LastMatchTime"));let o;"Registered"in e&&e.Registered?o=this.parse8601(e.Registered):"CreatedAt"in e&&e.CreatedAt&&(o=this.parse8601(e.CreatedAt));const h=this.safeString(e,"Price");let c,d=this.safeString(e,"Volume");r.stringLt(d,"0")?(c="sell",d=r.stringAbs(d)):c="buy";const u=r.stringAbs(this.safeString(e,"RemainingVolume")),l=this.safeString(e,"Id");return this.safeOrder2({info:e,id:l,clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:n,symbol:a,type:void 0,timeInForce:void 0,postOnly:void 0,side:c,price:h,stopPrice:void 0,cost:void 0,average:void 0,amount:d,filled:void 0,remaining:u,status:i,fee:void 0,trades:void 0},t)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(r)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r=await this.privateGetOrders(s);let a;return void 0!==e&&(a=this.market(e)),this.parseOrders(r,a,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"InOrderBook"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"Matched"},s))}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=await this.publicGetOrderBooksAssetPairId(this.extend({AssetPairId:this.marketId(e)},i)),r={timestamp:void 0,bids:[],asks:[]};let a;for(let e=0;e<s.length;e++){const t=s[e];t.IsBuy?r.bids=this.arrayConcat(r.bids,t.Prices):r.asks=this.arrayConcat(r.asks,t.Prices);const i=this.parse8601(t.Timestamp);a=void 0===a?i:Math.max(a,i)}return this.parseOrderBook(r,e,a,"bids","asks","Price","Volume")}parseBidAsk(e,t=0,i=1){const s=this.safeNumber(e,t);let r=this.safeNumber(e,i);return r<0&&(r=-r),[s,r]}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t]+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));return"mobile"===t||"public"===t?Object.keys(o).length&&(n+="?"+this.urlencode(o)):"private"===t&&("GET"!==i&&"DELETE"!==i||Object.keys(o).length&&(n+="?"+this.urlencode(o)),this.checkRequiredCredentials(),r={"api-key":this.apiKey,Accept:"application/json","Content-Type":"application/json"},"POST"===i&&Object.keys(s).length&&(a=this.json(s))),{url:n,method:i,body:a,headers:r}}}},47551:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,InvalidOrder:n}=i(73449),o=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"mercado",name:"Mercado Bitcoin",countries:["BR"],rateLimit:1e3,version:"v3",has:{cancelOrder:!0,CORS:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:"emulated",fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:void 0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","6h":"6h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","2w":"2w"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27837060-e7c58714-60ea-11e7-9192-f05e86adb83f.jpg",api:{public:"https://www.mercadobitcoin.net/api",private:"https://www.mercadobitcoin.net/tapi",v4Public:"https://www.mercadobitcoin.com.br/v4"},www:"https://www.mercadobitcoin.com.br",doc:["https://www.mercadobitcoin.com.br/api-doc","https://www.mercadobitcoin.com.br/trade-api"]},api:{public:{get:["coins","{coin}/orderbook/","{coin}/ticker/","{coin}/trades/","{coin}/trades/{from}/","{coin}/trades/{from}/{to}","{coin}/day-summary/{year}/{month}/{day}/"]},private:{post:["cancel_order","get_account_info","get_order","get_withdrawal","list_system_messages","list_orders","list_orderbook","place_buy_order","place_sell_order","place_market_buy_order","place_market_sell_order","withdraw_coin"]},v4Public:{get:["{coin}/candle/"]}},fees:{trading:{maker:.003,taker:.007}},options:{limits:{BTC:.001,BCH:.001,ETH:.01,LTC:.01,XRP:.1}}})}async fetchMarkets(e={}){const t=await this.publicGetCoins(e),i=[],s=this.safeValue(this.options,"limits",{});for(let e=0;e<t.length;e++){const r=t[e],a=r,n="BRL",o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c=o+"/"+h,d=h+o,u={amount:8,price:5},l="1e-5";i.push({id:d,symbol:c,base:o,quote:h,baseId:a,quoteId:n,type:"spot",spot:!0,active:void 0,info:r,precision:u,limits:{amount:{min:this.safeNumber(s,a),max:void 0},price:{min:this.parseNumber(l),max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={coin:this.market(e).base},r=await this.publicGetCoinOrderbook(this.extend(s,i));return this.parseOrderBook(r,e)}async fetchTicker(e,t={}){await this.loadMarkets();const i={coin:this.market(e).base},s=await this.publicGetCoinTicker(this.extend(i,t)),r=this.safeValue(s,"ticker",{}),a=this.safeTimestamp(r,"date"),n=this.safeNumber(r,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeNumber(r,"high"),low:this.safeNumber(r,"low"),bid:this.safeNumber(r,"buy"),bidVolume:void 0,ask:this.safeNumber(r,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(r,"vol"),quoteVolume:void 0,info:r}}parseTrade(e,t){const i=this.safeTimestamp2(e,"date","executed_timestamp");let s;void 0!==t&&(s=t.symbol);const r=this.safeString2(e,"tid","operation_id"),a=this.safeString(e,"type"),n=this.safeString(e,"price"),h=this.safeString2(e,"amount","quantity"),c=this.parseNumber(n),d=this.parseNumber(h),u=this.parseNumber(o.stringMul(n,h)),l=this.safeNumber(e,"fee_rate");let f;return void 0!==l&&(f={cost:l,currency:void 0}),{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,order:void 0,type:void 0,side:a,takerOrMaker:void 0,price:c,amount:d,cost:u,fee:f}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e);let a="publicGetCoinTrades";const n={coin:r.base};void 0!==t&&(a+="From",n.from=parseInt(t/1e3)),void 0!==this.safeInteger(s,"to")&&(a+="To");const o=await this[a](this.extend(n,s));return this.parseTrades(o,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetAccountInfo(e),i=this.safeValue(t,"response_data",{}),s=this.safeValue(i,"balance",{}),r={info:t},a=Object.keys(s);for(let e=0;e<a.length;e++){const t=a[e],i=this.safeCurrencyCode(t);if(t in s){const e=this.safeValue(s,t,{}),a=this.account();a.free=this.safeString(e,"available"),a.total=this.safeString(e,"total"),r[i]=a}}return this.parseBalance(r)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={coin_pair:this.marketId(e)};let h=this.capitalize(i)+"Order";if("limit"===t)h="privatePostPlace"+h,o.limit_price=this.priceToPrecision(e,r),o.quantity=this.amountToPrecision(e,s);else if(h="privatePostPlaceMarket"+h,"buy"===i){if(void 0===r)throw new n(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount");o.cost=this.priceToPrecision(e,s*r)}else o.quantity=this.amountToPrecision(e,s);const c=await this[h](this.extend(o,a));return{info:c,id:c.response_data.order.order_id.toString()}}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder () requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={coin_pair:s.id,order_id:e},n=await this.privatePostCancelOrder(this.extend(r,i)),o=this.safeValue(n,"response_data",{}),h=this.safeValue(o,"order",{});return this.parseOrder(h,s)}parseOrderStatus(e){return this.safeString({2:"open",3:"canceled",4:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_id"),s=this.safeString(e,"order_type");let r;"order_type"in e&&(r="1"===s?"buy":"sell");const a=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeString(e,"coin_pair");t=this.safeMarket(n,t);const o=this.safeTimestamp(e,"created_timestamp"),h={cost:this.safeNumber(e,"fee"),currency:t.quote},c=this.safeNumber(e,"limit_price"),d=this.safeNumber(e,"executed_price_avg"),u=this.safeNumber(e,"quantity"),l=this.safeNumber(e,"executed_quantity"),f=this.safeTimestamp(e,"updated_timestamp"),p=this.safeValue(e,"operations",[]),m=this.parseTrades(p,t,void 0,void 0,{side:r,order:i});return this.safeOrder({info:e,id:i,clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:f,symbol:t.symbol,type:"limit",timeInForce:void 0,postOnly:void 0,side:r,price:c,stopPrice:void 0,cost:void 0,average:d,amount:u,filled:l,remaining:void 0,status:a,fee:h,trades:m})}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder () requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={coin_pair:s.id,order_id:parseInt(e)},n=await this.privatePostGetOrder(this.extend(r,i)),o=this.safeValue(n,"response_data",{}),h=this.safeValue(o,"order");return this.parseOrder(h,s)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const n={coin:this.currency(e).id,quantity:t.toFixed(10),address:i};if("BRL"===e){if(!("account_ref"in r))throw new a(this.id+" withdraw() requires account_ref parameter to withdraw "+e)}else if("LTC"!==e){if(!("tx_fee"in r))throw new a(this.id+" withdraw() requires tx_fee parameter to withdraw "+e);if("XRP"===e)if(void 0===s){if(!("destination_tag"in r))throw new a(this.id+" withdraw() requires a tag argument or destination_tag parameter to withdraw "+e)}else n.destination_tag=s}const o=await this.privatePostWithdrawCoin(this.extend(n,r));return{info:o,id:o.response_data.withdrawal.id}}parseOHLCV(e,t){return[this.safeTimestamp(e,"timestamp"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={precision:this.timeframes[t],coin:a.id.toLowerCase()};void 0!==s&&void 0!==i?(n.from=parseInt(i/1e3),n.to=this.sum(n.from,s*this.parseTimeframe(t))):void 0!==i?(n.from=parseInt(i/1e3),n.to=this.sum(this.seconds(),1)):void 0!==s&&(n.to=this.seconds(),n.from=n.to-s*this.parseTimeframe(t));const o=await this.v4PublicGetCoinCandle(this.extend(n,r)),h=this.safeValue(o,"candles",[]);return this.parseOHLCVs(h,a,t,i,s)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders () requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={coin_pair:r.id},o=await this.privatePostListOrders(this.extend(n,s)),h=this.safeValue(o,"response_data",{}),c=this.safeValue(h,"orders",[]);return this.parseOrders(c,r,t,i)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOpenOrders () requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={coin_pair:r.id,status_list:"[2]"},o=await this.privatePostListOrders(this.extend(n,s)),h=this.safeValue(o,"response_data",{}),c=this.safeValue(h,"orders",[]);return this.parseOrders(c,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades () requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={coin_pair:r.id,has_fills:!0},o=await this.privatePostListOrders(this.extend(n,s)),h=this.safeValue(o,"response_data",{}),c=this.safeValue(h,"orders",[]),d=this.parseOrders(c,r,t,i),u=this.ordersToTrades(d);return this.filterBySymbolSinceLimit(u,e,t,i)}ordersToTrades(e){const t=[];for(let i=0;i<e.length;i++){const s=this.safeValue(e[i],"trades",[]);for(let e=0;e<s.length;e++)t.push(s[e])}return t}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t]+"/";const o=this.omit(s,this.extractParams(e));if("public"===t||"v4Public"===t)n+=this.implodeParams(e,s),Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),n+=this.version+"/";const t=this.nonce();a=this.urlencode(this.extend({tapi_method:e,tapi_nonce:t},s));const i="/tapi/"+this.version+"/?"+a;r={"Content-Type":"application/x-www-form-urlencoded","TAPI-ID":this.apiKey,"TAPI-MAC":this.hmac(this.encode(i),this.encode(this.secret),"sha512")}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o&&void 0!==this.safeValue(o,"error_message"))throw new r(this.id+" "+this.json(o))}}},10085:(e,t,i)=>{"use strict";const s=i(48819),{InvalidAddress:r,ExchangeError:a,BadRequest:n,AuthenticationError:o,RateLimitExceeded:h,BadSymbol:c,InvalidOrder:d,InsufficientFunds:u,ArgumentsRequired:l,OrderNotFound:f,PermissionDenied:p}=i(73449),{TICK_SIZE:m}=i(62115),g=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"mexc",name:"MEXC Global",countries:["SC"],rateLimit:50,version:"v2",certified:!0,has:{addMargin:!0,cancelAllOrders:!0,cancelOrder:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDepositAddressByNetwork:!0,fetchDepositAddressesByNetwork:!0,fetchDeposits:!0,fetchFundingRateHistory:!0,fetchMarkets:!0,fetchMarketsByType:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrdersByState:!0,fetchOrderTrades:!0,fetchPosition:!0,fetchPositions:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,reduceMargin:!0,setLeverage:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","1d":"1d","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/137283979-8b2a818d-8633-461b-bfca-de89e8c446b2.jpg",api:{spot:{public:"https://www.mexc.com/open/api/v2",private:"https://www.mexc.com/open/api/v2"},contract:{public:"https://contract.mexc.com/api/v1/contract",private:"https://contract.mexc.com/api/v1/private"}},www:"https://www.mexc.com/",doc:["https://mxcdevelop.github.io/APIDoc/"],fees:["https://www.mexc.com/fee"],referral:"https://m.mexc.com/auth/signup?inviteCode=1FQ1G"},api:{contract:{public:{get:{ping:2,detail:2,support_currencies:2,"depth/{symbol}":2,"depth_commits/{symbol}/{limit}":2,"index_price/{symbol}":2,"fair_price/{symbol}":2,"funding_rate/{symbol}":2,"kline/{symbol}":2,"kline/index_price/{symbol}":2,"kline/fair_price/{symbol}":2,"deals/{symbol}":2,ticker:2,risk_reverse:2,"risk_reverse/history":2,"funding_rate/history":2}},private:{get:{"account/assets":2,"account/asset/{currency}":2,"account/transfer_record":2,"position/list/history_positions":2,"position/open_positions":2,"position/funding_records":2,"order/list/open_orders/{symbol}":2,"order/list/history_orders":2,"order/external/{symbol}/{external_oid}":2,"order/get/{order_id}":2,"order/batch_query":8,"order/deal_details/{order_id}":2,"order/list/order_deals":2,"planorder/list/orders":2,"stoporder/list/orders":2,"stoporder/order_details/{stop_order_id}":2,"account/risk_limit":2,"account/tiered_fee_rate":2},post:{"position/change_margin":2,"position/change_leverage":2,"order/submit":2,"order/submit_batch":40,"order/cancel":2,"order/cancel_with_external":2,"order/cancel_all":2,"account/change_risk_level":2,"planorder/place":2,"planorder/cancel":2,"planorder/cancel_all":2,"stoporder/cancel":2,"stoporder/cancel_all":2,"stoporder/change_price":2,"stoporder/change_plan_price":2}}},spot:{public:{get:{"market/symbols":1,"market/coin/list":2,"common/timestamp":1,"common/ping":1,"market/ticker":1,"market/depth":1,"market/deals":1,"market/kline":1}},private:{get:{"account/info":1,"order/open_orders":1,"order/list":1,"order/query":1,"order/deals":1,"order/deal_detail":1,"asset/deposit/address/list":2,"asset/deposit/list":2,"asset/address/list":2,"asset/withdraw/list":2},post:{"order/place":1,"order/place_batch":1,"asset/withdraw":1},delete:{"order/cancel":1,"order/cancel_by_symbol":1}}}},precisionMode:m,fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},options:{timeframes:{spot:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","1d":"1d","1M":"1M"},contract:{"1m":"Min1","5m":"Min5","15m":"Min15","30m":"Min30","1h":"Min60","4h":"Hour4","8h":"Hour8","1d":"Day1","1w":"Week1","1M":"Month1"}},defaultType:"spot",networks:{TRX:"TRC-20",TRC20:"TRC-20",ETH:"ERC-20",ERC20:"ERC-20",BEP20:"BEP20(BSC)"}},commonCurrencies:{BYN:"BeyondFi",COFI:"COFIX",DFT:"dFuture",DRK:"DRK",FLUX1:"FLUX",FLUX:"FLUX1",HERO:"Step Hero",MIMO:"Mimosa",PROS:"Pros.Finance",SIN:"Sin City Token"},exceptions:{exact:{400:n,401:o,429:h,1e3:p,1002:d,10072:o,10073:o,10216:r,10232:c,3e4:c,30001:d,30002:d,30003:d,30004:u,30005:d,30010:d,30016:c,30019:d,30020:c,30021:c,33333:c},broad:{}}})}async fetchTime(e={}){const t=this.safeString2(this.options,"fetchMarkets","defaultType","spot"),i=this.safeString(e,"type",t),s=this.omit(e,"type");let r="spotPublicGetCommonTimestamp";"contract"===i&&(r="contractPublicGetPing");const a=await this[r](s);return this.safeInteger(a,"data")}async fetchStatus(e={}){const t=await this.spotPublicGetCommonPing(e),i=this.safeInteger(t,"code");if(void 0!==i){const e=200===i?"ok":"maintenance";this.status=this.extend(this.status,{status:e,updated:this.milliseconds()})}return this.status}async fetchCurrencies(e={}){const t=await this.spotPublicGetMarketCoinList(e),i=this.safeValue(t,"data",[]),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currency"),a=this.safeCurrencyCode(r),n=this.safeString(t,"full_name");let o,h,c,d,u=!1;const l={},f=this.safeValue(t,"coins",[]);for(let e=0;e<f.length;e++){const t=f[e],i=this.safeString(t,"chain"),s=this.safeNetwork(i),r=this.safeValue(t,"is_deposit_enabled",!1),a=this.safeValue(t,"is_withdraw_enabled",!1),n=r&&a;u=n||u;const o=this.safeInteger(t,"precision"),h=1/Math.pow(10,o),p=this.safeString(t,"withdraw_limit_min"),m=this.safeString(t,"withdraw_limit_max");c=void 0===c?p:c,d=void 0===d?m:d,g.stringGt(c,p)&&(c=p),g.stringLt(d,m)&&(d=m),l[s]={info:t,id:i,network:s,active:n,fee:this.safeNumber(t,"fee"),precision:h,limits:{withdraw:{min:p,max:m}}}}const p=Object.keys(l).length;if(1===p||"NONE"in l){const e=this.safeValue2(l,"NONE",p-1);void 0!==e&&(h=e.fee,o=e.precision)}s[a]={id:r,code:a,info:t,name:n,active:u,fee:h,precision:o,limits:{amount:{min:void 0,max:void 0},withdraw:{min:c,max:d}},networks:l}}return s}async fetchMarketsByType(e,t={}){const i="fetch_"+e+"_markets";return await this[i](t)}async fetchMarkets(e={}){const t=this.safeString2(this.options,"fetchMarkets","defaultType","spot"),i=this.safeString(e,"type",t),s=this.omit(e,"type"),r="spot"===i,n="swap"===i;if(!r&&!n)throw new a(this.id+" does not support '"+i+"' type, set exchange.options['defaultType'] to 'spot', 'margin', 'delivery' or 'future'");return r?await this.fetchSpotMarkets(s):n?await this.fetchContractMarkets(s):void 0}async fetchContractMarkets(e={}){const t=await this.contractPublicGetDetail(e),i=this.safeValue(t,"data",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"symbol"),a=this.safeString(t,"baseCoin"),n=this.safeString(t,"quoteCoin"),o=this.safeString(t,"settleCoin"),h=this.safeCurrencyCode(a),c=this.safeCurrencyCode(n),d=this.safeCurrencyCode(o),u=this.safeString(t,"state");s.push({info:t,id:r,symbol:h+"/"+c+":"+d,base:h,quote:c,settle:d,baseId:a,quoteId:n,settleId:o,type:"swap",spot:!1,margin:!1,swap:!0,futures:!1,option:!1,derivative:!0,contract:!0,linear:!0,inverse:!1,taker:this.safeNumber(t,"takerFeeRate"),maker:this.safeNumber(t,"makerFeeRate"),contractSize:this.safeString(t,"contractSize"),active:"0"===u,expiry:this.safeInteger(t,"expire_time"),fees:this.safeValue(this.fees,"trading"),precision:{price:this.safeNumber(t,"priceUnit"),amount:this.safeNumber(t,"volUnit")},limits:{leverage:{min:this.safeNumber(t,"minLeverage"),max:this.safeNumber(t,"maxLeverage")},amount:{min:this.safeNumber(t,"minVol"),max:this.safeNumber(t,"maxVol")},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}})}return s}async fetchSpotMarkets(e={}){const t=await this.spotPublicGetMarketSymbols(e),i=this.safeValue(t,"data",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"symbol"),[a,n]=r.split("_"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c=o+"/"+h,d=this.safeInteger(t,"price_scale"),u=this.safeInteger(t,"quantity_scale"),l={price:1/Math.pow(10,d),amount:1/Math.pow(10,u)},f=this.safeNumber(t,"taker_fee_rate"),p=this.safeNumber(t,"maker_fee_rate"),m="ENABLED"===this.safeString(t,"state"),g="spot",y=!1,b=!0;s.push(this.extend(this.fees.trading,{info:t,id:r,symbol:c,base:o,quote:h,baseId:a,quoteId:n,type:g,swap:y,spot:b,active:m,taker:f,maker:p,precision:l,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(t,"min_amount"),max:this.safeNumber(t,"max_amount")}}}))}return s}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.safeString2(this.options,"fetchTickers","defaultType","spot"),s=this.safeString(t,"type",i),r=this.omit(t,"type");let a="spotPublicGetMarketTicker";"swap"===s&&(a="contractPublicGetTicker");const n=await this[a](this.extend(r)),o=this.safeValue(n,"data",[]);return this.parseTickers(o,e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id};let r;i.spot?r="spotPublicGetMarketTicker":i.swap&&(r="contractPublicGetTicker");const a=await this[r](this.extend(s,t));if(i.spot){const e=this.safeValue(a,"data",[]),t=this.safeValue(e,0);return this.parseTicker(t,i)}if(i.swap){const e=this.safeValue(a,"data",{});return this.parseTicker(e,i)}}parseTicker(e,t){const i=this.safeInteger2(e,"time","timestamp"),s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t,"_"),a=this.safeNumber2(e,"volume","volume24"),n=this.safeNumber(e,"amount24"),o=this.safeNumber(e,"open"),h=this.safeString2(e,"last","lastPrice"),c=this.parseNumber(h),d=this.safeNumber(e,"riseFallValue"),u=this.safeString(e,"riseFallRate"),l=g.stringAdd(u,"1"),f=this.parseNumber(l);return this.safeTicker({symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber2(e,"high","high24Price"),low:this.safeNumber2(e,"low","lower24Price"),bid:this.safeNumber2(e,"bid","bid1"),bidVolume:void 0,ask:this.safeNumber2(e,"ask","ask1"),askVolume:void 0,vwap:void 0,open:o,close:c,last:c,previousClose:void 0,change:d,percentage:f,average:void 0,baseVolume:a,quoteVolume:n,info:e},t)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={symbol:s.id};let a;s.spot?(a="spotPublicGetMarketDepth",void 0===t&&(t=100),r.depth=t):s.swap&&(a="contractPublicGetDepthSymbol",void 0!==t&&(r.limit=t));const n=await this[a](this.extend(r,i)),o=this.safeValue(n,"data",{}),h=s.spot?"price":0,c=s.spot?"quantity":1,d=this.safeInteger(o,"timestamp"),u=this.parseOrderBook(o,e,d,"bids","asks",h,c);return u.nonce=this.safeInteger(o,"version"),u}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};let n;void 0!==i&&(a.limit=i),r.spot?n="spotPublicGetMarketDeals":r.swap&&(n="contractPublicGetDealsSymbol");const o=await this[n](this.extend(a,s)),h=this.safeValue(o,"data",[]);return this.parseTrades(h,r,t,i)}parseTrade(e,t){let i=this.safeInteger2(e,"create_time","trade_time");i=this.safeInteger(e,"t",i);const s=this.safeString(e,"symbol"),r=(t=this.safeMarket(s,t,"_")).symbol;let a=this.safeString2(e,"price","trade_price");a=this.safeString(e,"p",a);let n=this.safeString2(e,"quantity","trade_quantity");n=this.safeString(e,"v",n);let o=this.safeString(e,"amount");void 0===o&&(o=g.stringMul(a,n));const h=this.parseNumber(a),c=this.parseNumber(n),d=this.parseNumber(o);let u=this.safeString2(e,"trade_type","T");"BID"===u||"1"===u?u="buy":"ASK"!==u&&"2"!==u||(u="sell");let l=this.safeString2(e,"id","trade_time");void 0===l&&(l=this.safeString(e,"t",l),void 0!==l&&(l+="-"+t.id+"-"+n));const f=this.safeNumber(e,"fee");let p;if(void 0!==f){const t=this.safeString(e,"fee_currency");p={cost:f,currency:this.safeCurrencyCode(t)}}const m=this.safeString(e,"order_id"),y=this.safeValue(e,"is_taker",!0)?"taker":"maker";return{info:e,id:l,order:m,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,side:u,takerOrMaker:y,price:h,amount:c,cost:d,fee:p}}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n=this.safeValue(this.options,"timeframes",{}),o=this.safeValue(n,a.type,{}),h={symbol:a.id,interval:o[t]};let c;a.spot?(c="spotPublicGetMarketKline",void 0!==i&&(h.start_time=parseInt(i/1e3)),void 0!==s&&(h.limit=s)):a.swap&&(c="contractPublicGetKlineSymbol",void 0!==i&&(h.start=parseInt(i/1e3)));const d=await this[c](this.extend(h,r));if(a.spot){const e=this.safeValue(d,"data",[]);return this.parseOHLCVs(e,a,t,i,s)}if(a.swap){const e=this.safeValue(d,"data",{}),r=this.convertTradingViewToOHLCV(e,"time","open","high","low","close","vol");return this.parseOHLCVs(r,a,t,i,s)}}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,t.spot?3:2),this.safeNumber(e,t.spot?4:3),this.safeNumber(e,t.spot?2:4),this.safeNumber(e,5)]}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString2(this.options,"fetchBalance","defaultType","spot"),i=this.safeString(e,"type",t),s="spot"===i;let r;s?r="spotPrivateGetAccountInfo":"swap"===i&&(r="contractPrivateGetAccountAssets");const a=this.omit(e,"type"),n=await this[r](a),o=this.safeValue(n,"data",{}),h={info:n,timestamp:void 0,datetime:void 0};if(s){const e=Object.keys(o);for(let t=0;t<e.length;t++){const i=e[t],s=this.safeCurrencyCode(i),r=this.safeValue(o,i,{}),a=this.account();a.free=this.safeString(r,"available"),a.used=this.safeString(r,"frozen"),h[s]=a}}else for(let e=0;e<o.length;e++){const t=o[e],i=this.safeString(t,"currency"),s=this.safeCurrencyCode(i),r=this.account();r.free=this.safeString(t,"availableBalance"),r.used=this.safeString(t,"frozenBalance"),h[s]=r}return this.parseBalance(h)}safeNetwork(e){if(e.indexOf("BSC")>=0)return"BEP20";const t=e.split(" ");return e=(e=t.join("")).replace("-20","20"),this.safeString({ETH:"ETH",ERC20:"ERC20","BEP20(BSC)":"BEP20",TRX:"TRC20"},e,e)}parseDepositAddress(e,t){const i=this.safeString(e,"address"),s=this.safeCurrencyCode(void 0,t),r=this.safeString(e,"chain"),a=this.safeNetwork(r);return this.checkAddress(i),{currency:s,address:i,tag:void 0,network:a,info:e}}async fetchDepositAddressesByNetwork(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},r=await this.spotPrivateGetAssetDepositAddressList(this.extend(s,t)),a=this.safeValue(r,"data",{}),n=this.safeValue(a,"chains",[]),o=[];for(let e=0;e<n.length;e++){const t=this.parseDepositAddress(n[e],i);o.push(t)}return this.indexBy(o,"network")}async fetchDepositAddress(e,t={}){const i=this.safeString(t,"network");t=this.omit(t,"network");const s=await this.fetchDepositAddressesByNetwork(e,t),a=this.safeValue(this.options,"networks",{}),n=this.safeString(a,i,i);let o;if(void 0===n){if(o=this.safeValue(s,e),void 0===o){const t=this.safeString(a,e,e);if(o=this.safeValue(s,t),void 0===o){const t=this.safeString(this.options,"defaultNetwork","ERC20");if(o=this.safeValue(s,t),void 0===o){const t=Object.values(s);if(o=this.safeValue(t,0),void 0===o)throw new r(this.id+" fetchDepositAddress() cannot find deposit address for "+e)}}}return o}if(o=this.safeValue(s,n),void 0===o)throw new r(this.id+" fetchDepositAddress() cannot find "+n+" deposit address for "+e);return o}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==t&&(r.start_time=t),void 0!==i&&(r.limit=i);const n=await this.spotPrivateGetAssetDepositList(this.extend(r,s)),o=this.safeValue(n,"data",{}),h=this.safeValue(o,"result_list",[]);return this.parseTransactions(h,e,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==t&&(r.start_time=t),void 0!==i&&(r.limit=i);const n=await this.spotPrivateGetAssetWithdrawList(this.extend(r,s)),o=this.safeValue(n,"data",{}),h=this.safeValue(o,"result_list",[]);return this.parseTransactions(h,e,t,i)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=void 0===i?"deposit":"withdrawal",r=this.parse8601(this.safeString(e,"create_time")),a=this.parse8601(this.safeString(e,"update_time"));let n,o=this.safeString(e,"currency");if(void 0!==o&&o.indexOf("-")>=0){const e=o.split("-");o=this.safeString(e,0);const t=this.safeString(e,1);n=this.safeNetwork(t)}const h=this.safeCurrencyCode(o,t),c=this.parseTransactionStatus(this.safeString(e,"state")),d=this.safeNumber(e,"amount"),u=this.safeString(e,"address"),l=this.safeString(e,"tx_id");let f;const p=this.safeNumber(e,"fee");return void 0!==p&&(f={cost:p,currency:h}),{info:e,id:i,txid:l,timestamp:r,datetime:this.iso8601(r),address:u,tag:void 0,type:s,amount:d,currency:h,network:n,status:c,updated:a,fee:f}}parseTransactionStatus(e){return this.safeString({WAIT:"pending",SUCCESS:"ok"},e,e)}async fetchPosition(e,t={}){await this.loadMarkets();const i={symbol:this.market(e).id},s=await this.fetchPositions(this.extend(i,t));return this.safeValue(s,0)}async fetchPositions(e,t={}){await this.loadMarkets();const i=await this.contractPrivateGetPositionOpenPositions(t);return this.safeValue(i,"data",[])}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e);return n.spot?await this.createSpotOrder(e,t,i,s,r,a):n.swap?await this.createSwapOrder(e,t,i,s,r,a):void 0}async createSpotOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e);let o;"buy"===i?o="BID":"sell"===i&&(o="ASK");let h=t.toUpperCase();if("LIMIT"===h)h="LIMIT_ORDER";else if("POST_ONLY"!==h&&"IMMEDIATE_OR_CANCEL"!==h)throw new d(this.id+" createOrder does not support "+t+" order type, specify one of LIMIT, LIMIT_ORDER, POST_ONLY or IMMEDIATE_OR_CANCEL");const c={symbol:n.id,price:this.priceToPrecision(e,r),quantity:this.amountToPrecision(e,s),trade_type:o,order_type:h},u=this.safeString2(a,"clientOrderId","client_order_id");void 0!==u&&(c.client_order_id=u),a=this.omit(a,["type","clientOrderId","client_order_id"]);const l=await this.spotPrivatePostOrderPlace(this.extend(c,a));return this.parseOrder(l,n)}async createSwapOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o=this.safeInteger(a,"openType");if(void 0===o)throw new l(this.id+" createSwapOrder() requires an integer openType parameter, 1 for isolated margin, 2 for cross margin");if("limit"!==t&&"market"!==t&&1!==t&&2!==t&&3!==t&&4!==t&&5!==t&&6!==t)throw new d(this.id+" createSwapOrder() order type must either limit, market, or 1 for limit orders, 2 for post-only orders, 3 for IOC orders, 4 for FOK orders, 5 for market orders or 6 to convert market price to current price");if("limit"===t?t=1:"market"===t&&(t=6),1!==i&&2!==i&&3!==i&&4!==i)throw new d(this.id+" createSwapOrder() order side must be 1 open long, 2 close short, 3 open short or 4 close long");const h={symbol:n.id,price:parseFloat(this.priceToPrecision(e,r)),vol:parseFloat(this.amountToPrecision(e,s)),side:i,type:t,openType:o};if(1===o&&void 0===this.safeInteger(a,"leverage"))throw new l(this.id+" createSwapOrder() requires a leverage parameter for isolated margin orders");const c=this.safeString2(a,"clientOrderId","externalOid");void 0!==c&&(h.externalOid=c),a=this.omit(a,["clientOrderId","externalOid"]);const u=await this.contractPrivatePostOrderSubmit(this.extend(h,a));return this.parseOrder(u,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={},r=this.safeString2(i,"clientOrderId","client_order_ids");void 0!==r?(i=this.omit(i,["clientOrderId","client_order_ids"]),s.client_order_ids=r):s.order_ids=e;const a=await this.spotPrivateDeleteOrderCancel(this.extend(s,i)),n=this.safeValue(a,"data");return this.parseOrder(n)}parseOrderStatus(e){return this.safeString({NEW:"open",FILLED:"closed",PARTIALLY_FILLED:"open",CANCELED:"canceled",PARTIALLY_CANCELED:"canceled"},e,e)}parseOrder(e,t){let i,s=this.safeString2(e,"data","id");if(void 0===s){const t=Object.keys(e);s=this.safeString(t,0),"success"===this.safeString(e,s)&&(i="canceled")}const r=this.safeString(e,"state"),a=this.safeInteger(e,"create_time"),n=this.safeString(e,"price"),o=this.safeString(e,"quantity"),h=this.safeString(e,"remain_quantity"),c=this.safeString(e,"deal_quantity"),d=this.safeString(e,"symbol"),u=this.safeSymbol(d,t,"_");let l;const f=this.safeString(e,"type");"BID"===f?l="buy":"ASK"===f&&(l="sell"),i=this.parseOrderStatus(r);let p=this.safeString(e,"client_order_id");""===p&&(p=void 0);let m=this.safeStringLower(e,"order_type");return void 0!==m&&(m=m.replace("_order","")),this.safeOrder2({id:s,clientOrderId:p,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,status:i,symbol:u,type:m,timeInForce:void 0,side:l,price:n,stopPrice:void 0,average:void 0,amount:o,cost:void 0,filled:c,remaining:h,fee:void 0,trades:void 0,info:e},t)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new l(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={symbol:r.id},n=await this.spotPrivateGetOrderOpenOrders(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseOrders(o,r,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_ids:e},r=await this.spotPrivateGetOrderQuery(this.extend(s,i)),a=this.safeValue(r,"data",[]),n=this.safeValue(a,0);if(void 0===n)throw new f(this.id+" fetchOrder() could not find the order id "+e);return this.parseOrder(n)}async fetchOrdersByState(e,t,i,s,r={}){if(void 0===t)throw new l(this.id+" fetchOrdersByState requires a symbol argument");await this.loadMarkets();const a=this.market(t),n={symbol:a.id,states:e};void 0!==s&&(n.limit=s),void 0!==i&&(n.start_time=i);const o=await this.spotPrivateGetOrderList(this.extend(n,r)),h=this.safeValue(o,"data",[]);return this.parseOrders(h,a,i,s)}async fetchCanceledOrders(e,t,i,s={}){return await this.fetchOrdersByState("CANCELED",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByState("FILLED",e,t,i,s)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={symbol:this.market(e).id};return await this.spotPrivateDeleteOrderCancelBySymbol(this.extend(i,t))}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new l(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==t&&(a.start_time=t),void 0!==i&&(a.limit=i);const n=await this.spotPrivateGetOrderDeals(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseTrades(o,r,t,i)}async fetchOrderTrades(e,t,i,s,r={}){let a;await this.loadMarkets(),void 0!==t&&(a=this.market(t));const n={order_id:e},o=await this.spotPrivateGetOrderDealDetail(this.extend(n,r)),h=this.safeValue(o,"data",[]);return this.parseTrades(h,a,i,s)}async modifyMarginHelper(e,t,i,s={}){const r=this.safeInteger(s,"positionId");if(void 0===r)throw new l(this.id+" modifyMarginHelper() requires a positionId parameter");await this.loadMarkets();const a={positionId:r,amount:t,type:i};return await this.contractPrivatePostPositionChangeMargin(this.extend(a,s))}async reduceMargin(e,t,i={}){return await this.modifyMarginHelper(e,t,"SUB",i)}async addMargin(e,t,i={}){return await this.modifyMarginHelper(e,t,"ADD",i)}async setLeverage(e,t,i={}){const s=this.safeInteger(i,"positionId");if(void 0===s)throw new l(this.id+" setLeverage() requires a positionId parameter");await this.loadMarkets();const r={positionId:s,leverage:e};return await this.contractPrivatePostPositionChangeLeverage(this.extend(r,i))}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r);const a=this.safeValue(this.options,"networks",{});let n=this.safeString2(r,"network","chain");n=this.safeString(a,n,n),this.checkAddress(i),await this.loadMarkets();const o=this.currency(e);void 0!==s&&(i+=":"+s);const h={currency:o.id,address:i,amount:t};void 0!==n&&(h.chain=n,r=this.omit(r,["network","chain"]));const c=await this.spotPrivatePostAssetWithdraw(this.extend(h,r)),d=this.safeValue(c,"data",{});return this.parseTransaction(d,o)}sign(e,t="public",i="GET",s={},r,a){const[n,o]=t;let h=this.urls.api[n][o]+"/"+this.implodeParams(e,s);if(s=this.omit(s,this.extractParams(e)),"public"===o)Object.keys(s).length&&(h+="?"+this.urlencode(s));else{this.checkRequiredCredentials();const e=this.milliseconds().toString();let t="";r={ApiKey:this.apiKey,"Request-Time":e,"Content-Type":"application/json"},"POST"===i?(t=this.json(s),a=t):(s=this.keysort(s),Object.keys(s).length&&(t+=this.urlencode(s),h+="?"+t)),t=this.apiKey+e+t;const n=this.hmac(this.encode(t),this.encode(this.secret),"sha256");r.Signature=n}return{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,n,o,h,c){if(void 0===o)return;if(!0===this.safeValue(o,"success",!1))return;const d=this.safeString(o,"code");if("200"!==d&&"0"!==d){const e=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,d,e),new a(e)}}async fetchFundingRateHistory(e,t,i,s={}){if(void 0===e)throw new l(this.id+" fetchFundingRateHistory() requires a symbol argument");await this.loadMarkets();const r={symbol:this.market(e).id};void 0!==i&&(r.page_size=i);const a=await this.contractPublicGetFundingRateHistory(this.extend(r,s)),n=this.safeValue(a,"data"),o=this.safeValue(n,"resultList"),h=[];for(let e=0;e<o.length;e++){const t=o[e],i=this.safeString(t,"symbol"),s=this.safeSymbol(i),r=this.safeString(t,"settleTime");h.push({info:t,symbol:s,fundingRate:this.safeNumber(t,"fundingRate"),timestamp:r,datetime:this.iso8601(r)})}const c=this.sortBy(h,"timestamp");return this.filterBySymbolSinceLimit(c,e,t,i)}}},61985:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,AuthenticationError:a,InsufficientFunds:n,BadSymbol:o,OrderNotFound:h}=i(73449),{TICK_SIZE:c}=i(62115),d=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"ndax",name:"NDAX",countries:["US"],rateLimit:1e3,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,createDepositAddress:!0,createOrder:!0,editOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTrades:!0,fetchWithdrawals:!0,signIn:!0},timeframes:{"1m":"60","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800","1M":"2419200","4M":"9676800"},urls:{logo:"https://user-images.githubusercontent.com/1294454/108623144-67a3ef00-744e-11eb-8140-75c6b851e945.jpg",test:{public:"https://ndaxmarginstaging.cdnhop.net:8443/AP",private:"https://ndaxmarginstaging.cdnhop.net:8443/AP"},api:{public:"https://api.ndax.io:8443/AP",private:"https://api.ndax.io:8443/AP"},www:"https://ndax.io",doc:["https://apidoc.ndax.io/"],fees:"https://ndax.io/fees",referral:"https://one.ndax.io/bfQiSL"},api:{public:{get:["Activate2FA","Authenticate2FA","AuthenticateUser","GetL2Snapshot","GetLevel1","GetValidate2FARequiredEndpoints","LogOut","GetTickerHistory","GetProduct","GetProducts","GetInstrument","GetInstruments","Ping","trades","GetLastTrades","SubscribeLevel1","SubscribeLevel2","SubscribeTicker","SubscribeTrades","SubscribeBlockTrades","UnsubscribeBlockTrades","UnsubscribeLevel1","UnsubscribeLevel2","UnsubscribeTicker","UnsubscribeTrades","Authenticate"]},private:{get:["GetUserAccountInfos","GetUserAccounts","GetUserAffiliateCount","GetUserAffiliateTag","GetUserConfig","GetAllUnredactedUserConfigsForUser","GetUnredactedUserConfigByKey","GetUserDevices","GetUserReportTickets","GetUserReportWriterResultRecords","GetAccountInfo","GetAccountPositions","GetAllAccountConfigs","GetTreasuryProductsForAccount","GetAccountTrades","GetAccountTransactions","GetOpenTradeReports","GetAllOpenTradeReports","GetTradesHistory","GetOpenOrders","GetOpenQuotes","GetOrderFee","GetOrderHistory","GetOrdersHistory","GetOrderStatus","GetOmsFeeTiers","GetAccountDepositTransactions","GetAccountWithdrawTransactions","GetAllDepositRequestInfoTemplates","GetDepositInfo","GetDepositRequestInfoTemplate","GetDeposits","GetDepositTicket","GetDepositTickets","GetOMSWithdrawFees","GetWithdrawFee","GetWithdraws","GetWithdrawTemplate","GetWithdrawTemplateTypes","GetWithdrawTicket","GetWithdrawTickets"],post:["AddUserAffiliateTag","CancelUserReport","RegisterNewDevice","SubscribeAccountEvents","UpdateUserAffiliateTag","GenerateTradeActivityReport","GenerateTransactionActivityReport","GenerateTreasuryActivityReport","ScheduleTradeActivityReport","ScheduleTransactionActivityReport","ScheduleTreasuryActivityReport","CancelAllOrders","CancelOrder","CancelQuote","CancelReplaceOrder","CreateQuote","ModifyOrder","SendOrder","SubmitBlockTrade","UpdateQuote","CancelWithdraw","CreateDepositTicket","CreateWithdrawTicket","SubmitDepositTicketComment","SubmitWithdrawTicketComment","GetOrderHistoryByOrderId"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.0025}},requiredCredentials:{apiKey:!0,secret:!0,uid:!0,login:!0,password:!0},precisionMode:c,exceptions:{exact:{Not_Enough_Funds:n,"Server Error":r,"Resource Not Found":h},broad:{"Invalid InstrumentId":o,"This endpoint requires 2FACode along with the payload":a}},options:{omsId:1,orderTypes:{Market:1,Limit:2,StopMarket:3,StopLimit:4,TrailingStopMarket:5,TrailingStopLimit:6,BlockTrade:7}}})}async signIn(e={}){if(this.checkRequiredCredentials(),void 0===this.login||void 0===this.password)throw new a(this.id+" signIn() requires exchange.login, exchange.password");let t={grant_type:"client_credentials"};const i=await this.publicGetAuthenticate(this.extend(t,e));let s=this.safeString(i,"SessionToken");if(void 0!==s)return this.options.sessionToken=s,i;const r=this.safeString(i,"Pending2FaToken");if(void 0!==r){if(void 0===this.twofa)throw new a(this.id+" signIn() requires exchange.twofa credentials");this.options.pending2faToken=r,t={Code:this.oath()};const i=await this.publicGetAuthenticate2FA(this.extend(t,e));return s=this.safeString(i,"SessionToken"),this.options.sessionToken=s,i}return i}async fetchCurrencies(e={}){const t={omsId:this.safeInteger(this.options,"omsId",1)},i=await this.publicGetGetProducts(this.extend(t,e)),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"ProductId"),a=this.safeString(t,"ProductFullName"),n=this.safeString(t,"ProductType"),o=this.safeCurrencyCode(this.safeString(t,"Product")),h=this.safeNumber(t,"TickSize"),c=!this.safeValue(t,"IsDisabled");s[o]={id:r,name:a,code:o,type:n,precision:h,info:t,active:c,fee:void 0,limits:this.limits}}return s}async fetchMarkets(e={}){const t={omsId:this.safeInteger(this.options,"omsId",1)},i=await this.publicGetGetInstruments(this.extend(t,e)),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"InstrumentId"),a=this.safeString(t,"Product1"),n=this.safeString(t,"Product2"),o=this.safeCurrencyCode(this.safeString(t,"Product1Symbol")),h=this.safeCurrencyCode(this.safeString(t,"Product2Symbol")),c=o+"/"+h,d={amount:this.safeNumber(t,"QuantityIncrement"),price:this.safeNumber(t,"PriceIncrement")},u=this.safeString(t,"SessionStatus"),l=this.safeValue(t,"IsDisable"),f=!("Running"!==u||l);s.push({id:r,symbol:c,base:o,quote:h,baseId:a,quoteId:n,info:t,type:"spot",spot:!0,active:f,precision:d,limits:{amount:{min:this.safeNumber(t,"MinimumQuantity"),max:void 0},price:{min:this.safeNumber(t,"MinimumPrice"),max:void 0},cost:{min:void 0,max:void 0}}})}return s}parseOrderBook(e,t,i,s="bids",r="asks",a=6,n=8){let o;const h={symbol:t,bids:[],asks:[],timestamp:void 0,datetime:void 0,nonce:void 0};for(let t=0;t<e.length;t++){const c=e[t];if(void 0===i)i=this.safeInteger(c,2);else{const e=this.safeInteger(c,2);i=Math.max(i,e)}if(void 0===o)o=this.safeInteger(c,0);else{const e=this.safeInteger(c,0);o=Math.max(o,e)}const d=this.parseBidAsk(c,a,n);h[this.safeInteger(c,9)?r:s].push(d)}return h.bids=this.sortBy(h.bids,0,!0),h.asks=this.sortBy(h.asks,0),h.timestamp=i,h.datetime=this.iso8601(i),h.nonce=o,h}async fetchOrderBook(e,t,i={}){const s=this.safeInteger(this.options,"omsId",1);await this.loadMarkets(),t=void 0===t?100:t;const r={omsId:s,InstrumentId:this.market(e).id,Depth:t},a=await this.publicGetGetL2Snapshot(this.extend(r,i));return this.parseOrderBook(a,e)}parseTicker(e,t){const i=this.safeInteger(e,"TimeStamp"),s=this.safeString(e,"InstrumentId"),r=this.safeSymbol(s,t),a=this.safeNumber(e,"LastTradedPx"),n=this.safeNumber(e,"Rolling24HrPxChangePercent"),o=this.safeNumber(e,"Rolling24HrPxChange"),h=this.safeNumber(e,"SessionOpen");let c;void 0!==a&&void 0!==o&&(c=this.sum(a,h)/2);const d=this.safeNumber(e,"Rolling24HrVolume"),u=this.safeNumber(e,"Rolling24HrNotional"),l=this.vwap(d,u);return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"SessionHigh"),low:this.safeNumber(e,"SessionLow"),bid:this.safeNumber(e,"BestBid"),bidVolume:void 0,ask:this.safeNumber(e,"BestOffer"),askVolume:void 0,vwap:l,open:h,close:a,last:a,previousClose:void 0,change:o,percentage:n,average:c,baseVolume:d,quoteVolume:u,info:e}}async fetchTicker(e,t={}){const i=this.safeInteger(this.options,"omsId",1);await this.loadMarkets();const s=this.market(e),r={omsId:i,InstrumentId:s.id},a=await this.publicGetGetLevel1(this.extend(r,t));return this.parseTicker(a,s)}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeNumber(e,3),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,4),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,s,r={}){const a=this.safeInteger(this.options,"omsId",1);await this.loadMarkets();const n=this.market(e),o={omsId:a,InstrumentId:n.id,Interval:this.timeframes[t]},h=this.parseTimeframe(t),c=this.milliseconds();void 0===i?void 0!==s&&(o.FromDate=this.ymdhms(c-h*s*1e3),o.ToDate=this.ymdhms(c)):(o.FromDate=this.ymdhms(i),o.ToDate=void 0===s?this.ymdhms(c):this.ymdhms(this.sum(i,h*s*1e3)));const d=await this.publicGetGetTickerHistory(this.extend(o,r));return this.parseOHLCVs(d,n,t,i,s)}parseTrade(e,t){let i,s,r,a,n,o,h,c,u,l,f;if(Array.isArray(e))i=this.safeString(e,3),s=this.safeString(e,2),a=this.safeInteger(e,6),n=this.safeString(e,0),o=this.safeString(e,1),h=this.safeValue(e,8)?"sell":"buy",c=this.safeString(e,4);else{a=this.safeInteger2(e,"TradeTimeMS","ReceiveTime"),n=this.safeString(e,"TradeId"),c=this.safeString2(e,"OrderId","OrigOrderId"),o=this.safeString2(e,"InstrumentId","Instrument"),i=this.safeString(e,"Price"),s=this.safeString(e,"Quantity"),r=this.safeNumber2(e,"Value","GrossValueExecuted"),u=this.safeStringLower(e,"MakerTaker"),h=this.safeStringLower(e,"Side"),f=this.safeStringLower(e,"OrderType");const t=this.safeNumber(e,"Fee");if(void 0!==t){const i=this.safeString(e,"FeeProductId");l={cost:t,currency:this.safeCurrencyCode(i)}}}const p=this.parseNumber(i),m=this.parseNumber(s);return void 0===r&&(r=this.parseNumber(d.stringMul(i,s))),{info:e,id:n,symbol:this.safeSymbol(o,t),timestamp:a,datetime:this.iso8601(a),order:c,type:f,side:h,takerOrMaker:u,price:p,amount:m,cost:r,fee:l}}async fetchTrades(e,t,i,s={}){const r=this.safeInteger(this.options,"omsId",1);await this.loadMarkets();const a=this.market(e),n={omsId:r,InstrumentId:a.id};void 0!==i&&(n.Count=i);const o=await this.publicGetGetLastTrades(this.extend(n,s));return this.parseTrades(o,a,t,i)}async fetchAccounts(e={}){if(!this.login)throw new a(this.id+" fetchAccounts() requires exchange.login email credential");const t=this.safeInteger(this.options,"omsId",1);this.checkRequiredCredentials();const i={omsId:t,UserId:this.uid,UserName:this.login},s=await this.privateGetGetUserAccounts(this.extend(i,e)),r=[];for(let e=0;e<s.length;e++){const t=this.safeString(s,e);r.push({id:t,type:void 0,currency:void 0,info:t})}return r}async fetchBalance(e={}){const t=this.safeInteger(this.options,"omsId",1);await this.loadMarkets(),await this.loadAccounts();const i=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),s=this.safeInteger2(e,"accountId","AccountId",i);e=this.omit(e,["accountId","AccountId"]);const r={omsId:t,AccountId:s},a=await this.privateGetGetAccountPositions(this.extend(r,e)),n={info:a,timestamp:void 0,datetime:void 0};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t,"ProductId");if(i in this.currencies_by_id){const e=this.safeCurrencyCode(i),s=this.account();s.total=this.safeString(t,"Amount"),s.used=this.safeString(t,"Hold"),n[e]=s}}return this.parseBalance(n)}parseLedgerEntryType(e){return this.safeString({Trade:"trade",Deposit:"transaction",Withdraw:"transaction",Transfer:"transfer",OrderHold:"trade",WithdrawHold:"transaction",DepositHold:"transaction",MarginHold:"trade",ManualHold:"trade",ManualEntry:"trade",MarginAcquisition:"trade",MarginRelinquish:"trade",MarginQuoteHold:"trade"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"TransactionId"),s=this.safeString(e,"AccountId"),r=this.safeString(e,"ReferenceId"),a=this.safeString(e,"Counterparty"),n=this.parseLedgerEntryType(this.safeString(e,"ReferenceType")),o=this.safeString(e,"ProductId"),h=this.safeCurrencyCode(o,t),c=this.safeNumber(e,"CR"),d=this.safeNumber(e,"DR");let u,l;c>0?(u=c,l="in"):d>0&&(u=d,l="out");const f=this.safeInteger(e,"TimeStamp");let p;const m=this.safeNumber(e,"Balance");return"out"===l?p=this.sum(m,u):"in"===l&&(p=Math.max(0,m-u)),{info:e,id:i,direction:l,account:s,referenceId:r,referenceAccount:a,type:n,currency:h,amount:u,before:p,after:m,status:"ok",timestamp:f,datetime:this.iso8601(f),fee:void 0}}async fetchLedger(e,t,i,s={}){const r=this.safeInteger(this.options,"omsId",1);await this.loadMarkets(),await this.loadAccounts();const a=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),n=this.safeInteger2(s,"accountId","AccountId",a);s=this.omit(s,["accountId","AccountId"]);const o={omsId:r,AccountId:n};void 0!==i&&(o.Depth=i);const h=await this.privateGetGetAccountTransactions(this.extend(o,s));let c;return void 0!==e&&(c=this.currency(e)),this.parseLedger(h,c,t,i)}parseOrderStatus(e){return this.safeString({Accepted:"open",Rejected:"rejected",Working:"open",Canceled:"canceled",Expired:"expired",FullyExecuted:"closed"},e,e)}parseOrder(e,t){const i=this.safeString2(e,"ReplacementOrderId","OrderId"),s=this.safeInteger(e,"ReceiveTime"),r=this.safeInteger(e,"LastUpdatedTime"),a=this.safeString(e,"Instrument"),n=this.safeSymbol(a,t),o=this.safeStringLower(e,"Side"),h=this.safeStringLower(e,"OrderType"),c=this.safeString2(e,"ReplacementClOrdId","ClientOrderId");let d=this.safeNumber(e,"Price",0);d=d>0?d:void 0;const u=this.safeNumber(e,"OrigQuantity"),l=this.safeNumber(e,"QuantityExecuted"),f=this.safeNumber(e,"GrossValueExecuted");let p=this.safeNumber(e,"AvgPrice",0);p=p>0?p:void 0;let m=this.safeNumber(e,"StopPrice",0);m=m>0?m:void 0;const g=this.parseOrderStatus(this.safeString(e,"OrderState"));return this.safeOrder({id:i,clientOrderId:c,info:e,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:r,status:g,symbol:n,type:h,timeInForce:void 0,postOnly:void 0,side:o,price:d,stopPrice:m,cost:f,amount:u,filled:l,average:p,remaining:void 0,fee:void 0,trades:void 0})}async createOrder(e,t,i,s,r,a={}){const n=this.safeInteger(this.options,"omsId",1);await this.loadMarkets(),await this.loadAccounts();const o=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),h=this.safeInteger2(a,"accountId","AccountId",o),c=this.safeInteger2(a,"ClientOrderId","clientOrderId");a=this.omit(a,["accountId","AccountId","clientOrderId","ClientOrderId"]);const d=this.market(e),u="buy"===i?0:1,l={InstrumentId:parseInt(d.id),omsId:n,AccountId:h,TimeInForce:1,Side:u,Quantity:parseFloat(this.amountToPrecision(e,s)),OrderType:this.safeInteger(this.options.orderTypes,this.capitalize(t))};void 0!==r&&(l.LimitPrice=parseFloat(this.priceToPrecision(e,r))),void 0!==c&&(l.ClientOrderId=c);const f=await this.privatePostSendOrder(this.extend(l,a));return this.parseOrder(f,d)}async editOrder(e,t,i,s,r,a,n={}){const o=this.safeInteger(this.options,"omsId",1);await this.loadMarkets(),await this.loadAccounts();const h=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),c=this.safeInteger2(n,"accountId","AccountId",h),d=this.safeInteger2(n,"ClientOrderId","clientOrderId");n=this.omit(n,["accountId","AccountId","clientOrderId","ClientOrderId"]);const u=this.market(t),l="buy"===s?0:1,f={OrderIdToReplace:parseInt(e),InstrumentId:parseInt(u.id),omsId:o,AccountId:c,TimeInForce:1,Side:l,Quantity:parseFloat(this.amountToPrecision(t,r)),OrderType:this.safeInteger(this.options.orderTypes,this.capitalize(i))};void 0!==a&&(f.LimitPrice=parseFloat(this.priceToPrecision(t,a))),void 0!==d&&(f.ClientOrderId=d);const p=await this.privatePostCancelReplaceOrder(this.extend(f,n));return this.parseOrder(p,u)}async fetchMyTrades(e,t,i,s={}){const r=this.safeInteger(this.options,"omsId",1);await this.loadMarkets(),await this.loadAccounts();const a=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),n=this.safeInteger2(s,"accountId","AccountId",a);s=this.omit(s,["accountId","AccountId"]);const o={omsId:r,AccountId:n};let h;void 0!==e&&(h=this.market(e),o.InstrumentId=h.id),void 0!==t&&(o.StartTimeStamp=parseInt(t/1e3)),void 0!==i&&(o.Depth=i);const c=await this.privateGetGetTradesHistory(this.extend(o,s));return this.parseTrades(c,h,t,i)}async cancelAllOrders(e,t={}){const i=this.safeInteger(this.options,"omsId",1);await this.loadMarkets(),await this.loadAccounts();const s=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),r=this.safeInteger2(t,"accountId","AccountId",s);t=this.omit(t,["accountId","AccountId"]);const a={omsId:i,AccountId:r};if(void 0!==e){const t=this.market(e);a.IntrumentId=t.id}return await this.privatePostCancelAllOrders(this.extend(a,t))}async cancelOrder(e,t,i={}){const s=this.safeInteger(this.options,"omsId",1);let r;await this.loadMarkets(),await this.loadAccounts(),void 0!==t&&(r=this.market(t));const a={omsId:s},n=this.safeInteger2(i,"clientOrderId","ClOrderId");void 0!==n?a.ClOrderId=n:a.OrderId=parseInt(e),i=this.omit(i,["clientOrderId","ClOrderId"]);const o=await this.privatePostCancelOrder(this.extend(a,i)),h=this.parseOrder(o,r);return this.extend(h,{id:e,clientOrderId:n})}async fetchOpenOrders(e,t,i,s={}){const r=this.safeInteger(this.options,"omsId",1);await this.loadMarkets(),await this.loadAccounts();const a=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),n=this.safeInteger2(s,"accountId","AccountId",a);let o;s=this.omit(s,["accountId","AccountId"]),void 0!==e&&(o=this.market(e));const h={omsId:r,AccountId:n},c=await this.privateGetGetOpenOrders(this.extend(h,s));return this.parseOrders(c,o,t,i)}async fetchOrders(e,t,i,s={}){const r=this.safeInteger(this.options,"omsId",1);await this.loadMarkets(),await this.loadAccounts();const a=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),n=this.safeInteger2(s,"accountId","AccountId",a);s=this.omit(s,["accountId","AccountId"]);const o={omsId:r,AccountId:n};let h;void 0!==e&&(h=this.market(e),o.InstrumentId=h.id),void 0!==t&&(o.StartTimeStamp=parseInt(t/1e3)),void 0!==i&&(o.Depth=i);const c=await this.privateGetGetOrdersHistory(this.extend(o,s));return this.parseOrders(c,h,t,i)}async fetchOrder(e,t,i={}){const s=this.safeInteger(this.options,"omsId",1);await this.loadMarkets(),await this.loadAccounts();const r=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),a=this.safeInteger2(i,"accountId","AccountId",r);let n;i=this.omit(i,["accountId","AccountId"]),void 0!==t&&(n=this.market(t));const o={omsId:s,AccountId:a,OrderId:parseInt(e)},h=await this.privateGetGetOrderStatus(this.extend(o,i));return this.parseOrder(h,n)}async fetchOrderTrades(e,t,i,s,r={}){const a=this.safeInteger(this.options,"omsId",1);let n;await this.loadMarkets(),await this.loadAccounts(),void 0!==t&&(n=this.market(t));const o={OMSId:parseInt(a),OrderId:parseInt(e)},h=await this.privatePostGetOrderHistoryByOrderId(this.extend(o,r)),c=this.groupBy(h,"ChangeReason"),d=this.safeValue(c,"Trade",[]);return this.parseTrades(d,n,i,s)}async fetchDepositAddress(e,t={}){const i=this.safeInteger(this.options,"omsId",1);await this.loadMarkets(),await this.loadAccounts();const s=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),r=this.safeInteger2(t,"accountId","AccountId",s);t=this.omit(t,["accountId","AccountId"]);const a=this.currency(e),n={omsId:i,AccountId:r,ProductId:a.id,GenerateNewKey:!1},o=await this.privateGetGetDepositInfo(this.extend(n,t));return this.parseDepositAddress(o,a)}parseDepositAddress(e,t){const i=this.safeString(e,"DepositInfo"),s=JSON.parse(i),r=s.length,a=this.safeString(s,r-1).split("?memo="),n=this.safeString(a,0),o=this.safeString(a,1);let h;return void 0!==t&&(h=t.code),this.checkAddress(n),{currency:h,address:n,tag:o,network:void 0,info:e}}async createDepositAddress(e,t={}){return await this.fetchDepositAddress(e,this.extend({GenerateNewKey:!0},t))}async fetchDeposits(e,t,i,s={}){const r=this.safeInteger(this.options,"omsId",1);await this.loadMarkets(),await this.loadAccounts();const a=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),n=this.safeInteger2(s,"accountId","AccountId",a);let o;s=this.omit(s,["accountId","AccountId"]),void 0!==e&&(o=this.currency(e));const h={omsId:r,AccountId:n},c=await this.privateGetGetDeposits(this.extend(h,s));return this.parseTransactions(c,o,t,i)}async fetchWithdrawals(e,t,i,s={}){const r=this.safeInteger(this.options,"omsId",1);await this.loadMarkets(),await this.loadAccounts();const a=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),n=this.safeInteger2(s,"accountId","AccountId",a);let o;s=this.omit(s,["accountId","AccountId"]),void 0!==e&&(o=this.currency(e));const h={omsId:r,AccountId:n},c=await this.privateGetGetWithdraws(this.extend(h,s));return this.parseTransactions(c,o,t,i)}parseTransactionStatusByType(e,t){const i=this.safeValue({deposit:{New:"pending",AdminProcessing:"pending",Accepted:"pending",Rejected:"rejected",SystemProcessing:"pending",FullyProcessed:"ok",Failed:"failed",Pending:"pending",Confirmed:"pending",AmlProcessing:"pending",AmlAccepted:"pending",AmlRejected:"rejected",AmlFailed:"failed",LimitsAccepted:"pending",LimitsRejected:"rejected"},withdrawal:{New:"pending",AdminProcessing:"pending",Accepted:"pending",Rejected:"rejected",SystemProcessing:"pending",FullyProcessed:"ok",Failed:"failed",Pending:"pending",Pending2Fa:"pending",AutoAccepted:"pending",Delayed:"pending",UserCanceled:"canceled",AdminCanceled:"canceled",AmlProcessing:"pending",AmlAccepted:"pending",AmlRejected:"rejected",AmlFailed:"failed",LimitsAccepted:"pending",LimitsRejected:"rejected",Submitted:"pending",Confirmed:"pending",ManuallyConfirmed:"pending",Confirmed2Fa:"pending"}},t,{});return this.safeString(i,e,e)}parseTransaction(e,t){const i=this.safeString(e,"DepositId");let s;const r=this.safeString(e,"ProductId"),a=this.safeCurrencyCode(r,t);let n,o;"DepositId"in e?o="deposit":"WithdrawId"in e&&(o="withdrawal");const h=this.safeString(e,"TemplateForm");let c,d=this.safeInteger(e,"LastUpdateTimeStamp");if(void 0!==h){const e=JSON.parse(h);c=this.safeString(e,"ExternalAddress"),s=this.safeString(e,"TxId"),n=this.safeInteger(e,"TimeSubmitted"),d=this.safeInteger(e,"LastUpdated",d)}const u=c,l=this.parseTransactionStatusByType(this.safeString(e,"TicketStatus"),o),f=this.safeNumber(e,"Amount"),p=this.safeNumber(e,"FeeAmount");let m;return void 0!==p&&(m={currency:a,cost:p}),{info:e,id:i,txid:s,timestamp:n,datetime:this.iso8601(n),address:c,addressTo:u,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:o,amount:f,currency:a,status:l,updated:d,fee:m}}async withdraw(e,t,i,s,n={}){if([s,n]=this.handleWithdrawTagAndParams(s,n),void 0===this.safeString(this.options,"sessionToken"))throw new a(this.id+" call signIn() method to obtain a session token");if(void 0===this.twofa)throw new a(this.id+" withdraw() requires exchange.twofa credentials");this.checkAddress(i);const o=this.safeInteger(this.options,"omsId",1);await this.loadMarkets(),await this.loadAccounts();const h=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),c=this.safeInteger2(n,"accountId","AccountId",h);n=this.omit(n,["accountId","AccountId"]);const d=this.currency(e),u={omsId:o,AccountId:c,ProductId:d.id},l=await this.privateGetGetWithdrawTemplateTypes(u),f=this.safeValue(l,"TemplateTypes",[]),p=this.safeValue(f,0);if(void 0===p)throw new r(this.id+" withdraw() could not find a withdraw template type for "+d.code);const m=this.safeString(p,"TemplateName"),g={omsId:o,AccountId:c,ProductId:d.id,TemplateType:m,AccountProviderId:p.AccountProviderId},y=await this.privateGetGetWithdrawTemplate(g),b=this.safeString(y,"Template");if(void 0===b)throw new r(this.id+" withdraw() could not find a withdraw template for "+d.code);const v=JSON.parse(b);v.ExternalAddress=i,void 0!==s&&"Memo"in v&&(v.Memo=s);const w={omsId:o,AccountId:c,ProductId:d.id,TemplateForm:this.json(v),TemplateType:m},k={TfaType:"Google",TFaCode:this.oath(),Payload:this.json(w)},_=await this.privatePostCreateWithdrawTicket(this.deepExtend(k,n));return{info:_,id:this.safeString(_,"Id")}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t]+"/"+this.implodeParams(e,s),o=this.omit(s,this.extractParams(e));if("public"===t){if("Authenticate"===e){const e=this.login+":"+this.password,t=this.stringToBase64(e);r={Authorization:"Basic "+this.decode(t)}}else if("Authenticate2FA"===e){const e=this.safeString(this.options,"pending2faToken");void 0!==e&&(r={Pending2FaToken:e},o=this.omit(o,"pending2faToken"))}Object.keys(o).length&&(n+="?"+this.urlencode(o))}else if("private"===t){this.checkRequiredCredentials();const e=this.safeString(this.options,"sessionToken");if(void 0===e){const e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));r={Nonce:e,APIKey:this.apiKey,Signature:i,UserId:this.uid}}else r={APToken:e};"POST"===i?(r["Content-Type"]="application/json",a=this.json(o)):Object.keys(o).length&&(n+="?"+this.urlencode(o))}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,n,o,h,c,d){if(404===e)throw new a(this.id+" "+o);if(void 0===h)return;const u=this.safeString(h,"errormsg");if(void 0!==u&&""!==u){const e=this.id+" "+o;throw this.throwExactlyMatchedException(this.exceptions.exact,u,e),this.throwBroadlyMatchedException(this.exceptions.broad,o,e),new r(e)}}}},11541:(e,t,i)=>{"use strict";const s=i(48819),{AuthenticationError:r,ExchangeError:a,PermissionDenied:n,BadRequest:o,CancelPending:h,OrderNotFound:c,InsufficientFunds:d,RateLimitExceeded:u,InvalidOrder:l,AccountSuspended:f,BadSymbol:p,OnMaintenance:m,ArgumentsRequired:g}=i(73449),{TRUNCATE:y}=i(62115),b=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"novadax",name:"NovaDAX",countries:["BR"],rateLimit:50,version:"v1",has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"ONE_MIN","5m":"FIVE_MIN","15m":"FIFTEEN_MIN","30m":"HALF_HOU","1h":"ONE_HOU","1d":"ONE_DAY","1w":"ONE_WEE","1M":"ONE_MON"},urls:{logo:"https://user-images.githubusercontent.com/1294454/92337550-2b085500-f0b3-11ea-98e7-5794fb07dd3b.jpg",api:{public:"https://api.novadax.com",private:"https://api.novadax.com"},www:"https://www.novadax.com.br",doc:["https://doc.novadax.com/pt-BR/"],fees:"https://www.novadax.com.br/fees-and-limits",referral:"https://www.novadax.com.br/?s=ccxt"},api:{public:{get:["common/symbol","common/symbols","common/timestamp","market/tickers","market/ticker","market/depth","market/trades","market/kline/history"]},private:{get:["orders/get","orders/list","orders/fill","orders/fills","account/getBalance","account/subs","account/subs/balance","account/subs/transfer/record","wallet/query/deposit-withdraw"],post:["orders/create","orders/cancel","account/withdraw/coin","account/subs/transfer"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:this.parseNumber("0.005"),maker:this.parseNumber("0.003")}},requiredCredentials:{apiKey:!0,secret:!0},exceptions:{exact:{A99999:a,A10001:o,A10002:a,A10003:r,A10004:u,A10005:n,A10006:f,A10007:o,A10011:p,A10012:p,A10013:m,A30001:c,A30002:l,A30003:l,A30004:l,A30005:l,A30006:l,A30007:d,A30008:l,A30009:l,A30010:h,A30011:l,A30012:l},broad:{}},options:{fetchOHLCV:{volume:"amount"}}})}async fetchTime(e={}){const t=await this.publicGetCommonTimestamp(e);return this.safeInteger(t,"data")}async fetchMarkets(e={}){const t=await this.publicGetCommonSymbols(e),i=[],s=this.safeValue(t,"data",[]);for(let e=0;e<s.length;e++){const t=s[e],r=this.safeString(t,"baseCurrency"),a=this.safeString(t,"quoteCurrency"),n=this.safeString(t,"symbol"),o=this.safeCurrencyCode(r),h=this.safeCurrencyCode(a),c=o+"/"+h,d={amount:this.safeInteger(t,"amountPrecision"),price:this.safeInteger(t,"pricePrecision"),cost:this.safeInteger(t,"valuePrecision")},u={amount:{min:this.safeNumber(t,"minOrderAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(t,"minOrderValue"),max:void 0}},l="ONLINE"===this.safeString(t,"status");i.push({id:n,symbol:c,base:o,quote:h,baseId:r,quoteId:a,type:"spot",spot:!0,active:l,precision:d,limits:u,info:t})}return i}parseTicker(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t,"_"),a=this.safeNumber(e,"open24h"),n=this.safeNumber(e,"lastPrice"),o=this.safeNumber(e,"baseVolume24h"),h=this.safeNumber(e,"quoteVolume24h"),c=this.vwap(o,h);return this.safeTicker({symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high24h"),low:this.safeNumber(e,"low24h"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:c,open:a,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:h,info:e},t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetMarketTicker(this.extend(s,t)),a=this.safeValue(r,"data",{});return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketTickers(t),s=this.safeValue(i,"data",[]),r={};for(let e=0;e<s.length;e++){const t=this.parseTicker(s[e]);r[t.symbol]=t}return this.filterByArray(r,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.limit=t);const r=await this.publicGetMarketDepth(this.extend(s,i)),a=this.safeValue(r,"data",{}),n=this.safeInteger(a,"timestamp");return this.parseOrderBook(a,e,n,"bids","asks")}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"orderId"),r=this.safeInteger(e,"timestamp"),a=this.safeStringLower(e,"side"),n=this.safeString(e,"price"),o=this.safeString(e,"amount"),h=this.parseNumber(n),c=this.parseNumber(o);let d=this.safeNumber(e,"volume");void 0===d&&(d=this.parseNumber(b.stringMul(n,o)));const u=this.safeString(e,"symbol"),l=this.safeSymbol(u,t,"_"),f=this.safeStringLower(e,"role"),p=this.safeString(e,"fee");let m;if(void 0!==p){const e=p.split(" "),t=this.safeString(e,1),i=this.safeCurrencyCode(t);m={cost:this.safeNumber(e,0),currency:i}}return{id:i,order:s,timestamp:r,datetime:this.iso8601(r),symbol:l,type:void 0,side:a,price:h,amount:c,cost:d,takerOrMaker:f,fee:m,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==i&&(a.limit=i);const n=await this.publicGetMarketTrades(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseTrades(o,r,t,i)}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id,unit:this.timeframes[t]},o=this.parseTimeframe(t),h=this.seconds();if(void 0===s&&(s=3e3),void 0===i)n.from=h-s*o,n.to=h;else{const e=parseInt(i/1e3);n.from=e,n.to=this.sum(e,s*o)}const c=await this.publicGetMarketKlineHistory(this.extend(n,r)),d=this.safeValue(c,"data",[]);return this.parseOHLCVs(d,a,t,i,s)}parseOHLCV(e,t){const i=this.safeValue(this.options,"fetchOHLCV",{}),s=this.safeString(i,"volume","amount");return[this.safeTimestamp(e,"score"),this.safeNumber(e,"openPrice"),this.safeNumber(e,"highPrice"),this.safeNumber(e,"lowPrice"),this.safeNumber(e,"closePrice"),this.safeNumber(e,s)]}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccountGetBalance(e),i=this.safeValue(t,"data",[]),s={info:t,timestamp:void 0,datetime:void 0};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.total=this.safeString(t,"balance"),n.free=this.safeString(t,"available"),n.used=this.safeString(t,"hold"),s[a]=n}return this.parseBalance(s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e);let o=t.toUpperCase();const h=i.toUpperCase(),c={symbol:n.id,side:h},d=this.safeNumber(a,"stopPrice");if(void 0===d){if("STOP_LIMIT"===o||"STOP_MARKET"===o)throw new g(this.id+" createOrder() requires a stopPrice parameter for "+o+" orders")}else{"LIMIT"===o?o="STOP_LIMIT":"MARKET"===o&&(o="STOP_MARKET");const t="BUY"===h?"LTE":"GTE";c.operator=this.safeString(a,"operator",t),c.stopPrice=this.priceToPrecision(e,d),a=this.omit(a,"stopPrice")}if("LIMIT"===o||"STOP_LIMIT"===o)c.price=this.priceToPrecision(e,r),c.amount=this.amountToPrecision(e,s);else if("MARKET"===o||"STOP_MARKET"===o)if("SELL"===h)c.amount=this.amountToPrecision(e,s);else if("BUY"===h){let e=this.safeNumber(a,"value");if(this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){if(void 0!==r)void 0===e&&(e=s*r);else if(void 0===e)throw new l(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'value' extra parameter (the exchange-specific behaviour)")}else e=void 0===e?s:e;const t=n.precision.price;c.value=this.decimalToPrecision(e,y,t,this.precisionMode)}c.type=o;const u=await this.privatePostOrdersCreate(this.extend(c,a)),f=this.safeValue(u,"data",{});return this.parseOrder(f,n)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privatePostOrdersCancel(this.extend(s,i)),a=this.safeValue(r,"data",{});return this.parseOrder(a)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privateGetOrdersGet(this.extend(s,i)),a=this.safeValue(r,"data",{});return this.parseOrder(a)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==i&&(r.limit=i),void 0!==t&&(r.fromTimestamp=t);const n=await this.privateGetOrdersList(this.extend(r,s)),o=this.safeValue(n,"data",[]);return this.parseOrders(o,a,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"SUBMITTED,PROCESSING,PARTIAL_FILLED,CANCELING"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"FILLED,CANCELED,REJECTED"},s))}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();const a={id:e},n=await this.privateGetOrdersFill(this.extend(a,r));let o;void 0!==t&&(o=this.market(t));const h=this.safeValue(n,"data",[]);return this.parseTrades(h,o,i,s)}parseOrderStatus(e){return this.safeString({SUBMITTED:"open",PROCESSING:"open",PARTIAL_FILLED:"open",CANCELING:"open",FILLED:"closed",CANCELED:"canceled",REJECTED:"rejected"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"amount"),r=this.safeString(e,"price"),a=this.safeString2(e,"filledValue","value"),n=this.safeStringLower(e,"type"),o=this.safeStringLower(e,"side"),h=this.parseOrderStatus(this.safeString(e,"status")),c=this.safeInteger(e,"timestamp"),d=this.safeString(e,"averagePrice"),u=this.safeString(e,"filledAmount");let l;const f=this.safeNumber(e,"filledFee");void 0!==f&&(l={cost:f,currency:void 0});const p=this.safeString(e,"symbol"),m=this.safeSymbol(p,t,"_"),g=this.safeNumber(e,"stopPrice");return this.safeOrder2({id:i,clientOrderId:void 0,info:e,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:m,type:n,timeInForce:void 0,postOnly:void 0,side:o,price:r,stopPrice:g,amount:s,cost:a,average:d,filled:u,remaining:void 0,status:h,fee:l,trades:void 0},t)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),await this.loadMarkets();const a=this.currency(e),n={code:a.id,amount:this.currencyToPrecision(e,t),wallet:i};void 0!==s&&(n.tag=s);const o=await this.privatePostAccountWithdrawCoin(this.extend(n,r));return this.parseTransaction(o,a)}async fetchAccounts(e={}){const t=await this.privateGetAccountSubs(e),i=this.safeValue(t,"data",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"subId"),a=this.safeString(t,"subAccount");s.push({id:r,type:a,currency:void 0,info:t})}return s}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({type:"coin_in"},s))}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({type:"coin_out"},s))}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.size=i);const n=await this.privateGetWalletQueryDepositWithdraw(this.extend(r,s)),o=this.safeValue(n,"data",[]);return this.parseTransactions(o,a,t,i)}parseTransactionStatus(e){const t=e.split(" ");return e=this.safeString(t,1,e),this.safeString({Pending:"pending",confirming:"pending",SUCCESS:"ok",FAIL:"failed"},e,e)}parseTransaction(e,t){const i=this.safeString2(e,"id","data");let s=this.safeString(e,"type");"COIN_IN"===s?s="deposit":"COIN_OUT"===s&&(s="withdraw");const r=this.safeNumber(e,"amount"),a=this.safeString(e,"address"),n=this.safeString(e,"addressTag"),o=this.safeString(e,"txHash"),h=this.safeInteger(e,"createdAt"),c=this.safeInteger(e,"updatedAt"),d=this.safeString(e,"currency");return{info:e,id:i,currency:this.safeCurrencyCode(d,t),amount:r,address:a,addressTo:a,addressFrom:void 0,tag:n,tagTo:n,tagFrom:void 0,status:this.parseTransactionStatus(this.safeString(e,"state")),type:s,updated:c,txid:o,timestamp:h,datetime:this.iso8601(h),fee:void 0}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==i&&(r.limit=i),void 0!==t&&(r.fromTimestamp=t);const n=await this.privateGetOrdersFills(this.extend(r,s)),o=this.safeValue(n,"data",[]);return this.parseTrades(o,a,t,i)}sign(e,t="public",i="GET",s={},r,a){const n="/"+this.version+"/"+this.implodeParams(e,s);let o=this.urls.api[t]+n;const h=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(h).length&&(o+="?"+this.urlencode(h));else if("private"===t){this.checkRequiredCredentials();const e=this.milliseconds().toString();let t;r={"X-Nova-Access-Key":this.apiKey,"X-Nova-Timestamp":e},"POST"===i?(a=this.json(h),t=this.hash(a,"md5"),r["Content-Type"]="application/json"):(Object.keys(h).length&&(o+="?"+this.urlencode(h)),t=this.urlencode(this.keysort(h)));const s=i+"\n"+n+"\n"+t+"\n"+e;r["X-Nova-Signature"]=this.hmac(this.encode(s),this.encode(this.secret))}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,n,o,h,c){if(void 0===o)return;const d=this.safeString(o,"code");if("A10000"!==d){const e=this.safeString(o,"message"),t=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,d,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new a(t)}}}},7426:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,AuthenticationError:a,ArgumentsRequired:n,BadRequest:o,InvalidOrder:h,InsufficientFunds:c,OrderNotFound:d,PermissionDenied:u}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"oceanex",name:"OceanEx",countries:["BS"],version:"v1",rateLimit:3e3,urls:{logo:"https://user-images.githubusercontent.com/1294454/58385970-794e2d80-8001-11e9-889c-0567cd79b78e.jpg",api:"https://api.oceanex.pro",www:"https://www.oceanex.pro.com",doc:"https://api.oceanex.pro/doc/v1",referral:"https://oceanex.pro/signup?referral=VE24QX"},has:{cancelAllOrders:!0,cancelOrder:!0,cancelOrders:!0,createMarketOrder:!0,createOrder:!0,fetchAllTradingFees:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchFundingFees:void 0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFees:void 0,fetchTradingLimits:void 0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","6h":"360","12h":"720","1d":"1440","3d":"4320","1w":"10080"},api:{public:{get:["markets","tickers/{pair}","tickers_multi","order_book","order_book/multi","fees/trading","trades","timestamp"],post:["k"]},private:{get:["key","members/me","orders","orders/filter"],post:["orders","orders/multi","order/delete","order/delete/multi","orders/clear"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},commonCurrencies:{PLA:"Plair"},exceptions:{codes:{"-1":o,"-2":o,1001:o,1004:n,1006:a,1008:a,1010:a,1011:u,2001:a,2002:h,2004:d,9003:u},exact:{"market does not have a valid value":o,"side does not have a valid value":o,"Account::AccountError: Cannot lock funds":c,"The account does not exist":a}}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(this.extend({show_details:!0},e)),i=[],s=this.safeValue(t,"data");for(let e=0;e<s.length;e++){const t=s[e],r=this.safeValue(t,"id"),a=this.safeValue(t,"name");let[n,o]=a.split("/");const h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o);n=n.toLowerCase(),o=o.toLowerCase();const d=h+"/"+c;i.push({id:r,symbol:d,base:h,quote:c,baseId:n,quoteId:o,type:"spot",spot:!0,active:!0,info:t,precision:{amount:this.safeInteger(t,"amount_precision"),price:this.safeInteger(t,"price_precision"),base:this.safeInteger(t,"ask_precision"),quote:this.safeInteger(t,"bid_precision")},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(t,"minimum_trading_amount"),max:void 0}}})}return i}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},r=await this.publicGetTickersPair(this.extend(s,t)),a=this.safeValue(r,"data",{});return this.parseTicker(a,i)}async fetchTickers(e,t={}){await this.loadMarkets(),void 0===e&&(e=this.symbols);const i={markets:this.marketIds(e)},s=await this.publicGetTickersMulti(this.extend(i,t)),r=this.safeValue(s,"data"),a={};for(let e=0;e<r.length;e++){const t=r[e],i=this.safeString(t,"market"),s=this.safeMarket(i);a[s.symbol]=this.parseTicker(t,s)}return this.filterByArray(a,"symbol",e)}parseTicker(e,t){const i=this.safeValue(e,"ticker",{}),s=this.safeTimestamp(e,"at");return{symbol:t.symbol,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(i,"high"),low:this.safeNumber(i,"low"),bid:this.safeNumber(i,"buy"),bidVolume:void 0,ask:this.safeNumber(i,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeNumber(i,"last"),last:this.safeNumber(i,"last"),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(i,"volume"),quoteVolume:void 0,info:i}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.publicGetOrderBook(this.extend(s,i)),a=this.safeValue(r,"data",{}),n=this.safeTimestamp(a,"timestamp");return this.parseOrderBook(a,e,n)}async fetchOrderBooks(e,t,i={}){await this.loadMarkets(),void 0===e&&(e=this.symbols);const s={markets:this.marketIds(e)};void 0!==t&&(s.limit=t);const r=await this.publicGetOrderBookMulti(this.extend(s,i)),a=this.safeValue(r,"data",[]),n={};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t,"market"),s=this.safeSymbol(i),r=this.safeTimestamp(t,"timestamp");n[s]=this.parseOrderBook(t,s,r)}return n}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==i&&(a.limit=i);const n=await this.publicGetTrades(this.extend(a,s)),o=this.safeValue(n,"data");return this.parseTrades(o,r,t,i)}parseTrade(e,t){let i=this.safeValue(e,"side");"bid"===i?i="buy":"ask"===i&&(i="sell");const s=this.safeValue(e,"market"),r=this.safeSymbol(s,t);let a=this.safeTimestamp(e,"created_on");return void 0===a&&(a=this.parse8601(this.safeString(e,"created_at"))),{info:e,timestamp:a,datetime:this.iso8601(a),symbol:r,id:this.safeString(e,"id"),order:void 0,type:"limit",takerOrMaker:void 0,side:i,price:this.safeNumber(e,"price"),amount:this.safeNumber(e,"volume"),cost:void 0,fee:void 0}}async fetchTime(e={}){const t=await this.publicGetTimestamp(e);return this.safeTimestamp(t,"data")}async fetchAllTradingFees(e={}){const t=await this.publicGetFeesTrading(e),i=this.safeValue(t,"data"),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeValue(t,"ask_fee",{}),a=this.safeValue(t,"bid_fee",{}),n=this.safeString(t,"market"),o=this.safeSymbol(n);s[o]={info:t,symbol:o,maker:this.safeNumber(r,"value"),taker:this.safeNumber(a,"value")}}return s}async fetchKey(e={}){const t=await this.privateGetKey(e);return this.safeValue(t,"data")}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetMembersMe(e),i=this.safeValue(t,"data"),s=this.safeValue(i,"accounts"),r={info:t};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeValue(t,"currency"),a=this.safeCurrencyCode(i),n=this.account();n.free=this.safeString(t,"balance"),n.used=this.safeString(t,"locked"),r[a]=n}return this.parseBalance(r)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o={market:n.id,side:i,ord_type:t,volume:this.amountToPrecision(e,s)};"limit"===t&&(o.price=this.priceToPrecision(e,r));const h=await this.privatePostOrders(this.extend(o,a)),c=this.safeValue(h,"data");return this.parseOrder(c,n)}async fetchOrder(e,t,i={}){let s,r=e;Array.isArray(e)||(r=[e]),await this.loadMarkets(),void 0!==t&&(s=this.market(t));const a={ids:r},n=await this.privateGetOrders(this.extend(a,i)),o=this.safeValue(n,"data"),h=o.length;if(void 0===o)throw new d(this.id+" could not found matching order");if(Array.isArray(e))return this.parseOrders(o,s);if(0===h)throw new d(this.id+" could not found matching order");return this.parseOrder(o[0],s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({states:["wait"]},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({states:["done","cancel"]},s))}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchOrders() requires a `symbol` argument");await this.loadMarkets();const r=this.market(e),a=this.safeValue(s,"states",["wait","done","cancel"]),o=this.omit(s,"states"),h={market:r.id,states:a,need_price:"True"};void 0!==i&&(h.limit=i);const c=await this.privateGetOrdersFilter(this.extend(h,o)),d=this.safeValue(c,"data",[]);let u=[];for(let e=0;e<d.length;e++){const s=this.safeValue(d[e],"orders",[]),a=this.parseOrderStatus(this.safeValue(d[e],"state")),n=this.parseOrders(s,r,t,i,{status:a});u=this.arrayConcat(u,n)}return u}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={market:a.id,period:this.timeframes[t]};void 0!==i&&(n.timestamp=i),void 0!==s&&(n.limit=s);const o=await this.publicPostK(this.extend(n,r)),h=this.safeValue(o,"data",[]);return this.parseOHLCVs(h,a,t,i,s)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeValue(e,"state")),s=this.safeString2(e,"market","market_id"),r=this.safeSymbol(s,t);let a=this.safeTimestamp(e,"created_on");void 0===a&&(a=this.parse8601(this.safeString(e,"created_at")));const n=this.safeString(e,"price"),o=this.safeString(e,"avg_price"),h=this.safeString(e,"volume"),c=this.safeString(e,"remaining_volume"),d=this.safeString(e,"executed_volume");return this.safeOrder2({info:e,id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:r,type:this.safeValue(e,"ord_type"),timeInForce:void 0,postOnly:void 0,side:this.safeValue(e,"side"),price:n,stopPrice:void 0,average:o,amount:h,remaining:c,filled:d,status:i,cost:void 0,trades:void 0,fee:void 0},t)}parseOrderStatus(e){return this.safeString({wait:"open",done:"closed",cancel:"canceled"},e,e)}async createOrders(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id,orders:t},r=(await this.privatePostOrdersMulti(this.extend(s,i))).data;return this.parseOrders(r)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=await this.privatePostOrderDelete(this.extend({id:e},i)),r=this.safeValue(s,"data");return this.parseOrder(r)}async cancelOrders(e,t,i={}){await this.loadMarkets();const s=await this.privatePostOrderDeleteMulti(this.extend({ids:e},i)),r=this.safeValue(s,"data");return this.parseOrders(r)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i=await this.privatePostOrdersClear(t),s=this.safeValue(i,"data");return this.parseOrders(s)}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("public"===t)if("tickers_multi"===e||"order_book/multi"===e){let e="?";const t=this.safeValue(s,"markets");for(let i=0;i<t.length;i++)e+="markets[]="+t[i]+"&";const i=this.safeValue(s,"limit");void 0!==i&&(e+="limit="+i),n+=e}else Object.keys(o).length&&(n+="?"+this.urlencode(o));else if("private"===t){this.checkRequiredCredentials();const e={uid:this.apiKey,data:o};n+="?user_jwt="+this.jwt(e,this.encode(this.secret),"RS256")}return{url:n,method:i,body:a,headers:{"Content-Type":"application/json"}}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;const d=this.safeString(o,"code"),u=this.safeString(o,"message");if(void 0!==d&&"0"!==d){const e=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.codes,d,e),this.throwExactlyMatchedException(this.exceptions.exact,u,e),new r(e)}}}},21384:(e,t,i)=>{"use strict";const s=i(5645);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"okcoin",name:"OKCoin",countries:["CN","US"],hostname:"okcoin.com",pro:!0,urls:{logo:"https://user-images.githubusercontent.com/51840849/87295551-102fbf00-c50e-11ea-90a9-462eebba5829.jpg",www:"https://www.okcoin.com",doc:"https://www.okcoin.com/docs/en/",fees:"https://www.okcoin.com/coin-fees",referral:"https://www.okcoin.com/account/register?flag=activity&channelId=600001513"},fees:{trading:{taker:.002,maker:.001}},options:{fetchMarkets:["spot"]}})}}},58579:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ExchangeNotAvailable:a,OnMaintenance:n,ArgumentsRequired:o,BadRequest:h,AccountSuspended:c,InvalidAddress:d,PermissionDenied:u,InsufficientFunds:l,InvalidNonce:f,InvalidOrder:p,OrderNotFound:m,AuthenticationError:g,RequestTimeout:y,BadSymbol:b,RateLimitExceeded:v,NetworkError:w,CancelPending:k,NotSupported:_}=i(73449),{TICK_SIZE:S,TRUNCATE:O}=i(62115),M=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"okex",name:"OKEX",countries:["CN","US"],version:"v5",rateLimit:100,pro:!0,certified:!0,has:{margin:!0,swap:!0,future:!0,addMargin:!0,cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchBorrowRate:!0,fetchBorrowRates:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDepositAddressByNetwork:!0,fetchDepositAddressesByNetwork:!0,fetchDeposits:!0,fetchFundingHistory:!0,fetchFundingRate:!0,fetchFundingRateHistory:!0,fetchIndexOHLCV:!0,fetchLedger:!0,fetchLeverage:!0,fetchMarkets:!0,fetchMarketsByType:!0,fetchMarkOHLCV:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchPosition:!0,fetchPositions:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTickersByType:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFee:!0,fetchWithdrawals:!0,reduceMargin:!0,setLeverage:!0,setMarginMode:!0,setPositionMode:!0,transfer:!0,withdraw:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1H","2h":"2H","4h":"4H","6h":"6Hutc","12h":"12Hutc","1d":"1Dutc","1w":"1Wutc","1M":"1Mutc","3M":"3Mutc","6M":"6Mutc","1y":"1Yutc"},hostname:"www.okex.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/32552768-0d6dd3c6-c4a6-11e7-90f8-c043b64756a7.jpg",api:{rest:"https://{hostname}"},www:"https://www.okex.com",doc:"https://www.okex.com/docs-v5/en/",fees:"https://www.okex.com/pages/products/fees.html",test:{rest:"https://testnet.okex.com"}},api:{public:{get:{"market/tickers":1,"market/ticker":1,"market/index-tickers":1,"market/books":1,"market/candles":1,"market/history-candles":1,"market/index-candles":1,"market/mark-price-candles":1,"market/trades":1,"market/platform-24-volume":10,"market/open-oracle":100,"market/index-components":1,"public/instruments":1,"public/delivery-exercise-history":.5,"public/open-interest":1,"public/funding-rate":1,"public/funding-rate-history":1,"public/price-limit":1,"public/opt-summary":1,"public/estimated-price":2,"public/discount-rate-interest-free-quota":10,"public/time":2,"public/liquidation-orders":.5,"public/mark-price":2,"public/position-tiers":2,"public/underlying":1,"public/interest-rate-loan-quota":10,"rubik/stat/trading-data/support-coin":4,"rubik/stat/taker-volume":4,"rubik/stat/margin/loan-ratio":4,"rubik/stat/contracts/long-short-account-ratio":4,"rubik/stat/contracts/open-interest-volume":4,"rubik/stat/option/open-interest-volume":4,"rubik/stat/option/open-interest-volume-ratio":4,"rubik/stat/option/open-interest-volume-expiry":4,"rubik/stat/option/open-interest-volume-strike":4,"rubik/stat/option/taker-block-volume":4,"system/status":100}},private:{get:{"account/account-position-risk":2,"account/balance":2,"account/positions":2,"account/bills":5/3,"account/bills-archive":5/3,"account/config":4,"account/max-size":1,"account/max-avail-size":1,"account/leverage-info":1,"account/max-loan":1,"account/trade-fee":4,"account/interest-accrued":4,"account/interest-rate":4,"account/max-withdrawal":1,"asset/deposit-address":5/3,"asset/balances":5/3,"asset/transfer-state":10,"asset/deposit-history":5/3,"asset/withdrawal-history":5/3,"asset/currencies":5/3,"asset/bills":5/3,"asset/piggy-balance":5/3,"asset/deposit-lightning":5,"trade/order":1/3,"trade/orders-pending":1,"trade/orders-history":.5,"trade/orders-history-archive":1,"trade/fills":1/3,"trade/fills-history":2,"trade/orders-algo-pending":1,"trade/orders-algo-history":1,"account/subaccount/balances":10,"asset/subaccount/bills":5/3,"users/subaccount/list":10,"users/subaccount/apikey":10},post:{"account/set-position-mode":4,"account/set-leverage":1,"account/position/margin-balance":1,"account/set-greeks":4,"asset/transfer":10,"asset/withdrawal":5/3,"asset/purchase_redempt":5/3,"asset/withdrawal-lightning":5,"trade/order":1/3,"trade/batch-orders":1/15,"trade/cancel-order":1/3,"trade/cancel-batch-orders":1/15,"trade/amend-order":1/3,"trade/amend-batch-orders":1/3,"trade/close-position":1,"trade/order-algo":1,"trade/cancel-algos":1,"trade/cancel-advance-algos":1,"users/subaccount/delete-apikey":10,"users/subaccount/modify-apikey":10,"users/subaccount/apikey":10,"asset/subaccount/transfer":10}}},fees:{trading:{taker:this.parseNumber("0.0015"),maker:this.parseNumber("0.0010")},spot:{taker:this.parseNumber("0.0015"),maker:this.parseNumber("0.0010")},futures:{taker:this.parseNumber("0.0005"),maker:this.parseNumber("0.0002")},swap:{taker:this.parseNumber("0.00050"),maker:this.parseNumber("0.00020")}},requiredCredentials:{apiKey:!0,secret:!0,password:!0},exceptions:{exact:{1:r,2:r,5e4:h,50001:n,50002:h,50004:y,50005:a,50006:h,50007:c,50008:g,50009:c,50010:r,50011:v,50012:r,50013:a,50014:r,50015:r,50016:r,50017:r,50018:r,50019:r,50020:r,50021:r,50022:r,50023:r,50024:r,50025:r,50026:r,50027:r,50028:r,50100:r,50101:r,50102:f,50103:g,50104:g,50105:g,50106:g,50107:g,50108:r,50109:r,50110:u,50111:g,50112:g,50113:g,50114:g,50115:h,51e3:h,51001:b,51002:b,51003:h,51004:p,51005:p,51006:p,51007:p,51008:l,51009:c,51010:l,51011:p,51012:r,51014:r,51015:b,51016:p,51017:r,51018:r,51019:r,51020:p,51021:b,51022:b,51023:r,51024:c,51025:r,51026:b,51027:b,51028:b,51029:b,51030:b,51031:p,51100:p,51101:p,51102:p,51103:p,51104:p,51105:p,51106:p,51107:p,51108:p,51109:p,51110:p,51111:h,51112:p,51113:v,51115:p,51116:p,51117:p,51118:p,51119:l,51120:p,51121:p,51122:p,51124:p,51125:p,51126:p,51127:l,51128:p,51129:p,51130:b,51131:l,51132:p,51133:p,51134:p,51135:p,51136:p,51137:p,51138:p,51139:p,51201:p,51202:p,51203:p,51204:p,51205:p,51250:p,51251:p,51252:p,51253:p,51254:p,51255:p,51256:p,51257:p,51258:p,51259:p,51260:p,51261:p,51262:p,51263:p,51264:p,51265:p,51267:p,51268:p,51269:p,51270:p,51271:p,51272:p,51273:p,51274:p,51275:p,51276:p,51277:p,51278:p,51279:p,51280:p,51400:m,51401:m,51402:m,51403:p,51404:p,51405:r,51406:r,51407:h,51408:r,51409:r,51410:k,51500:r,51501:r,51502:l,51503:r,51506:r,51508:r,51509:r,51510:r,51511:r,51600:r,51601:r,51602:r,51603:m,52e3:r,54e3:r,54001:r,58e3:r,58001:g,58002:u,58003:r,58004:c,58005:r,58006:r,58007:r,58100:r,58101:c,58102:v,58103:r,58104:r,58105:r,58106:r,58107:r,58108:r,58109:r,58110:r,58111:r,58112:r,58114:r,58115:r,58116:r,58117:r,58200:r,58201:r,58202:r,58203:d,58204:c,58205:r,58206:r,58207:d,58208:r,58209:r,58210:r,58211:r,58212:r,58213:g,58300:r,58350:l,59e3:r,59001:r,59100:r,59101:r,59102:r,59103:l,59104:r,59105:r,59106:r,59107:r,59108:l,59109:r,59200:l,59201:l,59300:r,59301:r,59401:r,59500:r,59501:r,59502:r,59503:r,59504:r,59505:r,59506:r,59507:r,59508:c,60001:g,60002:g,60003:g,60004:g,60005:g,60006:f,60007:g,60008:g,60009:g,60010:g,60011:g,60012:h,60013:h,60014:v,60015:w,60016:a,60017:h,60018:h,60019:h,63999:r},broad:{}},httpExceptions:{429:a},precisionMode:S,options:{defaultNetwork:"ERC20",networks:{ETH:"ERC20",TRX:"TRC20",OMNI:"Omni"},layerTwo:{Lightning:!0,Liquid:!0},fetchOHLCV:{},createOrder:"privatePostTradeBatchOrders",createMarketBuyOrderRequiresPrice:!1,fetchMarkets:["spot","futures","swap","option"],defaultType:"spot",fetchLedger:{method:"privateGetAccountBills"},accountsByType:{spot:"1",futures:"3",margin:"5",funding:"6",swap:"9",option:"12",trading:"18",unified:"18"},typesByAccount:{1:"spot",3:"futures",5:"margin",6:"funding",9:"swap",12:"option",18:"trading"},brokerId:"e847386590ce4dBC"},commonCurrencies:{AE:"AET",BOX:"DefiBox",HOT:"Hydro Protocol",HSR:"HC",MAG:"Maggie",SBTC:"Super Bitcoin",TRADE:"Unitrade",YOYO:"YOYOW",WIN:"WinToken"}})}async fetchStatus(e={}){const t=await this.publicGetSystemStatus(e),i=this.safeValue(t,"data",[]),s={info:t,updated:this.milliseconds(),status:"ok",eta:void 0};for(let e=0;e<i.length;e++){const t=i[e];"ongoing"===this.safeString(t,"state")&&(s.eta=this.safeInteger(t,"end"),s.status="maintenance")}return this.status=this.extend(this.status,s),this.status}async fetchTime(e={}){const t=await this.publicGetPublicTime(e),i=this.safeValue(t,"data",[]),s=this.safeValue(i,0,{});return this.safeInteger(s,"ts")}async fetchMarkets(e={}){const t=this.safeValue(this.options,"fetchMarkets");let i=[];for(let s=0;s<t.length;s++){const r=await this.fetchMarketsByType(t[s],e);i=this.arrayConcat(i,r)}return i}parseMarkets(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.parseMarket(e[i]));return t}parseMarket(e){const t=this.safeString(e,"instId"),i=this.safeStringLower(e,"instType"),s="spot"===i,r="futures"===i,a="swap"===i,n="option"===i,o=a||r||n;let h=this.safeString(e,"baseCcy"),c=this.safeString(e,"quoteCcy");const d=this.safeString(e,"settleCcy"),u=this.safeCurrencyCode(d),l=this.safeString(e,"uly");if(void 0!==l&&!s){const e=l.split("-");h=this.safeString(e,0),c=this.safeString(e,1)}const f=h===d,p=c===d,m=this.safeCurrencyCode(h),g=this.safeCurrencyCode(c);let y,b=m+"/"+g;o&&(b=b+":"+u,y=this.safeInteger(e,"expTime"),void 0!==y&&(b=b+"-"+this.yymmdd(y)),n&&(b=b+"-"+this.safeString(e,"stk")+"-"+this.safeString(e,"optType")));const v=this.safeString(e,"tickSz"),w={amount:this.safeNumber(e,"lotSz"),price:this.parseNumber(v)},k=this.safeString(e,"minSz"),_=this.parseNumber(k);let S;void 0!==_&&void 0!==v&&(S=this.parseNumber(M.stringMul(v,k)));const O=this.safeValue2(this.fees,i,"trading",{});let T;o&&(T=this.safeString(e,"ctVal"));const x=this.safeNumber(e,"lever",1);return this.extend(O,{id:t,symbol:b,base:m,quote:g,baseId:h,quoteId:c,settleId:d,settle:u,info:e,type:i,spot:s,futures:r,swap:a,contract:o,option:n,linear:p,inverse:f,active:!0,contractSize:T,precision:w,expiry:y,expiryDatetime:this.iso8601(y),limits:{amount:{min:_,max:void 0},price:{min:w.price,max:void 0},cost:{min:S,max:void 0},leverage:{max:x}}})}async fetchMarketsByType(e,t={}){const i=e.toUpperCase(),s={instType:i};if("OPTION"===i){const e=this.safeValue(this.options,"defaultUnderlying","BTC-USD"),i=this.safeString2(t,"uly","marketId",e);if(void 0===i)throw new o(this.id+" fetchMarketsByType requires an underlying uly or marketId parameter for options markets");s.uly=i}const r=await this.publicGetPublicInstruments(this.extend(s,t)),a=this.safeValue(r,"data",[]);return this.parseMarkets(a)}safeNetwork(e){return this.safeString({Bitcoin:"BTC",Omni:"OMNI",TRON:"TRC20"},e,e)}async fetchCurrencies(e={}){if(!this.checkRequiredCredentials(!1))return;const t=await this.privateGetAssetCurrencies(e),i=this.safeValue(t,"data",[]),s={},r=this.groupBy(i,"ccy"),a=Object.keys(r),n=this.parseNumber("0.00000001");for(let e=0;e<a.length;e++){const t=a[e],i=this.safeCurrency(t).code,o=r[t],h={};let c=!1;for(let e=0;e<o.length;e++){const t=o[e],s=this.safeValue(t,"canDep"),r=this.safeValue(t,"canWd"),a=this.safeValue(t,"canInternal"),n=!!(s&&r&&a);c=void 0===c?n:c;const d=this.safeString(t,"chain");if(d.indexOf("-")>=0){const e=d.split("-"),s=this.safeString(e,1,d);let r=this.safeNetwork(s);const a=this.safeValue(t,"mainNet",!1),o=this.safeValue(this.options,"layerTwo",{Liquid:!0,Lightning:!0});a&&!(s in o)&&(r=i),h[r]={info:t,id:d,network:r,active:n,fee:this.safeNumber(t,"minFee"),precision:void 0,limits:{withdraw:{min:this.safeNumber(t,"minWd"),max:void 0}}}}}s[i]={info:void 0,code:i,id:t,name:void 0,active:c,fee:void 0,precision:n,limits:{amount:{min:void 0,max:void 0}},networks:h}}return s}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={instId:this.market(e).id};void 0!==(t=void 0===t?20:t)&&(s.sz=t);const r=await this.publicGetMarketBooks(this.extend(s,i)),a=this.safeValue(r,"data",[]),n=this.safeValue(a,0,{}),o=this.safeInteger(n,"ts");return this.parseOrderBook(n,e,o)}parseTicker(e,t){const i=this.safeInteger(e,"ts"),s=this.safeString(e,"instId"),r=(t=this.safeMarket(s,t,"-")).symbol,a=this.safeNumber(e,"last"),n=this.safeNumber(e,"open24h"),o=this.safeNumber(e,"volCcy24h"),h=this.safeNumber(e,"vol24h"),c=this.vwap(h,o);return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high24h"),low:this.safeNumber(e,"low24h"),bid:this.safeNumber(e,"bidPx"),bidVolume:this.safeNumber(e,"bidSz"),ask:this.safeNumber(e,"askPx"),askVolume:this.safeNumber(e,"askSz"),vwap:c,open:n,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:h,quoteVolume:o,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={instId:i.id},r=await this.publicGetMarketTicker(this.extend(s,t)),a=this.safeValue(r,"data",[]),n=this.safeValue(a,0,{});return this.parseTicker(n,i)}async fetchTickersByType(e,t,i={}){await this.loadMarkets();const s=e.toUpperCase(),r={instType:e.toUpperCase()};if("OPTION"===s){const e=this.safeValue(this.options,"defaultUnderlying","BTC-USD"),t=this.safeString2(i,"uly","marketId",e);if(void 0===t)throw new o(this.id+" fetchTickersByType requires an underlying uly or marketId parameter for options markets");r.uly=t}const a=await this.publicGetMarketTickers(this.extend(r,i)),n=this.safeValue(a,"data",[]);return this.parseTickers(n,t)}async fetchTickers(e,t={}){const i=this.safeString2(this.options,"fetchTickers","defaultType"),s=this.safeString(t,"type",i);return await this.fetchTickersByType(s,e,this.omit(t,"type"))}parseTrade(e,t){const i=this.safeString(e,"tradeId"),s=this.safeString(e,"instId"),r=(t=this.safeMarket(s,t,"-")).symbol,a=this.safeInteger(e,"ts"),n=this.safeString2(e,"fillPx","px"),o=this.safeString2(e,"fillSz","sz"),h=this.safeString(e,"side"),c=this.safeString(e,"ordId"),d=this.safeString(e,"fee");let u;if(void 0!==d){const t=M.stringNeg(d),i=this.safeString(e,"feeCcy");u={cost:t,currency:this.safeCurrencyCode(i)}}let l=this.safeString(e,"execType");return"T"===l?l="taker":"M"===l&&(l="maker"),this.safeTrade({info:e,timestamp:a,datetime:this.iso8601(a),symbol:r,id:i,order:c,type:void 0,takerOrMaker:l,side:h,price:n,amount:o,cost:void 0,fee:u},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={instId:r.id};void 0!==i&&(a.limit=i);const n=await this.publicGetMarketTrades(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseTrades(o,r,t,i)}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n=this.safeString(r,"price");r=this.omit(r,"price"),void 0===s&&(s=100);const o={instId:a.id,bar:this.timeframes[t],limit:s};let h="Candles";if(void 0!==i){const e=this.parseTimeframe(t);this.milliseconds()-i>s*e*1e3&&(h="HistoryCandles");const r=1e3*e,a=Math.max(i-1,0);o.before=a,o.after=this.sum(a,r*s)}const c=this.safeValue(this.options,"fetchOHLCV",{});h=this.safeString(c,"type",h);const d=this.safeString(r,"type",h);r=this.omit(r,"type");let u="publicGetMarket"+d;"mark"===n?u="publicGetMarketMarkPriceCandles":"index"===n&&(u="publicGetMarketIndexCandles");const l=await this[u](this.extend(o,r)),f=this.safeValue(l,"data",[]);return this.parseOHLCVs(f,a,t,i,s)}async fetchFundingRateHistory(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchFundingRateHistory() requires a symbol argument");await this.loadMarkets();const r={instId:this.market(e).id};void 0!==t&&(r.before=Math.max(t-1,0)),void 0!==i&&(r.limit=i);const a=await this.publicGetPublicFundingRateHistory(this.extend(r,s)),n=[],h=this.safeValue(a,"data");for(let e=0;e<h.length;e++){const t=h[e],i=this.safeNumber(t,"fundingTime");n.push({symbol:this.safeSymbol(this.safeString(t,"instId")),fundingRate:this.safeNumber(t,"realizedRate"),timestamp:i,datetime:this.iso8601(i)})}const c=this.sortBy(n,"timestamp");return this.filterBySymbolSinceLimit(c,e,t,i)}async fetchIndexOHLCV(e,t="1m",i,s,r={}){return await this.fetchOHLCV(e,t,i,s,this.extend({price:"index"},r))}async fetchMarkOHLCV(e,t="1m",i,s,r={}){return await this.fetchOHLCV(e,t,i,s,this.extend({price:"mark"},r))}parseBalanceByType(e,t){return"funding"===e?this.parseFundingBalance(t):this.parseTradingBalance(t)}parseTradingBalance(e){const t={info:e},i=this.safeValue(e,"data",[]),s=this.safeValue(i,0,{}),r=this.safeInteger(s,"uTime"),a=this.safeValue(s,"details",[]);for(let e=0;e<a.length;e++){const i=a[e],s=this.safeString(i,"ccy"),r=this.safeCurrencyCode(s),n=this.account(),o=this.safeString(i,"eq"),h=this.safeString(i,"availEq");o.length<1||h.length<1?(n.free=this.safeString(i,"availBal"),n.used=this.safeString(i,"frozenBal")):(n.total=o,n.free=h),t[r]=n}return t.timestamp=r,t.datetime=this.iso8601(r),this.parseBalance(t)}parseFundingBalance(e){const t={info:e},i=this.safeValue(e,"data",[]);for(let e=0;e<i.length;e++){const s=i[e],r=this.safeString(s,"ccy"),a=this.safeCurrencyCode(r),n=this.account();n.total=this.safeString(s,"bal"),n.free=this.safeString(s,"availBal"),n.used=this.safeString(s,"frozenBal"),t[a]=n}return this.parseBalance(t)}parseTradingFee(e,t){return{info:e,symbol:this.safeSymbol(void 0,t),maker:this.safeNumber(e,"maker"),taker:this.safeNumber(e,"taker")}}async fetchTradingFee(e,t={}){await this.loadMarkets();const i=this.market(e),s={instType:i.type.toUpperCase()};if(i.spot)s.instId=i.id;else{if(!(i.swap||i.futures||i.option))throw new _(this.id+" fetchTradingFee supports spot, swap, futures or option markets only");s.uly=i.baseId+"-"+i.quoteId}const r=await this.privateGetAccountTradeFee(this.extend(s,t)),a=this.safeValue(r,"data",[]),n=this.safeValue(a,0,{});return this.parseTradingFee(n,i)}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString(this.options,"defaultType"),i=this.safeValue(this.options,"fetchBalance",{});let s,r=this.safeString(i,"type",t);r=this.safeString(e,"type",r),e=this.omit(e,"type"),s="funding"===r?"privateGetAssetBalances":"privateGetAccountBalance";const a=await this[s](this.extend({},e));return this.parseBalanceByType(r,a)}async createOrder(e,t,i,s,a,n={}){await this.loadMarkets();const c=this.market(e),d={instId:c.id,side:i,ordType:t},u=this.safeStringLower(n,"tdMode");if(c.spot)d.tdMode="cash";else if(c.contract){if(void 0===u)throw new o(this.id+' params["tdMode"] is required to be either "isolated" or "cross"');if("isolated"!==u&&"cross"!==u)throw new h(this.id+' params["tdMode"] must be either "isolated" or "cross"')}this.safeValue(n,"postOnly",!1)&&(d.ordType="post_only",n=this.omit(n,["postOnly"]));const l=this.safeString2(n,"clOrdId","clientOrderId");if(void 0===l){const e=this.safeString(this.options,"brokerId");void 0!==e&&(d.clOrdId=e+this.uuid16())}else d.clOrdId=l,n=this.omit(n,["clOrdId","clientOrderId"]);if(d.sz=this.amountToPrecision(e,s),"market"===t){if("spot"===c.type&&"buy"===i){const e=this.safeString(this.options,"tgtCcy","base_ccy");if("quote_ccy"===this.safeString(n,"tgtCcy",e)){d.tgtCcy="quote_ccy";let e=this.safeNumber(n,"sz");if(this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){if(void 0!==a)void 0===e&&(e=s*a);else if(void 0===e)throw new p(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'sz' extra parameter (the exchange-specific behaviour)")}else e=void 0===e?s:e;const t=c.precision.price;d.sz=this.decimalToPrecision(e,O,t,this.precisionMode)}else d.tgtCcy="base_ccy";n=this.omit(n,["tgtCcy"])}}else d.px=this.priceToPrecision(e,a);let f;const m=this.safeString(this.options,"createOrder","privatePostTradeBatchOrders");if("privatePostTradeOrder"===m)f=this.extend(d,n);else{if("privatePostTradeBatchOrders"!==m)throw new r(this.id+' this.options["createOrder"] must be either privatePostTradeBatchOrders or privatePostTradeOrder');f=[this.extend(d,n)]}const g=await this[m](f),y=this.safeValue(g,"data",[]),b=this.safeValue(y,0),v=this.parseOrder(b,c);return this.extend(v,{type:t,side:i})}async cancelOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={instId:s.id},a=this.safeString2(i,"clOrdId","clientOrderId");void 0!==a?r.clOrdId=a:r.ordId=e;const n=this.omit(i,["clOrdId","clientOrderId"]),h=await this.privatePostTradeCancelOrder(this.extend(r,n)),c=this.safeValue(h,"data",[]),d=this.safeValue(c,0);return this.parseOrder(d,s)}parseOrderStatus(e){return this.safeString({canceled:"canceled",live:"open",partially_filled:"open",filled:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"ordId"),s=this.safeInteger(e,"cTime"),r=this.safeInteger(e,"fillTime"),a=this.safeString(e,"side");let n,o,h=this.safeString(e,"ordType");"post_only"===h?(n=!0,h="limit"):"fok"===h?(o="FOK",h="limit"):"ioc"===h&&(o="IOC",h="limit");const c=this.safeString(e,"instId"),d=this.safeSymbol(c,t,"-"),u=this.safeString(e,"accFillSz"),l=this.safeString2(e,"px","slOrdPx"),f=this.safeString(e,"avgPx"),p=this.parseOrderStatus(this.safeString(e,"state")),m=this.safeString(e,"fee");let g,y;const b=this.safeString(this.options,"tgtCcy","base_ccy"),v=this.safeString(e,"tgtCcy",b),w=this.safeString(e,"instType");let k;if("buy"===a&&"market"===h&&"SPOT"===w&&"quote_ccy"===v?y=this.safeString(e,"sz"):g=this.safeString(e,"sz"),void 0!==m){const t=M.stringNeg(m),i=this.safeString(e,"feeCcy"),s=this.safeCurrencyCode(i);k={cost:this.parseNumber(t),currency:s}}let _=this.safeString(e,"clOrdId");void 0!==_&&_.length<1&&(_=void 0);const S=this.safeNumber(e,"slTriggerPx");return this.safeOrder2({info:e,id:i,clientOrderId:_,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:r,symbol:d,type:h,timeInForce:o,postOnly:n,side:a,price:l,stopPrice:S,average:f,cost:y,amount:g,filled:u,remaining:void 0,status:p,fee:k,trades:void 0},t)}async fetchOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={instId:s.id},a=this.safeString2(i,"clOrdId","clientOrderId");void 0!==a?r.clOrdId=a:r.ordId=e;const n=this.omit(i,["clOrdId","clientOrderId"]),h=await this.privateGetTradeOrder(this.extend(r,n)),c=this.safeValue(h,"data",[]),d=this.safeValue(c,0);return this.parseOrder(d,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.instId=a.id),void 0!==i&&(r.limit=i);const n=await this.privateGetTradeOrdersPending(this.extend(r,s)),o=this.safeValue(n,"data",[]);return this.parseOrders(o,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r=this.safeString(this.options,"defaultType"),a=this.safeValue(this.options,"fetchClosedOrders",{});let n=this.safeString(a,"type",r);n=this.safeString(s,"type",n),s=this.omit(s,"type");const o={};let h;void 0!==e&&(h=this.market(e),(h.futures||h.swap)&&(n=h.type),o.instId=h.id),o.instType=n.toUpperCase(),void 0!==i&&(o.limit=i);const c=this.safeString(a,"method","privateGetTradeOrdersHistory"),d=await this[c](this.extend(o,s)),u=this.safeValue(d,"data",[]);return this.parseOrders(u,h,t,i)}async fetchMyTrades(e,t,i,s={}){const r=this.safeString(this.options,"defaultType"),a=this.safeValue(this.options,"fetchMyTrades",{});let n=this.safeString(a,"type",r);s=this.omit(s,"type"),await this.loadMarkets();const o={};let h;void 0!==e&&(h=this.market(e),o.instId=h.id,n=h.type),o.instType=n.toUpperCase(),void 0!==i&&(o.limit=i);const c=await this.privateGetTradeFillsHistory(this.extend(o,s)),d=this.safeValue(c,"data",[]);return this.parseTrades(d,h,t,i,s)}async fetchOrderTrades(e,t,i,s,r={}){const a={ordId:e};return await this.fetchMyTrades(t,i,s,this.extend(a,r))}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const r=this.safeValue(this.options,"fetchLedger",{});let a=this.safeString(r,"method");a=this.safeString(s,"method",a),s=this.omit(s,"method");const n={};let o;void 0!==i&&(n.limit=i),void 0!==e&&(o=this.currency(e),n.ccy=o.id);const h=await this[a](this.extend(n,s)),c=this.safeValue(h,"data",[]);return this.parseLedger(c,o,t,i)}parseLedgerEntryType(e){return this.safeString({1:"transfer",2:"trade",3:"trade",4:"rebate",5:"trade",6:"transfer",7:"trade",8:"fee",9:"trade",10:"trade",11:"trade"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"billId"),s=this.safeString(e,"ordId"),r=this.parseLedgerEntryType(this.safeString(e,"type")),a=this.safeCurrencyCode(this.safeString(e,"ccy"),t),n=this.safeString(e,"balChg"),o=this.parseNumber(n),h=this.safeInteger(e,"ts"),c=this.safeString(e,"fee");let d;void 0!==c&&(d={cost:this.parseNumber(M.stringNeg(c)),currency:a});const u=this.safeString(e,"bal"),l=this.parseNumber(u),f=this.safeString(e,"instId");let p;return f in this.markets_by_id&&(p=this.markets_by_id[f].symbol),{id:i,info:e,timestamp:h,datetime:this.iso8601(h),account:void 0,referenceId:s,referenceAccount:void 0,type:r,currency:a,symbol:p,amount:o,before:void 0,after:l,status:"ok",fee:d}}parseDepositAddress(e,t){const i=this.safeString(e,"addr");let s=this.safeString2(e,"tag","pmtId");s=this.safeString(e,"memo",s);const r=this.safeString(e,"ccy"),a=(t=this.safeCurrency(r,t)).code,n=this.safeString(e,"chain"),o=this.safeValue(t,"networks",{}),h=this.indexBy(o,"id"),c=this.safeValue(h,n),d=this.safeString(c,"network");return this.checkAddress(i),{currency:a,address:i,tag:s,network:d,info:e}}async fetchDepositAddressesByNetwork(e,t={}){await this.loadMarkets();const i={ccy:this.currency(e).id},s=await this.privateGetAssetDepositAddress(this.extend(i,t)),r=this.safeValue(s,"data",[]),a=this.filterBy(r,"selected",!0),n=this.parseDepositAddresses(a,[e],!1);return this.indexBy(n,"network")}async fetchDepositAddress(e,t={}){const i=this.safeStringUpper(t,"network"),s=this.safeValue(this.options,"networks",{}),r=this.safeString(s,i,i);t=this.omit(t,"network");const a=await this.fetchDepositAddressesByNetwork(e,t);let n;if(void 0===r){if(n=this.safeValue(a,e),void 0===n){const t=this.safeString(s,e,e);if(n=this.safeValue(a,t),void 0===n){const t=this.safeString(this.options,"defaultNetwork","ERC20");if(n=this.safeValue(a,t),void 0===n){const t=Object.values(a);if(n=this.safeValue(t,0),void 0===n)throw new d(this.id+" fetchDepositAddress() cannot find deposit address for "+e)}}}return n}if(n=this.safeValue(a,r),void 0===n)throw new d(this.id+" fetchDepositAddress() cannot find "+r+" deposit address for "+e);return n}async withdraw(e,t,i,s,a={}){[s,a]=this.handleWithdrawTagAndParams(s,a),this.checkAddress(i),await this.loadMarkets();const n=this.currency(e);void 0!==s&&(i=i+":"+s);const h=this.safeString(a,"fee");if(void 0===h)throw new o(this.id+" withdraw() requires a 'fee' string parameter, network transaction fee must be ≥ 0. Withdrawals to OKCoin or OKEx are fee-free, please set '0'. Withdrawing to external digital asset address requires network transaction fee.");const c={ccy:n.id,toAddr:i,dest:"4",amt:this.numberToString(t),fee:this.numberToString(h)};"password"in a?c.pwd=a.password:"pwd"in a&&(c.pwd=a.pwd);const d=this.safeValue(this.options,"networks",{});let u=this.safeStringUpper(a,"network");u=this.safeString(d,u,u),void 0!==u&&(c.chain=n.id+"-"+u,a=this.omit(a,"network"));const l=this.omit(a,["fee","password","pwd"]);if(!("pwd"in c))throw new r(this.id+" withdraw() requires a password parameter or a pwd parameter, it must be the funding password, not the API passphrase");const f=await this.privatePostAssetWithdrawal(this.extend(c,l)),p=this.safeValue(f,"data",[]),m=this.safeValue(p,0);return this.parseTransaction(m,n)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.ccy=a.id),void 0!==t&&(r.before=Math.max(t-1,0)),void 0!==i&&(r.limit=i);const n=await this.privateGetAssetDepositHistory(this.extend(r,s)),o=this.safeValue(n,"data",[]);return this.parseTransactions(o,a,t,i,s)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.ccy=a.id),void 0!==t&&(r.before=Math.max(t-1,0)),void 0!==i&&(r.limit=i);const n=await this.privateGetAssetWithdrawalHistory(this.extend(r,s)),o=this.safeValue(n,"data",[]);return this.parseTransactions(o,a,t,i,s)}parseTransactionStatus(e){return this.safeString({"-3":"pending","-2":"canceled","-1":"failed",0:"pending",1:"pending",2:"ok",3:"pending",4:"pending",5:"pending"},e,e)}parseTransaction(e,t){let i,s;const r=this.safeString(e,"wdId"),a=this.safeString(e,"from"),n=this.safeString(e,"to"),o=n;let h=this.safeString2(e,"tag","memo");h=this.safeString2(e,"pmtId",h),void 0!==r?(i="withdrawal",s=r):(s=this.safeString(e,"depId"),i="deposit");const c=this.safeString(e,"ccy"),d=this.safeCurrencyCode(c),u=this.safeNumber(e,"amt"),l=this.parseTransactionStatus(this.safeString(e,"state")),f=this.safeString(e,"txId"),p=this.safeInteger(e,"ts");let m;return m="deposit"===i?0:this.safeNumber(e,"fee"),{info:e,id:s,currency:d,amount:u,addressFrom:a,addressTo:n,address:o,tagFrom:void 0,tagTo:h,tag:h,status:l,type:i,updated:void 0,txid:f,timestamp:p,datetime:this.iso8601(p),fee:{currency:d,cost:m}}}async fetchLeverage(e,t={}){await this.loadMarkets();const i=this.safeStringLower(t,"mgnMode");if(t=this.omit(t,["mgnMode"]),"cross"!==i&&"isolated"!==i)throw new h(this.id+' setLeverage params["mgnMode"] must be either "cross" or "isolated"');const s={instId:this.market(e).id,mgnMode:i};return await this.privateGetAccountLeverageInfo(this.extend(s,t))}async fetchPosition(e,t={}){await this.loadMarkets();const i=this.market(e),s=this.safeString(t,"type");t=this.omit(t,"type");const r={instId:i.id};void 0!==s&&(r.instType=s.toUpperCase()),t=this.omit(t,"type");const a=await this.privateGetAccountPositions(t),n=this.safeValue(a,"data",[]),o=this.safeValue(n,0);return void 0===o?o:this.parsePosition(o)}async fetchPositions(e,t={}){await this.loadMarkets();const i=this.safeString(t,"type");t=this.omit(t,"type");const s={};void 0!==i&&(s.instType=i.toUpperCase()),t=this.omit(t,"type");const r=await this.privateGetAccountPositions(this.extend(s,t)),a=this.safeValue(r,"data",[]),n=[];for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t,"instType");"FUTURES"!==i&&"SWAP"!==i||n.push(this.parsePosition(a[e]))}return n}parsePosition(e,t){const i=this.safeString(e,"instId"),s=(t=this.safeMarket(i,t)).symbol,r=this.safeString(e,"pos"),a=M.stringAbs(r);let n,o=this.safeString(e,"posSide");const h="net"!==o;void 0!==r&&(n=this.parseNumber(a),"net"===o&&(o=M.stringGt(r,"0")?"long":"short"));const c=this.safeString(e,"markPx");let d=this.safeString(e,"notionalUsd");t.inverse&&(d=M.stringDiv(d,c));const u=this.parseNumber(d),l=this.safeString(e,"mgnMode");let f;const p=this.safeString(e,"avgPx"),m=this.safeString(e,"upl"),g=this.safeString(e,"lever");let y,b;"cross"===l?(f=this.safeString(e,"imr"),b=M.stringAdd(f,m)):"isolated"===l&&(y=M.stringDiv("1",g),b=this.safeString(e,"margin"));const v=this.safeString(e,"mmr"),w=this.parseNumber(v);let k=M.stringDiv(v,d);void 0===y?y=this.parseNumber(M.stringDiv(f,d,4)):void 0===f&&(f=M.stringMul(y,d)),k=this.parseNumber(M.stringDiv(M.stringAdd(k,"0.00005"),"1",4));const _=this.safeNumber(e,"liqPx"),S=this.safeString(e,"uplRatio"),O=this.parseNumber(M.stringMul(S,"100")),T=this.safeInteger(e,"uTime"),x=this.parseNumber(M.stringDiv(v,b,4));return{info:e,symbol:s,notional:u,marginType:l,liquidationPrice:_,entryPrice:this.parseNumber(p),unrealizedPnl:this.parseNumber(m),percentage:O,contracts:n,contractSize:this.parseNumber(t.contractSize),markPrice:this.parseNumber(c),side:o,hedged:h,timestamp:T,datetime:this.iso8601(T),maintenanceMargin:w,maintenanceMarginPercentage:k,collateral:this.parseNumber(b),initialMargin:this.parseNumber(f),initialMarginPercentage:this.parseNumber(y),leverage:this.parseNumber(g),marginRatio:x}}async transfer(e,t,i,s,a={}){await this.loadMarkets();const n=this.currency(e),o=this.safeValue(this.options,"accountsByType",{}),h=this.safeString(o,i),c=this.safeString(o,s);if(void 0===h){const e=Object.keys(o);throw new r(this.id+" fromAccount must be one of "+e.join(", "))}if(void 0===c){const e=Object.keys(o);throw new r(this.id+" toAccount must be one of "+e.join(", "))}const d={ccy:n.id,amt:this.currencyToPrecision(e,t),type:"0",from:h,to:c},u=await this.privatePostAssetTransfer(this.extend(d,a)),l=this.safeValue(u,"data",[]),f=this.safeValue(l,0,{});return this.parseTransfer(f,n)}parseTransfer(e,t){const i=this.safeString(e,"transId"),s=this.safeString(e,"ccy"),r=this.safeCurrencyCode(s,t),a=this.safeNumber(e,"amt"),n=this.safeString(e,"from"),o=this.safeString(e,"to"),h=this.safeValue(this.options,"typesByAccount",{}),c=this.safeString(h,n),d=this.safeString(h,o),u=void 0;return{info:e,id:i,timestamp:u,datetime:this.iso8601(u),currency:r,amount:a,fromAccount:c,toAccount:d,status:void 0}}sign(e,t="public",i="GET",s={},r,a){const n=Array.isArray(s),o="/api/"+this.version+"/"+this.implodeParams(e,s),h=this.omit(s,this.extractParams(e));let c=this.implodeHostname(this.urls.api.rest)+o;if("public"===t)Object.keys(h).length&&(c+="?"+this.urlencode(h));else if("private"===t){this.checkRequiredCredentials();const e=this.iso8601(this.milliseconds());r={"OK-ACCESS-KEY":this.apiKey,"OK-ACCESS-PASSPHRASE":this.password,"OK-ACCESS-TIMESTAMP":e};let t=e+i+o;if("GET"===i){if(Object.keys(h).length){const e="?"+this.urlencode(h);c+=e,t+=e}}else(n||Object.keys(h).length)&&(t+=a=this.json(h)),r["Content-Type"]="application/json";const s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64");r["OK-ACCESS-SIGN"]=s}return{url:c,method:i,body:a,headers:r}}parseFundingRate(e,t){const i=this.safeInteger(e,"fundingTime");let s;void 0!==i&&(s=i-288e5);const r=this.safeString(e,"instId"),a=this.safeSymbol(r,t),n=this.safeNumber(e,"fundingRate");return{info:e,symbol:a,markPrice:void 0,indexPrice:void 0,interestRate:this.parseNumber("0"),estimatedSettlePrice:void 0,timestamp:void 0,datetime:void 0,previousFundingRate:void 0,nextFundingRate:n,previousFundingTimestamp:s,nextFundingTimestamp:i,previousFundingDatetime:this.iso8601(s),nextFundingDatetime:this.iso8601(i)}}async fetchFundingRate(e,t={}){await this.loadMarkets();const i=this.market(e);if(!i.swap)throw new r(this.id+" fetchFundingRate is only valid for swap markets");const s={instId:i.id},a=await this.publicGetPublicFundingRate(this.extend(s,t)),n=this.safeValue(a,"data",[]),o=this.safeValue(n,0,{});return this.parseFundingRate(o,i)}async fetchFundingHistory(e,t,i,s={}){await this.loadMarkets();const r={type:"8"};void 0!==i&&(r.limit=i.toString());const a=await this.privateGetAccountBills(this.extend(r,s)),n=this.safeValue(a,"data"),o=[];for(let e=0;e<n.length;e++){const t=n[e],i=this.safeInteger(t,"ts"),s=this.safeString(t,"instId"),r=this.safeMarket(s);o.push({info:t,symbol:r.symbol,code:r.inverse?r.base:r.quote,timestamp:i,datetime:this.iso8601(i),id:this.safeString(t,"billId"),amount:this.safeNumber(t,"balChg")})}const h=this.sortBy(o,"timestamp");return this.filterBySymbolSinceLimit(h,e,t,i)}async setLeverage(e,t,i={}){if(void 0===t)throw new o(this.id+" setLeverage() requires a symbol argument");if(e<1||e>125)throw new h(this.id+" setLeverage leverage should be between 1 and 125");await this.loadMarkets();const s=this.market(t),r=this.safeStringLower(i,"mgnMode");if(i=this.omit(i,["mgnMode"]),"cross"!==r&&"isolated"!==r)throw new h(this.id+' setLeverage params["mgnMode"] must be either "cross" or "isolated"');const a={lever:e,mgnMode:r,instId:s.id};return await this.privatePostAccountSetLeverage(this.extend(a,i))}async setPositionMode(e,t,i={}){let s;s=e?"long_short_mode":"net_mode";const r={posMode:s};return await this.privatePostAccountSetPositionMode(this.extend(r,i))}async setMarginMode(e,t,i={}){if(void 0===t)throw new o(this.id+" setLeverage() requires a symbol argument");if("cross"!==e&&"isolated"!==e)throw new h(this.id+' setMarginMode marginType must be either "cross" or "isolated"');await this.loadMarkets();const s=this.market(t),r=this.safeInteger(i,"lever");if(void 0===r||r<1||r>125)throw new h(this.id+' setMarginMode params["lever"] should be between 1 and 125');i=this.omit(i,["lever"]);const a={lever:r,mgnMode:e,instId:s.id};return await this.privatePostAccountSetLeverage(this.extend(a,i))}async modifyMarginHelper(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a=this.safeString(s,"posSide","net");s=this.omit(s,["posSide"]);const n={instId:r.id,amt:t,type:i,posSide:a},o=await this.privatePostAccountPositionMarginBalance(this.extend(n,s)),h=this.safeValue(o,"data",[]),c=this.safeValue(h,0,{}),d="0"===this.safeString(o,"code")?"ok":"failed",u=this.safeNumber(c,"amt"),l=this.safeString(c,"type"),f=this.safeString(c,"instId"),p=this.safeMarket(f,r);return{info:o,type:l,amount:u,code:p.inverse?p.base:p.quote,symbol:e=p.symbol,status:d}}async fetchBorrowRates(e={}){await this.loadMarkets();const t=await this.privateGetAccountInterestRate(e),i=this.milliseconds(),s=this.safeValue(t,"data"),r={};for(let e=0;e<s.length;e++){const t=s[e],a=this.safeCurrencyCode(this.safeString(t,"ccy"));r[a]={currency:a,rate:this.safeNumber(t,"interestRate"),period:864e5,timestamp:i,datetime:this.iso8601(i),info:t}}return r}async fetchBorrowRate(e,t={}){await this.loadMarkets();const i={ccy:this.currency(e).id},s=await this.privateGetAccountInterestRate(this.extend(i,t)),r=this.milliseconds(),a=this.safeValue(s,"data"),n=this.safeValue(a,0);return{currency:e,rate:this.safeNumber(n,"interestRate"),period:864e5,timestamp:r,datetime:this.iso8601(r),info:n}}async reduceMargin(e,t,i={}){return await this.modifyMarginHelper(e,t,"reduce",i)}async addMargin(e,t,i={}){return await this.modifyMarginHelper(e,t,"add",i)}setSandboxMode(e){this.headers["x-simulated-trading"]=e?1:null}handleErrors(e,t,i,s,a,n,o,h,c){if(!o)return;const d=this.safeString(o,"code");if("0"!==d){const e=this.id+" "+n,t=this.safeValue(o,"data",[]);for(let i=0;i<t.length;i++){const s=t[i],r=this.safeString(s,"sCode"),a=this.safeString(s,"sMsg");this.throwExactlyMatchedException(this.exceptions.exact,r,e),this.throwBroadlyMatchedException(this.exceptions.broad,a,e)}throw this.throwExactlyMatchedException(this.exceptions.exact,d,e),new r(e)}}}},5645:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ExchangeNotAvailable:a,OnMaintenance:n,ArgumentsRequired:o,BadRequest:h,AccountSuspended:c,InvalidAddress:d,PermissionDenied:u,DDoSProtection:l,InsufficientFunds:f,InvalidNonce:p,CancelPending:m,InvalidOrder:g,OrderNotFound:y,AuthenticationError:b,RequestTimeout:v,NotSupported:w,BadSymbol:k,RateLimitExceeded:_}=i(73449),{TICK_SIZE:S,TRUNCATE:O}=i(62115),M=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"okex3",name:"OKEX",countries:["CN"],version:"v3",rateLimit:1e3,pro:!0,has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:void 0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:void 0,fetchWithdrawals:!0,future:!0,withdraw:!0},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800","1M":"2678400","3M":"8035200","6M":"16070400","1y":"31536000"},hostname:"okex.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/32552768-0d6dd3c6-c4a6-11e7-90f8-c043b64756a7.jpg",api:{rest:"https://www.{hostname}"},www:"https://www.okex.com",doc:"https://www.okex.com/docs/en/",fees:"https://www.okex.com/pages/products/fees.html",referral:"https://www.okex.com/join/1888677",test:{rest:"https://testnet.okex.com"}},api:{general:{get:["time"]},account:{get:["wallet","sub-account","asset-valuation","wallet/{currency}","withdrawal/history","withdrawal/history/{currency}","ledger","deposit/address","deposit/history","deposit/history/{currency}","currencies","withdrawal/fee"],post:["transfer","withdrawal"]},spot:{get:["accounts","accounts/{currency}","accounts/{currency}/ledger","orders","amend_order/{instrument_id}","orders_pending","orders/{order_id}","orders/{client_oid}","trade_fee","fills","algo","instruments","instruments/{instrument_id}/book","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/history/candles"],post:["order_algo","orders","batch_orders","cancel_orders/{order_id}","cancel_orders/{client_oid}","cancel_batch_algos","cancel_batch_orders"]},margin:{get:["accounts","accounts/{instrument_id}","accounts/{instrument_id}/ledger","accounts/availability","accounts/{instrument_id}/availability","accounts/borrowed","accounts/{instrument_id}/borrowed","orders","accounts/{instrument_id}/leverage","orders/{order_id}","orders/{client_oid}","orders_pending","fills","instruments/{instrument_id}/mark_price"],post:["accounts/borrow","accounts/repayment","orders","batch_orders","cancel_orders","cancel_orders/{order_id}","cancel_orders/{client_oid}","cancel_batch_orders","accounts/{instrument_id}/leverage"]},futures:{get:["position","{instrument_id}/position","accounts","accounts/{underlying}","accounts/{underlying}/leverage","accounts/{underlying}/ledger","order_algo/{instrument_id}","orders/{instrument_id}","orders/{instrument_id}/{order_id}","orders/{instrument_id}/{client_oid}","fills","trade_fee","accounts/{instrument_id}/holds","order_algo/{instrument_id}","instruments","instruments/{instrument_id}/book","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/history/candles","instruments/{instrument_id}/index","rate","instruments/{instrument_id}/estimated_price","instruments/{instrument_id}/open_interest","instruments/{instrument_id}/price_limit","instruments/{instrument_id}/mark_price","instruments/{instrument_id}/liquidation"],post:["accounts/{underlying}/leverage","order","amend_order/{instrument_id}","orders","cancel_order/{instrument_id}/{order_id}","cancel_order/{instrument_id}/{client_oid}","cancel_batch_orders/{instrument_id}","accounts/margin_mode","close_position","cancel_all","order_algo","cancel_algos"]},swap:{get:["position","{instrument_id}/position","accounts","{instrument_id}/accounts","accounts/{instrument_id}/settings","accounts/{instrument_id}/ledger","orders/{instrument_id}","orders/{instrument_id}/{order_id}","orders/{instrument_id}/{client_oid}","fills","accounts/{instrument_id}/holds","trade_fee","order_algo/{instrument_id}","instruments","instruments/{instrument_id}/depth","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/history/candles","instruments/{instrument_id}/index","rate","instruments/{instrument_id}/open_interest","instruments/{instrument_id}/price_limit","instruments/{instrument_id}/liquidation","instruments/{instrument_id}/funding_time","instruments/{instrument_id}/mark_price","instruments/{instrument_id}/historical_funding_rate"],post:["accounts/{instrument_id}/leverage","order","amend_order/{instrument_id}","orders","cancel_order/{instrument_id}/{order_id}","cancel_order/{instrument_id}/{client_oid}","cancel_batch_orders/{instrument_id}","order_algo","cancel_algos","close_position","cancel_all","order_algo","cancel_algos"]},option:{get:["accounts","position","{underlying}/position","accounts/{underlying}","orders/{underlying}","fills/{underlying}","accounts/{underlying}/ledger","trade_fee","orders/{underlying}/{order_id}","orders/{underlying}/{client_oid}","underlying","instruments/{underlying}","instruments/{underlying}/summary","instruments/{underlying}/summary/{instrument_id}","instruments/{instrument_id}/book","instruments/{instrument_id}/trades","instruments/{instrument_id}/ticker","instruments/{instrument_id}/candles"],post:["order","orders","cancel_order/{underlying}/{order_id}","cancel_order/{underlying}/{client_oid}","cancel_batch_orders/{underlying}","amend_order/{underlying}","amend_batch_orders/{underlying}"]},information:{get:["{currency}/long_short_ratio","{currency}/volume","{currency}/taker","{currency}/sentiment","{currency}/margin"]},index:{get:["{instrument_id}/constituents"]}},fees:{trading:{taker:.0015,maker:.001},spot:{taker:.0015,maker:.001},futures:{taker:5e-4,maker:2e-4},swap:{taker:75e-5,maker:2e-4}},requiredCredentials:{apiKey:!0,secret:!0,password:!0},exceptions:{exact:{1:r,"failure to get a peer from the ring-balancer":a,"Server is busy, please try again.":a,"An unexpected error occurred":r,"System error":r,4010:u,4001:r,4002:r,30001:b,30002:b,30003:b,30004:b,30005:p,30006:b,30007:h,30008:v,30009:r,30010:b,30011:u,30012:b,30013:b,30014:l,30015:b,30016:r,30017:r,30018:r,30019:a,30020:h,30021:h,30022:u,30023:h,30024:k,30025:h,30026:l,30027:b,30028:u,30029:c,30030:a,30031:h,30032:k,30033:h,30034:r,30035:r,30036:r,30037:a,30038:n,30044:v,32001:c,32002:u,32003:m,32004:r,32005:g,32006:g,32007:g,32008:g,32009:g,32010:r,32011:r,32012:r,32013:r,32014:r,32015:r,32016:r,32017:r,32018:r,32019:r,32020:r,32021:r,32022:r,32023:r,32024:r,32025:r,32026:r,32027:r,32028:r,32029:r,32030:g,32031:o,32038:b,32040:r,32044:r,32045:r,32046:r,32047:r,32048:g,32049:r,32050:g,32051:g,32052:r,32053:r,32057:r,32054:r,32055:g,32056:r,32058:r,32059:g,32060:g,32061:g,32062:g,32063:g,32064:r,32065:r,32066:r,32067:r,32068:r,32069:r,32070:r,32071:r,32072:r,32073:r,32074:r,32075:r,32076:r,32077:r,32078:r,32079:r,32080:r,32083:r,33001:u,33002:c,33003:f,33004:r,33005:r,33006:r,33007:r,33008:f,33009:r,33010:r,33011:r,33012:r,33013:g,33014:y,33015:g,33016:r,33017:f,33018:r,33020:r,33021:h,33022:g,33023:r,33024:g,33025:g,33026:r,33027:g,33028:g,33029:g,33034:r,33035:r,33036:r,33037:r,33038:r,33039:r,33040:r,33041:r,33042:r,33043:r,33044:r,33045:r,33046:r,33047:r,33048:r,33049:r,33050:r,33051:r,33059:h,33060:h,33061:r,33062:r,33063:r,33064:r,33065:r,33085:g,21009:r,34001:u,34002:d,34003:r,34004:r,34005:r,34006:r,34007:r,34008:f,34009:r,34010:r,34011:r,34012:r,34013:r,34014:r,34015:r,34016:u,34017:c,34018:b,34019:u,34020:u,34021:d,34022:r,34023:u,34026:_,34036:r,34037:r,34038:r,34039:r,35001:r,35002:r,35003:r,35004:r,35005:b,35008:g,35010:g,35012:g,35014:g,35015:g,35017:r,35019:g,35020:g,35021:g,35022:h,35024:h,35025:f,35026:h,35029:y,35030:g,35031:g,35032:r,35037:r,35039:f,35040:g,35044:r,35046:f,35047:f,35048:r,35049:g,35050:g,35052:f,35053:r,35055:f,35057:r,35058:r,35059:h,35060:h,35061:h,35062:g,35063:g,35064:g,35066:g,35067:g,35068:g,35069:g,35070:g,35071:g,35072:g,35073:g,35074:g,35075:g,35076:g,35077:g,35078:g,35079:g,35080:g,35081:g,35082:g,35083:g,35084:g,35085:g,35086:g,35087:g,35088:g,35089:g,35090:r,35091:r,35092:r,35093:r,35094:r,35095:h,35096:r,35097:r,35098:r,35099:r,35102:_,36001:h,36002:h,36005:r,36101:b,36102:u,36103:u,36104:u,36105:u,36106:u,36107:u,36108:f,36109:u,36201:u,36202:u,36203:g,36204:r,36205:h,36206:h,36207:g,36208:g,36209:g,36210:g,36211:g,36212:g,36213:g,36214:r,36216:y,36217:g,36218:g,36219:g,36220:g,36221:g,36222:g,36223:g,36224:g,36225:g,36226:g,36227:g,36228:g,36229:g,36230:g},broad:{}},precisionMode:S,options:{fetchOHLCV:{type:"Candles"},createMarketBuyOrderRequiresPrice:!0,fetchMarkets:["spot","futures","swap","option"],defaultType:"spot",auth:{time:"public",currencies:"private",instruments:"public",rate:"public","{instrument_id}/constituents":"public"},warnOnFetchCurrenciesWithoutAuthorization:!1},commonCurrencies:{AE:"AET",BOX:"DefiBox",HOT:"Hydro Protocol",HSR:"HC",MAG:"Maggie",SBTC:"Super Bitcoin",TRADE:"Unitrade",YOYO:"YOYOW",WIN:"WinToken"}})}async fetchTime(e={}){const t=await this.generalGetTime(e);return this.parse8601(this.safeString(t,"iso"))}async fetchMarkets(e={}){const t=this.safeValue(this.options,"fetchMarkets");let i=[];for(let s=0;s<t.length;s++){const r=await this.fetchMarketsByType(t[s],e);i=this.arrayConcat(i,r)}return i}parseMarkets(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.parseMarket(e[i]));return t}parseMarket(e){const t=this.safeString(e,"instrument_id");let i="spot",s=!0,r=!1,a=!1,n=!1,o=this.safeString(e,"base_currency"),h=this.safeString(e,"quote_currency");if(void 0!==this.safeNumber(e,"contract_val"))if("option_type"in e){i="option",s=!1,n=!0;const t=this.safeString(e,"underlying").split("-");o=this.safeString(t,0),h=this.safeString(t,1)}else i="swap",s=!1,a=!0,void 0!==this.safeString(e,"alias")&&(a=!1,r=!0,i="futures",o=this.safeString(e,"underlying_index"));const c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(h),u=s?c+"/"+d:t,l=this.safeNumber2(e,"lot_size","trade_increment"),f=this.safeString(e,"tick_size"),p={amount:this.safeNumber(e,"size_increment",l),price:this.parseNumber(f)},m=this.safeString2(e,"min_size","base_min_size"),g=this.parseNumber(m);let y;void 0!==g&&void 0!==f&&(y=this.parseNumber(M.stringMul(f,m)));const b=this.safeValue2(this.fees,i,"trading",{});return this.extend(b,{id:t,symbol:u,base:c,quote:d,baseId:o,quoteId:h,info:e,type:i,spot:s,futures:r,swap:a,option:n,active:!0,precision:p,limits:{amount:{min:g,max:void 0},price:{min:p.price,max:void 0},cost:{min:y,max:void 0}}})}async fetchMarketsByType(e,t={}){if("option"===e){const e=await this.optionGetUnderlying(t);let i=[];for(let t=0;t<e.length;t++){const s=await this.optionGetInstrumentsUnderlying({underlying:e[t]});i=this.arrayConcat(i,s)}return this.parseMarkets(i)}if("spot"===e||"futures"===e||"swap"===e){const i=e+"GetInstruments",s=await this[i](t);return this.parseMarkets(s)}throw new w(this.id+" fetchMarketsByType does not support market type "+e)}async fetchCurrencies(e={}){if(this.checkRequiredCredentials(!1)){const t=await this.accountGetCurrencies(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r),n=1e-8,o=this.safeString(s,"name"),h=this.safeInteger(s,"can_deposit"),c=this.safeInteger(s,"can_withdraw"),d=!(!h||!c);i[a]={id:r,code:a,info:s,type:void 0,name:o,active:d,fee:void 0,precision:n,limits:{amount:{min:void 0,max:void 0},withdraw:{min:this.safeNumber(s,"min_withdrawal"),max:void 0}}}}return i}if(this.options.warnOnFetchCurrenciesWithoutAuthorization)throw new r(this.id+' fetchCurrencies() is a private API endpoint that requires authentication with API keys. Set the API keys on the exchange instance or exchange.options["warnOnFetchCurrenciesWithoutAuthorization"] = false to suppress this warning message.')}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e);let r=s.type+"GetInstrumentsInstrumentId";r+="swap"===s.type?"Depth":"Book";const a={instrument_id:s.id};void 0!==t&&(a.size=t);const n=await this[r](this.extend(a,i)),o=this.parse8601(this.safeString2(n,"timestamp","time"));return this.parseOrderBook(n,e,o)}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"timestamp"));let s;const r=this.safeString(e,"instrument_id");if(r in this.markets_by_id)s=(t=this.markets_by_id[r]).symbol;else if(void 0!==r){const e=r.split("-");if(2===e.length){const[t,i]=e;s=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}else s=r}void 0===s&&void 0!==t&&(s=t.symbol);const a=this.safeNumber(e,"last"),n=this.safeNumber(e,"open_24h");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high_24h"),low:this.safeNumber(e,"low_24h"),bid:this.safeNumber(e,"best_bid"),bidVolume:this.safeNumber(e,"best_bid_size"),ask:this.safeNumber(e,"best_ask"),askVolume:this.safeNumber(e,"best_ask_size"),vwap:void 0,open:n,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"base_volume_24h"),quoteVolume:this.safeNumber(e,"quote_volume_24h"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=i.type+"GetInstrumentsInstrumentIdTicker",r={instrument_id:i.id},a=await this[s](this.extend(r,t));return this.parseTicker(a)}async fetchTickersByType(e,t,i={}){await this.loadMarkets();const s=e+"GetInstrumentsTicker",r=await this[s](i),a={};for(let e=0;e<r.length;e++){const t=this.parseTicker(r[e]);a[t.symbol]=t}return this.filterByArray(a,"symbol",t)}async fetchTickers(e,t={}){const i=this.safeString2(this.options,"fetchTickers","defaultType"),s=this.safeString(t,"type",i);return await this.fetchTickersByType(s,e,this.omit(t,"type"))}parseTrade(e,t){let i;const s=this.safeString(e,"instrument_id");let r,a;if(s in this.markets_by_id)i=(t=this.markets_by_id[s]).symbol,r=t.base,a=t.quote;else if(void 0!==s){const e=s.split("-");if(2===e.length){const[t,s]=e;r=this.safeCurrencyCode(t),a=this.safeCurrencyCode(s),i=r+"/"+a}else i=s}void 0===i&&void 0!==t&&(i=t.symbol,r=t.base,a=t.quote);const n=this.parse8601(this.safeString2(e,"timestamp","created_at")),o=this.safeString(e,"price");let h=this.safeString2(e,"size","qty");h=this.safeString(e,"order_qty",h);const c=this.parseNumber(o),d=this.parseNumber(h),u=this.parseNumber(M.stringMul(o,h));let l=this.safeString2(e,"exec_type","liquidity");"M"===l?l="maker":"T"===l&&(l="taker");const f=this.safeString(e,"side"),p=this.safeNumber(e,"fee");let m;void 0!==p&&(m={cost:-p,currency:"buy"===f?r:a});const g=this.safeString(e,"order_id");return{info:e,timestamp:n,datetime:this.iso8601(n),symbol:i,id:this.safeString2(e,"trade_id","ledger_id"),order:g,type:void 0,takerOrMaker:l,side:f,price:c,amount:d,cost:u,fee:m}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a=r.type+"GetInstrumentsInstrumentIdTrades";(void 0===i||i>100)&&(i=100);const n={instrument_id:r.id,limit:i},o=await this[a](this.extend(n,s));return this.parseTrades(o,r,t,i)}parseOHLCV(e,t){if(Array.isArray(e)){const t=e.length>6?6:5;let i=this.safeValue(e,0);return"string"==typeof i&&(i=this.parse8601(i)),[i,this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,t)]}return[this.parse8601(this.safeString(e,"time")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n=this.parseTimeframe(t),o={instrument_id:a.id,granularity:this.timeframes[t]},h=this.safeValue(this.options,"fetchOHLCV",{}),c=this.safeString(h,"type","Candles"),d=this.safeString(r,"type",c);r=this.omit(r,"type");const u=a.type+"GetInstrumentsInstrumentId"+d;if("Candles"===d){if(void 0!==i)void 0!==s&&(o.end=this.iso8601(this.sum(i,s*n*1e3))),o.start=this.iso8601(i);else if(void 0!==s){const e=this.milliseconds();o.start=this.iso8601(e-s*n*1e3),o.end=this.iso8601(e)}}else if("HistoryCandles"===d){if(a.option)throw new w(this.id+" fetchOHLCV does not have "+d+" for "+a.type+" markets");if(void 0!==i)void 0===s&&(s=300),o.start=this.iso8601(this.sum(i,s*n*1e3)),o.end=this.iso8601(i);else if(void 0!==s){const e=this.milliseconds();o.end=this.iso8601(e-s*n*1e3),o.start=this.iso8601(e)}}const l=await this[u](this.extend(o,r));return this.parseOHLCVs(l,a,t,i,s)}parseAccountBalance(e){const t={info:e,timestamp:void 0,datetime:void 0};for(let i=0;i<e.length;i++){const s=e[i],r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.total=this.safeString(s,"balance"),n.used=this.safeString(s,"hold"),n.free=this.safeString(s,"available"),t[a]=n}return this.parseBalance(t)}parseMarginBalance(e){const t={info:e,timestamp:void 0,datetime:void 0};for(let i=0;i<e.length;i++){const s=e[i],r=this.safeString(s,"instrument_id"),a=this.safeValue(this.markets_by_id,r);let n;if(void 0===a){const[e,t]=r.split("-");n=this.safeCurrencyCode(e)+"/"+this.safeCurrencyCode(t)}else n=a.symbol;const o=this.omit(s,["instrument_id","liquidation_price","product_id","risk_rate","margin_ratio","maint_margin_ratio","tiers"]),h=Object.keys(o),c={};for(let e=0;e<h.length;e++){const t=h[e],i=s[t];if(!(t.indexOf(":")>=0))throw new w(this.id+" margin balance response format has changed!");{const e=t.split(":")[1],s=this.safeCurrencyCode(e),r=this.account();r.total=this.safeString(i,"balance"),r.used=this.safeString(i,"hold"),r.free=this.safeString(i,"available"),c[s]=r}}t[n]=this.parseBalance(c)}return t}parseFuturesBalance(e){const t={info:e,timestamp:void 0,datetime:void 0},i=this.safeValue(e,"info",{}),s=Object.keys(i);for(let e=0;e<s.length;e++){const r=s[e],a=this.safeCurrencyCode(r),n=this.safeValue(i,r,{}),o=this.account(),h=this.safeString(n,"total_avail_balance");if("fixed"===this.safeString(n,"margin_mode")){const e=this.safeValue(n,"contracts",[]);let t=h;for(let i=0;i<e.length;i++){const s=e[i],r=this.safeString(s,"fixed_balance"),a=this.safeString(s,"realized_pnl"),n=this.safeString(s,"margin_frozen"),o=this.safeString(s,"margin_for_unfilled"),h=M.stringSub(M.stringSub(M.stringAdd(r,a),n),o);t=M.stringAdd(t,h)}o.free=t}else{const e=this.safeString(n,"realized_pnl"),t=this.safeString(n,"unrealized_pnl"),i=this.safeString(n,"margin_frozen"),s=this.safeString(n,"margin_for_unfilled"),r=M.stringAdd(M.stringAdd(h,e),t);o.free=M.stringSub(M.stringSub(r,i),s)}o.total=this.safeString(n,"equity"),t[a]=o}return this.parseBalance(t)}parseSwapBalance(e){const t={info:e};let i;const s=this.safeValue(e,"info",[]);for(let e=0;e<s.length;e++){const r=s[e],a=this.safeString(r,"instrument_id");let n=a;a in this.markets_by_id&&(n=this.markets_by_id[a].symbol);const o=this.parse8601(this.safeString(r,"timestamp"));i=void 0===i?o:Math.max(i,o);const h=this.account();h.total=this.safeString(r,"equity"),h.free=this.safeString(r,"total_avail_balance"),t[n]=h}return t.timestamp=i,t.datetime=this.iso8601(i),this.parseBalance(t)}async fetchBalance(e={}){const t=this.safeString2(this.options,"fetchBalance","defaultType"),i=this.safeString(e,"type",t);if(void 0===i)throw new o(this.id+" fetchBalance() requires a type parameter (one of 'account', 'spot', 'margin', 'futures', 'swap')");await this.loadMarkets();const s=i+"Get"+("account"===i?"Wallet":"Accounts"),r=this.omit(e,"type"),a=await this[s](r);return this.parseBalanceByType(i,a)}parseBalanceByType(e,t){if("account"===e||"spot"===e)return this.parseAccountBalance(t);if("margin"===e)return this.parseMarginBalance(t);if("futures"===e)return this.parseFuturesBalance(t);if("swap"===e)return this.parseSwapBalance(t);throw new w(this.id+" fetchBalance does not support the '"+e+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')")}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e);let o={instrument_id:n.id};const h=this.safeString2(a,"client_oid","clientOrderId");let c;if(void 0!==h&&(o.client_oid=h,a=this.omit(a,["client_oid","clientOrderId"])),n.futures||n.swap){const i=n.futures?this.numberToString(s):this.amountToPrecision(e,s);o=this.extend(o,{type:t,size:i});const h=this.safeString(a,"order_type");"market"===t||"4"===h?o.order_type="4":o.price=this.priceToPrecision(e,r),n.futures&&(o.leverage="10"),c=n.type+"PostOrder"}else{const h=this.safeString(a,"margin_trading","1");if(o=this.extend(o,{side:i,type:t,margin_trading:h}),"limit"===t)o.price=this.priceToPrecision(e,r),o.size=this.amountToPrecision(e,s);else if("market"===t)if("buy"===i){let e=this.safeNumber(a,"notional");if(this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){if(void 0!==r)void 0===e&&(e=s*r);else if(void 0===e)throw new g(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'notional' extra parameter (the exchange-specific behaviour)")}else e=void 0===e?s:e;const t=n.precision.price;o.notional=this.decimalToPrecision(e,O,t,this.precisionMode)}else o.size=this.amountToPrecision(e,s);c="2"===h?"marginPostOrders":"spotPostOrders"}const d=await this[c](this.extend(o,a)),u=this.parseOrder(d,n);return this.extend(u,{type:t,side:i})}async cancelOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t);let r;if(s.futures||s.swap)r=s.type;else{const e=this.safeString2(this.options,"cancelOrder","defaultType",s.type);r=this.safeString(i,"type",e)}if(void 0===r)throw new o(this.id+" cancelOrder() requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");let a=r+"PostCancelOrder";const n={instrument_id:s.id};s.futures||s.swap?a+="InstrumentId":a+="s";const h=this.safeString2(i,"client_oid","clientOrderId");void 0!==h?(a+="ClientOid",n.client_oid=h):(a+="OrderId",n.order_id=e);const c=this.omit(i,["type","client_oid","clientOrderId"]),d=await this[a](this.extend(n,c)),u="result"in d?d:this.safeValue(d,s.id,{});return this.parseOrder(u,s)}parseOrderStatus(e){return this.safeString({"-2":"failed","-1":"canceled",0:"open",1:"open",2:"closed",3:"open",4:"canceled"},e,e)}parseOrderSide(e){return this.safeString({1:"buy",2:"sell",3:"sell",4:"buy"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_id"),s=this.parse8601(this.safeString(e,"timestamp"));let r=this.safeString(e,"side");const a=this.safeString(e,"type");let n;"buy"!==r&&"sell"!==r&&(r=this.parseOrderSide(a));const o=this.safeString(e,"instrument_id");n=o in this.markets_by_id?(t=this.markets_by_id[o]).symbol:o,void 0!==t&&void 0===n&&(n=t.symbol);let h=this.safeString(e,"size");const c=this.safeString2(e,"filled_size","filled_qty");let d;void 0!==h&&void 0!==c&&(h=M.stringMax(h,c),d=M.stringMax("0",M.stringSub(h,c))),"market"===a&&(d="0");let u=this.safeString2(e,"filled_notional","funds");const l=this.safeString(e,"price");let f=this.safeString(e,"price_avg");void 0===u?void 0!==c&&void 0!==f&&(u=M.stringMul(f,c)):void 0===f&&void 0!==c&&M.stringGt(c,"0")&&(f=M.stringDiv(u,c));const p=this.parseOrderStatus(this.safeString(e,"state")),m=this.safeNumber(e,"fee");let g;void 0!==m&&(g={cost:m,currency:void 0});let y=this.safeString(e,"client_oid");void 0!==y&&y.length<1&&(y=void 0);const b=this.safeNumber(e,"trigger_price");return this.safeOrder2({info:e,id:i,clientOrderId:y,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:n,type:a,timeInForce:void 0,postOnly:void 0,side:r,price:l,stopPrice:b,average:f,cost:u,amount:h,filled:c,remaining:d,status:p,fee:g,trades:void 0},t)}async fetchOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r=this.safeString2(this.options,"fetchOrder","defaultType",s.type),a=this.safeString(i,"type",r);if(void 0===a)throw new o(this.id+" fetchOrder() requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");let n=a+"GetOrders"+(s.futures||s.swap?"InstrumentId":"");const h={instrument_id:s.id},c=this.safeString(i,"client_oid");void 0!==c?(n+="ClientOid",h.client_oid=c):(n+="OrderId",h.order_id=e);const d=this.omit(i,"type"),u=await this[n](this.extend(h,d));return this.parseOrder(u)}async fetchOrdersByState(e,t,i,s,r={}){if(void 0===t)throw new o(this.id+" fetchOrdersByState() requires a symbol argument");await this.loadMarkets();const a=this.market(t);let n;if(a.futures||a.swap)n=a.type;else{const e=this.safeString2(this.options,"fetchOrder","defaultType",a.type);n=this.safeString(r,"type",e)}if(void 0===n)throw new o(this.id+" fetchOrdersByState() requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");const h={instrument_id:a.id,state:e};let c=n+"GetOrders";(a.futures||a.swap)&&(c+="InstrumentId");const d=this.omit(r,"type"),u=await this[c](this.extend(h,d));let l;if(a.swap||a.futures)l=this.safeValue(u,"order_info",[]);else{l=u;const e=u.length;if(e<1)return[];e>1&&void 0!==this.safeValue(u[1],"before")&&(l=u[0])}return this.parseOrders(l,a,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByState("6",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByState("7",e,t,i,s)}parseDepositAddress(e,t){const i=this.safeString(e,"address");let s=this.safeString2(e,"tag","payment_id");s=this.safeString2(e,"memo","Memo",s);const r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r);return this.checkAddress(i),{currency:a,address:i,tag:s,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=e.split("-"),s={currency:this.currency(i[0]).id},r=await this.accountGetDepositAddress(this.extend(s,t)),a=this.parseDepositAddresses(r),n=this.safeValue(a,e);if(void 0===n)throw new d(this.id+" fetchDepositAddress cannot return nonexistent addresses, you should create withdrawal addresses with the exchange website first");return n}async withdraw(e,t,i,s,a={}){[s,a]=this.handleWithdrawTagAndParams(s,a),this.checkAddress(i),await this.loadMarkets();const n=this.currency(e);s&&(i=i+":"+s);const h=this.safeString(a,"fee");if(void 0===h)throw new o(this.id+" withdraw() requires a 'fee' string parameter, network transaction fee must be ≥ 0. Withdrawals to OKCoin or OKEx are fee-free, please set '0'. Withdrawing to external digital asset address requires network transaction fee.");const c={currency:n.id,to_address:i,destination:"4",amount:this.numberToString(t),fee:h};"password"in a?c.trade_pwd=a.password:"trade_pwd"in a?c.trade_pwd=a.trade_pwd:this.password&&(c.trade_pwd=this.password);const d=this.omit(a,["fee","password","trade_pwd"]);if(!("trade_pwd"in c))throw new r(this.id+" withdraw() requires this.password set on the exchange instance or a password / trade_pwd parameter");const u=await this.accountPostWithdrawal(this.extend(c,d));return{info:u,id:this.safeString(u,"withdrawal_id")}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a,n="accountGetDepositHistory";void 0!==e&&(a=this.currency(e),r.currency=a.id,n+="Currency");const o=await this[n](this.extend(r,s));return this.parseTransactions(o,a,t,i,s)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a,n="accountGetWithdrawalHistory";void 0!==e&&(a=this.currency(e),r.currency=a.id,n+="Currency");const o=await this[n](this.extend(r,s));return this.parseTransactions(o,a,t,i,s)}parseTransactionStatus(e){return this.safeString({"-3":"pending","-2":"canceled","-1":"failed",0:"pending",1:"pending",2:"ok",3:"pending",4:"pending",5:"pending"},e,e)}parseTransaction(e,t){let i,s,r;const a=this.safeString(e,"withdrawal_id"),n=this.safeString(e,"from"),o=this.safeString(e,"to"),h=this.safeString(e,"tag");void 0!==a?(i="withdrawal",s=a,r=o):(s=this.safeString2(e,"payment_id","deposit_id"),i="deposit",r=o);const c=this.safeString(e,"currency"),d=this.safeCurrencyCode(c),u=this.safeNumber(e,"amount"),l=this.parseTransactionStatus(this.safeString(e,"status")),f=this.safeString(e,"txid"),p=this.parse8601(this.safeString(e,"timestamp"));let m;if("deposit"===i)m=0;else if(void 0!==c){const t=this.safeString(e,"fee");if(void 0!==t){const e=c.toLowerCase(),i=t.replace(e,"");m=parseFloat(i)}}return{info:e,id:s,currency:d,amount:u,addressFrom:n,addressTo:o,address:r,tagFrom:void 0,tagTo:h,tag:h,status:l,type:i,updated:void 0,txid:f,timestamp:p,datetime:this.iso8601(p),fee:{currency:d,cost:m}}}parseMyTrade(e,t){const i=this.safeValue(e,1),s=this.safeValue(e,0),r=this.safeString(s,"instrument_id");if(r!==this.safeString(i,"instrument_id"))throw new w(this.id+" parseMyTrade() received unrecognized response format, differing instrument_ids in one fill, the exchange API might have changed, paste your verbose output: https://github.com/ccxt/ccxt/wiki/FAQ#what-is-required-to-get-help");const a=r,n=(t=this.safeMarket(a,t)).symbol,o=t.quoteId;let h,c,d,u;this.safeString(i,"currency")===o?(h=this.safeString(s,"side"),c=this.safeNumber(s,"size"),d=this.safeNumber(i,"size"),u=this.safeString(s,"currency")):(h=this.safeString(i,"side"),c=this.safeNumber(i,"size"),d=this.safeNumber(s,"size"),u=this.safeString(i,"currency"));const l=this.safeString(i,"trade_id"),f=this.safeNumber(i,"price"),p=this.safeNumber(s,"fee"),m=this.safeNumber(i,"fee"),g=this.safeCurrencyCode(this.safeString(s,"currency")),y=this.safeCurrencyCode(this.safeString(i,"currency"));let b,v;void 0!==p&&0!==p?void 0!==m&&0!==m?v=[{cost:-p,currency:g},{cost:-m,currency:y}]:b={cost:-p,currency:g}:b=void 0!==m&&0!==m?{cost:-m,currency:y}:{cost:0,currency:this.safeCurrencyCode(u)};const k=this.parse8601(this.safeString2(i,"timestamp","created_at"));let _=this.safeString2(i,"exec_type","liquidity");"M"===_?_="maker":"T"===_&&(_="taker");const S=this.safeString(i,"order_id"),O={info:e,timestamp:k,datetime:this.iso8601(k),symbol:n,id:l,order:S,type:void 0,takerOrMaker:_,side:h,price:f,amount:c,cost:d,fee:b};return void 0!==v&&(O.fees=v),O}parseMyTrades(e,t,i,s,r={}){const a=this.groupBy(e,"trade_id"),n=Object.keys(a),o=[];for(let e=0;e<n.length;e++){const t=a[n[e]];if(2===t.length){const e=this.parseMyTrade(t);o.push(e)}}let h;return void 0!==t&&(h=t.symbol),this.filterBySymbolSinceLimit(o,h,i,s)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(e);void 0!==i&&i>100&&(i=100);const a={instrument_id:r.id},n=this.safeString2(this.options,"fetchMyTrades","defaultType"),h=this.safeString(s,"type",n),c=this.omit(s,"type"),d=h+"GetFills",u=await this[d](this.extend(a,c));return this.parseMyTrades(u,r,t,i,s)}async fetchOrderTrades(e,t,i,s,r={}){const a={order_id:e};return await this.fetchMyTrades(t,i,s,this.extend(a,r))}async fetchPosition(e,t={}){await this.loadMarkets();const i=this.market(e);let s;const r={instrument_id:i.id},a=i.type;if("futures"===a||"swap"===a)s=a+"GetInstrumentIdPosition";else{if("option"!==a)throw new w(this.id+" fetchPosition() does not support "+a+" market "+e+", supported market types are futures, swap or option");if(void 0===this.safeString(t,"underlying"))throw new o(this.id+" fetchPosition() requires an underlying parameter for "+a+" market "+e);s=a+"GetUnderlyingPosition"}return await this[s](this.extend(r,t))}async fetchPositions(e,t={}){let i;await this.loadMarkets();const s=this.safeString2(this.options,"fetchPositions","defaultType"),r=this.safeString(t,"type",s);if("futures"===r||"swap"===r)i=r+"GetPosition";else{if("option"!==r)throw new w(this.id+" fetchPositions() does not support "+r+" markets, supported market types are futures, swap or option");if(void 0===this.safeString(t,"underlying"))throw new o(this.id+" fetchPositions() requires an underlying parameter for "+r+" markets");i=r+"GetUnderlyingPosition"}return t=this.omit(t,"type"),await this[i](t)}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const r=this.safeString2(this.options,"fetchLedger","defaultType"),a=this.safeString(s,"type",r),n=this.omit(s,"type"),h="account"===a?"":"Accounts";let c="";const d={};let u;if(void 0!==i&&(d.limit=i),"spot"===a){if(void 0===e)throw new o(this.id+" fetchLedger() requires a currency code argument for '"+a+"' markets");c="Currency",u=this.currency(e),d.currency=u.id}else if("futures"===a){if(void 0===e)throw new o(this.id+" fetchLedger() requires an underlying symbol for '"+a+"' markets");c="Underlying";const t=this.market(e),i=this.safeValue(t,"info",{}),s=this.safeString(i,"settlement_currency"),r=this.safeCurrencyCode(s);u=this.currency(r);const n=this.safeString(i,"underlying");d.underlying=n}else if("margin"===a||"swap"===a){if(void 0===e)throw new o(this.id+" fetchLedger() requires a code argument (a market symbol) for '"+a+"' markets");c="InstrumentId";const t=this.market(e);u=this.currency(t.base),d.instrument_id=t.id}else{if("account"!==a)throw new w(this.id+" fetchLedger does not support the '"+a+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')");void 0!==e&&(u=this.currency(e),d.currency=u.id)}const l=a+"Get"+h+c+"Ledger",f=await this[l](this.extend(d,n));if(f.length<1)return[];const p=Array.isArray(f[0]),m="margin"===a&&p?f[0]:f;if("swap"===a){const s=this.parseLedger(m);return this.filterBySymbolSinceLimit(s,e,t,i)}return this.parseLedger(m,u,t,i)}parseLedgerEntryType(e){return this.safeString({transfer:"transfer",trade:"trade",rebate:"rebate",match:"trade",fee:"fee",settlement:"trade",liquidation:"trade",funding:"fee",margin:"margin"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"ledger_id"),s=this.safeValue(e,"details",{}),r=this.safeString(s,"order_id"),a=this.parseLedgerEntryType(this.safeString(e,"type")),n=this.safeCurrencyCode(this.safeString(e,"currency"),t),o=this.safeNumber(e,"amount"),h=this.parse8601(this.safeString(e,"timestamp")),c={cost:this.safeNumber(e,"fee"),currency:n},d=this.safeNumber(e,"balance"),u=this.safeString(e,"instrument_id");let l;return u in this.markets_by_id&&(l=this.markets_by_id[u].symbol),{info:e,id:i,account:void 0,referenceId:r,referenceAccount:void 0,type:a,currency:n,symbol:l,amount:o,before:void 0,after:d,status:"ok",timestamp:h,datetime:this.iso8601(h),fee:c}}sign(e,t="public",i="GET",s={},r,a){const n=Array.isArray(s);let o="/api/"+t+"/"+this.version+"/";o+=n?e:this.implodeParams(e,s);const h=n?s:this.omit(s,this.extractParams(e));let c=this.implodeHostname(this.urls.api.rest)+o;const d=this.getPathAuthenticationType(e);if("public"===d||"information"===d)Object.keys(h).length&&(c+="?"+this.urlencode(h));else if("private"===d){this.checkRequiredCredentials();const e=this.iso8601(this.milliseconds());r={"OK-ACCESS-KEY":this.apiKey,"OK-ACCESS-PASSPHRASE":this.password,"OK-ACCESS-TIMESTAMP":e};let t=e+i+o;if("GET"===i){if(Object.keys(h).length){const e="?"+this.urlencode(h);c+=e,t+=e}}else(n||Object.keys(h).length)&&(t+=a=this.json(h)),r["Content-Type"]="application/json";const s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64");r["OK-ACCESS-SIGN"]=s}return{url:c,method:i,body:a,headers:r}}getPathAuthenticationType(e){if("underlying"===e)return"public";const t=this.safeValue(this.options,"auth",{}),i=this.findBroadlyMatchedKey(t,e);return this.safeString(t,i,"private")}handleErrors(e,t,i,s,n,o,h,c,d){if(!h)return;const u=this.id+" "+o;if(503===e)throw new a(u);const l=this.safeString(h,"message"),f=this.safeString2(h,"code","error_code"),p=void 0!==l&&""!==l,m=void 0!==f&&"0"!==f;if(p&&(this.throwExactlyMatchedException(this.exceptions.exact,l,u),this.throwBroadlyMatchedException(this.exceptions.broad,l,u)),m&&this.throwExactlyMatchedException(this.exceptions.exact,f,u),m||p)throw new r(u)}}},62597:(e,t,i)=>{"use strict";const s=i(58579);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"okex5",alias:!0})}}},30757:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r}=i(73449),a=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"paymium",name:"Paymium",countries:["FR","EU"],rateLimit:2e3,version:"v1",has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87153930-f0f02200-c2c0-11ea-9c0a-40337375ae89.jpg",api:"https://paymium.com/api",www:"https://www.paymium.com",fees:"https://www.paymium.com/page/help/fees",doc:["https://github.com/Paymium/api-documentation","https://www.paymium.com/page/developers"],referral:"https://www.paymium.com/page/sign-up?referral=eDAzPoRQFMvaAB8sf-qj"},api:{public:{get:["countries","data/{currency}/ticker","data/{currency}/trades","data/{currency}/depth","bitcoin_charts/{id}/trades","bitcoin_charts/{id}/depth"]},private:{get:["user","user/addresses","user/addresses/{address}","user/orders","user/orders/{uuid}","user/price_alerts","merchant/get_payment/{uuid}"],post:["user/addresses","user/orders","user/withdrawals","user/email_transfers","user/payment_requests","user/price_alerts","merchant/create_payment"],delete:["user/orders/{uuid}","user/orders/{uuid}/cancel","user/price_alerts/{id}"]}},markets:{"BTC/EUR":{id:"eur",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"btc",quoteId:"eur",type:"spot",spot:!0}},fees:{trading:{maker:this.parseNumber("0.002"),taker:this.parseNumber("0.002")}}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUser(e),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){const r=s[e],a=this.currency(r).id,n="balance_"+a;if(n in t){const e=this.account(),s="locked_"+a;e.free=this.safeString(t,n),e.used=this.safeString(t,s),i[r]=e}}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currency:this.marketId(e)},r=await this.publicGetDataCurrencyDepth(this.extend(s,i));return this.parseOrderBook(r,e,void 0,"bids","asks","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();const i={currency:this.marketId(e)},s=await this.publicGetDataCurrencyTicker(this.extend(i,t)),r=this.safeTimestamp(s,"at"),a=this.safeNumber(s,"vwap"),n=this.safeNumber(s,"volume");let o;void 0!==n&&void 0!==a&&(o=n*a);const h=this.safeNumber(s,"price");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(s,"high"),low:this.safeNumber(s,"low"),bid:this.safeNumber(s,"bid"),bidVolume:void 0,ask:this.safeNumber(s,"ask"),askVolume:void 0,vwap:a,open:this.safeNumber(s,"open"),close:h,last:h,previousClose:void 0,change:void 0,percentage:this.safeNumber(s,"variation"),average:void 0,baseVolume:n,quoteVolume:o,info:s}}parseTrade(e,t){const i=this.safeTimestamp(e,"created_at_int"),s=this.safeString(e,"uuid");let r;void 0!==t&&(r=t.symbol);const n=this.safeString(e,"side"),o=this.safeString(e,"price"),h="traded_"+t.base.toLowerCase(),c=this.safeString(e,h),d=this.parseNumber(o),u=this.parseNumber(c),l=this.parseNumber(a.stringMul(o,c));return{info:e,id:s,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,side:n,takerOrMaker:void 0,price:d,amount:u,cost:l,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currency:r.id},n=await this.publicGetDataCurrencyTrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n={type:this.capitalize(t)+"Order",currency:this.marketId(e),direction:i,amount:s};"market"!==t&&(n.price=r);const o=await this.privatePostUserOrders(this.extend(n,a));return{info:o,id:o.uuid}}async cancelOrder(e,t,i={}){const s={uuid:e};return await this.privateDeleteUserOrdersUuidCancel(this.extend(s,i))}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();const e=this.nonce().toString();let t=e+n;if(r={"Api-Key":this.apiKey,"Api-Nonce":e},"POST"===i)Object.keys(o).length&&(t+=a=this.json(o),r["Content-Type"]="application/json");else if(Object.keys(o).length){const e=this.urlencode(o);t+=e,n+="?"+e}r["Api-Signature"]=this.hmac(this.encode(t),this.encode(this.secret))}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o&&void 0!==this.safeValue(o,"errors"))throw new r(this.id+" "+this.json(o))}}},50788:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,BadSymbol:a,AuthenticationError:n,InsufficientFunds:o,InvalidOrder:h,ArgumentsRequired:c,OrderNotFound:d,BadRequest:u,PermissionDenied:l,AccountSuspended:f,CancelPending:p,DDoSProtection:m,DuplicateOrderId:g}=i(73449),{TICK_SIZE:y}=i(62115),b=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"phemex",name:"Phemex",countries:["CN"],rateLimit:100,version:"v1",certified:!1,pro:!0,hostname:"api.phemex.com",has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchBorrowRate:!1,fetchBorrowRates:!1,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchIndexOHLCV:!1,fetchMarkets:!0,fetchMarkOHLCV:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchPositions:!0,fetchPremiumIndexOHLCV:!1,fetchTicker:!0,fetchTrades:!0,fetchWithdrawals:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/85225056-221eb600-b3d7-11ea-930d-564d2690e3f6.jpg",test:{v1:"https://testnet-api.phemex.com/v1",public:"https://testnet-api.phemex.com/exchange/public",private:"https://testnet-api.phemex.com"},api:{v1:"https://{hostname}/v1",public:"https://{hostname}/exchange/public",private:"https://{hostname}"},www:"https://phemex.com",doc:"https://github.com/phemex/phemex-api-docs",fees:"https://phemex.com/fees-conditions",referral:{url:"https://phemex.com/register?referralCode=EDNVJ",discount:.1}},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","3h":"10800","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800","1M":"2592000"},api:{public:{get:["cfg/v2/products","products","nomics/trades","md/kline"]},v1:{get:["md/orderbook","md/trade","md/ticker/24hr","md/ticker/24hr/all","md/spot/ticker/24hr","md/spot/ticker/24hr/all","exchange/public/products"]},private:{get:["spot/orders/active","spot/orders","spot/wallets","exchange/spot/order","exchange/spot/order/trades","accounts/accountPositions","accounts/positions","orders/activeList","exchange/order/list","exchange/order","exchange/order/trade","phemex-user/users/children","phemex-user/wallets/v2/depositAddress","exchange/margins/transfer","exchange/wallets/confirm/withdraw","exchange/wallets/withdrawList","exchange/wallets/depositList","exchange/wallets/v2/depositAddress"],post:["spot/orders","orders","positions/assign","exchange/wallets/transferOut","exchange/wallets/transferIn","exchange/margins","exchange/wallets/createWithdraw","exchange/wallets/cancelWithdraw","exchange/wallets/createWithdrawAddress"],put:["spot/orders","orders/replace","positions/leverage","positions/riskLimit"],delete:["spot/orders","spot/orders/all","orders/cancel","orders","orders/all"]}},precisionMode:y,fees:{trading:{tierBased:!1,percentage:!0,taker:this.parseNumber("0.001"),maker:this.parseNumber("0.001")}},requiredCredentials:{apiKey:!0,secret:!0},exceptions:{exact:{412:u,6001:u,19999:u,10001:g,10002:d,10003:p,10004:p,10005:p,11001:o,11002:h,11003:o,11004:h,11005:o,11006:r,11007:r,11008:r,11009:r,11010:o,11011:h,11012:h,11013:h,11014:h,11015:h,11016:u,11017:r,11018:r,11019:r,11020:r,11021:r,11022:f,11023:r,11024:r,11025:u,11026:r,11027:a,11028:a,11029:r,11030:r,11031:m,11032:m,11033:g,11034:h,11035:h,11036:h,11037:h,11038:h,11039:h,11040:h,11041:h,11042:h,11043:h,11044:h,11045:h,11046:h,11047:h,11048:h,11049:h,11050:h,11051:h,11052:h,11053:h,11054:h,11055:h,11056:h,11057:h,11058:h,11059:h,11060:h,11061:p,11062:h,11063:h,11064:h,11065:h,11066:h,11067:h,11068:h,11069:r,11070:a,11071:h,11072:h,11073:h,11074:h,11075:h,11076:h,11077:h,11078:h,11079:h,11080:h,11081:h,11082:o,11083:h,11084:h,11085:g,11086:h,11087:h,11088:h,11089:h,11090:h,11091:h,11092:h,11093:h,11094:h,11095:h,11096:h,11097:u,11098:u,11099:r,11100:o,11101:o,11102:u,11103:u,11104:u,11105:o,11106:o,11107:r,11108:h,11109:h,11110:h,11111:h,11112:h,11113:u,11114:h,11115:h,30018:u,39996:l},broad:{"Failed to find api-key":n,"Missing required parameter":u,"API Signature verification failed":n}},options:{"x-phemex-request-expiry":60,createOrderByQuoteRequiresPrice:!0,networks:{TRC20:"TRX",ERC20:"ETH"},defaultNetworks:{USDT:"ETH"}}})}parseSafeNumber(e){if(void 0===e)return e;let t=e.split(",");return e=t.join(""),t=e.split(" "),this.safeNumber(t,0)}parseSwapMarket(e){const t=this.safeString(e,"symbol"),i=this.safeString2(e,"baseCurrency","contractUnderlyingAssets"),s=this.safeString(e,"quoteCurrency"),r=this.safeCurrencyCode(i),a=this.safeCurrencyCode(s),n=this.safeStringLower(e,"type");let o=!1;this.safeString(e,"settleCurrency")!==s&&(o=!0);const h=!o;let c;c=h?r+"/"+a+":"+a:r+"/"+a+":"+r;const d={amount:this.safeNumber(e,"lotSize"),price:this.safeNumber(e,"tickSize")},u=this.safeInteger(e,"priceScale"),l=this.safeInteger(e,"ratioScale"),f=this.safeInteger(e,"valueScale"),p=this.safeString(e,"minPriceEp"),m=this.safeString(e,"maxPriceEp"),g=this.safeString(e,"makerFeeRateEr"),y=this.safeString(e,"takerFeeRateEr"),b=this.parseNumber(this.fromEn(g,l)),v=this.parseNumber(this.fromEn(y,l)),w={amount:{min:d.amount,max:void 0},price:{min:this.parseNumber(this.fromEn(p,u)),max:this.parseNumber(this.fromEn(m,u))},cost:{min:void 0,max:this.parseNumber(this.safeString(e,"maxOrderQty"))}};return{id:t,symbol:c,base:r,quote:a,baseId:i,quoteId:s,info:e,type:n,spot:!1,swap:!0,linear:h,inverse:o,active:"Listed"===this.safeString(e,"status"),taker:v,maker:b,priceScale:u,valueScale:f,ratioScale:l,precision:d,contractSize:this.safeString(e,"contractSize"),limits:w}}parseSpotMarket(e){const t=this.safeStringLower(e,"type"),i=this.safeString(e,"symbol"),s=this.safeString(e,"quoteCurrency"),r=this.safeString(e,"baseCurrency"),a=this.safeNumber(e,"defaultTakerFee"),n=this.safeNumber(e,"defaultMakerFee"),o={amount:this.parseSafeNumber(this.safeString(e,"baseTickSize")),price:this.parseSafeNumber(this.safeString(e,"quoteTickSize"))},h={amount:{min:o.amount,max:this.parseSafeNumber(this.safeString(e,"maxBaseOrderSize"))},price:{min:o.price,max:void 0},cost:{min:this.parseSafeNumber(this.safeString(e,"minOrderValue")),max:this.parseSafeNumber(this.safeString(e,"maxOrderValue"))}},c=this.safeCurrencyCode(r),d=this.safeCurrencyCode(s);return{id:i,symbol:c+"/"+d,base:c,quote:d,baseId:r,quoteId:s,info:e,type:t,spot:!0,swap:!1,linear:void 0,inverse:void 0,active:"Listed"===this.safeString(e,"status"),taker:a,maker:n,precision:o,priceScale:8,valueScale:8,ratioScale:8,contractSize:void 0,limits:h}}async fetchMarkets(e={}){const t=await this.publicGetCfgV2Products(e),i=await this.v1GetExchangePublicProducts(e),s=this.safeValue(i,"data",[]),r=this.safeValue(t,"data",{}),a=this.safeValue(r,"products",[]),n=this.safeValue(r,"riskLimits",[]),o=this.indexBy(n,"symbol"),h=this.indexBy(s,"symbol"),c=[];for(let e=0;e<a.length;e++){let t=a[e];if("perpetual"===this.safeStringLower(t,"type")){const e=this.safeString(t,"symbol"),i=this.safeValue(o,e,{});t=this.extend(t,i);const s=this.safeValue(h,e,{});t=this.extend(t,s),t=this.parseSwapMarket(t)}else t=this.parseSpotMarket(t);c.push(t)}return c}async fetchCurrencies(e={}){const t=await this.publicGetCfgV2Products(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"currencies",[]),r={};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"currency"),a=this.safeString(t,"name"),n=this.safeCurrencyCode(i),o=this.safeString(t,"valueScale"),h=parseInt(o),c=this.safeString(t,"minValueEv"),d=this.safeString(t,"maxValueEv");let u,l,f;if(void 0!==h){const e=this.parsePrecision(o);f=this.parseNumber(e),u=this.parseNumber(b.stringMul(c,e)),l=this.parseNumber(b.stringMul(d,e))}r[n]={id:i,info:t,code:n,name:a,active:void 0,fee:void 0,precision:f,limits:{amount:{min:u,max:l},withdraw:{min:void 0,max:void 0}},valueScale:h}}return r}parseBidAsk(e,t=0,i=1,s){if(void 0===s)throw new c(this.id+" parseBidAsk() requires a market argument");let r=this.safeString(e,i);return s.spot&&(r=this.fromEv(r,s)),[this.parseNumber(this.fromEp(this.safeString(e,t),s)),this.parseNumber(r)]}parseOrderBook(e,t,i,s="bids",r="asks",a=0,n=1,o){const h={symbol:t,timestamp:i,datetime:this.iso8601(i),nonce:void 0},c=[s,r];for(let t=0;t<c.length;t++){const i=c[t],s=[],r=this.safeValue(e,i);for(let e=0;e<r.length;e++)s.push(this.parseBidAsk(r[e],a,n,o));h[i]=s}return h[s]=this.sortBy(h[s],0,!0),h[r]=this.sortBy(h[r],0),h}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={symbol:s.id},a=await this.v1GetMdOrderbook(this.extend(r,i)),n=this.safeValue(a,"result",{}),o=this.safeValue(n,"book",{}),h=this.safeIntegerProduct(n,"timestamp",1e-6),c=this.parseOrderBook(o,e,h,"bids","asks",0,1,s);return c.nonce=this.safeInteger(n,"sequence"),c}toEn(e,t){const i=e.toString(),s=new b(i);s.decimals=s.decimals-t,s.reduce();const r=s.toString();return parseInt(parseFloat(r))}toEv(e,t){return void 0===e||void 0===t?e:this.toEn(e,t.valueScale)}toEp(e,t){return void 0===e||void 0===t?e:this.toEn(e,t.priceScale)}fromEn(e,t){if(void 0===e)return;const i=new b(e);return i.decimals=this.sum(i.decimals,t),i.reduce(),i.toString()}fromEp(e,t){return void 0===e||void 0===t?e:this.fromEn(e,this.safeInteger(t,"priceScale"))}fromEv(e,t){return void 0===e||void 0===t?e:this.fromEn(e,this.safeInteger(t,"valueScale"))}fromEr(e,t){return void 0===e||void 0===t?e:this.fromEn(e,this.safeInteger(t,"ratioScale"))}parseOHLCV(e,t){let i;return i=void 0!==t&&t.spot?this.parseNumber(this.fromEv(this.safeString(e,7),t)):this.safeNumber(e,7),[this.safeTimestamp(e,0),this.parseNumber(this.fromEp(this.safeString(e,3),t)),this.parseNumber(this.fromEp(this.safeString(e,4),t)),this.parseNumber(this.fromEp(this.safeString(e,5),t)),this.parseNumber(this.fromEp(this.safeString(e,6),t)),i]}async fetchOHLCV(e,t="1m",i,s,r={}){const a={resolution:this.timeframes[t]},n=this.parseTimeframe(t),o=this.seconds();if(void 0!==i)void 0===s&&(s=2e3),i=parseInt(i/1e3),a.from=i,a.to=Math.min(o,this.sum(i,n*s));else{if(void 0===s)throw new c(this.id+" fetchOHLCV() requires a since argument, or a limit argument, or both");s=Math.min(s,2e3),a.from=o-n*this.sum(s,1),a.to=o}await this.loadMarkets();const h=this.market(e);a.symbol=h.id;const d=await this.publicGetMdKline(this.extend(a,r)),u=this.safeValue(d,"data",{}),l=this.safeValue(u,"rows",[]);return this.parseOHLCVs(l,h,t,i,s)}parseTicker(e,t){const i=this.safeString(e,"symbol"),s=(t=this.safeMarket(i,t)).symbol,r=this.safeIntegerProduct(e,"timestamp",1e-6),a=this.fromEp(this.safeString(e,"lastEp"),t),n=this.parseNumber(a),o=this.parseNumber(this.fromEv(this.safeString(e,"turnoverEv"),t));let h,c,d,u,l=this.safeNumber(e,"volume");void 0===l&&(l=this.parseNumber(this.fromEv(this.safeString(e,"volumeEv"),t))),void 0!==t&&t.spot&&(h=this.vwap(l,o));const f=this.fromEp(this.safeString(e,"openEp"),t),p=this.parseNumber(f);return void 0!==f&&void 0!==a&&(c=this.parseNumber(b.stringSub(a,f)),u=this.parseNumber(b.stringDiv(b.stringAdd(a,f),"2")),d=this.parseNumber(b.stringMul(b.stringSub(b.stringDiv(a,f),"1"),"100"))),{symbol:s,timestamp:r,datetime:this.iso8601(r),high:this.parseNumber(this.fromEp(this.safeString(e,"highEp"),t)),low:this.parseNumber(this.fromEp(this.safeString(e,"lowEp"),t)),bid:this.parseNumber(this.fromEp(this.safeString(e,"bidEp"),t)),bidVolume:void 0,ask:this.parseNumber(this.fromEp(this.safeString(e,"askEp"),t)),askVolume:void 0,vwap:h,open:p,close:n,last:n,previousClose:void 0,change:c,percentage:d,average:u,baseVolume:l,quoteVolume:o,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=i.spot?"v1GetMdSpotTicker24hr":"v1GetMdTicker24hr",a=await this[r](this.extend(s,t)),n=this.safeValue(a,"result",{});return this.parseTicker(n,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},n=await this.v1GetMdTrade(this.extend(a,s)),o=this.safeValue(n,"result",{}),h=this.safeValue(o,"trades",[]);return this.parseTrades(h,r,t,i)}parseTrade(e,t){let i,s,r,a,n,o,h,c;const d=this.safeString(e,"symbol"),u=(t=this.safeMarket(d,t)).symbol;let l,f;if(Array.isArray(e)){const o=e.length;r=this.safeIntegerProduct(e,0,1e-6),o>4&&(a=this.safeString(e,o-4)),n=this.safeStringLower(e,o-3),i=this.fromEp(this.safeString(e,o-2),t),s=this.fromEv(this.safeString(e,o-1),t)}else{r=this.safeIntegerProduct(e,"transactTimeNs",1e-6),a=this.safeString2(e,"execId","execID"),l=this.safeString(e,"orderID"),n=this.safeStringLower(e,"side"),h=this.parseOrderType(this.safeString(e,"ordType")),"MakerFill"===this.safeString(e,"execStatus")&&(f="maker"),i=this.fromEp(this.safeString(e,"execPriceEp"),t),s=this.fromEv(this.safeString(e,"execBaseQtyEv"),t),s=this.safeString(e,"execQty",s),o=this.fromEv(this.safeString2(e,"execQuoteQtyEv","execValueEv"),t);const d=this.fromEv(this.safeString(e,"execFeeEv"),t);if(void 0!==d){const i=this.fromEr(this.safeString(e,"feeRateEr"),t);let s;if(t.spot)s="buy"===n?t.base:t.quote;else{const e=this.safeValue(t,"info");if(void 0!==e){const t=this.safeString(e,"settlementCurrency");s=this.safeCurrencyCode(t)}}c={cost:this.parseNumber(d),rate:this.parseNumber(i),currency:s}}}return this.safeTrade({info:e,id:a,symbol:u,timestamp:r,datetime:this.iso8601(r),order:l,type:h,side:n,takerOrMaker:f,price:i,amount:s,cost:o,fee:c},t)}parseSpotBalance(e){let t;const i={info:e},s=this.safeValue(e,"data",[]);for(let e=0;e<s.length;e++){const r=s[e],a=this.safeString(r,"currency"),n=this.safeCurrencyCode(a),o=this.safeValue(this.currencies,n,{}),h=this.safeInteger(o,"valueScale",8),c=this.account(),d=this.safeString(r,"balanceEv"),u=this.safeString(r,"lockedTradingBalanceEv"),l=this.safeString(r,"lockedWithdrawEv"),f=this.fromEn(d,h),p=this.fromEn(u,h),m=this.fromEn(l,h),g=b.stringAdd(p,m),y=this.safeIntegerProduct(r,"lastUpdateTimeNs",1e-6);t=void 0===t?y:Math.max(t,y),c.total=f,c.used=g,i[n]=c}return i.timestamp=t,i.datetime=this.iso8601(t),this.parseBalance(i)}parseSwapBalance(e){const t={info:e},i=this.safeValue(e,"data",{}),s=this.safeValue(i,"account",{}),r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r),n=this.currency(a),o=this.account(),h=this.safeString(s,"accountBalanceEv"),c=this.safeString(s,"totalUsedBalanceEv"),d=this.safeInteger(n,"valueScale",8);return o.total=this.fromEn(h,d),o.used=this.fromEn(c,d),t[a]=o,this.parseBalance(t)}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString2(this.options,"defaultType","fetchBalance","spot"),i=this.safeString(e,"type",t);let s="privateGetSpotWallets";const r={};if("swap"===i){const t=this.safeString(e,"code");if(void 0!==t){const i=this.currency(t);r.currency=i.id,e=this.omit(e,"code")}else if(void 0===this.safeString(e,"currency"))throw new c(this.id+" fetchBalance() requires a code parameter or a currency parameter for "+i+" type");s="privateGetAccountsAccountPositions"}e=this.omit(e,"type");const a=await this[s](this.extend(r,e));return"swap"===i?this.parseSwapBalance(a):this.parseSpotBalance(a)}parseOrderStatus(e){return this.safeString({Created:"open",Untriggered:"open",Deactivated:"closed",Triggered:"open",Rejected:"rejected",New:"open",PartiallyFilled:"open",Filled:"closed",Canceled:"canceled"},e,e)}parseOrderType(e){return this.safeString({Limit:"limit",Market:"market"},e,e)}parseTimeInForce(e){return this.safeString({GoodTillCancel:"GTC",PostOnly:"PO",ImmediateOrCancel:"IOC",FillOrKill:"FOK"},e,e)}parseSpotOrder(e,t){const i=this.safeString(e,"orderID");let s=this.safeString(e,"clOrdID");void 0!==s&&s.length<1&&(s=void 0);const r=this.safeString(e,"symbol"),a=this.safeSymbol(r,t),n=this.parseNumber(this.omitZero(this.fromEp(this.safeString(e,"priceEp"),t))),o=this.parseNumber(this.omitZero(this.fromEv(this.safeString(e,"baseQtyEv"),t))),h=this.parseNumber(this.omitZero(this.fromEv(this.safeString(e,"leavesBaseQtyEv"),t))),c=this.parseNumber(this.omitZero(this.fromEv(this.safeString(e,"cumBaseQtyEv"),t))),d=this.parseNumber(this.omitZero(this.fromEv(this.safeString(e,"quoteQtyEv"),t))),u=this.parseNumber(this.omitZero(this.fromEp(this.safeString(e,"avgPriceEp"),t))),l=this.parseOrderStatus(this.safeString(e,"ordStatus")),f=this.safeStringLower(e,"side"),p=this.parseOrderType(this.safeString(e,"ordType")),m=this.safeIntegerProduct2(e,"actionTimeNs","createTimeNs",1e-6);let g;const y=this.parseNumber(this.fromEv(this.safeString(e,"cumFeeEv"),t));void 0!==y&&(g={cost:y,currency:void 0});const b=this.parseTimeInForce(this.safeString(e,"timeInForce")),v=this.parseNumber(this.omitZero(this.fromEp(this.safeString(e,"stopPxEp",t)))),w="PO"===b;return this.safeOrder({info:e,id:i,clientOrderId:s,timestamp:m,datetime:this.iso8601(m),lastTradeTimestamp:void 0,symbol:a,type:p,timeInForce:b,postOnly:w,side:f,price:n,stopPrice:v,amount:o,cost:d,average:u,filled:c,remaining:h,status:l,fee:g,trades:void 0})}parseSwapOrder(e,t){const i=this.safeString(e,"orderID");let s=this.safeString(e,"clOrdID");void 0!==s&&s.length<1&&(s=void 0);const r=this.safeString(e,"symbol"),a=this.safeSymbol(r,t),n=this.parseOrderStatus(this.safeString(e,"ordStatus")),o=this.safeStringLower(e,"side"),h=this.parseOrderType(this.safeString(e,"orderType")),c=this.parseNumber(this.fromEp(this.safeString(e,"priceEp"),t)),d=this.safeNumber(e,"orderQty"),u=this.safeNumber(e,"cumQty"),l=this.safeNumber(e,"leavesQty"),f=this.safeIntegerProduct(e,"actionTimeNs",1e-6),p=this.safeNumber(e,"cumValue");let m=this.safeIntegerProduct(e,"transactTimeNs",1e-6);0===m&&(m=void 0);const g=this.parseTimeInForce(this.safeString(e,"timeInForce")),y=this.safeNumber(e,"stopPx"),b="PO"===g;return{info:e,id:i,clientOrderId:s,datetime:this.iso8601(f),timestamp:f,lastTradeTimestamp:m,symbol:a,type:h,timeInForce:g,postOnly:b,side:o,price:c,stopPrice:y,amount:d,filled:u,remaining:l,cost:p,average:void 0,status:n,fee:void 0,trades:void 0}}parseOrder(e,t){return"closedPnl"in e?this.parseSwapOrder(e,t):this.parseSpotOrder(e,t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e);i=this.capitalize(i),t=this.capitalize(t);const o={symbol:n.id,side:i,ordType:t};if(n.spot){let e=this.safeValue(a,"qtyType","ByBase");if("Market"!==t&&"Stop"!==t&&"MarketIfTouched"!==t||void 0!==r&&(e="ByQuote"),o.qtyType=e,"ByQuote"===e){let t=this.safeNumber(a,"cost");if(a=this.omit(a,"cost"),this.options.createOrderByQuoteRequiresPrice)if(void 0!==r)t=s*r;else if(void 0===t)throw new c(this.id+" createOrder() "+e+" requires a price argument or a cost parameter");t=void 0===t?s:t;const i=t.toString();o.quoteQtyEv=this.toEv(i,n)}else{const e=s.toString();o.baseQtyEv=this.toEv(e,n)}}else n.swap&&(o.orderQty=parseInt(s));if("Limit"===t){const e=r.toString();o.priceEp=this.toEp(e,n)}const h=this.safeString2(a,"stopPx","stopPrice");void 0!==h&&(o.stopPxEp=this.toEp(h,n)),a=this.omit(a,["stopPx","stopPrice"]);const d=n.spot?"privatePostSpotOrders":"privatePostOrders",u=await this[d](this.extend(o,a)),l=this.safeValue(u,"data",{});return this.parseOrder(l,n)}async editOrder(e,t,i,s,r,a,n={}){if(void 0===t)throw new c(this.id+" editOrder() requires a symbol argument");if(void 0!==i)throw new c(this.id+" editOrder() type changing is not implemented. Try to cancel & recreate order for that purpose");if(void 0!==s)throw new c(this.id+" editOrder() side changing is not implemented. Try to cancel & recreate order for that purpose");await this.loadMarkets();const o=this.market(t),h={symbol:o.id},d=this.safeString2(n,"clientOrderId","clOrdID");n=this.omit(n,["clientOrderId","clOrdID"]),void 0!==d?h.clOrdID=d:h.orderID=e,void 0!==a&&(h.priceEp=this.toEp(a,o));const u=this.safeString(n,"baseQtyEv");n=this.omit(n,["baseQtyEv"]),void 0!==u?h.baseQtyEV=u:void 0!==r&&(h.baseQtyEV=this.toEv(r,o));const l=this.safeString2(n,"stopPx","stopPrice");void 0!==l&&(h.stopPxEp=this.toEp(l,o)),n=this.omit(n,["stopPx","stopPrice"]);const f=o.spot?"privatePutSpotOrders":"privatePutOrdersReplace",p=await this[f](this.extend(h,n)),m=this.safeValue(p,"data",{});return this.parseOrder(m,o)}async cancelOrder(e,t,i={}){if(void 0===t)throw new c(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={symbol:s.id},a=this.safeString2(i,"clientOrderId","clOrdID");i=this.omit(i,["clientOrderId","clOrdID"]),void 0!==a?r.clOrdID=a:r.orderID=e;const n=s.spot?"privateDeleteSpotOrders":"privateDeleteOrdersCancel",o=await this[n](this.extend(r,i)),h=this.safeValue(o,"data",{});return this.parseOrder(h,s)}async cancelAllOrders(e,t={}){if(void 0===e)throw new c(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const i={},s=this.market(e);let r="privateDeleteSpotOrdersAll";return s.swap&&(r="privateDeleteOrdersAll"),i.symbol=s.id,await this[r](this.extend(i,t))}async fetchOrder(e,t,i={}){if(void 0===t)throw new c(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r=s.spot?"privateGetSpotOrdersActive":"privateGetExchangeOrder",a={symbol:s.id},n=this.safeString2(i,"clientOrderId","clOrdID");i=this.omit(i,["clientOrderId","clOrdID"]),void 0!==n?a.clOrdID=n:a.orderID=e;const o=await this[r](this.extend(a,i)),h=this.safeValue(o,"data",{});let u=h;if(Array.isArray(h)){if(h.length<1)throw new d(void 0!==n?this.id+" fetchOrder "+t+" order with clientOrderId "+n+" not found":this.id+" fetchOrder "+t+" order with id "+e+" not found");u=this.safeValue(h,0,{})}return this.parseOrder(u,s)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a=r.spot?"privateGetSpotOrders":"privateGetExchangeOrderList",n={symbol:r.id};void 0!==t&&(n.start=t),void 0!==i&&(n.limit=i);const o=await this[a](this.extend(n,s)),h=this.safeValue(o,"data",{}),d=this.safeValue(h,"rows",[]);return this.parseOrders(d,r,t,i)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a=r.spot?"privateGetSpotOrders":"privateGetOrdersActiveList",n={symbol:r.id};let o;try{o=await this[a](this.extend(n,s))}catch(e){if(e instanceof d)return[]}const h=this.safeValue(o,"data",{});if(Array.isArray(h))return this.parseOrders(h,r,t,i);{const e=this.safeValue(h,"rows",[]);return this.parseOrders(e,r,t,i)}}async fetchClosedOrders(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchClosedOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a=r.spot?"privateGetExchangeSpotOrder":"privateGetExchangeOrderList",n={symbol:r.id};void 0!==t&&(n.start=t),void 0!==i&&(n.limit=i);const o=await this[a](this.extend(n,s)),h=this.safeValue(o,"data",{});if(Array.isArray(h))return this.parseOrders(h,r,t,i);{const e=this.safeValue(h,"rows",[]);return this.parseOrders(e,r,t,i)}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchClosedOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a=r.spot?"privateGetExchangeSpotOrderTrades":"privateGetExchangeOrderTrade",n={symbol:r.id};void 0!==t&&(n.start=t),r.swap&&void 0!==i&&(n.limit=i);const o=await this[a](this.extend(n,s)),h=this.safeValue(o,"data",{}),d=this.safeValue(h,"rows",[]);return this.parseTrades(d,r,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},r=this.safeValue(this.options,"defaultNetworks"),a=this.safeStringUpper(r,e),n=this.safeValue(this.options,"networks",{});let o=this.safeStringUpper(t,"network",a);o=this.safeString(n,o,o),void 0===o?s.chainName=i.id:(s.chainName=o,t=this.omit(t,"network"));const h=await this.privateGetPhemexUserWalletsV2DepositAddress(this.extend(s,t)),c=this.safeValue(h,"data",{}),d=this.safeString(c,"address"),u=this.safeString(c,"tag");return this.checkAddress(d),{currency:e,address:d,tag:u,network:void 0,info:h}}async fetchDeposits(e,t,i,s={}){let r;await this.loadMarkets(),void 0!==e&&(r=this.currency(e));const a=await this.privateGetExchangeWalletsDepositList(s),n=this.safeValue(a,"data",{});return this.parseTransactions(n,r,t,i)}async fetchWithdrawals(e,t,i,s={}){let r;await this.loadMarkets(),void 0!==e&&(r=this.currency(e));const a=await this.privateGetExchangeWalletsWithdrawList(s),n=this.safeValue(a,"data",{});return this.parseTransactions(n,r,t,i)}parseTransactionStatus(e){return this.safeString({Success:"ok",Succeed:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"address"),r=void 0,a=this.safeString(e,"txHash"),n=this.safeString(e,"currency"),o=(t=this.safeCurrency(n,t)).code,h=this.safeInteger2(e,"createdAt","submitedAt");let c=this.safeStringLower(e,"type");const d=this.parseNumber(this.fromEn(this.safeString(e,"feeEv"),t.valueScale));let u;void 0!==d&&(c="withdrawal",u={cost:d,currency:o});const l=this.parseTransactionStatus(this.safeString(e,"status")),f=this.parseNumber(this.fromEn(this.safeString(e,"amountEv"),t.valueScale));return{info:e,id:i,txid:a,timestamp:h,datetime:this.iso8601(h),address:s,addressTo:s,addressFrom:void 0,tag:r,tagTo:r,tagFrom:void 0,type:c,amount:f,currency:o,status:l,updated:void 0,fee:u}}async fetchPositions(e,t={}){await this.loadMarkets();const i=this.safeString(t,"code"),s={};if(void 0===i){if(void 0===this.safeString(t,"currency"))throw new c(this.id+" fetchPositions() requires a currency parameter or a code parameter")}else{const e=this.currency(i);t=this.omit(t,"code"),s.currency=e.id}const r=await this.privateGetAccountsAccountPositions(this.extend(s,t)),a=this.safeValue(r,"data",{});return this.safeValue(a,"positions",[])}sign(e,t="public",i="GET",s={},r,a){const n=this.omit(s,this.extractParams(e)),o="/"+this.implodeParams(e,s);let h=o,c="";if("GET"!==i&&"DELETE"!==i&&"PUT"!==i||Object.keys(n).length&&(c=this.urlencodeWithArrayRepeat(n),h+="?"+c),"private"===t){this.checkRequiredCredentials();const e=this.seconds(),t=this.safeInteger(this.options,"x-phemex-request-expiry",60),n=this.sum(e,t).toString();r={"x-phemex-access-token":this.apiKey,"x-phemex-request-expiry":n};let h="";"POST"===i&&(h=this.json(s),a=h,r["Content-Type"]="application/json");const d=o+c+n+h;r["x-phemex-request-signature"]=this.hmac(this.encode(d),this.encode(this.secret))}return h=this.implodeHostname(this.urls.api[t])+h,{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;const d=this.safeValue(o,"error",o),u=this.safeString(d,"code"),l=this.safeString(d,"msg");if(void 0!==u&&"0"!==u){const e=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,u,e),this.throwBroadlyMatchedException(this.exceptions.broad,l,e),new r(e)}}}},67497:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ExchangeNotAvailable:a,RequestTimeout:n,AuthenticationError:o,PermissionDenied:h,DDoSProtection:c,InsufficientFunds:d,OrderNotFound:u,InvalidOrder:l,AccountSuspended:f,CancelPending:p,InvalidNonce:m,OnMaintenance:g,BadSymbol:y}=i(73449),b=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"poloniex",name:"Poloniex",countries:["US"],rateLimit:1e3,certified:!1,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createDepositAddress:!0,createMarketOrder:void 0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrder:"emulated",fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFees:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"5m":300,"15m":900,"30m":1800,"2h":7200,"4h":14400,"1d":86400},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766817-e9456312-5ee6-11e7-9b3c-b628ca5626a5.jpg",api:{public:"https://poloniex.com/public",private:"https://poloniex.com/tradingApi"},www:"https://www.poloniex.com",doc:"https://docs.poloniex.com",fees:"https://poloniex.com/fees",referral:"https://poloniex.com/signup?c=UBFZJRPJ"},api:{public:{get:["return24hVolume","returnChartData","returnCurrencies","returnLoanOrders","returnOrderBook","returnTicker","returnTradeHistory"]},private:{post:["buy","cancelLoanOffer","cancelOrder","cancelAllOrders","closeMarginPosition","createLoanOffer","generateNewAddress","getMarginPosition","marginBuy","marginSell","moveOrder","returnActiveLoans","returnAvailableAccountBalances","returnBalances","returnCompleteBalances","returnDepositAddresses","returnDepositsWithdrawals","returnFeeInfo","returnLendingHistory","returnMarginAccountSummary","returnOpenLoanOffers","returnOpenOrders","returnOrderTrades","returnOrderStatus","returnTradableBalances","returnTradeHistory","sell","toggleAutoRenew","transferBalance","withdraw"]}},fees:{trading:{feeSide:"get",maker:this.parseNumber("0.0009"),taker:this.parseNumber("0.0009")},funding:{}},limits:{amount:{min:1e-6,max:void 0},price:{min:1e-8,max:1e9},cost:{min:0,max:1e9}},precision:{amount:8,price:8},commonCurrencies:{AIR:"AirCoin",APH:"AphroditeCoin",BCC:"BTCtalkcoin",BCHABC:"BCHABC",BDG:"Badgercoin",BTM:"Bitmark",CON:"Coino",GOLD:"GoldEagles",GPUC:"GPU",HOT:"Hotcoin",ITC:"Information Coin",KEY:"KEYCoin",MASK:"NFTX Hashmasks Index",PLX:"ParallaxCoin",REPV2:"REP",STR:"XLM",SOC:"SOCC",TRADE:"Unitrade",XAP:"API Coin",USDTTRON:"USDT",USDTETH:"USDT"},options:{networks:{ERC20:"ETH",TRX:"TRON",TRC20:"TRON"},limits:{cost:{min:{BTC:1e-4,ETH:1e-4,USDT:1,TRX:100,BNB:.06,USDC:1,USDJ:1,TUSD:1e-4,DAI:1,PAX:1,BUSD:1}}}},exceptions:{exact:{"You may only place orders that reduce your position.":l,"Invalid order number, or you are not the person who placed the order.":u,"Permission denied":h,"Permission denied.":h,"Connection timed out. Please try again.":n,"Internal error. Please try again.":a,"Currently in maintenance mode.":g,"Order not found, or you are not the person who placed it.":u,"Invalid API key/secret pair.":o,"Please do not make more than 8 API calls per second.":c,"Rate must be greater than zero.":l,"Invalid currency pair.":y,"Invalid currencyPair parameter.":y,"Trading is disabled in this market.":y,"Invalid orderNumber parameter.":u,"Order is beyond acceptable bounds.":l},broad:{"Total must be at least":l,"This account is frozen.":f,"This account is locked.":f,"Not enough":d,"Nonce must be greater":m,"You have already called cancelOrder or moveOrder on this order.":p,"Amount must be at least":l,"is either completed or does not exist":u,"Error pulling ":r}}})}parseOHLCV(e,t){return[this.safeTimestamp(e,"date"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"quoteVolume")]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={currencyPair:a.id,period:this.timeframes[t]};if(void 0===i)n.end=this.seconds(),n.start=void 0===s?n.end-this.parseTimeframe("1w"):n.end-s*this.parseTimeframe(t);else if(n.start=parseInt(i/1e3),void 0!==s){const e=this.sum(n.start,s*this.parseTimeframe(t));n.end=e}const o=await this.publicGetReturnChartData(this.extend(n,r));return this.parseOHLCVs(o,a,t,i,s)}async loadMarkets(e=!1,t={}){const i=await super.loadMarkets(e,t);return(void 0===this.safeValue(this.options,"currenciesByNumericId")||e)&&(this.options.currenciesByNumericId=this.indexBy(this.currencies,"numericId")),i}async fetchMarkets(e={}){const t=await this.publicGetReturnTicker(e),i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){const r=i[e],a=t[r],[n,o]=r.split("_"),h=this.safeCurrencyCode(o),c=this.safeCurrencyCode(n),d=h+"/"+c,u=this.extend(this.limits,{cost:{min:this.safeValue(this.options.limits.cost.min,c)}}),l="1"!==this.safeString(a,"isFrozen"),f=this.safeInteger(a,"id"),p={price:8,amount:8};s.push({id:r,numericId:f,symbol:d,baseId:o,quoteId:n,base:h,quote:c,type:"spot",spot:!0,active:l,precision:p,limits:u,info:a})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostReturnCompleteBalances(this.extend({account:"all"},e)),i={info:t,timestamp:void 0,datetime:void 0},s=Object.keys(t);for(let e=0;e<s.length;e++){const r=s[e],a=this.safeValue(t,r,{}),n=this.safeCurrencyCode(r),o=this.account();o.free=this.safeString(a,"available"),o.used=this.safeString(a,"onOrders"),i[n]=o}return this.parseBalance(i)}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privatePostReturnFeeInfo(e);return{info:t,maker:this.safeNumber(t,"makerFee"),taker:this.safeNumber(t,"takerFee"),withdraw:{},deposit:{}}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currencyPair:this.marketId(e)};void 0!==t&&(s.depth=t);const r=await this.publicGetReturnOrderBook(this.extend(s,i)),a=this.parseOrderBook(r,e);return a.nonce=this.safeInteger(r,"seq"),a}async fetchOrderBooks(e,t,i={}){await this.loadMarkets();const s={currencyPair:"all"};void 0!==t&&(s.depth=t);const r=await this.publicGetReturnOrderBook(this.extend(s,i)),a=Object.keys(r),n={};for(let e=0;e<a.length;e++){const t=a[e];let i;if(t in this.markets_by_id)i=this.markets_by_id[t].symbol;else{const[e,s]=t.split("_");i=this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(e)}const s=this.parseOrderBook(r[t],i);s.nonce=this.safeInteger(r[t],"seq"),n[i]=s}return n}parseTicker(e,t){const i=this.milliseconds();let s,r,a,n;t&&(s=t.symbol);const o=this.safeNumber(e,"last"),h=this.safeNumber(e,"percentChange");return-1!==h&&(r=o/this.sum(1,h),a=o-r,n=this.sum(o,r)/2),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high24hr"),low:this.safeNumber(e,"low24hr"),bid:this.safeNumber(e,"highestBid"),bidVolume:void 0,ask:this.safeNumber(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:r,close:o,last:o,previousClose:void 0,change:a,percentage:100*h,average:n,baseVolume:this.safeNumber(e,"quoteVolume"),quoteVolume:this.safeNumber(e,"baseVolume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetReturnTicker(t),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){const t=s[e];let a,n;if(t in this.markets_by_id)n=this.markets_by_id[t],a=n.symbol;else{const[e,i]=t.split("_");a=this.safeCurrencyCode(i)+"/"+this.safeCurrencyCode(e),n={symbol:a}}const o=i[t];r[a]=this.parseTicker(o,n)}return this.filterByArray(r,"symbol",e)}async fetchCurrencies(e={}){const t=await this.publicGetReturnCurrencies(e),i=Object.keys(t),s={};for(let e=0;e<i.length;e++){const r=i[e],a=t[r],n=8,o="1e-8",h=this.safeCurrencyCode(r),c=0===a.delisted&&!a.disabled,d=this.safeInteger(a,"id"),u=this.safeNumber(a,"txFee");s[h]={id:r,numericId:d,code:h,info:a,name:a.name,active:c,fee:u,precision:n,limits:{amount:{min:this.parseNumber(o),max:void 0},withdraw:{min:u,max:void 0}}}}return s}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=(await this.publicGetReturnTicker(t))[i.id];return this.parseTicker(s,i)}parseTrade(e,t){const i=this.safeString2(e,"globalTradeID","tradeID"),s=this.safeString(e,"orderNumber"),r=this.parse8601(this.safeString(e,"date"));let a;if(!t&&"currencyPair"in e){const i=this.safeString(e,"currencyPair");if(i in this.markets_by_id)t=this.markets_by_id[i];else{const[e,t]=i.split("_");a=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(e)}}void 0===a&&void 0!==t&&(a=t.symbol);const n=this.safeString(e,"type");let o;const h=this.safeString(e,"rate"),c=this.safeString(e,"amount"),d=this.parseNumber(h),u=this.parseNumber(c);let l,f=this.safeString(e,"total");void 0===f?(f=b.stringMul(h,c),l=this.parseNumber(f)):l=this.parseNumber(f);const p=this.safeString(e,"feeDisplay");if(void 0!==p){const e=p.split(" "),t=this.safeNumber(e,0);if(void 0!==t){const i=this.safeString(e,1),s=this.safeCurrencyCode(i);let r=this.safeString(e,2);if(void 0!==r){r=r.replace("(","");const e=r.split("%");r=this.safeString(e,0),r=parseFloat(r)/100}o={cost:t,currency:s,rate:r}}}else{const i=this.safeString(e,"fee");if(void 0!==i&&void 0!==t){const e="buy"===n?t.base:t.quote,s="buy"===n?c:f,r=b.stringDiv(i,s);o={cost:this.parseNumber(i),currency:e,rate:this.parseNumber(r)}}}let m;return void 0!==this.safeNumber(e,"takerAdjustment")&&(m="taker"),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:a,order:s,type:"limit",side:n,takerOrMaker:m,price:d,amount:u,cost:l,fee:o}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currencyPair:r.id};void 0!==t&&(a.start=parseInt(t/1e3),a.end=this.seconds());const n=await this.publicGetReturnTradeHistory(this.extend(a,s));return this.parseTrades(n,r,t,i)}async fetchMyTrades(e,t,i,s={}){let r;await this.loadMarkets(),void 0!==e&&(r=this.market(e));const a={currencyPair:r?r.id:"all"};void 0!==t&&(a.start=parseInt(t/1e3),a.end=this.sum(this.seconds(),1)),void 0!==i&&(a.limit=parseInt(i));const n=await this.privatePostReturnTradeHistory(this.extend(a,s));let o=[];if(void 0!==r)o=this.parseTrades(n,r);else if(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];let s;if(i in this.markets_by_id){s=this.markets_by_id[i];const e=this.parseTrades(n[i],s);for(let t=0;t<e.length;t++)o.push(e[t])}else{const[e,t]=i.split("_"),s=this.safeCurrencyCode(t),r=this.safeCurrencyCode(e),a=s+"/"+r,h=n[i];for(let e=0;e<h.length;e++){const t={symbol:a,base:s,quote:r};o.push(this.parseTrade(h[e],t))}}}}return this.filterBySinceLimit(o,t,i)}parseOrderStatus(e){return this.safeString({Open:"open","Partially filled":"open"},e,e)}parseOrder(e,t){let i,s=this.safeInteger(e,"timestamp");void 0===s&&(s=this.parse8601(this.safeString(e,"date")));const r=this.safeString(e,"currencyPair");if(void 0!==r)if(r in this.markets_by_id)t=this.markets_by_id[r];else{const[e,t]=r.split("_");i=this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(e)}let a;void 0===i&&void 0!==t&&(i=t.symbol);let n=this.safeValue(e,"resultingTrades");Array.isArray(n)||(n=this.safeValue(n,this.safeString(t,"id",r))),void 0!==n&&(a=this.parseTrades(n,t));const o=this.safeNumber2(e,"price","rate");let h,c=this.safeNumber(e,"amount"),d=this.safeNumber(e,"startingAmount"),u=0;void 0!==d?void 0!==c&&(h=d-c,void 0!==o&&(u=h*o)):d=c;let l,f,p=this.parseOrderStatus(this.safeString(e,"status"));if(void 0===h&&void 0!==a){h=0,u=0;const e=a.length;if(e>0){f=a[0].timestamp;for(let t=0;t<e;t++){const e=a[t],i=e.amount,s=e.price;h=this.sum(h,i),u=this.sum(u,s*i),f=Math.max(f,e.timestamp)}}void 0!==d&&(c=Math.max(d-h,0),h>=d&&(p="closed"))}void 0!==h&&void 0!==u&&h>0&&(l=u/h);let m=this.safeString(e,"type");const g=this.safeString(e,"side",m);m===g&&(m=void 0);const y=this.safeString(e,"orderNumber");let b;const v=this.safeNumber(e,"fee");if(void 0!==v){let e;void 0!==t&&(e="buy"===g?t.base:t.quote),b={cost:v,currency:e}}return{info:e,id:y,clientOrderId:this.safeString(e,"clientOrderId"),timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:f,status:p,symbol:i,type:m,timeInForce:void 0,postOnly:void 0,side:g,price:o,stopPrice:void 0,cost:u,average:l,amount:d,filled:h,remaining:c,trades:a,fee:b}}parseOpenOrders(e,t,i){for(let s=0;s<e.length;s++){const r=e[s],a=this.extend(r,{status:"open",type:"limit",side:r.type,price:r.rate});i.push(this.parseOrder(a,t))}return i}async fetchOpenOrders(e,t,i,s={}){let r;await this.loadMarkets(),void 0!==e&&(r=this.market(e));const a={currencyPair:r?r.id:"all"},n=await this.privatePostReturnOpenOrders(this.extend(a,s)),o={status:"open"};if(void 0===r){const e=Object.keys(n);let s=[];for(let t=0;t<e.length;t++){const i=e[t],r=n[i],a=this.markets_by_id[i];s=this.arrayConcat(s,this.parseOrders(r,a,void 0,void 0,o))}return this.filterBySinceLimit(s,t,i)}return this.parseOrders(n,r,t,i,o)}async createOrder(e,t,i,s,a,n={}){if("market"===t)throw new r(this.id+" createOrder() does not accept market orders");await this.loadMarkets();const o="privatePost"+this.capitalize(i),h=this.market(e);s=this.amountToPrecision(e,s);const c={currencyPair:h.id,rate:this.priceToPrecision(e,a),amount:s},d=this.safeString(n,"clientOrderId");void 0!==d&&(c.clientOrderId=d,n=this.omit(n,"clientOrderId"));const u=this.milliseconds(),l=await this[o](this.extend(c,n));return this.parseOrder(this.extend({timestamp:u,status:"open",type:t,side:i,price:a,amount:s},l),h)}async editOrder(e,t,i,s,r,a,n={}){await this.loadMarkets(),a=parseFloat(a);const o={orderNumber:e,rate:this.priceToPrecision(t,a)};void 0!==r&&(o.amount=this.amountToPrecision(t,r));const h=await this.privatePostMoveOrder(this.extend(o,n));return this.parseOrder(h)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={},r=this.safeValue(i,"clientOrderId");return void 0===r?s.orderNumber=e:s.clientOrderId=r,i=this.omit(i,"clientOrderId"),await this.privatePostCancelOrder(this.extend(s,i))}async cancelAllOrders(e,t={}){const i={};let s;return void 0!==e&&(s=this.market(e),i.currencyPair=s.id),await this.privatePostCancelAllOrders(this.extend(i,t))}async fetchOpenOrder(e,t,i={}){await this.loadMarkets();const s={orderNumber:e=e.toString()},r=await this.privatePostReturnOrderStatus(this.extend(s,i)),a=this.safeValue(r.result,e);if(void 0===a)throw new u(this.id+" order id "+e+" not found");return this.parseOrder(a)}async fetchClosedOrder(e,t,i={}){await this.loadMarkets();const s={orderNumber:e},r=await this.privatePostReturnOrderTrades(this.extend(s,i)),a=this.parseTrades(r),n=this.safeValue(a,0);if(void 0===n)throw new u(this.id+" order id "+e+" not found");t=this.safeString(n,"symbol",t);const o=this.safeString(n,"side"),h=this.safeNumber(n,"timestamp");return e=this.safeValue(n.info,"globalTradeID",e),this.safeOrder({info:r,id:e,clientOrderId:this.safeValue(n,"clientOrderId"),timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:void 0,status:"closed",symbol:t,type:this.safeString(n,"type"),timeInForce:void 0,postOnly:void 0,side:o,price:void 0,stopPrice:void 0,cost:void 0,average:void 0,amount:void 0,filled:void 0,remaining:void 0,trades:a,fee:void 0})}async fetchOrderStatus(e,t,i={}){await this.loadMarkets();const s=await this.fetchOpenOrders(t,void 0,void 0,i);return e in this.indexBy(s,"id")?"open":"closed"}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();const a={orderNumber:e},n=await this.privatePostReturnOrderTrades(this.extend(a,r));return this.parseTrades(n)}async createDepositAddress(e,t={}){let i,s;await this.loadMarkets(),e in this.currencies?(s=this.currency(e),i=s.id):i=e;const r={currency:i},a=await this.privatePostGenerateNewAddress(this.extend(r,t));let n,o;if(1===a.success&&(n=this.safeString(a,"response")),this.checkAddress(n),void 0!==s){const e=this.safeString(s.info,"depositAddress");void 0!==e&&(o=n,n=e)}return{currency:e,address:n,tag:o,info:a}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=await this.privatePostReturnDepositAddresses(t);let s,r;e in this.currencies?(r=this.currency(e),s=r.id):s=e;let a,n=this.safeString(i,s);if(this.checkAddress(n),void 0!==r){const e=this.safeString(r.info,"depositAddress");void 0!==e&&(a=n,n=e)}return{currency:e,address:n,tag:a,network:void 0,info:i}}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,amount:t,address:i};void 0!==s&&(a.paymentId=s);const n=this.safeValue(this.options,"networks",{});let o=this.safeStringUpper(r,"network");o=this.safeString(n,o,o),void 0!==o&&(a.currency+=o,r=this.omit(r,"network"));const h=await this.privatePostWithdraw(this.extend(a,r));return{info:h,id:this.safeString(h,"withdrawalNumber")}}async fetchTransactionsHelper(e,t,i,s={}){await this.loadMarkets();const r=this.seconds(),a={start:void 0!==t?parseInt(t/1e3):r-31104e4,end:r};return void 0!==i&&(a.limit=i),await this.privatePostReturnDepositsWithdrawals(this.extend(a,s))}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r=await this.fetchTransactionsHelper(e,t,i,s);let a;void 0!==e&&(a=this.currency(e));const n=this.safeValue(r,"withdrawals",[]),o=this.safeValue(r,"deposits",[]),h=this.parseTransactions(n,a,t,i),c=this.parseTransactions(o,a,t,i),d=this.arrayConcat(c,h);return this.filterByCurrencySinceLimit(this.sortBy(d,"timestamp"),e,t,i)}async fetchWithdrawals(e,t,i,s={}){const r=await this.fetchTransactionsHelper(e,t,i,s);let a;void 0!==e&&(a=this.currency(e));const n=this.safeValue(r,"withdrawals",[]),o=this.parseTransactions(n,a,t,i);return this.filterByCurrencySinceLimit(o,e,t,i)}async fetchDeposits(e,t,i,s={}){const r=await this.fetchTransactionsHelper(e,t,i,s);let a;void 0!==e&&(a=this.currency(e));const n=this.safeValue(r,"deposits",[]),o=this.parseTransactions(n,a,t,i);return this.filterByCurrencySinceLimit(o,e,t,i)}parseTransactionStatus(e){return this.safeString({COMPLETE:"ok","AWAITING APPROVAL":"pending",PENDING:"pending",PROCESSING:"pending","COMPLETE ERROR":"failed"},e,e)}parseTransaction(e,t){const i=this.safeTimestamp(e,"timestamp"),s=this.safeString(e,"currency"),r=this.safeCurrencyCode(s);let a=this.safeString(e,"status","pending"),n=this.safeString(e,"txid");if(void 0!==a){const e=a.split(": "),t=e.length;a=e[0],t>1&&void 0===n&&(n=e[1]),a=this.parseTransactionStatus(a)}const o="withdrawalNumber"in e?"withdrawal":"deposit",h=this.safeString(e,"type",o),c=this.safeString2(e,"withdrawalNumber","depositNumber");let d=this.safeNumber(e,"amount");const u=this.safeString(e,"address"),l=this.safeString(e,"paymentID"),f=this.safeNumber(e,"fee",0);return"withdrawal"===h&&(d-=f),{info:e,id:c,currency:r,amount:d,address:u,tag:l,status:a,type:h,updated:void 0,txid:n,timestamp:i,datetime:this.iso8601(i),fee:{currency:r,cost:f}}}async fetchPosition(e,t={}){await this.loadMarkets();const i={currencyPair:this.market(e).id};return await this.privatePostGetMarginPosition(this.extend(i,t))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t];const o=this.extend({command:e},s);return"public"===t?n+="?"+this.urlencode(o):(this.checkRequiredCredentials(),o.nonce=this.nonce(),a=this.urlencode(o),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}),{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o&&"error"in o){const e=o.error,t=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new r(t)}}}},96818:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ExchangeNotAvailable:a,BadResponse:n,BadRequest:o,InvalidOrder:h,InsufficientFunds:c,AuthenticationError:d,ArgumentsRequired:u,InvalidAddress:l,RateLimitExceeded:f,DDoSProtection:p,BadSymbol:m}=i(73449),{TRUNCATE:g,TICK_SIZE:y}=i(62115),b=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"probit",name:"ProBit",countries:["SC","KR"],rateLimit:50,has:{cancelOrder:!0,CORS:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,signIn:!0,withdraw:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","10m":"10m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","6h":"6h","12h":"12h","1d":"1D","1w":"1W","1M":"1M"},version:"v1",urls:{logo:"https://user-images.githubusercontent.com/51840849/79268032-c4379480-7ea2-11ea-80b3-dd96bb29fd0d.jpg",api:{accounts:"https://accounts.probit.com",public:"https://api.probit.com/api/exchange",private:"https://api.probit.com/api/exchange"},www:"https://www.probit.com",doc:["https://docs-en.probit.com","https://docs-ko.probit.com"],fees:"https://support.probit.com/hc/en-us/articles/360020968611-Trading-Fees",referral:"https://www.probit.com/r/34608773"},api:{public:{get:{market:1,currency:1,currency_with_platform:1,time:1,ticker:1,order_book:1,trade:1,candle:1}},private:{post:{new_order:2,cancel_order:1,withdrawal:2},get:{balance:1,order:1,open_order:1,order_history:1,trade_history:1,deposit_address:1}},accounts:{post:{token:1}}},fees:{trading:{tierBased:!1,percentage:!0,maker:this.parseNumber("0.002"),taker:this.parseNumber("0.002")}},exceptions:{exact:{UNAUTHORIZED:d,INVALID_ARGUMENT:o,TRADING_UNAVAILABLE:a,NOT_ENOUGH_BALANCE:c,NOT_ALLOWED_COMBINATION:o,INVALID_ORDER:h,RATE_LIMIT_EXCEEDED:f,MARKET_UNAVAILABLE:a,INVALID_MARKET:m,MARKET_CLOSED:m,MARKET_NOT_FOUND:m,INVALID_CURRENCY:o,TOO_MANY_OPEN_ORDERS:p,DUPLICATE_ADDRESS:l,invalid_grant:d}},requiredCredentials:{apiKey:!0,secret:!0},precisionMode:y,options:{createMarketBuyOrderRequiresPrice:!0,timeInForce:{limit:"gtc",market:"ioc"},networks:{BEP20:"BSC",ERC20:"ETH",TRC20:"TRON",TRX:"TRON"}},commonCurrencies:{AUTO:"Cube",BCC:"BCC",BDP:"BidiPass",BIRD:"Birdchain",BTCBEAR:"BEAR",BTCBULL:"BULL",CBC:"CryptoBharatCoin",CHE:"Chellit",DIP:"Dipper",EPS:"Epanus",FX:"Fanzy",GDT:"Gorilla Diamond",GOGOL:"GOL",GOL:"Goldofir",GRB:"Global Reward Bank",HBC:"Hybrid Bank Cash",LBK:"Legal Block",ORC:"Oracle System",ROOK:"Reckoon",SOC:"Soda Coin",SST:"SocialSwap",TCT:"Top Coin Token",TPAY:"Tetra Pay",UNI:"UNICORN Token",UNISWAP:"UNI"}})}async fetchMarkets(e={}){const t=await this.publicGetMarket(e),i=this.safeValue(t,"data",[]),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"id"),a=this.safeString(t,"base_currency_id"),n=this.safeString(t,"quote_currency_id"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c=o+"/"+h,d=!this.safeValue(t,"closed",!1),u=this.safeString(t,"quantity_precision"),l=this.safeString(t,"cost_precision"),f=this.parsePrecision(u),p=this.parsePrecision(l),m={amount:this.parseNumber(f),price:this.safeNumber(t,"price_increment"),cost:this.parseNumber(p)},g=this.safeString(t,"taker_fee_rate"),y=b.stringDiv(g,"100"),v=this.safeString(t,"maker_fee_rate"),w=b.stringDiv(v,"100");s.push({id:r,info:t,symbol:c,base:o,quote:h,baseId:a,quoteId:n,type:"spot",spot:!0,active:d,precision:m,taker:this.parseNumber(y),maker:this.parseNumber(w),limits:{amount:{min:this.safeNumber(t,"min_quantity"),max:this.safeNumber(t,"max_quantity")},price:{min:this.safeNumber(t,"min_price"),max:this.safeNumber(t,"max_price")},cost:{min:this.safeNumber(t,"min_cost"),max:this.safeNumber(t,"max_cost")}}})}return s}async fetchCurrencies(e={}){const t=await this.publicGetCurrencyWithPlatform(e),i=this.safeValue(t,"data"),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"id"),a=this.safeCurrencyCode(r),n=this.safeValue(t,"display_name"),o=this.safeString(n,"en-us"),h=this.safeValue(t,"platform",[]),c=this.sortBy(h,"priority"),d=this.safeValue(c,0,{}),u=this.safeInteger(d,"precision"),l=this.safeValue(d,"deposit_suspended"),f=this.safeValue(d,"withdrawal_suspended"),p=!(l&&f),m=this.safeValue(d,"withdrawal_fee",{}),g=[];for(let e=0;e<m.length;e++){const t=m[e],i=this.safeNumber(t,"amount"),s=this.safeInteger(t,"priority");void 0!==i&&void 0!==s&&g.push(t)}const y=this.sortBy(g,"priority"),b=this.safeValue(y,0,{}),v=this.safeNumber(b,"amount");s[a]={id:r,code:a,info:t,name:o,active:p,fee:v,precision:u,limits:{amount:{min:Math.pow(10,-u),max:Math.pow(10,u)},deposit:{min:this.safeNumber(d,"min_deposit_amount"),max:void 0},withdraw:{min:this.safeNumber(d,"min_withdrawal_amount"),max:void 0}}}}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i={info:t,timestamp:void 0,datetime:void 0},s=this.safeValue(t,"data");for(let e=0;e<s.length;e++){const t=s[e],r=this.safeString(t,"currency_id"),a=this.safeCurrencyCode(r),n=this.account();n.total=this.safeString(t,"total"),n.free=this.safeString(t,"available"),i[a]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market_id:this.market(e).id},r=await this.publicGetOrderBook(this.extend(s,i)),a=this.safeValue(r,"data",[]),n=this.groupBy(a,"side");return this.parseOrderBook(n,e,void 0,"buy","sell","price","quantity")}async fetchTickers(e,t={}){await this.loadMarkets();const i={};if(void 0!==e){const t=this.marketIds(e);i.market_ids=t.join(",")}const s=await this.publicGetTicker(this.extend(i,t)),r=this.safeValue(s,"data",[]);return this.parseTickers(r,e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market_ids:i.id},r=await this.publicGetTicker(this.extend(s,t)),a=this.safeValue(r,"data",[]),o=this.safeValue(a,0);if(void 0===o)throw new n(this.id+" fetchTicker() returned an empty response");return this.parseTicker(o,i)}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"time")),s=this.safeString(e,"market_id"),r=this.safeSymbol(s,t,"-"),a=this.safeNumber(e,"last"),n=this.safeNumber(e,"change"),o=this.safeNumber(e,"base_volume"),h=this.safeNumber(e,"quote_volume"),c=this.vwap(o,h);return this.safeTicker({symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:c,open:void 0,close:a,last:a,previousClose:void 0,change:n,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:h,info:e},t)}async fetchMyTrades(e,t,i,s={}){let r;await this.loadMarkets();const a={limit:100,start_time:this.iso8601(0),end_time:this.iso8601(this.milliseconds())};void 0!==e&&(r=this.market(e),a.market_id=r.id),void 0!==t&&(a.start_time=this.iso8601(t)),void 0!==i&&(a.limit=i);const n=await this.privateGetTradeHistory(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseTrades(o,r,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market_id:r.id,limit:100,start_time:"1970-01-01T00:00:00.000Z",end_time:this.iso8601(this.milliseconds())};void 0!==t&&(a.start_time=this.iso8601(t)),void 0!==i&&(a.limit=i);const n=await this.publicGetTrade(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseTrades(o,r,t,i)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"time")),s=this.safeString(e,"id");let r;if(void 0!==s){const e=s.split(":");r=this.safeString(e,0)}r=this.safeString(e,"market_id",r);const a=this.safeSymbol(r,t,"-"),n=this.safeString(e,"side"),o=this.safeString(e,"price"),h=this.safeString(e,"quantity"),c=this.parseNumber(o),d=this.parseNumber(h),u=this.parseNumber(b.stringMul(o,h)),l=this.safeString(e,"order_id"),f=this.safeNumber(e,"fee_amount");let p;if(void 0!==f){const t=this.safeString(e,"fee_currency_id");p={cost:f,currency:this.safeCurrencyCode(t)}}return{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:a,order:l,type:void 0,side:n,takerOrMaker:void 0,price:c,amount:d,cost:u,fee:p}}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.parse8601(this.safeString(t,"data"))}normalizeOHLCVTimestamp(e,t,i=!1){const s=this.parseTimeframe(t);if("1M"===t){const t=this.iso8601(e).split("-"),s=this.safeString(t,0);let r=this.safeInteger(t,1);return i&&(r=this.sum(r,1)),r=r<10?"0"+r.toString():r.toString(),s+"-"+r+"-01T00:00:00.000Z"}if("1w"===t){const t=259200,r=(e=parseInt(e/1e3))-t,a=Math.floor(r/s);let n=this.sum(t,a*s);return i&&(n=this.sum(n,s)),this.iso8601(1e3*n)}return e=parseInt(e/1e3),e=s*parseInt(e/s),i&&(e=this.sum(e,s)),this.iso8601(1e3*e)}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n=this.timeframes[t];s=void 0===s?100:s;let o=this.sum(s,1);o=Math.min(1e3,o);const h={market_ids:a.id,interval:n,sort:"asc",limit:o},c=this.milliseconds(),d=this.parseTimeframe(t);let l=i,f=c;if(void 0===i){if(void 0===s)throw new u(this.id+" fetchOHLCV() requires either a since argument or a limit argument");l=c-s*d*1e3}else f=void 0===s?c:this.sum(i,this.sum(s,1)*d*1e3);const p=this.normalizeOHLCVTimestamp(l,t),m=this.normalizeOHLCVTimestamp(f,t,!0);h.start_time=p,h.end_time=m;const g=await this.publicGetCandle(this.extend(h,r)),y=this.safeValue(g,"data",[]);return this.parseOHLCVs(y,a,t,i,s)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"start_time")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"base_volume")]}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets(),t=this.parse8601(t);const r={};let a;void 0!==e&&(a=this.market(e),r.market_id=a.id);const n=await this.privateGetOpenOrder(this.extend(r,s)),o=this.safeValue(n,"data");return this.parseOrders(o,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r={start_time:this.iso8601(0),end_time:this.iso8601(this.milliseconds()),limit:100};let a;void 0!==e&&(a=this.market(e),r.market_id=a.id),t&&(r.start_time=this.iso8601(t)),i&&(r.limit=i);const n=await this.privateGetOrderHistory(this.extend(r,s)),o=this.safeValue(n,"data");return this.parseOrders(o,a,t,i)}async fetchOrder(e,t,i={}){if(void 0===t)throw new u(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={market_id:s.id},a=this.safeString2(i,"clientOrderId","client_order_id");void 0!==a?r.client_order_id=a:r.order_id=e;const n=this.omit(i,["clientOrderId","client_order_id"]),o=await this.privateGetOrder(this.extend(r,n)),h=this.safeValue(o,"data",[]),c=this.safeValue(h,0);return this.parseOrder(c,s)}parseOrderStatus(e){return this.safeString({open:"open",cancelled:"canceled",filled:"closed"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"status")),s=this.safeString(e,"id"),r=this.safeString(e,"type"),a=this.safeString(e,"side"),n=this.safeString(e,"market_id"),o=this.safeSymbol(n,t,"-"),h=this.parse8601(this.safeString(e,"time"));let c=this.safeString(e,"limit_price");const d=this.safeString(e,"filled_quantity");let u=this.safeString(e,"open_quantity");const l=this.safeString(e,"cancelled_quantity");void 0!==l&&(u=b.stringAdd(u,l));const f=this.safeString(e,"quantity",b.stringAdd(d,u)),p=this.safeString2(e,"filled_cost","cost");"market"===r&&(c=void 0);let m=this.safeString(e,"client_order_id");""===m&&(m=void 0);const g=this.safeStringUpper(e,"time_in_force");return this.safeOrder2({id:s,info:e,clientOrderId:m,timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:void 0,symbol:o,type:r,timeInForce:g,side:a,status:i,price:c,stopPrice:void 0,amount:f,filled:d,remaining:u,average:void 0,cost:p,fee:void 0,trades:void 0},t)}costToPrecision(e,t){return this.decimalToPrecision(t,g,this.markets[e].precision.cost,this.precisionMode)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o=this.safeValue(this.options,"timeInForce"),c=this.safeValue(o,t),d=this.safeString2(a,"timeInForce","time_in_force",c),u={market_id:n.id,type:t,side:i,time_in_force:d},l=this.safeString2(a,"clientOrderId","client_order_id");let f;if(void 0!==l&&(u.client_order_id=l),"limit"===t)u.limit_price=this.priceToPrecision(e,r),u.quantity=this.amountToPrecision(e,s);else if("market"===t)if("buy"===i){let t=this.safeNumber(a,"cost");if(this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){if(void 0!==r)void 0===t&&(t=s*r);else if(void 0===t)throw new h(this.id+" createOrder() requires the price argument for market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'cost' extra parameter (the exchange-specific behaviour)")}else t=void 0===t?s:t;f=this.costToPrecision(e,t),u.cost=f}else u.quantity=this.amountToPrecision(e,s);const p=this.omit(a,["timeInForce","time_in_force","clientOrderId","client_order_id"]),m=await this.privatePostNewOrder(this.extend(u,p)),g=this.safeValue(m,"data"),y=this.parseOrder(g,n);return"market"===t&&"buy"===i&&(y.amount=void 0,y.cost=this.parseNumber(f),y.remaining=void 0),y}async cancelOrder(e,t,i={}){if(void 0===t)throw new u(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s={market_id:this.market(t).id,order_id:e},r=await this.privatePostCancelOrder(this.extend(s,i)),a=this.safeValue(r,"data");return this.parseOrder(a)}parseDepositAddress(e,t){const i=this.safeString(e,"address"),s=this.safeString(e,"destination_tag"),r=this.safeString(e,"currency_id"),a=this.safeCurrencyCode(r);return this.checkAddress(i),{currency:a,address:i,tag:s,network:void 0,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency_id:i.id},r=await this.privateGetDepositAddress(this.extend(s,t)),a=this.safeValue(r,"data",[]),n=this.safeValue(a,0);if(void 0===n)throw new l(this.id+" fetchDepositAddress returned an empty response");return this.parseDepositAddress(n,i)}async fetchDepositAddresses(e,t={}){await this.loadMarkets();const i={};if(e){const t=[];for(let i=0;i<e.length;i++){const s=this.currency(e[i]);t.push(s.id)}i.currency_id=e.join(",")}const s=await this.privateGetDepositAddress(this.extend(i,t)),r=this.safeValue(s,"data",[]);return this.parseDepositAddresses(r)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e);void 0===s&&(s="");const n={currency_id:a.id,address:i,destination_tag:s,amount:this.numberToString(t)},o=this.safeValue(this.options,"networks",{});let h=this.safeStringUpper(r,"network");h=this.safeString(o,h,h),void 0!==h&&(n.platform_id=h,r=this.omit(r,"network"));const c=await this.privatePostWithdrawal(this.extend(n,r)),d=this.safeValue(c,"data");return this.parseTransaction(d,a)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeNumber(e,"amount"),r=this.safeString(e,"address"),a=this.safeString(e,"destination_tag"),n=this.safeString(e,"hash"),o=this.parse8601(this.safeString(e,"time")),h=this.safeString(e,"type"),c=this.safeString(e,"currency_id"),d=this.safeCurrencyCode(c),u=this.parseTransactionStatus(this.safeString(e,"status")),l=this.safeNumber(e,"fee");let f;return void 0!==l&&0!==l&&(f={currency:d,cost:l}),{id:i,currency:d,amount:s,addressFrom:void 0,address:r,addressTo:r,tagFrom:void 0,tag:a,tagTo:a,status:u,type:h,txid:n,timestamp:o,datetime:this.iso8601(o),fee:f,info:e}}parseTransactionStatus(e){return this.safeString({requested:"pending",pending:"pending",confirming:"pending",confirmed:"pending",applying:"pending",done:"ok",cancelled:"canceled",cancelling:"canceled"},e,e)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t]+"/";const o=this.omit(s,this.extractParams(e));if("accounts"===t){this.checkRequiredCredentials(),n+=this.implodeParams(e,s);const t=this.apiKey+":"+this.secret,i=this.stringToBase64(t);r={Authorization:"Basic "+this.decode(i),"Content-Type":"application/json"},Object.keys(o).length&&(a=this.json(o))}else if(n+=this.version+"/","public"===t)n+=this.implodeParams(e,s),Object.keys(o).length&&(n+="?"+this.urlencode(o));else if("private"===t){const t=this.milliseconds();this.checkRequiredCredentials();const h=this.safeInteger(this.options,"expires");if(void 0===h||h<t)throw new d(this.id+" access token expired, call signIn() method");r={Authorization:"Bearer "+this.safeString(this.options,"accessToken")},n+=this.implodeParams(e,s),"GET"===i?Object.keys(o).length&&(n+="?"+this.urlencode(o)):Object.keys(o).length&&(a=this.json(o),r["Content-Type"]="application/json")}return{url:n,method:i,body:a,headers:r}}async signIn(e={}){this.checkRequiredCredentials();const t=await this.accountsPostToken(this.extend({grant_type:"client_credentials"},e)),i=this.safeInteger(t,"expires_in"),s=this.safeString(t,"access_token");return this.options.accessToken=s,this.options.expires=this.sum(this.milliseconds(),1e3*i),t}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o&&"errorCode"in o){const e=this.safeString(o,"errorCode"),t=this.safeString(o,"message");if(void 0!==e){const i=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.exact,e,i),new r(i)}}}}},82715:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,InvalidOrder:a,InsufficientFunds:n,AuthenticationError:o,RateLimitExceeded:h,BadSymbol:c}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"qtrade",name:"qTrade",countries:["US"],rateLimit:1e3,version:"v1",urls:{logo:"https://user-images.githubusercontent.com/51840849/80491487-74a99c00-896b-11ea-821e-d307e832f13e.jpg",api:"https://api.qtrade.io",www:"https://qtrade.io",doc:"https://qtrade-exchange.github.io/qtrade-docs",referral:"https://qtrade.io/?ref=BKOQWVFGRH2C"},has:{cancelOrder:!0,CORS:void 0,createMarketOrder:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDeposit:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:void 0,fetchWithdrawal:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"5m":"fivemin","15m":"fifteenmin","30m":"thirtymin","1h":"onehour","2h":"twohour","4h":"fourhour","1d":"oneday"},api:{public:{get:["ticker/{market_string}","tickers","currency/{code}","currencies","common","market/{market_string}","markets","market/{market_string}/trades","orderbook/{market_string}","market/{market_string}/ohlcv/{interval}"]},private:{get:["me","balances","balances_all","market/{market_string}","orders","order/{order_id}","trades","withdraw/{withdraw_id}","withdraws","deposit/{deposit_id}","deposits","transfers"],post:["cancel_order","withdraw","deposit_address/{currency}","sell_limit","buy_limit"]}},fees:{trading:{feeSide:"quote",tierBased:!0,percentage:!0,taker:.005,maker:0},funding:{withdraw:{}}},commonCurrencies:{BTM:"Bitmark"},exceptions:{exact:{invalid_auth:o,insuff_funds:n,market_not_found:c,too_small:a,limit_exceeded:h}}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"markets",[]),r=[];for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"market_string"),a=this.safeInteger(t,"id"),n=this.safeString(t,"market_currency"),o=this.safeString(t,"base_currency"),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=h+"/"+c,u={amount:this.safeInteger(t,"market_precision"),price:this.safeInteger(t,"base_precision")},l=this.safeValue(t,"can_view",!1),f=this.safeValue(t,"can_trade",!1)&&l;r.push({symbol:d,id:i,numericId:a,baseId:n,quoteId:o,base:h,quote:c,type:"spot",spot:!0,active:f,precision:u,taker:this.safeNumber(t,"taker_fee"),maker:this.safeNumber(t,"maker_fee"),limits:{amount:{min:this.safeNumber(t,"minimum_sell_value"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(t,"minimum_buy_value"),max:void 0}},info:t})}return r}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"currencies",[]),r={};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"code"),a=this.safeCurrencyCode(i),n=this.safeString(t,"long_name"),o=this.safeString(t,"type"),h=this.safeValue(t,"can_withdraw",!0),c=this.safeValue(t,"deposit_disabled",!1),d=this.safeValue(t,"config",{}),u=this.safeString(t,"status"),l=h&&"ok"===u&&!c;r[a]={id:i,code:a,info:t,type:o,name:n,fee:this.safeNumber(d,"withdraw_fee"),precision:this.safeInteger(t,"precision"),active:l,limits:{amount:{min:this.safeNumber(t,"minimum_order"),max:void 0},withdraw:{min:void 0,max:void 0}}}}return r}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"time")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"market_volume")]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={market_string:a.id,interval:this.timeframes[t]},o=await this.publicGetMarketMarketStringOhlcvInterval(this.extend(n,r)),h=this.safeValue(o,"data",{}),c=this.safeValue(h,"slices",[]);return this.parseOHLCVs(c,a,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market_string:this.marketId(e)},r=await this.publicGetOrderbookMarketString(this.extend(s,i)),a=this.safeValue(r,"data",{}),n={},o={buy:"bids",sell:"asks"},h=Object.keys(o);for(let e=0;e<h.length;e++){const t=h[e],i=o[t],s=this.safeValue(a,t,{}),r=Object.keys(s),c=[];for(let e=0;e<r.length;e++){const t=r[e],i=this.safeNumber(r,e),a=this.safeNumber(s,t);c.push([i,a])}n[i]=c}const c=this.safeIntegerProduct(a,"last_change",.001);return this.parseOrderBook(n,e,c)}parseTicker(e,t){const i=this.safeString(e,"id_hr"),s=this.safeSymbol(i,t,"_"),r=this.safeIntegerProduct(e,"last_change",.001),a=this.safeNumber(e,"day_open"),n=this.safeNumber(e,"last"),o=this.safeNumber(e,"day_change");let h,c;const d=this.safeNumber(e,"day_avg_price");void 0!==o&&(h=100*o,void 0!==a&&(c=o*a));const u=this.safeNumber(e,"day_volume_market"),l=this.safeNumber(e,"day_volume_base"),f=this.vwap(u,l);return this.safeTicker({symbol:s,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"day_high"),low:this.safeNumber(e,"day_low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:f,open:a,close:n,last:n,previousClose:void 0,change:c,percentage:h,average:d,baseVolume:u,quoteVolume:l,info:e},t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=this.safeValue(i,"data",{}),r=this.safeValue(s,"markets",[]),a={};for(let e=0;e<r.length;e++){const t=this.parseTicker(r[e]);a[t.symbol]=t}return this.filterByArray(a,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market_string:i.id},r=await this.publicGetTickerMarketString(this.extend(s,t)),a=this.safeValue(r,"data",{});return this.parseTicker(a,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market_string:r.id},n=await this.publicGetMarketMarketStringTrades(this.extend(a,s)),o=this.safeValue(n,"data",{}),h=this.safeValue(o,"trades",[]);return this.parseTrades(h,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={desc:!0};let a;const n=this.safeValue(s,"market_id");void 0!==n?r.market_id=n:void 0!==e&&(a=this.market(e),r.market_string=a.id);const o=await this.privateGetTrades(this.extend(r,s)),h=this.safeValue(o,"data",{}),c=this.safeValue(h,"trades",[]);return this.parseTrades(c,a,t,i)}parseTrade(e,t){const i=this.safeString(e,"id");let s=this.safeIntegerProduct(e,"created_at_ts",.001);void 0===s&&(s=this.parse8601(this.safeString(e,"created_at")));const r=this.safeString(e,"side"),a=this.safeString(e,"market_string");t=this.safeMarket(a,t);const n=this.safeString2(e,"base_volume","base_amount"),o=this.safeString(e,"price"),h=this.safeString2(e,"market_amount","amount");let c;const d=this.safeString(e,"base_fee");void 0!==d&&(c={currency:void 0===t?void 0:t.quote,cost:d});const u=this.safeValue(e,"taker",!0)?"taker":"maker",l=this.safeString(e,"order_id");return this.safeTrade({id:i,info:e,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,order:l,type:void 0,side:r,takerOrMaker:u,price:o,amount:h,cost:n,fee:c},t)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalancesAll(e),i=this.safeValue(t,"data",{});let s=this.safeValue(i,"balances",[]);const r={info:t,timestamp:void 0,datetime:void 0};for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"currency"),a=this.safeCurrencyCode(i),n=a in r?r[a]:this.account();n.free=this.safeString(t,"balance"),n.used="0",r[a]=n}s=this.safeValue(i,"order_balances",[]);for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString(t,"currency"),a=this.safeCurrencyCode(i),n=a in r?r[a]:this.account();n.used=this.safeString(t,"balance"),r[a]=n}return this.parseBalance(r)}async createOrder(e,t,i,s,r,n={}){if("limit"!==t)throw new a(this.id+" createOrder() allows limit orders only");await this.loadMarkets();const o=this.market(e),h={amount:this.amountToPrecision(e,s),market_id:o.numericId,price:this.priceToPrecision(e,r)},c="sell"===i?"privatePostSellLimit":"privatePostBuyLimit",d=await this[c](this.extend(h,n)),u=this.safeValue(d,"data",{}),l=this.safeValue(u,"order",{});return this.parseOrder(l,o)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"created_at")),r=this.safeString(e,"order_type");let a,n;if(void 0!==r){const e=r.split("_");n=this.safeString(e,0),a=this.safeString(e,1)}const o=this.safeNumber(e,"price"),h=this.safeNumber(e,"market_amount"),c=this.safeNumber(e,"market_amount_remaining"),d=this.safeValue(e,"open",!1),u=this.safeString(e,"close_reason");let l;l=d?"open":"canceled"===u?"canceled":"closed";const f=this.safeString(e,"market_string"),p=(t=this.safeMarket(f,t,"_")).symbol,m=this.safeValue(e,"trades",[]),g=this.parseTrades(m,t,void 0,void 0,{order:i,side:n,type:a});return this.safeOrder({info:e,id:i,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:p,type:a,timeInForce:void 0,postOnly:void 0,side:n,price:o,stopPrice:void 0,average:void 0,amount:h,remaining:c,filled:void 0,status:l,fee:void 0,fees:void 0,cost:void 0,trades:g})}async cancelOrder(e,t,i={}){const s={id:parseInt(e)};return await this.privatePostCancelOrder(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privateGetOrderOrderId(this.extend(s,i)),a=this.safeValue(r,"data",{}),n=this.safeValue(a,"order",{});return this.parseOrder(n)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a;const n=this.safeValue(s,"market_id");void 0!==n?r.market_id=n:void 0!==e&&(a=this.market(e),r.market_string=a.id);const o=await this.privateGetOrders(this.extend(r,s)),h=this.safeValue(o,"data",{}),c=this.safeValue(h,"orders",[]);return this.parseOrders(c,a,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({open:!0},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({open:!1},s))}parseDepositAddress(e,t){const i=void 0===t?void 0:t.code;let s,r=this.safeString(e,"address");if(void 0!==r){const e=r.split(":");r=this.safeString(e,0),s=this.safeString(e,1)}return this.checkAddress(r),{currency:i,address:r,tag:s,network:void 0,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},r=await this.privatePostDepositAddressCurrency(this.extend(s,t)),a=this.safeValue(r,"data",{});return this.parseDepositAddress(a,i)}async fetchDeposit(e,t,i={}){await this.loadMarkets();const s={deposit_id:e},r=await this.privateGetDepositDepositId(this.extend(s,i)),a=this.safeValue(r,"data",{}),n=this.safeValue(a,"deposit",{});return this.parseTransaction(n)}async fetchDeposits(e,t,i,s={}){let r;await this.loadMarkets(),void 0!==e&&(r=this.currency(e));const a=await this.privateGetDeposits(s),n=this.safeValue(a,"data",{}),o=this.safeValue(n,"deposits",[]);return this.parseTransactions(o,r,t,i)}async fetchWithdrawal(e,t,i={}){await this.loadMarkets();const s={withdraw_id:e},r=await this.privateGetWithdrawWithdrawId(this.extend(s,i)),a=this.safeValue(r,"data",{}),n=this.safeValue(a,"withdraw",{});return this.parseTransaction(n)}async fetchWithdrawals(e,t,i,s={}){let r;await this.loadMarkets(),void 0!==e&&(r=this.currency(e));const a=await this.privateGetWithdraws(s),n=this.safeValue(a,"data",{}),o=this.safeValue(n,"withdraws",[]);return this.parseTransactions(o,r,t,i)}parseTransaction(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"id"),r=this.safeValue(e,"network_data",{}),a=this.safeValue(r,"unsigned_tx",{}),n=this.safeString(a,"from"),o=this.safeString(r,"txid");let h,c=this.safeString(e,"address");if(void 0!==c){const e=c.split(":");e.length>1&&(c=this.safeString(e,0),h=this.safeString(e,1))}const d=c,u=h,l=this.safeValue(e,"cancel_requested"),f=void 0===l?"deposit":"withdrawal",p=this.safeNumber(e,"amount"),m=this.safeString(e,"currency"),g=this.safeCurrencyCode(m);let y=this.parseTransactionStatus(this.safeString(e,"status"));const b=this.safeString(e,"code");return l?y="canceled":void 0===y&&(y=this.parseTransactionStatus(b)),{info:e,id:s,txid:o,timestamp:i,datetime:this.iso8601(i),addressFrom:n,addressTo:d,address:c,tagFrom:void 0,tagTo:u,tag:h,type:f,amount:p,currency:g,status:y,updated:void 0,fee:void 0}}parseTransactionStatus(e){return this.safeString({initiated:"pending",needs_create:"pending",credited:"ok",confirmed:"ok"},e,e)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),await this.loadMarkets();const a={address:i,amount:t,currency:this.currency(e).id};void 0!==s&&(a.address+=":"+s);const n=await this.privatePostWithdraw(this.extend(a,r)),o=this.safeValue(n,"data",{}),h=this.parseTransaction(o);return this.extend(h,{currency:e,address:i,addressTo:i,tag:s,tagTo:s,amount:t})}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n="/"+this.version+"/";"private"===t&&(n+="user/"),n+=this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("POST"===i?a=this.json(o):Object.keys(o).length&&(n+="?"+this.urlencode(o)),"private"===t){const e=this.milliseconds().toString(),t=[i,n,e,"POST"===i?a:"",this.secret].join("\n"),s=this.hash(this.encode(t),"sha256","base64");let o=this.apiKey;"string"!=typeof o&&(o=o.toString()),r={Authorization:"HMAC-SHA256 "+o+":"+s,"HMAC-Timestamp":e},"POST"===i&&(r["Content-Type"]="application/json")}return n=this.urls.api+n,{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;const d=this.safeValue(o,"errors",[]);if(d.length<1)return;const u=this.id+" "+n;for(let e=0;e<d.length;e++){const t=d[e],i=this.safeString(t,"code");this.throwExactlyMatchedException(this.exceptions.exact,i,u)}throw new r(u)}}},2041:(e,t,i)=>{"use strict";const s=i(48819),{AuthenticationError:r,ExchangeError:a,BadSymbol:n,BadRequest:o,InvalidOrder:h,ArgumentsRequired:c,OrderNotFound:d,InsufficientFunds:u,DDoSProtection:l}=i(73449),{TICK_SIZE:f}=i(62115),p=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"ripio",name:"Ripio",countries:["AR","BR"],rateLimit:50,version:"v1",pro:!0,has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/94507548-a83d6a80-0218-11eb-9998-28b9cec54165.jpg",api:{public:"https://api.exchange.ripio.com/api",private:"https://api.exchange.ripio.com/api"},www:"https://exchange.ripio.com",doc:["https://exchange.ripio.com/en/api/"],fees:"https://exchange.ripio.com/en/fee"},api:{public:{get:["rate/all/","rate/{pair}/","orderbook/{pair}/","tradehistory/{pair}/","pair/","currency/","orderbook/{pair}/depth/"]},private:{get:["balances/exchange_balances/","order/{pair}/{order_id}/","order/{pair}/","trade/{pair}/"],post:["order/{pair}/","order/{pair}/{order_id}/cancel/"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:0,maker:0}},precisionMode:f,requiredCredentials:{apiKey:!0,secret:!1},exceptions:{exact:{},broad:{"Authentication credentials were not provided":r,"Disabled pair":n,"Invalid order type":h,"Your balance is not enough":u,"Order couldn't be created":a,"not found":d,"Invalid pair":n,"amount must be a number":o,"Total must be at least":h,"Account not found":o,"Wrong password provided":r,"User tokens limit":l,"Something unexpected ocurred":a,account_balance:o}}})}async fetchMarkets(e={}){const t=await this.publicGetPair(e),i=[],s=this.safeValue(t,"results",[]);for(let e=0;e<s.length;e++){const t=s[e],r=this.safeString(t,"base"),a=this.safeString(t,"quote"),n=this.safeString(t,"symbol"),o=this.safeCurrencyCode(r),h=this.safeCurrencyCode(a),c=o+"/"+h,d={amount:this.safeNumber(t,"min_amount"),price:this.safeNumber(t,"price_tick")},u={amount:{min:this.safeNumber(t,"min_amount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(t,"min_value"),max:void 0}},l=this.safeValue(t,"enabled",!0),f=this.safeValue(t,"fees",[]),p=this.safeValue(f,0,{}),m=this.safeNumber(p,"maker_fee",0),g=this.safeNumber(p,"taker_fee",0);i.push({id:n,symbol:c,base:o,quote:h,baseId:r,quoteId:a,type:"spot",spot:!0,active:l,precision:d,maker:m,taker:g,limits:u,info:t})}return i}async fetchCurrencies(e={}){const t=await this.publicGetCurrency(e),i=this.safeValue(t,"results",[]),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currency"),a=this.safeCurrencyCode(r),n=this.safeString(t,"name"),o=this.safeValue(t,"enabled",!0),h=this.safeInteger(t,"decimal_places");s[a]={id:r,code:a,name:n,info:t,active:o,fee:void 0,precision:h,limits:{amount:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return s}parseTicker(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"pair"),r=this.safeSymbol(s,t),a=this.safeNumber(e,"last_price"),n=this.safeNumber(e,"avg");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:this.safeNumber(e,"bid_volume"),ask:this.safeNumber(e,"ask"),askVolume:this.safeNumber(e,"ask_volume"),vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:n,baseVolume:void 0,quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pair:i.id},r=await this.publicGetRatePair(this.extend(s,t));return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetRateAll(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]);s[t.symbol]=t}return this.filterByArray(s,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},r=await this.publicGetOrderbookPair(this.extend(s,i)),a=this.parseOrderBook(r,e,void 0,"buy","sell","price","amount");return a.nonce=this.safeInteger(r,"updated_id"),a}parseTrade(e,t){const i=this.safeString(e,"id");let s=this.safeInteger(e,"timestamp");s=this.safeTimestamp(e,"created_at",s);let r=this.safeString(e,"side");const a=this.safeString(e,"taker_side")===r?"taker":"maker";void 0!==r&&(r=r.toLowerCase());const n=this.safeString2(e,"price","match_price"),o=this.safeString2(e,"amount","exchanged"),h=this.parseNumber(n),c=this.parseNumber(o),d=this.parseNumber(p.stringMul(n,o)),u=this.safeString(e,"pair");t=this.safeMarket(u,t);const l=this.safeNumber(e,a+"_fee"),f=this.safeString(e,a);let m;return void 0!==l&&(m={cost:l,currency:"buy"===r?t.base:t.quote}),{id:i,order:f,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,type:void 0,side:r,price:h,amount:c,cost:d,takerOrMaker:a,fee:m,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id},n=await this.publicGetTradehistoryPair(this.extend(a,s));return this.parseTrades(n,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalancesExchangeBalances(e),i={info:t};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"symbol"),a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(s,"available"),n.used=this.safeString(s,"locked"),i[a]=n}return this.parseBalance(i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o=t.toUpperCase(),h=i.toUpperCase(),c={pair:n.id,order_type:o,side:h,amount:this.amountToPrecision(e,s)};"LIMIT"===o&&(c.limit_price=this.priceToPrecision(e,r));const d=await this.privatePostOrderPair(this.extend(c,a));return this.parseOrder(d,n)}async cancelOrder(e,t,i={}){if(void 0===t)throw new c(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={pair:s.id,order_id:e},a=await this.privatePostOrderPairOrderIdCancel(this.extend(r,i));return this.parseOrder(a,s)}async fetchOrder(e,t,i={}){if(void 0===t)throw new c(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s=this.market(t),r={pair:s.id,order_id:e},a=await this.privateGetOrderPairOrderId(this.extend(r,i));return this.parseOrder(a,s)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={pair:r.id};void 0!==i&&(a.offset=i);const n=await this.privateGetOrderPair(this.extend(a,s)),o=this.safeValue(n,"results",{}),h=this.safeValue(o,"data",[]);return this.parseOrders(h,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"OPEN,PART"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"CLOS,CANC,COMP"},s))}parseOrderStatus(e){return this.safeString({OPEN:"open",PART:"open",CLOS:"canceled",CANC:"canceled",COMP:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_id"),s=this.safeNumber(e,"amount");let r=this.safeNumber(e,"notional");const a=this.safeStringLower(e,"order_type"),n="market"===a?"fill_price":"limit_price",o=this.safeNumber(e,n),h=this.safeStringLower(e,"side"),c=this.parseOrderStatus(this.safeString(e,"status")),d=this.safeTimestamp(e,"created_at");let u,l=this.safeValue(e,"fill_price"),f=this.safeNumber(e,"filled");const p=this.safeValue(e,"fills");let m,g;if(void 0!==p&&p.length>0){f=0,r=0,m=this.parseTrades(p,t,void 0,void 0,{order:i,side:h});for(let e=0;e<m.length;e++){const t=m[e];f=this.sum(t.amount,f),r=this.sum(t.cost,r),g=t.timestamp}void 0===l&&f>0&&(l=r/f)}void 0!==f&&(void 0===r&&void 0!==o&&(r=o*f),void 0!==s&&(u=Math.max(0,s-f)));const y=this.safeString(e,"pair"),b=this.safeSymbol(y,t,"_"),v=this.safeNumber(e,"stop_price");return{id:i,clientOrderId:void 0,info:e,timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:g,symbol:b,type:a,timeInForce:void 0,postOnly:void 0,side:h,price:o,stopPrice:v,amount:s,cost:r,average:l,filled:f,remaining:u,status:c,fee:void 0,trades:m}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new c(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={pair:r.id};void 0!==i&&(a.limit=i);const n=await this.privateGetTradePair(this.extend(a,s)),o=this.safeValue(n,"results",{}),h=this.safeValue(o,"data",[]);return this.parseTrades(h,r,t,i)}sign(e,t="public",i="GET",s={},r,a){const n="/"+this.version+"/"+this.implodeParams(e,s);let o=this.urls.api[t]+n;const h=this.omit(s,this.extractParams(e));return"public"===t?Object.keys(h).length&&(o+="?"+this.urlencode(h)):"private"===t&&(this.checkRequiredCredentials(),"POST"===i?a=this.json(h):Object.keys(h).length&&(o+="?"+this.urlencode(h)),r={"Content-Type":"application/json",Authorization:"Bearer "+this.apiKey}),{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,n,o,h,c){if(void 0===o)return;const d=this.safeString(o,"detail");if(void 0!==d){const e=this.id+" "+n;this.throwBroadlyMatchedException(this.exceptions.broad,d,e)}const u=this.safeValue(o,"errors");if(void 0!==u){const e=this.id+" "+n,t=Object.keys(u);for(let i=0;i<t.length;i++){const s=t[i],r=this.safeValue(u,s,[]),a=this.safeString(r,0);this.throwBroadlyMatchedException(this.exceptions.broad,a,e)}throw new a(e)}}}},35060:function(e,t,i){!function(e,t){"use strict";function s(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function a(e,t,i){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(i=t,t=10),this._init(e||0,t||10,i||"be"))}var n;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{n=i(48764).Buffer}catch(e){}function o(e,t,i){for(var r=0,a=Math.min(e.length,i),n=0,o=t;o<a;o++){var h,c=e.charCodeAt(o)-48;r<<=4,r|=h=c>=49&&c<=54?c-49+10:c>=17&&c<=22?c-17+10:c,n|=h}return s(!(240&n),"Invalid character in "+e),r}function h(e,t,i,r){for(var a=0,n=0,o=Math.min(e.length,i),h=t;h<o;h++){var c=e.charCodeAt(h)-48;a*=r,n=c>=49?c-49+10:c>=17?c-17+10:c,s(c>=0&&n<r,"Invalid character"),a+=n}return a}function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}a.isBN=function(e){return e instanceof a||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),s(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&r++,16===t?this._parseHex(e,r):this._parseBase(e,t,r),"-"===e[0]&&(this.negative=1),this._strip(),"le"===i&&this._initArray(this.toArray(),t,i)},a.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(s(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},a.prototype._initArray=function(e,t,i){if(s("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var a,n,o=0;if("be"===i)for(r=e.length-1,a=0;r>=0;r-=3)n=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===i)for(r=0,a=0;r<e.length;r+=3)n=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this._strip()},a.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,r,a=0;for(i=e.length-6,s=0;i>=t;i-=6)r=o(e,i,i+6),this.words[s]|=r<<a&67108863,this.words[s+1]|=r>>>26-a&4194303,(a+=24)>=26&&(a-=26,s++);i+6!==t&&(r=o(e,t,i+6),this.words[s]|=r<<a&67108863,this.words[s+1]|=r>>>26-a&4194303),this._strip()},a.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var s=0,r=1;r<=67108863;r*=t)s++;s--,r=r/t|0;for(var a=e.length-i,n=a%s,o=Math.min(a,a-n)+i,c=0,d=i;d<o;d+=s)c=h(e,d,d+s,t),this.imuln(r),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==n){var u=1;for(c=h(e,d,e.length,t),d=0;d<n;d++)u*=t;this.imuln(u),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype._move=function(e){e.words=this.words,e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for?a.prototype[Symbol.for("nodejs.util.inspect.custom")]=c:a.prototype.inspect=c;var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,i){i.negative=t.negative^e.negative;var s=e.length+t.length|0;i.length=s,s=s-1|0;var r=0|e.words[0],a=0|t.words[0],n=r*a,o=67108863&n,h=n/67108864|0;i.words[0]=o;for(var c=1;c<s;c++){for(var d=h>>>26,u=67108863&h,l=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=l;f++){var p=c-f|0;d+=(n=(r=0|e.words[p])*(a=0|t.words[f])+u)/67108864|0,u=67108863&n}i.words[c]=0|u,h=0|d}return 0!==h?i.words[c]=0|h:i.length--,i._strip()}a.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var r=0,a=0,n=0;n<this.length;n++){var o=this.words[n],h=(16777215&(o<<r|a)).toString(16);i=0!=(a=o>>>24-r&16777215)||n!==this.length-1?d[6-h.length]+h+i:h+i,(r+=2)>=26&&(r-=26,n--)}for(0!==a&&(i=a.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var c=u[e],f=l[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(f).toString(e);i=(p=p.idivn(f)).isZero()?m+i:d[c-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}s(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16,2)},n&&(a.prototype.toBuffer=function(e,t){return this.toArrayLike(n,e,t)}),a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,i){this._strip();var r=this.byteLength(),a=i||Math.max(1,r);s(r<=a,"byte array longer than desired length"),s(a>0,"Requested array length <= 0");var n=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,a);return this["_toArrayLike"+("le"===t?"LE":"BE")](n,r),n},a.prototype._toArrayLikeLE=function(e,t){for(var i=0,s=0,r=0,a=0;r<this.length;r++){var n=this.words[r]<<a|s;e[i++]=255&n,i<e.length&&(e[i++]=n>>8&255),i<e.length&&(e[i++]=n>>16&255),6===a?(i<e.length&&(e[i++]=n>>24&255),s=0,a=0):(s=n>>>24,a+=2)}if(i<e.length)for(e[i++]=s;i<e.length;)e[i++]=0},a.prototype._toArrayLikeBE=function(e,t){for(var i=e.length-1,s=0,r=0,a=0;r<this.length;r++){var n=this.words[r]<<a|s;e[i--]=255&n,i>=0&&(e[i--]=n>>8&255),i>=0&&(e[i--]=n>>16&255),6===a?(i>=0&&(e[i--]=n>>24&255),s=0,a=0):(s=n>>>24,a+=2)}if(i>=0)for(e[i--]=s;i>=0;)e[i--]=0},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,i=0;return 0==(8191&t)&&(i+=13,t>>>=13),0==(127&t)&&(i+=7,t>>>=7),0==(15&t)&&(i+=4,t>>>=4),0==(3&t)&&(i+=2,t>>>=2),0==(1&t)&&i++,i},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var i=this._zeroBits(this.words[t]);if(e+=i,26!==i)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},a.prototype.ior=function(e){return s(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]&e.words[i];return this.length=t.length,this._strip()},a.prototype.iand=function(e){return s(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,i;this.length>e.length?(t=this,i=e):(t=e,i=this);for(var s=0;s<i.length;s++)this.words[s]=t.words[s]^i.words[s];if(this!==t)for(;s<t.length;s++)this.words[s]=t.words[s];return this.length=t.length,this._strip()},a.prototype.ixor=function(e){return s(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){s("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this._strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){s("number"==typeof e&&e>=0);var i=e/26|0,r=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<r:this.words[i]&~(1<<r),this._strip()},a.prototype.iadd=function(e){var t,i,s;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(i=this,s=e):(i=e,s=this);for(var r=0,a=0;a<s.length;a++)t=(0|i.words[a])+(0|s.words[a])+r,this.words[a]=67108863&t,r=t>>>26;for(;0!==r&&a<i.length;a++)t=(0|i.words[a])+r,this.words[a]=67108863&t,r=t>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i,s,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,s=e):(i=e,s=this);for(var a=0,n=0;n<s.length;n++)a=(t=(0|i.words[n])-(0|s.words[n])+a)>>26,this.words[n]=67108863&t;for(;0!==a&&n<i.length;n++)a=(t=(0|i.words[n])+a)>>26,this.words[n]=67108863&t;if(0===a&&n<i.length&&i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this.length=Math.max(this.length,n),i!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,i){var s,r,a,n=e.words,o=t.words,h=i.words,c=0,d=0|n[0],u=8191&d,l=d>>>13,f=0|n[1],p=8191&f,m=f>>>13,g=0|n[2],y=8191&g,b=g>>>13,v=0|n[3],w=8191&v,k=v>>>13,_=0|n[4],S=8191&_,O=_>>>13,M=0|n[5],T=8191&M,x=M>>>13,I=0|n[6],A=8191&I,C=I>>>13,N=0|n[7],E=8191&N,P=N>>>13,B=0|n[8],R=8191&B,V=B>>>13,L=0|n[9],D=8191&L,q=L>>>13,G=0|o[0],F=8191&G,j=G>>>13,U=0|o[1],H=8191&U,z=U>>>13,K=0|o[2],W=8191&K,X=K>>>13,Z=0|o[3],Y=8191&Z,Q=Z>>>13,J=0|o[4],$=8191&J,ee=J>>>13,te=0|o[5],ie=8191&te,se=te>>>13,re=0|o[6],ae=8191&re,ne=re>>>13,oe=0|o[7],he=8191&oe,ce=oe>>>13,de=0|o[8],ue=8191&de,le=de>>>13,fe=0|o[9],pe=8191&fe,me=fe>>>13;i.negative=e.negative^t.negative,i.length=19;var ge=(c+(s=Math.imul(u,F))|0)+((8191&(r=(r=Math.imul(u,j))+Math.imul(l,F)|0))<<13)|0;c=((a=Math.imul(l,j))+(r>>>13)|0)+(ge>>>26)|0,ge&=67108863,s=Math.imul(p,F),r=(r=Math.imul(p,j))+Math.imul(m,F)|0,a=Math.imul(m,j);var ye=(c+(s=s+Math.imul(u,H)|0)|0)+((8191&(r=(r=r+Math.imul(u,z)|0)+Math.imul(l,H)|0))<<13)|0;c=((a=a+Math.imul(l,z)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,s=Math.imul(y,F),r=(r=Math.imul(y,j))+Math.imul(b,F)|0,a=Math.imul(b,j),s=s+Math.imul(p,H)|0,r=(r=r+Math.imul(p,z)|0)+Math.imul(m,H)|0,a=a+Math.imul(m,z)|0;var be=(c+(s=s+Math.imul(u,W)|0)|0)+((8191&(r=(r=r+Math.imul(u,X)|0)+Math.imul(l,W)|0))<<13)|0;c=((a=a+Math.imul(l,X)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,s=Math.imul(w,F),r=(r=Math.imul(w,j))+Math.imul(k,F)|0,a=Math.imul(k,j),s=s+Math.imul(y,H)|0,r=(r=r+Math.imul(y,z)|0)+Math.imul(b,H)|0,a=a+Math.imul(b,z)|0,s=s+Math.imul(p,W)|0,r=(r=r+Math.imul(p,X)|0)+Math.imul(m,W)|0,a=a+Math.imul(m,X)|0;var ve=(c+(s=s+Math.imul(u,Y)|0)|0)+((8191&(r=(r=r+Math.imul(u,Q)|0)+Math.imul(l,Y)|0))<<13)|0;c=((a=a+Math.imul(l,Q)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,s=Math.imul(S,F),r=(r=Math.imul(S,j))+Math.imul(O,F)|0,a=Math.imul(O,j),s=s+Math.imul(w,H)|0,r=(r=r+Math.imul(w,z)|0)+Math.imul(k,H)|0,a=a+Math.imul(k,z)|0,s=s+Math.imul(y,W)|0,r=(r=r+Math.imul(y,X)|0)+Math.imul(b,W)|0,a=a+Math.imul(b,X)|0,s=s+Math.imul(p,Y)|0,r=(r=r+Math.imul(p,Q)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,Q)|0;var we=(c+(s=s+Math.imul(u,$)|0)|0)+((8191&(r=(r=r+Math.imul(u,ee)|0)+Math.imul(l,$)|0))<<13)|0;c=((a=a+Math.imul(l,ee)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,s=Math.imul(T,F),r=(r=Math.imul(T,j))+Math.imul(x,F)|0,a=Math.imul(x,j),s=s+Math.imul(S,H)|0,r=(r=r+Math.imul(S,z)|0)+Math.imul(O,H)|0,a=a+Math.imul(O,z)|0,s=s+Math.imul(w,W)|0,r=(r=r+Math.imul(w,X)|0)+Math.imul(k,W)|0,a=a+Math.imul(k,X)|0,s=s+Math.imul(y,Y)|0,r=(r=r+Math.imul(y,Q)|0)+Math.imul(b,Y)|0,a=a+Math.imul(b,Q)|0,s=s+Math.imul(p,$)|0,r=(r=r+Math.imul(p,ee)|0)+Math.imul(m,$)|0,a=a+Math.imul(m,ee)|0;var ke=(c+(s=s+Math.imul(u,ie)|0)|0)+((8191&(r=(r=r+Math.imul(u,se)|0)+Math.imul(l,ie)|0))<<13)|0;c=((a=a+Math.imul(l,se)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,s=Math.imul(A,F),r=(r=Math.imul(A,j))+Math.imul(C,F)|0,a=Math.imul(C,j),s=s+Math.imul(T,H)|0,r=(r=r+Math.imul(T,z)|0)+Math.imul(x,H)|0,a=a+Math.imul(x,z)|0,s=s+Math.imul(S,W)|0,r=(r=r+Math.imul(S,X)|0)+Math.imul(O,W)|0,a=a+Math.imul(O,X)|0,s=s+Math.imul(w,Y)|0,r=(r=r+Math.imul(w,Q)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,Q)|0,s=s+Math.imul(y,$)|0,r=(r=r+Math.imul(y,ee)|0)+Math.imul(b,$)|0,a=a+Math.imul(b,ee)|0,s=s+Math.imul(p,ie)|0,r=(r=r+Math.imul(p,se)|0)+Math.imul(m,ie)|0,a=a+Math.imul(m,se)|0;var _e=(c+(s=s+Math.imul(u,ae)|0)|0)+((8191&(r=(r=r+Math.imul(u,ne)|0)+Math.imul(l,ae)|0))<<13)|0;c=((a=a+Math.imul(l,ne)|0)+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,s=Math.imul(E,F),r=(r=Math.imul(E,j))+Math.imul(P,F)|0,a=Math.imul(P,j),s=s+Math.imul(A,H)|0,r=(r=r+Math.imul(A,z)|0)+Math.imul(C,H)|0,a=a+Math.imul(C,z)|0,s=s+Math.imul(T,W)|0,r=(r=r+Math.imul(T,X)|0)+Math.imul(x,W)|0,a=a+Math.imul(x,X)|0,s=s+Math.imul(S,Y)|0,r=(r=r+Math.imul(S,Q)|0)+Math.imul(O,Y)|0,a=a+Math.imul(O,Q)|0,s=s+Math.imul(w,$)|0,r=(r=r+Math.imul(w,ee)|0)+Math.imul(k,$)|0,a=a+Math.imul(k,ee)|0,s=s+Math.imul(y,ie)|0,r=(r=r+Math.imul(y,se)|0)+Math.imul(b,ie)|0,a=a+Math.imul(b,se)|0,s=s+Math.imul(p,ae)|0,r=(r=r+Math.imul(p,ne)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,ne)|0;var Se=(c+(s=s+Math.imul(u,he)|0)|0)+((8191&(r=(r=r+Math.imul(u,ce)|0)+Math.imul(l,he)|0))<<13)|0;c=((a=a+Math.imul(l,ce)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,s=Math.imul(R,F),r=(r=Math.imul(R,j))+Math.imul(V,F)|0,a=Math.imul(V,j),s=s+Math.imul(E,H)|0,r=(r=r+Math.imul(E,z)|0)+Math.imul(P,H)|0,a=a+Math.imul(P,z)|0,s=s+Math.imul(A,W)|0,r=(r=r+Math.imul(A,X)|0)+Math.imul(C,W)|0,a=a+Math.imul(C,X)|0,s=s+Math.imul(T,Y)|0,r=(r=r+Math.imul(T,Q)|0)+Math.imul(x,Y)|0,a=a+Math.imul(x,Q)|0,s=s+Math.imul(S,$)|0,r=(r=r+Math.imul(S,ee)|0)+Math.imul(O,$)|0,a=a+Math.imul(O,ee)|0,s=s+Math.imul(w,ie)|0,r=(r=r+Math.imul(w,se)|0)+Math.imul(k,ie)|0,a=a+Math.imul(k,se)|0,s=s+Math.imul(y,ae)|0,r=(r=r+Math.imul(y,ne)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,ne)|0,s=s+Math.imul(p,he)|0,r=(r=r+Math.imul(p,ce)|0)+Math.imul(m,he)|0,a=a+Math.imul(m,ce)|0;var Oe=(c+(s=s+Math.imul(u,ue)|0)|0)+((8191&(r=(r=r+Math.imul(u,le)|0)+Math.imul(l,ue)|0))<<13)|0;c=((a=a+Math.imul(l,le)|0)+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,s=Math.imul(D,F),r=(r=Math.imul(D,j))+Math.imul(q,F)|0,a=Math.imul(q,j),s=s+Math.imul(R,H)|0,r=(r=r+Math.imul(R,z)|0)+Math.imul(V,H)|0,a=a+Math.imul(V,z)|0,s=s+Math.imul(E,W)|0,r=(r=r+Math.imul(E,X)|0)+Math.imul(P,W)|0,a=a+Math.imul(P,X)|0,s=s+Math.imul(A,Y)|0,r=(r=r+Math.imul(A,Q)|0)+Math.imul(C,Y)|0,a=a+Math.imul(C,Q)|0,s=s+Math.imul(T,$)|0,r=(r=r+Math.imul(T,ee)|0)+Math.imul(x,$)|0,a=a+Math.imul(x,ee)|0,s=s+Math.imul(S,ie)|0,r=(r=r+Math.imul(S,se)|0)+Math.imul(O,ie)|0,a=a+Math.imul(O,se)|0,s=s+Math.imul(w,ae)|0,r=(r=r+Math.imul(w,ne)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,ne)|0,s=s+Math.imul(y,he)|0,r=(r=r+Math.imul(y,ce)|0)+Math.imul(b,he)|0,a=a+Math.imul(b,ce)|0,s=s+Math.imul(p,ue)|0,r=(r=r+Math.imul(p,le)|0)+Math.imul(m,ue)|0,a=a+Math.imul(m,le)|0;var Me=(c+(s=s+Math.imul(u,pe)|0)|0)+((8191&(r=(r=r+Math.imul(u,me)|0)+Math.imul(l,pe)|0))<<13)|0;c=((a=a+Math.imul(l,me)|0)+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,s=Math.imul(D,H),r=(r=Math.imul(D,z))+Math.imul(q,H)|0,a=Math.imul(q,z),s=s+Math.imul(R,W)|0,r=(r=r+Math.imul(R,X)|0)+Math.imul(V,W)|0,a=a+Math.imul(V,X)|0,s=s+Math.imul(E,Y)|0,r=(r=r+Math.imul(E,Q)|0)+Math.imul(P,Y)|0,a=a+Math.imul(P,Q)|0,s=s+Math.imul(A,$)|0,r=(r=r+Math.imul(A,ee)|0)+Math.imul(C,$)|0,a=a+Math.imul(C,ee)|0,s=s+Math.imul(T,ie)|0,r=(r=r+Math.imul(T,se)|0)+Math.imul(x,ie)|0,a=a+Math.imul(x,se)|0,s=s+Math.imul(S,ae)|0,r=(r=r+Math.imul(S,ne)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,ne)|0,s=s+Math.imul(w,he)|0,r=(r=r+Math.imul(w,ce)|0)+Math.imul(k,he)|0,a=a+Math.imul(k,ce)|0,s=s+Math.imul(y,ue)|0,r=(r=r+Math.imul(y,le)|0)+Math.imul(b,ue)|0,a=a+Math.imul(b,le)|0;var Te=(c+(s=s+Math.imul(p,pe)|0)|0)+((8191&(r=(r=r+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,s=Math.imul(D,W),r=(r=Math.imul(D,X))+Math.imul(q,W)|0,a=Math.imul(q,X),s=s+Math.imul(R,Y)|0,r=(r=r+Math.imul(R,Q)|0)+Math.imul(V,Y)|0,a=a+Math.imul(V,Q)|0,s=s+Math.imul(E,$)|0,r=(r=r+Math.imul(E,ee)|0)+Math.imul(P,$)|0,a=a+Math.imul(P,ee)|0,s=s+Math.imul(A,ie)|0,r=(r=r+Math.imul(A,se)|0)+Math.imul(C,ie)|0,a=a+Math.imul(C,se)|0,s=s+Math.imul(T,ae)|0,r=(r=r+Math.imul(T,ne)|0)+Math.imul(x,ae)|0,a=a+Math.imul(x,ne)|0,s=s+Math.imul(S,he)|0,r=(r=r+Math.imul(S,ce)|0)+Math.imul(O,he)|0,a=a+Math.imul(O,ce)|0,s=s+Math.imul(w,ue)|0,r=(r=r+Math.imul(w,le)|0)+Math.imul(k,ue)|0,a=a+Math.imul(k,le)|0;var xe=(c+(s=s+Math.imul(y,pe)|0)|0)+((8191&(r=(r=r+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;c=((a=a+Math.imul(b,me)|0)+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,s=Math.imul(D,Y),r=(r=Math.imul(D,Q))+Math.imul(q,Y)|0,a=Math.imul(q,Q),s=s+Math.imul(R,$)|0,r=(r=r+Math.imul(R,ee)|0)+Math.imul(V,$)|0,a=a+Math.imul(V,ee)|0,s=s+Math.imul(E,ie)|0,r=(r=r+Math.imul(E,se)|0)+Math.imul(P,ie)|0,a=a+Math.imul(P,se)|0,s=s+Math.imul(A,ae)|0,r=(r=r+Math.imul(A,ne)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,ne)|0,s=s+Math.imul(T,he)|0,r=(r=r+Math.imul(T,ce)|0)+Math.imul(x,he)|0,a=a+Math.imul(x,ce)|0,s=s+Math.imul(S,ue)|0,r=(r=r+Math.imul(S,le)|0)+Math.imul(O,ue)|0,a=a+Math.imul(O,le)|0;var Ie=(c+(s=s+Math.imul(w,pe)|0)|0)+((8191&(r=(r=r+Math.imul(w,me)|0)+Math.imul(k,pe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,s=Math.imul(D,$),r=(r=Math.imul(D,ee))+Math.imul(q,$)|0,a=Math.imul(q,ee),s=s+Math.imul(R,ie)|0,r=(r=r+Math.imul(R,se)|0)+Math.imul(V,ie)|0,a=a+Math.imul(V,se)|0,s=s+Math.imul(E,ae)|0,r=(r=r+Math.imul(E,ne)|0)+Math.imul(P,ae)|0,a=a+Math.imul(P,ne)|0,s=s+Math.imul(A,he)|0,r=(r=r+Math.imul(A,ce)|0)+Math.imul(C,he)|0,a=a+Math.imul(C,ce)|0,s=s+Math.imul(T,ue)|0,r=(r=r+Math.imul(T,le)|0)+Math.imul(x,ue)|0,a=a+Math.imul(x,le)|0;var Ae=(c+(s=s+Math.imul(S,pe)|0)|0)+((8191&(r=(r=r+Math.imul(S,me)|0)+Math.imul(O,pe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,s=Math.imul(D,ie),r=(r=Math.imul(D,se))+Math.imul(q,ie)|0,a=Math.imul(q,se),s=s+Math.imul(R,ae)|0,r=(r=r+Math.imul(R,ne)|0)+Math.imul(V,ae)|0,a=a+Math.imul(V,ne)|0,s=s+Math.imul(E,he)|0,r=(r=r+Math.imul(E,ce)|0)+Math.imul(P,he)|0,a=a+Math.imul(P,ce)|0,s=s+Math.imul(A,ue)|0,r=(r=r+Math.imul(A,le)|0)+Math.imul(C,ue)|0,a=a+Math.imul(C,le)|0;var Ce=(c+(s=s+Math.imul(T,pe)|0)|0)+((8191&(r=(r=r+Math.imul(T,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((a=a+Math.imul(x,me)|0)+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,s=Math.imul(D,ae),r=(r=Math.imul(D,ne))+Math.imul(q,ae)|0,a=Math.imul(q,ne),s=s+Math.imul(R,he)|0,r=(r=r+Math.imul(R,ce)|0)+Math.imul(V,he)|0,a=a+Math.imul(V,ce)|0,s=s+Math.imul(E,ue)|0,r=(r=r+Math.imul(E,le)|0)+Math.imul(P,ue)|0,a=a+Math.imul(P,le)|0;var Ne=(c+(s=s+Math.imul(A,pe)|0)|0)+((8191&(r=(r=r+Math.imul(A,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((a=a+Math.imul(C,me)|0)+(r>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,s=Math.imul(D,he),r=(r=Math.imul(D,ce))+Math.imul(q,he)|0,a=Math.imul(q,ce),s=s+Math.imul(R,ue)|0,r=(r=r+Math.imul(R,le)|0)+Math.imul(V,ue)|0,a=a+Math.imul(V,le)|0;var Ee=(c+(s=s+Math.imul(E,pe)|0)|0)+((8191&(r=(r=r+Math.imul(E,me)|0)+Math.imul(P,pe)|0))<<13)|0;c=((a=a+Math.imul(P,me)|0)+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,s=Math.imul(D,ue),r=(r=Math.imul(D,le))+Math.imul(q,ue)|0,a=Math.imul(q,le);var Pe=(c+(s=s+Math.imul(R,pe)|0)|0)+((8191&(r=(r=r+Math.imul(R,me)|0)+Math.imul(V,pe)|0))<<13)|0;c=((a=a+Math.imul(V,me)|0)+(r>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Be=(c+(s=Math.imul(D,pe))|0)+((8191&(r=(r=Math.imul(D,me))+Math.imul(q,pe)|0))<<13)|0;return c=((a=Math.imul(q,me))+(r>>>13)|0)+(Be>>>26)|0,Be&=67108863,h[0]=ge,h[1]=ye,h[2]=be,h[3]=ve,h[4]=we,h[5]=ke,h[6]=_e,h[7]=Se,h[8]=Oe,h[9]=Me,h[10]=Te,h[11]=xe,h[12]=Ie,h[13]=Ae,h[14]=Ce,h[15]=Ne,h[16]=Ee,h[17]=Pe,h[18]=Be,0!==c&&(h[19]=c,i.length++),i};function m(e,t,i){i.negative=t.negative^e.negative,i.length=e.length+t.length;for(var s=0,r=0,a=0;a<i.length-1;a++){var n=r;r=0;for(var o=67108863&s,h=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=h;c++){var d=a-c,u=(0|e.words[d])*(0|t.words[c]),l=67108863&u;o=67108863&(l=l+o|0),r+=(n=(n=n+(u/67108864|0)|0)+(l>>>26)|0)>>>26,n&=67108863}i.words[a]=o,s=n,n=r}return 0!==s?i.words[a]=s:i.length--,i._strip()}function g(e,t,i){return m(e,t,i)}function y(e,t){this.x=e,this.y=t}Math.imul||(p=f),a.prototype.mulTo=function(e,t){var i=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):i<63?f(this,e,t):i<1024?m(this,e,t):g(this,e,t)},y.prototype.makeRBT=function(e){for(var t=new Array(e),i=a.prototype._countBits(e)-1,s=0;s<e;s++)t[s]=this.revBin(s,i,e);return t},y.prototype.revBin=function(e,t,i){if(0===e||e===i-1)return e;for(var s=0,r=0;r<t;r++)s|=(1&e)<<t-r-1,e>>=1;return s},y.prototype.permute=function(e,t,i,s,r,a){for(var n=0;n<a;n++)s[n]=t[e[n]],r[n]=i[e[n]]},y.prototype.transform=function(e,t,i,s,r,a){this.permute(a,e,t,i,s,r);for(var n=1;n<r;n<<=1)for(var o=n<<1,h=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),d=0;d<r;d+=o)for(var u=h,l=c,f=0;f<n;f++){var p=i[d+f],m=s[d+f],g=i[d+f+n],y=s[d+f+n],b=u*g-l*y;y=u*y+l*g,g=b,i[d+f]=p+g,s[d+f]=m+y,i[d+f+n]=p-g,s[d+f+n]=m-y,f!==o&&(b=h*u-c*l,l=h*l+c*u,u=b)}},y.prototype.guessLen13b=function(e,t){var i=1|Math.max(t,e),s=1&i,r=0;for(i=i/2|0;i;i>>>=1)r++;return 1<<r+1+s},y.prototype.conjugate=function(e,t,i){if(!(i<=1))for(var s=0;s<i/2;s++){var r=e[s];e[s]=e[i-s-1],e[i-s-1]=r,r=t[s],t[s]=-t[i-s-1],t[i-s-1]=-r}},y.prototype.normalize13b=function(e,t){for(var i=0,s=0;s<t/2;s++){var r=8192*Math.round(e[2*s+1]/t)+Math.round(e[2*s]/t)+i;e[s]=67108863&r,i=r<67108864?0:r/67108864|0}return e},y.prototype.convert13b=function(e,t,i,r){for(var a=0,n=0;n<t;n++)a+=0|e[n],i[2*n]=8191&a,a>>>=13,i[2*n+1]=8191&a,a>>>=13;for(n=2*t;n<r;++n)i[n]=0;s(0===a),s(0==(-8192&a))},y.prototype.stub=function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=0;return t},y.prototype.mulp=function(e,t,i){var s=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(s),a=this.stub(s),n=new Array(s),o=new Array(s),h=new Array(s),c=new Array(s),d=new Array(s),u=new Array(s),l=i.words;l.length=s,this.convert13b(e.words,e.length,n,s),this.convert13b(t.words,t.length,c,s),this.transform(n,a,o,h,s,r),this.transform(c,a,d,u,s,r);for(var f=0;f<s;f++){var p=o[f]*d[f]-h[f]*u[f];h[f]=o[f]*u[f]+h[f]*d[f],o[f]=p}return this.conjugate(o,h,s),this.transform(o,h,l,a,s,r),this.conjugate(l,a,s),this.normalize13b(l,s),i.negative=e.negative^t.negative,i.length=e.length+t.length,i._strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),g(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){var t=e<0;t&&(e=-e),s("number"==typeof e),s(e<67108864);for(var i=0,r=0;r<this.length;r++){var a=(0|this.words[r])*e,n=(67108863&a)+(67108863&i);i>>=26,i+=a/67108864|0,i+=n>>>26,this.words[r]=67108863&n}return 0!==i&&(this.words[r]=i,this.length++),t?this.ineg():this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),i=0;i<t.length;i++){var s=i/26|0,r=i%26;t[i]=e.words[s]>>>r&1}return t}(e);if(0===t.length)return new a(1);for(var i=this,s=0;s<t.length&&0===t[s];s++,i=i.sqr());if(++s<t.length)for(var r=i.sqr();s<t.length;s++,r=r.sqr())0!==t[s]&&(i=i.mul(r));return i},a.prototype.iushln=function(e){s("number"==typeof e&&e>=0);var t,i=e%26,r=(e-i)/26,a=67108863>>>26-i<<26-i;if(0!==i){var n=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,h=(0|this.words[t])-o<<i;this.words[t]=h|n,n=o>>>26-i}n&&(this.words[t]=n,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this._strip()},a.prototype.ishln=function(e){return s(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,i){var r;s("number"==typeof e&&e>=0),r=t?(t-t%26)/26:0;var a=e%26,n=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,h=i;if(r-=n,r=Math.max(0,r),h){for(var c=0;c<n;c++)h.words[c]=this.words[c];h.length=n}if(0===n);else if(this.length>n)for(this.length-=n,c=0;c<this.length;c++)this.words[c]=this.words[c+n];else this.words[0]=0,this.length=1;var d=0;for(c=this.length-1;c>=0&&(0!==d||c>=r);c--){var u=0|this.words[c];this.words[c]=d<<26-a|u>>>a,d=u&o}return h&&0!==d&&(h.words[h.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(e,t,i){return s(0===this.negative),this.iushrn(e,t,i)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,r=1<<t;return!(this.length<=i||!(this.words[i]&r))},a.prototype.imaskn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this._strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return s("number"==typeof e),s(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(s("number"==typeof e),s(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,i){var r,a,n=e.length+i;this._expand(n);var o=0;for(r=0;r<e.length;r++){a=(0|this.words[r+i])+o;var h=(0|e.words[r])*t;o=((a-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&a}for(;r<this.length-i;r++)o=(a=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&a;if(0===o)return this._strip();for(s(-1===o),o=0,r=0;r<this.length;r++)o=(a=-(0|this.words[r])+o)>>26,this.words[r]=67108863&a;return this.negative=1,this._strip()},a.prototype._wordDiv=function(e,t){var i=(this.length,e.length),s=this.clone(),r=e,n=0|r.words[r.length-1];0!=(i=26-this._countBits(n))&&(r=r.ushln(i),s.iushln(i),n=0|r.words[r.length-1]);var o,h=s.length-r.length;if("mod"!==t){(o=new a(null)).length=h+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var d=s.clone()._ishlnsubmul(r,1,h);0===d.negative&&(s=d,o&&(o.words[h]=1));for(var u=h-1;u>=0;u--){var l=67108864*(0|s.words[r.length+u])+(0|s.words[r.length+u-1]);for(l=Math.min(l/n|0,67108863),s._ishlnsubmul(r,l,u);0!==s.negative;)l--,s.negative=0,s._ishlnsubmul(r,1,u),s.isZero()||(s.negative^=1);o&&(o.words[u]=l)}return o&&o._strip(),s._strip(),"div"!==t&&0!==i&&s.iushrn(i),{div:o||null,mod:s}},a.prototype.divmod=function(e,t,i){return s(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(r=o.div.neg()),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.iadd(e)),{div:r,mod:n}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.isub(e)),{div:o.div,mod:n}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modrn(e.words[0]))}:this._wordDiv(e,t);var r,n,o},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var i=0!==t.div.negative?t.mod.isub(e):t.mod,s=e.ushrn(1),r=e.andln(1),a=i.cmp(s);return a<0||1===r&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modrn=function(e){var t=e<0;t&&(e=-e),s(e<=67108863);for(var i=(1<<26)%e,r=0,a=this.length-1;a>=0;a--)r=(i*r+(0|this.words[a]))%e;return t?-r:r},a.prototype.modn=function(e){return this.modrn(e)},a.prototype.idivn=function(e){var t=e<0;t&&(e=-e),s(e<=67108863);for(var i=0,r=this.length-1;r>=0;r--){var a=(0|this.words[r])+67108864*i;this.words[r]=a/e|0,i=a%e}return this._strip(),t?this.ineg():this},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new a(1),n=new a(0),o=new a(0),h=new a(1),c=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++c;for(var d=i.clone(),u=t.clone();!t.isZero();){for(var l=0,f=1;0==(t.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(d),n.isub(u)),r.iushrn(1),n.iushrn(1);for(var p=0,m=1;0==(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(d),h.isub(u)),o.iushrn(1),h.iushrn(1);t.cmp(i)>=0?(t.isub(i),r.isub(o),n.isub(h)):(i.isub(t),o.isub(r),h.isub(n))}return{a:o,b:h,gcd:i.iushln(c)}},a.prototype._invmp=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,n=new a(1),o=new a(0),h=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,d=1;0==(t.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(t.iushrn(c);c-- >0;)n.isOdd()&&n.iadd(h),n.iushrn(1);for(var u=0,l=1;0==(i.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(i.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);t.cmp(i)>=0?(t.isub(i),n.isub(o)):(i.isub(t),o.isub(n))}return(r=0===t.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(e),r},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),i=e.clone();t.negative=0,i.negative=0;for(var s=0;t.isEven()&&i.isEven();s++)t.iushrn(1),i.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=t.cmp(i);if(r<0){var a=t;t=i,i=a}else if(0===r||0===i.cmpn(1))break;t.isub(i)}return i.iushln(s)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){s("number"==typeof e);var t=e%26,i=(e-t)/26,r=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var a=r,n=i;0!==a&&n<this.length;n++){var o=0|this.words[n];a=(o+=a)>>>26,o&=67108863,this.words[n]=o}return 0!==a&&(this.words[n]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)t=1;else{i&&(e=-e),s(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,i=this.length-1;i>=0;i--){var s=0|this.words[i],r=0|e.words[i];if(s!==r){s<r?t=-1:s>r&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new O(e)},a.prototype.toRed=function(e){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return s(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return s(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function O(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else s(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function M(e){O.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,i=e;do{this.split(i,this.tmp),t=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(t>this.n);var s=t<this.n?-1:i.ucmp(this.p);return 0===s?(i.words[0]=0,i.length=1):s>0?i.isub(this.p):i._strip(),i},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},r(w,v),w.prototype.split=function(e,t){for(var i=4194303,s=Math.min(e.length,9),r=0;r<s;r++)t.words[r]=e.words[r];if(t.length=s,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&i,r=10;r<e.length;r++){var n=0|e.words[r];e.words[r-10]=(n&i)<<4|a>>>22,a=n}a>>>=22,e.words[r-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},w.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,i=0;i<e.length;i++){var s=0|e.words[i];t+=977*s,e.words[i]=67108863&t,t=64*s+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(k,v),r(_,v),r(S,v),S.prototype.imulK=function(e){for(var t=0,i=0;i<e.length;i++){var s=19*(0|e.words[i])+t,r=67108863&s;s>>>=26,e.words[i]=r,t=s}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(b[e])return b[e];var t;if("k256"===e)t=new w;else if("p224"===e)t=new k;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new S}return b[e]=t,t},O.prototype._verify1=function(e){s(0===e.negative,"red works only with positives"),s(e.red,"red works only with red numbers")},O.prototype._verify2=function(e,t){s(0==(e.negative|t.negative),"red works only with positives"),s(e.red&&e.red===t.red,"red works only with red numbers")},O.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(e.umod(this.m)._forceRed(this)._move(e),e)},O.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},O.prototype.add=function(e,t){this._verify2(e,t);var i=e.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},O.prototype.iadd=function(e,t){this._verify2(e,t);var i=e.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i},O.prototype.sub=function(e,t){this._verify2(e,t);var i=e.sub(t);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},O.prototype.isub=function(e,t){this._verify2(e,t);var i=e.isub(t);return i.cmpn(0)<0&&i.iadd(this.m),i},O.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},O.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},O.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},O.prototype.isqr=function(e){return this.imul(e,e.clone())},O.prototype.sqr=function(e){return this.mul(e,e)},O.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(s(t%2==1),3===t){var i=this.m.add(new a(1)).iushrn(2);return this.pow(e,i)}for(var r=this.m.subn(1),n=0;!r.isZero()&&0===r.andln(1);)n++,r.iushrn(1);s(!r.isZero());var o=new a(1).toRed(this),h=o.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);0!==this.pow(d,c).cmp(h);)d.redIAdd(h);for(var u=this.pow(d,r),l=this.pow(e,r.addn(1).iushrn(1)),f=this.pow(e,r),p=n;0!==f.cmp(o);){for(var m=f,g=0;0!==m.cmp(o);g++)m=m.redSqr();s(g<p);var y=this.pow(u,new a(1).iushln(p-g-1));l=l.redMul(y),u=y.redSqr(),f=f.redMul(u),p=g}return l},O.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},O.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var i=new Array(16);i[0]=new a(1).toRed(this),i[1]=e;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],e);var r=i[0],n=0,o=0,h=t.bitLength()%26;for(0===h&&(h=26),s=t.length-1;s>=0;s--){for(var c=t.words[s],d=h-1;d>=0;d--){var u=c>>d&1;r!==i[0]&&(r=this.sqr(r)),0!==u||0!==n?(n<<=1,n|=u,(4==++o||0===s&&0===d)&&(r=this.mul(r,i[n]),o=0,n=0)):o=0}h=26}return r},O.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},O.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new M(e)},r(M,O),M.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},M.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},M.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var i=e.imul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},M.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var i=e.mul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n._forceRed(this)},M.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=i.nmd(e),this)},27295:function(e,t){var i,s,r,a,n,o,h,c,d,u,l;e.exports=(l=l||function(e,t){var i=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),s={},r=s.lib={},a=r.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},n=r.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,i=e.words,s=this.sigBytes,r=e.sigBytes;if(this.clamp(),s%4)for(var a=0;a<r;a++){var n=i[a>>>2]>>>24-a%4*8&255;t[s+a>>>2]|=n<<24-(s+a)%4*8}else for(a=0;a<r;a+=4)t[s+a>>>2]=i[a>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i,s=[],r=function(t){t=t;var i=987654321,s=4294967295;return function(){var r=((i=36969*(65535&i)+(i>>16)&s)<<16)+(t=18e3*(65535&t)+(t>>16)&s)&s;return r/=4294967296,(r+=.5)*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var o=r(4294967296*(i||e.random()));i=987654071*o(),s.push(4294967296*o()|0)}return new n.init(s,t)}}),o=s.enc={},h=o.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],r=0;r<i;r++){var a=t[r>>>2]>>>24-r%4*8&255;s.push((a>>>4).toString(16)),s.push((15&a).toString(16))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s+=2)i[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new n.init(i,t/2)}},c=o.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],r=0;r<i;r++){var a=t[r>>>2]>>>24-r%4*8&255;s.push(String.fromCharCode(a))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new n.init(i,t)}},d=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},u=r.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new n.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,s=i.words,r=i.sigBytes,a=this.blockSize,o=r/(4*a),h=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*a,c=e.min(4*h,r);if(h){for(var d=0;d<h;d+=a)this._doProcessBlock(s,d);var u=s.splice(0,h);i.sigBytes-=c}return new n.init(u,c)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),l=(r.Hasher=u.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new l.HMAC.init(e,i).finalize(t)}}}),s.algo={});return s}(Math),function(){var e=l,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,s=this._map;e.clamp();for(var r=[],a=0;a<i;a+=3)for(var n=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,o=0;o<4&&a+.75*o<i;o++)r.push(s.charAt(n>>>6*(3-o)&63));var h=s.charAt(64);if(h)for(;r.length%4;)r.push(h);return r.join("")},parse:function(e){var i=e.length,s=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var a=0;a<s.length;a++)r[s.charCodeAt(a)]=a}var n=s.charAt(64);if(n){var o=e.indexOf(n);-1!==o&&(i=o)}return function(e,i,s){for(var r=[],a=0,n=0;n<i;n++)if(n%4){var o=s[e.charCodeAt(n-1)]<<n%4*2,h=s[e.charCodeAt(n)]>>>6-n%4*2;r[a>>>2]|=(o|h)<<24-a%4*8,a++}return t.create(r,a)}(e,i,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){var t=l,i=t.lib,s=i.WordArray,r=i.Hasher,a=t.algo,n=[];!function(){for(var t=0;t<64;t++)n[t]=4294967296*e.abs(e.sin(t+1))|0}();var o=a.MD5=r.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=t+i,r=e[s];e[s]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var a=this._hash.words,o=e[t+0],l=e[t+1],f=e[t+2],p=e[t+3],m=e[t+4],g=e[t+5],y=e[t+6],b=e[t+7],v=e[t+8],w=e[t+9],k=e[t+10],_=e[t+11],S=e[t+12],O=e[t+13],M=e[t+14],T=e[t+15],x=a[0],I=a[1],A=a[2],C=a[3];x=h(x,I,A,C,o,7,n[0]),C=h(C,x,I,A,l,12,n[1]),A=h(A,C,x,I,f,17,n[2]),I=h(I,A,C,x,p,22,n[3]),x=h(x,I,A,C,m,7,n[4]),C=h(C,x,I,A,g,12,n[5]),A=h(A,C,x,I,y,17,n[6]),I=h(I,A,C,x,b,22,n[7]),x=h(x,I,A,C,v,7,n[8]),C=h(C,x,I,A,w,12,n[9]),A=h(A,C,x,I,k,17,n[10]),I=h(I,A,C,x,_,22,n[11]),x=h(x,I,A,C,S,7,n[12]),C=h(C,x,I,A,O,12,n[13]),A=h(A,C,x,I,M,17,n[14]),x=c(x,I=h(I,A,C,x,T,22,n[15]),A,C,l,5,n[16]),C=c(C,x,I,A,y,9,n[17]),A=c(A,C,x,I,_,14,n[18]),I=c(I,A,C,x,o,20,n[19]),x=c(x,I,A,C,g,5,n[20]),C=c(C,x,I,A,k,9,n[21]),A=c(A,C,x,I,T,14,n[22]),I=c(I,A,C,x,m,20,n[23]),x=c(x,I,A,C,w,5,n[24]),C=c(C,x,I,A,M,9,n[25]),A=c(A,C,x,I,p,14,n[26]),I=c(I,A,C,x,v,20,n[27]),x=c(x,I,A,C,O,5,n[28]),C=c(C,x,I,A,f,9,n[29]),A=c(A,C,x,I,b,14,n[30]),x=d(x,I=c(I,A,C,x,S,20,n[31]),A,C,g,4,n[32]),C=d(C,x,I,A,v,11,n[33]),A=d(A,C,x,I,_,16,n[34]),I=d(I,A,C,x,M,23,n[35]),x=d(x,I,A,C,l,4,n[36]),C=d(C,x,I,A,m,11,n[37]),A=d(A,C,x,I,b,16,n[38]),I=d(I,A,C,x,k,23,n[39]),x=d(x,I,A,C,O,4,n[40]),C=d(C,x,I,A,o,11,n[41]),A=d(A,C,x,I,p,16,n[42]),I=d(I,A,C,x,y,23,n[43]),x=d(x,I,A,C,w,4,n[44]),C=d(C,x,I,A,S,11,n[45]),A=d(A,C,x,I,T,16,n[46]),x=u(x,I=d(I,A,C,x,f,23,n[47]),A,C,o,6,n[48]),C=u(C,x,I,A,b,10,n[49]),A=u(A,C,x,I,M,15,n[50]),I=u(I,A,C,x,g,21,n[51]),x=u(x,I,A,C,S,6,n[52]),C=u(C,x,I,A,p,10,n[53]),A=u(A,C,x,I,k,15,n[54]),I=u(I,A,C,x,l,21,n[55]),x=u(x,I,A,C,v,6,n[56]),C=u(C,x,I,A,T,10,n[57]),A=u(A,C,x,I,y,15,n[58]),I=u(I,A,C,x,O,21,n[59]),x=u(x,I,A,C,m,6,n[60]),C=u(C,x,I,A,_,10,n[61]),A=u(A,C,x,I,f,15,n[62]),I=u(I,A,C,x,w,21,n[63]),a[0]=a[0]+x|0,a[1]=a[1]+I|0,a[2]=a[2]+A|0,a[3]=a[3]+C|0},_doFinalize:function(){var t=this._data,i=t.words,s=8*this._nDataBytes,r=8*t.sigBytes;i[r>>>5]|=128<<24-r%32;var a=e.floor(s/4294967296),n=s;i[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(i.length+1),this._process();for(var o=this._hash,h=o.words,c=0;c<4;c++){var d=h[c];h[c]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return o},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function h(e,t,i,s,r,a,n){var o=e+(t&i|~t&s)+r+n;return(o<<a|o>>>32-a)+t}function c(e,t,i,s,r,a,n){var o=e+(t&s|i&~s)+r+n;return(o<<a|o>>>32-a)+t}function d(e,t,i,s,r,a,n){var o=e+(t^i^s)+r+n;return(o<<a|o>>>32-a)+t}function u(e,t,i,s,r,a,n){var o=e+(i^(t|~s))+r+n;return(o<<a|o>>>32-a)+t}t.MD5=r._createHelper(o),t.HmacMD5=r._createHmacHelper(o)}(Math),n=(a=l).lib,o=n.WordArray,h=n.Hasher,c=a.algo,d=[],u=c.SHA1=h.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],r=i[1],a=i[2],n=i[3],o=i[4],h=0;h<80;h++){if(h<16)d[h]=0|e[t+h];else{var c=d[h-3]^d[h-8]^d[h-14]^d[h-16];d[h]=c<<1|c>>>31}var u=(s<<5|s>>>27)+o+d[h];u+=h<20?1518500249+(r&a|~r&n):h<40?1859775393+(r^a^n):h<60?(r&a|r&n|a&n)-1894007588:(r^a^n)-899497514,o=n,n=a,a=r<<30|r>>>2,r=s,s=u}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+a|0,i[3]=i[3]+n|0,i[4]=i[4]+o|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[14+(s+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(s+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=h.clone.call(this);return e._hash=this._hash.clone(),e}}),a.SHA1=h._createHelper(u),a.HmacSHA1=h._createHmacHelper(u),function(e){var t=l,i=t.lib,s=i.WordArray,r=i.Hasher,a=t.algo,n=[],o=[];!function(){function t(t){for(var i=e.sqrt(t),s=2;s<=i;s++)if(!(t%s))return!1;return!0}function i(e){return 4294967296*(e-(0|e))|0}for(var s=2,r=0;r<64;)t(s)&&(r<8&&(n[r]=i(e.pow(s,.5))),o[r]=i(e.pow(s,1/3)),r++),s++}();var h=[],c=a.SHA256=r.extend({_doReset:function(){this._hash=new s.init(n.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],r=i[1],a=i[2],n=i[3],c=i[4],d=i[5],u=i[6],l=i[7],f=0;f<64;f++){if(f<16)h[f]=0|e[t+f];else{var p=h[f-15],m=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=h[f-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;h[f]=m+h[f-7]+y+h[f-16]}var b=s&r^s&a^r&a,v=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),w=l+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&d^~c&u)+o[f]+h[f];l=u,u=d,d=c,c=n+w|0,n=a,a=r,r=s,s=w+(v+b)|0}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+a|0,i[3]=i[3]+n|0,i[4]=i[4]+c|0,i[5]=i[5]+d|0,i[6]=i[6]+u|0,i[7]=i[7]+l|0},_doFinalize:function(){var t=this._data,i=t.words,s=8*this._nDataBytes,r=8*t.sigBytes;return i[r>>>5]|=128<<24-r%32,i[14+(r+64>>>9<<4)]=e.floor(s/4294967296),i[15+(r+64>>>9<<4)]=s,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=r._createHelper(c),t.HmacSHA256=r._createHmacHelper(c)}(Math),function(){var e=l,t=e.lib.WordArray,i=e.enc;function s(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],r=0;r<i;r+=2){var a=t[r>>>2]>>>16-r%4*8&65535;s.push(String.fromCharCode(a))}return s.join("")},parse:function(e){for(var i=e.length,s=[],r=0;r<i;r++)s[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return t.create(s,2*i)}},i.Utf16LE={stringify:function(e){for(var t=e.words,i=e.sigBytes,r=[],a=0;a<i;a+=2){var n=s(t[a>>>2]>>>16-a%4*8&65535);r.push(String.fromCharCode(n))}return r.join("")},parse:function(e){for(var i=e.length,r=[],a=0;a<i;a++)r[a>>>1]|=s(e.charCodeAt(a)<<16-a%2*16);return t.create(r,2*i)}}}(),function(){if("function"==typeof ArrayBuffer){var e=l.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var i=e.byteLength,s=[],r=0;r<i;r++)s[r>>>2]|=e[r]<<24-r%4*8;t.call(this,s,i)}else t.apply(this,arguments)}).prototype=e}}(),function(e){var t=l,i=t.lib,s=i.WordArray,r=i.Hasher,a=t.algo,n=s.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),o=s.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=s.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),c=s.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=s.create([0,1518500249,1859775393,2400959708,2840853838]),u=s.create([1352829926,1548603684,1836072691,2053994217,0]),f=a.RIPEMD160=r.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=t+i,r=e[s];e[s]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var a,l,f,w,k,_,S,O,M,T,x,I=this._hash.words,A=d.words,C=u.words,N=n.words,E=o.words,P=h.words,B=c.words;for(_=a=I[0],S=l=I[1],O=f=I[2],M=w=I[3],T=k=I[4],i=0;i<80;i+=1)x=a+e[t+N[i]]|0,x+=i<16?p(l,f,w)+A[0]:i<32?m(l,f,w)+A[1]:i<48?g(l,f,w)+A[2]:i<64?y(l,f,w)+A[3]:b(l,f,w)+A[4],x=(x=v(x|=0,P[i]))+k|0,a=k,k=w,w=v(f,10),f=l,l=x,x=_+e[t+E[i]]|0,x+=i<16?b(S,O,M)+C[0]:i<32?y(S,O,M)+C[1]:i<48?g(S,O,M)+C[2]:i<64?m(S,O,M)+C[3]:p(S,O,M)+C[4],x=(x=v(x|=0,B[i]))+T|0,_=T,T=M,M=v(O,10),O=S,S=x;x=I[1]+f+M|0,I[1]=I[2]+w+T|0,I[2]=I[3]+k+_|0,I[3]=I[4]+a+S|0,I[4]=I[0]+l+O|0,I[0]=x},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;t[s>>>5]|=128<<24-s%32,t[14+(s+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,a=r.words,n=0;n<5;n++){var o=a[n];a[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}return r},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,i){return e^t^i}function m(e,t,i){return e&t|~e&i}function g(e,t,i){return(e|~t)^i}function y(e,t,i){return e&i|t&~i}function b(e,t,i){return e^(t|~i)}function v(e,t){return e<<t|e>>>32-t}t.RIPEMD160=r._createHelper(f),t.HmacRIPEMD160=r._createHmacHelper(f)}(Math),function(){var e=l,t=e.lib.Base,i=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var s=e.blockSize,r=4*s;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),n=this._iKey=t.clone(),o=a.words,h=n.words,c=0;c<s;c++)o[c]^=1549556828,h[c]^=909522486;a.sigBytes=n.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})}(),function(){var e=l,t=e.lib,i=t.Base,s=t.WordArray,r=e.algo,a=r.SHA1,n=r.HMAC,o=r.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,r=n.create(i.hasher,e),a=s.create(),o=s.create([1]),h=a.words,c=o.words,d=i.keySize,u=i.iterations;h.length<d;){var l=r.update(t).finalize(o);r.reset();for(var f=l.words,p=f.length,m=l,g=1;g<u;g++){m=r.finalize(m),r.reset();for(var y=m.words,b=0;b<p;b++)f[b]^=y[b]}a.concat(l),c[0]++}return a.sigBytes=4*d,a}});e.PBKDF2=function(e,t,i){return o.create(i).compute(e,t)}}(),function(){var e=l,t=e.lib,i=t.Base,s=t.WordArray,r=e.algo,a=r.MD5,n=r.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,r=i.hasher.create(),a=s.create(),n=a.words,o=i.keySize,h=i.iterations;n.length<o;){c&&r.update(c);var c=r.update(e).finalize(t);r.reset();for(var d=1;d<h;d++)c=r.finalize(c),r.reset();a.concat(c)}return a.sigBytes=4*o,a}});e.EvpKDF=function(e,t,i){return n.create(i).compute(e,t)}}(),function(){var e=l,t=e.lib.WordArray,i=e.algo,s=i.SHA256,r=i.SHA224=s.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=s._createHelper(r),e.HmacSHA224=s._createHmacHelper(r)}(),function(e){var t=l,i=t.lib,s=i.Base,r=i.WordArray,a=t.x64={};a.Word=s.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],s=0;s<t;s++){var a=e[s];i.push(a.high),i.push(a.low)}return r.create(i,this.sigBytes)},clone:function(){for(var e=s.clone.call(this),t=e.words=this.words.slice(0),i=t.length,r=0;r<i;r++)t[r]=t[r].clone();return e}})}(),function(e){var t=l,i=t.lib,s=i.WordArray,r=i.Hasher,a=t.x64.Word,n=t.algo,o=[],h=[],c=[];!function(){for(var e=1,t=0,i=0;i<24;i++){o[e+5*t]=(i+1)*(i+2)/2%64;var s=(2*e+3*t)%5;e=t%5,t=s}for(e=0;e<5;e++)for(t=0;t<5;t++)h[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,n=0;n<24;n++){for(var d=0,u=0,l=0;l<7;l++){if(1&r){var f=(1<<l)-1;f<32?u^=1<<f:d^=1<<f-32}128&r?r=r<<1^113:r<<=1}c[n]=a.create(d,u)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=a.create()}();var u=n.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,s=this.blockSize/2,r=0;r<s;r++){var a=e[t+2*r],n=e[t+2*r+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),(I=i[r]).high^=n,I.low^=a}for(var u=0;u<24;u++){for(var l=0;l<5;l++){for(var f=0,p=0,m=0;m<5;m++)f^=(I=i[l+5*m]).high,p^=I.low;var g=d[l];g.high=f,g.low=p}for(l=0;l<5;l++){var y=d[(l+4)%5],b=d[(l+1)%5],v=b.high,w=b.low;for(f=y.high^(v<<1|w>>>31),p=y.low^(w<<1|v>>>31),m=0;m<5;m++)(I=i[l+5*m]).high^=f,I.low^=p}for(var k=1;k<25;k++){var _=(I=i[k]).high,S=I.low,O=o[k];O<32?(f=_<<O|S>>>32-O,p=S<<O|_>>>32-O):(f=S<<O-32|_>>>64-O,p=_<<O-32|S>>>64-O);var M=d[h[k]];M.high=f,M.low=p}var T=d[0],x=i[0];for(T.high=x.high,T.low=x.low,l=0;l<5;l++)for(m=0;m<5;m++){var I=i[k=l+5*m],A=d[k],C=d[(l+1)%5+5*m],N=d[(l+2)%5+5*m];I.high=A.high^~C.high&N.high,I.low=A.low^~C.low&N.low}I=i[0];var E=c[u];I.high^=E.high,I.low^=E.low}},_doFinalize:function(){var t=this._data,i=t.words,r=(this._nDataBytes,8*t.sigBytes),a=32*this.blockSize;i[r>>>5]|=1<<24-r%32,i[(e.ceil((r+1)/a)*a>>>5)-1]|=128,t.sigBytes=4*i.length,this._process();for(var n=this._state,o=this.cfg.outputLength/8,h=o/8,c=[],d=0;d<h;d++){var u=n[d],l=u.high,f=u.low;l=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c.push(f),c.push(l)}return new s.init(c,o)},clone:function(){for(var e=r.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}});t.SHA3=r._createHelper(u),t.HmacSHA3=r._createHmacHelper(u)}(Math),function(){var e=l,t=e.lib.Hasher,i=e.x64,s=i.Word,r=i.WordArray,a=e.algo;function n(){return s.create.apply(s,arguments)}var o=[n(1116352408,3609767458),n(1899447441,602891725),n(3049323471,3964484399),n(3921009573,2173295548),n(961987163,4081628472),n(1508970993,3053834265),n(2453635748,2937671579),n(2870763221,3664609560),n(3624381080,2734883394),n(310598401,1164996542),n(607225278,1323610764),n(1426881987,3590304994),n(1925078388,4068182383),n(2162078206,991336113),n(2614888103,633803317),n(3248222580,3479774868),n(3835390401,2666613458),n(4022224774,944711139),n(264347078,2341262773),n(604807628,2007800933),n(770255983,1495990901),n(1249150122,1856431235),n(1555081692,3175218132),n(1996064986,2198950837),n(2554220882,3999719339),n(2821834349,766784016),n(2952996808,2566594879),n(3210313671,3203337956),n(3336571891,1034457026),n(3584528711,2466948901),n(113926993,3758326383),n(338241895,168717936),n(666307205,1188179964),n(773529912,1546045734),n(1294757372,1522805485),n(1396182291,2643833823),n(1695183700,2343527390),n(1986661051,1014477480),n(2177026350,1206759142),n(2456956037,344077627),n(2730485921,1290863460),n(2820302411,3158454273),n(3259730800,3505952657),n(3345764771,106217008),n(3516065817,3606008344),n(3600352804,1432725776),n(4094571909,1467031594),n(275423344,851169720),n(430227734,3100823752),n(506948616,1363258195),n(659060556,3750685593),n(883997877,3785050280),n(958139571,3318307427),n(1322822218,3812723403),n(1537002063,2003034995),n(1747873779,3602036899),n(1955562222,1575990012),n(2024104815,1125592928),n(2227730452,2716904306),n(2361852424,442776044),n(2428436474,593698344),n(2756734187,3733110249),n(3204031479,2999351573),n(3329325298,3815920427),n(3391569614,3928383900),n(3515267271,566280711),n(3940187606,3454069534),n(4118630271,4000239992),n(116418474,1914138554),n(174292421,2731055270),n(289380356,3203993006),n(460393269,320620315),n(685471733,587496836),n(852142971,1086792851),n(1017036298,365543100),n(1126000580,2618297676),n(1288033470,3409855158),n(1501505948,4234509866),n(1607167915,987167468),n(1816402316,1246189591)],h=[];!function(){for(var e=0;e<80;e++)h[e]=n()}();var c=a.SHA512=t.extend({_doReset:function(){this._hash=new r.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],r=i[1],a=i[2],n=i[3],c=i[4],d=i[5],u=i[6],l=i[7],f=s.high,p=s.low,m=r.high,g=r.low,y=a.high,b=a.low,v=n.high,w=n.low,k=c.high,_=c.low,S=d.high,O=d.low,M=u.high,T=u.low,x=l.high,I=l.low,A=f,C=p,N=m,E=g,P=y,B=b,R=v,V=w,L=k,D=_,q=S,G=O,F=M,j=T,U=x,H=I,z=0;z<80;z++){var K=h[z];if(z<16)var W=K.high=0|e[t+2*z],X=K.low=0|e[t+2*z+1];else{var Z=h[z-15],Y=Z.high,Q=Z.low,J=(Y>>>1|Q<<31)^(Y>>>8|Q<<24)^Y>>>7,$=(Q>>>1|Y<<31)^(Q>>>8|Y<<24)^(Q>>>7|Y<<25),ee=h[z-2],te=ee.high,ie=ee.low,se=(te>>>19|ie<<13)^(te<<3|ie>>>29)^te>>>6,re=(ie>>>19|te<<13)^(ie<<3|te>>>29)^(ie>>>6|te<<26),ae=h[z-7],ne=ae.high,oe=ae.low,he=h[z-16],ce=he.high,de=he.low;W=(W=(W=J+ne+((X=$+oe)>>>0<$>>>0?1:0))+se+((X+=re)>>>0<re>>>0?1:0))+ce+((X+=de)>>>0<de>>>0?1:0),K.high=W,K.low=X}var ue,le=L&q^~L&F,fe=D&G^~D&j,pe=A&N^A&P^N&P,me=C&E^C&B^E&B,ge=(A>>>28|C<<4)^(A<<30|C>>>2)^(A<<25|C>>>7),ye=(C>>>28|A<<4)^(C<<30|A>>>2)^(C<<25|A>>>7),be=(L>>>14|D<<18)^(L>>>18|D<<14)^(L<<23|D>>>9),ve=(D>>>14|L<<18)^(D>>>18|L<<14)^(D<<23|L>>>9),we=o[z],ke=we.high,_e=we.low,Se=U+be+((ue=H+ve)>>>0<H>>>0?1:0),Oe=ye+me;U=F,H=j,F=q,j=G,q=L,G=D,L=R+(Se=(Se=(Se=Se+le+((ue+=fe)>>>0<fe>>>0?1:0))+ke+((ue+=_e)>>>0<_e>>>0?1:0))+W+((ue+=X)>>>0<X>>>0?1:0))+((D=V+ue|0)>>>0<V>>>0?1:0)|0,R=P,V=B,P=N,B=E,N=A,E=C,A=Se+(ge+pe+(Oe>>>0<ye>>>0?1:0))+((C=ue+Oe|0)>>>0<ue>>>0?1:0)|0}p=s.low=p+C,s.high=f+A+(p>>>0<C>>>0?1:0),g=r.low=g+E,r.high=m+N+(g>>>0<E>>>0?1:0),b=a.low=b+B,a.high=y+P+(b>>>0<B>>>0?1:0),w=n.low=w+V,n.high=v+R+(w>>>0<V>>>0?1:0),_=c.low=_+D,c.high=k+L+(_>>>0<D>>>0?1:0),O=d.low=O+G,d.high=S+q+(O>>>0<G>>>0?1:0),T=u.low=T+j,u.high=M+F+(T>>>0<j>>>0?1:0),I=l.low=I+H,l.high=x+U+(I>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[30+(s+128>>>10<<5)]=Math.floor(i/4294967296),t[31+(s+128>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(c),e.HmacSHA512=t._createHmacHelper(c)}(),function(){var e=l,t=e.x64,i=t.Word,s=t.WordArray,r=e.algo,a=r.SHA512,n=r.SHA384=a.extend({_doReset:function(){this._hash=new s.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=a._createHelper(n),e.HmacSHA384=a._createHmacHelper(n)}(),l.lib.Cipher||function(e){var t=l,i=t.lib,s=i.Base,r=i.WordArray,a=i.BufferedBlockAlgorithm,n=t.enc,o=(n.Utf8,n.Base64),h=t.algo.EvpKDF,c=i.Cipher=a.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:y}return function(t){return{encrypt:function(i,s,r){return e(s).encrypt(t,i,s,r)},decrypt:function(i,s,r){return e(s).decrypt(t,i,s,r)}}}}()}),d=(i.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),u=i.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=d.CBC=function(){var e=u.extend();function t(e,t,i){var s=this._iv;if(s){var r=s;this._iv=undefined}else r=this._prevBlock;for(var a=0;a<i;a++)e[t+a]^=r[a]}return e.Encryptor=e.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize;t.call(this,e,i,r),s.encryptBlock(e,i),this._prevBlock=e.slice(i,i+r)}}),e.Decryptor=e.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize,a=e.slice(i,i+r);s.decryptBlock(e,i),t.call(this,e,i,r),this._prevBlock=a}}),e}(),p=(t.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,s=i-e.sigBytes%i,a=s<<24|s<<16|s<<8|s,n=[],o=0;o<s;o+=4)n.push(a);var h=r.create(n,s);e.concat(h)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},m=(i.BlockCipher=c.extend({cfg:c.cfg.extend({mode:f,padding:p}),reset:function(){c.reset.call(this);var e=this.cfg,t=e.iv,i=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var s=i.createEncryptor;else s=i.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==s?this._mode.init(this,t&&t.words):(this._mode=s.call(i,this,t&&t.words),this._mode.__creator=s)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),i.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),g=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;if(i)var s=r.create([1398893684,1701076831]).concat(i).concat(t);else s=t;return s.toString(o)},parse:function(e){var t=o.parse(e),i=t.words;if(1398893684==i[0]&&1701076831==i[1]){var s=r.create(i.slice(2,4));i.splice(0,4),t.sigBytes-=16}return m.create({ciphertext:t,salt:s})}},y=i.SerializableCipher=s.extend({cfg:s.extend({format:g}),encrypt:function(e,t,i,s){s=this.cfg.extend(s);var r=e.createEncryptor(i,s),a=r.finalize(t),n=r.cfg;return m.create({ciphertext:a,key:i,iv:n.iv,algorithm:e,mode:n.mode,padding:n.padding,blockSize:e.blockSize,formatter:s.format})},decrypt:function(e,t,i,s){return s=this.cfg.extend(s),t=this._parse(t,s.format),e.createDecryptor(i,s).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=(t.kdf={}).OpenSSL={execute:function(e,t,i,s){s||(s=r.random(8));var a=h.create({keySize:t+i}).compute(e,s),n=r.create(a.words.slice(t),4*i);return a.sigBytes=4*t,m.create({key:a,iv:n,salt:s})}},v=i.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:b}),encrypt:function(e,t,i,s){var r=(s=this.cfg.extend(s)).kdf.execute(i,e.keySize,e.ivSize);s.iv=r.iv;var a=y.encrypt.call(this,e,t,r.key,s);return a.mixIn(r),a},decrypt:function(e,t,i,s){s=this.cfg.extend(s),t=this._parse(t,s.format);var r=s.kdf.execute(i,e.keySize,e.ivSize,t.salt);return s.iv=r.iv,y.decrypt.call(this,e,t,r.key,s)}})}(),l.mode.CFB=function(){var e=l.lib.BlockCipherMode.extend();function t(e,t,i,s){var r=this._iv;if(r){var a=r.slice(0);this._iv=void 0}else a=this._prevBlock;s.encryptBlock(a,0);for(var n=0;n<i;n++)e[t+n]^=a[n]}return e.Encryptor=e.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize;t.call(this,e,i,r,s),this._prevBlock=e.slice(i,i+r)}}),e.Decryptor=e.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize,a=e.slice(i,i+r);t.call(this,e,i,r,s),this._prevBlock=a}}),e}(),l.mode.ECB=((r=l.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),r.Decryptor=r.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),r),l.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,s=4*t,r=s-i%s,a=i+r-1;e.clamp(),e.words[a>>>2]|=r<<24-a%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},l.pad.Iso10126={pad:function(e,t){var i=4*t,s=i-e.sigBytes%i;e.concat(l.lib.WordArray.random(s-1)).concat(l.lib.WordArray.create([s<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},l.pad.Iso97971={pad:function(e,t){e.concat(l.lib.WordArray.create([2147483648],1)),l.pad.ZeroPadding.pad(e,t)},unpad:function(e){l.pad.ZeroPadding.unpad(e),e.sigBytes--}},l.mode.OFB=(s=(i=l.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,r=this._iv,a=this._keystream;r&&(a=this._keystream=r.slice(0),this._iv=void 0),i.encryptBlock(a,0);for(var n=0;n<s;n++)e[t+n]^=a[n]}}),i.Decryptor=s,i),l.pad.NoPadding={pad:function(){},unpad:function(){}},function(e){var t=l,i=t.lib.CipherParams,s=t.enc.Hex;t.format.Hex={stringify:function(e){return e.ciphertext.toString(s)},parse:function(e){var t=s.parse(e);return i.create({ciphertext:t})}}}(),function(){var e=l,t=e.lib.BlockCipher,i=e.algo,s=[],r=[],a=[],n=[],o=[],h=[],c=[],d=[],u=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var i=0,l=0;for(t=0;t<256;t++){var p=l^l<<1^l<<2^l<<3^l<<4;p=p>>>8^255&p^99,s[i]=p,r[p]=i;var m=e[i],g=e[m],y=e[g],b=257*e[p]^16843008*p;a[i]=b<<24|b>>>8,n[i]=b<<16|b>>>16,o[i]=b<<8|b>>>24,h[i]=b,b=16843009*y^65537*g^257*m^16843008*i,c[p]=b<<24|b>>>8,d[p]=b<<16|b>>>16,u[p]=b<<8|b>>>24,f[p]=b,i?(i=m^e[e[e[y^m]]],l^=e[e[l]]):i=l=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],m=i.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,r=4*((this._nRounds=i+6)+1),a=this._keySchedule=[],n=0;n<r;n++)if(n<i)a[n]=t[n];else{var o=a[n-1];n%i?i>6&&n%i==4&&(o=s[o>>>24]<<24|s[o>>>16&255]<<16|s[o>>>8&255]<<8|s[255&o]):(o=s[(o=o<<8|o>>>24)>>>24]<<24|s[o>>>16&255]<<16|s[o>>>8&255]<<8|s[255&o],o^=p[n/i|0]<<24),a[n]=a[n-i]^o}for(var h=this._invKeySchedule=[],l=0;l<r;l++)n=r-l,o=l%4?a[n]:a[n-4],h[l]=l<4||n<=4?o:c[s[o>>>24]]^d[s[o>>>16&255]]^u[s[o>>>8&255]]^f[s[255&o]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,n,o,h,s)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,c,d,u,f,r),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,s,r,a,n,o){for(var h=this._nRounds,c=e[t]^i[0],d=e[t+1]^i[1],u=e[t+2]^i[2],l=e[t+3]^i[3],f=4,p=1;p<h;p++){var m=s[c>>>24]^r[d>>>16&255]^a[u>>>8&255]^n[255&l]^i[f++],g=s[d>>>24]^r[u>>>16&255]^a[l>>>8&255]^n[255&c]^i[f++],y=s[u>>>24]^r[l>>>16&255]^a[c>>>8&255]^n[255&d]^i[f++],b=s[l>>>24]^r[c>>>16&255]^a[d>>>8&255]^n[255&u]^i[f++];c=m,d=g,u=y,l=b}m=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[u>>>8&255]<<8|o[255&l])^i[f++],g=(o[d>>>24]<<24|o[u>>>16&255]<<16|o[l>>>8&255]<<8|o[255&c])^i[f++],y=(o[u>>>24]<<24|o[l>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^i[f++],b=(o[l>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&u])^i[f++],e[t]=m,e[t+1]=g,e[t+2]=y,e[t+3]=b},keySize:8});e.AES=t._createHelper(m)}(),function(){var e=l,t=e.lib,i=t.WordArray,s=t.BlockCipher,r=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],n=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],o=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=r.DES=s.extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;i<56;i++){var s=a[i]-1;t[i]=e[s>>>5]>>>31-s%32&1}for(var r=this._subKeys=[],h=0;h<16;h++){var c=r[h]=[],d=o[h];for(i=0;i<24;i++)c[i/6|0]|=t[(n[i]-1+d)%28]<<31-i%6,c[4+(i/6|0)]|=t[28+(n[i+24]-1+d)%28]<<31-i%6;for(c[0]=c[0]<<1|c[0]>>>31,i=1;i<7;i++)c[i]=c[i]>>>4*(i-1)+3;c[7]=c[7]<<5|c[7]>>>27}var u=this._invSubKeys=[];for(i=0;i<16;i++)u[i]=r[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,i){this._lBlock=e[t],this._rBlock=e[t+1],u.call(this,4,252645135),u.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),u.call(this,1,1431655765);for(var s=0;s<16;s++){for(var r=i[s],a=this._lBlock,n=this._rBlock,o=0,d=0;d<8;d++)o|=h[d][((n^r[d])&c[d])>>>0];this._lBlock=n,this._rBlock=a^o}var l=this._lBlock;this._lBlock=this._rBlock,this._rBlock=l,u.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),u.call(this,16,65535),u.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function u(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function f(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}e.DES=s._createHelper(d);var p=r.TripleDES=s.extend({_doReset:function(){var e=this._key.words;this._des1=d.createEncryptor(i.create(e.slice(0,2))),this._des2=d.createEncryptor(i.create(e.slice(2,4))),this._des3=d.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=s._createHelper(p)}(),function(){var e=l,t=e.lib.StreamCipher,i=e.algo,s=i.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,s=this._S=[],r=0;r<256;r++)s[r]=r;r=0;for(var a=0;r<256;r++){var n=r%i,o=t[n>>>2]>>>24-n%4*8&255;a=(a+s[r]+o)%256;var h=s[r];s[r]=s[a],s[a]=h}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=r.call(this)},keySize:8,ivSize:0});function r(){for(var e=this._S,t=this._i,i=this._j,s=0,r=0;r<4;r++){i=(i+e[t=(t+1)%256])%256;var a=e[t];e[t]=e[i],e[i]=a,s|=e[(e[t]+e[i])%256]<<24-8*r}return this._i=t,this._j=i,s}e.RC4=t._createHelper(s);var a=i.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)r.call(this)}});e.RC4Drop=t._createHelper(a)}(),l.mode.CTRGladman=function(){var e=l.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,i=e>>8&255,s=255&e;255===t?(t=0,255===i?(i=0,255===s?s=0:++s):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=s}else e+=1<<24;return e}var i=e.Encryptor=e.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize,a=this._iv,n=this._counter;a&&(n=this._counter=a.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(n);var o=n.slice(0);s.encryptBlock(o,0);for(var h=0;h<r;h++)e[i+h]^=o[h]}});return e.Decryptor=i,e}(),function(){var e=l,t=e.lib.StreamCipher,i=e.algo,s=[],r=[],a=[],n=i.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=0;i<4;i++)e[i]=16711935&(e[i]<<8|e[i]>>>24)|4278255360&(e[i]<<24|e[i]>>>8);var s=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,i=0;i<4;i++)o.call(this);for(i=0;i<8;i++)r[i]^=s[i+4&7];if(t){var a=t.words,n=a[0],h=a[1],c=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),d=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),u=c>>>16|4294901760&d,l=d<<16|65535&c;for(r[0]^=c,r[1]^=u,r[2]^=d,r[3]^=l,r[4]^=c,r[5]^=u,r[6]^=d,r[7]^=l,i=0;i<4;i++)o.call(this)}},_doProcessBlock:function(e,t){var i=this._X;o.call(this),s[0]=i[0]^i[5]>>>16^i[3]<<16,s[1]=i[2]^i[7]>>>16^i[5]<<16,s[2]=i[4]^i[1]>>>16^i[7]<<16,s[3]=i[6]^i[3]>>>16^i[1]<<16;for(var r=0;r<4;r++)s[r]=16711935&(s[r]<<8|s[r]>>>24)|4278255360&(s[r]<<24|s[r]>>>8),e[t+r]^=s[r]},blockSize:4,ivSize:2});function o(){for(var e=this._X,t=this._C,i=0;i<8;i++)r[i]=t[i];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<r[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<r[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<r[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<r[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<r[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<r[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<r[6]>>>0?1:0)|0,this._b=t[7]>>>0<r[7]>>>0?1:0,i=0;i<8;i++){var s=e[i]+t[i],n=65535&s,o=s>>>16,h=((n*n>>>17)+n*o>>>15)+o*o,c=((4294901760&s)*s|0)+((65535&s)*s|0);a[i]=h^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=t._createHelper(n)}(),l.mode.CTR=function(){var e=l.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,r=this._iv,a=this._counter;r&&(a=this._counter=r.slice(0),this._iv=void 0);var n=a.slice(0);i.encryptBlock(n,0),a[s-1]=a[s-1]+1|0;for(var o=0;o<s;o++)e[t+o]^=n[o]}});return e.Decryptor=t,e}(),function(){var e=l,t=e.lib.StreamCipher,i=e.algo,s=[],r=[],a=[],n=i.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],s=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)o.call(this);for(r=0;r<8;r++)s[r]^=i[r+4&7];if(t){var a=t.words,n=a[0],h=a[1],c=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),d=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),u=c>>>16|4294901760&d,l=d<<16|65535&c;for(s[0]^=c,s[1]^=u,s[2]^=d,s[3]^=l,s[4]^=c,s[5]^=u,s[6]^=d,s[7]^=l,r=0;r<4;r++)o.call(this)}},_doProcessBlock:function(e,t){var i=this._X;o.call(this),s[0]=i[0]^i[5]>>>16^i[3]<<16,s[1]=i[2]^i[7]>>>16^i[5]<<16,s[2]=i[4]^i[1]>>>16^i[7]<<16,s[3]=i[6]^i[3]>>>16^i[1]<<16;for(var r=0;r<4;r++)s[r]=16711935&(s[r]<<8|s[r]>>>24)|4278255360&(s[r]<<24|s[r]>>>8),e[t+r]^=s[r]},blockSize:4,ivSize:2});function o(){for(var e=this._X,t=this._C,i=0;i<8;i++)r[i]=t[i];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<r[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<r[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<r[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<r[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<r[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<r[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<r[6]>>>0?1:0)|0,this._b=t[7]>>>0<r[7]>>>0?1:0,i=0;i<8;i++){var s=e[i]+t[i],n=65535&s,o=s>>>16,h=((n*n>>>17)+n*o>>>15)+o*o,c=((4294901760&s)*s|0)+((65535&s)*s|0);a[i]=h^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=t._createHelper(n)}(),l.pad.ZeroPadding={pad:function(e,t){var i=4*t;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},l)},73150:(e,t,i)=>{"use strict";var s=t;s.inherits=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e},s.version="6.5.0",s.utils=i(27882),s.curve=i(15261),s.curves=i(61198),s.ec=i(61643),s.eddsa=i(34096)},63235:(e,t,i)=>{"use strict";var s=i(35060),r=i(73150).utils,a=r.getNAF,n=r.getJSF,o=r.assert;function h(e,t){this.type=e,this.p=new s(t.p,16),this.red=t.prime?s.red(t.prime):s.mont(this.p),this.zero=new s(0).toRed(this.red),this.one=new s(1).toRed(this.red),this.two=new s(2).toRed(this.red),this.n=t.n&&new s(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=h,h.prototype.point=function(){throw new Error("Not implemented")},h.prototype.validate=function(){throw new Error("Not implemented")},h.prototype._fixedNafMul=function(e,t){o(e.precomputed);var i=e._getDoubles(),s=a(t,1),r=(1<<i.step+1)-(i.step%2==0?2:1);r/=3;for(var n=[],h=0;h<s.length;h+=i.step){var c=0;for(t=h+i.step-1;t>=h;t--)c=(c<<1)+s[t];n.push(c)}for(var d=this.jpoint(null,null,null),u=this.jpoint(null,null,null),l=r;l>0;l--){for(h=0;h<n.length;h++)(c=n[h])===l?u=u.mixedAdd(i.points[h]):c===-l&&(u=u.mixedAdd(i.points[h].neg()));d=d.add(u)}return d.toP()},h.prototype._wnafMul=function(e,t){var i=4,s=e._getNAFPoints(i);i=s.wnd;for(var r=s.points,n=a(t,i),h=this.jpoint(null,null,null),c=n.length-1;c>=0;c--){for(t=0;c>=0&&0===n[c];c--)t++;if(c>=0&&t++,h=h.dblp(t),c<0)break;var d=n[c];o(0!==d),h="affine"===e.type?d>0?h.mixedAdd(r[d-1>>1]):h.mixedAdd(r[-d-1>>1].neg()):d>0?h.add(r[d-1>>1]):h.add(r[-d-1>>1].neg())}return"affine"===e.type?h.toP():h},h.prototype._wnafMulAdd=function(e,t,i,s,r){for(var o=this._wnafT1,h=this._wnafT2,c=this._wnafT3,d=0,u=0;u<s;u++){var l=(M=t[u])._getNAFPoints(e);o[u]=l.wnd,h[u]=l.points}for(u=s-1;u>=1;u-=2){var f=u-1,p=u;if(1===o[f]&&1===o[p]){var m=[t[f],null,null,t[p]];0===t[f].y.cmp(t[p].y)?(m[1]=t[f].add(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg())):0===t[f].y.cmp(t[p].y.redNeg())?(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].add(t[p].neg())):(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],y=n(i[f],i[p]);d=Math.max(y[0].length,d),c[f]=new Array(d),c[p]=new Array(d);for(var b=0;b<d;b++){var v=0|y[0][b],w=0|y[1][b];c[f][b]=g[3*(v+1)+(w+1)],c[p][b]=0,h[f]=m}}else c[f]=a(i[f],o[f]),c[p]=a(i[p],o[p]),d=Math.max(c[f].length,d),d=Math.max(c[p].length,d)}var k=this.jpoint(null,null,null),_=this._wnafT4;for(u=d;u>=0;u--){for(var S=0;u>=0;){var O=!0;for(b=0;b<s;b++)_[b]=0|c[b][u],0!==_[b]&&(O=!1);if(!O)break;S++,u--}if(u>=0&&S++,k=k.dblp(S),u<0)break;for(b=0;b<s;b++){var M,T=_[b];0!==T&&(T>0?M=h[b][T-1>>1]:T<0&&(M=h[b][-T-1>>1].neg()),k="affine"===M.type?k.mixedAdd(M):k.add(M))}}for(u=0;u<s;u++)h[u]=null;return r?k:k.toP()},h.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},h.prototype.decodePoint=function(e,t){e=r.toArray(e,t);var i=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*i)return 6===e[0]?o(e[e.length-1]%2==0):7===e[0]&&o(e[e.length-1]%2==1),this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));if((2===e[0]||3===e[0])&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),3===e[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(e){return this.encode(e,!0)},c.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))},c.prototype.encode=function(e,t){return r.encode(this._encode(t),e)},c.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},c.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},c.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],s=this,r=0;r<t;r+=e){for(var a=0;a<e;a++)s=s.dbl();i.push(s)}return{step:e,points:i}},c.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,s=1===i?null:this.dbl(),r=1;r<i;r++)t[r]=t[r-1].add(s);return{wnd:e,points:t}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t}},95595:(e,t,i)=>{"use strict";var s=i(15261),r=i(73150),a=i(35060),n=r.inherits,o=s.base,h=r.utils.assert;function c(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,o.call(this,"edwards",e),this.a=new a(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new a(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),h(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function d(e,t,i,s,r){o.BasePoint.call(this,e,"projective"),null===t&&null===i&&null===s?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(t,16),this.y=new a(i,16),this.z=s?new a(s,16):this.curve.one,this.t=r&&new a(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}n(c,o),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,i,s){return this.point(e,t,i,s)},c.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),s=this.c2.redSub(this.a.redMul(i)),r=this.one.redSub(this.c2.redMul(this.d).redMul(i)),n=s.redMul(r.redInvm()),o=n.redSqrt();if(0!==o.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var h=o.fromRed().isOdd();return(t&&!h||!t&&h)&&(o=o.redNeg()),this.point(e,o)},c.prototype.pointFromY=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),s=i.redSub(this.one),r=i.redMul(this.d).redAdd(this.one),n=s.redMul(r.redInvm());if(0===n.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=n.redSqrt();if(0!==o.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");return o.isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),i=e.y.redSqr(),s=t.redMul(this.a).redAdd(i),r=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(i)));return 0===s.cmp(r)},n(d,o.BasePoint),c.prototype.pointFromJSON=function(e){return d.fromJSON(this,e)},c.prototype.point=function(e,t,i,s){return new d(this,e,t,i,s)},d.fromJSON=function(e,t){return new d(e,t[0],t[1],t[2])},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},d.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var s=this.curve._mulA(e),r=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=s.redAdd(t),n=a.redSub(i),o=s.redSub(t),h=r.redMul(n),c=a.redMul(o),d=r.redMul(o),u=n.redMul(a);return this.curve.point(h,c,u,d)},d.prototype._projDbl=function(){var e,t,i,s=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),a=this.y.redSqr();if(this.curve.twisted){var n=(c=this.curve._mulA(r)).redAdd(a);if(this.zOne)e=s.redSub(r).redSub(a).redMul(n.redSub(this.curve.two)),t=n.redMul(c.redSub(a)),i=n.redSqr().redSub(n).redSub(n);else{var o=this.z.redSqr(),h=n.redSub(o).redISub(o);e=s.redSub(r).redISub(a).redMul(h),t=n.redMul(c.redSub(a)),i=n.redMul(h)}}else{var c=r.redAdd(a);o=this.curve._mulC(this.c.redMul(this.z)).redSqr(),h=c.redSub(o).redSub(o),e=this.curve._mulC(s.redISub(c)).redMul(h),t=this.curve._mulC(c).redMul(r.redISub(a)),i=c.redMul(h)}return this.curve.point(e,t,i)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},d.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),s=this.t.redMul(this.curve.dd).redMul(e.t),r=this.z.redMul(e.z.redAdd(e.z)),a=i.redSub(t),n=r.redSub(s),o=r.redAdd(s),h=i.redAdd(t),c=a.redMul(n),d=o.redMul(h),u=a.redMul(h),l=n.redMul(o);return this.curve.point(c,d,l,u)},d.prototype._projAdd=function(e){var t,i,s=this.z.redMul(e.z),r=s.redSqr(),a=this.x.redMul(e.x),n=this.y.redMul(e.y),o=this.curve.d.redMul(a).redMul(n),h=r.redSub(o),c=r.redAdd(o),d=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(a).redISub(n),u=s.redMul(h).redMul(d);return this.curve.twisted?(t=s.redMul(c).redMul(n.redSub(this.curve._mulA(a))),i=h.redMul(c)):(t=s.redMul(c).redMul(n.redSub(a)),i=this.curve._mulC(h).redMul(c)),this.curve.point(u,t,i)},d.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},d.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},d.prototype.mulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!1)},d.prototype.jmulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!0)},d.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},d.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d.prototype.getY=function(){return this.normalize(),this.y.fromRed()},d.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},d.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var i=e.clone(),s=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(s),0===this.x.cmp(t))return!0}return!1},d.prototype.toP=d.prototype.normalize,d.prototype.mixedAdd=d.prototype.add},15261:(e,t,i)=>{"use strict";var s=t;s.base=i(63235),s.short=i(42669),s.mont=i(54152),s.edwards=i(95595)},54152:(e,t,i)=>{"use strict";var s=i(15261),r=i(35060),a=i(73150).inherits,n=s.base,o=i(73150).utils;function h(e){n.call(this,"mont",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,i){n.BasePoint.call(this,e,"projective"),null===t&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(t,16),this.z=new r(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}a(h,n),e.exports=h,h.prototype.validate=function(e){var t=e.normalize().x,i=t.redSqr(),s=i.redMul(t).redAdd(i.redMul(this.a)).redAdd(t);return 0===s.redSqrt().redSqr().cmp(s)},a(c,n.BasePoint),h.prototype.decodePoint=function(e,t){return this.point(o.toArray(e,t),1)},h.prototype.point=function(e,t){return new c(this,e,t)},h.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),i=e.redSub(t),s=e.redMul(t),r=i.redMul(t.redAdd(this.curve.a24.redMul(i)));return this.curve.point(s,r)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var i=this.x.redAdd(this.z),s=this.x.redSub(this.z),r=e.x.redAdd(e.z),a=e.x.redSub(e.z).redMul(i),n=r.redMul(s),o=t.z.redMul(a.redAdd(n).redSqr()),h=t.x.redMul(a.redISub(n).redSqr());return this.curve.point(o,h)},c.prototype.mul=function(e){for(var t=e.clone(),i=this,s=this.curve.point(null,null),r=[];0!==t.cmpn(0);t.iushrn(1))r.push(t.andln(1));for(var a=r.length-1;a>=0;a--)0===r[a]?(i=i.diffAdd(s,this),s=s.dbl()):(s=i.diffAdd(s,this),i=i.dbl());return s},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},42669:(e,t,i)=>{"use strict";var s=i(15261),r=i(73150),a=i(35060),n=r.inherits,o=s.base,h=r.utils.assert;function c(e){o.call(this,"short",e),this.a=new a(e.a,16).toRed(this.red),this.b=new a(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function d(e,t,i,s){o.BasePoint.call(this,e,"affine"),null===t&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(t,16),this.y=new a(i,16),s&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(e,t,i,s){o.BasePoint.call(this,e,"jacobian"),null===t&&null===i&&null===s?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(t,16),this.y=new a(i,16),this.z=new a(s,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}n(c,o),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,i;if(e.beta)t=new a(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);t=(t=s[0].cmp(s[1])<0?s[0]:s[1]).toRed(this.red)}if(e.lambda)i=new a(e.lambda,16);else{var r=this._getEndoRoots(this.n);0===this.g.mul(r[0]).x.cmp(this.g.x.redMul(t))?i=r[0]:(i=r[1],h(0===this.g.mul(i).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:i,basis:e.basis?e.basis.map((function(e){return{a:new a(e.a,16),b:new a(e.b,16)}})):this._getEndoBasis(i)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:a.mont(e),i=new a(2).toRed(t).redInvm(),s=i.redNeg(),r=new a(3).toRed(t).redNeg().redSqrt().redMul(i);return[s.redAdd(r).fromRed(),s.redSub(r).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,i,s,r,n,o,h,c,d,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,f=this.n.clone(),p=new a(1),m=new a(0),g=new a(0),y=new a(1),b=0;0!==l.cmpn(0);){var v=f.div(l);c=f.sub(v.mul(l)),d=g.sub(v.mul(p));var w=y.sub(v.mul(m));if(!s&&c.cmp(u)<0)t=h.neg(),i=p,s=c.neg(),r=d;else if(s&&2==++b)break;h=c,f=l,l=c,g=p,p=d,y=m,m=w}n=c.neg(),o=d;var k=s.sqr().add(r.sqr());return n.sqr().add(o.sqr()).cmp(k)>=0&&(n=t,o=i),s.negative&&(s=s.neg(),r=r.neg()),n.negative&&(n=n.neg(),o=o.neg()),[{a:s,b:r},{a:n,b:o}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],s=t[1],r=s.b.mul(e).divRound(this.n),a=i.b.neg().mul(e).divRound(this.n),n=r.mul(i.a),o=a.mul(s.a),h=r.mul(i.b),c=a.mul(s.b);return{k1:e.sub(n).sub(o),k2:h.add(c).neg()}},c.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=i.redSqrt();if(0!==s.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var r=s.fromRed().isOdd();return(t&&!r||!t&&r)&&(s=s.redNeg()),this.point(e,s)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,s=this.a.redMul(t),r=t.redSqr().redMul(t).redIAdd(s).redIAdd(this.b);return 0===i.redSqr().redISub(r).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,i){for(var s=this._endoWnafT1,r=this._endoWnafT2,a=0;a<e.length;a++){var n=this._endoSplit(t[a]),o=e[a],h=o._getBeta();n.k1.negative&&(n.k1.ineg(),o=o.neg(!0)),n.k2.negative&&(n.k2.ineg(),h=h.neg(!0)),s[2*a]=o,s[2*a+1]=h,r[2*a]=n.k1,r[2*a+1]=n.k2}for(var c=this._wnafMulAdd(1,s,r,2*a,i),d=0;d<2*a;d++)s[d]=null,r[d]=null;return c},n(d,o.BasePoint),c.prototype.point=function(e,t,i){return new d(this,e,t,i)},c.prototype.pointFromJSON=function(e,t){return d.fromJSON(this,e,t)},d.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,s=function(e){return i.point(e.x.redMul(i.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return t}},d.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},d.fromJSON=function(e,t,i){"string"==typeof t&&(t=JSON.parse(t));var s=e.point(t[0],t[1],i);if(!t[2])return s;function r(t){return e.point(t[0],t[1],i)}var a=t[2];return s.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[s].concat(a.doubles.points.map(r))},naf:a.naf&&{wnd:a.naf.wnd,points:[s].concat(a.naf.points.map(r))}},s},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.inf},d.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),s=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)},d.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),s=e.redInvm(),r=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(s),a=r.redSqr().redISub(this.x.redAdd(this.x)),n=r.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,n)},d.prototype.getX=function(){return this.x.fromRed()},d.prototype.getY=function(){return this.y.fromRed()},d.prototype.mul=function(e){return e=new a(e,16),this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},d.prototype.mulAdd=function(e,t,i){var s=[this,t],r=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,r):this.curve._wnafMulAdd(1,s,r,2)},d.prototype.jmulAdd=function(e,t,i){var s=[this,t],r=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,r,!0):this.curve._wnafMulAdd(1,s,r,2,!0)},d.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},d.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,s=function(e){return e.neg()};t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(s)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(s)}}}return t},d.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},n(u,o.BasePoint),c.prototype.jpoint=function(e,t,i){return new u(this,e,t,i)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),s=this.y.redMul(t).redMul(e);return this.curve.point(i,s)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(t),r=e.x.redMul(i),a=this.y.redMul(t.redMul(e.z)),n=e.y.redMul(i.redMul(this.z)),o=s.redSub(r),h=a.redSub(n);if(0===o.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),d=c.redMul(o),u=s.redMul(c),l=h.redSqr().redIAdd(d).redISub(u).redISub(u),f=h.redMul(u.redISub(l)).redISub(a.redMul(d)),p=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(l,f,p)},u.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,s=e.x.redMul(t),r=this.y,a=e.y.redMul(t).redMul(this.z),n=i.redSub(s),o=r.redSub(a);if(0===n.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=n.redSqr(),c=h.redMul(n),d=i.redMul(h),u=o.redSqr().redIAdd(c).redISub(d).redISub(d),l=o.redMul(d.redISub(u)).redISub(r.redMul(c)),f=this.z.redMul(n);return this.curve.jpoint(u,l,f)},u.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,i=0;i<e;i++)t=t.dbl();return t}var s=this.curve.a,r=this.curve.tinv,a=this.x,n=this.y,o=this.z,h=o.redSqr().redSqr(),c=n.redAdd(n);for(i=0;i<e;i++){var d=a.redSqr(),u=c.redSqr(),l=u.redSqr(),f=d.redAdd(d).redIAdd(d).redIAdd(s.redMul(h)),p=a.redMul(u),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),y=f.redMul(g);y=y.redIAdd(y).redISub(l);var b=c.redMul(o);i+1<e&&(h=h.redMul(l)),a=m,o=b,c=y}return this.curve.jpoint(a,c.redMul(r),o)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),r=this.y.redSqr(),a=r.redSqr(),n=this.x.redAdd(r).redSqr().redISub(s).redISub(a);n=n.redIAdd(n);var o=s.redAdd(s).redIAdd(s),h=o.redSqr().redISub(n).redISub(n),c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),e=h,t=o.redMul(n.redISub(h)).redISub(c),i=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),u=this.y.redSqr(),l=u.redSqr(),f=this.x.redAdd(u).redSqr().redISub(d).redISub(l);f=f.redIAdd(f);var p=d.redAdd(d).redIAdd(d),m=p.redSqr(),g=l.redIAdd(l);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(g),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(e,t,i)},u.prototype._threeDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),r=this.y.redSqr(),a=r.redSqr(),n=this.x.redAdd(r).redSqr().redISub(s).redISub(a);n=n.redIAdd(n);var o=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),h=o.redSqr().redISub(n).redISub(n);e=h;var c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),t=o.redMul(n.redISub(h)).redISub(c),i=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),u=this.y.redSqr(),l=this.x.redMul(u),f=this.x.redSub(d).redMul(this.x.redAdd(d));f=f.redAdd(f).redIAdd(f);var p=l.redIAdd(l),m=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(m),i=this.y.redAdd(this.z).redSqr().redISub(u).redISub(d);var g=u.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=f.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,i)},u.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,s=this.z,r=s.redSqr().redSqr(),a=t.redSqr(),n=i.redSqr(),o=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(r)),h=t.redAdd(t),c=(h=h.redIAdd(h)).redMul(n),d=o.redSqr().redISub(c.redAdd(c)),u=c.redISub(d),l=n.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=o.redMul(u).redISub(l),p=i.redAdd(i).redMul(s);return this.curve.jpoint(d,f,p)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),s=t.redSqr(),r=e.redAdd(e).redIAdd(e),a=r.redSqr(),n=this.x.redAdd(t).redSqr().redISub(e).redISub(s),o=(n=(n=(n=n.redIAdd(n)).redAdd(n).redIAdd(n)).redISub(a)).redSqr(),h=s.redIAdd(s);h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var c=r.redIAdd(n).redSqr().redISub(a).redISub(o).redISub(h),d=t.redMul(c);d=(d=d.redIAdd(d)).redIAdd(d);var u=this.x.redMul(o).redISub(d);u=(u=u.redIAdd(u)).redIAdd(u);var l=this.y.redMul(c.redMul(h.redISub(c)).redISub(n.redMul(o)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=this.z.redAdd(n).redSqr().redISub(i).redISub(o);return this.curve.jpoint(u,l,f)},u.prototype.mul=function(e,t){return e=new a(e,t),this.curve._wnafMul(this,e)},u.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(0!==this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0))return!1;var s=t.redMul(this.z),r=i.redMul(e.z);return 0===this.y.redMul(r).redISub(e.y.redMul(s)).cmpn(0)},u.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(i))return!0;for(var s=e.clone(),r=this.curve.redN.redMul(t);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(r),0===this.x.cmp(i))return!0}return!1},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},61198:(e,t,i)=>{"use strict";var s,r=t,a=i(73150),n=a.utils.assert;function o(e){"short"===e.type?this.curve=new a.curve.short(e):"edwards"===e.type?this.curve=new a.curve.edwards(e):this.curve=new a.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function h(e,t){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){var i=new o(t);return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,value:i}),i}})}r.PresetCurve=o,h("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:"SHA256",gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),h("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:"SHA256",gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),h("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:"SHA256",gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),h("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:"SHA384",gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),h("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:"SHA512",gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),h("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:"SHA256",gRed:!1,g:["9"]}),h("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:"SHA256",gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{s=i(14935)}catch(e){s=void 0}h("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:"SHA256",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",s]})},61643:(e,t,i)=>{"use strict";var s=i(35060),r=i(50448),a=i(73150),n=a.utils.assert,o=i(60331),h=i(20562);function c(e){if(!(this instanceof c))return new c(e);"string"==typeof e&&(n(a.curves.hasOwnProperty(e),"Unknown curve "+e),e=a.curves[e]),e instanceof a.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=c,c.prototype.keyPair=function(e){return new o(this,e)},c.prototype.keyFromPrivate=function(e,t){return o.fromPrivate(this,e,t)},c.prototype.keyFromPublic=function(e,t){return o.fromPublic(this,e,t)},c.prototype.genKeyPair=function(e){e||(e={});for(var t=new r({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||null,entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),a=this.n.sub(new s(2));;){var n=new s(t.generate(i));if(!(n.cmp(a)>0))return n.iaddn(1),this.keyFromPrivate(n)}},c.prototype._truncateToN=function(e,t){var i=8*e.byteLength()-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},c.prototype.sign=function(e,t,i,a){"object"==typeof i&&(a=i,i=null),a||(a={}),t=this.keyFromPrivate(t,i),e=this._truncateToN(new s(e,16));for(var n=this.n.byteLength(),o=t.getPrivate().toArray("be",n),c=e.toArray("be",n),d=new r({hash:this.hash,entropy:a.extraEntropy?o.concat(a.extraEntropy):o,nonce:c,pers:a.pers,persEnc:a.persEnc||"utf8"}),u=this.n.sub(new s(1)),l=0;;l++){var f=a.k?a.k(l):new s(d.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(u)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var m=p.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var y=f.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(y=y.umod(this.n)).cmpn(0)){var b=(p.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return a.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),b^=1),new h({r:g,s:y,recoveryParam:b})}}}}}},c.prototype.verify=function(e,t,i,r){e=this._truncateToN(new s(e,16)),i=this.keyFromPublic(i,r);var a=(t=new h(t,"hex")).r,n=t.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;if(n.cmpn(1)<0||n.cmp(this.n)>=0)return!1;var o,c=n.invm(this.n),d=c.mul(e).umod(this.n),u=c.mul(a).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(d,i.getPublic(),u)).isInfinity()&&o.eqXToP(a):!(o=this.g.mulAdd(d,i.getPublic(),u)).isInfinity()&&0===o.getX().umod(this.n).cmp(a)},c.prototype.recoverPubKey=function(e,t,i,r){n((3&i)===i,"The recovery param is more than two bits"),t=new h(t,r);var a=this.n,o=new s(e),c=t.r,d=t.s,u=1&i,l=i>>1;if(c.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");c=l?this.curve.pointFromX(c.add(this.curve.n),u):this.curve.pointFromX(c,u);var f=t.r.invm(a),p=a.sub(o).mul(f).umod(a),m=d.mul(f).umod(a);return this.g.mulAdd(p,c,m)},c.prototype.getKeyRecoveryParam=function(e,t,i,s){if(null!==(t=new h(t,s)).recoveryParam)return t.recoveryParam;for(var r=0;r<4;r++){var a;try{a=this.recoverPubKey(e,t,r)}catch(e){continue}if(a.eq(i))return r}throw new Error("Unable to find valid recovery factor")}},60331:(e,t,i)=>{"use strict";var s=i(35060),r=i(73150).utils.assert;function a(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=a,a.fromPublic=function(e,t,i){return t instanceof a?t:new a(e,{pub:t,pubEnc:i})},a.fromPrivate=function(e,t,i){return t instanceof a?t:new a(e,{priv:t,privEnc:i})},a.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},a.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(e,t){this.priv=new s(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?r(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||r(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},a.prototype.derive=function(e){return e.mul(this.priv).getX()},a.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)},a.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},20562:(e,t,i)=>{"use strict";var s=i(35060),r=i(73150).utils.assert;e.exports=function e(t,i){if(t instanceof e)return t;r(t.r&&t.s,"Signature without r or s"),this.r=new s(t.r,16),this.s=new s(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam}},34096:(e,t,i)=>{"use strict";var s=i(61198),r=i(27882),a=r.assert,n=r.parseBytes,o=i(72429),h=i(7423);const c=i(35060),{byteArrayToWordArray:d}=i(80651),u=i(27295);function l(e){if(a("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof l))return new l(e);var t=s[e].curve;this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8)}e.exports=l,l.prototype.sign=function(e,t){e=n(e);var i=this.keyFromSecret(t),s=this.hashInt(i.secret(),e),r=this.g.mul(s),a=this.encodePoint(r),o=this.hashInt(a,i.pubBytes(),e);o=o.mul(i.priv());var h=s.add(o).umod(this.curve.n);return this.makeSignature({R:r,S:h,Rencoded:a})},l.prototype.signModified=function(e,t){e=n(e);var i=this.keyFromSecret(t);const s=new c(i.secret(),16,"le"),r=this.encodePoint(this.g.mul(s)),a=128&r[31];var o=this.hashInt(i.secret(),e),h=this.g.mul(o),d=this.encodePoint(h);let u=this.hashInt(d,r,e);u=u.mul(s);var l=o.add(u).umod(this.curve.n),f=l.toArray("le",32);return f[31]|=a,this.makeSignature({R:h,S:l,Rencoded:d,Sencoded:f})},l.prototype.verify=function(e,t,i){e=n(e),t=this.makeSignature(t);var s=this.keyFromPublic(i),r=this.hashInt(t.Rencoded(),s.pubBytes(),e),a=this.g.mul(t.S());return t.R().add(s.pub().mul(r)).eq(a)},l.prototype.hashInt=function(){let e=Array.from(arguments).reduce(((e,t)=>e.concat(t)));e=d(e);const t=u.SHA512(e).toString(u.enc.Hex);return r.intFromLE(t).umod(this.curve.n)},l.prototype.keyFromPublic=function(e){return o.fromPublic(this,e)},l.prototype.keyFromSecret=function(e){return o.fromSecret(this,e)},l.prototype.makeSignature=function(e){return e instanceof h?e:new h(this,e)},l.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},l.prototype.decodePoint=function(e){var t=(e=r.parseBytes(e)).length-1,i=e.slice(0,t).concat(-129&e[t]),s=0!=(128&e[t]),a=r.intFromLE(i);return this.curve.pointFromY(a,s)},l.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},l.prototype.decodeInt=function(e){return r.intFromLE(e)},l.prototype.isPoint=function(e){return e instanceof this.pointClass}},72429:(e,t,i)=>{"use strict";var s=i(27882),r=s.assert,a=s.parseBytes,n=s.cachedProperty;function o(e,t){this.eddsa=e,this._secret=a(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=a(t.pub)}o.fromPublic=function(e,t){return t instanceof o?t:new o(e,{pub:t})},o.fromSecret=function(e,t){return t instanceof o?t:new o(e,{secret:t})},o.prototype.secret=function(){return this._secret},n(o,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),n(o,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),n(o,"privBytes",(function(){var e=this.eddsa,t=this.hash(),i=e.encodingLength-1,s=t.slice(0,e.encodingLength);return s[0]&=248,s[i]&=127,s[i]|=64,s})),n(o,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),n(o,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),n(o,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),o.prototype.sign=function(e){return r(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},o.prototype.signModified=function(e){return r(this._secret,"KeyPair can only verify"),this.eddsa.signModified(e,this)},o.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},o.prototype.getSecret=function(e){return r(this._secret,"KeyPair is public only"),s.encode(this.secret(),e)},o.prototype.getPublic=function(e){return s.encode(this.pubBytes(),e)},e.exports=o},7423:(e,t,i)=>{"use strict";var s=i(35060),r=i(27882),a=r.assert,n=r.cachedProperty,o=r.parseBytes;function h(e,t){this.eddsa=e,"object"!=typeof t&&(t=o(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),a(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof s&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}n(h,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),n(h,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),n(h,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),n(h,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),h.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},h.prototype.toHex=function(){return r.encode(this.toBytes(),"hex").toUpperCase()},e.exports=h},14935:e=>{e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},27882:(e,t,i)=>{"use strict";var s=t,r=i(35060);function a(e,t){var i=[];return t>0&&i.push(e>>>24),t>1&&i.push(e>>>16&255),t>2&&i.push(e>>>8&255),t>3&&i.push(255&e),i}function n(e){return 1===e.length?"0"+e:e}function o(e){for(var t="",i=0;i<e.length;i++)t+=n(e[i].toString(16));return t}s.assert=function(e,t){if(!e)throw new Error(t)},s.getNAF=function(e,t){for(var i=[],s=1<<t+1,r=e.clone();r.cmpn(1)>=0;){var a;if(r.isOdd()){var n=r.andln(s-1);a=n>(s>>1)-1?(s>>1)-n:n,r.isubn(a)}else a=0;i.push(a);for(var o=0!==r.cmpn(0)&&0===r.andln(s-1)?t+1:1,h=1;h<o;h++)i.push(0);r.iushrn(o)}return i},s.getJSF=function(e,t){var i=[[],[]];e=e.clone(),t=t.clone();for(var s=0,r=0;e.cmpn(-s)>0||t.cmpn(-r)>0;){var a,n,o,h=e.andln(3)+s&3,c=t.andln(3)+r&3;3===h&&(h=-1),3===c&&(c=-1),a=0==(1&h)?0:3!=(o=e.andln(7)+s&7)&&5!==o||2!==c?h:-h,i[0].push(a),n=0==(1&c)?0:3!=(o=t.andln(7)+r&7)&&5!==o||2!==h?c:-c,i[1].push(n),2*s===a+1&&(s=1-s),2*r===n+1&&(r=1-r),e.iushrn(1),t.iushrn(1)}return i},s.cachedProperty=function(e,t,i){var s="_"+t;e.prototype[t]=function(){return void 0!==this[s]?this[s]:this[s]=i.call(this)}},s.parseBytes=function(e){return"string"==typeof e?s.toArray(e,"hex"):e},s.intFromLE=function(e){return new r(e,"hex","le")},s.wordArrayToBuffer=function(e){let t;if(!e.hasOwnProperty("sigBytes")||!e.hasOwnProperty("words"))throw Error("Argument not a wordArray");t=e.sigBytes,e=e.words;const i=[];let s=[],r=0;for(;t>0;)s=a(e[r],Math.min(4,t)),t-=s.length,i.push(s),r++;return[].concat.apply([],i)},s.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var i=[];if("string"!=typeof e){for(var s=0;s<e.length;s++)i[s]=0|e[s];return i}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),s=0;s<e.length;s+=2)i.push(parseInt(e[s]+e[s+1],16));else for(s=0;s<e.length;s++){var r=e.charCodeAt(s),a=r>>8,n=255&r;a?i.push(a,n):i.push(n)}return i},s.zero2=n,s.toHex=o,s.encode=function(e,t){return"hex"===t?o(e):e}},50448:(e,t,i)=>{"use strict";var s=i(27295),r=i(27882).assert,a=i(27882),{byteArrayToWordArray:n}=i(80651);const o=s.enc.Utf8.parse(""),h=s.enc.Utf8.parse("\0");function c(e){if(!(this instanceof c))return new c(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.slice(3,6),this.minEntropy=e.minEntropy||192,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=e.entropy,i=e.nonce;r(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,i,[])}e.exports=c,c.prototype._init=function(e,t,i){var r=e.concat(t).concat(i);this.K=new s.lib.WordArray.init,this.V=new s.lib.WordArray.init,this.V.words=Array(this.outLen/32).fill(16843009),this.V.sigBytes=32,this._update(r),this._reseed=1,this.reseedInterval=281474976710656},c.prototype._hmac=function(){return new s.lib.WordArray.init},c.prototype._update=function(e){var t=this._hmac();t.concat(this.V),t.concat(h),e&&t.concat(n(e)),this.K=s["Hmac"+this.hash](t,this.K),this.V=s["Hmac"+this.hash](this.V,this.K),e&&((t=this._hmac()).concat(this.V),t.concat(o),t.concat(n(e)),this.K=s["Hmac"+this.hash](t,this.K),this.V=s["Hmac"+this.hash](this.V,this.K))},c.prototype.reseed=function(e,t,i,s){"string"!=typeof t&&(i=t,t=null),r(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1},c.prototype.generate=function(e,t,i,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(i=t,t=null),i&&(i=s.enc.Utf8.parse(i),this._update(i));for(var n=new s.lib.WordArray.init;n.sigBytes<e;)this.V=s["Hmac"+this.hash](this.V,this.K),n.concat(this.V);return this._update(i),this._reseed++,a.wordArrayToBuffer(n)}},79323:(e,t,i)=>{"use strict";var s=i(61214);function r(e){const t=function(t,i){return"string"==typeof t&&"//"===t.slice(0,2)?e("https:"+t,i):e(t,i)};return t.http=e.http,t.https=e.https,t}e.exports=function(e){return e&&e.Promise&&(s.Promise=e.Promise),{fetch:r(s),Headers:s.Headers,Request:s.Request,Response:s.Response}}},61214:(e,t,i)=>{"use strict";var s=i(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});const r=Symbol("buffer"),a=Symbol("type");class n{constructor(){this[a]="";const e=arguments[0],t=arguments[1],i=[];if(e){const t=e,a=Number(t.length);for(let e=0;e<a;e++){const a=t[e];let o;o=a instanceof s?a:ArrayBuffer.isView(a)?s.from(a.buffer,a.byteOffset,a.byteLength):a instanceof ArrayBuffer?s.from(a):a instanceof n?a[r]:s.from("string"==typeof a?a:String(a)),i.push(o)}}this[r]=s.concat(i);let o=t&&void 0!==t.type&&String(t.type).toLowerCase();o&&!/[^\u0020-\u007E]/.test(o)&&(this[a]=o)}get size(){return this[r].length}get type(){return this[a]}slice(){const e=this.size,t=arguments[0],i=arguments[1];let s,a;s=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),a=void 0===i?e:i<0?Math.max(e+i,0):Math.min(i,e);const o=Math.max(a-s,0),h=this[r].slice(s,s+o),c=new n([],{type:arguments[2]});return c[r]=h,c}}function o(e,t,i){Error.call(this,e),this.message=e,this.type=t,i&&(this.code=this.errno=i.code),Error.captureStackTrace(this,this.constructor)}Object.defineProperties(n.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(n.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o.prototype.name="FetchError";const h=i(42830),c=i(42830).PassThrough,d=Symbol("Body internals");function u(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.size;let a=void 0===r?0:r;var c=i.timeout;let u=void 0===c?0:c;null==e?e=null:"string"==typeof e||f(e)||e instanceof n||s.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||e instanceof h||(e=String(e)),this[d]={body:e,disturbed:!1,error:null},this.size=a,this.timeout=u,e instanceof h&&e.on("error",(function(e){t[d].error=new o(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e)}))}function l(){var e=this;if(this[d].disturbed)return u.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[d].disturbed=!0,this[d].error)return u.Promise.reject(this[d].error);if(null===this.body)return u.Promise.resolve(s.alloc(0));if("string"==typeof this.body)return u.Promise.resolve(s.from(this.body));if(this.body instanceof n)return u.Promise.resolve(this.body[r]);if(s.isBuffer(this.body))return u.Promise.resolve(this.body);if("[object ArrayBuffer]"===Object.prototype.toString.call(this.body))return u.Promise.resolve(s.from(this.body));if(!(this.body instanceof h))return u.Promise.resolve(s.alloc(0));let t=[],i=0,a=!1;return new u.Promise((function(r,n){let h;e.timeout&&(h=setTimeout((function(){a=!0,n(new o(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),e.body.on("error",(function(t){n(new o(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),e.body.on("data",(function(s){if(!a&&null!==s){if(e.size&&i+s.length>e.size)return a=!0,void n(new o(`content size at ${e.url} over limit: ${e.size}`,"max-size"));i+=s.length,t.push(s)}})),e.body.on("end",(function(){if(!a){clearTimeout(h);try{r(s.concat(t))}catch(t){n(new o(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}}))}))}function f(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function p(e){let t,i,s=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof h&&"function"!=typeof s.getBoundary&&(t=new c,i=new c,s.pipe(t),s.pipe(i),e[d].body=t,s=i),s}function m(e){const t=e.body;return null===t?0:"string"==typeof t?s.byteLength(t):f(t)?s.byteLength(String(t)):t instanceof n?t.size:s.isBuffer(t)?t.length:"[object ArrayBuffer]"===Object.prototype.toString.call(t)?t.byteLength:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}u.prototype={get body(){return this[d].body},get bodyUsed(){return this[d].disturbed},arrayBuffer(){return l.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return l.call(this).then((function(t){return Object.assign(new n([],{type:e.toLowerCase()}),{[r]:t})}))},json(){var e=this;return l.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(t){return u.Promise.reject(new o(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}}))},text(){return l.call(this).then((function(e){return e.toString()}))},buffer(){return l.call(this)},textConverted(){var e=this;return l.call(this).then((function(t){return function(e,t){if("function"!=typeof convert)throw new Error("The package `encoding` must be installed to use the textConverted() function");const i=t.get("content-type");let s,r,a="utf-8";return i&&(s=/charset=([^;]*)/i.exec(i)),r=e.slice(0,1024).toString(),!s&&r&&(s=/<meta.+?charset=(['"])(.+?)\1/i.exec(r)),!s&&r&&(s=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(r),s&&(s=/charset=(.*)/i.exec(s.pop()))),!s&&r&&(s=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(r)),s&&(a=s.pop(),"gb2312"!==a&&"gbk"!==a||(a="gb18030")),convert(e,"UTF-8",a).toString()}(t,e.headers)}))}},Object.defineProperties(u.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),u.mixIn=function(e){for(const t of Object.getOwnPropertyNames(u.prototype))if(!(t in e)){const i=Object.getOwnPropertyDescriptor(u.prototype,t);Object.defineProperty(e,t,i)}},u.Promise=i.g.Promise;const g=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,y=/[^\t\x20-\x7e\x80-\xff]/;function b(e){if(e=`${e}`,g.test(e))throw new TypeError(`${e} is not a legal HTTP header name`)}function v(e){if(e=`${e}`,y.test(e))throw new TypeError(`${e} is not a legal HTTP header value`)}function w(e,t){t=t.toLowerCase();for(const i in e)if(i.toLowerCase()===t)return i}const k=Symbol("map");class _{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[k]=Object.create(null),e instanceof _){const t=e.raw(),i=Object.keys(t);for(const e of i)for(const i of t[e])this.append(e,i)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const i=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");i.push(Array.from(t))}for(const e of i){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const i=e[t];this.append(t,i)}}}}get(e){b(e=`${e}`);const t=w(this[k],e);return void 0===t?null:this[k][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=S(this),s=0;for(;s<i.length;){var r=i[s];const a=r[0],n=r[1];e.call(t,n,a,this),i=S(this),s++}}set(e,t){t=`${t}`,b(e=`${e}`),v(t);const i=w(this[k],e);this[k][void 0!==i?i:e]=[t]}append(e,t){t=`${t}`,b(e=`${e}`),v(t);const i=w(this[k],e);void 0!==i?this[k][i].push(t):this[k][e]=[t]}has(e){return b(e=`${e}`),void 0!==w(this[k],e)}delete(e){b(e=`${e}`);const t=w(this[k],e);void 0!==t&&delete this[k][t]}raw(){return this[k]}keys(){return M(this,"key")}values(){return M(this,"value")}[Symbol.iterator](){return M(this,"key+value")}}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const i=Object.keys(e[k]).sort();return i.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[k][t].join(", ")}:function(t){return[t.toLowerCase(),e[k][t].join(", ")]})}_.prototype.entries=_.prototype[Symbol.iterator],Object.defineProperty(_.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(_.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const O=Symbol("internal");function M(e,t){const i=Object.create(T);return i[O]={target:e,kind:t,index:0},i}const T=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==T)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[O];const t=e.target,i=e.kind,s=e.index,r=S(t,i);return s>=r.length?{value:void 0,done:!0}:(this[O].index=s+1,{value:r[s],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function x(e){const t=Object.assign({__proto__:null},e[k]),i=w(e[k],"Host");return void 0!==i&&(t[i]=t[i][0]),t}Object.defineProperty(T,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const I=i(8501).STATUS_CODES,A=Symbol("Response internals");class C{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.call(this,e,t);const i=t.status||200;this[A]={url:t.url,status:i,statusText:t.statusText||I[i],headers:new _(t.headers)}}get url(){return this[A].url}get status(){return this[A].status}get ok(){return this[A].status>=200&&this[A].status<300}get statusText(){return this[A].statusText}get headers(){return this[A].headers}clone(){return new C(p(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok})}}u.mixIn(C.prototype),Object.defineProperties(C.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(C.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});var N=i(8575);const E=N.format,P=N.parse,B=Symbol("Request internals");function R(e){return"object"==typeof e&&"object"==typeof e[B]}class V{constructor(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};R(e)?t=P(e.url):(t=e&&e.href?P(e.href):P(`${e}`),e={});let r=i.method||e.method||"GET";if(r=r.toUpperCase(),(null!=i.body||R(e)&&null!==e.body)&&("GET"===r||"HEAD"===r))throw new TypeError("Request with GET/HEAD method cannot have body");let a=null!=i.body?i.body:R(e)&&null!==e.body?p(e):null;u.call(this,a,{timeout:i.timeout||e.timeout||0,size:i.size||e.size||0});const o=new _(i.headers||e.headers||{});if(null!=i.body){const e=function(e){const t=e.body;return null===t?null:"string"==typeof t?"text/plain;charset=UTF-8":f(t)?"application/x-www-form-urlencoded;charset=UTF-8":t instanceof n?t.type||null:s.isBuffer(t)||"[object ArrayBuffer]"===Object.prototype.toString.call(t)?null:"function"==typeof t.getBoundary?`multipart/form-data;boundary=${t.getBoundary()}`:null}(this);null===e||o.has("Content-Type")||o.append("Content-Type",e)}this[B]={method:r,redirect:i.redirect||e.redirect||"follow",headers:o,parsedURL:t},this.follow=void 0!==i.follow?i.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==i.compress?i.compress:void 0===e.compress||e.compress,this.counter=i.counter||e.counter||0,this.agent=i.agent||e.agent}get method(){return this[B].method}get url(){return E(this[B].parsedURL)}get headers(){return this[B].headers}get redirect(){return this[B].redirect}clone(){return new V(this)}}u.mixIn(V.prototype),Object.defineProperty(V.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(V.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0}});const L=i(8501),D=i(79267),q=i(42830).PassThrough,G=i(8575).resolve,F=i(42635);function j(e,t){if(!j.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return u.Promise=j.Promise,new j.Promise((function(i,a){const h=new V(e,t),c=function(e){const t=e[B].parsedURL,i=new _(e[B].headers);if(i.has("Accept")||i.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");let s=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(s="0"),null!=e.body){const t=m(e);"number"==typeof t&&(s=String(t))}return s&&i.set("Content-Length",s),i.has("User-Agent")||i.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&i.set("Accept-Encoding","gzip,deflate"),i.has("Connection")||e.agent||i.set("Connection","close"),Object.assign({},t,{method:e.method,headers:x(i),agent:e.agent})}(h),d=(0,("https:"===c.protocol?D:L).request)(c);let u;function l(){d.abort(),clearTimeout(u)}h.timeout&&d.once("socket",(function(e){u=setTimeout((function(){a(new o(`network timeout at: ${h.url}`,"request-timeout")),l()}),h.timeout)})),d.on("error",(function(e){a(new o(`request to ${h.url} failed, reason: ${e.message}`,"system",e)),l()})),d.on("response",(function(e){clearTimeout(u);const t=function(e){const t=new _;for(const i of Object.keys(e))if(!g.test(i))if(Array.isArray(e[i]))for(const s of e[i])y.test(s)||(void 0===t[k][i]?t[k][i]=[s]:t[k][i].push(s));else y.test(e[i])||(t[k][i]=[e[i]]);return t}(e.headers);if(j.isRedirect(e.statusCode)){const s=t.get("Location"),r=null===s?null:G(h.url,s);switch(h.redirect){case"error":return a(new o(`redirect mode is set to error: ${h.url}`,"no-redirect")),void l();case"manual":null!==r&&t.set("Location",r);break;case"follow":if(null===r)break;if(h.counter>=h.follow)return a(new o(`maximum redirect reached at: ${h.url}`,"max-redirect")),void l();const s={headers:new _(h.headers),follow:h.follow,counter:h.counter+1,agent:h.agent,compress:h.compress,method:h.method,body:h.body};return 303!==e.statusCode&&h.body&&null===m(h)?(a(new o("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void l()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==h.method)||(s.method="GET",s.body=void 0,s.headers.delete("content-length")),i(j(new V(r,s))),void l())}}let s=e.pipe(new q);const r={url:h.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:h.size,timeout:h.timeout},n=t.get("Content-Encoding");if(!h.compress||"HEAD"===h.method||null===n||204===e.statusCode||304===e.statusCode)return void i(new C(s,r));const c={flush:F.Z_SYNC_FLUSH,finishFlush:F.Z_SYNC_FLUSH};if("gzip"==n||"x-gzip"==n)return s=s.pipe(F.createGunzip(c)),void i(new C(s,r));"deflate"!=n&&"x-deflate"!=n?i(new C(s,r)):e.pipe(new q).once("data",(function(e){s=8==(15&e[0])?s.pipe(F.createInflate()):s.pipe(F.createInflateRaw()),i(new C(s,r))}))})),function(e,t){const i=t.body;null===i?e.end():"string"==typeof i?(e.write(i),e.end()):f(i)?(e.write(s.from(String(i))),e.end()):i instanceof n?(e.write(i[r]),e.end()):s.isBuffer(i)?(e.write(i),e.end()):"[object ArrayBuffer]"===Object.prototype.toString.call(i)?(e.write(s.from(i)),e.end()):i.pipe(e)}(d,h)}))}j.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},j.default=j,j.Promise=i.g.Promise,j.http=L,j.https=D,e.exports=t=j,t.Headers=_,t.Request=V,t.Response=C,t.FetchError=o},21286:(e,t,i)=>{var s=i(48764).Buffer,r=i(939),a=i(41147)._,n=i(48173),o=i(41917);e.exports=function(){var e={browser:["md5","ripemd160","sha1","sha256","sha512"]},t="pkcs1",i="pkcs1",h={private:"pkcs1-private-pem","private-der":"pkcs1-private-der",public:"pkcs8-public-pem","public-der":"pkcs8-public-der"};function c(e,n,o){if(!(this instanceof c))return new c(e,n,o);a.isObject(n)&&(o=n,n=void 0),this.$options={signingScheme:i,signingSchemeOptions:{hash:"sha256",saltLength:null},encryptionScheme:t,encryptionSchemeOptions:{hash:"sha1",label:null},environment:"browser",rsaUtils:this},this.keyPair=new r.Key,this.$cache={},s.isBuffer(e)||a.isString(e)?this.importKey(e,n):a.isObject(e)&&this.generateKeyPair(e.b,e.e),this.setOptions(o)}return c.prototype.setOptions=function(s){if((s=s||{}).environment&&(this.$options.environment=s.environment),s.signingScheme){if(a.isString(s.signingScheme)){var r=s.signingScheme.toLowerCase().split("-");1==r.length?e.node.indexOf(r[0])>-1?(this.$options.signingSchemeOptions={hash:r[0]},this.$options.signingScheme=i):(this.$options.signingScheme=r[0],this.$options.signingSchemeOptions={hash:null}):(this.$options.signingSchemeOptions={hash:r[1]},this.$options.signingScheme=r[0])}else a.isObject(s.signingScheme)&&(this.$options.signingScheme=s.signingScheme.scheme||i,this.$options.signingSchemeOptions=a.omit(s.signingScheme,"scheme"));if(!n.isSignature(this.$options.signingScheme))throw Error("Unsupported signing scheme");if(this.$options.signingSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.signingSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}if(s.encryptionScheme){if(a.isString(s.encryptionScheme)?(this.$options.encryptionScheme=s.encryptionScheme.toLowerCase(),this.$options.encryptionSchemeOptions={}):a.isObject(s.encryptionScheme)&&(this.$options.encryptionScheme=s.encryptionScheme.scheme||t,this.$options.encryptionSchemeOptions=a.omit(s.encryptionScheme,"scheme")),!n.isEncryption(this.$options.encryptionScheme))throw Error("Unsupported encryption scheme");if(this.$options.encryptionSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.encryptionSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}this.keyPair.setOptions(this.$options)},c.prototype.importKey=function(e,t){if(!e)throw Error("Empty key given");if(t&&(t=h[t]||t),!o.detectAndImport(this.keyPair,e,t)&&void 0===t)throw Error("Key format must be specified");return this.$cache={},this},c.prototype.isPrivate=function(){return this.keyPair.isPrivate()},c.prototype.isPublic=function(e){return this.keyPair.isPublic(e)},c.prototype.isEmpty=function(e){return!(this.keyPair.n||this.keyPair.e||this.keyPair.d)},c.prototype.sign=function(e,t,i){if(!this.isPrivate())throw Error("This is not private key");var s=this.keyPair.sign(this.$getDataForEncrypt(e,i));return t&&"buffer"!=t&&(s=s.toString(t)),s},c.prototype.$getDataForEncrypt=function(e,t){if(a.isString(e)||a.isNumber(e))return s.from(""+e,t||"utf8");if(s.isBuffer(e))return e;if(a.isObject(e))return s.from(JSON.stringify(e));throw Error("Unexpected data type")},c}()},29470:e=>{e.exports={newInvalidAsn1Error:function(e){var t=new Error;return t.name="InvalidAsn1Error",t.message=e||"",t}}},42046:(e,t,i)=>{var s=i(29470),r=i(54275),a=i(32758);for(var n in e.exports={Reader:a},r)r.hasOwnProperty(n)&&(e.exports[n]=r[n]);for(var o in s)s.hasOwnProperty(o)&&(e.exports[o]=s[o])},32758:(e,t,i)=>{var s=i(48764).Buffer,r=i(69282),a=i(54275),n=i(29470).newInvalidAsn1Error;function o(e){if(!e||!s.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0}Object.defineProperty(o.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(o.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(o.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),o.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=255&this._buf[this._offset];return e||(this._offset+=1),t},o.prototype.peek=function(){return this.readByte(!0)},o.prototype.readLength=function(e){if(void 0===e&&(e=this._offset),e>=this._size)return null;var t=255&this._buf[e++];if(null===t)return null;if(128==(128&t)){if(0==(t&=127))throw n("Indefinite length not supported");if(t>4)throw n("encoding too long");if(this._size-e<t)return null;this._len=0;for(var i=0;i<t;i++)this._len=(this._len<<8)+(255&this._buf[e++])}else this._len=t;return e},o.prototype.readSequence=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&e!==t)throw n("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var i=this.readLength(this._offset+1);return null===i?null:(this._offset=i,t)},o.prototype.readInt=function(){return this._readTag(a.Integer)},o.prototype.readBoolean=function(){return 0!==this._readTag(a.Boolean)},o.prototype.readEnumeration=function(){return this._readTag(a.Enumeration)},o.prototype.readString=function(e,t){e||(e=a.OctetString);var i=this.peek();if(null===i)return null;if(i!==e)throw n("Expected 0x"+e.toString(16)+": got 0x"+i.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>this._size-r)return null;if(this._offset=r,0===this.length)return t?s.alloc(0):"";var o=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,t?o:o.toString("utf8")},o.prototype.readOID=function(e){e||(e=a.OID);var t=this.readString(e,!0);if(null===t)return null;for(var i=[],s=0,r=0;r<t.length;r++){var n=255&t[r];s<<=7,s+=127&n,0==(128&n)&&(i.push(s),s=0)}return s=i.shift(),i.unshift(s%40),i.unshift(s/40>>0),i.join(".")},o.prototype._readTag=function(e){r.ok(void 0!==e);var t=this.peek();if(null===t)return null;if(t!==e)throw n("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var i=this.readLength(this._offset+1);if(null===i)return null;if(this.length>4)throw n("Integer too long: "+this.length);if(this.length>this._size-i)return null;this._offset=i;for(var s=this._buf[this._offset],a=0,o=0;o<this.length;o++)a<<=8,a|=255&this._buf[this._offset++];return 128==(128&s)&&4!==o&&(a-=1<<8*o),a>>0},e.exports=o},54275:e=>{e.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},4449:(e,t,i)=>{var s=i(42046);e.exports={Ber:s,BerReader:s.Reader}},73666:(e,t,i)=>{i(41147)._,i(41147),e.exports={privateExport:function(e,t){return{n:e.n.toBuffer(),e:e.e,d:e.d.toBuffer(),p:e.p.toBuffer(),q:e.q.toBuffer(),dmp1:e.dmp1.toBuffer(),dmq1:e.dmq1.toBuffer(),coeff:e.coeff.toBuffer()}},privateImport:function(e,t,i){if(!(t.n&&t.e&&t.d&&t.p&&t.q&&t.dmp1&&t.dmq1&&t.coeff))throw Error("Invalid key data");e.setPrivate(t.n,t.e,t.d,t.p,t.q,t.dmp1,t.dmq1,t.coeff)},publicExport:function(e,t){return{n:e.n.toBuffer(),e:e.e}},publicImport:function(e,t,i){if(!t.n||!t.e)throw Error("Invalid key data");e.setPublic(t.n,t.e)},autoImport:function(t,i){return!(!i.n||!i.e||(i.d&&i.p&&i.q&&i.dmp1&&i.dmq1&&i.coeff?(e.exports.privateImport(t,i),0):(e.exports.publicImport(t,i),0)))}}},41917:(e,t,i)=>{i(41147)._,e.exports={pkcs1:i(37073),pkcs8:i(27158),components:i(73666),detectAndImport:function(t,i,s){if(void 0===s){for(var r in e.exports)if("function"==typeof e.exports[r].autoImport&&e.exports[r].autoImport(t,i))return!0}else if(s){var a=formatParse(s);if(!e.exports[a.scheme])throw Error("Unsupported key format");"private"===a.keyType?e.exports[a.scheme].privateImport(t,i,a.keyOpt):e.exports[a.scheme].publicImport(t,i,a.keyOpt)}return!1}}},37073:(e,t,i)=>{var s=i(48764).Buffer,r=i(4449).Ber,a=i(41147)._,n=i(41147);const o="-----BEGIN RSA PRIVATE KEY-----",h="-----END RSA PRIVATE KEY-----",c="-----BEGIN RSA PUBLIC KEY-----",d="-----END RSA PUBLIC KEY-----";e.exports={privateExport:function(e,t){t=t||{};var i=e.n.toBuffer(),s=e.d.toBuffer(),a=e.p.toBuffer(),c=e.q.toBuffer(),d=e.dmp1.toBuffer(),u=e.dmq1.toBuffer(),l=e.coeff.toBuffer(),f=i.length+s.length+a.length+c.length+d.length+u.length+l.length+512,p=new r.Writer({size:f});return p.startSequence(),p.writeInt(0),p.writeBuffer(i,2),p.writeInt(e.e),p.writeBuffer(s,2),p.writeBuffer(a,2),p.writeBuffer(c,2),p.writeBuffer(d,2),p.writeBuffer(u,2),p.writeBuffer(l,2),p.endSequence(),"der"===t.type?p.buffer:o+"\n"+n.linebrk(p.buffer.toString("base64"),64)+"\n"+h},privateImport:function(e,t,i){var c;if("der"!==(i=i||{}).type){if(s.isBuffer(t)&&(t=t.toString("utf8")),!a.isString(t))throw Error("Unsupported key format");var d=n.trimSurroundingText(t,o,h).replace(/\s+|\n\r|\n|\r$/gm,"");c=s.from(d,"base64")}else{if(!s.isBuffer(t))throw Error("Unsupported key format");c=t}var u=new r.Reader(c);u.readSequence(),u.readString(2,!0),e.setPrivate(u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0),u.readString(2,!0))},publicExport:function(e,t){t=t||{};var i=e.n.toBuffer(),s=i.length+512,a=new r.Writer({size:s});return a.startSequence(),a.writeBuffer(i,2),a.writeInt(e.e),a.endSequence(),"der"===t.type?a.buffer:c+"\n"+n.linebrk(a.buffer.toString("base64"),64)+"\n"+d},publicImport:function(e,t,i){var o;if("der"!==(i=i||{}).type){if(s.isBuffer(t)&&(t=t.toString("utf8")),a.isString(t)){var h=n.trimSurroundingText(t,c,d).replace(/\s+|\n\r|\n|\r$/gm,"");o=s.from(h,"base64")}}else{if(!s.isBuffer(t))throw Error("Unsupported key format");o=t}var u=new r.Reader(o);u.readSequence(),e.setPublic(u.readString(2,!0),u.readString(2,!0))},autoImport:function(t,i){return/^[\S\s]*-----BEGIN RSA PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PRIVATE KEY-----[\S\s]*$/g.test(i)?(e.exports.privateImport(t,i),!0):!!/^[\S\s]*-----BEGIN RSA PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PUBLIC KEY-----[\S\s]*$/g.test(i)&&(e.exports.publicImport(t,i),!0)}}},27158:(e,t,i)=>{var s=i(48764).Buffer,r=i(4449).Ber,a=i(41147)._,n="1.2.840.113549.1.1.1",o=i(41147);const h="-----BEGIN PRIVATE KEY-----",c="-----END PRIVATE KEY-----",d="-----BEGIN PUBLIC KEY-----",u="-----END PUBLIC KEY-----";e.exports={privateExport:function(e,t){t=t||{};var i=e.n.toBuffer(),s=e.d.toBuffer(),a=e.p.toBuffer(),d=e.q.toBuffer(),u=e.dmp1.toBuffer(),l=e.dmq1.toBuffer(),f=e.coeff.toBuffer(),p=i.length+s.length+a.length+d.length+u.length+l.length+f.length+512,m=new r.Writer({size:p});m.startSequence(),m.writeInt(0),m.writeBuffer(i,2),m.writeInt(e.e),m.writeBuffer(s,2),m.writeBuffer(a,2),m.writeBuffer(d,2),m.writeBuffer(u,2),m.writeBuffer(l,2),m.writeBuffer(f,2),m.endSequence();var g=new r.Writer({size:p});return g.startSequence(),g.writeInt(0),g.startSequence(),g.writeOID(n),g.writeNull(),g.endSequence(),g.writeBuffer(m.buffer,4),g.endSequence(),"der"===t.type?g.buffer:h+"\n"+o.linebrk(g.buffer.toString("base64"),64)+"\n"+c},privateImport:function(e,t,i){var d;if("der"!==(i=i||{}).type){if(s.isBuffer(t)&&(t=t.toString("utf8")),!a.isString(t))throw Error("Unsupported key format");var u=o.trimSurroundingText(t,h,c).replace("-----END PRIVATE KEY-----","").replace(/\s+|\n\r|\n|\r$/gm,"");d=s.from(u,"base64")}else{if(!s.isBuffer(t))throw Error("Unsupported key format");d=t}var l=new r.Reader(d);if(l.readSequence(),l.readInt(0),new r.Reader(l.readString(48,!0)).readOID(6,!0)!==n)throw Error("Invalid Public key format");var f=new r.Reader(l.readString(4,!0));f.readSequence(),f.readString(2,!0),e.setPrivate(f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0))},publicExport:function(e,t){t=t||{};var i=e.n.toBuffer(),s=i.length+512,a=new r.Writer({size:s});a.writeByte(0),a.startSequence(),a.writeBuffer(i,2),a.writeInt(e.e),a.endSequence();var h=new r.Writer({size:s});return h.startSequence(),h.startSequence(),h.writeOID(n),h.writeNull(),h.endSequence(),h.writeBuffer(a.buffer,3),h.endSequence(),"der"===t.type?h.buffer:d+"\n"+o.linebrk(h.buffer.toString("base64"),64)+"\n"+u},publicImport:function(e,t,i){var h;if("der"!==(i=i||{}).type){if(s.isBuffer(t)&&(t=t.toString("utf8")),a.isString(t)){var c=o.trimSurroundingText(t,d,u).replace(/\s+|\n\r|\n|\r$/gm,"");h=s.from(c,"base64")}}else{if(!s.isBuffer(t))throw Error("Unsupported key format");h=t}var l=new r.Reader(h);if(l.readSequence(),new r.Reader(l.readString(48,!0)).readOID(6,!0)!==n)throw Error("Invalid Public key format");var f=new r.Reader(l.readString(3,!0));f.readByte(),f.readSequence(),e.setPublic(f.readString(2,!0),f.readString(2,!0))},autoImport:function(t,i){return/^[\S\s]*-----BEGIN PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PRIVATE KEY-----[\S\s]*$/g.test(i)?(e.exports.privateImport(t,i),!0):!!/^[\S\s]*-----BEGIN PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PUBLIC KEY-----[\S\s]*$/g.test(i)&&(e.exports.publicImport(t,i),!0)}}},28446:(e,t,i)=>{var s=i(48764).Buffer,r=i(41147)._;function a(e,t){null!=e&&("number"==typeof e?this.fromNumber(e,t):s.isBuffer(e)?this.fromBuffer(e):null==t&&"string"!=typeof e?this.fromByteArray(e):this.fromString(e,t))}function n(){return new a(null)}a.prototype.am=function(e,t,i,s,r,a){for(var n=16383&t,o=t>>14;--a>=0;){var h=16383&this[e],c=this[e++]>>14,d=o*h+c*n;r=((h=n*h+((16383&d)<<14)+i[s]+r)>>28)+(d>>14)+o*c,i[s++]=268435455&h}return r},a.prototype.DB=28,a.prototype.DM=268435455,a.prototype.DV=1<<28,a.prototype.FV=Math.pow(2,52),a.prototype.F1=24,a.prototype.F2=4;var o,h,c=new Array;for(o="0".charCodeAt(0),h=0;h<=9;++h)c[o++]=h;for(o="a".charCodeAt(0),h=10;h<36;++h)c[o++]=h;for(o="A".charCodeAt(0),h=10;h<36;++h)c[o++]=h;function d(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function u(e,t){var i=c[e.charCodeAt(t)];return null==i?-1:i}function l(e){var t=n();return t.fromInt(e),t}function f(e){var t,i=1;return 0!=(t=e>>>16)&&(e=t,i+=16),0!=(t=e>>8)&&(e=t,i+=8),0!=(t=e>>4)&&(e=t,i+=4),0!=(t=e>>2)&&(e=t,i+=2),0!=(t=e>>1)&&(e=t,i+=1),i}function p(e){this.m=e}function m(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function g(e,t){return e&t}function y(e,t){return e|t}function b(e,t){return e^t}function v(e){if(0===e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function w(){}function k(e){return e}function _(e){this.r2=n(),this.q3=n(),a.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}p.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},p.prototype.revert=function(e){return e},p.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},p.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},p.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},m.prototype.convert=function(e){var t=n();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(a.ZERO)>0&&this.m.subTo(t,t),t},m.prototype.revert=function(e){var t=n();return e.copyTo(t),this.reduce(t),t},m.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var i=32767&e[t],s=i*this.mpl+((i*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[i=t+this.m.t]+=this.m.am(0,s,e,t,0,this.m.t);e[i]>=e.DV;)e[i]-=e.DV,e[++i]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},m.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},m.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},w.prototype.convert=k,w.prototype.revert=k,w.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i)},w.prototype.sqrTo=function(e,t){e.squareTo(t)},_.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=n();return e.copyTo(t),this.reduce(t),t},_.prototype.revert=function(e){return e},_.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},_.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},_.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},a.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},a.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0},a.prototype.fromString=function(e,t,i){var s;switch(t){case 2:s=1;break;case 4:s=2;break;case 8:s=3;break;case 16:s=4;break;case 32:s=5;break;case 256:s=8;break;default:return void this.fromRadix(e,t)}this.t=0,this.s=0;for(var r=e.length,n=!1,o=0;--r>=0;){var h=8==s?255&e[r]:u(e,r);h<0?"-"==e.charAt(r)&&(n=!0):(n=!1,0===o?this[this.t++]=h:o+s>this.DB?(this[this.t-1]|=(h&(1<<this.DB-o)-1)<<o,this[this.t++]=h>>this.DB-o):this[this.t-1]|=h<<o,(o+=s)>=this.DB&&(o-=this.DB))}i||8!=s||0==(128&e[0])||(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),n&&a.ZERO.subTo(this,this)},a.prototype.fromByteArray=function(e,t){this.fromString(e,256,t)},a.prototype.fromBuffer=function(e){this.fromString(e,256,!0)},a.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},a.prototype.dlShiftTo=function(e,t){var i;for(i=this.t-1;i>=0;--i)t[i+e]=this[i];for(i=e-1;i>=0;--i)t[i]=0;t.t=this.t+e,t.s=this.s},a.prototype.drShiftTo=function(e,t){for(var i=e;i<this.t;++i)t[i-e]=this[i];t.t=Math.max(this.t-e,0),t.s=this.s},a.prototype.lShiftTo=function(e,t){var i,s=e%this.DB,r=this.DB-s,a=(1<<r)-1,n=Math.floor(e/this.DB),o=this.s<<s&this.DM;for(i=this.t-1;i>=0;--i)t[i+n+1]=this[i]>>r|o,o=(this[i]&a)<<s;for(i=n-1;i>=0;--i)t[i]=0;t[n]=o,t.t=this.t+n+1,t.s=this.s,t.clamp()},a.prototype.rShiftTo=function(e,t){t.s=this.s;var i=Math.floor(e/this.DB);if(i>=this.t)t.t=0;else{var s=e%this.DB,r=this.DB-s,a=(1<<s)-1;t[0]=this[i]>>s;for(var n=i+1;n<this.t;++n)t[n-i-1]|=(this[n]&a)<<r,t[n-i]=this[n]>>s;s>0&&(t[this.t-i-1]|=(this.s&a)<<r),t.t=this.t-i,t.clamp()}},a.prototype.subTo=function(e,t){for(var i=0,s=0,r=Math.min(e.t,this.t);i<r;)s+=this[i]-e[i],t[i++]=s&this.DM,s>>=this.DB;if(e.t<this.t){for(s-=e.s;i<this.t;)s+=this[i],t[i++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;i<e.t;)s-=e[i],t[i++]=s&this.DM,s>>=this.DB;s-=e.s}t.s=s<0?-1:0,s<-1?t[i++]=this.DV+s:s>0&&(t[i++]=s),t.t=i,t.clamp()},a.prototype.multiplyTo=function(e,t){var i=this.abs(),s=e.abs(),r=i.t;for(t.t=r+s.t;--r>=0;)t[r]=0;for(r=0;r<s.t;++r)t[r+i.t]=i.am(0,s[r],t,r,0,i.t);t.s=0,t.clamp(),this.s!=e.s&&a.ZERO.subTo(t,t)},a.prototype.squareTo=function(e){for(var t=this.abs(),i=e.t=2*t.t;--i>=0;)e[i]=0;for(i=0;i<t.t-1;++i){var s=t.am(i,t[i],e,2*i,0,1);(e[i+t.t]+=t.am(i+1,2*t[i],e,2*i+1,s,t.t-i-1))>=t.DV&&(e[i+t.t]-=t.DV,e[i+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(i,t[i],e,2*i,0,1)),e.s=0,e.clamp()},a.prototype.divRemTo=function(e,t,i){var s=e.abs();if(!(s.t<=0)){var r=this.abs();if(r.t<s.t)return null!=t&&t.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var o=n(),h=this.s,c=e.s,d=this.DB-f(s[s.t-1]);d>0?(s.lShiftTo(d,o),r.lShiftTo(d,i)):(s.copyTo(o),r.copyTo(i));var u=o.t,l=o[u-1];if(0!==l){var p=l*(1<<this.F1)+(u>1?o[u-2]>>this.F2:0),m=this.FV/p,g=(1<<this.F1)/p,y=1<<this.F2,b=i.t,v=b-u,w=null==t?n():t;for(o.dlShiftTo(v,w),i.compareTo(w)>=0&&(i[i.t++]=1,i.subTo(w,i)),a.ONE.dlShiftTo(u,w),w.subTo(o,o);o.t<u;)o[o.t++]=0;for(;--v>=0;){var k=i[--b]==l?this.DM:Math.floor(i[b]*m+(i[b-1]+y)*g);if((i[b]+=o.am(0,k,i,v,0,u))<k)for(o.dlShiftTo(v,w),i.subTo(w,i);i[b]<--k;)i.subTo(w,i)}null!=t&&(i.drShiftTo(u,t),h!=c&&a.ZERO.subTo(t,t)),i.t=u,i.clamp(),d>0&&i.rShiftTo(d,i),h<0&&a.ZERO.subTo(i,i)}}},a.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},a.prototype.isEven=function(){return 0===(this.t>0?1&this[0]:this.s)},a.prototype.exp=function(e,t){if(e>4294967295||e<1)return a.ONE;var i=n(),s=n(),r=t.convert(this),o=f(e)-1;for(r.copyTo(i);--o>=0;)if(t.sqrTo(i,s),(e&1<<o)>0)t.mulTo(s,r,i);else{var h=i;i=s,s=h}return t.revert(i)},a.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},a.prototype.toRadix=function(e){if(null==e&&(e=10),0===this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),i=Math.pow(e,t),s=l(i),r=n(),a=n(),o="";for(this.divRemTo(s,r,a);r.signum()>0;)o=(i+a.intValue()).toString(e).substr(1)+o,r.divRemTo(s,r,a);return a.intValue().toString(e)+o},a.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var i=this.chunkSize(t),s=Math.pow(t,i),r=!1,n=0,o=0,h=0;h<e.length;++h){var c=u(e,h);c<0?"-"==e.charAt(h)&&0===this.signum()&&(r=!0):(o=t*o+c,++n>=i&&(this.dMultiply(s),this.dAddOffset(o,0),n=0,o=0))}n>0&&(this.dMultiply(Math.pow(t,n)),this.dAddOffset(o,0)),r&&a.ZERO.subTo(this,this)},a.prototype.bitwiseTo=function(e,t,i){var s,r,a=Math.min(e.t,this.t);for(s=0;s<a;++s)i[s]=t(this[s],e[s]);if(e.t<this.t){for(r=e.s&this.DM,s=a;s<this.t;++s)i[s]=t(this[s],r);i.t=this.t}else{for(r=this.s&this.DM,s=a;s<e.t;++s)i[s]=t(r,e[s]);i.t=e.t}i.s=t(this.s,e.s),i.clamp()},a.prototype.addTo=function(e,t){for(var i=0,s=0,r=Math.min(e.t,this.t);i<r;)s+=this[i]+e[i],t[i++]=s&this.DM,s>>=this.DB;if(e.t<this.t){for(s+=e.s;i<this.t;)s+=this[i],t[i++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;i<e.t;)s+=e[i],t[i++]=s&this.DM,s>>=this.DB;s+=e.s}t.s=s<0?-1:0,s>0?t[i++]=s:s<-1&&(t[i++]=this.DV+s),t.t=i,t.clamp()},a.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},a.prototype.dAddOffset=function(e,t){if(0!==e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},a.prototype.multiplyLowerTo=function(e,t,i){var s,r=Math.min(this.t+e.t,t);for(i.s=0,i.t=r;r>0;)i[--r]=0;for(s=i.t-this.t;r<s;++r)i[r+this.t]=this.am(0,e[r],i,r,0,this.t);for(s=Math.min(e.t,t);r<s;++r)this.am(0,e[r],i,r,0,t-r);i.clamp()},a.prototype.multiplyUpperTo=function(e,t,i){--t;var s=i.t=this.t+e.t-t;for(i.s=0;--s>=0;)i[s]=0;for(s=Math.max(t-this.t,0);s<e.t;++s)i[this.t+s-t]=this.am(t-s,e[s],i,0,0,this.t+s-t);i.clamp(),i.drShiftTo(1,i)},a.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var i,s=(1<<t)-1,r=!1,a="",n=this.t,o=this.DB-n*this.DB%t;if(n-- >0)for(o<this.DB&&(i=this[n]>>o)>0&&(r=!0,a=d(i));n>=0;)o<t?(i=(this[n]&(1<<o)-1)<<t-o,i|=this[--n]>>(o+=this.DB-t)):(i=this[n]>>(o-=t)&s,o<=0&&(o+=this.DB,--n)),i>0&&(r=!0),r&&(a+=d(i));return r?a:"0"},a.prototype.negate=function(){var e=n();return a.ZERO.subTo(this,e),e},a.prototype.abs=function(){return this.s<0?this.negate():this},a.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var i=this.t;if(0!=(t=i-e.t))return this.s<0?-t:t;for(;--i>=0;)if(0!=(t=this[i]-e[i]))return t;return 0},a.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+f(this[this.t-1]^this.s&this.DM)},a.prototype.mod=function(e){var t=n();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(a.ZERO)>0&&e.subTo(t,t),t},a.prototype.clone=function(){var e=n();return this.copyTo(e),e},a.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0===this.t)return-1}else{if(1==this.t)return this[0];if(0===this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},a.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},a.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var i,s=this.DB-e*this.DB%8,r=0;if(e-- >0)for(s<this.DB&&(i=this[e]>>s)!=(this.s&this.DM)>>s&&(t[r++]=i|this.s<<this.DB-s);e>=0;)s<8?(i=(this[e]&(1<<s)-1)<<8-s,i|=this[--e]>>(s+=this.DB-8)):(i=this[e]>>(s-=8)&255,s<=0&&(s+=this.DB,--e)),0!=(128&i)&&(i|=-256),0===r&&(128&this.s)!=(128&i)&&++r,(r>0||i!=this.s)&&(t[r++]=i);return t},a.prototype.toBuffer=function(e){var t=s.from(this.toByteArray());if(!0===e&&0===t[0])t=t.slice(1);else if(r.isNumber(e)){if(t.length>e){for(var i=0;i<t.length-e;i++)if(0!==t[i])return null;return t.slice(t.length-e)}if(t.length<e){var a=s.alloc(e);return a.fill(0,0,e-t.length),t.copy(a,e-t.length),a}}return t},a.prototype.equals=function(e){return 0==this.compareTo(e)},a.prototype.min=function(e){return this.compareTo(e)<0?this:e},a.prototype.max=function(e){return this.compareTo(e)>0?this:e},a.prototype.and=function(e){var t=n();return this.bitwiseTo(e,g,t),t},a.prototype.or=function(e){var t=n();return this.bitwiseTo(e,y,t),t},a.prototype.xor=function(e){var t=n();return this.bitwiseTo(e,b,t),t},a.prototype.not=function(){for(var e=n(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},a.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+v(this[e]);return this.s<0?this.t*this.DB:-1},a.prototype.add=function(e){var t=n();return this.addTo(e,t),t},a.prototype.subtract=function(e){var t=n();return this.subTo(e,t),t},a.prototype.multiply=function(e){var t=n();return this.multiplyTo(e,t),t},a.prototype.divide=function(e){var t=n();return this.divRemTo(e,t,null),t},a.prototype.remainder=function(e){var t=n();return this.divRemTo(e,null,t),t},a.prototype.modPow=function(e,t){var i,s,r=e.bitLength(),a=l(1);if(r<=0)return a;i=r<18?1:r<48?3:r<144?4:r<768?5:6,s=r<8?new p(t):t.isEven()?new _(t):new m(t);var o=new Array,h=3,c=i-1,d=(1<<i)-1;if(o[1]=s.convert(this),i>1){var u=n();for(s.sqrTo(o[1],u);h<=d;)o[h]=n(),s.mulTo(u,o[h-2],o[h]),h+=2}var g,y,b=e.t-1,v=!0,w=n();for(r=f(e[b])-1;b>=0;){for(r>=c?g=e[b]>>r-c&d:(g=(e[b]&(1<<r+1)-1)<<c-r,b>0&&(g|=e[b-1]>>this.DB+r-c)),h=i;0==(1&g);)g>>=1,--h;if((r-=h)<0&&(r+=this.DB,--b),v)o[g].copyTo(a),v=!1;else{for(;h>1;)s.sqrTo(a,w),s.sqrTo(w,a),h-=2;h>0?s.sqrTo(a,w):(y=a,a=w,w=y),s.mulTo(w,o[g],a)}for(;b>=0&&0==(e[b]&1<<r);)s.sqrTo(a,w),y=a,a=w,w=y,--r<0&&(r=this.DB-1,--b)}return s.revert(a)},a.prototype.pow=function(e){return this.exp(e,new w)},a.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),i=e.s<0?e.negate():e.clone();if(t.compareTo(i)<0){var s=t;t=i,i=s}var r=t.getLowestSetBit(),a=i.getLowestSetBit();if(a<0)return t;for(r<a&&(a=r),a>0&&(t.rShiftTo(a,t),i.rShiftTo(a,i));t.signum()>0;)(r=t.getLowestSetBit())>0&&t.rShiftTo(r,t),(r=i.getLowestSetBit())>0&&i.rShiftTo(r,i),t.compareTo(i)>=0?(t.subTo(i,t),t.rShiftTo(1,t)):(i.subTo(t,i),i.rShiftTo(1,i));return a>0&&i.lShiftTo(a,i),i},a.int2char=d,a.ZERO=l(0),a.ONE=l(1),a.prototype.square=function(){var e=n();return this.squareTo(e),e},e.exports=a},939:(e,t,i)=>{var s=i(41147)._,r=i(28446),a=i(41147),n=i(48173);e.exports.Key=function(){function e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return e.prototype.setOptions=function(e){var t=n[e.signingScheme],i=n[e.encryptionScheme];t===i?this.signingScheme=this.encryptionScheme=i.makeScheme(this,e):(this.encryptionScheme=i.makeScheme(this,e),this.signingScheme=t.makeScheme(this,e))},e.prototype.setPrivate=function(e,t,i,n,o,h,c,d){if(!(e&&t&&i&&e.length>0&&(s.isNumber(t)||t.length>0)&&i.length>0))throw Error("Invalid RSA private key");this.n=new r(e),this.e=s.isNumber(t)?t:a.get32IntFromBuffer(t,0),this.d=new r(i),n&&o&&h&&c&&d&&(this.p=new r(n),this.q=new r(o),this.dmp1=new r(h),this.dmq1=new r(c),this.coeff=new r(d)),this.$$recalculateCache()},e.prototype.$doPrivate=function(e){if(this.p||this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),i=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(i)<0;)t=t.add(this.p);return t.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)},e.prototype.sign=function(e){return this.signingScheme.sign.apply(this.signingScheme,arguments)},e.prototype.isPrivate=function(){return this.n&&this.e&&this.d||!1},Object.defineProperty(e.prototype,"keySize",{get:function(){return this.cache.keyBitLength}}),Object.defineProperty(e.prototype,"encryptedDataLength",{get:function(){return this.cache.keyByteLength}}),Object.defineProperty(e.prototype,"maxMessageLength",{get:function(){return this.encryptionScheme.maxMessageLength()}}),e.prototype.$$recalculateCache=function(){this.cache=this.cache||{},this.cache.keyBitLength=this.n.bitLength(),this.cache.keyByteLength=this.cache.keyBitLength+6>>3},e}()},93679:(e,t,i)=>{var s=i(48764).Buffer,r=i(28446),a=i(27295);i(57567);var n={md2:s.from("3020300c06082a864886f70d020205000410","hex"),md5:s.from("3020300c06082a864886f70d020505000410","hex"),sha1:s.from("3021300906052b0e03021a05000414","hex"),sha224:s.from("302d300d06096086480165030402040500041c","hex"),sha256:s.from("3031300d060960864801650304020105000420","hex"),sha384:s.from("3041300d060960864801650304020205000430","hex"),sha512:s.from("3051300d060960864801650304020305000440","hex"),ripemd160:s.from("3021300906052b2403020105000414","hex"),rmd160:s.from("3021300906052b2403020105000414","hex")},o={ripemd160:"rmd160"};function h(e,t){var i=[];return t>0&&i.push(e>>>24),t>1&&i.push(e>>>16&255),t>2&&i.push(e>>>8&255),t>3&&i.push(255&e),i}e.exports={isEncryption:!0,isSignature:!0},e.exports.makeScheme=function(e,t){function i(e,t){this.key=e,this.options=t}return i.prototype.maxMessageLength=function(){return this.options.encryptionSchemeOptions&&3==this.options.encryptionSchemeOptions.padding?this.key.encryptedDataLength:this.key.encryptedDataLength-11},i.prototype.encUnPad=function(e,t){t=t||{};var i=0;if(this.options.encryptionSchemeOptions&&3==this.options.encryptionSchemeOptions.padding)return"function"==typeof e.lastIndexOf?e.slice(e.lastIndexOf("\0")+1,e.length):e.slice(String.prototype.lastIndexOf.call(e,"\0")+1,e.length);if(e.length<4)return null;if(1===t.type){if(0!==e[0]&&1!==e[1])return null;for(i=3;0!==e[i];)if(255!=e[i]||++i>=e.length)return null}else{if(0!==e[0]&&2!==e[1])return null;for(i=3;0!==e[i];)if(++i>=e.length)return null}return e.slice(i+1,e.length)},i.prototype.sign=function(e){var t=this.options.signingSchemeOptions.hash||"sha256";if("browser"===this.options.environment){var i=function(e){let t;if(!e.hasOwnProperty("sigBytes")||!e.hasOwnProperty("words"))throw Error("Argument not a wordArray");t=e.sigBytes,e=e.words;const i=[];let r=[],a=0;for(;t>0;)r=h(e[a],Math.min(4,t)),t-=r.length,i.push(r),a++;return new s.from([].concat.apply([],i),"hex")}(a[(t=o[t]||t).toUpperCase()](e.toString())),n=this.pkcs1pad(i,t);return this.key.$doPrivate(new r(n)).toBuffer(this.key.encryptedDataLength)}throw new Error("CCXT only supports browser mode :P")},i.prototype.pkcs1pad=function(e,t){var i=n[t];if(!i)throw Error("Unsupported hash algorithm");var r=s.concat([i,e]);if(r.length+10>this.key.encryptedDataLength)throw Error("Key is too short for signing algorithm ("+t+")");var a=s.alloc(this.key.encryptedDataLength-r.length-1);return a.fill(255,0,a.length-1),a[0]=1,a[a.length-1]=0,s.concat([a,r])},new i(e,t)}},48173:(e,t,i)=>{e.exports={pkcs1:i(93679),isEncryption:function(t){return e.exports[t]&&e.exports[t].isEncryption},isSignature:function(t){return e.exports[t]&&e.exports[t].isSignature}}},41147:e=>{e.exports.linebrk=function(e,t){for(var i="",s=0;s+t<e.length;)i+=e.substring(s,s+t)+"\n",s+=t;return i+e.substring(s,e.length)},e.exports.get32IntFromBuffer=function(e,t){var i;if(t=t||0,(i=e.length-t)>0){if(i>=4)return e.readUInt32BE(t);for(var s=0,r=t+i,a=0;r>t;r--,a+=2)s+=e[r-1]*Math.pow(16,a);return s}return NaN},e.exports._={isObject:function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)},isString:function(e){return"string"==typeof e||e instanceof String},isNumber:function(e){return"number"==typeof e||!isNaN(parseFloat(e))&&isFinite(e)},omit:function(e,t){var i={};for(var s in e)e.hasOwnProperty(s)&&s!==t&&(i[s]=e[s]);return i}},e.exports.trimSurroundingText=function(e,t,i){var s=0,r=e.length,a=e.indexOf(t);a>=0&&(s=a+t.length);var n=e.indexOf(i,a);return n>=0&&(r=n),e.substring(s,r)}},57539:e=>{"use strict";var t=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return t.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},84106:(e,t,i)=>{"use strict";var s=i(68633),r=i(58006),a=i(57539);e.exports={formats:a,parse:r,stringify:s}},58006:(e,t,i)=>{"use strict";var s=i(48578),r=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:s.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},n=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},o=function(e,t,i){if(e){var s=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,n=/(\[[^[\]]*])/.exec(s),o=n?s.slice(0,n.index):s,h=[];if(o){if(!i.plainObjects&&r.call(Object.prototype,o)&&!i.allowPrototypes)return;h.push(o)}for(var c=0;null!==(n=a.exec(s))&&c<i.depth;){if(c+=1,!i.plainObjects&&r.call(Object.prototype,n[1].slice(1,-1))&&!i.allowPrototypes)return;h.push(n[1])}return n&&h.push("["+s.slice(n.index)+"]"),function(e,t,i){for(var s=t,r=e.length-1;r>=0;--r){var a,n=e[r];if("[]"===n&&i.parseArrays)a=[].concat(s);else{a=i.plainObjects?Object.create(null):{};var o="["===n.charAt(0)&&"]"===n.charAt(n.length-1)?n.slice(1,-1):n,h=parseInt(o,10);i.parseArrays||""!==o?!isNaN(h)&&n!==o&&String(h)===o&&h>=0&&i.parseArrays&&h<=i.arrayLimit?(a=[])[h]=s:a[o]=s:a={0:s}}s=a}return s}(h,t,i)}};e.exports=function(e,t){var i=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||s.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth?e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null==e)return i.plainObjects?Object.create(null):{};for(var h="string"==typeof e?function(e,t){var i,o={},h=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,c=t.parameterLimit===1/0?void 0:t.parameterLimit,d=h.split(t.delimiter,c),u=-1,l=t.charset;if(t.charsetSentinel)for(i=0;i<d.length;++i)0===d[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[i]?l="utf-8":"utf8=%26%2310003%3B"===d[i]&&(l="iso-8859-1"),u=i,i=d.length);for(i=0;i<d.length;++i)if(i!==u){var f,p,m=d[i],g=m.indexOf("]="),y=-1===g?m.indexOf("="):g+1;-1===y?(f=t.decoder(m,a.decoder,l),p=t.strictNullHandling?null:""):(f=t.decoder(m.slice(0,y),a.decoder,l),p=t.decoder(m.slice(y+1),a.decoder,l)),p&&t.interpretNumericEntities&&"iso-8859-1"===l&&(p=n(p)),p&&t.comma&&p.indexOf(",")>-1&&(p=p.split(",")),r.call(o,f)?o[f]=s.combine(o[f],p):o[f]=p}return o}(e,i):e,c=i.plainObjects?Object.create(null):{},d=Object.keys(h),u=0;u<d.length;++u){var l=d[u],f=o(l,h[l],i);c=s.merge(c,f,i)}return s.compact(c)}},68633:(e,t,i)=>{"use strict";var s=i(48578),r=i(57539),a=Object.prototype.hasOwnProperty,n={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},o=Array.isArray,h=Array.prototype.push,c=function(e,t){h.apply(e,o(t)?t:[t])},d=Date.prototype.toISOString,u={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:s.encode,encodeValuesOnly:!1,formatter:r.formatters[r.default],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,i,r,a,n,h,d,l,f,p,m,g,y){var b=t;if("function"==typeof d?b=d(i,b):b instanceof Date?b=p(b):"comma"===r&&o(b)&&(b=b.join(",")),null===b){if(a)return h&&!g?h(i,u.encoder,y):i;b=""}if("string"==typeof b||"number"==typeof b||"boolean"==typeof b||s.isBuffer(b))return h?[m(g?i:h(i,u.encoder,y))+"="+m(h(b,u.encoder,y))]:[m(i)+"="+m(String(b))];var v,w=[];if(void 0===b)return w;if(o(d))v=d;else{var k=Object.keys(b);v=l?k.sort(l):k}for(var _=0;_<v.length;++_){var S=v[_];n&&null===b[S]||(o(b)?c(w,e(b[S],"function"==typeof r?r(i,S):i,r,a,n,h,d,l,f,p,m,g,y)):c(w,e(b[S],i+(f?"."+S:"["+S+"]"),r,a,n,h,d,l,f,p,m,g,y)))}return w};e.exports=function(e,t){var i,s=e,h=function(e){if(!e)return u;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||u.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=r.default;if(void 0!==e.format){if(!a.call(r.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var s=r.formatters[i],n=u.filter;return("function"==typeof e.filter||o(e.filter))&&(n=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:u.addQueryPrefix,allowDots:void 0===e.allowDots?u.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:u.charsetSentinel,delimiter:void 0===e.delimiter?u.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:u.encode,encoder:"function"==typeof e.encoder?e.encoder:u.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:u.encodeValuesOnly,filter:n,formatter:s,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:u.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:u.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:u.strictNullHandling}}(t);"function"==typeof h.filter?s=(0,h.filter)("",s):o(h.filter)&&(i=h.filter);var d,f=[];if("object"!=typeof s||null===s)return"";d=t&&t.arrayFormat in n?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var p=n[d];i||(i=Object.keys(s)),h.sort&&i.sort(h.sort);for(var m=0;m<i.length;++m){var g=i[m];h.skipNulls&&null===s[g]||c(f,l(s[g],g,p,h.strictNullHandling,h.skipNulls,h.encode?h.encoder:null,h.filter,h.sort,h.allowDots,h.serializeDate,h.formatter,h.encodeValuesOnly,h.charset))}var y=f.join(h.delimiter),b=!0===h.addQueryPrefix?"?":"";return h.charsetSentinel&&("iso-8859-1"===h.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),y.length>0?b+y:""}},48578:e=>{"use strict";var t=Object.prototype.hasOwnProperty,i=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),r=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},s=0;s<e.length;++s)void 0!==e[s]&&(i[s]=e[s]);return i};e.exports={arrayToObject:r,assign:function(e,t){return Object.keys(t).reduce((function(e,i){return e[i]=t[i],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],s=[],r=0;r<t.length;++r)for(var a=t[r],n=a.obj[a.prop],o=Object.keys(n),h=0;h<o.length;++h){var c=o[h],d=n[c];"object"==typeof d&&null!==d&&-1===s.indexOf(d)&&(t.push({obj:n,prop:c}),s.push(d))}return function(e){for(;e.length>1;){var t=e.pop(),s=t.obj[t.prop];if(i(s)){for(var r=[],a=0;a<s.length;++a)void 0!==s[a]&&r.push(s[a]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,i){var s=e.replace(/\+/g," ");if("iso-8859-1"===i)return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch(e){return s}},encode:function(e,t,i){if(0===e.length)return e;var r="string"==typeof e?e:String(e);if("iso-8859-1"===i)return escape(r).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var a="",n=0;n<r.length;++n){var o=r.charCodeAt(n);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?a+=r.charAt(n):o<128?a+=s[o]:o<2048?a+=s[192|o>>6]+s[128|63&o]:o<55296||o>=57344?a+=s[224|o>>12]+s[128|o>>6&63]+s[128|63&o]:(n+=1,o=65536+((1023&o)<<10|1023&r.charCodeAt(n)),a+=s[240|o>>18]+s[128|o>>12&63]+s[128|o>>6&63]+s[128|63&o])}return a},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(s,a,n){if(!a)return s;if("object"!=typeof a){if(i(s))s.push(a);else{if(!s||"object"!=typeof s)return[s,a];(n&&(n.plainObjects||n.allowPrototypes)||!t.call(Object.prototype,a))&&(s[a]=!0)}return s}if(!s||"object"!=typeof s)return[s].concat(a);var o=s;return i(s)&&!i(a)&&(o=r(s,n)),i(s)&&i(a)?(a.forEach((function(i,r){if(t.call(s,r)){var a=s[r];a&&"object"==typeof a&&i&&"object"==typeof i?s[r]=e(a,i,n):s.push(i)}else s[r]=i})),s):Object.keys(a).reduce((function(i,s){var r=a[s];return t.call(i,s)?i[s]=e(i[s],r,n):i[s]=r,i}),o)}}},80842:(e,t,i)=>{"use strict";const s=i(48819),{ArgumentsRequired:r,AuthenticationError:a,ExchangeError:n,InsufficientFunds:o,OrderNotFound:h,PermissionDenied:c,BadRequest:d,BadSymbol:u,DDoSProtection:l,InvalidOrder:f}=i(73449),p=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"stex",name:"STEX",countries:["EE"],rateLimit:1e3/3,certified:!1,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createDepositAddress:!0,createMarketOrder:void 0,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},version:"v3",urls:{logo:"https://user-images.githubusercontent.com/1294454/69680782-03fd0b80-10bd-11ea-909e-7f603500e9cc.jpg",api:"https://api3.stex.com",www:"https://www.stex.com",doc:["https://help.stex.com/en/collections/1593608-api-v3-documentation"],fees:"https://app.stex.com/en/pairs-specification",referral:"https://app.stex.com?ref=36416021"},requiredCredentials:{apiKey:!1,secret:!1,token:!0},timeframes:{"1m":"1","5m":"5","30m":"30","1h":"60","4h":"240","12h":"720","1d":"1D"},api:{public:{get:{currencies:1,"currencies/{currencyId}":1,markets:1,"pairs-groups":1,"currency_pairs/list/{code}":1,"currency_pairs/group/{currencyPairGroupId}":1,"currency_pairs/{currencyPairId}":1,ticker:1,"ticker/{currencyPairId}":1,"trades/{currencyPairId}":1,"orderbook/{currencyPairId}":1,"chart/{currencyPairId}/{candlesType}":1,"deposit-statuses":1,"deposit-statuses/{statusId}":1,"withdrawal-statuses":1,"withdrawal-statuses/{statusId}":1,ping:1,"mobile-versions":1,twitter:1}},trading:{get:{"fees/{currencyPairId}":1,orders:12,"orders/{currencyPairId}":6,"order/{orderId}":12},post:{"orders/{currencyPairId}":1.5,"orders/bulk/{currencyPairId}":12},delete:{orders:30,"orders/{currencyPairId}":12,"order/{orderId}":1.5}},reports:{get:{currencies:12,currency_pairs:12,orders:12,"orders/{orderId}":12,"trades/{currencyPairId}":12,"background/{listMode}":12,"background/{id}":12,"background/download/{id}":12},post:{"background/create":12},delete:{"background/{id}":12}},profile:{get:{info:3,wallets:3,"wallets/{walletId}":3,"wallets/address/{walletId}":3,deposits:3,"deposits/{id}":3,rewards:3,"rewards/{id}":3,addressbook:3,"addressbook/{itemId}":3,withdrawals:3,"withdrawals/{id}":3,notifications:3,"notifications/price":3,"favorite/currency_pairs":3,"token-scopes":3},post:{"wallets/burn/{walletId}":3,"wallets/{walletId}/hold_amount":3,"wallets/{currencyId}":3,"wallets/address/{walletId}":3,"addressbook/disable_item/{itemId}":3,"addressbook/enable_item/{itemId}":3,"addressbook/enable_strict_wd":3,"addressbook/disable_strict_wd":3,withdraw:30,"notifications/price":3,"referral/program":3,"referral/insert/{code}":3,"referral/bonus_transfer/{currencyId}":3},put:{"favorite/currency_pairs/set":3},delete:{"addressbook/{itemId}":3,"withdraw/{withdrawalId}":30,"notifications/price/{priceAlertId}":3}},verification:{get:{countries:1,status:1,"fractal/url":1,"smart-id":1,stex:1,"cryptonomica/code":1},post:{"smart-id":1,stex:1,cryptonomica:1}},settings:{get:{"notifications/{event}":1,notifications:1},put:{notifications:1,"notifications/set":1}}},fees:{trading:{tierBased:!1,percentage:!0,taker:this.parseNumber("0.002"),maker:this.parseNumber("0.002")}},commonCurrencies:{BC:"Bitcoin Confidential",BITS:"Bitcoinus",BITSW:"BITS",BHD:"Bithold",BTH:"Bithereum",MPH:"Chasyr Token",SBTC:"SBTCT"},options:{parseOrderToPrecision:!1,networks:{ERC20:5,ETH:5,OMNI:10,XLM:20,BEP2:22,TRC20:24,TRX:24,SOL:25,BEP20:501}},exceptions:{exact:{"Wrong parameters":d,"Unauthenticated.":a,"Server Error":n,"This feature is only enabled for users verifies by Cryptonomica":c,"Too Many Attempts.":l,"Selected Pair is disabled":u,"Invalid scope(s) provided.":c,"The maximum amount of open orders with the same price cannot exceed 10":f},broad:{"Not enough":o}}})}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={},s=this.safeValue(t,"data",[]);for(let e=0;e<s.length;e++){const t=s[e],r=this.safeString(t,"id"),a=this.safeInteger(t,"id"),n=this.safeCurrencyCode(this.safeString(t,"code")),o=this.safeString(t,"precision"),h=this.parsePrecision(o),c=this.safeNumber(t,"withdrawal_fee_const"),d=this.safeValue(t,"active",!0);i[n]={id:r,numericId:a,code:n,info:t,type:void 0,name:this.safeString(t,"name"),active:d,fee:c,precision:parseInt(o),limits:{amount:{min:this.parseNumber(h),max:void 0},deposit:{min:this.safeNumber(t,"minimum_deposit_amount"),max:void 0},withdraw:{min:this.safeNumber(t,"minimum_withdrawal_amount"),max:void 0}}}}return i}async fetchMarkets(e={}){const t=await this.publicGetCurrencyPairsListCode(this.extend({code:"ALL"},e)),i=[],s=this.safeValue(t,"data",[]);for(let e=0;e<s.length;e++){const t=s[e],r=this.safeString(t,"id"),a=this.safeInteger(t,"id"),n=this.safeString(t,"currency_id"),o=this.safeString(t,"market_currency_id"),h=this.safeInteger(t,"currency_id"),c=this.safeInteger(t,"market_currency_id"),d=this.safeCurrencyCode(this.safeString(t,"currency_code")),u=this.safeCurrencyCode(this.safeString(t,"market_code")),l=d+"/"+u,f={amount:this.safeInteger(t,"currency_precision"),price:this.safeInteger(t,"market_precision")},p=this.safeValue(t,"active"),m=this.safeNumber(t,"min_buy_price"),g=this.safeNumber(t,"min_sell_price"),y=Math.max(m,g),b=this.safeNumber(t,"buy_fee_percent")/100,v=this.safeNumber(t,"sell_fee_percent")/100,w=Math.max(b,v);i.push({id:r,numericId:a,symbol:l,base:d,quote:u,baseId:n,quoteId:o,baseNumericId:h,quoteNumericId:c,info:t,type:"spot",spot:!0,active:p,maker:w,taker:w,precision:f,limits:{amount:{min:this.safeNumber(t,"min_order_amount"),max:void 0},price:{min:y,max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={currencyPairId:i.id},r=await this.publicGetTickerCurrencyPairId(this.extend(s,t)),a=this.safeValue(r,"data",{});return this.parseTicker(a,i)}async fetchTime(e={}){const t=await this.publicGetPing(e),i=this.safeValue(t,"data",{}),s=this.safeValue(i,"server_datetime",{});return this.parse8601(this.safeString(s,"date"))}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={currencyPairId:this.market(e).id};void 0!==t&&(s.limit_bids=t,s.limit_asks=t);const r=await this.publicGetOrderbookCurrencyPairId(this.extend(s,i)),a=this.safeValue(r,"data",{});return this.parseOrderBook(a,e,void 0,"bid","ask","price","amount")}parseTicker(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeString2(e,"id","symbol"),r=this.safeSymbol(s,t,"_"),a=this.safeNumber(e,"last"),n=this.safeNumber(e,"open");return this.safeTicker({symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:n,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"volumeQuote"),quoteVolume:this.safeNumber(e,"volume"),info:e},t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s=this.safeValue(i,"data",[]);return this.parseTickers(s,e)}parseOHLCV(e,t){return[this.safeInteger(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchOHLCV(e,t="1d",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={currencyPairId:a.id,candlesType:this.timeframes[t]};void 0===s?s=100:n.limit=s;const o=s*this.parseTimeframe(t);void 0===i?(n.timeEnd=this.seconds(),n.timeStart=n.timeEnd-o):(n.timeStart=parseInt(i/1e3),n.timeEnd=this.sum(n.timeStart,o));const h=await this.publicGetChartCurrencyPairIdCandlesType(this.extend(n,r)),c=this.safeValue(h,"data",[]);return this.parseOHLCVs(c,a,t,i,s)}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeTimestamp(e,"timestamp"),r=this.safeString(e,"price"),a=this.safeString(e,"amount"),n=this.parseNumber(r),o=this.parseNumber(a),h=this.parseNumber(p.stringMul(r,a));let c;void 0===c&&void 0!==t&&(c=t.symbol);const d=this.safeStringLower2(e,"type","trade_type");return{info:e,timestamp:s,datetime:this.iso8601(s),symbol:c,id:i,order:void 0,type:void 0,takerOrMaker:void 0,side:d,price:n,amount:o,cost:h,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={currencyPairId:r.id};void 0!==i&&(a.limit=i),void 0!==t&&(a.sort="ASC",a.from=parseInt(t/1e3));const n=await this.publicGetTradesCurrencyPairId(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseTrades(o,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.profileGetWallets(e),i={info:t,timestamp:void 0,datetime:void 0},s=this.safeValue(t,"data",[]);for(let e=0;e<s.length;e++){const t=s[e],r=this.safeCurrencyCode(this.safeString(t,"currency_id")),a=this.account();a.free=this.safeString(t,"balance"),a.used=this.safeString(t,"frozen_balance"),i[r]=a}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({PROCESSING:"open",PENDING:"open",PARTIAL:"open",FINISHED:"closed",CANCELLED:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parseOrderStatus(this.safeString(e,"status")),r=this.safeString2(e,"currency_pair_id","currency_pair_name"),a=this.safeSymbol(r,t,"_"),n=this.safeTimestamp(e,"timestamp"),o=this.safeNumber(e,"price"),h=this.safeNumber(e,"initial_amount"),c=this.safeNumber(e,"processed_amount");let d,u;void 0!==c&&(void 0!==h&&(d=h-c,this.options.parseOrderToPrecision&&(d=parseFloat(this.amountToPrecision(a,d))),d=Math.max(d,0)),void 0!==o&&void 0===u&&(u=o*c));let l=this.safeString(e,"original_type");"BUY"!==l&&"SELL"!==l||(l=void 0);const f=this.safeStringLower(e,"type"),p=this.safeValue(e,"trades");let m;void 0!==p&&(m=this.parseTrades(p,t,void 0,void 0,{symbol:a,order:i}));const g=this.safeNumber(e,"trigger_price"),y={info:e,id:i,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:a,type:l,timeInForce:void 0,postOnly:void 0,side:f,price:o,stopPrice:g,amount:h,cost:u,average:void 0,filled:c,remaining:d,status:s,trades:m},b=this.safeValue(e,"fees");if(void 0===b)y.fee=void 0;else if(b.length>0){y.fees=[];for(let e=0;e<b.length;e++){const t=this.safeNumber(b[e],"amount");if(void 0!==t){const i=this.safeString(b[e],"currency_id"),s=this.safeCurrencyCode(i);y.fees.push({cost:t,currency:s})}}}else y.fee=void 0;return y}async createOrder(e,t,i,s,r,a={}){if("market"===t)throw new n(this.id+" createOrder allows limit orders only");await this.loadMarkets();const o=this.market(e);"limit"===t&&(t=i);const h={currencyPairId:o.id,type:t.toUpperCase(),amount:parseFloat(this.amountToPrecision(e,s)),price:parseFloat(this.priceToPrecision(e,r))},c=await this.tradingPostOrdersCurrencyPairId(this.extend(h,a)),d=this.safeValue(c,"data",{});return this.parseOrder(d,o)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},r=await this.tradingGetOrderOrderId(this.extend(s,i)),a=this.safeValue(r,"data",{});let n;return void 0!==t&&(n=this.market(t)),this.parseOrder(a,n)}async fetchClosedOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},r=await this.reportsGetOrdersOrderId(this.extend(s,i)),a=this.safeValue(r,"data",{});let n;return void 0!==t&&(n=this.market(t)),this.parseOrder(a,n)}async fetchOrderTrades(e,t,i,s,r={}){return(await this.fetchClosedOrder(e,t,r)).trades}async fetchOpenOrders(e,t,i,s={}){let r;await this.loadMarkets();let a="tradingGetOrders";const n={};void 0!==e&&(a="tradingGetOrdersCurrencyPairId",r=this.market(e),n.currencyPairId=r.id),void 0!==i&&(n.limit=i);const o=await this[a](this.extend(n,s)),h=this.safeValue(o,"data",[]);return this.parseOrders(h,r,t,i)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e},r=await this.tradingDeleteOrderOrderId(this.extend(s,i)),a=this.safeValue(r,"data",{}),n=this.safeValue(a,"put_into_processing_queue",[]),o=this.safeValue(a,"not_put_into_processing_queue",[]),c=n.length,d=o.length;if(c<1){if(d<1)throw new h(this.id+" cancelOrder received an empty response: "+this.json(r));return this.parseOrder(o[0])}if(d<1)return this.parseOrder(n[0]);throw new h(this.id+" cancelOrder received an empty response: "+this.json(r))}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let s="tradingDeleteOrders";if(void 0!==e){const t=this.market(e);i.currencyPairId=t.id,s="tradingDeleteOrdersCurrencyPairId"}return await this[s](this.extend(i,t))}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const a=this.market(e),n={currencyPairId:a.id};void 0!==t&&(n.timeStart=this.iso8601(t)),void 0!==i&&(n.limit=i);const o=await this.reportsGetTradesCurrencyPairId(this.extend(n,s)),h=this.safeValue(o,"data",[]);return this.parseTrades(h,a,t,i)}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currencyId:this.currency(e).id},s=await this.profilePostWalletsCurrencyId(this.extend(i,t)),r=this.safeValue(s,"data",{}),a=this.safeValue(r,"deposit_address",{}),n=this.safeString(a,"address"),o=this.safeString(a,"additional_address_parameter");return this.checkAddress(n),{currency:e,address:n,tag:o,info:s}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=await this.fetchBalance(),s=this.safeValue(i.info,"data",[]),r=this.indexBy(s,"currency_id"),a=this.currency(e),o=this.safeValue(r,a.id);if(void 0===o)throw new n(this.id+" fetchDepositAddress() could not find the wallet id for currency code "+e+", try to call createDepositAddress() first");const h=this.safeInteger(o,"id");if(void 0===h)throw new n(this.id+" fetchDepositAddress() could not find the wallet id for currency code "+e+", try to call createDepositAddress() first");const c={walletId:h},d=await this.profileGetWalletsWalletId(this.extend(c,t)),u=this.safeValue(d,"data",[]),l=this.safeValue(u,"deposit_address",{}),f=this.safeString(l,"address"),p=this.safeString(l,"additional_address_parameter");return this.checkAddress(f),{currency:e,address:f,tag:p,network:void 0,info:d}}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api+"/"+t+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));return"public"===t?Object.keys(o).length&&(n+="?"+this.urlencode(o)):(this.checkRequiredCredentials(),r={Authorization:"Bearer "+this.token},"GET"===i||"DELETE"===i?Object.keys(o).length&&(n+="?"+this.urlencode(o)):(a=this.json(o),Object.keys(o).length&&(r["Content-Type"]="application/json"))),{url:n,method:i,body:a,headers:r}}parseTransactionStatus(e){return this.safeString({processing:"pending","checking by system":"pending",hodl:"pending","amount too low":"failed","not confirmed":"pending","cancelled by user":"canceled",approved:"pending",finished:"ok","withdrawal error":"failed","deposit error":"failed","cancelled by admin":"canceled",awaiting:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeValue(e,"withdrawal_address",{}),r=this.safeString(s,"address"),a=this.safeString(s,"additional_address_parameter"),n=this.safeString(e,"currency_id");let o;n in this.currencies_by_id?t=this.currencies_by_id[n]:o=this.commonCurrencyCode(this.safeString(e,"currency_code")),void 0===o&&void 0!==t&&(o=t.code);const h="deposit_status_id"in e?"deposit":"withdrawal",c=this.safeNumber(e,"amount"),d=this.parseTransactionStatus(this.safeStringLower(e,"status")),u=this.safeTimestamp2(e,"timestamp","created_ts"),l=this.safeTimestamp(e,"updated_ts"),f=this.safeString(e,"txid");let p;const m=this.safeNumber(e,"fee");if(void 0!==m){const t=this.safeString(e,"fee_currency_id","deposit_fee_currency_id");p={cost:m,currency:this.safeCurrencyCode(t)}}return{info:e,id:i,txid:f,timestamp:u,datetime:this.iso8601(u),addressFrom:void 0,address:r,addressTo:r,tagFrom:void 0,tag:a,tagTo:a,type:h,amount:c,currency:o,status:d,updated:l,fee:p}}async fetchDeposits(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.currency(e),a.currencyId=r.id),void 0!==i&&(a.limit=i),void 0!==t&&(a.timeStart=t);const n=await this.profileGetDeposits(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseTransactions(o,e,t,i)}async fetchWithdrawals(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.currency(e),a.currencyId=r.id),void 0!==i&&(a.limit=i),void 0!==t&&(a.timeStart=t);const n=await this.profileGetWithdrawals(this.extend(a,s)),o=this.safeValue(n,"data",[]);return this.parseTransactions(o,e,t,i)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),n={currency_id:a.id,amount:parseFloat(this.currencyToPrecision(e,t)),address:i};void 0!==s&&(n.additional_address_parameter=s);const o=this.safeValue(this.options,"networks",{});let h=this.safeStringUpper(r,"network");h=this.safeInteger(o,h,h),void 0!==h&&(n.protocol_id=h,r=this.omit(r,"network"));const c=await this.profilePostWithdraw(this.extend(n,r)),d=this.safeValue(c,"data",{});return this.parseTransaction(d,a)}async fetchFundingFees(e,t={}){await this.loadMarkets();const i=await this.publicGetCurrencies(t),s=this.safeValue(i,"data",[]),r={},a={};for(let e=0;e<s.length;e++){const t=this.safeString(s[e],"id"),i=this.safeCurrencyCode(t);r[i]=this.safeNumber(s[e],"withdrawal_fee_const"),a[i]=this.safeNumber(s[e],"deposit_fee_const")}return{withdraw:r,deposit:a,info:i}}handleErrors(e,t,i,s,r,a,o,h,c){if(void 0!==o&&!this.safeValue(o,"success",!1)){const e=this.safeString(o,"message"),t=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new n(t)}}}},9269:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,BadRequest:n,OrderNotFound:o,InvalidAddress:h}=i(73449),c=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"therock",name:"TheRockTrading",countries:["MT"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:"emulated",fetchWithdrawals:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766869-75057fa2-5ee9-11e7-9a6f-13e641fa4707.jpg",api:"https://api.therocktrading.com",www:"https://therocktrading.com",doc:["https://api.therocktrading.com/doc/v1/index.html","https://api.therocktrading.com/doc/"]},api:{public:{get:["funds","funds/{id}/orderbook","funds/{id}/ticker","funds/{id}/trades","funds/tickers"]},private:{get:["balances","balances/{id}","discounts","discounts/{id}","funds","funds/{id}","funds/{id}/trades","funds/{fund_id}/orders","funds/{fund_id}/orders/{id}","funds/{fund_id}/position_balances","funds/{fund_id}/positions","funds/{fund_id}/positions/{id}","transactions","transactions/{id}","withdraw_limits/{id}","withdraw_limits"],post:["atms/withdraw","funds/{fund_id}/orders"],delete:["funds/{fund_id}/orders/{id}","funds/{fund_id}/orders/remove_all"]}},fees:{trading:{maker:this.parseNumber("0.002"),taker:this.parseNumber("0.002")},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{BTC:0,BCH:0,PPC:0,ETH:0,ZEC:0,LTC:0,EUR:0}}},exceptions:{exact:{"Request already running":n,"cannot specify multiple address types":n,"Currency is not included in the list":n,"Record not found":o},broad:{"before must be greater than after param":n,"must be shorter than 60 days":n,"must be a multiple of (period param) in minutes":n,"Address allocation limit reached for currency":h,"is not a valid value for param currency":n," is invalid":h}}})}async fetchMarkets(e={}){const t=await this.publicGetFunds(e),i=this.safeValue(t,"funds"),s=[];if(void 0===i)throw new r(this.id+" fetchMarkets got an unexpected response");for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"id"),a=this.safeString(t,"trade_currency"),n=this.safeString(t,"base_currency"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c=o+"/"+h,d=this.safeNumber(t,"buy_fee"),u=this.safeNumber(t,"sell_fee");let l=Math.max(d,u);l/=100;const f=l;s.push({id:r,symbol:c,base:o,quote:h,baseId:a,quoteId:n,info:t,type:"spot",spot:!0,active:!0,maker:f,taker:l,precision:{amount:this.safeInteger(t,"trade_currency_decimals"),price:this.safeInteger(t,"base_currency_decimals")},limits:{amount:{min:this.safeNumber(t,"minimum_quantity_offer"),max:void 0},price:{min:this.safeNumber(t,"minimum_price_offer"),max:void 0},cost:{min:void 0,max:void 0}}})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalances(e),i=this.safeValue(t,"balances",[]),s={info:t};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(t,"trading_balance"),n.total=this.safeString(t,"balance"),s[a]=n}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},r=await this.publicGetFundsIdOrderbook(this.extend(s,i)),a=this.parse8601(this.safeString(r,"date"));return this.parseOrderBook(r,e,a,"bids","asks","price","amount")}parseTicker(e,t){const i=this.parse8601(e.date);let s;void 0!==t&&(s=t.symbol);const r=this.safeNumber(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeNumber(e,"open"),close:r,last:r,previousClose:this.safeNumber(e,"close"),change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"volume_traded"),quoteVolume:this.safeNumber(e,"volume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetFundsTickers(t),s=this.indexBy(i.tickers,"fund_id"),r=Object.keys(s),a={};for(let e=0;e<r.length;e++){const t=r[e],i=this.safeMarket(t),n=i.symbol,o=s[t];a[n]=this.parseTicker(o,i)}return this.filterByArray(a,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=await this.publicGetFundsIdTicker(this.extend({id:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){const i=this.safeString(e,"fund_id"),s=this.safeSymbol(i,t),r=this.parse8601(this.safeString(e,"date")),a=this.safeString(e,"id"),n=this.safeString(e,"order_id"),o=this.safeString(e,"side"),h=this.safeString(e,"price"),d=this.safeString(e,"amount"),u=this.parseNumber(h),l=this.parseNumber(d),f=this.parseNumber(c.stringMul(h,d));let p,m;const g=this.safeValue(e,"transactions",[]),y=this.groupBy(g,"type"),b=this.safeValue(y,"paid_commission",[]);for(let e=0;e<b.length;e++)void 0===m&&(m=0),m=this.sum(m,this.safeNumber(b[e],"price"));return void 0!==m&&(p={cost:m,currency:t.quote}),{info:e,id:a,order:n,timestamp:r,datetime:this.iso8601(r),symbol:s,type:void 0,side:o,takerOrMaker:void 0,price:u,amount:l,cost:f,fee:p}}parseLedgerEntryDirection(e){return this.safeString({affiliate_earnings:"in",atm_payment:"in",bought_currency_from_fund:"out",bought_shares:"out",paid_commission:"out",paypal_payment:"in",pos_payment:"in",released_currency_to_fund:"out",rollover_commission:"out",sold_currency_to_fund:"in",sold_shares:"in",transfer_received:"in",transfer_sent:"out",withdraw:"out"},e,e)}parseLedgerEntryType(e){return this.safeString({affiliate_earnings:"referral",atm_payment:"transaction",bought_currency_from_fund:"trade",bought_shares:"trade",paid_commission:"fee",paypal_payment:"transaction",pos_payment:"transaction",released_currency_to_fund:"trade",rollover_commission:"fee",sold_currency_to_fund:"trade",sold_shares:"trade",transfer_received:"transfer",transfer_sent:"transfer",withdraw:"transaction"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"id");let s,r=this.safeString(e,"type");const a=this.parseLedgerEntryDirection(r);r=this.parseLedgerEntryType(r),"trade"!==r&&"fee"!==r||(s=this.safeString(e,"trade_id"));const n=this.safeString(e,"currency"),o=this.safeCurrencyCode(n),h=this.safeNumber(e,"price"),c=this.parse8601(this.safeString(e,"date"));return{info:e,id:i,direction:a,account:void 0,referenceId:s,referenceAccount:void 0,type:r,currency:o,amount:h,before:void 0,after:void 0,status:"ok",timestamp:c,datetime:this.iso8601(c),fee:void 0}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==t&&(r.after=this.iso8601(t));const n=await this.privateGetTransactions(this.extend(r,s)),o=this.safeValue(n,"transactions",[]);return this.parseLedger(o,a,t,i)}parseTransactionType(e){return this.safeString({withdraw:"withdrawal",atm_payment:"deposit"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.parseTransactionType(this.safeString(e,"type")),r=this.safeValue(e,"transfer_detail",{}),a=this.safeString(r,"method");let n,o;void 0!==a&&"wire_transfer"!==a&&(n=this.safeString(r,"id"),o=this.safeString(r,"recipient"));const h=this.safeString(e,"currency"),c=this.safeCurrencyCode(h),d=this.safeNumber(e,"price"),u=this.parse8601(this.safeString(e,"date"));return{info:e,id:i,currency:c,amount:d,addressFrom:void 0,addressTo:o,address:o,tagFrom:void 0,tagTo:void 0,tag:void 0,status:"ok",type:s,updated:void 0,txid:n,timestamp:u,datetime:this.iso8601(u),fee:void 0}}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({type:"withdraw"},s))}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({type:"atm_payment"},s))}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==t&&(r.after=this.iso8601(t)),s=this.extend(r,s);const n=await this.privateGetTransactions(s),o=this.safeValue(n,"transactions",[]),h=this.filterByArray(o,"type",["withdraw","atm_payment"],!1);return this.parseTransactions(h,a,t,i)}parseOrderStatus(e){return this.safeString({active:"open",executed:"closed",deleted:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"fund_id"),r=this.safeSymbol(s,t),a=this.parseOrderStatus(this.safeString(e,"status")),n=this.parse8601(this.safeString(e,"date")),o=this.safeString(e,"type"),h=this.safeString(e,"side"),c=this.safeNumber(e,"amount"),d=this.safeNumber(e,"amount_unfilled");let u;void 0!==c&&void 0!==d&&(u=c-d);const l=this.safeNumber(e,"price");let f,p,m,g=this.safeValue(e,"trades");if(void 0!==g){const e=g.length;if(e>0){g=this.parseTrades(g,t,void 0,void 0,{orderId:i}),f=0,u=0;for(let t=0;t<e;t++){const e=g[t];f=this.sum(f,e.cost),u=this.sum(u,e.amount)}u>0&&(p=f/u),m=g[e-1].timestamp}else f=0}const y=this.safeNumber(e,"conditional_price");return{id:i,clientOrderId:void 0,info:e,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:m,status:a,symbol:r,type:o,timeInForce:void 0,postOnly:void 0,side:h,price:l,stopPrice:y,cost:f,amount:c,filled:u,average:p,remaining:d,fee:void 0,trades:g}}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"active"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"executed"},s))}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={fund_id:r.id};void 0!==t&&(n.after=this.iso8601(t));const o=await this.privateGetFundsFundIdOrders(this.extend(n,s)),h=this.safeValue(o,"orders",[]);return this.parseOrders(h,r,t,i)}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s={id:e,fund_id:this.market(t).id},r=await this.privatePostFundsFundIdOrdersId(this.extend(s,i));return this.parseOrder(r)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),"market"===t&&(r=0);const n={fund_id:this.marketId(e),side:i,amount:s,price:r},o=await this.privatePostFundsFundIdOrders(this.extend(n,a));return this.parseOrder(o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e,fund_id:this.marketId(t)},r=await this.privateDeleteFundsFundIdOrdersId(this.extend(s,i));return this.parseOrder(r)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const r=this.market(e),n={id:r.id};void 0!==i&&(n.per_page=i),void 0!==t&&(n.after=this.iso8601(t));const o=await this.privateGetFundsIdTrades(this.extend(n,s));return this.parseTrades(o.trades,r,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={id:r.id};void 0!==i&&(a.per_page=i),void 0!==t&&(a.after=this.iso8601(t));const n=await this.publicGetFundsIdTrades(this.extend(a,s));return this.parseTrades(n.trades,r,t,i)}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if(r=void 0===r?{}:r,"private"===t){if(this.checkRequiredCredentials(),Object.keys(o).length)if("POST"===i)a=this.json(o),r["Content-Type"]="application/json";else{const e=this.rawencode(o);e.length&&(n+="?"+e)}const e=this.nonce().toString(),t=e+n;r["X-TRT-KEY"]=this.apiKey,r["X-TRT-NONCE"]=e,r["X-TRT-SIGN"]=this.hmac(this.encode(t),this.encode(this.secret),"sha512")}else"public"===t&&Object.keys(o).length&&(n+="?"+this.rawencode(o));return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;const d=this.safeValue(o,"errors",[]),u=d.length;if(u>0){const e=this.id+" "+n;for(let t=0;t<u;t++){const i=d[t],s=this.safeString(i,"message");this.throwExactlyMatchedException(this.exceptions.exact,s,e),this.throwBroadlyMatchedException(this.exceptions.broad,s,e)}throw new r(e)}}}},51783:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,InsufficientFunds:a,OrderNotFound:n,ArgumentsRequired:o}=i(73449),h=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"tidebit",name:"TideBit",countries:["HK"],rateLimit:1e3,version:"v2",has:{cancelOrder:!0,CORS:void 0,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","12h":"720","1d":"1440","3d":"4320","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87460811-1e690280-c616-11ea-8652-69f187305add.jpg",api:"https://www.tidebit.com",www:"https://www.tidebit.com",doc:["https://www.tidebit.com/documents/api/guide","https://www.tidebit.com/swagger/#/default"],referral:"http://bit.ly/2IX0LrM"},api:{public:{get:["markets","tickers","tickers/{market}","timestamp","trades","trades/{market}","order_book","order","k_with_pending_trades","k","depth"],post:[]},private:{get:["addresses/{address}","deposits/history","deposits/get_deposit","deposits/deposit_address","historys/orders","historys/vouchers","historys/accounts","historys/snapshots","linkage/get_status","members/me","order","orders","partners/orders/{id}/trades","referral_commissions/get_undeposited","referral_commissions/get_graph_data","trades/my","withdraws/bind_account_list","withdraws/get_withdraw_account","withdraws/fetch_bind_info"],post:["deposits/deposit_cash","favorite_markets/update","order/delete","orders","orders/multi","orders/clear","referral_commissions/deposit","withdraws/apply","withdraws/bind_bank","withdraws/bind_address"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:this.parseNumber("0.003"),taker:this.parseNumber("0.003")},funding:{tierBased:!1,percentage:!0,withdraw:{}}},exceptions:{2002:a,2003:n}})}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetDepositAddress(this.extend(i,t));if("success"in s&&s.success){const t=this.safeString(s,"address"),i=this.safeString(s,"addressTag");return{currency:e,address:this.checkAddress(t),tag:i,info:s}}}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"id"),a=this.safeString(s,"name"),[n,o]=a.split("/"),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o);i.push({id:r,symbol:a,base:h,quote:c,baseId:n,quoteId:o,info:s,type:"spot",spot:!0,active:void 0,precision:this.precision,limits:this.limits})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetMembersMe(e),i=this.safeValue(t,"accounts"),s={info:i};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(t,"balance"),n.used=this.safeString(t,"locked"),s[a]=n}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r={market:s.id};void 0!==t&&(r.limit=t),r.market=s.id;const a=await this.publicGetDepth(this.extend(r,i)),n=this.safeTimestamp(a,"timestamp");return this.parseOrderBook(a,e,n)}parseTicker(e,t){const i=this.safeTimestamp(e,"at");let s;e=this.safeValue(e,"ticker",{}),void 0!==t&&(s=t.symbol);const r=this.safeNumber(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),ask:this.safeNumber(e,"sell"),bidVolume:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,change:void 0,percentage:void 0,previousClose:void 0,average:void 0,baseVolume:this.safeNumber(e,"vol"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTickers(t),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){const t=s[e],a=this.safeMarket(t),n=a.symbol,o=i[t];r[n]=this.parseTicker(o,a)}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.publicGetTickersMarket(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"id"),r=this.safeString(e,"price"),a=this.safeString(e,"volume"),n=this.parseNumber(r),o=this.parseNumber(a);let c,d=this.safeNumber(e,"funds");return void 0===d&&(d=this.parseNumber(h.stringMul(r,a))),void 0!==t&&(c=t.symbol),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:c,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:n,amount:o,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id},n=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e);void 0===s&&(s=30);const n={market:a.id,period:this.timeframes[t],limit:s};n.timestamp=void 0!==i?parseInt(i/1e3):18e5;const o=await this.publicGetK(this.extend(n,r));return"null"===o?[]:this.parseOHLCVs(o,a,t,i,s)}parseOrderStatus(e){return this.safeString({done:"closed",wait:"open",cancel:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"market"),s=this.safeSymbol(i,t),r=this.parse8601(this.safeString(e,"created_at")),a=this.parseOrderStatus(this.safeString(e,"state")),n=this.safeString(e,"id"),o=this.safeString(e,"ord_type"),h=this.safeString(e,"side"),c=this.safeString(e,"price"),d=this.safeString(e,"volume"),u=this.safeString(e,"executed_volume"),l=this.safeString(e,"remaining_volume"),f=this.safeString(e,"avg_price");return this.safeOrder2({id:n,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:a,symbol:s,type:o,timeInForce:void 0,postOnly:void 0,side:h,price:c,stopPrice:void 0,amount:d,filled:u,remaining:l,cost:void 0,trades:void 0,fee:void 0,info:e,average:f},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n={market:this.marketId(e),side:i,volume:s.toString(),ord_type:t};"limit"===t&&(n.price=r.toString());const o=await this.privatePostOrders(this.extend(n,a));return this.parseOrder(o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privatePostOrderDelete(this.extend(s,i)),a=this.parseOrder(r),o=this.safeString(a,"status");if("closed"===o||"canceled"===o)throw new n(this.id+" "+this.json(a));return a}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),n=this.safeString(r,"id");if(void 0===n)throw new o(this.id+" withdraw() requires an extra `id` param (withdraw account id according to withdraws/bind_account_list endpoint");const h={id:n,currency_type:"coin",currency:a.id,body:t};return void 0!==s&&(h.memo=s),{info:await this.privatePostWithdrawsApply(this.extend(h,r)),id:void 0}}nonce(){return this.milliseconds()}encodeParams(e){return this.urlencode(this.keysort(e))}sign(e,t="public",i="GET",s={},r,a){const n="/api/"+this.version+"/"+this.implodeParams(e,s)+".json",o=this.omit(s,this.extractParams(e));let h=this.urls.api+n;if("public"===t)Object.keys(o).length&&(h+="?"+this.urlencode(o));else{this.checkRequiredCredentials();const e=this.nonce().toString(),t=this.keysort(this.extend({access_key:this.apiKey,tonce:e},s)),o=this.urlencode(t),c=i+"|"+n+"|"+o,d=o+"&signature="+this.hmac(this.encode(c),this.encode(this.secret));"GET"===i?h+="?"+d:(a=d,r={"Content-Type":"application/x-www-form-urlencoded"})}return{url:h,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(400===e||void 0===o){const e=this.id+" "+n;if(void 0===o)throw new r(e);const t=this.safeValue(o,"error",{}),i=this.safeString(t,"code");this.throwExactlyMatchedException(this.exceptions,i,e)}}}},46974:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:n,InsufficientFunds:o,OrderNotFound:h,DDoSProtection:c,InvalidOrder:d,AuthenticationError:u,PermissionDenied:l}=i(73449),f=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"tidex",name:"Tidex",countries:["UK"],rateLimit:2e3,version:"3",userAgent:this.userAgents.chrome,has:{cancelOrder:!0,CORS:void 0,createMarketOrder:void 0,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/30781780-03149dc4-a12e-11e7-82bb-313b269d24d4.jpg",api:{web:"https://gate.tidex.com/api",public:"https://api.tidex.com/api/3",private:"https://api.tidex.com/tapi"},www:"https://tidex.com",doc:"https://tidex.com/exchange/public-api",referral:"https://tidex.com/exchange/?ref=57f5638d9cd7",fees:["https://tidex.com/exchange/assets-spec","https://tidex.com/exchange/pairs-spec"]},api:{web:{get:["currency","pairs","tickers","orders","ordershistory","trade-data","trade-data/{id}"]},public:{get:["info","ticker/{pair}","depth/{pair}","trades/{pair}"]},private:{post:["getInfoExt","getInfo","Trade","ActiveOrders","OrderInfo","CancelOrder","TradeHistory","getDepositAddress","createWithdraw","getWithdraw"]}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,taker:this.parseNumber("0.001"),maker:this.parseNumber("0.001")}},commonCurrencies:{DSH:"DASH",EMGO:"MGO",MGO:"WMGO"},exceptions:{exact:{803:d,804:d,805:d,806:d,807:d,831:o,832:o,833:h},broad:{"Invalid pair name":r,"invalid api key":u,"invalid sign":u,"api key dont have trade permission":u,"invalid parameter":d,"invalid order":d,"Requests too often":c,"not available":n,"data unavailable":n,"external service unavailable":n,"IP restricted":l}},options:{fetchTickersMaxLength:2048},orders:{}})}async fetchCurrencies(e={}){const t=await this.webGetCurrency(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"symbol"),a=this.safeInteger(s,"amountPoint"),n=this.safeCurrencyCode(r);let o=!0===this.safeValue(s,"visible");const h=!0===this.safeValue(s,"withdrawEnable"),c=!0===this.safeValue(s,"depositEnable");h&&c||(o=!1);const d=this.safeString(s,"name"),u=this.safeNumber(s,"withdrawFee");i[n]={id:r,code:n,name:d,active:o,precision:a,funding:{withdraw:{active:h,fee:u},deposit:{active:c,fee:this.parseNumber("0")}},limits:{amount:{min:void 0,max:void 0},withdraw:{min:this.safeNumber(s,"withdrawMinAmount"),max:void 0},deposit:{min:this.safeNumber(s,"depositMinAmount"),max:void 0}},info:s}}return i}async fetchMarkets(e={}){const t=(await this.publicGetInfo(e)).pairs,i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){const r=i[e],a=t[r],[n,o]=r.split("_"),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=h+"/"+c,u={amount:this.safeInteger(a,"decimal_places"),price:this.safeInteger(a,"decimal_places")},l={amount:{min:this.safeNumber(a,"min_amount"),max:this.safeNumber(a,"max_amount")},price:{min:this.safeNumber(a,"min_price"),max:this.safeNumber(a,"max_price")},cost:{min:this.safeNumber(a,"min_total")}},p=0===this.safeInteger(a,"hidden");let m=this.safeString(a,"fee");m=f.stringDiv(m,"100");const g=this.parseNumber(m);s.push({id:r,symbol:d,base:h,quote:c,baseId:n,quoteId:o,type:"spot",spot:!0,active:p,taker:g,precision:u,limits:l,info:a})}return s}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetInfoExt(e),i=this.safeValue(t,"return"),s=this.safeTimestamp(i,"server_time"),r={info:t,timestamp:s,datetime:this.iso8601(s)},a=this.safeValue(i,"funds",{}),n=Object.keys(a);for(let e=0;e<n.length;e++){const t=n[e],i=this.safeCurrencyCode(t),s=this.safeValue(a,t,{}),o=this.account();o.free=this.safeString(s,"value"),o.used=this.safeString(s,"inOrders"),r[i]=o}return this.parseBalance(r)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={pair:s.id};void 0!==t&&(a.limit=t);const n=await this.publicGetDepthPair(this.extend(a,i));if(!(s.id in n))throw new r(this.id+" "+s.symbol+" order book is empty or not available");const o=n[s.id];return this.parseOrderBook(o,e)}async fetchOrderBooks(e,t,i={}){let s;if(await this.loadMarkets(),void 0===e){if(s=this.ids.join("-"),s.length>2048){const e=this.ids.length;throw new r(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else s=this.marketIds(e),s=s.join("-");const a={pair:s};void 0!==t&&(a.limit=t);const n=await this.publicGetDepthPair(this.extend(a,i)),o={};s=Object.keys(n);for(let e=0;e<s.length;e++){const t=s[e];o[this.safeSymbol(t)]=this.parseOrderBook(n[t])}return o}parseTicker(e,t){let i,s=this.safeTimestamp(e,"updated");void 0!==t&&(i=t.symbol,t.active||(s=void 0));const r=this.safeNumber(e,"last");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeNumber(e,"avg"),baseVolume:this.safeNumber(e,"vol_cur"),quoteVolume:this.safeNumber(e,"vol"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=this.ids;if(void 0===e){const e=i.length;if(i=i.join("-"),i.length>this.options.fetchTickersMaxLength){const t=this.safeInteger(this.options,"fetchTickersMaxLength",2048);throw new a(this.id+" has "+e.toString()+" markets exceeding max URL length for this endpoint ("+t.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers")}}else i=this.marketIds(e),i=i.join("-");const s={pair:i},r=await this.publicGetTickerPair(this.extend(s,t)),n={},o=Object.keys(r);for(let e=0;e<o.length;e++){const t=o[e],i=this.safeMarket(t);n[i.symbol]=this.parseTicker(r[t],i)}return this.filterByArray(n,"symbol",e)}async fetchTicker(e,t={}){return(await this.fetchTickers([e],t))[e]}parseTrade(e,t){const i=this.safeTimestamp(e,"timestamp");let s=this.safeString(e,"type");"ask"===s?s="sell":"bid"===s&&(s="buy");const r=this.safeString2(e,"rate","price"),a=this.safeString2(e,"trade_id","tid"),n=this.safeString(e,"order_id"),o=this.safeString(e,"pair"),h=this.safeSymbol(o,t),c=this.safeString(e,"amount"),d=this.parseNumber(r),u=this.parseNumber(c),l=this.parseNumber(f.stringMul(r,c)),p="limit";let m,g;const y=this.safeNumber(e,"commission");if(void 0!==y){const t=this.safeString(e,"commissionCurrency");g={cost:y,currency:this.safeCurrencyCode(t)}}const b=this.safeValue(e,"is_your_order");return void 0!==b&&(m="taker",b&&(m="maker"),void 0===g&&(g=this.calculateFee(h,p,s,u,d,m))),{id:a,order:n,timestamp:i,datetime:this.iso8601(i),symbol:h,type:p,side:s,takerOrMaker:m,price:d,amount:u,cost:l,fee:g,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id};void 0!==i&&(a.limit=i);const n=await this.publicGetTradesPair(this.extend(a,s));return Array.isArray(n)&&0===n.length?[]:this.parseTrades(n[r.id],r,t,i)}async createOrder(e,t,i,s,a,n={}){if("market"===t)throw new r(this.id+" allows limit orders only");const o=s.toString(),h=a.toString();await this.loadMarkets();const c=this.market(e),d={pair:c.id,type:i,amount:this.amountToPrecision(e,s),rate:this.priceToPrecision(e,a)},u=await this.privatePostTrade(this.extend(d,n));let l,f="open",p="0.0",m=o;const g=this.safeValue(u,"return");void 0!==g&&(l=this.safeString(g,"order_id"),"0"===l&&(l=this.safeString(g,"init_order_id"),f="closed"),p=this.safeString(g,"received",p),m=this.safeString(g,"remains",o));const y=this.milliseconds();return this.safeOrder2({id:l,timestamp:y,datetime:this.iso8601(y),lastTradeTimestamp:void 0,status:f,symbol:e,type:t,side:i,price:h,cost:void 0,amount:o,remaining:m,filled:p,fee:void 0,info:u,clientOrderId:void 0,average:void 0,trades:void 0},c)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)};return await this.privatePostCancelOrder(this.extend(s,i))}parseOrderStatus(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parseOrderStatus(this.safeString(e,"status")),r=this.safeTimestamp(e,"timestamp_created"),a=this.safeString(e,"pair"),n=this.safeSymbol(a,t);let o,h;const c=this.safeString(e,"rate");return"start_amount"in e?(h=this.safeString(e,"start_amount"),o=this.safeString(e,"amount")):o=this.safeString(e,"amount"),this.safeOrder2({info:e,id:i,clientOrderId:void 0,symbol:n,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,type:"limit",timeInForce:void 0,postOnly:void 0,side:this.safeString(e,"type"),price:c,stopPrice:void 0,cost:void 0,amount:h,remaining:o,filled:void 0,status:s,fee:void 0,average:void 0,trades:void 0},t)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)},r=await this.privatePostOrderInfo(this.extend(s,i));e=e.toString();const a=this.safeValue(r,"return",{}),n=this.safeValue(a,e);return this.parseOrder(this.extend({id:e},n))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.pair=a.id);const n=await this.privatePostActiveOrders(this.extend(r,s)),o=this.safeValue(n,"return",[]);return this.parseOrders(o,a,t,i)}async fetchMyTrades(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.pair=r.id),void 0!==i&&(a.count=parseInt(i)),void 0!==t&&(a.since=parseInt(t/1e3));const n=await this.privatePostTradeHistory(this.extend(a,s)),o=this.safeValue(n,"return",[]);return this.parseTrades(o,r,t,i)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a={asset:this.currency(e).id,amount:parseFloat(t),address:i};void 0!==s&&(a.memo=s);const n=await this.privatePostCreateWithdraw(this.extend(a,r)),o=this.safeValue(n,"return",{});return{info:n,id:this.safeString(o,"withdraw_id")}}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t];const o=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();const t=this.nonce();a=this.urlencode(this.extend({nonce:t,method:e},o));const i=this.hmac(this.encode(a),this.encode(this.secret),"sha512");r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:i}}else"public"===t?(n+="/"+this.implodeParams(e,s),Object.keys(o).length&&(n+="?"+this.urlencode(o))):(n+="/"+this.implodeParams(e,s),"GET"===i?Object.keys(o).length&&(n+="?"+this.urlencode(o)):Object.keys(o).length&&(a=this.json(o),r={"Content-Type":"application/json"}));return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o&&"success"in o){let e=this.safeValue(o,"success",!1);if("string"==typeof e&&(e="true"===e||"1"===e),!e){const e=this.safeString(o,"code"),t=this.safeString(o,"error"),i=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new r(i)}}}}},41378:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,PermissionDenied:a,ExchangeNotAvailable:n,InsufficientFunds:o,OrderNotFound:h,InvalidOrder:c,RateLimitExceeded:d,NotSupported:u,BadRequest:l,AuthenticationError:f}=i(73449),p=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"timex",name:"TimeX",countries:["AU"],version:"v1",rateLimit:1500,has:{cancelOrder:!0,cancelOrders:!0,CORS:void 0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0},timeframes:{"1m":"I1","5m":"I5","15m":"I15","30m":"I30","1h":"H1","2h":"H2","4h":"H4","6h":"H6","12h":"H12","1d":"D1","1w":"W1"},urls:{logo:"https://user-images.githubusercontent.com/1294454/70423869-6839ab00-1a7f-11ea-8f94-13ae72c31115.jpg",api:"https://plasma-relay-backend.timex.io",www:"https://timex.io",doc:"https://docs.timex.io",referral:"https://timex.io/?refcode=1x27vNkTbP1uwkCck"},api:{custody:{get:["credentials","credentials/h/{hash}","credentials/k/{key}","credentials/me/address","deposit-addresses","deposit-addresses/h/{hash}"]},history:{get:["orders","orders/details","orders/export/csv","trades","trades/export/csv"]},currencies:{get:["a/{address}","i/{id}","s/{symbol}"],post:["perform","prepare","remove/perform","s/{symbol}/remove/prepare","s/{symbol}/update/perform","s/{symbol}/update/prepare"]},markets:{get:["i/{id}","s/{symbol}"],post:["perform","prepare","remove/perform","s/{symbol}/remove/prepare","s/{symbol}/update/perform","s/{symbol}/update/prepare"]},public:{get:["candles","currencies","markets","orderbook","orderbook/raw","orderbook/v2","tickers","trades"]},statistics:{get:["address"]},trading:{get:["balances","fees","orders"],post:["orders","orders/json"],put:["orders","orders/json"],delete:["orders","orders/json"]},tradingview:{get:["config","history","symbol_info","time"]}},exceptions:{exact:{0:r,1:u,4e3:l,4001:l,4002:o,4003:f,4004:f,4005:l,4006:l,4007:l,4300:a,4100:f,4400:h,5001:c,5002:r,400:l,401:f,403:a,404:h,429:d,500:r,503:n},broad:{Insufficient:o}},options:{fetchTickers:{period:"1d"},fetchTrades:{sort:"timestamp,asc"},fetchMyTrades:{sort:"timestamp,asc"},fetchOpenOrders:{sort:"createdAt,asc"},fetchClosedOrders:{sort:"createdAt,asc"},defaultSort:"timestamp,asc",defaultSortOrders:"createdAt,asc"}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=[];for(let e=0;e<t.length;e++)i.push(this.parseMarket(t[e]));return i}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i=[];for(let e=0;e<t.length;e++){const s=t[e];i.push(this.parseCurrency(s))}return this.indexBy(i,"code")}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.safeString(this.options.fetchTickers,"period","1d"),s={period:this.timeframes[i]},r=await this.publicGetTickers(this.extend(s,t));return this.parseTickers(r,e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s=this.safeString(this.options.fetchTickers,"period","1d"),r={market:i.id,period:this.timeframes[s]},a=await this.publicGetTickers(this.extend(r,t)),n=this.safeValue(a,0);return this.parseTicker(n,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.publicGetOrderbookV2(this.extend(s,i)),a=this.parse8601(this.safeString(r,"timestamp"));return this.parseOrderBook(r,e,a,"bid","ask","price","baseTokenAmount")}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a=this.safeValue(this.options,"fetchTrades",{}),n=this.safeValue(a,"sort","timestamp,asc"),o=this.safeString(s,"sort",n),h=this.omit(s,"sort"),c={market:r.id,sort:o};void 0!==t&&(c.from=this.iso8601(t)),void 0!==i&&(c.size=i);const d=await this.publicGetTrades(this.extend(c,h));return this.parseTrades(d,r,t,i)}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={market:a.id,period:this.timeframes[t]},o=this.parseTimeframe(t);if(void 0!==i)n.from=this.iso8601(i),void 0!==s&&(n.till=this.iso8601(this.sum(i,this.sum(s,1)*o*1e3)));else if(void 0!==s){const e=this.milliseconds();n.till=this.iso8601(e),n.from=this.iso8601(e-s*o*1e3-1)}else n.till=this.iso8601(this.milliseconds());const h=await this.publicGetCandles(this.extend(n,r));return this.parseOHLCVs(h,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.tradingGetBalances(e),i={info:t,timestamp:void 0,datetime:void 0};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.total=this.safeString(s,"totalBalance"),n.used=this.safeString(s,"lockedBalance"),i[a]=n}return this.parseBalance(i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o=i.toUpperCase(),h=t.toUpperCase(),d={symbol:n.id,quantity:this.amountToPrecision(e,s),side:o,orderTypes:h};let u=a;if("LIMIT"===h){d.price=this.priceToPrecision(e,r);const i=this.safeInteger(this.options,"expireIn"),s=this.safeValue(a,"expireTime"),n=this.safeValue(a,"expireIn",i);if(void 0!==s)d.expireTime=s;else{if(void 0===n)throw new c(this.id+" createOrder() method requires a expireTime or expireIn param for a "+t+" order, you can also set the expireIn exchange-wide option");d.expireIn=n}u=this.omit(a,["expireTime","expireIn"])}else d.price=0;const l=await this.tradingPostOrders(this.extend(d,u)),f=this.safeValue(l,"orders",[]),p=this.safeValue(f,0,{});return this.parseOrder(p,n)}async editOrder(e,t,i,s,r,a,n={}){await this.loadMarkets();const o=this.market(t),h={id:e};void 0!==r&&(h.quantity=this.amountToPrecision(t,r)),void 0!==a&&(h.price=this.priceToPrecision(t,a));const c=await this.tradingPutOrders(this.extend(h,n));if("unchangedOrders"in c){const e=this.safeValue(c,"unchangedOrders",[]);return{id:this.safeString(e,0),info:c}}const d=this.safeValue(c,"changedOrders",[]),u=this.safeValue(d,0,{}),l=this.safeValue(u,"newOrder",{});return this.parseOrder(l,o)}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.cancelOrders([e],t,i)}async cancelOrders(e,t,i={}){await this.loadMarkets();const s={id:e};return await this.tradingDeleteOrders(this.extend(s,i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderHash:e},r=await this.historyGetOrdersDetails(s),a=this.safeValue(r,"order",{}),n=this.safeValue(r,"trades",[]);return this.parseOrder(this.extend(a,{trades:n}))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=this.safeValue(this.options,"fetchOpenOrders",{}),a=this.safeValue(r,"sort","createdAt,asc"),n=this.safeString(s,"sort",a),o=this.omit(s,"sort"),h={sort:n};let c;void 0!==e&&(c=this.market(e),h.symbol=c.id),void 0!==i&&(h.size=i);const d=await this.tradingGetOrders(this.extend(h,o)),u=this.safeValue(d,"orders",[]);return this.parseOrders(u,c,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();const r=this.safeValue(this.options,"fetchClosedOrders",{}),a=this.safeValue(r,"sort","createdAt,asc"),n=this.safeString(s,"sort",a),o=this.omit(s,"sort"),h={sort:n,side:"BUY"};let c;void 0!==e&&(c=this.market(e),h.symbol=c.id),void 0!==t&&(h.from=this.iso8601(t)),void 0!==i&&(h.size=i);const d=await this.historyGetOrders(this.extend(h,o)),u=this.safeValue(d,"orders",[]);return this.parseOrders(u,c,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.safeValue(this.options,"fetchMyTrades",{}),a=this.safeValue(r,"sort","timestamp,asc"),n=this.safeString(s,"sort",a),o=this.omit(s,"sort"),h={sort:n};let c;void 0!==e&&(c=this.market(e),h.symbol=c.id),void 0!==t&&(h.from=this.iso8601(t)),void 0!==i&&(h.size=i);const d=await this.historyGetTrades(this.extend(h,o)),u=this.safeValue(d,"trades",[]);return this.parseTrades(u,c,t,i)}parseTradingFee(e,t){const i=this.safeString(e,"market"),s=this.safeNumber(e,"fee");return{info:e,symbol:this.safeSymbol(i,t),maker:s,taker:s}}async fetchTradingFee(e,t={}){await this.loadMarkets();const i=this.market(e),s={markets:i.id},r=await this.tradingGetFees(this.extend(s,t)),a=this.safeValue(r,0,{});return this.parseTradingFee(a,i)}parseMarket(e){const t=!this.safeValue(e,"locked"),i=this.safeString(e,"symbol"),s=this.safeString(e,"baseCurrency"),r=this.safeString(e,"quoteCurrency"),a=this.safeCurrencyCode(s),n=this.safeCurrencyCode(r),o=a+"/"+n,h={amount:this.precisionFromString(this.safeString(e,"quantityIncrement")),price:this.precisionFromString(this.safeString(e,"tickSize"))},c=this.safeNumber(e,"quantityIncrement"),d=this.safeNumber(e,"baseMinSize"),u=Math.max(c,d),l=this.safeNumber(e,"tickSize"),f=this.safeNumber(e,"quoteMinSize");return{id:i,symbol:o,base:a,quote:n,baseId:s,quoteId:r,type:"spot",spot:!0,active:t,precision:h,limits:{amount:{min:u,max:void 0},price:{min:l,max:void 0},cost:{min:Math.max(f,u*l),max:void 0}},taker:this.safeNumber(e,"takerFee"),maker:this.safeNumber(e,"makerFee"),info:e}}parseCurrency(e){const t=this.safeString(e,"symbol"),i=this.safeCurrencyCode(t),s=this.safeString(e,"name"),r=this.safeInteger(e,"decimals"),a=this.safeValue(e,"active"),n=this.safeString(e,"withdrawalFee"),o=this.safeInteger(e,"tradeDecimals");let h;if(void 0!==n&&void 0!==o){const e=n.length-o;if(e>0){const t=n.slice(0,e),i=n.slice(-e);h=this.parseNumber(t+"."+i)}else{let t=".";for(let i=0;i<-e;i++)t+="0";h=this.parseNumber(t+n)}}return{id:i,code:i,info:e,type:void 0,name:s,active:a,fee:h,precision:r,limits:{withdraw:{min:h,max:void 0},amount:{min:void 0,max:void 0}}}}parseTicker(e,t){const i=this.safeString(e,"market"),s=this.safeSymbol(i,t,"/"),r=this.parse8601(this.safeString(e,"timestamp")),a=this.safeNumber(e,"last"),n=this.safeNumber(e,"open");return this.safeTicker({symbol:s,info:e,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:n,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"volume"),quoteVolume:this.safeNumber(e,"volumeQuote")},t)}parseTrade(e,t){const i=this.safeString(e,"symbol"),s=this.safeSymbol(i,t),r=this.parse8601(this.safeString(e,"timestamp")),a=this.safeString(e,"price"),n=this.safeString(e,"quantity"),o=this.parseNumber(a),h=this.parseNumber(n),c=this.parseNumber(p.stringMul(a,n)),d=this.safeString(e,"id"),u=this.safeStringLower2(e,"direction","side"),l=this.safeStringLower(e,"makerOrTaker");let f,m;void 0!==l&&(f=this.safeString(e,l+"OrderId"));const g=this.safeNumber(e,"fee"),y=this.safeCurrencyCode(this.safeString(e,"feeToken"));return void 0!==g&&(m={cost:g,currency:y}),{info:e,id:d,timestamp:r,datetime:this.iso8601(r),symbol:s,order:f,type:void 0,side:u,price:o,amount:h,cost:c,takerOrMaker:l,fee:m}}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"timestamp")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeStringLower(e,"type"),r=this.safeStringLower(e,"side"),a=this.safeString(e,"symbol"),n=this.safeSymbol(a,t),o=this.parse8601(this.safeString(e,"createdAt")),h=this.safeNumber(e,"price"),c=this.safeNumber(e,"quantity"),d=this.safeNumber(e,"filledQuantity"),u=this.safeNumber(e,"cancelledQuantity");let l;void 0!==c&&void 0!==d&&(l=d>=c?"closed":void 0!==u&&u>0?"canceled":"open");const f=this.safeValue(e,"trades",[]),p=this.parseTrades(f,t,void 0,void 0,{order:i,type:s}),m=this.safeString(e,"clientOrderId");return this.safeOrder({info:e,id:i,clientOrderId:m,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:n,type:s,timeInForce:void 0,postOnly:void 0,side:r,price:h,stopPrice:void 0,amount:c,cost:void 0,average:void 0,filled:d,remaining:void 0,status:l,fee:void 0,trades:p})}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api+"/"+t+"/"+e;if(Object.keys(s).length&&(n+="?"+this.urlencodeWithArrayRepeat(s)),"public"!==t){this.checkRequiredCredentials();const e=this.stringToBase64(this.apiKey+":"+this.secret);r={authorization:"Basic "+this.decode(e)}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o&&e>=400){const e=this.id+" "+n;let t=this.safeValue(o,"error");void 0===t&&(t=o);const i=this.safeString2(t,"code","status"),s=this.safeString2(t,"message","debugMessage");throw this.throwBroadlyMatchedException(this.exceptions.broad,s,e),this.throwExactlyMatchedException(this.exceptions.exact,i,e),this.throwExactlyMatchedException(this.exceptions.exact,s,e),new r(e)}}}},7705:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,BadRequest:a,AuthenticationError:n,InvalidOrder:o,InsufficientFunds:h,OrderNotFound:c,PermissionDenied:d,AddressPending:u}=i(73449),l=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"upbit",name:"Upbit",countries:["KR"],version:"v1",rateLimit:1e3,pro:!0,has:{cancelOrder:!0,CORS:!0,createDepositAddress:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:void 0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchOrders:void 0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:void 0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"minutes","3m":"minutes","5m":"minutes","15m":"minutes","30m":"minutes","1h":"minutes","4h":"minutes","1d":"days","1w":"weeks","1M":"months"},hostname:"api.upbit.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/49245610-eeaabe00-f423-11e8-9cba-4b0aed794799.jpg",api:{public:"https://{hostname}",private:"https://{hostname}"},www:"https://upbit.com",doc:"https://docs.upbit.com/docs/%EC%9A%94%EC%B2%AD-%EC%88%98-%EC%A0%9C%ED%95%9C",fees:"https://upbit.com/service_center/guide"},api:{public:{get:["market/all","candles/{timeframe}","candles/{timeframe}/{unit}","candles/minutes/{unit}","candles/minutes/1","candles/minutes/3","candles/minutes/5","candles/minutes/15","candles/minutes/30","candles/minutes/60","candles/minutes/240","candles/days","candles/weeks","candles/months","trades/ticks","ticker","orderbook"]},private:{get:["accounts","orders/chance","order","orders","withdraws","withdraw","withdraws/chance","deposits","deposit","deposits/coin_addresses","deposits/coin_address"],post:["orders","withdraws/coin","withdraws/krw","deposits/generate_coin_address"],delete:["order"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:this.parseNumber("0.0025"),taker:this.parseNumber("0.0025")},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{exact:{"This key has expired.":n,"Missing request parameter error. Check the required parameters!":a,"side is missing, side does not have a valid value":o},broad:{thirdparty_agreement_required:d,out_of_scope:d,order_not_found:c,insufficient_funds:h,invalid_access_key:n,jwt_verification:n,create_ask_error:r,create_bid_error:r,volume_too_large:o,invalid_funds:o}},options:{createMarketBuyOrderRequiresPrice:!0,fetchTickersMaxLength:4096,fetchOrderBooksMaxLength:4096,tradingFeesByQuoteCurrency:{KRW:5e-4}},commonCurrencies:{TON:"Tokamak Network"}})}async fetchCurrency(e,t={}){await this.loadMarkets();const i=this.currency(e);return await this.fetchCurrencyById(i.id,t)}async fetchCurrencyById(e,t={}){const i={currency:e},s=await this.privateGetWithdrawsChance(this.extend(i,t)),r=this.safeValue(s,"member_level",{}),a=this.safeValue(s,"currency",{}),n=this.safeValue(s,"withdraw_limit",{}),o=this.safeValue(n,"can_withdraw"),h=this.safeString(a,"wallet_state"),c=this.safeValue(r,"wallet_locked"),d=this.safeValue(r,"locked");let u=!0;void 0===o||o?("working"!==h||void 0!==c&&c||void 0!==d&&d)&&(u=!1):u=!1;const l=this.safeNumber(n,"onetime"),f=this.safeNumber(n,"daily",l),p=this.safeNumber(n,"remaining_daily",f);let m;m=p>0?p:f;const g=this.safeString(a,"code"),y=this.safeCurrencyCode(g);return{info:s,id:g,code:y,name:y,active:u,fee:this.safeNumber(a,"withdraw_fee"),precision:void 0,limits:{withdraw:{min:this.safeNumber(n,"minimum"),max:m}}}}async fetchMarket(e,t={}){await this.loadMarkets();const i=this.market(e);return await this.fetchMarketById(i.id,t)}async fetchMarketById(e,t={}){const i={market:e},s=await this.privateGetOrdersChance(this.extend(i,t)),r=this.safeValue(s,"market"),a=this.safeValue(r,"bid"),n=this.safeValue(r,"ask"),o=this.safeString(r,"id"),h=this.safeString(n,"currency"),c=this.safeString(a,"currency"),d=this.safeCurrencyCode(h),u=this.safeCurrencyCode(c),l=d+"/"+u,f={amount:8,price:8},p="active"===this.safeString(r,"state"),m=this.safeNumber(s,"bid_fee"),g=this.safeNumber(s,"ask_fee"),y=Math.max(m,g);return{info:s,id:o,symbol:l,base:d,quote:u,baseId:h,quoteId:c,type:"spot",spot:!0,active:p,precision:f,maker:y,taker:y,limits:{amount:{min:this.safeNumber(n,"min_total"),max:void 0},price:{min:Math.pow(10,-f.price),max:void 0},cost:{min:this.safeNumber(a,"min_total"),max:this.safeNumber(r,"max_total")}}}}async fetchMarkets(e={}){const t=await this.publicGetMarketAll(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"market"),[a,n]=r.split("-"),o=this.safeCurrencyCode(n),h=this.safeCurrencyCode(a),c=o+"/"+h,d={amount:8,price:8},u=!0,l=this.safeNumber(this.options.tradingFeesByQuoteCurrency,h,this.fees.trading.maker),f=this.safeNumber(this.options.tradingFeesByQuoteCurrency,h,this.fees.trading.taker);i.push({id:r,symbol:c,base:o,quote:h,baseId:n,quoteId:a,active:u,info:s,precision:d,maker:l,taker:f,limits:{amount:{min:Math.pow(10,-d.amount),max:void 0},price:{min:Math.pow(10,-d.price),max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(e),i={info:t,timestamp:void 0,datetime:void 0};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.free=this.safeString(s,"balance"),n.used=this.safeString(s,"locked"),i[a]=n}return this.parseBalance(i)}async fetchOrderBooks(e,t,i={}){let s;if(await this.loadMarkets(),void 0===e){if(s=this.ids.join(","),s.length>this.options.fetchOrderBooksMaxLength){const e=this.ids.length;throw new r(this.id+" has "+e.toString()+" symbols ("+s.length.toString()+" characters) exceeding max URL length ("+this.options.fetchOrderBooksMaxLength.toString()+" characters), you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else s=this.marketIds(e),s=s.join(",");const a={markets:s},n=await this.publicGetOrderbook(this.extend(a,i)),o={};for(let e=0;e<n.length;e++){const t=n[e],i=this.safeString(t,"market"),s=this.safeSymbol(i,void 0,"-"),r=this.safeInteger(t,"timestamp");o[s]={symbol:s,bids:this.sortBy(this.parseBidsAsks(t.orderbook_units,"bid_price","bid_size"),0,!0),asks:this.sortBy(this.parseBidsAsks(t.orderbook_units,"ask_price","ask_size"),0),timestamp:r,datetime:this.iso8601(r),nonce:void 0}}return o}async fetchOrderBook(e,t,i={}){const s=await this.fetchOrderBooks([e],t,i);return this.safeValue(s,e)}parseTicker(e,t){const i=this.safeInteger(e,"trade_timestamp"),s=this.safeString2(e,"market","code"),r=this.safeSymbol(s,t,"-"),a=this.safeNumber(e,"prev_closing_price"),n=this.safeNumber(e,"trade_price"),o=this.safeNumber(e,"signed_change_price"),h=this.safeNumber(e,"signed_change_rate");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high_price"),low:this.safeNumber(e,"low_price"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeNumber(e,"opening_price"),close:n,last:n,previousClose:a,change:o,percentage:h,average:void 0,baseVolume:this.safeNumber(e,"acc_trade_volume_24h"),quoteVolume:this.safeNumber(e,"acc_trade_price_24h"),info:e}}async fetchTickers(e,t={}){let i;if(await this.loadMarkets(),void 0===e){if(i=this.ids.join(","),i.length>this.options.fetchTickersMaxLength){const e=this.ids.length;throw new r(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchTickers")}}else i=this.marketIds(e),i=i.join(",");const s={markets:i},a=await this.publicGetTicker(this.extend(s,t)),n={};for(let e=0;e<a.length;e++){const t=this.parseTicker(a[e]);n[t.symbol]=t}return this.filterByArray(n,"symbol",e)}async fetchTicker(e,t={}){const i=await this.fetchTickers([e],t);return this.safeValue(i,e)}parseTrade(e,t){const i=this.safeString2(e,"sequential_id","uuid");let s,r=this.safeInteger(e,"timestamp");void 0===r&&(r=this.parse8601(this.safeString(e,"created_at")));const a=this.safeStringLower2(e,"ask_bid","side");"ask"===a?s="sell":"bid"===a&&(s="buy");let n=this.safeNumber(e,"funds");const o=this.safeString2(e,"trade_price","price"),h=this.safeString2(e,"trade_volume","volume"),c=this.parseNumber(o),d=this.parseNumber(h);void 0===n&&(n=this.parseNumber(l.stringMul(o,h)));const u=this.safeString2(e,"market","code");let f,p,m;if(void 0!==(t=this.safeMarket(u,t)))m=t.symbol,p=t.quote;else{const[e,t]=u.split("-"),i=this.safeCurrencyCode(e),s=this.safeCurrencyCode(t);m=i+"/"+s,p=s}const g=this.safeString(e,a+"_fee");return void 0!==g&&(f={currency:p,cost:g}),{id:i,info:e,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:m,type:void 0,side:s,takerOrMaker:void 0,price:c,amount:d,cost:n,fee:f}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e);void 0===i&&(i=200);const a={market:r.id,count:i},n=await this.publicGetTradesTicks(this.extend(a,s));return this.parseTrades(n,r,t,i)}parseOHLCV(e,t){return[this.parse8601(this.safeString(e,"candle_date_time_utc")),this.safeNumber(e,"opening_price"),this.safeNumber(e,"high_price"),this.safeNumber(e,"low_price"),this.safeNumber(e,"trade_price"),this.safeNumber(e,"candle_acc_trade_volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n=this.parseTimeframe(t),o=this.timeframes[t];void 0===s&&(s=200);const h={market:a.id,timeframe:o,count:s};let c="publicGetCandlesTimeframe";if("minutes"===o){const e=Math.round(n/60);h.unit=e,c+="Unit"}void 0!==i&&(h.to=this.iso8601(this.sum(i,n*s*1e3)));const d=await this[c](this.extend(h,r));return this.parseOHLCVs(d,a,t,i,s)}async createOrder(e,t,i,s,r,a={}){if("market"===t&&"buy"===i&&this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new o(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");s*=r}let n;if("buy"===i)n="bid";else{if("sell"!==i)throw new o(this.id+" createOrder allows buy or sell side only!");n="ask"}await this.loadMarkets();const h={market:this.market(e).id,side:n};"limit"===t?(h.volume=this.amountToPrecision(e,s),h.price=this.priceToPrecision(e,r),h.ord_type=t):"market"===t&&("buy"===i?(h.ord_type="price",h.price=this.priceToPrecision(e,s)):"sell"===i&&(h.ord_type=t,h.volume=this.amountToPrecision(e,s)));const c=this.safeString2(a,"clientOrderId","identifier");void 0!==c&&(h.identifier=c),a=this.omit(a,["clientOrderId","identifier"]);const d=await this.privatePostOrders(this.extend(h,a));return this.parseOrder(d)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={uuid:e},r=await this.privateDeleteOrder(this.extend(s,i));return this.parseOrder(r)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.limit=i);const n=await this.privateGetDeposits(this.extend(r,s));return this.parseTransactions(n,a,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.limit=i);const n=await this.privateGetWithdraws(this.extend(r,s));return this.parseTransactions(n,a,t,i)}parseTransactionStatus(e){return this.safeString({submitting:"pending",submitted:"pending",almost_accepted:"pending",rejected:"failed",accepted:"pending",processing:"pending",done:"ok",canceled:"canceled"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"uuid"),s=this.safeNumber(e,"amount"),r=this.safeString(e,"txid"),a=this.parse8601(this.safeString(e,"done_at")),n=this.parse8601(this.safeString(e,"created_at",a));let o=this.safeString(e,"type");"withdraw"===o&&(o="withdrawal");const h=this.safeString(e,"currency"),c=this.safeCurrencyCode(h),d=this.parseTransactionStatus(this.safeStringLower(e,"state")),u=this.safeNumber(e,"fee");return{info:e,id:i,currency:c,amount:s,address:void 0,tag:void 0,status:d,type:o,updated:a,txid:r,timestamp:n,datetime:this.iso8601(n),fee:{currency:c,cost:u}}}parseOrderStatus(e){return this.safeString({wait:"open",done:"closed",cancel:"canceled"},e,e)}parseOrder(e,t){const i=this.safeString(e,"uuid");let s=this.safeString(e,"side");s="bid"===s?"buy":"sell";let r=this.safeString(e,"ord_type");const a=this.parse8601(this.safeString(e,"created_at")),n=this.parseOrderStatus(this.safeString(e,"state"));let o,h=this.safeNumber(e,"price");const c=this.safeNumber(e,"volume"),d=this.safeNumber(e,"remaining_volume"),u=this.safeNumber(e,"executed_volume");let l,f,p;"price"===r&&(r="market",l=h,h=void 0);let m=this.safeNumber(e,"paid_fee");const g=this.safeString(e,"market");t=this.safeMarket(g,t);let y=this.safeValue(e,"trades",[]);y=this.parseTrades(y,t,void 0,void 0,{order:i,type:r});const b=y.length;if(b>0){o=y[b-1].timestamp;let e=!1;void 0===m&&(e=!0,m=0),l=0;for(let t=0;t<b;t++){const i=y[t];if(l=this.sum(l,i.cost),e){const e=this.safeValue(y[t],"fee",{}),i=this.safeNumber(e,"cost");void 0!==i&&(m=this.sum(m,i))}}f=l/u}return void 0!==m&&(p={currency:t.quote,cost:m}),{info:e,id:i,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:o,symbol:t.symbol,type:r,timeInForce:void 0,postOnly:void 0,side:s,price:h,stopPrice:void 0,cost:l,average:f,amount:c,filled:u,remaining:d,status:n,fee:p,trades:y}}async fetchOrdersByState(e,t,i,s,r={}){await this.loadMarkets();const a={state:e};let n;void 0!==t&&(n=this.market(t),a.market=n.id);const o=await this.privateGetOrders(this.extend(a,r));return this.parseOrders(o,n,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByState("wait",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByState("done",e,t,i,s)}async fetchCanceledOrders(e,t,i,s={}){return await this.fetchOrdersByState("cancel",e,t,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={uuid:e},r=await this.privateGetOrder(this.extend(s,i));return this.parseOrder(r)}async fetchDepositAddresses(e,t={}){await this.loadMarkets();const i=await this.privateGetDepositsCoinAddresses(t);return this.parseDepositAddresses(i)}parseDepositAddress(e,t){const i=this.safeString(e,"deposit_address"),s=this.safeString(e,"secondary_address"),r=this.safeString(e,"currency"),a=this.safeCurrencyCode(r);return this.checkAddress(i),{currency:a,address:i,tag:s,network:void 0,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s=await this.privateGetDepositsCoinAddress(this.extend({currency:i.id},t));return this.parseDepositAddress(s)}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privatePostDepositsGenerateCoinAddress(this.extend(i,t));if(void 0!==this.safeString(s,"message"))throw new u(this.id+" is generating "+e+" deposit address, call fetchDepositAddress or createDepositAddress one more time later to retrieve the generated address");return this.parseDepositAddress(s)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),n={amount:t};let o="privatePostWithdraws";"KRW"!==e?(o+="Coin",n.currency=a.id,n.address=i,void 0!==s&&(n.secondary_address=s)):o+="Krw";const h=await this[o](this.extend(n,r));return this.parseTransaction(h)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n=this.implodeParams(this.urls.api[t],{hostname:this.hostname});n+="/"+this.version+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("POST"!==i&&Object.keys(o).length&&(n+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();const e=this.nonce(),t={access_key:this.apiKey,nonce:e};if(Object.keys(o).length){const e=this.urlencode(o),i=this.hash(this.encode(e),"sha512");t.query_hash=i,t.query_hash_alg="SHA512"}r={Authorization:"Bearer "+this.jwt(t,this.encode(this.secret))},"GET"!==i&&"DELETE"!==i&&(a=this.json(s),r["Content-Type"]="application/json")}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;const d=this.safeValue(o,"error");if(void 0!==d){const e=this.safeString(d,"message"),t=this.safeString(d,"name"),i=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,e,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new r(i)}}}},43571:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,OrderNotFound:a,InvalidOrder:n,BadRequest:o,AuthenticationError:h,RateLimitExceeded:c,RequestTimeout:d,BadSymbol:u,AddressPending:l,PermissionDenied:f,InsufficientFunds:p}=i(73449),{ROUND:m}=i(62115),g=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"vcc",name:"VCC Exchange",countries:["VN"],rateLimit:1e3,version:"v3",has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:void 0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:void 0,fetchTicker:"emulated",fetchTickers:!0,fetchTrades:!0,fetchTradingFees:void 0,fetchTransactions:!0,fetchWithdrawals:!0},timeframes:{"1m":"60000","5m":"300000","15m":"900000","30m":"1800000","1h":"3600000","2h":"7200000","4h":"14400000","6h":"21600000","12h":"43200000","1d":"86400000","1w":"604800000"},urls:{logo:"https://user-images.githubusercontent.com/1294454/100545356-8427f500-326c-11eb-9539-7d338242d61b.jpg",api:{public:"https://api.vcc.exchange",private:"https://api.vcc.exchange"},www:"https://vcc.exchange",doc:["https://vcc.exchange/api"],fees:"https://support.vcc.exchange/hc/en-us/articles/360016401754",referral:"https://vcc.exchange?ref=l4xhrH"},api:{public:{get:["summary","exchange_info","assets","ticker","trades/{market_pair}","orderbook/{market_pair}","chart/bars","tick_sizes"]},private:{get:["user","balance","orders/{order_id}","orders/open","orders","orders/trades","deposit-address","transactions"],post:["orders"],put:["orders/{order_id}/cancel","orders/cancel-by-type","orders/cancel-all"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:this.parseNumber("0.002"),taker:this.parseNumber("0.002")}},exceptions:{exact:{},broad:{"limit may not be greater than":o,"Insufficient balance":p,Unauthenticated:h,"signature is invalid":h,Timeout:d,"Too many requests":c,"quantity field is required":n,"price field is required":n,error_security_level:f,"pair is invalid":u,"type is invalid":n,"Data not found":a}}})}async fetchMarkets(e={}){const t=await this.publicGetExchangeInfo(e),i=this.safeValue(t,"data"),s=this.safeValue(i,"symbols"),r=[];for(let e=0;e<s.length;e++){const t=this.safeValue(s,e),i=this.safeString(t,"symbol"),a=i.replace("/","_"),n=this.safeString(t,"coin"),o=this.safeString(t,"currency"),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=this.safeValue(t,"active"),u=this.safeValue(t,"precision",{}),l=this.safeValue(t,"limits",{}),f=this.safeValue(l,"amount",{}),p=this.safeValue(l,"price",{}),m=this.safeValue(l,"cost",{}),g={info:t,id:a,symbol:i,base:h,quote:c,baseId:n,quoteId:o,type:"spot",spot:!0,active:d,precision:{price:this.safeInteger(u,"price"),amount:this.safeInteger(u,"amount"),cost:this.safeInteger(u,"cost")},limits:{amount:{min:this.safeNumber(f,"min"),max:void 0},price:{min:this.safeNumber(p,"min"),max:void 0},cost:{min:this.safeNumber(m,"min"),max:void 0}}};r.push(g)}return r}async fetchCurrencies(e={}){const t=await this.publicGetAssets(e),i={},s=this.safeValue(t,"data"),r=Object.keys(s);for(let e=0;e<r.length;e++){const t=this.safeStringLower(r,e),a=this.safeValue(s,r[e]),n=this.safeCurrencyCode(t),o=this.safeValue(a,"can_deposit"),h=this.safeValue(a,"can_withdraw"),c=o&&h;i[n]={id:t,code:n,name:this.safeString(a,"name"),active:c,fee:this.safeNumber(a,"withdrawal_fee"),precision:this.safeInteger(a,"decimal"),limits:{withdraw:{min:this.safeNumber(a,"min_withdraw"),max:this.safeNumber(a,"max_withdraw")}}}}return i}async fetchTradingFee(e,t={}){await this.loadMarkets();const i=this.market(e),s=this.extend({symbol:i.id},this.omit(t,"symbol")),r=await this.privateGetTradingFeeSymbol(s);return{info:r,maker:this.safeNumber(r,"provideLiquidityRate"),taker:this.safeNumber(r,"takeLiquidityRate")}}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetBalance(e),i=this.safeValue(t,"data"),s={info:t,timestamp:void 0,datetime:void 0},r=Object.keys(i);for(let e=0;e<r.length;e++){const t=r[e],a=this.safeCurrencyCode(t),n=this.safeValue(i,t),o=this.account();o.free=this.safeString(n,"available_balance"),o.total=this.safeString(n,"balance"),s[a]=o}return this.parseBalance(s)}parseOHLCV(e,t){return[this.safeInteger(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={coin:a.baseId,currency:a.quoteId,resolution:this.timeframes[t]};s=void 0===s?100:s,s=Math.min(100,s);const o=this.parseTimeframe(t);if(void 0===i){const e=this.seconds();n.to=e,n.from=e-s*o}else{const e=parseInt(i/1e3);n.from=e,n.to=this.sum(e,s*o)}const h=await this.publicGetChartBars(this.extend(n,r));return this.parseOHLCVs(h,a,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market_pair:this.market(e).id,level:2};if(void 0!==t){if(0!==t&&5!==t&&10!==t&&20!==t&&50!==t&&100!==t&&500!==t)throw new o(this.id+" fetchOrderBook limit must be 0, 5, 10, 20, 50, 100, 500 if specified");s.depth=t}const r=await this.publicGetOrderbookMarketPair(this.extend(s,i)),a=this.safeValue(r,"data"),n=this.safeValue(a,"timestamp");return this.parseOrderBook(a,e,n,"bids","asks",0,1)}parseTicker(e,t){const i=this.milliseconds(),s=this.safeNumber(e,"base_volume"),r=this.safeNumber(e,"quote_volume"),a=this.safeNumber(e,"open_price"),n=this.safeNumber(e,"last_price"),o=this.vwap(s,r),h=this.safeSymbol(void 0,t);return this.safeTicker({symbol:h,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"max_price"),low:this.safeNumber(e,"min_price"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:o,open:a,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:s,quoteVolume:r,info:e},t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetTicker(t),s={},r=this.safeValue(i,"data"),a=Object.keys(r);for(let e=0;e<a.length;e++){const t=a[e],i=this.safeMarket(t,void 0,"_");s[i.symbol]=this.parseTicker(r[t],i)}return this.filterByArray(s,"symbol",e)}parseTrade(e,t){const i=this.safeInteger2(e,"trade_timestamp","created_at"),s=this.safeStringUpper(e,"coin"),r=this.safeStringUpper(e,"currency");let a;void 0!==s&&void 0!==r&&(a=s+"_"+r);const n=(t=this.safeMarket(a,t,"_")).symbol,o=this.safeString(e,"price"),h=this.safeString2(e,"base_volume","quantity"),c=this.parseNumber(o),d=this.parseNumber(h);let u=this.safeNumber2(e,"quote_volume","amount");void 0===u&&(u=this.parseNumber(g.stringMul(o,h)));const l=this.safeString2(e,"type","trade_type"),f=this.safeString2(e,"trade_id","id"),p=this.safeNumber(e,"fee");let m;return void 0!==p&&(m={cost:p,currency:t.quote}),{info:e,id:f,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:n,type:void 0,side:l,takerOrMaker:void 0,price:c,amount:d,cost:u,fee:m}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market_pair:r.id};void 0!==i&&(a.count=Math.min(1e3,i));const n=await this.publicGetTradesMarketPair(this.extend(a,s)),o=this.safeValue(n,"data");return this.parseTrades(o,r,t,i)}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.limit=Math.min(1e3,i)),void 0!==t&&(r.start=t);const n=await this.privateGetTransactions(this.extend(r,s));let o=this.safeValue(n,"data",{});return o=this.safeValue(o,"data",[]),this.parseTransactions(o,a,t,i)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({type:"deposit"},s))}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactions(e,t,i,this.extend({type:"withdraw"},s))}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeInteger(e,"created_at"),r=this.safeInteger(e,"updated_at"),a=this.safeString(e,"currency"),n=this.safeCurrencyCode(a,t),o=this.parseTransactionStatus(this.safeString(e,"status"));let h=this.safeNumber(e,"amount");void 0!==h&&(h=Math.abs(h));const c=this.safeString(e,"blockchain_address"),d=this.safeString(e,"transaction_id"),u=this.safeString(e,"destination_tag");let l;const f=this.safeNumber(e,"fee");void 0!==f&&(l={cost:f,currency:n});const p=h>0?"deposit":"withdrawal";return{info:e,id:i,txid:d,timestamp:s,datetime:this.iso8601(s),address:c,addressTo:c,addressFrom:void 0,tag:u,tagTo:u,tagFrom:void 0,type:p,amount:h,currency:n,status:o,updated:r,fee:l}}parseTransactionStatus(e){return this.safeString({pending:"pending",error:"failed",success:"ok",cancel:"canceled"},e,e)}parseTransactionType(e){return this.safeString({deposit:"deposit",withdraw:"withdrawal"},e,e)}costToPrecision(e,t){return this.decimalToPrecision(t,m,this.markets[e].precision.cost,this.precisionMode,this.paddingMode)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),h={coin:o.baseId,currency:o.quoteId,trade_type:i,type:t};if("ceiling_market"===t){const i=this.safeValue(a,"ceiling");if(void 0!==i)h.ceiling=this.costToPrecision(e,i);else{if(void 0===r)throw new n(this.id+" createOrder() requires a price argument or a ceiling parameter for "+t+" orders");h.ceiling=this.costToPrecision(e,s*r)}}else h.quantity=this.amountToPrecision(e,s);"limit"===t&&(h.price=this.priceToPrecision(e,r));const c=this.safeValue2(a,"stop_price","stopPrice");void 0!==c&&(h.is_stop=1,h.stop_condition="buy"===i?"le":"ge",h.stop_price=this.priceToPrecision(e,c)),a=this.omit(a,["stop_price","stopPrice"]);const d=await this.privatePostOrders(this.extend(h,a)),u=this.safeValue(d,"data");return this.parseOrder(u,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privatePutOrdersOrderIdCancel(this.extend(s,i));return this.parseOrder(r)}async cancelAllOrders(e,t={}){const i=this.safeString(t,"type"),s=void 0===i?"privatePutOrdersCancelAll":"privatePutOrdersCancelByType",r={};void 0!==i&&(r.type=i),await this.loadMarkets();const a=await this[s](this.extend(r,t));let n=this.safeValue(a,"data",{});return n=this.safeValue(a,"data",[]),this.parseOrders(n)}parseOrderStatus(e){return this.safeString({pending:"open",stopping:"open",executing:"open",executed:"closed",canceled:"canceled"},e,e)}parseOrder(e,t){const i=this.safeValue(e,"created_at"),s=this.safeValue(e,"updated_at"),r=this.safeStringUpper(e,"coin")+"_"+this.safeStringUpper(e,"currency"),a=(t=this.safeMarket(r,t,"_")).symbol,n=this.safeString(e,"quantity"),o=this.safeString(e,"executed_quantity"),h=this.parseOrderStatus(this.safeString(e,"status")),c=this.safeString(e,"ceiling"),d=this.safeString(e,"id"),u=this.safeString(e,"price"),l=this.safeString(e,"executed_price"),f=this.safeString(e,"remaining"),p=this.safeString(e,"type"),m=this.safeString(e,"trade_type"),g={currency:t.quote,cost:this.safeNumber(e,"fee"),rate:this.safeNumber(e,"fee_rate")};let y;s!==i&&(y=s);const b=this.safeNumber(e,"stopPrice");return this.safeOrder2({id:d,clientOrderId:d,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:y,status:h,symbol:a,type:p,timeInForce:void 0,postOnly:void 0,side:m,price:u,stopPrice:b,average:l,amount:n,cost:c,filled:o,remaining:f,fee:g,trades:void 0,info:e},t)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privateGetOrdersOrderId(this.extend(s,i)),a=this.safeValue(r,"data");return this.parseOrder(a)}async fetchOrdersWithMethod(e,t,i,s,r={}){await this.loadMarkets();const a={};let n;void 0!==t&&(n=this.market(t),a.coin=n.baseId,a.currency=n.quoteId),void 0!==i&&(a.start_date=i),void 0!==s&&(a.limit=Math.min(1e3,s));const o=await this[e](this.extend(a,r));let h=this.safeValue(o,"data",{});return h=this.safeValue(h,"data",[]),this.parseOrders(h,n,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("privateGetOrdersOpen",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("privateGetOrders",e,t,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.market(e),r.coin=a.baseId,r.currency=a.quoteId),void 0!==t&&(r.start_date=t),void 0!==i&&(r.limit=Math.min(1e3,i));const n=await this.privateGetOrdersTrades(this.extend(r,s));let o=this.safeValue(n,"data",{});return o=this.safeValue(o,"data",[]),this.parseTrades(o,a,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.privateGetDepositAddress(this.extend(i,t)),r=this.safeValue(s,"data");if("REQUESTED"===this.safeString(r,"status"))throw new l(this.id+" is generating "+e+" deposit address, call fetchDepositAddress one more time later to retrieve the generated address");const a=this.safeString(r,"blockchain_address");this.checkAddress(a);const n=this.safeString(r,"blockchain_tag"),o=this.safeString(r,"currency");return{currency:this.safeCurrencyCode(o),address:a,tag:n,network:void 0,info:r}}sign(e,t="public",i="GET",s={},r,a){let n=this.version+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if(Object.keys(o).length&&(n+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();const e=this.milliseconds().toString();"GET"!==i&&(a=this.json(o));const t=i+" "+n,s=this.hmac(this.encode(t),this.encode(this.secret),"sha256");r={Authorization:"Bearer "+this.apiKey,"Content-Type":"application/json",timestamp:e,signature:s}}return n=this.urls.api[t]+"/"+n,{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;const d=this.safeString(o,"message");if(void 0!==d){const e=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,d,e),this.throwBroadlyMatchedException(this.exceptions.broad,n,e),new r(e)}}}},86091:(e,t,i)=>{"use strict";const s=i(48819),{ArgumentsRequired:r,AuthenticationError:a,InsufficientFunds:n,InvalidOrder:o,AccountSuspended:h,ExchangeError:c,DuplicateOrderId:d,OrderNotFound:u,BadSymbol:l,ExchangeNotAvailable:f,BadRequest:p}=i(73449),m=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"wavesexchange",name:"Waves.Exchange",countries:["CH"],rateLimit:500,certified:!0,pro:!1,has:{cancelOrder:!0,createMarketOrder:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,signIn:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","3h":"3h","4h":"4h","6h":"6h","12h":"12h","1d":"1d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/84547058-5fb27d80-ad0b-11ea-8711-78ac8b3c7f31.jpg",test:{matcher:"http://matcher-testnet.waves.exchange",node:"https://nodes-testnet.wavesnodes.com",public:"https://api-testnet.wavesplatform.com/v0",private:"https://api-testnet.waves.exchange/v1",forward:"https://testnet.waves.exchange/api/v1/forward/matcher",market:"https://testnet.waves.exchange/api/v1/forward/marketdata/api/v1"},api:{matcher:"http://matcher.waves.exchange",node:"https://nodes.waves.exchange",public:"https://api.wavesplatform.com/v0",private:"https://api.waves.exchange/v1",forward:"https://waves.exchange/api/v1/forward/matcher",market:"https://waves.exchange/api/v1/forward/marketdata/api/v1"},doc:"https://docs.waves.exchange",www:"https://waves.exchange"},api:{matcher:{get:["matcher","matcher/settings","matcher/settings/rates","matcher/balance/reserved/{publicKey}","matcher/debug/allSnashotOffsets","matcher/debug/currentOffset","matcher/debug/lastOffset","matcher/debug/oldestSnapshotOffset","matcher/orderbook","matcher/orderbook/{amountAsset}/{priceAsset}","matcher/orderbook/{baseId}/{quoteId}/publicKey/{publicKey}","matcher/orderbook/{baseId}/{quoteId}/{orderId}","matcher/orderbook/{baseId}/{quoteId}/info","matcher/orderbook/{baseId}/{quoteId}/status","matcher/orderbook/{baseId}/{quoteId}/tradeableBalance/{address}","matcher/orderbook/{publicKey}","matcher/orderbook/{publicKey}/{orderId}","matcher/orders/{address}","matcher/orders/{address}/{orderId}","matcher/transactions/{orderId}"],post:["matcher/orderbook","matcher/orderbook/market","matcher/orderbook/cancel","matcher/orderbook/{baseId}/{quoteId}/cancel","matcher/debug/saveSnapshots","matcher/orders/{address}/cancel","matcher/orders/cancel/{orderId}"],delete:["matcher/orderbook/{baseId}/{quoteId}","matcher/settings/rates/{assetId}"],put:["matcher/settings/rates/{assetId}"]},node:{get:["addresses","addresses/balance/{address}","addresses/balance/{address}/{confirmations}","addresses/balance/details/{address}","addresses/data/{address}","addresses/data/{address}/{key}","addresses/effectiveBalance/{address}","addresses/effectiveBalance/{address}/{confirmations}","addresses/publicKey/{publicKey}","addresses/scriptInfo/{address}","addresses/scriptInfo/{address}/meta","addresses/seed/{address}","addresses/seq/{from}/{to}","addresses/validate/{address}","alias/by-address/{address}","alias/by-alias/{alias}","assets/{assetId}/distribution/{height}/{limit}","assets/balance/{address}","assets/balance/{address}/{assetId}","assets/details/{assetId}","assets/nft/{address}/limit/{limit}","blockchain/rewards","blockchain/rewards/height","blocks/address/{address}/{from}/{to}/","blocks/at/{height}","blocks/delay/{signature}/{blockNum}","blocks/first","blocks/headers/last","blocks/headers/seq/{from}/{to}","blocks/height","blocks/height/{signature}","blocks/last","blocks/seq/{from}/{to}","blocks/signature/{signature}","consensus/algo","consensus/basetarget","consensus/basetarget/{blockId}","consensus/{generatingbalance}/address","consensus/generationsignature","consensus/generationsignature/{blockId}","debug/balances/history/{address}","debug/blocks/{howMany}","debug/configInfo","debug/historyInfo","debug/info","debug/minerInfo","debug/portfolios/{address}","debug/state","debug/stateChanges/address/{address}","debug/stateChanges/info/{id}","debug/stateWaves/{height}","leasing/active/{address}","node/state","node/version","peers/all","peers/blacklisted","peers/connected","peers/suspended","transactions/address/{address}/limit/{limit}","transactions/info/{id}","transactions/status","transactions/unconfirmed","transactions/unconfirmed/info/{id}","transactions/unconfirmed/size","utils/seed","utils/seed/{length}","utils/time","wallet/seed"],post:["addresses","addresses/data/{address}","addresses/sign/{address}","addresses/signText/{address}","addresses/verify/{address}","addresses/verifyText/{address}","debug/blacklist","debug/print","debug/rollback","debug/validate","node/stop","peers/clearblacklist","peers/connect","transactions/broadcast","transactions/calculateFee","tranasctions/sign","transactions/sign/{signerAddress}","tranasctions/status","utils/hash/fast","utils/hash/secure","utils/script/compileCode","utils/script/compileWithImports","utils/script/decompile","utils/script/estimate","utils/sign/{privateKey}","utils/transactionsSerialize"],delete:["addresses/{address}","debug/rollback-to/{signature}"]},public:{get:["assets","pairs","candles/{baseId}/{quoteId}","transactions/exchange"]},private:{get:["deposit/addresses/{currency}","deposit/addresses/{currency}/{platform}","platforms","deposit/currencies","withdraw/currencies","withdraw/addresses/{currency}/{address}"],post:["oauth2/token"]},forward:{get:["matcher/orders/{address}","matcher/orders/{address}/{orderId}"],post:["matcher/orders/{wavesAddress}/cancel"]},market:{get:["tickers"]}},options:{allowedCandles:1440,accessToken:void 0,matcherPublicKey:void 0,quotes:void 0,createOrderDefaultExpiry:24192e5,wavesAddress:void 0,withdrawFeeUSDN:7420,withdrawFeeWAVES:1e5,wavesPrecision:8,messagePrefix:"W",networks:{ERC20:"ETH",BEP20:"BSC"},reverseNetworks:{ETH:"ERC20",BSC:"BEP20"}},commonCurrencies:{EGG:"Waves Ducks"},requiresEddsa:!0,exceptions:{3147270:n,112:n,4:c,13:f,14:f,3145733:h,3148040:d,3148801:a,9440512:a,9440771:l,9441026:o,9441282:o,9441286:o,9441295:o,9441540:o,9441542:o,106954752:a,106954769:a,106957828:a,106960131:a,106981137:a,9437193:u,1048577:p,1051904:a}})}setSandboxMode(e){return this.options.messagePrefix=e?"T":"W",super.setSandboxMode(e)}async getQuotes(){let e=this.safeValue(this.options,"quotes");if(e)return e;{const t=await this.matcherGetMatcherSettings();e={};const i=this.safeValue(t,"priceAssets");for(let t=0;t<i.length;t++)e[i[t]]=!0;return this.options.quotes=e,e}}async fetchMarkets(e={}){const t=await this.marketGetTickers(),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"amountAssetID"),a=this.safeString(s,"priceAssetID"),n=r+"/"+a,o=this.safeString(s,"symbol"),[h,c]=o.split("/"),d=this.safeCurrencyCode(h)+"/"+this.safeCurrencyCode(c),u={amount:this.safeInteger(s,"amountAssetDecimals"),price:this.safeInteger(s,"priceAssetDecimals")};i.push({symbol:d,id:n,base:h,quote:c,baseId:r,quoteId:a,type:"spot",spot:!0,active:void 0,info:s,precision:u})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),r=this.extend({amountAsset:s.baseId,priceAsset:s.quoteId},i),a=await this.matcherGetMatcherOrderbookAmountAssetPriceAsset(r),n=this.safeInteger(a,"timestamp");return{symbol:e,bids:this.parseOrderBookSide(this.safeValue(a,"bids"),s,t),asks:this.parseOrderBookSide(this.safeValue(a,"asks"),s,t),timestamp:n,datetime:this.iso8601(n),nonce:void 0}}parseOrderBookSide(e,t,i){const s=t.precision,r=this.safeInteger(this.options,"wavesPrecision",8),a=Math.pow(10,s.amount),n=s.amount-s.price,o=Math.pow(10,r-n),h=[];for(let t=0;t<e.length;t++){const s=e[t],r=this.safeInteger(s,"price",0)/o,n=this.safeInteger(s,"amount",0)/a;if(void 0!==i&&t>i)break;h.push([r,n])}return h}checkRequiredKeys(){if(void 0===this.apiKey)throw new a(this.id+" requires apiKey credential");if(void 0===this.secret)throw new a(this.id+" requires secret credential");let e,t;try{e=this.base58ToBinary(this.apiKey)}catch(e){throw new a(this.id+" apiKey must be a base58 encoded public key")}try{t=this.base58ToBinary(this.secret)}catch(e){throw new a(this.id+" secret must be a base58 encoded private key")}const i=this.binaryToBase16(e),s=this.binaryToBase16(t);if(64!==i.length)throw new a(this.id+" apiKey must be a base58 encoded public key");if(64!==s.length)throw new a(this.id+" secret must be a base58 encoded private key")}sign(e,t="public",i="GET",s={},r,a){const n=this.omit(s,this.extractParams(e)),o="matcher/orders/{wavesAddress}/cancel"===e;e=this.implodeParams(e,s);let h=this.urls.api[t]+"/"+e,c=this.urlencodeWithArrayRepeat(n);if("private"===t||"forward"===t){r={Accept:"application/json"};const e=this.safeString(this.options,"accessToken");e&&(r.Authorization="Bearer "+e),r["content-type"]="POST"===i?"application/json":"application/x-www-form-urlencoded",o&&(a=this.json([n.orderId]),c=""),c.length>0&&(h+="?"+c)}else"matcher"===t?"POST"===i?(r={"content-type":"application/json"},a=this.json(n)):r=n:"POST"===i?(r={"content-type":"application/json"},a=this.json(n)):(r={"content-type":"application/x-www-form-urlencoded"},c.length>0&&(h+="?"+c));return{url:h,method:i,body:a,headers:r}}async signIn(e={}){if(!this.safeString(this.options,"accessToken")){const e="ffffff01",t=604800;let i=this.sum(this.seconds(),t);i=i.toString();const s="waves.exchange",r=this.safeString(this.options,"messagePrefix","W")+":"+s+":"+i,a=e+this.binaryToBase16(this.stringToBinary(this.encode(r))),n=this.binaryToBase16(this.base58ToBinary(this.secret)),o=this.eddsa(a,n,"ed25519"),h={grant_type:"password",scope:"general",username:this.apiKey,password:i+":"+o,client_id:s},c=await this.privatePostOauth2Token(h);return this.options.accessToken=this.safeString(c,"access_token"),this.options.accessToken}}parseTicker(e,t){const i=void 0,s=this.safeString(e,"amountAsset"),r=this.safeString(e,"priceAsset");let a;if(void 0!==s&&void 0!==r){const e=s+"/"+r;e in this.markets_by_id?t=this.markets_by_id[e]:a=this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(r)}void 0===a&&void 0!==t&&(a=t.symbol);const n=this.safeValue(e,"data",{}),o=this.safeNumber(n,"lastPrice"),h=this.safeNumber(n,"low"),c=this.safeNumber(n,"high"),d=this.safeNumber(n,"weightedAveragePrice"),u=this.safeNumber(n,"volume"),l=this.safeNumber(n,"quoteVolume"),f=this.safeNumber(n,"firstPrice");return this.safeTicker({symbol:a,timestamp:i,datetime:this.iso8601(i),high:c,low:h,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:d,open:f,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:u,quoteVolume:l,info:e},t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={pairs:i.id},r=await this.publicGetPairs(this.extend(s,t)),a=this.safeValue(r,"data",[]),n=this.safeValue(a,0,{});return this.parseTicker(n,i)}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={baseId:a.baseId,quoteId:a.quoteId,interval:this.timeframes[t]};if(void 0!==i)n.timeStart=i.toString();else{const e=this.safeInteger(this.options,"allowedCandles",1440),i=1e3*this.parseTimeframe(t),s=Math.floor(this.milliseconds()/i)*i-(e-1)*i;n.timeStart=s.toString()}const o=await this.publicGetCandlesBaseIdQuoteId(this.extend(n,r)),h=this.safeValue(o,"data",[]),c=this.parseOHLCVs(h,a,t,i,s);let d;const u=c.length;for(let e=0;e<c.length;e++){const t=u-e-1,i=c[t];void 0===i[1]&&(i[1]=d,i[2]=d,i[3]=d,i[4]=d,c[t]=i),d=i[4]}return c}parseOHLCV(e,t){const i=this.safeValue(e,"data",{});return[this.parse8601(this.safeString(i,"time")),this.safeNumber(i,"open"),this.safeNumber(i,"high"),this.safeNumber(i,"low"),this.safeNumber(i,"close"),this.safeNumber(i,"volume",0)]}async fetchDepositAddress(e,t={}){await this.signIn();const i=this.safeValue(this.options,"networks",{}),s=this.safeStringUpper(t,"network"),r=this.safeString(i,s,s);t=this.omit(t,["network"]);const a=await this.privateGetPlatforms(),n={},o={},h=this.safeValue(a,"items",[]);for(let e=0;e<h.length;e++){const t=h[e],i=this.safeString(t,"id"),s=this.safeValue(t,"currencies",[]);for(let e=0;e<s.length;e++){const t=this.safeString(s,e);n[t]=!0,t in o||(o[t]={}),o[t][i]=!0}}if(!(e in n)){const t=Object.keys(n);throw new c(this.id+" fetch "+e+" deposit address not supported. Currency code must be one of "+t.join(", "))}let d;if(void 0===r){const i={currency:e};d=await this.privateGetDepositAddressesCurrency(this.extend(i,t))}else{const i=o[e];if(!(r in i)){const t=Object.keys(i);throw new c(this.id+" "+r+" network "+e+" deposit address not supported. Network must be one of "+t.join(", "))}if("WAVES"===r){const t={publicKey:this.apiKey},i=await this.nodeGetAddressesPublicKeyPublicKey(this.extend(t,t));return{address:this.safeString(i,"address"),code:e,network:r,tag:void 0,info:i}}{const i={currency:e,platform:r};d=await this.privateGetDepositAddressesCurrencyPlatform(this.extend(i,t))}}const u=this.safeValue(d,"currency"),l=this.safeString(u,"platform_id"),f=this.safeValue(this.options,"reverseNetworks",{}),p=this.safeString(f,l,l),m=this.safeValue(d,"deposit_addresses");return{address:this.safeString(m,0),code:e,tag:void 0,network:p,info:d}}async getMatcherPublicKey(){const e=this.safeString(this.options,"matcherPublicKey");if(e)return e;{const e=await this.matcherGetMatcher();return this.options.matcherPublicKey=e.slice(1,e.length-1),this.options.matcherPublicKey}}getAssetBytes(e){return"WAVES"===e?this.numberToBE(0,1):this.binaryConcat(this.numberToBE(1,1),this.base58ToBinary(e))}getAssetId(e){return"WAVES"===e?"":e}priceToPrecision(e,t){const i=this.markets[e],s=this.safeInteger(this.options,"wavesPrecision",8),r=i.precision.amount-i.precision.price;return parseInt(parseFloat(this.toPrecision(t,s-r)))}amountToPrecision(e,t){return parseInt(parseFloat(this.toPrecision(t,this.markets[e].precision.amount)))}currencyToPrecision(e,t){return parseInt(parseFloat(this.toPrecision(t,this.currencies[e].precision)))}fromPrecision(e,t){if(void 0===e)return;const i=new m(e);return i.decimals=i.decimals+t,i.reduce(),i.toString()}toPrecision(e,t){const i=e.toString(),s=new m(i);return s.decimals=s.decimals-t,s.reduce(),s.toString()}currencyFromPrecision(e,t){const i=this.currencies[e].precision;return this.fromPrecision(t,i)}priceFromPrecision(e,t){const i=this.markets[e],s=this.safeInteger(this.options,"wavesPrecision",8)-i.precision.amount+i.precision.price;return this.fromPrecision(t,s)}async createOrder(e,t,i,s,r,a={}){this.checkRequiredDependencies(),this.checkRequiredKeys(),await this.loadMarkets();const o=this.market(e),h=await this.getMatcherPublicKey(),c=this.getAssetId(o.baseId),d=this.getAssetId(o.quoteId);s=this.amountToPrecision(e,s),r=this.priceToPrecision(e,r);const u="buy"===i?0:1,l=this.milliseconds(),f=this.safeInteger(this.options,"createOrderDefaultExpiry",24192e5),p=this.sum(l,f),g=await this.matcherGetMatcherSettings(),y=this.safeValue(g,"orderFee"),b=this.safeValue(y,"dynamic"),v=this.safeString(b,"baseFee"),w=this.currencyFromPrecision("WAVES",v),k=this.safeValue(b,"rates"),_=Object.keys(k);let S,O;if("feeAssetId"in a)S=a.feeAssetId;else if("feeAssetId"in this.options)S=this.options.feeAssetId;else{const e=await this.fetchBalance(),t=parseFloat(w);if(e.WAVES.free>t)S="WAVES",O=v;else for(let t=0;t<_.length;t++){const i=_[t],s=this.safeCurrencyCode(i),r=this.safeString(this.safeValue(e,s,{}),"free"),a=m.stringMul(k[i],w);if(void 0!==r&&m.stringGt(r,a)){S=i;break}}}if(void 0===S)throw n(this.id+" not enough funds to cover the fee, specify feeAssetId in params or options, or buy some WAVES");if(void 0===O){const e=this.safeInteger(this.options,"wavesPrecision",8),t=this.safeString(k,S),i=this.safeCurrencyCode(S),s=e-this.currency(i).precision;O=this.fromPrecision(m.stringMul(t,v),s),O=m.stringDiv(m.stringAdd(O,"1"),"1",0)}const M=[this.numberToBE(3,1),this.base58ToBinary(this.apiKey),this.base58ToBinary(h),this.getAssetBytes(o.baseId),this.getAssetBytes(o.quoteId),this.numberToBE(u,1),this.numberToBE(r,8),this.numberToBE(s,8),this.numberToBE(l,8),this.numberToBE(p,8),this.numberToBE(O,8),this.getAssetBytes(S)],T=this.binaryConcatArray(M),x=this.eddsa(this.binaryToBase16(T),this.binaryToBase16(this.base58ToBinary(this.secret)),"ed25519"),I={amountAsset:c,priceAsset:d},A={senderPublicKey:this.apiKey,matcherPublicKey:h,assetPair:I,orderType:i,price:r,amount:s,timestamp:l,expiration:p,matcherFee:parseInt(O),signature:x,version:3};"WAVES"!==S&&(A.matcherFeeAssetId=S);const C=await this.matcherPostMatcherOrderbook(A),N=this.safeValue(C,"message");return this.parseOrder(N,o)}async cancelOrder(e,t,i={}){this.checkRequiredDependencies(),this.checkRequiredKeys(),await this.signIn();const s=await this.getWavesAddress(),r=await this.forwardPostMatcherOrdersWavesAddressCancel({wavesAddress:s,orderId:e}),a=this.safeValue(r,"message"),n=this.safeValue(a,0),o=this.safeValue(n,0);return{info:r,id:this.safeString(o,"orderId"),clientOrderId:void 0,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:t,type:void 0,side:void 0,price:void 0,amount:void 0,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:void 0,fee:void 0,trades:void 0}}async fetchOrders(e,t,i,s={}){if(this.checkRequiredDependencies(),this.checkRequiredKeys(),void 0===e)throw new r(this.id+" fetchOrders() requires symbol argument");await this.loadMarkets();const a=this.market(e),n=this.milliseconds(),o=[this.base58ToBinary(this.apiKey),this.numberToBE(n,8)],h=this.binaryConcatArray(o),c=this.binaryToBase16(this.base58ToBinary(this.secret)),d=this.eddsa(this.binaryToBase16(h),c,"ed25519"),u={Accept:"application/json",Timestamp:n.toString(),Signature:d,publicKey:this.apiKey,baseId:a.baseId,quoteId:a.quoteId},l=await this.matcherGetMatcherOrderbookBaseIdQuoteIdPublicKeyPublicKey(this.extend(u,s));return this.parseOrders(l,a,t,i)}async fetchOpenOrders(e,t,i,s={}){let r;await this.loadMarkets(),await this.signIn(),void 0!==e&&(r=this.market(e));const a={address:await this.getWavesAddress(),activeOnly:!0},n=await this.forwardGetMatcherOrdersAddress(a);return this.parseOrders(n,r,t,i)}async fetchClosedOrders(e,t,i,s={}){let r;await this.loadMarkets(),await this.signIn(),void 0!==e&&(r=this.market(e));const a={address:await this.getWavesAddress(),closedOnly:!0},n=await this.forwardGetMatcherOrdersAddress(a);return this.parseOrders(n,r,t,i)}parseOrderStatus(e){return this.safeString({Cancelled:"canceled",Accepted:"open",Filled:"closed",PartiallyFilled:"open"},e,e)}getSymbolFromAssetPair(e){const t=this.safeString(e,"amountAsset","WAVES"),i=this.safeString(e,"priceAsset","WAVES");return this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(i)}parseOrder(e,t){const i=this.safeInteger(e,"timestamp"),s=this.safeString2(e,"type","orderType");let r="limit";"type"in e&&(r=this.safeString(e,"orderType",r));const a=this.safeString(e,"id"),n=this.safeString(e,"filled"),o=this.safeString(e,"price"),h=this.safeString(e,"amount"),c=this.safeValue(e,"assetPair");let d;void 0!==c?d=this.getSymbolFromAssetPair(c):void 0!==t&&(d=t.symbol);const u=this.safeCurrencyCode(this.safeString(c,"amountAsset","WAVES")),l=this.priceFromPrecision(d,o),f=this.currencyFromPrecision(u,h),p=this.currencyFromPrecision(u,n),m=this.priceFromPrecision(d,this.safeString(e,"avgWeighedPrice")),g=this.parseOrderStatus(this.safeString(e,"status"));let y;if("type"in e){const t=this.safeCurrencyCode(this.safeString(e,"feeAsset"));y={currency:t,fee:this.parseNumber(this.currencyFromPrecision(t,this.safeString(e,"filledFee")))}}else{const t=this.safeCurrencyCode(this.safeString(e,"matcherFeeAssetId","WAVES"));y={currency:t,fee:this.parseNumber(this.currencyFromPrecision(t,this.safeString(e,"matcherFee")))}}return this.safeOrder2({info:e,id:a,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:d,type:r,timeInForce:void 0,postOnly:void 0,side:s,price:l,stopPrice:void 0,amount:f,cost:void 0,average:m,filled:p,remaining:void 0,status:g,fee:y,trades:void 0},t)}async getWavesAddress(){const e=this.safeString(this.options,"wavesAddress");if(void 0===e){const e={publicKey:this.apiKey},t=await this.nodeGetAddressesPublicKeyPublicKey(e);return this.options.wavesAddress=this.safeString(t,"address"),this.options.wavesAddress}return e}async fetchBalance(e={}){this.checkRequiredDependencies(),this.checkRequiredKeys(),await this.loadMarkets();const t=await this.getWavesAddress(),i={address:t},s=await this.nodeGetAssetsBalanceAddress(i),r=this.safeValue(s,"balances"),a={};let n;const o=[],h=[];for(let e=0;e<r.length;e++){const t=r[e],i=this.safeInteger(t,"timestamp");n=void 0===n?i:Math.max(n,i);const s=this.safeValue(t,"issueTransaction"),c=this.safeString(t,"assetId"),d=this.safeString(t,"balance");if(void 0===s){o.push(c),h.push(d);continue}const u=this.safeInteger(s,"decimals");let l;c in this.currencies_by_id&&(l=this.safeCurrencyCode(c),a[l]=this.account(),a[l].total=this.fromPrecision(d,u))}if(o.length){const e={ids:o},t=await this.publicGetAssets(e),i=this.safeValue(t,"data");for(let e=0;e<i.length;e++){const t=i[e],s=h[e],r=this.safeValue(t,"data"),n=this.safeInteger(r,"precision"),o=this.safeString(r,"ticker"),c=this.safeCurrencyCode(o);a[c]=this.account(),a[c].total=this.fromPrecision(s,n)}}const c=this.milliseconds(),d=[this.base58ToBinary(this.apiKey),this.numberToBE(c,8)],u=this.binaryConcatArray(d),l=this.binaryToBase16(this.base58ToBinary(this.secret)),f=this.eddsa(this.binaryToBase16(u),l,"ed25519"),p={publicKey:this.apiKey,signature:f,timestamp:c.toString()},m=await this.matcherGetMatcherBalanceReservedPublicKey(p),g=Object.keys(m);for(let e=0;e<g.length;e++){const t=g[e],i=this.safeCurrencyCode(t);i in a||(a[i]=this.account());const s=this.safeString(m,t);i in this.currencies?a[i].used=this.currencyFromPrecision(i,s):a[i].used=s}const y={address:t},b=await this.nodeGetAddressesBalanceAddress(y);a.WAVES=this.safeValue(a,"WAVES",{}),a.WAVES.total=this.currencyFromPrecision("WAVES",this.safeString(b,"balance"));const v=Object.keys(a);for(let e=0;e<v.length;e++){const t=v[e];void 0===this.safeValue(a[t],"used")&&(a[t].used="0")}return a.timestamp=n,a.datetime=this.iso8601(n),this.parseBalance(a)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={sender:await this.getWavesAddress(),amountAsset:r.baseId,priceAsset:r.quoteId},n=await this.publicGetTransactionsExchange(a),o=this.safeValue(n,"data");return this.parseTrades(o,r,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={amountAsset:r.baseId,priceAsset:r.quoteId};void 0!==i&&(a.limit=i),void 0!==t&&(a.timeStart=t);const n=await this.publicGetTransactionsExchange(a),o=this.safeValue(n,"data");return this.parseTrades(o,r,t,i)}parseTrade(e,t){const i=this.safeValue(e,"data"),s=this.safeString(i,"timestamp"),r=this.parse8601(s),a=this.safeString(i,"id"),n=this.safeString(i,"price"),o=this.safeString(i,"amount"),h=this.parseNumber(n),c=this.parseNumber(o),d=this.parseNumber(m.stringMul(n,o)),u=this.safeValue(i,"order1"),l=this.safeValue(i,"order2");let f,p;f=this.safeString(u,"senderPublicKey")===this.apiKey?u:l;const g=this.safeValue(f,"assetPair");void 0!==g?p=this.getSymbolFromAssetPair(g):void 0!==t&&(p=t.symbol);const y=this.safeString(f,"orderType");return{info:e,timestamp:r,datetime:s,symbol:p,id:a,order:this.safeString(f,"id"),type:void 0,side:y,takerOrMaker:void 0,price:h,amount:c,cost:d,fee:{cost:this.safeNumber(f,"matcherFee"),currency:this.safeCurrencyCode(this.safeString(f,"matcherFeeAssetId","WAVES"))}}}handleErrors(e,t,i,s,r,a,n,o,h){const d=this.safeString(n,"error"),u=this.safeValue(n,"success",!0),l=this.safeValue(this.exceptions,d);if(void 0!==l){const e=this.safeString(n,"message");throw new l(this.id+" "+e)}if("Validation Error"===this.safeString(n,"message"))throw new p(this.id+" "+a);if(!u)throw new c(this.id+" "+a)}async withdraw(e,t,i,s,r={}){if([s,r]=this.handleWithdrawTagAndParams(s,r),"WAVES"!==e){const t=await this.privateGetWithdrawCurrencies(),i={},s=this.safeValue(t,"items",[]);for(let e=0;e<s.length;e++){const t=s[e];i[this.safeString(t,"id")]=!0}if(!(e in i)){const t=Object.keys(i);throw new c(this.id+" fetch "+e+" withdrawals are not supported. Currency code must be one of "+t.toString())}}await this.loadMarkets();const a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n={};for(let e=0;e<a.length;e++)n[a[e]]=!0;let o=!0;const h=this.remove0xPrefix(i).toLowerCase();for(let e=0;e<h.length;e++)if(!(h[e]in n)){o=!1;break}let d;if(await this.signIn(),"WAVES"!==e||o){const s={address:i,currency:e},r=await this.privateGetWithdrawAddressesCurrencyAddress(s),a=this.safeValue(r,"currency"),n=this.safeValue(a,"allowed_amount"),o=this.safeNumber(n,"min");if(t<=o)throw new p(this.id+" "+e+" withdraw failed, amount "+t.toString()+" must be greater than the minimum allowed amount of "+o.toString());const h=this.safeValue(r,"proxy_addresses",[]);d=this.safeString(h,0)}else d=i;const u=this.safeInteger(this.options,"withdrawFeeWAVES",1e5),l="WAVES",f=this.currencyToPrecision(e,t),m=this.currency(e),g=this.milliseconds(),y=[this.numberToBE(4,1),this.numberToBE(2,1),this.base58ToBinary(this.apiKey),this.getAssetBytes(m.id),this.getAssetBytes(l),this.numberToBE(g,8),this.numberToBE(f,8),this.numberToBE(u,8),this.base58ToBinary(d),this.numberToBE(0,2)],b=this.binaryConcatArray(y),v=this.binaryToBase16(this.base58ToBinary(this.secret)),w=this.eddsa(this.binaryToBase16(b),v,"ed25519"),k={senderPublicKey:this.apiKey,amount:f,fee:u,type:4,version:2,attachment:"",feeAssetId:this.getAssetId(l),proofs:[w],assetId:this.getAssetId(m.id),recipient:d,timestamp:g,signature:w};return await this.nodePostTransactionsBroadcast(k)}}},70390:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeNotAvailable:r,ExchangeError:a,DDoSProtection:n,BadSymbol:o}=i(73449),h=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"whitebit",name:"WhiteBit",version:"v2",countries:["EE"],rateLimit:500,has:{cancelOrder:void 0,CORS:void 0,createDepositAddress:void 0,createLimitOrder:void 0,createMarketOrder:void 0,createOrder:void 0,deposit:void 0,editOrder:void 0,fetchBalance:void 0,fetchBidsAsks:void 0,fetchCurrencies:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFees:!0,privateAPI:void 0,publicAPI:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/66732963-8eb7dd00-ee66-11e9-849b-10d9282bb9e0.jpg",api:{web:"https://whitebit.com/",publicV2:"https://whitebit.com/api/v2/public",publicV1:"https://whitebit.com/api/v1/public"},www:"https://www.whitebit.com",doc:"https://documenter.getpostman.com/view/7473075/Szzj8dgv?version=latest",fees:"https://whitebit.com/fee-schedule",referral:"https://whitebit.com/referral/d9bdf40e-28f2-4b52-b2f9-cd1415d82963"},api:{web:{get:["v1/healthcheck"]},publicV1:{get:["markets","tickers","ticker","symbols","depth/result","history","kline"]},publicV2:{get:["markets","ticker","assets","fee","depth/{market}","trades/{market}"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:this.parseNumber("0.001"),maker:this.parseNumber("0.001")}},options:{fetchTradesMethod:"fetchTradesV1"},exceptions:{exact:{503:r},broad:{"Market is not available":o}}})}async fetchMarkets(e={}){const t=await this.publicV2GetMarkets(e),i=this.safeValue(t,"result"),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"name"),a=this.safeString(t,"stock"),n=this.safeString(t,"money"),o=this.safeCurrencyCode(a),h=this.safeCurrencyCode(n),c={id:r,symbol:o+"/"+h,base:o,quote:h,baseId:a,quoteId:n,info:t,type:"spot",spot:!0,active:this.safeValue(t,"tradesEnabled"),precision:{amount:this.safeInteger(t,"stockPrec"),price:this.safeInteger(t,"moneyPrec")},limits:{amount:{min:this.safeNumber(t,"minAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(t,"minTotal"),max:void 0}}};s.push(c)}return s}async fetchCurrencies(e={}){const t=await this.publicV2GetAssets(e),i=this.safeValue(t,"result"),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){const t=s[e],a=i[t],n=this.safeValue(a,"canDeposit",!0),o=this.safeValue(a,"canWithdraw",!0),h=n&&o,c=this.safeCurrencyCode(t);r[c]={id:t,code:c,info:a,name:void 0,active:h,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},withdraw:{min:this.safeNumber(a,"minWithdrawal"),max:this.safeNumber(a,"maxWithdrawal")}}}}return r}async fetchTradingFees(e={}){const t=await this.publicV2GetFee(e),i=this.safeValue(t,"result");return{maker:this.safeNumber(i,"makerFee"),taker:this.safeNumber(i,"takerFee")}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.publicV1GetTicker(this.extend(s,t)),a=this.safeValue(r,"result",{});return this.parseTicker(a,i)}parseTicker(e,t){const i=this.safeTimestamp(e,"at",this.milliseconds());let s;e=this.safeValue(e,"ticker",e),void 0!==t&&(s=t.symbol);const r=this.safeNumber(e,"last"),a=this.safeNumber(e,"change");let n;return void 0!==a&&(n=this.numberToString(.01*a)),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeNumber(e,"open"),close:r,last:r,previousClose:void 0,change:n,percentage:a,average:void 0,baseVolume:this.safeNumber(e,"volume"),quoteVolume:this.safeNumber(e,"deal"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicV1GetTickers(t),s=this.safeValue(i,"result"),r=Object.keys(s),a={};for(let e=0;e<r.length;e++){const t=r[e],i=this.safeMarket(t),n=this.parseTicker(s[t],i);a[n.symbol]=n}return this.filterByArray(a,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id};void 0!==t&&(s.limit=t);const r=await this.publicV2GetDepthMarket(this.extend(s,i)),a=this.safeValue(r,"result",{}),n=this.parse8601(this.safeString(a,"lastUpdateTimestamp"));return this.parseOrderBook(a,e,n)}async fetchTradesV1(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id,lastId:1};void 0!==i&&(a.limit=i);const n=await this.publicV1GetHistory(this.extend(a,s)),o=this.safeValue(n,"result",[]);return this.parseTrades(o,r,t,i)}async fetchTradesV2(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id};void 0!==i&&(a.limit=i);const n=await this.publicV2GetTradesMarket(this.extend(a,s)),o=this.safeValue(n,"result",[]);return this.parseTrades(o,r,t,i)}async fetchTrades(e,t,i,s={}){const r=this.safeString(this.options,"fetchTradesMethod","fetchTradesV2");return await this[r](e,t,i,s)}parseTrade(e,t){let i=this.safeValue(e,"time");i="string"==typeof i?this.parse8601(i):parseInt(1e3*i);const s=this.safeString(e,"price"),r=this.safeString2(e,"amount","volume"),a=this.parseNumber(h.stringMul(s,r)),n=this.parseNumber(s),o=this.parseNumber(r),c=this.safeString2(e,"id","tradeId");let d,u=this.safeString(e,"type");return void 0===u&&(u=this.safeValue(e,"isBuyerMaker")?"buy":"sell"),void 0!==t&&(d=t.symbol),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:d,id:c,order:void 0,type:void 0,takerOrMaker:void 0,side:u,price:n,amount:o,cost:a,fee:void 0}}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={market:a.id,interval:this.timeframes[t]};if(void 0!==i){const e=1440;void 0===s&&(s=e),s=Math.min(s,e);const r=parseInt(i/1e3),a=this.parseTimeframe(t),o=this.sum(r,a*s);n.start=r,n.end=o}void 0!==s&&(n.limit=s);const o=await this.publicV1GetKline(this.extend(n,r)),h=this.safeValue(o,"result",[]);return this.parseOHLCVs(h,a,t,i,s)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,2),this.safeNumber(e,5)]}async fetchStatus(e={}){const t=await this.webGetV1Healthcheck(e);let i="ok";return 503===this.safeInteger(t,"status")&&(i="maintenance"),this.status=this.extend(this.status,{status:i,updated:this.milliseconds()}),this.status}sign(e,t="publicV1",i="GET",s={},r,a){const n=this.omit(s,this.extractParams(e));let o=this.urls.api[t]+"/"+this.implodeParams(e,s);return Object.keys(n).length&&(o+="?"+this.urlencode(n)),{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,o,h,c,d){if(418===e||429===e)throw new n(this.id+" "+e.toString()+" "+t+" "+o);if(404===e)throw new a(this.id+" "+e.toString()+" endpoint not found");if(void 0!==h&&!this.safeValue(h,"success")){const e=this.id+" "+o,t=this.safeString(h,"status");throw"string"==typeof t&&this.throwExactlyMatchedException(this.exceptions.exact,t,e),this.throwBroadlyMatchedException(this.exceptions.broad,o,e),new a(e)}}}},29741:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,BadRequest:n,InsufficientFunds:o,InvalidAddress:h,BadSymbol:c,InvalidOrder:d}=i(73449),u=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"xena",name:"Xena Exchange",countries:["VC","UK"],rateLimit:100,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:void 0,createDepositAddress:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87489843-bb469280-c64c-11ea-91aa-69c6326506af.jpg",test:{public:"https://trading.demo.xena.io/api",private:"https://api.demo.xena.io"},api:{public:"https://trading.xena.exchange/api",private:"https://api.xena.exchange"},www:"https://xena.exchange",doc:"https://support.xena.exchange/support/solutions/44000808700",fees:"https://trading.xena.exchange/en/platform-specification/fee-schedule"},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","12h":"12h","1d":"1d","1w":"1w"},api:{public:{get:["common/currencies","common/instruments","common/features","common/commissions","common/news","market-data/candles/{marketId}/{timeframe}","market-data/market-watch","market-data/dom/{symbol}","market-data/candles/{symbol}/{timeframe}","market-data/trades/{symbol}","market-data/server-time","market-data/v2/candles/{symbol}/{timeframe}","market-data/v2/trades/{symbol}","market-data/v2/dom/{symbol}/","market-data/v2/server-time"]},private:{get:["trading/accounts/{accountId}/order","trading/accounts/{accountId}/active-orders","trading/accounts/{accountId}/last-order-statuses","trading/accounts/{accountId}/positions","trading/accounts/{accountId}/positions-history","trading/accounts/{accountId}/margin-requirements","trading/accounts","trading/accounts/{accountId}/balance","trading/accounts/{accountId}/trade-history","transfers/accounts","transfers/accounts/{accountId}","transfers/accounts/{accountId}/deposit-address/{currency}","transfers/accounts/{accountId}/deposits","transfers/accounts/{accountId}/trusted-addresses","transfers/accounts/{accountId}/withdrawals","transfers/accounts/{accountId}/balance-history"],post:["trading/order/new","trading/order/heartbeat","trading/order/cancel","trading/order/mass-cancel","trading/order/replace","trading/position/maintenance","transfers/accounts/{accountId}/withdrawals","transfers/accounts/{accountId}/deposit-address/{currency}"]}},fees:{trading:{maker:5e-4,taker:.001,tierBased:!0,percentage:!0},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{exact:{"Validation failed":n,"Unknown derivative symbol":c,"Unknown account":n,"Wrong TransactTime":n,"ClOrdId is empty":n},broad:{"Invalid aggregation ratio or depth":n,address:h,"Money not enough":o,"parse error":n,"Not enough":o}},options:{defaultType:"margin",accountId:void 0}})}async fetchTime(e={}){const t=await this.publicGetMarketDataV2ServerTime(e),i=this.safeInteger(t,"transactTime");return parseInt(i/1e6)}async fetchMarkets(e={}){const t=await this.publicGetCommonInstruments(e),i=[];for(let e=0;e<t.length;e++){const s=t[e];let r=this.safeStringLower(s,"type");const a=this.safeString(s,"symbol"),n=this.safeString(s,"id"),o=this.safeString(s,"marginType"),h=this.safeString(s,"baseCurrency"),c=this.safeString(s,"quoteCurrency"),d=this.safeCurrencyCode(h),u=this.safeCurrencyCode(c);let l=a;"margin"===r&&("XenaFuture"===o?r="future":"XenaListedPerpetual"===o&&(r="swap",l=d+"/"+u));const f="future"===r,p="swap"===r,m={price:this.safeInteger2(s,"tickSize","pricePrecision"),amount:0},g=this.safeNumber(s,"maxOrderQty"),y={amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(s,"minOrderQuantity"),max:g}},b=this.safeValue(s,"enabled",!1),v=this.safeValue(s,"inverse",!1);i.push({id:a,symbol:l,base:d,quote:u,baseId:h,quoteId:c,numericId:n,active:b,type:r,spot:!1,future:f,swap:p,inverse:v,precision:m,limits:y,info:s})}return i}async fetchCurrencies(e={}){const t=await this.publicGetCommonCurrencies(e),i=Object.keys(t),s={};for(let e=0;e<i.length;e++){const r=i[e],a=t[r],n=this.safeCurrencyCode(r),o=this.safeString(a,"title"),h=this.safeInteger(a,"precision"),c=!0===this.safeValue(a,"enabled"),d=this.safeValue(a,"withdraw",{});s[n]={id:r,code:n,info:a,name:o,active:c,fee:this.safeNumber(d,"commission"),precision:h,limits:{amount:{min:void 0,max:void 0},withdraw:{min:this.safeNumber(d,"minAmount"),max:void 0}}}}return s}parseTicker(e,t){const i=this.milliseconds(),s=this.safeString(e,"symbol"),r=this.safeSymbol(s,t),a=this.safeNumber(e,"lastPx"),n=this.safeNumber(e,"firstPx"),o=this.safeNumber(e,"buyVolume"),h=this.safeNumber(e,"sellVolume"),c=this.sum(o,h);return this.safeTicker({symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"highPx"),low:this.safeNumber(e,"lowPx"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:n,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:c,quoteVolume:void 0,info:e},t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=await this.fetchTickers(void 0,t);if(e in i)return i[e];throw new c(this.id+" fetchTicker could not find a ticker with symbol "+e)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketDataMarketWatch(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]);s[t.symbol]=t}return this.filterByArray(s,"symbol",e)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.depth=t);const r=await this.publicGetMarketDataV2DomSymbol(this.extend(s,i)),a=this.safeValue(r,"mdEntry",[]),n=this.groupBy(a,"mdEntryType"),o=this.safeInteger(r,"lastUpdateTime"),h=parseInt(o/1e6);return this.parseOrderBook(n,e,h,"0","1","mdEntryPx","mdEntrySize")}async fetchAccounts(e={}){const t=await this.privateGetTradingAccounts(e),i=this.safeValue(t,"accounts"),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"id"),a=this.safeString(t,"currency"),n=this.safeCurrencyCode(a),o=this.safeStringLower(t,"kind");s.push({id:r,type:o,currency:n,info:t})}return s}async findAccountByType(e){await this.loadMarkets(),await this.loadAccounts();const t=this.groupBy(this.accounts,"type"),i=this.safeValue(t,e);if(void 0===i)throw new r(this.id+" findAccountByType() could not find an accountId with type '"+e+"', specify the 'accountId' parameter instead");if(i.length>1)throw new r(this.id+" findAccountByType() found more than one accountId with type '"+e+"', specify the 'accountId' parameter instead");return i[0]}async getAccountId(e){await this.loadMarkets(),await this.loadAccounts();const t=this.safeString(this.options,"accountId"),i=this.safeString(e,"accountId",t);if(void 0!==i)return i;const s=this.safeString(this.options,"defaultType","margin"),r=this.safeString(e,"type",s);if(e=this.omit(e,"type"),void 0===r)throw new a(this.id+" requires an 'accountId' parameter or a 'type' parameter ('spot' or 'margin')");return(await this.findAccountByType(r)).id}async fetchBalance(e={}){await this.loadMarkets(),await this.loadAccounts();const t={accountId:await this.getAccountId(e)},i=await this.privateGetTradingAccountsAccountIdBalance(this.extend(t,e)),s={info:i};let r;const a=this.safeValue(i,"balances",[]);for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t,"lastUpdateTime").slice(0,13),n=parseInt(i);r=void 0===r?n:Math.max(r,n);const o=this.safeString(t,"currency"),h=this.safeCurrencyCode(o),c=this.account();c.free=this.safeString(t,"available"),c.used=this.safeString(t,"onHold"),s[h]=c}return s.timestamp=r,s.datetime=this.iso8601(r),this.parseBalance(s)}parseTrade(e,t){const i=this.safeString(e,"tradeId");let s=this.safeInteger(e,"transactTime");void 0!==s&&(s=parseInt(s/1e6));let r=this.safeStringLower2(e,"side","aggressorSide");"1"===r?r="buy":"2"===r&&(r="sell");const a=this.safeString(e,"orderId"),n=this.safeString(e,"symbol"),o=this.safeSymbol(n,t),h=this.safeString2(e,"lastPx","mdEntryPx"),c=this.safeString2(e,"lastQty","mdEntrySize"),d=this.parseNumber(h),l=this.parseNumber(c),f=this.parseNumber(u.stringMul(h,c));let p;const m=this.safeNumber(e,"commission");if(void 0!==m){const t=this.safeString(e,"commCurrency"),i=this.safeCurrencyCode(t);p={cost:m,rate:this.safeNumber(e,"commRate"),currency:i}}return{id:i,info:e,timestamp:s,datetime:this.iso8601(s),symbol:o,type:void 0,order:a,side:r,takerOrMaker:void 0,price:d,amount:l,cost:f,fee:p}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();const r={accountId:await this.getAccountId(s)};let a;void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==t&&(r.from=1e6*t),void 0!==i&&(r.limit=i);const n=await this.privateGetTradingAccountsAccountIdTradeHistory(this.extend(r,s));return this.parseTrades(n,a,t,i)}parseOHLCV(e,t){const i=this.safeInteger(e,"transactTime"),s=parseInt(i/1e6),r=this.safeNumber(e,"buyVolume"),a=this.safeNumber(e,"sellVolume"),n=this.sum(r,a);return[s,this.safeNumber(e,"firstPx"),this.safeNumber(e,"highPx"),this.safeNumber(e,"lowPx"),this.safeNumber(e,"lastPx"),n]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.id,timeframe:this.timeframes[t]},o=1e3*this.parseTimeframe(t);if(void 0!==i)n.from=1e6*i,void 0!==s&&(n.to=1e6*this.sum(i,s*o));else{const e=this.milliseconds();void 0!==s&&(n.from=1e6*(e-s*o))}const h=await this.publicGetMarketDataV2CandlesSymbolTimeframe(this.extend(n,r)),c=this.safeValue(h,"mdEntry",[]);return this.parseOHLCVs(c,a,t,i,s)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==t&&(a.from=this.iso8601(t)),void 0!==i&&(a.limit=i);const n=await this.publicGetMarketDataV2TradesSymbol(this.extend(a,s)),o=this.safeValue(n,"mdEntry",[]);return this.parseTrades(o,r,t,i)}parseOrderStatus(e){return this.safeString({A:"open",0:"open",1:"open",2:"closed",6:"canceled",4:"canceled",E:"open",8:"rejected"},e,e)}parseOrder(e,t){const i=this.safeString(e,"orderId"),s=this.safeString(e,"clOrdId"),r=this.safeInteger(e,"transactTime"),a=parseInt(r/1e6),n=this.parseOrderStatus(this.safeString(e,"ordStatus")),o=this.safeString(e,"symbol"),h=this.safeSymbol(o,t),c=this.safeString(e,"price"),d=this.safeString(e,"orderQty"),u=this.safeString(e,"cumQty"),l=this.safeString(e,"leavesQty");let f=this.safeString(e,"side");"1"===f?f="buy":"2"===f&&(f="sell");let p=this.safeString(e,"ordType");return"1"===p?p="market":"2"===p?p="limit":"3"===p?p="stop":"4"===p&&(p="stop-limit"),this.safeOrder2({id:i,clientOrderId:s,info:e,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:h,type:p,timeInForce:void 0,postOnly:void 0,side:f,price:c,stopPrice:void 0,amount:d,cost:void 0,average:void 0,filled:u,remaining:l,status:n,fee:void 0,trades:void 0},t)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),await this.loadAccounts();const n=await this.getAccountId(a),o=this.safeString({market:"1",limit:"2",stop:"3","stop-limit":"4"},t);if(void 0===o)throw new d(this.id+" createOrder does not support order type "+t+", supported order types are market, limit, stop, stop-limit");const h=this.safeString({buy:"1",sell:"2"},i);if(void 0===h)throw new d(this.id+" createOrder does not support order side "+i+", supported order sides are buy, sell");const c=this.market(e),u={account:parseInt(n),symbol:c.id,ordType:o,side:h,orderQty:this.amountToPrecision(e,s),transactTime:1e6*this.milliseconds()};if("limit"===t||"stop-limit"===t){if(void 0===r)throw new d(this.id+" createOrder() requires a price argument for order type "+t);u.price=this.priceToPrecision(e,r)}if("stop"===t||"stop-limit"===t){const i=this.safeNumber(a,"stopPx");if(void 0===i)throw new d(this.id+" createOrder() requires a stopPx param for order type "+t);u.stopPx=this.priceToPrecision(e,i),a=this.omit(a,"stopPx")}const l=this.safeString2(a,"clientOrderId","clOrdId",this.uuid());void 0!==l&&(u.clOrdId=l,a=this.omit(a,["clientOrderId","clOrdId"]));const f=await this.privatePostTradingOrderNew(this.extend(u,a));return this.parseOrder(f,c)}async editOrder(e,t,i,s,r,n,o={}){if(void 0===t)throw new a(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets(),await this.loadAccounts();const h=await this.getAccountId(o),c=this.market(t),d={account:parseInt(h),clOrdId:this.uuid(),symbol:c.id,transactTime:1e6*this.milliseconds()},u=this.safeString2(o,"clientOrderId","origClOrdId");void 0!==u?(d.origClOrdId=u,o=this.omit(o,["clientOrderId","origClOrdId"])):d.orderId=e,void 0!==r&&(d.orderQty=this.amountToPrecision(t,r)),void 0!==n&&(d.price=this.priceToPrecision(t,n));const l=this.safeNumber(o,"stopPx");void 0!==l&&(d.stopPx=this.priceToPrecision(t,l),o=this.omit(o,"stopPx"));const f=this.safeNumber(o,"capPrice");void 0!==f&&(d.capPrice=this.priceToPrecision(t,f),o=this.omit(o,"capPrice"));const p=await this.privatePostTradingOrderReplace(this.extend(d,o));return this.parseOrder(p,c)}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets(),await this.loadAccounts();const s=await this.getAccountId(i),r=this.safeString2(i,"clientOrderId","origClOrdId");i=this.omit(i,["clientOrderId","origClOrdId"]);const n=this.market(t),o={account:parseInt(s),symbol:n.id,clOrdId:this.uuid(),transactTime:1e6*this.milliseconds()};void 0!==r?o.origClOrdId=r:o.orderId=e;const h=await this.privatePostTradingOrderCancel(this.extend(o,i));return this.parseOrder(h,n)}async cancelAllOrders(e,t={}){await this.loadMarkets(),await this.loadAccounts();const i=await this.getAccountId(t),s={account:parseInt(i),clOrdId:this.uuid()};if(void 0!==e){const t=this.market(e);s.symbol=t.id,s.massCancelRequestType="1"}else s.massCancelRequestType="7";return await this.privatePostTradingOrderMassCancel(this.extend(s,t))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();const r={accountId:await this.getAccountId(s)};let a;void 0!==e&&(a=this.market(e),r.symbol=a.id);const n=await this.privateGetTradingAccountsAccountIdActiveOrders(this.extend(r,s));return this.parseOrders(n,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();const r={accountId:await this.getAccountId(s)};let a;void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==t&&(r.from=1e6*this.iso8601(t)),void 0!==i&&(r.limit=i);const n=await this.privateGetTradingAccountsAccountIdLastOrderStatuses(this.extend(r,s));return this.parseOrders(n,a,t,i)}async createDepositAddress(e,t={}){await this.loadMarkets(),await this.loadAccounts();const i={accountId:await this.getAccountId(t),currency:this.currency(e).id},s=await this.privatePostTransfersAccountsAccountIdDepositAddressCurrency(this.extend(i,t)),r=this.safeValue(s,"address");return this.checkAddress(r),{currency:e,address:r,tag:void 0,info:s}}async fetchDepositAddress(e,t={}){await this.loadMarkets(),await this.loadAccounts();const i={accountId:await this.getAccountId(t),currency:this.currency(e).id},s=await this.privateGetTransfersAccountsAccountIdDepositAddressCurrency(this.extend(i,t)),r=this.safeValue(s,"address");return this.checkAddress(r),{currency:e,address:r,tag:void 0,network:void 0,info:s}}async fetchTransactionsByType(e,t,i,s,r={}){if(void 0===t)throw new a(this.id+" fetchTransactions() requires a currency `code` argument");await this.loadMarkets(),await this.loadAccounts();const n=await this.getAccountId(r),o=this.currency(t),h={currency:o.id,accountId:n};void 0!==i&&(h.since=parseInt(i/1e3));const c="privateGetTransfersAccountsAccountId"+this.capitalize(e),d=await this[c](this.extend(h,r)),u=this.safeValue(d,e,[]);return this.parseTransactions(u,o,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsByType("withdrawals",e,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsByType("deposits",e,t,i,s)}parseTransaction(e,t){const i=this.safeString(e,"withdrawalRequestId"),s=void 0===i?"deposit":"withdrawal";let r=this.safeInteger(e,"lastUpdated");void 0!==r&&(r=parseInt(r/1e6));const a=void 0,n=this.safeString(e,"txId"),o=this.safeString(e,"currency"),h=this.safeCurrencyCode(o,t),c=this.safeString(e,"address"),d=c,u=this.safeNumber(e,"amount"),l=this.parseTransactionStatus(this.safeString(e,"status"));return{info:e,id:i,txid:n,timestamp:a,datetime:this.iso8601(a),addressFrom:void 0,addressTo:d,address:c,tagFrom:void 0,tagTo:void 0,tag:void 0,type:s,amount:u,currency:h,status:l,updated:r,fee:void 0}}parseTransactionStatus(e){return this.safeString({1:"pending",2:"ok",3:"failed",4:"failed",5:"pending",100:"pending",101:"pending",102:"pending",103:"pending"},e,e)}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets(),await this.loadAccounts();const a=await this.getAccountId(r),n=this.currency(e);let o=this.uuid();o=o.split("-"),o=o.join("");const h={currency:n.id,accountId:a,amount:this.currencyToPrecision(e,t),address:i,id:o},c=await this.privatePostTransfersAccountsAccountIdWithdrawals(this.extend(h,r));return this.parseTransaction(c,n)}parseLedgerEntryType(e){return this.safeString({deposit:"transaction",withdrawal:"transaction","internal deposit":"transfer","internal withdrawal":"transfer",rebate:"rebate",reward:"reward"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"id");let s;const r=this.safeString(e,"accountId"),a=this.parseLedgerEntryType(this.safeString(e,"kind")),n=this.safeCurrencyCode(this.safeString(e,"currency"),t);let o=this.safeNumber(e,"amount");o<0?(s="out",o=Math.abs(o)):s="in";let h=this.safeInteger(e,"ts");void 0!==h&&(h=parseInt(h/1e6));const c={cost:this.safeNumber(e,"commission"),currency:n};return{info:e,id:i,direction:s,account:r,referenceId:void 0,referenceAccount:void 0,type:a,currency:n,amount:o,before:void 0,after:this.safeNumber(e,"balance"),status:"ok",timestamp:h,datetime:this.iso8601(h),fee:c}}async fetchLedger(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();const r={accountId:await this.getAccountId(s)};let a;void 0!==e&&(a=this.currency(e),r.symbol=a.id),void 0!==t&&(r.from=1e6*t),void 0!==i&&(r.limit=i);const n=await this.privateGetTransfersAccountsAccountIdBalanceHistory(this.extend(r,s));return this.parseLedger(n,a,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t]+"/"+this.implodeParams(e,s);const o=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else if("private"===t){this.checkRequiredCredentials();let e=this.nonce();e=e.toString(),e+="000000";const t="AUTH"+e,s=this.secret.slice(14,78),h=this.ecdsa(t,s,"p256","sha256"),c=h.r+h.s;r={"X-AUTH-API-KEY":this.apiKey,"X-AUTH-API-PAYLOAD":t,"X-AUTH-API-SIGNATURE":c,"X-AUTH-API-NONCE":e},"GET"===i?Object.keys(o).length&&(n+="?"+this.urlencode(o)):"POST"===i&&(a=this.json(o),r["Content-Type"]="application/json")}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o&&e>=400){const e=this.id+" "+this.json(o),t=this.safeString(o,"error"),i=this.exceptions.exact;if(t in i)throw new i[t](e);const s=this.exceptions.broad,a=this.findBroadlyMatchedKey(s,n);if(void 0!==a)throw new s[a](e);throw new r(e)}}}},65927:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:n,InvalidNonce:o,InsufficientFunds:h,OrderNotFound:c,DDoSProtection:d,InvalidOrder:u,AuthenticationError:l,RateLimitExceeded:f}=i(73449),p=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"yobit",name:"YoBit",countries:["RU"],rateLimit:3e3,version:"3",has:{cancelOrder:!0,CORS:void 0,createDepositAddress:!0,createMarketOrder:void 0,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchDeposits:void 0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:void 0,fetchWithdrawals:void 0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766910-cdcbfdae-5eea-11e7-9859-03fea873272d.jpg",api:{public:"https://yobit.net/api",private:"https://yobit.net/tapi"},www:"https://www.yobit.net",doc:"https://www.yobit.net/en/api/",fees:"https://www.yobit.net/en/fees/"},api:{public:{get:["depth/{pair}","info","ticker/{pair}","trades/{pair}"]},private:{post:["ActiveOrders","CancelOrder","GetDepositAddress","getInfo","OrderInfo","Trade","TradeHistory","WithdrawCoinsToAddress"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{}}},commonCurrencies:{AIR:"AirCoin",ANI:"ANICoin",ANT:"AntsCoin",ATMCHA:"ATM",ASN:"Ascension",AST:"Astral",ATM:"Autumncoin",BCC:"BCH",BCS:"BitcoinStake",BITS:"Bitstar",BLN:"Bulleon",BNS:"Benefit Bonus Coin",BOT:"BOTcoin",BON:"BONES",BPC:"BitcoinPremium",BST:"BitStone",BTS:"Bitshares2",CAT:"BitClave",CBC:"CryptoBossCoin",CMT:"CometCoin",COIN:"Coin.com",COV:"Coven Coin",COVX:"COV",CPC:"Capricoin",CREDIT:"Creditbit",CS:"CryptoSpots",DCT:"Discount",DFT:"DraftCoin",DGD:"DarkGoldCoin",DIRT:"DIRTY",DROP:"FaucetCoin",DSH:"DASH",EGG:"EggCoin",EKO:"EkoCoin",ENTER:"ENTRC",EPC:"ExperienceCoin",ESC:"EdwardSnowden",EUROPE:"EUROP",EXT:"LifeExtension",FUND:"FUNDChains",FUNK:"FUNKCoin",FX:"FCoin",GCC:"GlobalCryptocurrency",GEN:"Genstake",GENE:"Genesiscoin",GOLD:"GoldMint",GOT:"Giotto Coin",GSX:"GlowShares",GT:"GTcoin",HTML5:"HTML",HYPERX:"HYPER",ICN:"iCoin",INSANE:"INSN",JNT:"JointCoin",JPC:"JupiterCoin",JWL:"Jewels",KNC:"KingN Coin",LBTCX:"LiteBitcoin",LIZI:"LiZi",LOC:"LocoCoin",LOCX:"LOC",LUNYR:"LUN",LUN:"LunarCoin",LUNA:"Luna Coin",MASK:"Yobit MASK",MDT:"Midnight",MIS:"MIScoin",NAV:"NavajoCoin",NBT:"NiceBytes",OMG:"OMGame",ONX:"Onix",PAC:"$PAC",PLAY:"PlayCoin",PIVX:"Darknet",PRS:"PRE",PUTIN:"PutinCoin",SPACE:"Spacecoin",STK:"StakeCoin",SUB:"Subscriptio",PAY:"EPAY",PLC:"Platin Coin",RAI:"RaiderCoin",RCN:"RCoin",REP:"Republicoin",RUR:"RUB",SBTC:"Super Bitcoin",SOLO:"SoloCoin",SUPER:"SuperCoin",TTC:"TittieCoin",UNI:"Universe",UST:"Uservice",VOL:"VolumeCoin",XIN:"XINCoin",XMT:"SummitCoin",XRA:"Ratecoin"},options:{fetchOrdersRequiresSymbol:!0,fetchTickersMaxLength:512},exceptions:{exact:{803:u,804:u,805:u,806:u,807:u,831:h,832:h,833:c},broad:{"Invalid pair name":r,"invalid api key":l,"invalid sign":l,"api key dont have trade permission":l,"invalid parameter":u,"invalid order":u,"The given order has already been cancelled":u,"Requests too often":d,"not available":n,"data unavailable":n,"external service unavailable":n,"Total transaction amount":u,"The given order has already been closed and cannot be cancelled":u,"Insufficient funds":h,"invalid key":l,"invalid nonce":o,"Total order amount is less than minimal amount":u,"Rate Limited":f}},orders:{}})}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetInfo(e),i=this.safeValue(t,"return",{}),s=this.safeInteger(i,"server_time"),r={info:t,timestamp:s,datetime:this.iso8601(s)},a=this.safeValue(i,"funds",{}),n=this.safeValue(i,"funds_incl_orders",{}),o=Object.keys(this.extend(a,n));for(let e=0;e<o.length;e++){const t=o[e],i=this.safeCurrencyCode(t),s=this.account();s.free=this.safeString(a,t),s.total=this.safeString(n,t),r[i]=s}return this.parseBalance(r)}async fetchMarkets(e={}){const t=await this.publicGetInfo(e),i=this.safeValue(t,"pairs"),s=Object.keys(i),r=[];for(let e=0;e<s.length;e++){const t=s[e],a=i[t],[n,o]=t.split("_");let h=n.toUpperCase(),c=o.toUpperCase();h=this.safeCurrencyCode(h),c=this.safeCurrencyCode(c);const d=h+"/"+c,u={amount:this.safeInteger(a,"decimal_places"),price:this.safeInteger(a,"decimal_places")},l={amount:{min:this.safeNumber(a,"min_amount"),max:this.safeNumber(a,"max_amount")},price:{min:this.safeNumber(a,"min_price"),max:this.safeNumber(a,"max_price")},cost:{min:this.safeNumber(a,"min_total")}},f=0===this.safeInteger(a,"hidden");let m=this.safeString(a,"fee");m=p.stringDiv(m,"100");const g=this.parseNumber(m),y=this.parseNumber(m);r.push({id:t,symbol:d,base:h,quote:c,baseId:n,quoteId:o,type:"spot",spot:!0,active:f,taker:g,maker:y,precision:u,limits:l,info:a})}return r}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.market(e),a={pair:s.id};void 0!==t&&(a.limit=t);const n=await this.publicGetDepthPair(this.extend(a,i));if(!(s.id in n))throw new r(this.id+" "+s.symbol+" order book is empty or not available");const o=n[s.id];return this.parseOrderBook(o,e)}async fetchOrderBooks(e,t,i={}){let s;if(await this.loadMarkets(),void 0===e){if(s=this.ids.join("-"),s.length>2048){const e=this.ids.length;throw new r(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else s=this.marketIds(e),s=s.join("-");const a={pair:s};void 0!==t&&(a.limit=t);const n=await this.publicGetDepthPair(this.extend(a,i)),o={};s=Object.keys(n);for(let e=0;e<s.length;e++){const t=s[e],i=this.safeSymbol(t);o[i]=this.parseOrderBook(n[t],i)}return o}parseTicker(e,t){const i=this.safeTimestamp(e,"updated");let s;void 0!==t&&(s=t.symbol);const r=this.safeNumber(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeNumber(e,"avg"),baseVolume:this.safeNumber(e,"vol_cur"),quoteVolume:this.safeNumber(e,"vol"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=this.ids;if(void 0===e){const e=i.length;i=i.join("-");const t=this.safeInteger(this.options,"fetchTickersMaxLength",2048);if(i.length>this.options.fetchTickersMaxLength)throw new a(this.id+" has "+e.toString()+" markets exceeding max URL length for this endpoint ("+t.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers")}else i=this.marketIds(e),i=i.join("-");const s={pair:i},r=await this.publicGetTickerPair(this.extend(s,t)),n={},o=Object.keys(r);for(let e=0;e<o.length;e++){const t=o[e],i=r[t],s=this.safeMarket(t);n[s.symbol]=this.parseTicker(i,s)}return this.filterByArray(n,"symbol",e)}async fetchTicker(e,t={}){return(await this.fetchTickers([e],t))[e]}parseTrade(e,t){const i=this.safeTimestamp(e,"timestamp");let s=this.safeString(e,"type");"ask"===s?s="sell":"bid"===s&&(s="buy");const r=this.safeString2(e,"rate","price"),a=this.safeString2(e,"trade_id","tid"),n=this.safeString(e,"order_id"),o=this.safeString(e,"pair"),h=this.safeSymbol(o,t),c=this.safeString(e,"amount"),d=this.parseNumber(p.stringMul(r,c)),u=this.parseNumber(r),l=this.parseNumber(c),f="limit";let m;const g=this.safeNumber(e,"commission");if(void 0!==g){const t=this.safeString(e,"commissionCurrency");m={cost:g,currency:this.safeCurrencyCode(t)}}return void 0!==this.safeValue(e,"is_your_order")&&void 0===m&&(m=this.calculateFee(h,f,s,l,u,"taker")),{id:a,order:n,timestamp:i,datetime:this.iso8601(i),symbol:h,type:f,side:s,takerOrMaker:void 0,price:u,amount:l,cost:d,fee:m,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id};void 0!==i&&(a.limit=i);const n=await this.publicGetTradesPair(this.extend(a,s));return Array.isArray(n)&&0===n.length?[]:this.parseTrades(n[r.id],r,t,i)}async createOrder(e,t,i,s,a,n={}){if("market"===t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();const o={pair:this.market(e).id,type:i,amount:this.amountToPrecision(e,s),rate:this.priceToPrecision(e,a)},h=await this.privatePostTrade(this.extend(o,n));let c,d="open",u=0,l=s;"return"in h&&(c=this.safeString(h.return,"order_id"),"0"===c&&(c=this.safeString(h.return,"init_order_id"),d="closed"),u=this.safeNumber(h.return,"received",0),l=this.safeNumber(h.return,"remains",s));const f=this.milliseconds();return{id:c,timestamp:f,datetime:this.iso8601(f),lastTradeTimestamp:void 0,status:d,symbol:e,type:t,side:i,price:a,cost:a*u,amount:s,remaining:l,filled:u,fee:void 0,info:h,clientOrderId:void 0,average:void 0,trades:void 0}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)};return await this.privatePostCancelOrder(this.extend(s,i))}parseOrderStatus(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"open"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.parseOrderStatus(this.safeString(e,"status")),r=this.safeTimestamp(e,"timestamp_created"),a=this.safeString(e,"pair"),n=this.safeSymbol(a,t),o=this.safeString(e,"amount"),h=this.safeString(e,"start_amount"),c=this.safeString(e,"rate"),d=this.safeString(e,"type");return this.safeOrder2({info:e,id:i,clientOrderId:void 0,symbol:n,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,type:"limit",timeInForce:void 0,postOnly:void 0,side:d,price:c,stopPrice:void 0,cost:void 0,amount:h,remaining:o,filled:void 0,status:s,fee:void 0,average:void 0,trades:void 0},t)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:parseInt(e)},r=await this.privatePostOrderInfo(this.extend(s,i));e=e.toString();const a=this.safeValue(r,"return",{});return this.parseOrder(this.extend({id:e},a[e]))}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const r={};if(void 0!==e){const t=this.market(e);r.pair=t.id}const n=await this.privatePostActiveOrders(this.extend(r,s)),o=this.safeValue(n,"return",[]);return this.parseOrders(o,void 0,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades() requires a `symbol` argument");await this.loadMarkets();const r=this.market(e),n={pair:r.id};void 0!==i&&(n.count=parseInt(i)),void 0!==t&&(n.since=parseInt(t/1e3));const o=await this.privatePostTradeHistory(this.extend(n,s)),h=this.safeValue(o,"return",{}),c=Object.keys(h),d=[];for(let e=0;e<c.length;e++){const t=c[e],i=this.parseTrade(this.extend(h[t],{trade_id:t}),r);d.push(i)}return this.filterBySymbolSinceLimit(d,e,t,i)}async createDepositAddress(e,t={}){const i=await this.fetchDepositAddress(e,this.extend({need_new:1},t)),s=this.safeString(i,"address");return this.checkAddress(s),{currency:e,address:s,tag:void 0,info:i.info}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={coinName:this.currency(e).id,need_new:0},s=await this.privatePostGetDepositAddress(this.extend(i,t)),r=this.safeString(s.return,"address");return this.checkAddress(r),{currency:e,address:r,tag:void 0,network:void 0,info:s}}async withdraw(e,t,i,s,a={}){[s,a]=this.handleWithdrawTagAndParams(s,a),this.checkAddress(i),await this.loadMarkets();const n={coinName:this.currency(e).id,amount:t,address:i};if(void 0!==s)throw new r(this.id+" withdraw() does not support the tag argument yet due to a lack of docs on withdrawing with tag/memo on behalf of the exchange.");return{info:await this.privatePostWithdrawCoinsToAddress(this.extend(n,a)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t];const o=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();const t=this.nonce();a=this.urlencode(this.extend({nonce:t,method:e},o));const i=this.hmac(this.encode(a),this.encode(this.secret),"sha512");r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:i}}else"public"===t?(n+="/"+this.version+"/"+this.implodeParams(e,s),Object.keys(o).length&&(n+="?"+this.urlencode(o))):(n+="/"+this.implodeParams(e,s),"GET"===i?Object.keys(o).length&&(n+="?"+this.urlencode(o)):Object.keys(o).length&&(a=this.json(o),r={"Content-Type":"application/json"}));return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0!==o&&"success"in o){let e=this.safeValue(o,"success",!1);if("string"==typeof e&&(e="true"===e||"1"===e),!e){const e=this.safeString(o,"code"),t=this.safeString(o,"error"),i=this.id+" "+n;throw this.throwExactlyMatchedException(this.exceptions.exact,e,i),this.throwExactlyMatchedException(this.exceptions.exact,t,i),this.throwBroadlyMatchedException(this.exceptions.broad,t,i),new r(i)}}}}},34422:(e,t,i)=>{"use strict";const s=i(48819),{ExchangeError:r,BadRequest:a}=i(73449),n=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"zaif",name:"Zaif",countries:["JP"],rateLimit:2e3,version:"1",has:{cancelOrder:!0,CORS:void 0,createMarketOrder:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766927-39ca2ada-5eeb-11e7-972f-1b4199518ca6.jpg",api:"https://api.zaif.jp",www:"https://zaif.jp",doc:["https://techbureau-api-document.readthedocs.io/ja/latest/index.html","https://corp.zaif.jp/api-docs","https://corp.zaif.jp/api-docs/api_links","https://www.npmjs.com/package/zaif.jp","https://github.com/you21979/node-zaif"],fees:"https://zaif.jp/fee?lang=en"},fees:{trading:{percentage:!0,taker:this.parseNumber("0.001"),maker:this.parseNumber("0")}},api:{public:{get:["depth/{pair}","currencies/{pair}","currencies/all","currency_pairs/{pair}","currency_pairs/all","last_price/{pair}","ticker/{pair}","trades/{pair}"]},private:{post:["active_orders","cancel_order","deposit_history","get_id_info","get_info","get_info2","get_personal_info","trade","trade_history","withdraw","withdraw_history"]},ecapi:{post:["createInvoice","getInvoice","getInvoiceIdsByOrderNumber","cancelInvoice"]},tlapi:{post:["get_positions","position_history","active_positions","create_position","change_position","cancel_position"]},fapi:{get:["groups/{group_id}","last_price/{group_id}/{pair}","ticker/{group_id}/{pair}","trades/{group_id}/{pair}","depth/{group_id}/{pair}"]}},options:{fees:{"BTC/JPY":{maker:0,taker:0},"BCH/JPY":{maker:0,taker:.003},"BCH/BTC":{maker:0,taker:.003},"PEPECASH/JPY":{maker:0,taker:1e-4},"PEPECASH/BT":{maker:0,taker:1e-4}}},exceptions:{exact:{"unsupported currency_pair":a},broad:{}}})}async fetchMarkets(e={}){const t=await this.publicGetCurrencyPairsAll(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"currency_pair"),a=this.safeString(s,"name"),[n,o]=a.split("/"),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=h+"/"+c,u={amount:-Math.log10(this.safeNumber(s,"item_unit_step")),price:this.safeInteger(s,"aux_unit_point")},l=this.safeValue(this.options.fees,d,this.fees.trading),f=l.taker,p=l.maker;i.push({id:r,symbol:d,base:h,quote:c,baseId:n,quoteId:o,type:"spot",spot:!0,active:!0,precision:u,taker:f,maker:p,limits:{amount:{min:this.safeNumber(s,"item_unit_min"),max:void 0},price:{min:this.safeNumber(s,"aux_unit_min"),max:void 0},cost:{min:void 0,max:void 0}},info:s})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privatePostGetInfo(e),i=this.safeValue(t,"return",{}),s=this.safeValue(i,"deposit"),r={info:t,timestamp:void 0,datetime:void 0},a=this.safeValue(i,"funds",{}),n=Object.keys(a);for(let e=0;e<n.length;e++){const t=n[e],i=this.safeCurrencyCode(t),o=this.safeString(a,t),h=this.account();h.free=o,h.total=o,void 0!==s&&t in s&&(h.total=this.safeString(s,t)),r[i]=h}return this.parseBalance(r)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair:this.marketId(e)},r=await this.publicGetDepthPair(this.extend(s,i));return this.parseOrderBook(r,e)}async fetchTicker(e,t={}){await this.loadMarkets();const i={pair:this.marketId(e)},s=await this.publicGetTickerPair(this.extend(i,t)),r=this.milliseconds(),a=this.safeNumber(s,"vwap"),n=this.safeNumber(s,"volume");let o;void 0!==n&&void 0!==a&&(o=n*a);const h=this.safeNumber(s,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(s,"high"),low:this.safeNumber(s,"low"),bid:this.safeNumber(s,"bid"),bidVolume:void 0,ask:this.safeNumber(s,"ask"),askVolume:void 0,vwap:a,open:void 0,close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:n,quoteVolume:o,info:s}}parseTrade(e,t){let i=this.safeString(e,"trade_type");i="bid"===i?"buy":"sell";const s=this.safeTimestamp(e,"date"),r=this.safeString2(e,"id","tid"),a=this.safeString(e,"price"),o=this.safeString(e,"amount"),h=this.parseNumber(a),c=this.parseNumber(o),d=this.parseNumber(n.stringMul(a,o)),u=this.safeString(e,"currency_pair"),l=this.safeSymbol(u,t,"_");return{id:r,info:e,timestamp:s,datetime:this.iso8601(s),symbol:l,type:void 0,side:i,order:void 0,takerOrMaker:void 0,price:h,amount:c,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={pair:r.id};let n=await this.publicGetTradesPair(this.extend(a,s));if(1===n.length){const e=n[0];Object.keys(e).length||(n=[])}return this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,a,n={}){if(await this.loadMarkets(),"limit"!==t)throw new r(this.id+" allows limit orders only");const o={currency_pair:this.marketId(e),action:"buy"===i?"bid":"ask",amount:s,price:a},h=await this.privatePostTrade(this.extend(o,n));return{info:h,id:h.return.order_id.toString()}}async cancelOrder(e,t,i={}){const s={order_id:e};return await this.privatePostCancelOrder(this.extend(s,i))}parseOrder(e,t){let i=this.safeString(e,"action");i="bid"===i?"buy":"sell";const s=this.safeTimestamp(e,"timestamp"),r=this.safeString(e,"currency_pair"),a=this.safeSymbol(r,t,"_"),n=this.safeString(e,"price"),o=this.safeString(e,"amount"),h=this.safeString(e,"id");return this.safeOrder2({id:h,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,status:"open",symbol:a,type:"limit",timeInForce:void 0,postOnly:void 0,side:i,price:n,stopPrice:void 0,cost:void 0,amount:o,filled:void 0,remaining:void 0,trades:void 0,fee:void 0,info:e,average:void 0},t)}async fetchOpenOrders(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.currency_pair=r.id);const n=await this.privatePostActiveOrders(this.extend(a,s));return this.parseOrders(n.return,r,t,i)}async fetchClosedOrders(e,t,i,s={}){let r;await this.loadMarkets();const a={};void 0!==e&&(r=this.market(e),a.currency_pair=r.id);const n=await this.privatePostTradeHistory(this.extend(a,s));return this.parseOrders(n.return,r,t,i)}async withdraw(e,t,i,s,a={}){[s,a]=this.handleWithdrawTagAndParams(s,a),this.checkAddress(i),await this.loadMarkets();const n=this.currency(e);if("JPY"===e)throw new r(this.id+" withdraw() does not allow "+e+" withdrawals");const o={currency:n.id,amount:t,address:i};void 0!==s&&(o.message=s);const h=await this.privatePostWithdraw(this.extend(o,a));return{info:h,id:h.return.txid,fee:h.return.fee}}nonce(){return parseFloat(this.milliseconds()/1e3).toFixed(8)}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api+"/";if("public"===t)n+="api/"+this.version+"/"+this.implodeParams(e,s);else if("fapi"===t)n+="fapi/"+this.version+"/"+this.implodeParams(e,s);else{this.checkRequiredCredentials(),n+="ecapi"===t?"ecapi":"tlapi"===t?"tlapi":"tapi";const i=this.nonce();a=this.urlencode(this.extend({method:e,nonce:i},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,o,h,c){if(void 0===o)return;const d=this.id+" "+n,u=this.safeString(o,"error");if(void 0!==u)throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new r(d);if(!this.safeValue(o,"success",!0))throw new r(d)}}},90927:(e,t,i)=>{"use strict";const s=i(48819),{BadRequest:r,ExchangeError:a,ArgumentsRequired:n,AuthenticationError:o,InsufficientFunds:h,OrderNotFound:c,ExchangeNotAvailable:d,RateLimitExceeded:u,PermissionDenied:l,InvalidOrder:f,InvalidAddress:p,OnMaintenance:m,RequestTimeout:g,AccountSuspended:y}=i(73449),b=i(6832);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"zb",name:"ZB",countries:["CN"],rateLimit:100,version:"v1",certified:!0,pro:!0,has:{cancelOrder:!0,CORS:void 0,createMarketOrder:void 0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDepositAddresses:!0,fetchDeposits:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},exceptions:{ws:{1001:a,1002:a,1003:o,1004:o,1005:o,1006:l,1007:a,1009:m,1010:d,1012:l,1013:a,1014:a,2001:h,2002:h,2003:h,2005:h,2006:h,2007:h,2008:h,2009:h,3001:c,3002:f,3003:f,3004:o,3005:r,3006:l,3007:g,3008:a,3009:f,3010:l,3011:f,3012:f,4001:y,4002:u},exact:{1001:a,1002:a,1003:o,1004:o,1005:o,1006:o,1009:d,1010:d,1012:l,1013:a,1014:a,2001:h,2002:h,2003:h,2005:h,2006:h,2007:h,2008:h,2009:h,3001:c,3002:f,3003:f,3004:o,3005:r,3006:o,3007:o,3008:c,3009:f,3010:l,3011:f,3012:f,4001:d,4002:u},broad:{"提币地址有误，请先添加提币地址。":p}},urls:{logo:"https://user-images.githubusercontent.com/1294454/32859187-cd5214f0-ca5e-11e7-967d-96568e2e2bd1.jpg",api:{public:"https://api.zb.work/data",private:"https://trade.zb.work/api",trade:"https://trade.zb.work/api"},www:"https://www.zb.com",doc:"https://www.zb.com/i/developer",fees:"https://www.zb.com/i/rate",referral:{url:"https://www.zbex.club/en/register?ref=4301lera",discount:.16}},api:{trade:{get:["getFeeInfo"]},public:{get:["markets","ticker","allTicker","depth","trades","kline","getGroupMarkets"]},private:{get:["order","orderMoreV2","cancelOrder","getOrder","getOrders","getOrdersNew","getOrdersIgnoreTradeType","getUnfinishedOrdersIgnoreTradeType","getFinishedAndPartialOrders","getAccountInfo","getUserAddress","getPayinAddress","getWithdrawAddress","getWithdrawRecord","getChargeRecord","getCnyWithdrawRecord","getCnyChargeRecord","withdraw","addSubUser","getSubUserList","doTransferFunds","createSubUserKey","getLeverAssetsInfo","getLeverBills","transferInLever","transferOutLever","loan","cancelLoan","getLoans","getLoanRecords","borrow","autoBorrow","repay","doAllRepay","getRepayments","getFinanceRecords","changeInvestMark","changeLoop","getCrossAssets","getCrossBills","transferInCross","transferOutCross","doCrossLoan","doCrossRepay","getCrossRepayRecords"]}},fees:{funding:{withdraw:{}},trading:{maker:.002,taker:.002}},commonCurrencies:{ANG:"Anagram",ENT:"ENTCash",BCHABC:"BCHABC",BCHSV:"BCHSV"}})}async fetchMarkets(e={}){const t=await this.publicGetMarkets(e),i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){const r=i[e],a=t[r],[n,o]=r.split("_"),h=this.safeCurrencyCode(n),c=this.safeCurrencyCode(o),d=h+"/"+c,u=this.safeString(a,"amountScale"),l=this.safeString(a,"priceScale"),f=this.parsePrecision(l),p={amount:parseInt(u),price:parseInt(l)};s.push({id:r,symbol:d,baseId:n,quoteId:o,base:h,quote:c,type:"spot",spot:!0,active:!0,precision:p,limits:{amount:{min:this.safeNumber(a,"minAmount"),max:void 0},price:{min:this.parseNumber(f),max:void 0},cost:{min:this.safeNumber(a,"minSize"),max:void 0}},info:a})}return s}async fetchCurrencies(e={}){const t=await this.tradeGetGetFeeInfo(e),i=this.safeValue(t,"result",{}),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){const t=s[e],a=i[t],n=this.safeCurrencyCode(t),o=void 0;let h=!0,c=!0;const d={};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t,"chainName"),s=this.safeNumber(t,"fee"),r=this.safeValue(t,"canDeposit"),n=this.safeValue(t,"canWithdraw");c=c||r,h=h||n,d[i]=s}const u=h&&c;r[n]={id:t,name:void 0,code:n,precision:o,info:a,active:u,fee:void 0,fees:d,limits:this.limits}}return r}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetGetAccountInfo(e),i=this.safeValue(t.result,"coins"),s={info:t,timestamp:void 0,datetime:void 0};for(let e=0;e<i.length;e++){const t=i[e],r=this.account(),a=this.safeString(t,"key"),n=this.safeCurrencyCode(a);r.free=this.safeString(t,"available"),r.used=this.safeString(t,"freez"),s[n]=r}return this.parseBalance(s)}parseDepositAddress(e,t){let i,s=this.safeString2(e,"key","address");const r=this.safeString(e,"memo");if(void 0!==r)i=r;else if(s.indexOf("_")>=0){const e=s.split("_");s=e[0],i=e[1]}const a=this.safeString(e,"blockChain");return{currency:this.safeCurrencyCode(a,t),address:s,tag:i,network:void 0,info:e}}async fetchDepositAddresses(e,t={}){await this.loadMarkets();const i=await this.privateGetGetPayinAddress(t),s=this.safeValue(i,"message",{}),r=this.safeValue(s,"datas",[]);return this.parseDepositAddresses(r,e)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},r=await this.privateGetGetUserAddress(this.extend(s,t)),a=this.safeValue(r,"message",{}),n=this.safeValue(a,"datas",{});return this.parseDepositAddress(n,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={market:this.market(e).id};void 0!==t&&(s.size=t);const r=await this.publicGetDepth(this.extend(s,i));return this.parseOrderBook(r,e)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetAllTicker(t),s={},r={},a=Object.keys(this.markets_by_id);for(let e=0;e<a.length;e++)r[a[e].replace("_","")]=this.markets_by_id[a[e]];const n=Object.keys(i);for(let e=0;e<n.length;e++){const t=r[n[e]];s[t.symbol]=this.parseTicker(i[n[e]],t)}return this.filterByArray(s,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={market:i.id},r=await this.publicGetTicker(this.extend(s,t)),a=this.safeValue(r,"ticker",{});return a.date=this.safeValue(r,"date"),this.parseTicker(a,i)}parseTicker(e,t){const i=this.safeInteger(e,"date",this.milliseconds());let s;void 0!==t&&(s=t.symbol);const r=this.safeNumber(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"vol"),quoteVolume:void 0,info:e}}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e);void 0===s&&(s=1e3);const n={market:a.id,type:this.timeframes[t],limit:s};void 0!==i&&(n.since=i);const o=await this.publicGetKline(this.extend(n,r)),h=this.safeValue(o,"data",[]);return this.parseOHLCVs(h,a,t,i,s)}parseTrade(e,t){const i=this.safeTimestamp(e,"date");let s=this.safeString(e,"trade_type");s="bid"===s?"buy":"sell";const r=this.safeString(e,"tid"),a=this.safeString(e,"price"),n=this.safeString(e,"amount"),o=b.stringMul(a,n),h=this.parseNumber(a),c=this.parseNumber(n),d=this.parseNumber(o);let u;return void 0!==t&&(u=t.symbol),{info:e,id:r,timestamp:i,datetime:this.iso8601(i),symbol:u,type:void 0,side:s,order:void 0,takerOrMaker:void 0,price:h,amount:c,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={market:r.id},n=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,r,a={}){if("limit"!==t)throw new f(this.id+" allows limit orders only");await this.loadMarkets();const n={price:this.priceToPrecision(e,r),amount:this.amountToPrecision(e,s),tradeType:"buy"===i?"1":"0",currency:this.marketId(e)},o=await this.privateGetOrder(this.extend(n,a));return{info:o,id:o.id}}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={id:e.toString(),currency:this.marketId(t)};return await this.privateGetCancelOrder(this.extend(s,i))}async fetchOrder(e,t,i={}){if(void 0===t)throw new n(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const s={id:e.toString(),currency:this.marketId(t)},r=await this.privateGetGetOrder(this.extend(s,i));return this.parseOrder(r,void 0)}async fetchOrders(e,t,i=50,s={}){if(void 0===e)throw new n(this.id+"fetchOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={currency:r.id,pageIndex:1,pageSize:i};let o,h="privateGetGetOrdersIgnoreTradeType";"tradeType"in s&&(h="privateGetGetOrdersNew");try{o=await this[h](this.extend(a,s))}catch(e){if(e instanceof c)return[];throw e}return this.parseOrders(o,r,t,i)}async fetchClosedOrders(e,t,i=10,s={}){if(void 0===e)throw new n(this.id+"fetchClosedOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={currency:r.id,pageIndex:1,pageSize:i},o=await this.privateGetGetFinishedAndPartialOrders(this.extend(a,s));return this.parseOrders(o,r,t,i)}async fetchOpenOrders(e,t,i=10,s={}){if(void 0===e)throw new n(this.id+"fetchOpenOrders() requires a symbol argument");await this.loadMarkets();const r=this.market(e),a={currency:r.id,pageIndex:1,pageSize:i};let o,h="privateGetGetUnfinishedOrdersIgnoreTradeType";"tradeType"in s&&(h="privateGetGetOrdersNew");try{o=await this[h](this.extend(a,s))}catch(e){if(e instanceof c)return[];throw e}return this.parseOrders(o,r,t,i)}parseOrder(e,t){let i=this.safeInteger(e,"type");i=1===i?"buy":"sell";const s=this.safeInteger(e,"trade_date"),r=this.safeString(e,"currency"),a=this.safeSymbol(r,t,"_"),n=this.safeString(e,"price"),o=this.safeString(e,"trade_amount"),h=this.safeString(e,"total_amount"),c=this.safeString(e,"trade_money"),d=this.parseOrderStatus(this.safeString(e,"status")),u=this.safeString(e,"id"),l=this.safeNumber(e,"fees");let f;if(void 0!==l){let s;!0===this.safeValue(e,"useZbFee")?s="ZB":void 0!==t&&(s="sell"===i?t.quote:t.base),f={cost:l,currency:s}}return this.safeOrder2({info:e,id:u,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:a,type:"limit",timeInForce:void 0,postOnly:void 0,side:i,price:n,stopPrice:void 0,average:void 0,cost:c,amount:h,filled:o,remaining:void 0,status:d,fee:f,trades:void 0},t)}parseOrderStatus(e){return this.safeString({0:"open",1:"canceled",2:"closed",3:"open"},e,e)}parseTransactionStatus(e){return this.safeString({0:"pending",1:"failed",2:"ok",3:"canceled",5:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"hash"),r=this.safeNumber(e,"amount");let a=this.parse8601(this.safeString(e,"submit_time"));a=this.safeInteger(e,"submitTime",a);let n,o=this.safeString2(e,"toAddress","address");if(void 0!==o){const e=o.split("_");o=this.safeString(e,0),n=this.safeString(e,1)}const h=this.safeInteger(e,"confirmTimes"),c=this.safeInteger(e,"manageTime");let d;const u=this.safeString(e,"currency"),l=this.safeCurrencyCode(u,t);void 0!==o&&(d=void 0===h?"withdrawal":"deposit");const f=this.parseTransactionStatus(this.safeString(e,"status"));let p;const m=this.safeNumber(e,"fees");return void 0!==m&&(p={cost:m,currency:l}),{info:e,id:i,txid:s,timestamp:a,datetime:this.iso8601(a),addressFrom:void 0,address:o,addressTo:o,tagFrom:void 0,tag:n,tagTo:n,type:d,amount:r,currency:l,status:f,updated:c,fee:p}}async withdraw(e,t,i,s,r={}){[s,r]=this.handleWithdrawTagAndParams(s,r);const a=this.safeString(r,"safePwd",this.password);if(void 0===a)throw new n(this.id+" withdraw() requires exchange.password or a safePwd parameter");const o=this.safeNumber(r,"fees");if(void 0===o)throw new n(this.id+" withdraw() requires a fees parameter");this.checkAddress(i),await this.loadMarkets();const h=this.currency(e);void 0!==s&&(i+="_"+s);const c={amount:this.currencyToPrecision(e,t),currency:h.id,fees:this.currencyToPrecision(e,o),method:"withdraw",receiveAddr:i,safePwd:a},d=await this.privateGetWithdraw(this.extend(c,r)),u=this.parseTransaction(d,h);return this.extend(u,{type:"withdrawal",address:i,addressTo:i,amount:t})}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.pageSize=i);const n=await this.privateGetGetWithdrawRecord(this.extend(r,s)),o=this.safeValue(n,"message",{}),h=this.safeValue(o,"datas",{}),c=this.safeValue(h,"list",[]);return this.parseTransactions(c,a,t,i)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.pageSize=i);const n=await this.privateGetGetChargeRecord(this.extend(r,s)),o=this.safeValue(n,"message",{}),h=this.safeValue(o,"datas",{}),c=this.safeValue(h,"list",[]);return this.parseTransactions(c,a,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let n=this.urls.api[t];if("public"===t)n+="/"+this.version+"/"+e,Object.keys(s).length&&(n+="?"+this.urlencode(s));else if("trade"===t)n+="/"+e,Object.keys(s).length&&(n+="?"+this.urlencode(s));else{let t=this.keysort(this.extend({method:e,accesskey:this.apiKey},s));const i=this.nonce();t=this.keysort(t);const r=this.rawencode(t),a=this.hash(this.encode(this.secret),"sha1");n+="/"+e+"?"+r+"&sign="+this.hmac(this.encode(r),this.encode(a),"md5")+"&reqTime="+i.toString()}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,n,o,h,c){if(void 0!==o&&"{"===n[0]){const e=this.id+" "+n;if(this.throwBroadlyMatchedException(this.exceptions.broad,n,e),"code"in o){const t=this.safeString(o,"code");if(this.throwExactlyMatchedException(this.exceptions.exact,t,e),"1000"!==t)throw new a(e)}const t=this.safeValue(o,"result");if(void 0!==t&&!t)throw"服务端忙碌"===this.safeString(o,"message")?new d(e):new a(e)}}}},55492:(e,t,i)=>{"use strict";const s=i(61985);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"zipmex",name:"Zipmex",countries:["AU","SG","TH","ID"],certified:!1,pro:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/146103275-c39a34d9-68a4-4cd2-b1f1-c684548d311b.jpg",test:void 0,api:{public:"https://apws.zipmex.com:8443/AP",private:"https://apws.zipmex.com:8443/AP"},www:"https://zipmex.com/",referral:"https://trade.zipmex.com/global/accounts/sign-up?aff=KLm7HyCsvN",fees:"https://zipmex.com/fee-schedule"},fees:{trading:{tierBased:!0,percentage:!0,taker:this.parseNumber("0.002"),maker:this.parseNumber("0.002")}}})}}},79264:(e,t,i)=>{"use strict";const s=i(48819),{InvalidNonce:r,InsufficientFunds:a,AuthenticationError:n,InvalidOrder:o,ExchangeError:h,OrderNotFound:c,AccountSuspended:d,BadSymbol:u,OrderImmediatelyFillable:l,RateLimitExceeded:f,OnMaintenance:p,PermissionDenied:m}=i(73449);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"zonda",name:"Zonda",countries:["EE"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","3d":"259200","1w":"604800"},hostname:"zondaglobal.com",urls:{referral:"https://auth.zondaglobal.com/ref/jHlbB4mIkdS1",logo:"https://user-images.githubusercontent.com/1294454/27766132-978a7bd8-5ece-11e7-9540-bc96d1e9bbb8.jpg",www:"https://zondaglobal.com",api:{public:"https://{hostname}/API/Public",private:"https://{hostname}/API/Trading/tradingApi.php",v1_01Public:"https://api.{hostname}/rest",v1_01Private:"https://api.{hostname}/rest"},doc:["https://docs.zonda.exchange/","https://github.com/BitBayNet/API"],support:"https://zondaglobal.com/en/helpdesk/zonda-exchange",fees:"https://zondaglobal.com/legal/zonda-exchange/fees"},api:{public:{get:["{id}/all","{id}/market","{id}/orderbook","{id}/ticker","{id}/trades"]},private:{post:["info","trade","cancel","orderbook","orders","transfer","withdraw","history","transactions"]},v1_01Public:{get:["trading/ticker","trading/ticker/{symbol}","trading/stats","trading/orderbook/{symbol}","trading/transactions/{symbol}","trading/candle/history/{symbol}/{resolution}"]},v1_01Private:{get:["payments/withdrawal/{detailId}","payments/deposit/{detailId}","trading/offer","trading/config/{symbol}","trading/history/transactions","balances/BITBAY/history","balances/BITBAY/balance","fiat_cantor/rate/{baseId}/{quoteId}","fiat_cantor/history"],post:["trading/offer/{symbol}","trading/config/{symbol}","balances/BITBAY/balance","balances/BITBAY/balance/transfer/{source}/{destination}","fiat_cantor/exchange"],delete:["trading/offer/{symbol}/{id}/{side}/{price}"],put:["balances/BITBAY/balance/{id}"]}},fees:{trading:{maker:this.parseNumber("0.0"),taker:this.parseNumber("0.001"),percentage:!0,tierBased:!1},fiat:{maker:.003,taker:.0043,percentage:!0,tierBased:!0,tiers:{taker:[[.0043,0],[.0042,1250],[.0041,3750],[.004,7500],[.0039,1e4],[.0038,15e3],[.0037,2e4],[.0036,25e3],[.0035,37500],[.0034,5e4],[.0033,75e3],[.0032,1e5],[.0031,15e4],[.003,2e5],[.0029,25e4],[.0028,375e3],[.0027,5e5],[.0026,625e3],[.0025,875e3]],maker:[[.003,0],[.0029,1250],[.0028,3750],[.0028,7500],[.0027,1e4],[.0026,15e3],[.0025,2e4],[.0025,25e3],[.0024,37500],[.0023,5e4],[.0023,75e3],[.0022,1e5],[.0021,15e4],[.0021,2e5],[.002,25e4],[.0019,375e3],[.0018,5e5],[.0018,625e3],[.0017,875e3]]}},funding:{withdraw:{}}},options:{fiatCurrencies:["EUR","USD","GBP","PLN"]},exceptions:{400:h,401:o,402:o,403:o,404:o,405:o,406:a,408:o,501:n,502:n,503:r,504:h,505:n,506:d,509:h,510:u,FUNDS_NOT_SUFFICIENT:a,OFFER_FUNDS_NOT_EXCEEDING_MINIMUMS:o,OFFER_NOT_FOUND:c,OFFER_WOULD_HAVE_BEEN_PARTIALLY_FILLED:l,ACTION_LIMIT_EXCEEDED:f,UNDER_MAINTENANCE:p,REQUEST_TIMESTAMP_TOO_OLD:r,PERMISSIONS_NOT_SUFFICIENT:m},commonCurrencies:{GGC:"Global Game Coin"}})}async fetchMarkets(e={}){const t=await this.v1_01PublicGetTradingTicker(e),i=this.safeValue(this.options,"fiatCurrencies",[]),s=[],r=this.safeValue(t,"items"),a=Object.keys(r);for(let e=0;e<a.length;e++){const t=r[a[e]],n=this.safeValue(t,"market",{}),o=this.safeValue(n,"first",{}),h=this.safeValue(n,"second",{}),c=this.safeString(o,"currency"),d=this.safeString(h,"currency"),u=c+d,l=this.safeCurrencyCode(c),f=this.safeCurrencyCode(d),p=l+"/"+f,m={amount:this.safeInteger(o,"scale"),price:this.safeInteger(h,"scale")};let g=this.safeValue(this.fees,"trading",{});(this.inArray(l,i)||this.inArray(f,i))&&(g=this.safeValue(this.fees,"fiat",{}));const y=this.safeNumber(g,"maker"),b=this.safeNumber(g,"taker");s.push({id:u,symbol:p,base:l,quote:f,baseId:c,quoteId:d,precision:m,type:"spot",spot:!0,active:void 0,maker:y,taker:b,limits:{amount:{min:this.safeNumber(o,"minOffer"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(h,"minOffer"),max:void 0}},info:t})}return s}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=await this.v1_01PrivateGetTradingOffer(this.extend({},s)),a=this.safeValue(r,"items",[]);return this.parseOrders(a,void 0,t,i,{status:"open"})}parseOrder(e,t){const i=this.safeString(e,"market"),s=this.safeSymbol(i,t,"-"),r=this.safeInteger(e,"time"),a=this.safeString(e,"startAmount"),n=this.safeString(e,"currentAmount"),o=this.safeValue(e,"postOnly");return this.safeOrder2({id:this.safeString(e,"id"),clientOrderId:void 0,info:e,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:void 0,symbol:s,type:this.safeString(e,"mode"),timeInForce:void 0,postOnly:o,side:this.safeStringLower(e,"offerType"),price:this.safeString(e,"rate"),stopPrice:void 0,amount:a,cost:void 0,filled:void 0,remaining:n,average:void 0,fee:void 0,trades:void 0},t)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};if(e){const t=[this.marketId(e)];r.markets=t}const a={query:this.json(this.extend(r,s))},n=await this.v1_01PrivateGetTradingHistoryTransactions(a),o=this.safeValue(n,"items"),h=this.parseTrades(o,void 0,t,i);return void 0===e?h:this.filterBySymbol(h,e)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.v1_01PrivateGetBalancesBITBAYBalance(e),i=this.safeValue(t,"balances");if(void 0===i)throw new h(this.id+" empty balance response "+this.json(t));const s={info:t};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currency"),a=this.safeCurrencyCode(r),n=this.account();n.used=this.safeString(t,"lockedFunds"),n.free=this.safeString(t,"availableFunds"),s[a]=n}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},r=await this.publicGetIdOrderbook(this.extend(s,i));return this.parseOrderBook(r,e)}parseTicker(e,t){const i=this.safeSymbol(void 0,t),s=this.milliseconds(),r=this.safeNumber(e,"volume"),a=this.safeNumber(e,"vwap");let n;void 0!==r&&void 0!==a&&(n=r*a);const o=this.safeNumber(e,"last");return this.safeTicker({symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(e,"max"),low:this.safeNumber(e,"min"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:a,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeNumber(e,"average"),baseVolume:r,quoteVolume:n,info:e},t)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={id:i.id},r=await this.publicGetIdTicker(this.extend(s,t));return this.parseTicker(r,i)}async fetchLedger(e,t,i,s={}){const r=[];if(void 0!==e){const t=this.currency(e);r.push(t.id)}let a={balanceCurrencies:r};void 0!==t&&(a.fromTime=t),void 0!==i&&(a.limit=i),a=this.extend(a,s);const n=(await this.v1_01PrivateGetBalancesBITBAYHistory({query:this.json(a)})).items;return this.parseLedger(n,void 0,t,i)}parseLedgerEntry(e,t){const i=this.safeInteger(e,"time"),s=this.safeValue(e,"balance",{}),r=this.safeString(s,"currency"),a=this.safeCurrencyCode(r),n=this.safeValue(e,"change",{});let o=this.safeNumber(n,"total"),h="in";o<0&&(h="out",o=-o);const c=this.safeString(e,"historyId"),d=this.safeString(e,"detailId"),u=this.parseLedgerEntryType(this.safeString(e,"type")),l=this.safeValue(e,"fundsBefore",{}),f=this.safeNumber(l,"total"),p=this.safeValue(e,"fundsAfter",{});return{info:e,id:c,direction:h,account:void 0,referenceId:d,referenceAccount:void 0,type:u,currency:a,amount:o,before:f,after:this.safeNumber(p,"total"),status:"ok",timestamp:i,datetime:this.iso8601(i),fee:void 0}}parseLedgerEntryType(e){return this.safeString({ADD_FUNDS:"transaction",BITCOIN_GOLD_FORK:"transaction",CREATE_BALANCE:"transaction",FUNDS_MIGRATION:"transaction",WITHDRAWAL_LOCK_FUNDS:"transaction",WITHDRAWAL_SUBTRACT_FUNDS:"transaction",WITHDRAWAL_UNLOCK_FUNDS:"transaction",TRANSACTION_COMMISSION_OUTCOME:"fee",TRANSACTION_COMMISSION_RETURN:"fee",TRANSACTION_OFFER_ABORTED_RETURN:"trade",TRANSACTION_OFFER_COMPLETED_RETURN:"trade",TRANSACTION_POST_INCOME:"trade",TRANSACTION_POST_OUTCOME:"trade",TRANSACTION_PRE_LOCKING:"trade"},e,e)}parseOHLCV(e,t){const i=this.safeValue(e,1,{});return[this.safeInteger(e,0),this.safeNumber(i,"o"),this.safeNumber(i,"h"),this.safeNumber(i,"l"),this.safeNumber(i,"c"),this.safeNumber(i,"v")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),n={symbol:a.baseId+"-"+a.quoteId,resolution:this.timeframes[t]};void 0===s&&(s=100);const o=s*this.parseTimeframe(t)*1e3;void 0===i?(n.to=this.milliseconds(),n.from=n.to-o):(n.from=parseInt(i),n.to=this.sum(n.from,o));const h=await this.v1_01PublicGetTradingCandleHistorySymbolResolution(this.extend(n,r)),c=this.safeValue(h,"items",[]);return this.parseOHLCVs(c,a,t,i,s)}parseTrade(e,t){const i=this.safeInteger2(e,"time","t"),s=this.safeStringLower2(e,"userAction","ty"),r=this.safeValue(e,"wasTaker");let a;void 0!==r&&(a=r?"taker":"maker");const n=this.safeString2(e,"rate","r"),o=this.safeString2(e,"amount","a"),h=this.safeString(e,"commissionValue"),c=this.safeString(e,"market"),d=(t=this.safeMarket(c,t,"-")).symbol;let u;void 0!==h&&(u={currency:"buy"===s?t.base:t.quote,cost:h});const l=this.safeString(e,"offerId");let f;return void 0!==l&&(f=l?"limit":"market"),this.safeTrade({id:this.safeString(e,"id"),order:l,timestamp:i,datetime:this.iso8601(i),symbol:d,type:f,side:s,price:n,amount:o,cost:void 0,takerOrMaker:a,fee:u,info:e},t)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.baseId+"-"+r.quoteId};void 0!==t&&(a.fromTime=t-1),void 0!==i&&(a.limit=i);const n=await this.v1_01PublicGetTradingTransactionsSymbol(this.extend(a,s)),o=this.safeValue(n,"items");return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const n=this.market(e),o={symbol:n.baseId+"-"+n.quoteId,offerType:i,amount:s,mode:t};"limit"===t&&(o.rate=r,r=parseFloat(r)),s=parseFloat(s);const h=await this.v1_01PrivatePostTradingOfferSymbol(this.extend(o,a)),c=this.milliseconds(),d=this.safeString(h,"offerId"),u=this.safeValue(h,"completed",!1)?"closed":"open";let l,f=0;const p=this.safeValue(h,"transactions");let m;if(void 0!==p){m=this.parseTrades(p,n,void 0,void 0,{timestamp:c,datetime:this.iso8601(c),symbol:e,side:i,type:t,orderId:d}),l=0;for(let e=0;e<m.length;e++)f=this.sum(f,m[e].amount),l=this.sum(l,m[e].cost)}const g=s-f;return{id:d,info:h,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,status:u,symbol:e,type:t,side:i,price:r,amount:s,cost:l,filled:f,remaining:g,average:void 0,fee:void 0,trades:m,clientOrderId:void 0}}async cancelOrder(e,t,i={}){const s=this.safeString(i,"side");if(void 0===s)throw new h(this.id+' cancelOrder() requires a `side` parameter ("buy" or "sell")');const r=this.safeValue(i,"price");if(void 0===r)throw new h(this.id+" cancelOrder() requires a `price` parameter (float or string)");await this.loadMarkets();const a=this.market(t),n={symbol:a.baseId+"-"+a.quoteId,id:e,side:s,price:r};return this.v1_01PrivateDeleteTradingOfferSymbolIdSidePrice(this.extend(n,i))}isFiat(e){return this.safeValue({USD:!0,EUR:!0,PLN:!0},e,!1)}async withdraw(e,t,i,s,r={}){let a;[s,r]=this.handleWithdrawTagAndParams(s,r),this.checkAddress(i),await this.loadMarkets();const n={currency:this.currency(e).id,quantity:t};return this.isFiat(e)?a="privatePostWithdraw":(a="privatePostTransfer",void 0!==s&&(i+="?dt="+s.toString()),n.address=i),{info:await this[a](this.extend(n,r)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){let n=this.implodeHostname(this.urls.api[t]);if("public"===t){const t=this.omit(s,this.extractParams(e));n+="/"+this.implodeParams(e,s)+".json",Object.keys(t).length&&(n+="?"+this.urlencode(t))}else if("v1_01Public"===t){const t=this.omit(s,this.extractParams(e));n+="/"+this.implodeParams(e,s),Object.keys(t).length&&(n+="?"+this.urlencode(t))}else if("v1_01Private"===t){this.checkRequiredCredentials();const t=this.omit(s,this.extractParams(e));n+="/"+this.implodeParams(e,s);const o=this.milliseconds().toString();let h;"POST"!==i?(Object.keys(t).length&&(n+="?"+this.urlencode(t)),h=this.apiKey+o):void 0===a&&(a=this.json(t),h=this.apiKey+o+a),r={"Request-Timestamp":o,"Operation-Id":this.uuid(),"API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(h),this.encode(this.secret),"sha512"),"Content-Type":"application/json"}}else this.checkRequiredCredentials(),a=this.urlencode(this.extend({method:e,moment:this.nonce()},s)),r={"Content-Type":"application/x-www-form-urlencoded","API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(a),this.encode(this.secret),"sha512")};return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,n,o,c){if(void 0!==n){if("code"in n){const e=this.safeString(n,"code"),t=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,e,t),new h(t)}if("status"in n&&"Fail"===this.safeString(n,"status")){const e=this.safeValue(n,"errors"),t=this.id+" "+a;for(let i=0;i<e.length;i++){const s=e[i];this.throwExactlyMatchedException(this.exceptions,s,t)}throw new h(t)}}}}},71027:(e,t,i)=>{var s=i(89509).Buffer,r=i(42830).Transform,a=i(32553).s;function n(e){r.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}i(35717)(n,r),n.prototype.update=function(e,t,i){"string"==typeof e&&(e=s.from(e,t));var r=this._update(e);return this.hashMode?this:(i&&(r=this._toString(r,i)),r)},n.prototype.setAutoPadding=function(){},n.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},n.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},n.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},n.prototype._transform=function(e,t,i){var s;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){s=e}finally{i(s)}},n.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},n.prototype._finalOrDigest=function(e){var t=this.__final()||s.alloc(0);return e&&(t=this._toString(t,e,!0)),t},n.prototype._toString=function(e,t,i){if(this._decoder||(this._decoder=new a(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var s=this._decoder.write(e);return i&&(s+=this._decoder.end()),s},e.exports=n},25108:(e,t,i)=>{var s=i(89539),r=i(69282);function a(){return(new Date).getTime()}var n,o=Array.prototype.slice,h={};n=void 0!==i.g&&i.g.console?i.g.console:"undefined"!=typeof window&&window.console?window.console:{};for(var c=[[function(){},"log"],[function(){n.log.apply(n,arguments)},"info"],[function(){n.log.apply(n,arguments)},"warn"],[function(){n.warn.apply(n,arguments)},"error"],[function(e){h[e]=a()},"time"],[function(e){var t=h[e];if(!t)throw new Error("No such label: "+e);delete h[e];var i=a()-t;n.log(e+": "+i+"ms")},"timeEnd"],[function(){var e=new Error;e.name="Trace",e.message=s.format.apply(null,arguments),n.error(e.stack)},"trace"],[function(e){n.log(s.inspect(e)+"\n")},"dir"],[function(e){if(!e){var t=o.call(arguments,1);r.ok(!1,s.format.apply(null,t))}},"assert"]],d=0;d<c.length;d++){var u=c[d],l=u[0],f=u[1];n[f]||(n[f]=l)}e.exports=n},57567:e=>{"use strict";e.exports=JSON.parse('{"O_RDONLY":0,"O_WRONLY":1,"O_RDWR":2,"S_IFMT":61440,"S_IFREG":32768,"S_IFDIR":16384,"S_IFCHR":8192,"S_IFBLK":24576,"S_IFIFO":4096,"S_IFLNK":40960,"S_IFSOCK":49152,"O_CREAT":512,"O_EXCL":2048,"O_NOCTTY":131072,"O_TRUNC":1024,"O_APPEND":8,"O_DIRECTORY":1048576,"O_NOFOLLOW":256,"O_SYNC":128,"O_SYMLINK":2097152,"O_NONBLOCK":4,"S_IRWXU":448,"S_IRUSR":256,"S_IWUSR":128,"S_IXUSR":64,"S_IRWXG":56,"S_IRGRP":32,"S_IWGRP":16,"S_IXGRP":8,"S_IRWXO":7,"S_IROTH":4,"S_IWOTH":2,"S_IXOTH":1,"E2BIG":7,"EACCES":13,"EADDRINUSE":48,"EADDRNOTAVAIL":49,"EAFNOSUPPORT":47,"EAGAIN":35,"EALREADY":37,"EBADF":9,"EBADMSG":94,"EBUSY":16,"ECANCELED":89,"ECHILD":10,"ECONNABORTED":53,"ECONNREFUSED":61,"ECONNRESET":54,"EDEADLK":11,"EDESTADDRREQ":39,"EDOM":33,"EDQUOT":69,"EEXIST":17,"EFAULT":14,"EFBIG":27,"EHOSTUNREACH":65,"EIDRM":90,"EILSEQ":92,"EINPROGRESS":36,"EINTR":4,"EINVAL":22,"EIO":5,"EISCONN":56,"EISDIR":21,"ELOOP":62,"EMFILE":24,"EMLINK":31,"EMSGSIZE":40,"EMULTIHOP":95,"ENAMETOOLONG":63,"ENETDOWN":50,"ENETRESET":52,"ENETUNREACH":51,"ENFILE":23,"ENOBUFS":55,"ENODATA":96,"ENODEV":19,"ENOENT":2,"ENOEXEC":8,"ENOLCK":77,"ENOLINK":97,"ENOMEM":12,"ENOMSG":91,"ENOPROTOOPT":42,"ENOSPC":28,"ENOSR":98,"ENOSTR":99,"ENOSYS":78,"ENOTCONN":57,"ENOTDIR":20,"ENOTEMPTY":66,"ENOTSOCK":38,"ENOTSUP":45,"ENOTTY":25,"ENXIO":6,"EOPNOTSUPP":102,"EOVERFLOW":84,"EPERM":1,"EPIPE":32,"EPROTO":100,"EPROTONOSUPPORT":43,"EPROTOTYPE":41,"ERANGE":34,"EROFS":30,"ESPIPE":29,"ESRCH":3,"ESTALE":70,"ETIME":101,"ETIMEDOUT":60,"ETXTBSY":26,"EWOULDBLOCK":35,"EXDEV":18,"SIGHUP":1,"SIGINT":2,"SIGQUIT":3,"SIGILL":4,"SIGTRAP":5,"SIGABRT":6,"SIGIOT":6,"SIGBUS":10,"SIGFPE":8,"SIGKILL":9,"SIGUSR1":30,"SIGSEGV":11,"SIGUSR2":31,"SIGPIPE":13,"SIGALRM":14,"SIGTERM":15,"SIGCHLD":20,"SIGCONT":19,"SIGSTOP":17,"SIGTSTP":18,"SIGTTIN":21,"SIGTTOU":22,"SIGURG":16,"SIGXCPU":24,"SIGXFSZ":25,"SIGVTALRM":26,"SIGPROF":27,"SIGWINCH":28,"SIGIO":23,"SIGSYS":12,"SSL_OP_ALL":2147486719,"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION":262144,"SSL_OP_CIPHER_SERVER_PREFERENCE":4194304,"SSL_OP_CISCO_ANYCONNECT":32768,"SSL_OP_COOKIE_EXCHANGE":8192,"SSL_OP_CRYPTOPRO_TLSEXT_BUG":2147483648,"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS":2048,"SSL_OP_EPHEMERAL_RSA":0,"SSL_OP_LEGACY_SERVER_CONNECT":4,"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER":32,"SSL_OP_MICROSOFT_SESS_ID_BUG":1,"SSL_OP_MSIE_SSLV2_RSA_PADDING":0,"SSL_OP_NETSCAPE_CA_DN_BUG":536870912,"SSL_OP_NETSCAPE_CHALLENGE_BUG":2,"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG":1073741824,"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG":8,"SSL_OP_NO_COMPRESSION":131072,"SSL_OP_NO_QUERY_MTU":4096,"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION":65536,"SSL_OP_NO_SSLv2":16777216,"SSL_OP_NO_SSLv3":33554432,"SSL_OP_NO_TICKET":16384,"SSL_OP_NO_TLSv1":67108864,"SSL_OP_NO_TLSv1_1":268435456,"SSL_OP_NO_TLSv1_2":134217728,"SSL_OP_PKCS1_CHECK_1":0,"SSL_OP_PKCS1_CHECK_2":0,"SSL_OP_SINGLE_DH_USE":1048576,"SSL_OP_SINGLE_ECDH_USE":524288,"SSL_OP_SSLEAY_080_CLIENT_DH_BUG":128,"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG":0,"SSL_OP_TLS_BLOCK_PADDING_BUG":512,"SSL_OP_TLS_D5_BUG":256,"SSL_OP_TLS_ROLLBACK_BUG":8388608,"ENGINE_METHOD_DSA":2,"ENGINE_METHOD_DH":4,"ENGINE_METHOD_RAND":8,"ENGINE_METHOD_ECDH":16,"ENGINE_METHOD_ECDSA":32,"ENGINE_METHOD_CIPHERS":64,"ENGINE_METHOD_DIGESTS":128,"ENGINE_METHOD_STORE":256,"ENGINE_METHOD_PKEY_METHS":512,"ENGINE_METHOD_PKEY_ASN1_METHS":1024,"ENGINE_METHOD_ALL":65535,"ENGINE_METHOD_NONE":0,"DH_CHECK_P_NOT_SAFE_PRIME":2,"DH_CHECK_P_NOT_PRIME":1,"DH_UNABLE_TO_CHECK_GENERATOR":4,"DH_NOT_SUITABLE_GENERATOR":8,"NPN_ENABLED":1,"RSA_PKCS1_PADDING":1,"RSA_SSLV23_PADDING":2,"RSA_NO_PADDING":3,"RSA_PKCS1_OAEP_PADDING":4,"RSA_X931_PADDING":5,"RSA_PKCS1_PSS_PADDING":6,"POINT_CONVERSION_COMPRESSED":2,"POINT_CONVERSION_UNCOMPRESSED":4,"POINT_CONVERSION_HYBRID":6,"F_OK":0,"R_OK":4,"W_OK":2,"X_OK":1,"UV_UDP_REUSEADDR":4}')},76393:(e,t,i)=>{var s=i(48764).Buffer,r=i(86266),a=i(16426);e.exports=function(e){return new o(e)};var n={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function o(e){this.curveType=n[e],this.curveType||(this.curveType={name:e}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function h(e,t,i){Array.isArray(e)||(e=e.toArray());var r=new s(e);if(i&&r.length<i){var a=new s(i-r.length);a.fill(0),r=s.concat([a,r])}return t?r.toString(t):r}n.p224=n.secp224r1,n.p256=n.secp256r1=n.prime256v1,n.p192=n.secp192r1=n.prime192v1,n.p384=n.secp384r1,n.p521=n.secp521r1,o.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},o.prototype.computeSecret=function(e,t,i){return t=t||"utf8",s.isBuffer(e)||(e=new s(e,t)),h(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),i,this.curveType.byteLength)},o.prototype.getPublicKey=function(e,t){var i=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(i[i.length-1]%2?i[0]=7:i[0]=6),h(i,e)},o.prototype.getPrivateKey=function(e){return h(this.keys.getPrivate(),e)},o.prototype.setPublicKey=function(e,t){return t=t||"utf8",s.isBuffer(e)||(e=new s(e,t)),this.keys._importPublic(e),this},o.prototype.setPrivateKey=function(e,t){t=t||"utf8",s.isBuffer(e)||(e=new s(e,t));var i=new a(e);return i=i.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(i),this}},16426:function(e,t,i){!function(e,t){"use strict";function s(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function a(e,t,i){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(i=t,t=10),this._init(e||0,t||10,i||"be"))}var n;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(8623).Buffer}catch(e){}function o(e,t){var i=e.charCodeAt(t);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function h(e,t,i){var s=o(e,i);return i-1>=t&&(s|=o(e,i-1)<<4),s}function c(e,t,i,s){for(var r=0,a=Math.min(e.length,i),n=t;n<a;n++){var o=e.charCodeAt(n)-48;r*=s,r+=o>=49?o-49+10:o>=17?o-17+10:o}return r}a.isBN=function(e){return e instanceof a||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),s(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<e.length&&(16===t?this._parseHex(e,r,i):(this._parseBase(e,t,r),"le"===i&&this._initArray(this.toArray(),t,i)))},a.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(s(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},a.prototype._initArray=function(e,t,i){if(s("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var a,n,o=0;if("be"===i)for(r=e.length-1,a=0;r>=0;r-=3)n=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===i)for(r=0,a=0;r<e.length;r+=3)n=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this.strip()},a.prototype._parseHex=function(e,t,i){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var r,a=0,n=0;if("be"===i)for(s=e.length-1;s>=t;s-=2)r=h(e,t,s)<<a,this.words[n]|=67108863&r,a>=18?(a-=18,n+=1,this.words[n]|=r>>>26):a+=8;else for(s=(e.length-t)%2==0?t+1:t;s<e.length;s+=2)r=h(e,t,s)<<a,this.words[n]|=67108863&r,a>=18?(a-=18,n+=1,this.words[n]|=r>>>26):a+=8;this.strip()},a.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var s=0,r=1;r<=67108863;r*=t)s++;s--,r=r/t|0;for(var a=e.length-i,n=a%s,o=Math.min(a,a-n)+i,h=0,d=i;d<o;d+=s)h=c(e,d,d+s,t),this.imuln(r),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==n){var u=1;for(h=c(e,d,e.length,t),d=0;d<n;d++)u*=t;this.imuln(u),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,i){i.negative=t.negative^e.negative;var s=e.length+t.length|0;i.length=s,s=s-1|0;var r=0|e.words[0],a=0|t.words[0],n=r*a,o=67108863&n,h=n/67108864|0;i.words[0]=o;for(var c=1;c<s;c++){for(var d=h>>>26,u=67108863&h,l=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=l;f++){var p=c-f|0;d+=(n=(r=0|e.words[p])*(a=0|t.words[f])+u)/67108864|0,u=67108863&n}i.words[c]=0|u,h=0|d}return 0!==h?i.words[c]=0|h:i.length--,i.strip()}a.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var r=0,a=0,n=0;n<this.length;n++){var o=this.words[n],h=(16777215&(o<<r|a)).toString(16);i=0!=(a=o>>>24-r&16777215)||n!==this.length-1?d[6-h.length]+h+i:h+i,(r+=2)>=26&&(r-=26,n--)}for(0!==a&&(i=a.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var c=u[e],f=l[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);i=(p=p.idivn(f)).isZero()?m+i:d[c-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}s(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return s(void 0!==n),this.toArrayLike(n,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,i){var r=this.byteLength(),a=i||Math.max(1,r);s(r<=a,"byte array longer than desired length"),s(a>0,"Requested array length <= 0"),this.strip();var n,o,h="le"===t,c=new e(a),d=this.clone();if(h){for(o=0;!d.isZero();o++)n=d.andln(255),d.iushrn(8),c[o]=n;for(;o<a;o++)c[o]=0}else{for(o=0;o<a-r;o++)c[o]=0;for(o=0;!d.isZero();o++)n=d.andln(255),d.iushrn(8),c[a-o-1]=n}return c},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,i=0;return 0==(8191&t)&&(i+=13,t>>>=13),0==(127&t)&&(i+=7,t>>>=7),0==(15&t)&&(i+=4,t>>>=4),0==(3&t)&&(i+=2,t>>>=2),0==(1&t)&&i++,i},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var i=this._zeroBits(this.words[t]);if(e+=i,26!==i)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},a.prototype.ior=function(e){return s(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]&e.words[i];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return s(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,i;this.length>e.length?(t=this,i=e):(t=e,i=this);for(var s=0;s<i.length;s++)this.words[s]=t.words[s]^i.words[s];if(this!==t)for(;s<t.length;s++)this.words[s]=t.words[s];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return s(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){s("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){s("number"==typeof e&&e>=0);var i=e/26|0,r=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},a.prototype.iadd=function(e){var t,i,s;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(i=this,s=e):(i=e,s=this);for(var r=0,a=0;a<s.length;a++)t=(0|i.words[a])+(0|s.words[a])+r,this.words[a]=67108863&t,r=t>>>26;for(;0!==r&&a<i.length;a++)t=(0|i.words[a])+r,this.words[a]=67108863&t,r=t>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i,s,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,s=e):(i=e,s=this);for(var a=0,n=0;n<s.length;n++)a=(t=(0|i.words[n])-(0|s.words[n])+a)>>26,this.words[n]=67108863&t;for(;0!==a&&n<i.length;n++)a=(t=(0|i.words[n])+a)>>26,this.words[n]=67108863&t;if(0===a&&n<i.length&&i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this.length=Math.max(this.length,n),i!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,i){var s,r,a,n=e.words,o=t.words,h=i.words,c=0,d=0|n[0],u=8191&d,l=d>>>13,f=0|n[1],p=8191&f,m=f>>>13,g=0|n[2],y=8191&g,b=g>>>13,v=0|n[3],w=8191&v,k=v>>>13,_=0|n[4],S=8191&_,O=_>>>13,M=0|n[5],T=8191&M,x=M>>>13,I=0|n[6],A=8191&I,C=I>>>13,N=0|n[7],E=8191&N,P=N>>>13,B=0|n[8],R=8191&B,V=B>>>13,L=0|n[9],D=8191&L,q=L>>>13,G=0|o[0],F=8191&G,j=G>>>13,U=0|o[1],H=8191&U,z=U>>>13,K=0|o[2],W=8191&K,X=K>>>13,Z=0|o[3],Y=8191&Z,Q=Z>>>13,J=0|o[4],$=8191&J,ee=J>>>13,te=0|o[5],ie=8191&te,se=te>>>13,re=0|o[6],ae=8191&re,ne=re>>>13,oe=0|o[7],he=8191&oe,ce=oe>>>13,de=0|o[8],ue=8191&de,le=de>>>13,fe=0|o[9],pe=8191&fe,me=fe>>>13;i.negative=e.negative^t.negative,i.length=19;var ge=(c+(s=Math.imul(u,F))|0)+((8191&(r=(r=Math.imul(u,j))+Math.imul(l,F)|0))<<13)|0;c=((a=Math.imul(l,j))+(r>>>13)|0)+(ge>>>26)|0,ge&=67108863,s=Math.imul(p,F),r=(r=Math.imul(p,j))+Math.imul(m,F)|0,a=Math.imul(m,j);var ye=(c+(s=s+Math.imul(u,H)|0)|0)+((8191&(r=(r=r+Math.imul(u,z)|0)+Math.imul(l,H)|0))<<13)|0;c=((a=a+Math.imul(l,z)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,s=Math.imul(y,F),r=(r=Math.imul(y,j))+Math.imul(b,F)|0,a=Math.imul(b,j),s=s+Math.imul(p,H)|0,r=(r=r+Math.imul(p,z)|0)+Math.imul(m,H)|0,a=a+Math.imul(m,z)|0;var be=(c+(s=s+Math.imul(u,W)|0)|0)+((8191&(r=(r=r+Math.imul(u,X)|0)+Math.imul(l,W)|0))<<13)|0;c=((a=a+Math.imul(l,X)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,s=Math.imul(w,F),r=(r=Math.imul(w,j))+Math.imul(k,F)|0,a=Math.imul(k,j),s=s+Math.imul(y,H)|0,r=(r=r+Math.imul(y,z)|0)+Math.imul(b,H)|0,a=a+Math.imul(b,z)|0,s=s+Math.imul(p,W)|0,r=(r=r+Math.imul(p,X)|0)+Math.imul(m,W)|0,a=a+Math.imul(m,X)|0;var ve=(c+(s=s+Math.imul(u,Y)|0)|0)+((8191&(r=(r=r+Math.imul(u,Q)|0)+Math.imul(l,Y)|0))<<13)|0;c=((a=a+Math.imul(l,Q)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,s=Math.imul(S,F),r=(r=Math.imul(S,j))+Math.imul(O,F)|0,a=Math.imul(O,j),s=s+Math.imul(w,H)|0,r=(r=r+Math.imul(w,z)|0)+Math.imul(k,H)|0,a=a+Math.imul(k,z)|0,s=s+Math.imul(y,W)|0,r=(r=r+Math.imul(y,X)|0)+Math.imul(b,W)|0,a=a+Math.imul(b,X)|0,s=s+Math.imul(p,Y)|0,r=(r=r+Math.imul(p,Q)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,Q)|0;var we=(c+(s=s+Math.imul(u,$)|0)|0)+((8191&(r=(r=r+Math.imul(u,ee)|0)+Math.imul(l,$)|0))<<13)|0;c=((a=a+Math.imul(l,ee)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,s=Math.imul(T,F),r=(r=Math.imul(T,j))+Math.imul(x,F)|0,a=Math.imul(x,j),s=s+Math.imul(S,H)|0,r=(r=r+Math.imul(S,z)|0)+Math.imul(O,H)|0,a=a+Math.imul(O,z)|0,s=s+Math.imul(w,W)|0,r=(r=r+Math.imul(w,X)|0)+Math.imul(k,W)|0,a=a+Math.imul(k,X)|0,s=s+Math.imul(y,Y)|0,r=(r=r+Math.imul(y,Q)|0)+Math.imul(b,Y)|0,a=a+Math.imul(b,Q)|0,s=s+Math.imul(p,$)|0,r=(r=r+Math.imul(p,ee)|0)+Math.imul(m,$)|0,a=a+Math.imul(m,ee)|0;var ke=(c+(s=s+Math.imul(u,ie)|0)|0)+((8191&(r=(r=r+Math.imul(u,se)|0)+Math.imul(l,ie)|0))<<13)|0;c=((a=a+Math.imul(l,se)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,s=Math.imul(A,F),r=(r=Math.imul(A,j))+Math.imul(C,F)|0,a=Math.imul(C,j),s=s+Math.imul(T,H)|0,r=(r=r+Math.imul(T,z)|0)+Math.imul(x,H)|0,a=a+Math.imul(x,z)|0,s=s+Math.imul(S,W)|0,r=(r=r+Math.imul(S,X)|0)+Math.imul(O,W)|0,a=a+Math.imul(O,X)|0,s=s+Math.imul(w,Y)|0,r=(r=r+Math.imul(w,Q)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,Q)|0,s=s+Math.imul(y,$)|0,r=(r=r+Math.imul(y,ee)|0)+Math.imul(b,$)|0,a=a+Math.imul(b,ee)|0,s=s+Math.imul(p,ie)|0,r=(r=r+Math.imul(p,se)|0)+Math.imul(m,ie)|0,a=a+Math.imul(m,se)|0;var _e=(c+(s=s+Math.imul(u,ae)|0)|0)+((8191&(r=(r=r+Math.imul(u,ne)|0)+Math.imul(l,ae)|0))<<13)|0;c=((a=a+Math.imul(l,ne)|0)+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,s=Math.imul(E,F),r=(r=Math.imul(E,j))+Math.imul(P,F)|0,a=Math.imul(P,j),s=s+Math.imul(A,H)|0,r=(r=r+Math.imul(A,z)|0)+Math.imul(C,H)|0,a=a+Math.imul(C,z)|0,s=s+Math.imul(T,W)|0,r=(r=r+Math.imul(T,X)|0)+Math.imul(x,W)|0,a=a+Math.imul(x,X)|0,s=s+Math.imul(S,Y)|0,r=(r=r+Math.imul(S,Q)|0)+Math.imul(O,Y)|0,a=a+Math.imul(O,Q)|0,s=s+Math.imul(w,$)|0,r=(r=r+Math.imul(w,ee)|0)+Math.imul(k,$)|0,a=a+Math.imul(k,ee)|0,s=s+Math.imul(y,ie)|0,r=(r=r+Math.imul(y,se)|0)+Math.imul(b,ie)|0,a=a+Math.imul(b,se)|0,s=s+Math.imul(p,ae)|0,r=(r=r+Math.imul(p,ne)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,ne)|0;var Se=(c+(s=s+Math.imul(u,he)|0)|0)+((8191&(r=(r=r+Math.imul(u,ce)|0)+Math.imul(l,he)|0))<<13)|0;c=((a=a+Math.imul(l,ce)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,s=Math.imul(R,F),r=(r=Math.imul(R,j))+Math.imul(V,F)|0,a=Math.imul(V,j),s=s+Math.imul(E,H)|0,r=(r=r+Math.imul(E,z)|0)+Math.imul(P,H)|0,a=a+Math.imul(P,z)|0,s=s+Math.imul(A,W)|0,r=(r=r+Math.imul(A,X)|0)+Math.imul(C,W)|0,a=a+Math.imul(C,X)|0,s=s+Math.imul(T,Y)|0,r=(r=r+Math.imul(T,Q)|0)+Math.imul(x,Y)|0,a=a+Math.imul(x,Q)|0,s=s+Math.imul(S,$)|0,r=(r=r+Math.imul(S,ee)|0)+Math.imul(O,$)|0,a=a+Math.imul(O,ee)|0,s=s+Math.imul(w,ie)|0,r=(r=r+Math.imul(w,se)|0)+Math.imul(k,ie)|0,a=a+Math.imul(k,se)|0,s=s+Math.imul(y,ae)|0,r=(r=r+Math.imul(y,ne)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,ne)|0,s=s+Math.imul(p,he)|0,r=(r=r+Math.imul(p,ce)|0)+Math.imul(m,he)|0,a=a+Math.imul(m,ce)|0;var Oe=(c+(s=s+Math.imul(u,ue)|0)|0)+((8191&(r=(r=r+Math.imul(u,le)|0)+Math.imul(l,ue)|0))<<13)|0;c=((a=a+Math.imul(l,le)|0)+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,s=Math.imul(D,F),r=(r=Math.imul(D,j))+Math.imul(q,F)|0,a=Math.imul(q,j),s=s+Math.imul(R,H)|0,r=(r=r+Math.imul(R,z)|0)+Math.imul(V,H)|0,a=a+Math.imul(V,z)|0,s=s+Math.imul(E,W)|0,r=(r=r+Math.imul(E,X)|0)+Math.imul(P,W)|0,a=a+Math.imul(P,X)|0,s=s+Math.imul(A,Y)|0,r=(r=r+Math.imul(A,Q)|0)+Math.imul(C,Y)|0,a=a+Math.imul(C,Q)|0,s=s+Math.imul(T,$)|0,r=(r=r+Math.imul(T,ee)|0)+Math.imul(x,$)|0,a=a+Math.imul(x,ee)|0,s=s+Math.imul(S,ie)|0,r=(r=r+Math.imul(S,se)|0)+Math.imul(O,ie)|0,a=a+Math.imul(O,se)|0,s=s+Math.imul(w,ae)|0,r=(r=r+Math.imul(w,ne)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,ne)|0,s=s+Math.imul(y,he)|0,r=(r=r+Math.imul(y,ce)|0)+Math.imul(b,he)|0,a=a+Math.imul(b,ce)|0,s=s+Math.imul(p,ue)|0,r=(r=r+Math.imul(p,le)|0)+Math.imul(m,ue)|0,a=a+Math.imul(m,le)|0;var Me=(c+(s=s+Math.imul(u,pe)|0)|0)+((8191&(r=(r=r+Math.imul(u,me)|0)+Math.imul(l,pe)|0))<<13)|0;c=((a=a+Math.imul(l,me)|0)+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,s=Math.imul(D,H),r=(r=Math.imul(D,z))+Math.imul(q,H)|0,a=Math.imul(q,z),s=s+Math.imul(R,W)|0,r=(r=r+Math.imul(R,X)|0)+Math.imul(V,W)|0,a=a+Math.imul(V,X)|0,s=s+Math.imul(E,Y)|0,r=(r=r+Math.imul(E,Q)|0)+Math.imul(P,Y)|0,a=a+Math.imul(P,Q)|0,s=s+Math.imul(A,$)|0,r=(r=r+Math.imul(A,ee)|0)+Math.imul(C,$)|0,a=a+Math.imul(C,ee)|0,s=s+Math.imul(T,ie)|0,r=(r=r+Math.imul(T,se)|0)+Math.imul(x,ie)|0,a=a+Math.imul(x,se)|0,s=s+Math.imul(S,ae)|0,r=(r=r+Math.imul(S,ne)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,ne)|0,s=s+Math.imul(w,he)|0,r=(r=r+Math.imul(w,ce)|0)+Math.imul(k,he)|0,a=a+Math.imul(k,ce)|0,s=s+Math.imul(y,ue)|0,r=(r=r+Math.imul(y,le)|0)+Math.imul(b,ue)|0,a=a+Math.imul(b,le)|0;var Te=(c+(s=s+Math.imul(p,pe)|0)|0)+((8191&(r=(r=r+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,s=Math.imul(D,W),r=(r=Math.imul(D,X))+Math.imul(q,W)|0,a=Math.imul(q,X),s=s+Math.imul(R,Y)|0,r=(r=r+Math.imul(R,Q)|0)+Math.imul(V,Y)|0,a=a+Math.imul(V,Q)|0,s=s+Math.imul(E,$)|0,r=(r=r+Math.imul(E,ee)|0)+Math.imul(P,$)|0,a=a+Math.imul(P,ee)|0,s=s+Math.imul(A,ie)|0,r=(r=r+Math.imul(A,se)|0)+Math.imul(C,ie)|0,a=a+Math.imul(C,se)|0,s=s+Math.imul(T,ae)|0,r=(r=r+Math.imul(T,ne)|0)+Math.imul(x,ae)|0,a=a+Math.imul(x,ne)|0,s=s+Math.imul(S,he)|0,r=(r=r+Math.imul(S,ce)|0)+Math.imul(O,he)|0,a=a+Math.imul(O,ce)|0,s=s+Math.imul(w,ue)|0,r=(r=r+Math.imul(w,le)|0)+Math.imul(k,ue)|0,a=a+Math.imul(k,le)|0;var xe=(c+(s=s+Math.imul(y,pe)|0)|0)+((8191&(r=(r=r+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;c=((a=a+Math.imul(b,me)|0)+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,s=Math.imul(D,Y),r=(r=Math.imul(D,Q))+Math.imul(q,Y)|0,a=Math.imul(q,Q),s=s+Math.imul(R,$)|0,r=(r=r+Math.imul(R,ee)|0)+Math.imul(V,$)|0,a=a+Math.imul(V,ee)|0,s=s+Math.imul(E,ie)|0,r=(r=r+Math.imul(E,se)|0)+Math.imul(P,ie)|0,a=a+Math.imul(P,se)|0,s=s+Math.imul(A,ae)|0,r=(r=r+Math.imul(A,ne)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,ne)|0,s=s+Math.imul(T,he)|0,r=(r=r+Math.imul(T,ce)|0)+Math.imul(x,he)|0,a=a+Math.imul(x,ce)|0,s=s+Math.imul(S,ue)|0,r=(r=r+Math.imul(S,le)|0)+Math.imul(O,ue)|0,a=a+Math.imul(O,le)|0;var Ie=(c+(s=s+Math.imul(w,pe)|0)|0)+((8191&(r=(r=r+Math.imul(w,me)|0)+Math.imul(k,pe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,s=Math.imul(D,$),r=(r=Math.imul(D,ee))+Math.imul(q,$)|0,a=Math.imul(q,ee),s=s+Math.imul(R,ie)|0,r=(r=r+Math.imul(R,se)|0)+Math.imul(V,ie)|0,a=a+Math.imul(V,se)|0,s=s+Math.imul(E,ae)|0,r=(r=r+Math.imul(E,ne)|0)+Math.imul(P,ae)|0,a=a+Math.imul(P,ne)|0,s=s+Math.imul(A,he)|0,r=(r=r+Math.imul(A,ce)|0)+Math.imul(C,he)|0,a=a+Math.imul(C,ce)|0,s=s+Math.imul(T,ue)|0,r=(r=r+Math.imul(T,le)|0)+Math.imul(x,ue)|0,a=a+Math.imul(x,le)|0;var Ae=(c+(s=s+Math.imul(S,pe)|0)|0)+((8191&(r=(r=r+Math.imul(S,me)|0)+Math.imul(O,pe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,s=Math.imul(D,ie),r=(r=Math.imul(D,se))+Math.imul(q,ie)|0,a=Math.imul(q,se),s=s+Math.imul(R,ae)|0,r=(r=r+Math.imul(R,ne)|0)+Math.imul(V,ae)|0,a=a+Math.imul(V,ne)|0,s=s+Math.imul(E,he)|0,r=(r=r+Math.imul(E,ce)|0)+Math.imul(P,he)|0,a=a+Math.imul(P,ce)|0,s=s+Math.imul(A,ue)|0,r=(r=r+Math.imul(A,le)|0)+Math.imul(C,ue)|0,a=a+Math.imul(C,le)|0;var Ce=(c+(s=s+Math.imul(T,pe)|0)|0)+((8191&(r=(r=r+Math.imul(T,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((a=a+Math.imul(x,me)|0)+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,s=Math.imul(D,ae),r=(r=Math.imul(D,ne))+Math.imul(q,ae)|0,a=Math.imul(q,ne),s=s+Math.imul(R,he)|0,r=(r=r+Math.imul(R,ce)|0)+Math.imul(V,he)|0,a=a+Math.imul(V,ce)|0,s=s+Math.imul(E,ue)|0,r=(r=r+Math.imul(E,le)|0)+Math.imul(P,ue)|0,a=a+Math.imul(P,le)|0;var Ne=(c+(s=s+Math.imul(A,pe)|0)|0)+((8191&(r=(r=r+Math.imul(A,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((a=a+Math.imul(C,me)|0)+(r>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,s=Math.imul(D,he),r=(r=Math.imul(D,ce))+Math.imul(q,he)|0,a=Math.imul(q,ce),s=s+Math.imul(R,ue)|0,r=(r=r+Math.imul(R,le)|0)+Math.imul(V,ue)|0,a=a+Math.imul(V,le)|0;var Ee=(c+(s=s+Math.imul(E,pe)|0)|0)+((8191&(r=(r=r+Math.imul(E,me)|0)+Math.imul(P,pe)|0))<<13)|0;c=((a=a+Math.imul(P,me)|0)+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,s=Math.imul(D,ue),r=(r=Math.imul(D,le))+Math.imul(q,ue)|0,a=Math.imul(q,le);var Pe=(c+(s=s+Math.imul(R,pe)|0)|0)+((8191&(r=(r=r+Math.imul(R,me)|0)+Math.imul(V,pe)|0))<<13)|0;c=((a=a+Math.imul(V,me)|0)+(r>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Be=(c+(s=Math.imul(D,pe))|0)+((8191&(r=(r=Math.imul(D,me))+Math.imul(q,pe)|0))<<13)|0;return c=((a=Math.imul(q,me))+(r>>>13)|0)+(Be>>>26)|0,Be&=67108863,h[0]=ge,h[1]=ye,h[2]=be,h[3]=ve,h[4]=we,h[5]=ke,h[6]=_e,h[7]=Se,h[8]=Oe,h[9]=Me,h[10]=Te,h[11]=xe,h[12]=Ie,h[13]=Ae,h[14]=Ce,h[15]=Ne,h[16]=Ee,h[17]=Pe,h[18]=Be,0!==c&&(h[19]=c,i.length++),i};function m(e,t,i){return(new g).mulp(e,t,i)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=f),a.prototype.mulTo=function(e,t){var i=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):i<63?f(this,e,t):i<1024?function(e,t,i){i.negative=t.negative^e.negative,i.length=e.length+t.length;for(var s=0,r=0,a=0;a<i.length-1;a++){var n=r;r=0;for(var o=67108863&s,h=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=h;c++){var d=a-c,u=(0|e.words[d])*(0|t.words[c]),l=67108863&u;o=67108863&(l=l+o|0),r+=(n=(n=n+(u/67108864|0)|0)+(l>>>26)|0)>>>26,n&=67108863}i.words[a]=o,s=n,n=r}return 0!==s?i.words[a]=s:i.length--,i.strip()}(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),i=a.prototype._countBits(e)-1,s=0;s<e;s++)t[s]=this.revBin(s,i,e);return t},g.prototype.revBin=function(e,t,i){if(0===e||e===i-1)return e;for(var s=0,r=0;r<t;r++)s|=(1&e)<<t-r-1,e>>=1;return s},g.prototype.permute=function(e,t,i,s,r,a){for(var n=0;n<a;n++)s[n]=t[e[n]],r[n]=i[e[n]]},g.prototype.transform=function(e,t,i,s,r,a){this.permute(a,e,t,i,s,r);for(var n=1;n<r;n<<=1)for(var o=n<<1,h=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),d=0;d<r;d+=o)for(var u=h,l=c,f=0;f<n;f++){var p=i[d+f],m=s[d+f],g=i[d+f+n],y=s[d+f+n],b=u*g-l*y;y=u*y+l*g,g=b,i[d+f]=p+g,s[d+f]=m+y,i[d+f+n]=p-g,s[d+f+n]=m-y,f!==o&&(b=h*u-c*l,l=h*l+c*u,u=b)}},g.prototype.guessLen13b=function(e,t){var i=1|Math.max(t,e),s=1&i,r=0;for(i=i/2|0;i;i>>>=1)r++;return 1<<r+1+s},g.prototype.conjugate=function(e,t,i){if(!(i<=1))for(var s=0;s<i/2;s++){var r=e[s];e[s]=e[i-s-1],e[i-s-1]=r,r=t[s],t[s]=-t[i-s-1],t[i-s-1]=-r}},g.prototype.normalize13b=function(e,t){for(var i=0,s=0;s<t/2;s++){var r=8192*Math.round(e[2*s+1]/t)+Math.round(e[2*s]/t)+i;e[s]=67108863&r,i=r<67108864?0:r/67108864|0}return e},g.prototype.convert13b=function(e,t,i,r){for(var a=0,n=0;n<t;n++)a+=0|e[n],i[2*n]=8191&a,a>>>=13,i[2*n+1]=8191&a,a>>>=13;for(n=2*t;n<r;++n)i[n]=0;s(0===a),s(0==(-8192&a))},g.prototype.stub=function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=0;return t},g.prototype.mulp=function(e,t,i){var s=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(s),a=this.stub(s),n=new Array(s),o=new Array(s),h=new Array(s),c=new Array(s),d=new Array(s),u=new Array(s),l=i.words;l.length=s,this.convert13b(e.words,e.length,n,s),this.convert13b(t.words,t.length,c,s),this.transform(n,a,o,h,s,r),this.transform(c,a,d,u,s,r);for(var f=0;f<s;f++){var p=o[f]*d[f]-h[f]*u[f];h[f]=o[f]*u[f]+h[f]*d[f],o[f]=p}return this.conjugate(o,h,s),this.transform(o,h,l,a,s,r),this.conjugate(l,a,s),this.normalize13b(l,s),i.negative=e.negative^t.negative,i.length=e.length+t.length,i.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),m(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){s("number"==typeof e),s(e<67108864);for(var t=0,i=0;i<this.length;i++){var r=(0|this.words[i])*e,a=(67108863&r)+(67108863&t);t>>=26,t+=r/67108864|0,t+=a>>>26,this.words[i]=67108863&a}return 0!==t&&(this.words[i]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),i=0;i<t.length;i++){var s=i/26|0,r=i%26;t[i]=(e.words[s]&1<<r)>>>r}return t}(e);if(0===t.length)return new a(1);for(var i=this,s=0;s<t.length&&0===t[s];s++,i=i.sqr());if(++s<t.length)for(var r=i.sqr();s<t.length;s++,r=r.sqr())0!==t[s]&&(i=i.mul(r));return i},a.prototype.iushln=function(e){s("number"==typeof e&&e>=0);var t,i=e%26,r=(e-i)/26,a=67108863>>>26-i<<26-i;if(0!==i){var n=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,h=(0|this.words[t])-o<<i;this.words[t]=h|n,n=o>>>26-i}n&&(this.words[t]=n,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this.strip()},a.prototype.ishln=function(e){return s(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,i){var r;s("number"==typeof e&&e>=0),r=t?(t-t%26)/26:0;var a=e%26,n=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,h=i;if(r-=n,r=Math.max(0,r),h){for(var c=0;c<n;c++)h.words[c]=this.words[c];h.length=n}if(0===n);else if(this.length>n)for(this.length-=n,c=0;c<this.length;c++)this.words[c]=this.words[c+n];else this.words[0]=0,this.length=1;var d=0;for(c=this.length-1;c>=0&&(0!==d||c>=r);c--){var u=0|this.words[c];this.words[c]=d<<26-a|u>>>a,d=u&o}return h&&0!==d&&(h.words[h.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,i){return s(0===this.negative),this.iushrn(e,t,i)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,r=1<<t;return!(this.length<=i||!(this.words[i]&r))},a.prototype.imaskn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this.strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return s("number"==typeof e),s(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(s("number"==typeof e),s(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,i){var r,a,n=e.length+i;this._expand(n);var o=0;for(r=0;r<e.length;r++){a=(0|this.words[r+i])+o;var h=(0|e.words[r])*t;o=((a-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&a}for(;r<this.length-i;r++)o=(a=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&a;if(0===o)return this.strip();for(s(-1===o),o=0,r=0;r<this.length;r++)o=(a=-(0|this.words[r])+o)>>26,this.words[r]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var i=(this.length,e.length),s=this.clone(),r=e,n=0|r.words[r.length-1];0!=(i=26-this._countBits(n))&&(r=r.ushln(i),s.iushln(i),n=0|r.words[r.length-1]);var o,h=s.length-r.length;if("mod"!==t){(o=new a(null)).length=h+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var d=s.clone()._ishlnsubmul(r,1,h);0===d.negative&&(s=d,o&&(o.words[h]=1));for(var u=h-1;u>=0;u--){var l=67108864*(0|s.words[r.length+u])+(0|s.words[r.length+u-1]);for(l=Math.min(l/n|0,67108863),s._ishlnsubmul(r,l,u);0!==s.negative;)l--,s.negative=0,s._ishlnsubmul(r,1,u),s.isZero()||(s.negative^=1);o&&(o.words[u]=l)}return o&&o.strip(),s.strip(),"div"!==t&&0!==i&&s.iushrn(i),{div:o||null,mod:s}},a.prototype.divmod=function(e,t,i){return s(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(r=o.div.neg()),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.iadd(e)),{div:r,mod:n}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.isub(e)),{div:o.div,mod:n}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t);var r,n,o},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var i=0!==t.div.negative?t.mod.isub(e):t.mod,s=e.ushrn(1),r=e.andln(1),a=i.cmp(s);return a<0||1===r&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modn=function(e){s(e<=67108863);for(var t=(1<<26)%e,i=0,r=this.length-1;r>=0;r--)i=(t*i+(0|this.words[r]))%e;return i},a.prototype.idivn=function(e){s(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*t;this.words[i]=r/e|0,t=r%e}return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new a(1),n=new a(0),o=new a(0),h=new a(1),c=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++c;for(var d=i.clone(),u=t.clone();!t.isZero();){for(var l=0,f=1;0==(t.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(d),n.isub(u)),r.iushrn(1),n.iushrn(1);for(var p=0,m=1;0==(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(d),h.isub(u)),o.iushrn(1),h.iushrn(1);t.cmp(i)>=0?(t.isub(i),r.isub(o),n.isub(h)):(i.isub(t),o.isub(r),h.isub(n))}return{a:o,b:h,gcd:i.iushln(c)}},a.prototype._invmp=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,n=new a(1),o=new a(0),h=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,d=1;0==(t.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(t.iushrn(c);c-- >0;)n.isOdd()&&n.iadd(h),n.iushrn(1);for(var u=0,l=1;0==(i.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(i.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);t.cmp(i)>=0?(t.isub(i),n.isub(o)):(i.isub(t),o.isub(n))}return(r=0===t.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(e),r},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),i=e.clone();t.negative=0,i.negative=0;for(var s=0;t.isEven()&&i.isEven();s++)t.iushrn(1),i.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=t.cmp(i);if(r<0){var a=t;t=i,i=a}else if(0===r||0===i.cmpn(1))break;t.isub(i)}return i.iushln(s)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){s("number"==typeof e);var t=e%26,i=(e-t)/26,r=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var a=r,n=i;0!==a&&n<this.length;n++){var o=0|this.words[n];a=(o+=a)>>>26,o&=67108863,this.words[n]=o}return 0!==a&&(this.words[n]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),s(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,i=this.length-1;i>=0;i--){var s=0|this.words[i],r=0|e.words[i];if(s!==r){s<r?t=-1:s>r&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new S(e)},a.prototype.toRed=function(e){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return s(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return s(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else s(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function O(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,i=e;do{this.split(i,this.tmp),t=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(t>this.n);var s=t<this.n?-1:i.ucmp(this.p);return 0===s?(i.words[0]=0,i.length=1):s>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},r(v,b),v.prototype.split=function(e,t){for(var i=4194303,s=Math.min(e.length,9),r=0;r<s;r++)t.words[r]=e.words[r];if(t.length=s,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&i,r=10;r<e.length;r++){var n=0|e.words[r];e.words[r-10]=(n&i)<<4|a>>>22,a=n}a>>>=22,e.words[r-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,i=0;i<e.length;i++){var s=0|e.words[i];t+=977*s,e.words[i]=67108863&t,t=64*s+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(w,b),r(k,b),r(_,b),_.prototype.imulK=function(e){for(var t=0,i=0;i<e.length;i++){var s=19*(0|e.words[i])+t,r=67108863&s;s>>>=26,e.words[i]=r,t=s}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new w;else if("p192"===e)t=new k;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return y[e]=t,t},S.prototype._verify1=function(e){s(0===e.negative,"red works only with positives"),s(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){s(0==(e.negative|t.negative),"red works only with positives"),s(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var i=e.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var i=e.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i},S.prototype.sub=function(e,t){this._verify2(e,t);var i=e.sub(t);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var i=e.isub(t);return i.cmpn(0)<0&&i.iadd(this.m),i},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(s(t%2==1),3===t){var i=this.m.add(new a(1)).iushrn(2);return this.pow(e,i)}for(var r=this.m.subn(1),n=0;!r.isZero()&&0===r.andln(1);)n++,r.iushrn(1);s(!r.isZero());var o=new a(1).toRed(this),h=o.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);0!==this.pow(d,c).cmp(h);)d.redIAdd(h);for(var u=this.pow(d,r),l=this.pow(e,r.addn(1).iushrn(1)),f=this.pow(e,r),p=n;0!==f.cmp(o);){for(var m=f,g=0;0!==m.cmp(o);g++)m=m.redSqr();s(g<p);var y=this.pow(u,new a(1).iushln(p-g-1));l=l.redMul(y),u=y.redSqr(),f=f.redMul(u),p=g}return l},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var i=new Array(16);i[0]=new a(1).toRed(this),i[1]=e;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],e);var r=i[0],n=0,o=0,h=t.bitLength()%26;for(0===h&&(h=26),s=t.length-1;s>=0;s--){for(var c=t.words[s],d=h-1;d>=0;d--){var u=c>>d&1;r!==i[0]&&(r=this.sqr(r)),0!==u||0!==n?(n<<=1,n|=u,(4==++o||0===s&&0===d)&&(r=this.mul(r,i[n]),o=0,n=0)):o=0}h=26}return r},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new O(e)},r(O,S),O.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},O.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},O.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var i=e.imul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},O.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var i=e.mul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n._forceRed(this)},O.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=i.nmd(e),this)},23482:(e,t,i)=>{"use strict";var s=i(35717),r=i(62318),a=i(79785),n=i(89072),o=i(71027);function h(e){o.call(this,"digest"),this._hash=e}s(h,o),h.prototype._update=function(e){this._hash.update(e)},h.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new r:"rmd160"===e||"ripemd160"===e?new a:new h(n(e))}},78028:(e,t,i)=>{var s=i(62318);e.exports=function(e){return(new s).update(e).digest()}},58355:(e,t,i)=>{"use strict";var s=i(35717),r=i(51031),a=i(71027),n=i(89509).Buffer,o=i(78028),h=i(79785),c=i(89072),d=n.alloc(128);function u(e,t){a.call(this,"digest"),"string"==typeof t&&(t=n.from(t));var i="sha512"===e||"sha384"===e?128:64;this._alg=e,this._key=t,t.length>i?t=("rmd160"===e?new h:c(e)).update(t).digest():t.length<i&&(t=n.concat([t,d],i));for(var s=this._ipad=n.allocUnsafe(i),r=this._opad=n.allocUnsafe(i),o=0;o<i;o++)s[o]=54^t[o],r[o]=92^t[o];this._hash="rmd160"===e?new h:c(e),this._hash.update(s)}s(u,a),u.prototype._update=function(e){this._hash.update(e)},u.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new h:c(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new u("rmd160",t):"md5"===e?new r(o,t):new u(e,t)}},51031:(e,t,i)=>{"use strict";var s=i(35717),r=i(89509).Buffer,a=i(71027),n=r.alloc(128),o=64;function h(e,t){a.call(this,"digest"),"string"==typeof t&&(t=r.from(t)),this._alg=e,this._key=t,t.length>o?t=e(t):t.length<o&&(t=r.concat([t,n],o));for(var i=this._ipad=r.allocUnsafe(o),s=this._opad=r.allocUnsafe(o),h=0;h<o;h++)i[h]=54^t[h],s[h]=92^t[h];this._hash=[i]}s(h,a),h.prototype._update=function(e){this._hash.push(e)},h.prototype._final=function(){var e=this._alg(r.concat(this._hash));return this._alg(r.concat([this._opad,e]))},e.exports=h},55835:(e,t,i)=>{"use strict";t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=i(61798),t.createHash=t.Hash=i(23482),t.createHmac=t.Hmac=i(58355);var s=i(56042),r=Object.keys(s),a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(r);t.getHashes=function(){return a};var n=i(25632);t.pbkdf2=n.pbkdf2,t.pbkdf2Sync=n.pbkdf2Sync;var o=i(53614);t.Cipher=o.Cipher,t.createCipher=o.createCipher,t.Cipheriv=o.Cipheriv,t.createCipheriv=o.createCipheriv,t.Decipher=o.Decipher,t.createDecipher=o.createDecipher,t.Decipheriv=o.Decipheriv,t.createDecipheriv=o.createDecipheriv,t.getCiphers=o.getCiphers,t.listCiphers=o.listCiphers;var h=i(62607);t.DiffieHellmanGroup=h.DiffieHellmanGroup,t.createDiffieHellmanGroup=h.createDiffieHellmanGroup,t.getDiffieHellman=h.getDiffieHellman,t.createDiffieHellman=h.createDiffieHellman,t.DiffieHellman=h.DiffieHellman;var c=i(64743);t.createSign=c.createSign,t.Sign=c.Sign,t.createVerify=c.createVerify,t.Verify=c.Verify,t.createECDH=i(76393);var d=i(7900);t.publicEncrypt=d.publicEncrypt,t.privateEncrypt=d.privateEncrypt,t.publicDecrypt=d.publicDecrypt,t.privateDecrypt=d.privateDecrypt;var u=i(77963);t.randomFill=u.randomFill,t.randomFillSync=u.randomFillSync,t.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},t.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},40452:function(e,t,i){var s;e.exports=(s=i(78249),i(98269),i(68214),i(90888),i(75109),function(){var e=s,t=e.lib.BlockCipher,i=e.algo,r=[],a=[],n=[],o=[],h=[],c=[],d=[],u=[],l=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var i=0,s=0;for(t=0;t<256;t++){var p=s^s<<1^s<<2^s<<3^s<<4;p=p>>>8^255&p^99,r[i]=p,a[p]=i;var m=e[i],g=e[m],y=e[g],b=257*e[p]^16843008*p;n[i]=b<<24|b>>>8,o[i]=b<<16|b>>>16,h[i]=b<<8|b>>>24,c[i]=b,b=16843009*y^65537*g^257*m^16843008*i,d[p]=b<<24|b>>>8,u[p]=b<<16|b>>>16,l[p]=b<<8|b>>>24,f[p]=b,i?(i=m^e[e[e[y^m]]],s^=e[e[s]]):i=s=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],m=i.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,s=4*((this._nRounds=i+6)+1),a=this._keySchedule=[],n=0;n<s;n++)n<i?a[n]=t[n]:(c=a[n-1],n%i?i>6&&n%i==4&&(c=r[c>>>24]<<24|r[c>>>16&255]<<16|r[c>>>8&255]<<8|r[255&c]):(c=r[(c=c<<8|c>>>24)>>>24]<<24|r[c>>>16&255]<<16|r[c>>>8&255]<<8|r[255&c],c^=p[n/i|0]<<24),a[n]=a[n-i]^c);for(var o=this._invKeySchedule=[],h=0;h<s;h++){if(n=s-h,h%4)var c=a[n];else c=a[n-4];o[h]=h<4||n<=4?c:d[r[c>>>24]]^u[r[c>>>16&255]]^l[r[c>>>8&255]]^f[r[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,n,o,h,c,r)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,d,u,l,f,a),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,s,r,a,n,o){for(var h=this._nRounds,c=e[t]^i[0],d=e[t+1]^i[1],u=e[t+2]^i[2],l=e[t+3]^i[3],f=4,p=1;p<h;p++){var m=s[c>>>24]^r[d>>>16&255]^a[u>>>8&255]^n[255&l]^i[f++],g=s[d>>>24]^r[u>>>16&255]^a[l>>>8&255]^n[255&c]^i[f++],y=s[u>>>24]^r[l>>>16&255]^a[c>>>8&255]^n[255&d]^i[f++],b=s[l>>>24]^r[c>>>16&255]^a[d>>>8&255]^n[255&u]^i[f++];c=m,d=g,u=y,l=b}m=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[u>>>8&255]<<8|o[255&l])^i[f++],g=(o[d>>>24]<<24|o[u>>>16&255]<<16|o[l>>>8&255]<<8|o[255&c])^i[f++],y=(o[u>>>24]<<24|o[l>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^i[f++],b=(o[l>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&u])^i[f++],e[t]=m,e[t+1]=g,e[t+2]=y,e[t+3]=b},keySize:8});e.AES=t._createHelper(m)}(),s.AES)},75109:function(e,t,i){var s,r,a,n,o,h,c,d,u,l,f,p,m,g,y,b,v,w,k;e.exports=(s=i(78249),i(90888),void(s.lib.Cipher||(r=s,a=r.lib,n=a.Base,o=a.WordArray,h=a.BufferedBlockAlgorithm,c=r.enc,c.Utf8,d=c.Base64,u=r.algo.EvpKDF,l=a.Cipher=h.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){h.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?k:v}return function(t){return{encrypt:function(i,s,r){return e(s).encrypt(t,i,s,r)},decrypt:function(i,s,r){return e(s).decrypt(t,i,s,r)}}}}()}),a.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f=r.mode={},p=a.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),m=f.CBC=function(){var e=p.extend();function t(e,t,i){var s,r=this._iv;r?(s=r,this._iv=void 0):s=this._prevBlock;for(var a=0;a<i;a++)e[t+a]^=s[a]}return e.Encryptor=e.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize;t.call(this,e,i,r),s.encryptBlock(e,i),this._prevBlock=e.slice(i,i+r)}}),e.Decryptor=e.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize,a=e.slice(i,i+r);s.decryptBlock(e,i),t.call(this,e,i,r),this._prevBlock=a}}),e}(),g=(r.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,s=i-e.sigBytes%i,r=s<<24|s<<16|s<<8|s,a=[],n=0;n<s;n+=4)a.push(r);var h=o.create(a,s);e.concat(h)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},a.BlockCipher=l.extend({cfg:l.cfg.extend({mode:m,padding:g}),reset:function(){var e;l.reset.call(this);var t=this.cfg,i=t.iv,s=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=s.createEncryptor:(e=s.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,i&&i.words):(this._mode=e.call(s,this,i&&i.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),y=a.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),b=(r.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;return(i?o.create([1398893684,1701076831]).concat(i).concat(t):t).toString(d)},parse:function(e){var t,i=d.parse(e),s=i.words;return 1398893684==s[0]&&1701076831==s[1]&&(t=o.create(s.slice(2,4)),s.splice(0,4),i.sigBytes-=16),y.create({ciphertext:i,salt:t})}},v=a.SerializableCipher=n.extend({cfg:n.extend({format:b}),encrypt:function(e,t,i,s){s=this.cfg.extend(s);var r=e.createEncryptor(i,s),a=r.finalize(t),n=r.cfg;return y.create({ciphertext:a,key:i,iv:n.iv,algorithm:e,mode:n.mode,padding:n.padding,blockSize:e.blockSize,formatter:s.format})},decrypt:function(e,t,i,s){return s=this.cfg.extend(s),t=this._parse(t,s.format),e.createDecryptor(i,s).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),w=(r.kdf={}).OpenSSL={execute:function(e,t,i,s){s||(s=o.random(8));var r=u.create({keySize:t+i}).compute(e,s),a=o.create(r.words.slice(t),4*i);return r.sigBytes=4*t,y.create({key:r,iv:a,salt:s})}},k=a.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:w}),encrypt:function(e,t,i,s){var r=(s=this.cfg.extend(s)).kdf.execute(i,e.keySize,e.ivSize);s.iv=r.iv;var a=v.encrypt.call(this,e,t,r.key,s);return a.mixIn(r),a},decrypt:function(e,t,i,s){s=this.cfg.extend(s),t=this._parse(t,s.format);var r=s.kdf.execute(i,e.keySize,e.ivSize,t.salt);return s.iv=r.iv,v.decrypt.call(this,e,t,r.key,s)}}))))},78249:function(e,t,i){var s;e.exports=s=s||function(e,t){var s;if("undefined"!=typeof window&&window.crypto&&(s=window.crypto),!s&&"undefined"!=typeof window&&window.msCrypto&&(s=window.msCrypto),!s&&void 0!==i.g&&i.g.crypto&&(s=i.g.crypto),!s)try{s=i(55835)}catch(e){}var r=function(){if(s){if("function"==typeof s.getRandomValues)try{return s.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof s.randomBytes)try{return s.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),n={},o=n.lib={},h=o.Base={extend:function(e){var t=a(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=o.WordArray=h.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,i=e.words,s=this.sigBytes,r=e.sigBytes;if(this.clamp(),s%4)for(var a=0;a<r;a++){var n=i[a>>>2]>>>24-a%4*8&255;t[s+a>>>2]|=n<<24-(s+a)%4*8}else for(a=0;a<r;a+=4)t[s+a>>>2]=i[a>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=h.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],i=0;i<e;i+=4)t.push(r());return new c.init(t,e)}}),d=n.enc={},u=d.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],r=0;r<i;r++){var a=t[r>>>2]>>>24-r%4*8&255;s.push((a>>>4).toString(16)),s.push((15&a).toString(16))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s+=2)i[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new c.init(i,t/2)}},l=d.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],r=0;r<i;r++){var a=t[r>>>2]>>>24-r%4*8&255;s.push(String.fromCharCode(a))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new c.init(i,t)}},f=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},p=o.BufferedBlockAlgorithm=h.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i,s=this._data,r=s.words,a=s.sigBytes,n=this.blockSize,o=a/(4*n),h=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*n,d=e.min(4*h,a);if(h){for(var u=0;u<h;u+=n)this._doProcessBlock(r,u);i=r.splice(0,h),s.sigBytes-=d}return new c.init(i,d)},clone:function(){var e=h.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(o.Hasher=p.extend({cfg:h.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new m.HMAC.init(e,i).finalize(t)}}}),n.algo={});return n}(Math)},98269:function(e,t,i){var s,r,a;e.exports=(s=i(78249),a=(r=s).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,s=this._map;e.clamp();for(var r=[],a=0;a<i;a+=3)for(var n=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,o=0;o<4&&a+.75*o<i;o++)r.push(s.charAt(n>>>6*(3-o)&63));var h=s.charAt(64);if(h)for(;r.length%4;)r.push(h);return r.join("")},parse:function(e){var t=e.length,i=this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var r=0;r<i.length;r++)s[i.charCodeAt(r)]=r}var n=i.charAt(64);if(n){var o=e.indexOf(n);-1!==o&&(t=o)}return function(e,t,i){for(var s=[],r=0,n=0;n<t;n++)if(n%4){var o=i[e.charCodeAt(n-1)]<<n%4*2|i[e.charCodeAt(n)]>>>6-n%4*2;s[r>>>2]|=o<<24-r%4*8,r++}return a.create(s,r)}(e,t,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},s.enc.Base64)},50298:function(e,t,i){var s;e.exports=(s=i(78249),function(){var e=s,t=e.lib.WordArray,i=e.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],r=0;r<i;r+=2){var a=t[r>>>2]>>>16-r%4*8&65535;s.push(String.fromCharCode(a))}return s.join("")},parse:function(e){for(var i=e.length,s=[],r=0;r<i;r++)s[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return t.create(s,2*i)}},i.Utf16LE={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],a=0;a<i;a+=2){var n=r(t[a>>>2]>>>16-a%4*8&65535);s.push(String.fromCharCode(n))}return s.join("")},parse:function(e){for(var i=e.length,s=[],a=0;a<i;a++)s[a>>>1]|=r(e.charCodeAt(a)<<16-a%2*16);return t.create(s,2*i)}}}(),s.enc.Utf16)},90888:function(e,t,i){var s,r,a,n,o,h,c,d;e.exports=(d=i(78249),i(62783),i(89824),a=(r=(s=d).lib).Base,n=r.WordArray,h=(o=s.algo).MD5,c=o.EvpKDF=a.extend({cfg:a.extend({keySize:4,hasher:h,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i,s=this.cfg,r=s.hasher.create(),a=n.create(),o=a.words,h=s.keySize,c=s.iterations;o.length<h;){i&&r.update(i),i=r.update(e).finalize(t),r.reset();for(var d=1;d<c;d++)i=r.finalize(i),r.reset();a.concat(i)}return a.sigBytes=4*h,a}}),s.EvpKDF=function(e,t,i){return c.create(i).compute(e,t)},d.EvpKDF)},42209:function(e,t,i){var s,r,a,n;e.exports=(n=i(78249),i(75109),r=(s=n).lib.CipherParams,a=s.enc.Hex,s.format.Hex={stringify:function(e){return e.ciphertext.toString(a)},parse:function(e){var t=a.parse(e);return r.create({ciphertext:t})}},n.format.Hex)},89824:function(e,t,i){var s,r,a;e.exports=(r=(s=i(78249)).lib.Base,a=s.enc.Utf8,void(s.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=a.parse(t));var i=e.blockSize,s=4*i;t.sigBytes>s&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),n=this._iKey=t.clone(),o=r.words,h=n.words,c=0;c<i;c++)o[c]^=1549556828,h[c]^=909522486;r.sigBytes=n.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})))},81354:function(e,t,i){var s;e.exports=(s=i(78249),i(64938),i(4433),i(50298),i(98269),i(68214),i(62783),i(52153),i(87792),i(70034),i(17460),i(13327),i(30706),i(89824),i(2112),i(90888),i(75109),i(8568),i(74242),i(59968),i(27660),i(31148),i(43615),i(92807),i(71077),i(56475),i(16991),i(42209),i(40452),i(94253),i(51857),i(84454),i(93974),s)},4433:function(e,t,i){var s;e.exports=(s=i(78249),function(){if("function"==typeof ArrayBuffer){var e=s.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var i=e.byteLength,s=[],r=0;r<i;r++)s[r>>>2]|=e[r]<<24-r%4*8;t.call(this,s,i)}else t.apply(this,arguments)}).prototype=e}}(),s.lib.WordArray)},68214:function(e,t,i){var s;e.exports=(s=i(78249),function(e){var t=s,i=t.lib,r=i.WordArray,a=i.Hasher,n=t.algo,o=[];!function(){for(var t=0;t<64;t++)o[t]=4294967296*e.abs(e.sin(t+1))|0}();var h=n.MD5=a.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=t+i,r=e[s];e[s]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var a=this._hash.words,n=e[t+0],h=e[t+1],f=e[t+2],p=e[t+3],m=e[t+4],g=e[t+5],y=e[t+6],b=e[t+7],v=e[t+8],w=e[t+9],k=e[t+10],_=e[t+11],S=e[t+12],O=e[t+13],M=e[t+14],T=e[t+15],x=a[0],I=a[1],A=a[2],C=a[3];x=c(x,I,A,C,n,7,o[0]),C=c(C,x,I,A,h,12,o[1]),A=c(A,C,x,I,f,17,o[2]),I=c(I,A,C,x,p,22,o[3]),x=c(x,I,A,C,m,7,o[4]),C=c(C,x,I,A,g,12,o[5]),A=c(A,C,x,I,y,17,o[6]),I=c(I,A,C,x,b,22,o[7]),x=c(x,I,A,C,v,7,o[8]),C=c(C,x,I,A,w,12,o[9]),A=c(A,C,x,I,k,17,o[10]),I=c(I,A,C,x,_,22,o[11]),x=c(x,I,A,C,S,7,o[12]),C=c(C,x,I,A,O,12,o[13]),A=c(A,C,x,I,M,17,o[14]),x=d(x,I=c(I,A,C,x,T,22,o[15]),A,C,h,5,o[16]),C=d(C,x,I,A,y,9,o[17]),A=d(A,C,x,I,_,14,o[18]),I=d(I,A,C,x,n,20,o[19]),x=d(x,I,A,C,g,5,o[20]),C=d(C,x,I,A,k,9,o[21]),A=d(A,C,x,I,T,14,o[22]),I=d(I,A,C,x,m,20,o[23]),x=d(x,I,A,C,w,5,o[24]),C=d(C,x,I,A,M,9,o[25]),A=d(A,C,x,I,p,14,o[26]),I=d(I,A,C,x,v,20,o[27]),x=d(x,I,A,C,O,5,o[28]),C=d(C,x,I,A,f,9,o[29]),A=d(A,C,x,I,b,14,o[30]),x=u(x,I=d(I,A,C,x,S,20,o[31]),A,C,g,4,o[32]),C=u(C,x,I,A,v,11,o[33]),A=u(A,C,x,I,_,16,o[34]),I=u(I,A,C,x,M,23,o[35]),x=u(x,I,A,C,h,4,o[36]),C=u(C,x,I,A,m,11,o[37]),A=u(A,C,x,I,b,16,o[38]),I=u(I,A,C,x,k,23,o[39]),x=u(x,I,A,C,O,4,o[40]),C=u(C,x,I,A,n,11,o[41]),A=u(A,C,x,I,p,16,o[42]),I=u(I,A,C,x,y,23,o[43]),x=u(x,I,A,C,w,4,o[44]),C=u(C,x,I,A,S,11,o[45]),A=u(A,C,x,I,T,16,o[46]),x=l(x,I=u(I,A,C,x,f,23,o[47]),A,C,n,6,o[48]),C=l(C,x,I,A,b,10,o[49]),A=l(A,C,x,I,M,15,o[50]),I=l(I,A,C,x,g,21,o[51]),x=l(x,I,A,C,S,6,o[52]),C=l(C,x,I,A,p,10,o[53]),A=l(A,C,x,I,k,15,o[54]),I=l(I,A,C,x,h,21,o[55]),x=l(x,I,A,C,v,6,o[56]),C=l(C,x,I,A,T,10,o[57]),A=l(A,C,x,I,y,15,o[58]),I=l(I,A,C,x,O,21,o[59]),x=l(x,I,A,C,m,6,o[60]),C=l(C,x,I,A,_,10,o[61]),A=l(A,C,x,I,f,15,o[62]),I=l(I,A,C,x,w,21,o[63]),a[0]=a[0]+x|0,a[1]=a[1]+I|0,a[2]=a[2]+A|0,a[3]=a[3]+C|0},_doFinalize:function(){var t=this._data,i=t.words,s=8*this._nDataBytes,r=8*t.sigBytes;i[r>>>5]|=128<<24-r%32;var a=e.floor(s/4294967296),n=s;i[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(i.length+1),this._process();for(var o=this._hash,h=o.words,c=0;c<4;c++){var d=h[c];h[c]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return o},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,i,s,r,a,n){var o=e+(t&i|~t&s)+r+n;return(o<<a|o>>>32-a)+t}function d(e,t,i,s,r,a,n){var o=e+(t&s|i&~s)+r+n;return(o<<a|o>>>32-a)+t}function u(e,t,i,s,r,a,n){var o=e+(t^i^s)+r+n;return(o<<a|o>>>32-a)+t}function l(e,t,i,s,r,a,n){var o=e+(i^(t|~s))+r+n;return(o<<a|o>>>32-a)+t}t.MD5=a._createHelper(h),t.HmacMD5=a._createHmacHelper(h)}(Math),s.MD5)},8568:function(e,t,i){var s;e.exports=(s=i(78249),i(75109),s.mode.CFB=function(){var e=s.lib.BlockCipherMode.extend();function t(e,t,i,s){var r,a=this._iv;a?(r=a.slice(0),this._iv=void 0):r=this._prevBlock,s.encryptBlock(r,0);for(var n=0;n<i;n++)e[t+n]^=r[n]}return e.Encryptor=e.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize;t.call(this,e,i,r,s),this._prevBlock=e.slice(i,i+r)}}),e.Decryptor=e.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize,a=e.slice(i,i+r);t.call(this,e,i,r,s),this._prevBlock=a}}),e}(),s.mode.CFB)},59968:function(e,t,i){var s;e.exports=(s=i(78249),i(75109),s.mode.CTRGladman=function(){var e=s.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,i=e>>8&255,s=255&e;255===t?(t=0,255===i?(i=0,255===s?s=0:++s):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=s}else e+=1<<24;return e}var i=e.Encryptor=e.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize,a=this._iv,n=this._counter;a&&(n=this._counter=a.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(n);var o=n.slice(0);s.encryptBlock(o,0);for(var h=0;h<r;h++)e[i+h]^=o[h]}});return e.Decryptor=i,e}(),s.mode.CTRGladman)},74242:function(e,t,i){var s,r,a;e.exports=(a=i(78249),i(75109),a.mode.CTR=(r=(s=a.lib.BlockCipherMode.extend()).Encryptor=s.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,r=this._iv,a=this._counter;r&&(a=this._counter=r.slice(0),this._iv=void 0);var n=a.slice(0);i.encryptBlock(n,0),a[s-1]=a[s-1]+1|0;for(var o=0;o<s;o++)e[t+o]^=n[o]}}),s.Decryptor=r,s),a.mode.CTR)},31148:function(e,t,i){var s,r;e.exports=(r=i(78249),i(75109),r.mode.ECB=((s=r.lib.BlockCipherMode.extend()).Encryptor=s.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),s.Decryptor=s.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),s),r.mode.ECB)},27660:function(e,t,i){var s,r,a;e.exports=(a=i(78249),i(75109),a.mode.OFB=(r=(s=a.lib.BlockCipherMode.extend()).Encryptor=s.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,r=this._iv,a=this._keystream;r&&(a=this._keystream=r.slice(0),this._iv=void 0),i.encryptBlock(a,0);for(var n=0;n<s;n++)e[t+n]^=a[n]}}),s.Decryptor=r,s),a.mode.OFB)},43615:function(e,t,i){var s;e.exports=(s=i(78249),i(75109),s.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,s=4*t,r=s-i%s,a=i+r-1;e.clamp(),e.words[a>>>2]|=r<<24-a%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},s.pad.Ansix923)},92807:function(e,t,i){var s;e.exports=(s=i(78249),i(75109),s.pad.Iso10126={pad:function(e,t){var i=4*t,r=i-e.sigBytes%i;e.concat(s.lib.WordArray.random(r-1)).concat(s.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},s.pad.Iso10126)},71077:function(e,t,i){var s;e.exports=(s=i(78249),i(75109),s.pad.Iso97971={pad:function(e,t){e.concat(s.lib.WordArray.create([2147483648],1)),s.pad.ZeroPadding.pad(e,t)},unpad:function(e){s.pad.ZeroPadding.unpad(e),e.sigBytes--}},s.pad.Iso97971)},16991:function(e,t,i){var s;e.exports=(s=i(78249),i(75109),s.pad.NoPadding={pad:function(){},unpad:function(){}},s.pad.NoPadding)},56475:function(e,t,i){var s;e.exports=(s=i(78249),i(75109),s.pad.ZeroPadding={pad:function(e,t){var i=4*t;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){var t=e.words,i=e.sigBytes-1;for(i=e.sigBytes-1;i>=0;i--)if(t[i>>>2]>>>24-i%4*8&255){e.sigBytes=i+1;break}}},s.pad.ZeroPadding)},2112:function(e,t,i){var s,r,a,n,o,h,c,d,u;e.exports=(u=i(78249),i(62783),i(89824),a=(r=(s=u).lib).Base,n=r.WordArray,h=(o=s.algo).SHA1,c=o.HMAC,d=o.PBKDF2=a.extend({cfg:a.extend({keySize:4,hasher:h,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,s=c.create(i.hasher,e),r=n.create(),a=n.create([1]),o=r.words,h=a.words,d=i.keySize,u=i.iterations;o.length<d;){var l=s.update(t).finalize(a);s.reset();for(var f=l.words,p=f.length,m=l,g=1;g<u;g++){m=s.finalize(m),s.reset();for(var y=m.words,b=0;b<p;b++)f[b]^=y[b]}r.concat(l),h[0]++}return r.sigBytes=4*d,r}}),s.PBKDF2=function(e,t,i){return d.create(i).compute(e,t)},u.PBKDF2)},93974:function(e,t,i){var s;e.exports=(s=i(78249),i(98269),i(68214),i(90888),i(75109),function(){var e=s,t=e.lib.StreamCipher,i=e.algo,r=[],a=[],n=[],o=i.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],s=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)h.call(this);for(r=0;r<8;r++)s[r]^=i[r+4&7];if(t){var a=t.words,n=a[0],o=a[1],c=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),d=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),u=c>>>16|4294901760&d,l=d<<16|65535&c;for(s[0]^=c,s[1]^=u,s[2]^=d,s[3]^=l,s[4]^=c,s[5]^=u,s[6]^=d,s[7]^=l,r=0;r<4;r++)h.call(this)}},_doProcessBlock:function(e,t){var i=this._X;h.call(this),r[0]=i[0]^i[5]>>>16^i[3]<<16,r[1]=i[2]^i[7]>>>16^i[5]<<16,r[2]=i[4]^i[1]>>>16^i[7]<<16,r[3]=i[6]^i[3]>>>16^i[1]<<16;for(var s=0;s<4;s++)r[s]=16711935&(r[s]<<8|r[s]>>>24)|4278255360&(r[s]<<24|r[s]>>>8),e[t+s]^=r[s]},blockSize:4,ivSize:2});function h(){for(var e=this._X,t=this._C,i=0;i<8;i++)a[i]=t[i];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,i=0;i<8;i++){var s=e[i]+t[i],r=65535&s,o=s>>>16,h=((r*r>>>17)+r*o>>>15)+o*o,c=((4294901760&s)*s|0)+((65535&s)*s|0);n[i]=h^c}e[0]=n[0]+(n[7]<<16|n[7]>>>16)+(n[6]<<16|n[6]>>>16)|0,e[1]=n[1]+(n[0]<<8|n[0]>>>24)+n[7]|0,e[2]=n[2]+(n[1]<<16|n[1]>>>16)+(n[0]<<16|n[0]>>>16)|0,e[3]=n[3]+(n[2]<<8|n[2]>>>24)+n[1]|0,e[4]=n[4]+(n[3]<<16|n[3]>>>16)+(n[2]<<16|n[2]>>>16)|0,e[5]=n[5]+(n[4]<<8|n[4]>>>24)+n[3]|0,e[6]=n[6]+(n[5]<<16|n[5]>>>16)+(n[4]<<16|n[4]>>>16)|0,e[7]=n[7]+(n[6]<<8|n[6]>>>24)+n[5]|0}e.RabbitLegacy=t._createHelper(o)}(),s.RabbitLegacy)},84454:function(e,t,i){var s;e.exports=(s=i(78249),i(98269),i(68214),i(90888),i(75109),function(){var e=s,t=e.lib.StreamCipher,i=e.algo,r=[],a=[],n=[],o=i.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=0;i<4;i++)e[i]=16711935&(e[i]<<8|e[i]>>>24)|4278255360&(e[i]<<24|e[i]>>>8);var s=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,i=0;i<4;i++)h.call(this);for(i=0;i<8;i++)r[i]^=s[i+4&7];if(t){var a=t.words,n=a[0],o=a[1],c=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),d=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),u=c>>>16|4294901760&d,l=d<<16|65535&c;for(r[0]^=c,r[1]^=u,r[2]^=d,r[3]^=l,r[4]^=c,r[5]^=u,r[6]^=d,r[7]^=l,i=0;i<4;i++)h.call(this)}},_doProcessBlock:function(e,t){var i=this._X;h.call(this),r[0]=i[0]^i[5]>>>16^i[3]<<16,r[1]=i[2]^i[7]>>>16^i[5]<<16,r[2]=i[4]^i[1]>>>16^i[7]<<16,r[3]=i[6]^i[3]>>>16^i[1]<<16;for(var s=0;s<4;s++)r[s]=16711935&(r[s]<<8|r[s]>>>24)|4278255360&(r[s]<<24|r[s]>>>8),e[t+s]^=r[s]},blockSize:4,ivSize:2});function h(){for(var e=this._X,t=this._C,i=0;i<8;i++)a[i]=t[i];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,i=0;i<8;i++){var s=e[i]+t[i],r=65535&s,o=s>>>16,h=((r*r>>>17)+r*o>>>15)+o*o,c=((4294901760&s)*s|0)+((65535&s)*s|0);n[i]=h^c}e[0]=n[0]+(n[7]<<16|n[7]>>>16)+(n[6]<<16|n[6]>>>16)|0,e[1]=n[1]+(n[0]<<8|n[0]>>>24)+n[7]|0,e[2]=n[2]+(n[1]<<16|n[1]>>>16)+(n[0]<<16|n[0]>>>16)|0,e[3]=n[3]+(n[2]<<8|n[2]>>>24)+n[1]|0,e[4]=n[4]+(n[3]<<16|n[3]>>>16)+(n[2]<<16|n[2]>>>16)|0,e[5]=n[5]+(n[4]<<8|n[4]>>>24)+n[3]|0,e[6]=n[6]+(n[5]<<16|n[5]>>>16)+(n[4]<<16|n[4]>>>16)|0,e[7]=n[7]+(n[6]<<8|n[6]>>>24)+n[5]|0}e.Rabbit=t._createHelper(o)}(),s.Rabbit)},51857:function(e,t,i){var s;e.exports=(s=i(78249),i(98269),i(68214),i(90888),i(75109),function(){var e=s,t=e.lib.StreamCipher,i=e.algo,r=i.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,s=this._S=[],r=0;r<256;r++)s[r]=r;r=0;for(var a=0;r<256;r++){var n=r%i,o=t[n>>>2]>>>24-n%4*8&255;a=(a+s[r]+o)%256;var h=s[r];s[r]=s[a],s[a]=h}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=a.call(this)},keySize:8,ivSize:0});function a(){for(var e=this._S,t=this._i,i=this._j,s=0,r=0;r<4;r++){i=(i+e[t=(t+1)%256])%256;var a=e[t];e[t]=e[i],e[i]=a,s|=e[(e[t]+e[i])%256]<<24-8*r}return this._i=t,this._j=i,s}e.RC4=t._createHelper(r);var n=i.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)a.call(this)}});e.RC4Drop=t._createHelper(n)}(),s.RC4)},30706:function(e,t,i){var s;e.exports=(s=i(78249),function(e){var t=s,i=t.lib,r=i.WordArray,a=i.Hasher,n=t.algo,o=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),h=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=r.create([0,1518500249,1859775393,2400959708,2840853838]),l=r.create([1352829926,1548603684,1836072691,2053994217,0]),f=n.RIPEMD160=a.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=t+i,r=e[s];e[s]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var a,n,f,w,k,_,S,O,M,T,x,I=this._hash.words,A=u.words,C=l.words,N=o.words,E=h.words,P=c.words,B=d.words;for(_=a=I[0],S=n=I[1],O=f=I[2],M=w=I[3],T=k=I[4],i=0;i<80;i+=1)x=a+e[t+N[i]]|0,x+=i<16?p(n,f,w)+A[0]:i<32?m(n,f,w)+A[1]:i<48?g(n,f,w)+A[2]:i<64?y(n,f,w)+A[3]:b(n,f,w)+A[4],x=(x=v(x|=0,P[i]))+k|0,a=k,k=w,w=v(f,10),f=n,n=x,x=_+e[t+E[i]]|0,x+=i<16?b(S,O,M)+C[0]:i<32?y(S,O,M)+C[1]:i<48?g(S,O,M)+C[2]:i<64?m(S,O,M)+C[3]:p(S,O,M)+C[4],x=(x=v(x|=0,B[i]))+T|0,_=T,T=M,M=v(O,10),O=S,S=x;x=I[1]+f+M|0,I[1]=I[2]+w+T|0,I[2]=I[3]+k+_|0,I[3]=I[4]+a+S|0,I[4]=I[0]+n+O|0,I[0]=x},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;t[s>>>5]|=128<<24-s%32,t[14+(s+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,a=r.words,n=0;n<5;n++){var o=a[n];a[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}return r},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,i){return e^t^i}function m(e,t,i){return e&t|~e&i}function g(e,t,i){return(e|~t)^i}function y(e,t,i){return e&i|t&~i}function b(e,t,i){return e^(t|~i)}function v(e,t){return e<<t|e>>>32-t}t.RIPEMD160=a._createHelper(f),t.HmacRIPEMD160=a._createHmacHelper(f)}(Math),s.RIPEMD160)},62783:function(e,t,i){var s,r,a,n,o,h,c,d;e.exports=(r=(s=d=i(78249)).lib,a=r.WordArray,n=r.Hasher,o=s.algo,h=[],c=o.SHA1=n.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],r=i[1],a=i[2],n=i[3],o=i[4],c=0;c<80;c++){if(c<16)h[c]=0|e[t+c];else{var d=h[c-3]^h[c-8]^h[c-14]^h[c-16];h[c]=d<<1|d>>>31}var u=(s<<5|s>>>27)+o+h[c];u+=c<20?1518500249+(r&a|~r&n):c<40?1859775393+(r^a^n):c<60?(r&a|r&n|a&n)-1894007588:(r^a^n)-899497514,o=n,n=a,a=r<<30|r>>>2,r=s,s=u}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+a|0,i[3]=i[3]+n|0,i[4]=i[4]+o|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[14+(s+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(s+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),s.SHA1=n._createHelper(c),s.HmacSHA1=n._createHmacHelper(c),d.SHA1)},87792:function(e,t,i){var s,r,a,n,o,h;e.exports=(h=i(78249),i(52153),r=(s=h).lib.WordArray,a=s.algo,n=a.SHA256,o=a.SHA224=n.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}}),s.SHA224=n._createHelper(o),s.HmacSHA224=n._createHmacHelper(o),h.SHA224)},52153:function(e,t,i){var s;e.exports=(s=i(78249),function(e){var t=s,i=t.lib,r=i.WordArray,a=i.Hasher,n=t.algo,o=[],h=[];!function(){function t(t){for(var i=e.sqrt(t),s=2;s<=i;s++)if(!(t%s))return!1;return!0}function i(e){return 4294967296*(e-(0|e))|0}for(var s=2,r=0;r<64;)t(s)&&(r<8&&(o[r]=i(e.pow(s,.5))),h[r]=i(e.pow(s,1/3)),r++),s++}();var c=[],d=n.SHA256=a.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],r=i[1],a=i[2],n=i[3],o=i[4],d=i[5],u=i[6],l=i[7],f=0;f<64;f++){if(f<16)c[f]=0|e[t+f];else{var p=c[f-15],m=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=c[f-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[f]=m+c[f-7]+y+c[f-16]}var b=s&r^s&a^r&a,v=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),w=l+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&d^~o&u)+h[f]+c[f];l=u,u=d,d=o,o=n+w|0,n=a,a=r,r=s,s=w+(v+b)|0}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+a|0,i[3]=i[3]+n|0,i[4]=i[4]+o|0,i[5]=i[5]+d|0,i[6]=i[6]+u|0,i[7]=i[7]+l|0},_doFinalize:function(){var t=this._data,i=t.words,s=8*this._nDataBytes,r=8*t.sigBytes;return i[r>>>5]|=128<<24-r%32,i[14+(r+64>>>9<<4)]=e.floor(s/4294967296),i[15+(r+64>>>9<<4)]=s,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=a._createHelper(d),t.HmacSHA256=a._createHmacHelper(d)}(Math),s.SHA256)},13327:function(e,t,i){var s;e.exports=(s=i(78249),i(64938),function(e){var t=s,i=t.lib,r=i.WordArray,a=i.Hasher,n=t.x64.Word,o=t.algo,h=[],c=[],d=[];!function(){for(var e=1,t=0,i=0;i<24;i++){h[e+5*t]=(i+1)*(i+2)/2%64;var s=(2*e+3*t)%5;e=t%5,t=s}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,a=0;a<24;a++){for(var o=0,u=0,l=0;l<7;l++){if(1&r){var f=(1<<l)-1;f<32?u^=1<<f:o^=1<<f-32}128&r?r=r<<1^113:r<<=1}d[a]=n.create(o,u)}}();var u=[];!function(){for(var e=0;e<25;e++)u[e]=n.create()}();var l=o.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new n.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,s=this.blockSize/2,r=0;r<s;r++){var a=e[t+2*r],n=e[t+2*r+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),(I=i[r]).high^=n,I.low^=a}for(var o=0;o<24;o++){for(var l=0;l<5;l++){for(var f=0,p=0,m=0;m<5;m++)f^=(I=i[l+5*m]).high,p^=I.low;var g=u[l];g.high=f,g.low=p}for(l=0;l<5;l++){var y=u[(l+4)%5],b=u[(l+1)%5],v=b.high,w=b.low;for(f=y.high^(v<<1|w>>>31),p=y.low^(w<<1|v>>>31),m=0;m<5;m++)(I=i[l+5*m]).high^=f,I.low^=p}for(var k=1;k<25;k++){var _=(I=i[k]).high,S=I.low,O=h[k];O<32?(f=_<<O|S>>>32-O,p=S<<O|_>>>32-O):(f=S<<O-32|_>>>64-O,p=_<<O-32|S>>>64-O);var M=u[c[k]];M.high=f,M.low=p}var T=u[0],x=i[0];for(T.high=x.high,T.low=x.low,l=0;l<5;l++)for(m=0;m<5;m++){var I=i[k=l+5*m],A=u[k],C=u[(l+1)%5+5*m],N=u[(l+2)%5+5*m];I.high=A.high^~C.high&N.high,I.low=A.low^~C.low&N.low}I=i[0];var E=d[o];I.high^=E.high,I.low^=E.low}},_doFinalize:function(){var t=this._data,i=t.words,s=(this._nDataBytes,8*t.sigBytes),a=32*this.blockSize;i[s>>>5]|=1<<24-s%32,i[(e.ceil((s+1)/a)*a>>>5)-1]|=128,t.sigBytes=4*i.length,this._process();for(var n=this._state,o=this.cfg.outputLength/8,h=o/8,c=[],d=0;d<h;d++){var u=n[d],l=u.high,f=u.low;l=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c.push(f),c.push(l)}return new r.init(c,o)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}});t.SHA3=a._createHelper(l),t.HmacSHA3=a._createHmacHelper(l)}(Math),s.SHA3)},17460:function(e,t,i){var s,r,a,n,o,h,c,d;e.exports=(d=i(78249),i(64938),i(70034),r=(s=d).x64,a=r.Word,n=r.WordArray,o=s.algo,h=o.SHA512,c=o.SHA384=h.extend({_doReset:function(){this._hash=new n.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var e=h._doFinalize.call(this);return e.sigBytes-=16,e}}),s.SHA384=h._createHelper(c),s.HmacSHA384=h._createHmacHelper(c),d.SHA384)},70034:function(e,t,i){var s;e.exports=(s=i(78249),i(64938),function(){var e=s,t=e.lib.Hasher,i=e.x64,r=i.Word,a=i.WordArray,n=e.algo;function o(){return r.create.apply(r,arguments)}var h=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=o()}();var d=n.SHA512=t.extend({_doReset:function(){this._hash=new a.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],r=i[1],a=i[2],n=i[3],o=i[4],d=i[5],u=i[6],l=i[7],f=s.high,p=s.low,m=r.high,g=r.low,y=a.high,b=a.low,v=n.high,w=n.low,k=o.high,_=o.low,S=d.high,O=d.low,M=u.high,T=u.low,x=l.high,I=l.low,A=f,C=p,N=m,E=g,P=y,B=b,R=v,V=w,L=k,D=_,q=S,G=O,F=M,j=T,U=x,H=I,z=0;z<80;z++){var K,W,X=c[z];if(z<16)W=X.high=0|e[t+2*z],K=X.low=0|e[t+2*z+1];else{var Z=c[z-15],Y=Z.high,Q=Z.low,J=(Y>>>1|Q<<31)^(Y>>>8|Q<<24)^Y>>>7,$=(Q>>>1|Y<<31)^(Q>>>8|Y<<24)^(Q>>>7|Y<<25),ee=c[z-2],te=ee.high,ie=ee.low,se=(te>>>19|ie<<13)^(te<<3|ie>>>29)^te>>>6,re=(ie>>>19|te<<13)^(ie<<3|te>>>29)^(ie>>>6|te<<26),ae=c[z-7],ne=ae.high,oe=ae.low,he=c[z-16],ce=he.high,de=he.low;W=(W=(W=J+ne+((K=$+oe)>>>0<$>>>0?1:0))+se+((K+=re)>>>0<re>>>0?1:0))+ce+((K+=de)>>>0<de>>>0?1:0),X.high=W,X.low=K}var ue,le=L&q^~L&F,fe=D&G^~D&j,pe=A&N^A&P^N&P,me=C&E^C&B^E&B,ge=(A>>>28|C<<4)^(A<<30|C>>>2)^(A<<25|C>>>7),ye=(C>>>28|A<<4)^(C<<30|A>>>2)^(C<<25|A>>>7),be=(L>>>14|D<<18)^(L>>>18|D<<14)^(L<<23|D>>>9),ve=(D>>>14|L<<18)^(D>>>18|L<<14)^(D<<23|L>>>9),we=h[z],ke=we.high,_e=we.low,Se=U+be+((ue=H+ve)>>>0<H>>>0?1:0),Oe=ye+me;U=F,H=j,F=q,j=G,q=L,G=D,L=R+(Se=(Se=(Se=Se+le+((ue+=fe)>>>0<fe>>>0?1:0))+ke+((ue+=_e)>>>0<_e>>>0?1:0))+W+((ue+=K)>>>0<K>>>0?1:0))+((D=V+ue|0)>>>0<V>>>0?1:0)|0,R=P,V=B,P=N,B=E,N=A,E=C,A=Se+(ge+pe+(Oe>>>0<ye>>>0?1:0))+((C=ue+Oe|0)>>>0<ue>>>0?1:0)|0}p=s.low=p+C,s.high=f+A+(p>>>0<C>>>0?1:0),g=r.low=g+E,r.high=m+N+(g>>>0<E>>>0?1:0),b=a.low=b+B,a.high=y+P+(b>>>0<B>>>0?1:0),w=n.low=w+V,n.high=v+R+(w>>>0<V>>>0?1:0),_=o.low=_+D,o.high=k+L+(_>>>0<D>>>0?1:0),O=d.low=O+G,d.high=S+q+(O>>>0<G>>>0?1:0),T=u.low=T+j,u.high=M+F+(T>>>0<j>>>0?1:0),I=l.low=I+H,l.high=x+U+(I>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[30+(s+128>>>10<<5)]=Math.floor(i/4294967296),t[31+(s+128>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(d),e.HmacSHA512=t._createHmacHelper(d)}(),s.SHA512)},94253:function(e,t,i){var s;e.exports=(s=i(78249),i(98269),i(68214),i(90888),i(75109),function(){var e=s,t=e.lib,i=t.WordArray,r=t.BlockCipher,a=e.algo,n=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],u=a.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;i<56;i++){var s=n[i]-1;t[i]=e[s>>>5]>>>31-s%32&1}for(var r=this._subKeys=[],a=0;a<16;a++){var c=r[a]=[],d=h[a];for(i=0;i<24;i++)c[i/6|0]|=t[(o[i]-1+d)%28]<<31-i%6,c[4+(i/6|0)]|=t[28+(o[i+24]-1+d)%28]<<31-i%6;for(c[0]=c[0]<<1|c[0]>>>31,i=1;i<7;i++)c[i]=c[i]>>>4*(i-1)+3;c[7]=c[7]<<5|c[7]>>>27}var u=this._invSubKeys=[];for(i=0;i<16;i++)u[i]=r[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,i){this._lBlock=e[t],this._rBlock=e[t+1],l.call(this,4,252645135),l.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),l.call(this,1,1431655765);for(var s=0;s<16;s++){for(var r=i[s],a=this._lBlock,n=this._rBlock,o=0,h=0;h<8;h++)o|=c[h][((n^r[h])&d[h])>>>0];this._lBlock=n,this._rBlock=a^o}var u=this._lBlock;this._lBlock=this._rBlock,this._rBlock=u,l.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),l.call(this,16,65535),l.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function l(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function f(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}e.DES=r._createHelper(u);var p=a.TripleDES=r.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),s=e.length<4?e.slice(0,2):e.slice(2,4),r=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=u.createEncryptor(i.create(t)),this._des2=u.createEncryptor(i.create(s)),this._des3=u.createEncryptor(i.create(r))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=r._createHelper(p)}(),s.TripleDES)},64938:function(e,t,i){var s,r,a,n,o,h;e.exports=(s=i(78249),a=(r=s).lib,n=a.Base,o=a.WordArray,(h=r.x64={}).Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),h.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],s=0;s<t;s++){var r=e[s];i.push(r.high),i.push(r.low)}return o.create(i,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),i=t.length,s=0;s<i;s++)t[s]=t[s].clone();return e}}),s)},4289:(e,t,i)=>{"use strict";var s=i(82215),r="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),a=Object.prototype.toString,n=Array.prototype.concat,o=Object.defineProperty,h=o&&function(){var e={};try{for(var t in o(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),c=function(e,t,i,s){var r;(!(t in e)||"function"==typeof(r=s)&&"[object Function]"===a.call(r)&&s())&&(h?o(e,t,{configurable:!0,enumerable:!1,value:i,writable:!0}):e[t]=i)},d=function(e,t){var i=arguments.length>2?arguments[2]:{},a=s(t);r&&(a=n.call(a,Object.getOwnPropertySymbols(t)));for(var o=0;o<a.length;o+=1)c(e,a[o],t[a[o]],i[a[o]])};d.supportsDescriptors=!!h,e.exports=d},15251:(e,t,i)=>{"use strict";t.utils=i(11278),t.Cipher=i(55756),t.DES=i(70778),t.CBC=i(39051),t.EDE=i(50651)},39051:(e,t,i)=>{"use strict";var s=i(79746),r=i(35717),a={};function n(e){s.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}t.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}r(t,e);for(var i=Object.keys(a),s=0;s<i.length;s++){var n=i[s];t.prototype[n]=a[n]}return t.create=function(e){return new t(e)},t},a._cbcInit=function(){var e=new n(this.options.iv);this._cbcState=e},a._update=function(e,t,i,s){var r=this._cbcState,a=this.constructor.super_.prototype,n=r.iv;if("encrypt"===this.type){for(var o=0;o<this.blockSize;o++)n[o]^=e[t+o];for(a._update.call(this,n,0,i,s),o=0;o<this.blockSize;o++)n[o]=i[s+o]}else{for(a._update.call(this,e,t,i,s),o=0;o<this.blockSize;o++)i[s+o]^=n[o];for(o=0;o<this.blockSize;o++)n[o]=e[t+o]}}},55756:(e,t,i)=>{"use strict";var s=i(79746);function r(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}e.exports=r,r.prototype._init=function(){},r.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},r.prototype._buffer=function(e,t){for(var i=Math.min(this.buffer.length-this.bufferOff,e.length-t),s=0;s<i;s++)this.buffer[this.bufferOff+s]=e[t+s];return this.bufferOff+=i,i},r.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},r.prototype._updateEncrypt=function(e){var t=0,i=0,s=(this.bufferOff+e.length)/this.blockSize|0,r=new Array(s*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(i+=this._flushBuffer(r,i)));for(var a=e.length-(e.length-t)%this.blockSize;t<a;t+=this.blockSize)this._update(e,t,r,i),i+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return r},r.prototype._updateDecrypt=function(e){for(var t=0,i=0,s=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,r=new Array(s*this.blockSize);s>0;s--)t+=this._buffer(e,t),i+=this._flushBuffer(r,i);return t+=this._buffer(e,t),r},r.prototype.final=function(e){var t,i;return e&&(t=this.update(e)),i="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(i):i},r.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},r.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},r.prototype._unpad=function(e){return e},r.prototype._finalDecrypt=function(){s.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},70778:(e,t,i)=>{"use strict";var s=i(79746),r=i(35717),a=i(11278),n=i(55756);function o(){this.tmp=new Array(2),this.keys=null}function h(e){n.call(this,e);var t=new o;this._desState=t,this.deriveKeys(t,e.key)}r(h,n),e.exports=h,h.create=function(e){return new h(e)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];h.prototype.deriveKeys=function(e,t){e.keys=new Array(32),s.equal(t.length,this.blockSize,"Invalid key length");var i=a.readUInt32BE(t,0),r=a.readUInt32BE(t,4);a.pc1(i,r,e.tmp,0),i=e.tmp[0],r=e.tmp[1];for(var n=0;n<e.keys.length;n+=2){var o=c[n>>>1];i=a.r28shl(i,o),r=a.r28shl(r,o),a.pc2(i,r,e.keys,n)}},h.prototype._update=function(e,t,i,s){var r=this._desState,n=a.readUInt32BE(e,t),o=a.readUInt32BE(e,t+4);a.ip(n,o,r.tmp,0),n=r.tmp[0],o=r.tmp[1],"encrypt"===this.type?this._encrypt(r,n,o,r.tmp,0):this._decrypt(r,n,o,r.tmp,0),n=r.tmp[0],o=r.tmp[1],a.writeUInt32BE(i,n,s),a.writeUInt32BE(i,o,s+4)},h.prototype._pad=function(e,t){for(var i=e.length-t,s=t;s<e.length;s++)e[s]=i;return!0},h.prototype._unpad=function(e){for(var t=e[e.length-1],i=e.length-t;i<e.length;i++)s.equal(e[i],t);return e.slice(0,e.length-t)},h.prototype._encrypt=function(e,t,i,s,r){for(var n=t,o=i,h=0;h<e.keys.length;h+=2){var c=e.keys[h],d=e.keys[h+1];a.expand(o,e.tmp,0),c^=e.tmp[0],d^=e.tmp[1];var u=a.substitute(c,d),l=o;o=(n^a.permute(u))>>>0,n=l}a.rip(o,n,s,r)},h.prototype._decrypt=function(e,t,i,s,r){for(var n=i,o=t,h=e.keys.length-2;h>=0;h-=2){var c=e.keys[h],d=e.keys[h+1];a.expand(n,e.tmp,0),c^=e.tmp[0],d^=e.tmp[1];var u=a.substitute(c,d),l=n;n=(o^a.permute(u))>>>0,o=l}a.rip(n,o,s,r)}},50651:(e,t,i)=>{"use strict";var s=i(79746),r=i(35717),a=i(55756),n=i(70778);function o(e,t){s.equal(t.length,24,"Invalid key length");var i=t.slice(0,8),r=t.slice(8,16),a=t.slice(16,24);this.ciphers="encrypt"===e?[n.create({type:"encrypt",key:i}),n.create({type:"decrypt",key:r}),n.create({type:"encrypt",key:a})]:[n.create({type:"decrypt",key:a}),n.create({type:"encrypt",key:r}),n.create({type:"decrypt",key:i})]}function h(e){a.call(this,e);var t=new o(this.type,this.options.key);this._edeState=t}r(h,a),e.exports=h,h.create=function(e){return new h(e)},h.prototype._update=function(e,t,i,s){var r=this._edeState;r.ciphers[0]._update(e,t,i,s),r.ciphers[1]._update(i,s,i,s),r.ciphers[2]._update(i,s,i,s)},h.prototype._pad=n.prototype._pad,h.prototype._unpad=n.prototype._unpad},11278:(e,t)=>{"use strict";t.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},t.writeUInt32BE=function(e,t,i){e[0+i]=t>>>24,e[1+i]=t>>>16&255,e[2+i]=t>>>8&255,e[3+i]=255&t},t.ip=function(e,t,i,s){for(var r=0,a=0,n=6;n>=0;n-=2){for(var o=0;o<=24;o+=8)r<<=1,r|=t>>>o+n&1;for(o=0;o<=24;o+=8)r<<=1,r|=e>>>o+n&1}for(n=6;n>=0;n-=2){for(o=1;o<=25;o+=8)a<<=1,a|=t>>>o+n&1;for(o=1;o<=25;o+=8)a<<=1,a|=e>>>o+n&1}i[s+0]=r>>>0,i[s+1]=a>>>0},t.rip=function(e,t,i,s){for(var r=0,a=0,n=0;n<4;n++)for(var o=24;o>=0;o-=8)r<<=1,r|=t>>>o+n&1,r<<=1,r|=e>>>o+n&1;for(n=4;n<8;n++)for(o=24;o>=0;o-=8)a<<=1,a|=t>>>o+n&1,a<<=1,a|=e>>>o+n&1;i[s+0]=r>>>0,i[s+1]=a>>>0},t.pc1=function(e,t,i,s){for(var r=0,a=0,n=7;n>=5;n--){for(var o=0;o<=24;o+=8)r<<=1,r|=t>>o+n&1;for(o=0;o<=24;o+=8)r<<=1,r|=e>>o+n&1}for(o=0;o<=24;o+=8)r<<=1,r|=t>>o+n&1;for(n=1;n<=3;n++){for(o=0;o<=24;o+=8)a<<=1,a|=t>>o+n&1;for(o=0;o<=24;o+=8)a<<=1,a|=e>>o+n&1}for(o=0;o<=24;o+=8)a<<=1,a|=e>>o+n&1;i[s+0]=r>>>0,i[s+1]=a>>>0},t.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(e,t,s,r){for(var a=0,n=0,o=i.length>>>1,h=0;h<o;h++)a<<=1,a|=e>>>i[h]&1;for(h=o;h<i.length;h++)n<<=1,n|=t>>>i[h]&1;s[r+0]=a>>>0,s[r+1]=n>>>0},t.expand=function(e,t,i){var s=0,r=0;s=(1&e)<<5|e>>>27;for(var a=23;a>=15;a-=4)s<<=6,s|=e>>>a&63;for(a=11;a>=3;a-=4)r|=e>>>a&63,r<<=6;r|=(31&e)<<1|e>>>31,t[i+0]=s>>>0,t[i+1]=r>>>0};var s=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(e,t){for(var i=0,r=0;r<4;r++)i<<=4,i|=s[64*r+(e>>>18-6*r&63)];for(r=0;r<4;r++)i<<=4,i|=s[256+64*r+(t>>>18-6*r&63)];return i>>>0};var r=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(e){for(var t=0,i=0;i<r.length;i++)t<<=1,t|=e>>>r[i]&1;return t>>>0},t.padSplit=function(e,t,i){for(var s=e.toString(2);s.length<t;)s="0"+s;for(var r=[],a=0;a<t;a+=i)r.push(s.slice(a,a+i));return r.join(" ")}},62607:(e,t,i)=>{var s=i(48764).Buffer,r=i(43590),a=i(61930),n=i(57426),o={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=function(e){var t=new s(a[e].prime,"hex"),i=new s(a[e].gen,"hex");return new n(t,i)},t.createDiffieHellman=t.DiffieHellman=function e(t,i,a,h){return s.isBuffer(i)||void 0===o[i]?e(t,"binary",i,a):(i=i||"binary",h=h||"binary",a=a||new s([2]),s.isBuffer(a)||(a=new s(a,h)),"number"==typeof t?new n(r(t,a),a,!0):(s.isBuffer(t)||(t=new s(t,i)),new n(t,a,!0)))}},57426:(e,t,i)=>{var s=i(48764).Buffer,r=i(83620),a=new(i(63047)),n=new r(24),o=new r(11),h=new r(10),c=new r(3),d=new r(7),u=i(43590),l=i(61798);function f(e,t){return t=t||"utf8",s.isBuffer(e)||(e=new s(e,t)),this._pub=new r(e),this}function p(e,t){return t=t||"utf8",s.isBuffer(e)||(e=new s(e,t)),this._priv=new r(e),this}e.exports=g;var m={};function g(e,t,i){this.setGenerator(t),this.__prime=new r(e),this._prime=r.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,i?(this.setPublicKey=f,this.setPrivateKey=p):this._primeCode=8}function y(e,t){var i=new s(e.toArray());return t?i.toString(t):i}Object.defineProperty(g.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,t){var i=t.toString("hex"),s=[i,e.toString(16)].join("_");if(s in m)return m[s];var r,l=0;if(e.isEven()||!u.simpleSieve||!u.fermatTest(e)||!a.test(e))return l+=1,l+="02"===i||"05"===i?8:4,m[s]=l,l;switch(a.test(e.shrn(1))||(l+=2),i){case"02":e.mod(n).cmp(o)&&(l+=8);break;case"05":(r=e.mod(h)).cmp(c)&&r.cmp(d)&&(l+=8);break;default:l+=4}return m[s]=l,l}(this.__prime,this.__gen)),this._primeCode}}),g.prototype.generateKeys=function(){return this._priv||(this._priv=new r(l(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},g.prototype.computeSecret=function(e){var t=(e=(e=new r(e)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new s(t.toArray()),a=this.getPrime();if(i.length<a.length){var n=new s(a.length-i.length);n.fill(0),i=s.concat([n,i])}return i},g.prototype.getPublicKey=function(e){return y(this._pub,e)},g.prototype.getPrivateKey=function(e){return y(this._priv,e)},g.prototype.getPrime=function(e){return y(this.__prime,e)},g.prototype.getGenerator=function(e){return y(this._gen,e)},g.prototype.setGenerator=function(e,t){return t=t||"utf8",s.isBuffer(e)||(e=new s(e,t)),this.__gen=e,this._gen=new r(e),this}},43590:(e,t,i)=>{var s=i(61798);e.exports=b,b.simpleSieve=g,b.fermatTest=y;var r=i(83620),a=new r(24),n=new(i(63047)),o=new r(1),h=new r(2),c=new r(5),d=(new r(16),new r(8),new r(10)),u=new r(3),l=(new r(7),new r(11)),f=new r(4),p=(new r(12),null);function m(){if(null!==p)return p;var e=[];e[0]=2;for(var t=1,i=3;i<1048576;i+=2){for(var s=Math.ceil(Math.sqrt(i)),r=0;r<t&&e[r]<=s&&i%e[r]!=0;r++);t!==r&&e[r]<=s||(e[t++]=i)}return p=e,e}function g(e){for(var t=m(),i=0;i<t.length;i++)if(0===e.modn(t[i]))return 0===e.cmpn(t[i]);return!0}function y(e){var t=r.mont(e);return 0===h.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function b(e,t){if(e<16)return new r(2===t||5===t?[140,123]:[140,39]);var i,p;for(t=new r(t);;){for(i=new r(s(Math.ceil(e/8)));i.bitLength()>e;)i.ishrn(1);if(i.isEven()&&i.iadd(o),i.testn(1)||i.iadd(h),t.cmp(h)){if(!t.cmp(c))for(;i.mod(d).cmp(u);)i.iadd(f)}else for(;i.mod(a).cmp(l);)i.iadd(f);if(g(p=i.shrn(1))&&g(i)&&y(p)&&y(i)&&n.test(p)&&n.test(i))return i}}},61930:e=>{"use strict";e.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},83620:function(e,t,i){!function(e,t){"use strict";function s(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function a(e,t,i){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(i=t,t=10),this._init(e||0,t||10,i||"be"))}var n;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(7748).Buffer}catch(e){}function o(e,t){var i=e.charCodeAt(t);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function h(e,t,i){var s=o(e,i);return i-1>=t&&(s|=o(e,i-1)<<4),s}function c(e,t,i,s){for(var r=0,a=Math.min(e.length,i),n=t;n<a;n++){var o=e.charCodeAt(n)-48;r*=s,r+=o>=49?o-49+10:o>=17?o-17+10:o}return r}a.isBN=function(e){return e instanceof a||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),s(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<e.length&&(16===t?this._parseHex(e,r,i):(this._parseBase(e,t,r),"le"===i&&this._initArray(this.toArray(),t,i)))},a.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(s(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},a.prototype._initArray=function(e,t,i){if(s("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var a,n,o=0;if("be"===i)for(r=e.length-1,a=0;r>=0;r-=3)n=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===i)for(r=0,a=0;r<e.length;r+=3)n=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this.strip()},a.prototype._parseHex=function(e,t,i){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var r,a=0,n=0;if("be"===i)for(s=e.length-1;s>=t;s-=2)r=h(e,t,s)<<a,this.words[n]|=67108863&r,a>=18?(a-=18,n+=1,this.words[n]|=r>>>26):a+=8;else for(s=(e.length-t)%2==0?t+1:t;s<e.length;s+=2)r=h(e,t,s)<<a,this.words[n]|=67108863&r,a>=18?(a-=18,n+=1,this.words[n]|=r>>>26):a+=8;this.strip()},a.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var s=0,r=1;r<=67108863;r*=t)s++;s--,r=r/t|0;for(var a=e.length-i,n=a%s,o=Math.min(a,a-n)+i,h=0,d=i;d<o;d+=s)h=c(e,d,d+s,t),this.imuln(r),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==n){var u=1;for(h=c(e,d,e.length,t),d=0;d<n;d++)u*=t;this.imuln(u),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,i){i.negative=t.negative^e.negative;var s=e.length+t.length|0;i.length=s,s=s-1|0;var r=0|e.words[0],a=0|t.words[0],n=r*a,o=67108863&n,h=n/67108864|0;i.words[0]=o;for(var c=1;c<s;c++){for(var d=h>>>26,u=67108863&h,l=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=l;f++){var p=c-f|0;d+=(n=(r=0|e.words[p])*(a=0|t.words[f])+u)/67108864|0,u=67108863&n}i.words[c]=0|u,h=0|d}return 0!==h?i.words[c]=0|h:i.length--,i.strip()}a.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var r=0,a=0,n=0;n<this.length;n++){var o=this.words[n],h=(16777215&(o<<r|a)).toString(16);i=0!=(a=o>>>24-r&16777215)||n!==this.length-1?d[6-h.length]+h+i:h+i,(r+=2)>=26&&(r-=26,n--)}for(0!==a&&(i=a.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var c=u[e],f=l[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);i=(p=p.idivn(f)).isZero()?m+i:d[c-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}s(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return s(void 0!==n),this.toArrayLike(n,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,i){var r=this.byteLength(),a=i||Math.max(1,r);s(r<=a,"byte array longer than desired length"),s(a>0,"Requested array length <= 0"),this.strip();var n,o,h="le"===t,c=new e(a),d=this.clone();if(h){for(o=0;!d.isZero();o++)n=d.andln(255),d.iushrn(8),c[o]=n;for(;o<a;o++)c[o]=0}else{for(o=0;o<a-r;o++)c[o]=0;for(o=0;!d.isZero();o++)n=d.andln(255),d.iushrn(8),c[a-o-1]=n}return c},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,i=0;return 0==(8191&t)&&(i+=13,t>>>=13),0==(127&t)&&(i+=7,t>>>=7),0==(15&t)&&(i+=4,t>>>=4),0==(3&t)&&(i+=2,t>>>=2),0==(1&t)&&i++,i},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var i=this._zeroBits(this.words[t]);if(e+=i,26!==i)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},a.prototype.ior=function(e){return s(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]&e.words[i];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return s(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,i;this.length>e.length?(t=this,i=e):(t=e,i=this);for(var s=0;s<i.length;s++)this.words[s]=t.words[s]^i.words[s];if(this!==t)for(;s<t.length;s++)this.words[s]=t.words[s];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return s(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){s("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){s("number"==typeof e&&e>=0);var i=e/26|0,r=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},a.prototype.iadd=function(e){var t,i,s;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(i=this,s=e):(i=e,s=this);for(var r=0,a=0;a<s.length;a++)t=(0|i.words[a])+(0|s.words[a])+r,this.words[a]=67108863&t,r=t>>>26;for(;0!==r&&a<i.length;a++)t=(0|i.words[a])+r,this.words[a]=67108863&t,r=t>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i,s,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,s=e):(i=e,s=this);for(var a=0,n=0;n<s.length;n++)a=(t=(0|i.words[n])-(0|s.words[n])+a)>>26,this.words[n]=67108863&t;for(;0!==a&&n<i.length;n++)a=(t=(0|i.words[n])+a)>>26,this.words[n]=67108863&t;if(0===a&&n<i.length&&i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this.length=Math.max(this.length,n),i!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,i){var s,r,a,n=e.words,o=t.words,h=i.words,c=0,d=0|n[0],u=8191&d,l=d>>>13,f=0|n[1],p=8191&f,m=f>>>13,g=0|n[2],y=8191&g,b=g>>>13,v=0|n[3],w=8191&v,k=v>>>13,_=0|n[4],S=8191&_,O=_>>>13,M=0|n[5],T=8191&M,x=M>>>13,I=0|n[6],A=8191&I,C=I>>>13,N=0|n[7],E=8191&N,P=N>>>13,B=0|n[8],R=8191&B,V=B>>>13,L=0|n[9],D=8191&L,q=L>>>13,G=0|o[0],F=8191&G,j=G>>>13,U=0|o[1],H=8191&U,z=U>>>13,K=0|o[2],W=8191&K,X=K>>>13,Z=0|o[3],Y=8191&Z,Q=Z>>>13,J=0|o[4],$=8191&J,ee=J>>>13,te=0|o[5],ie=8191&te,se=te>>>13,re=0|o[6],ae=8191&re,ne=re>>>13,oe=0|o[7],he=8191&oe,ce=oe>>>13,de=0|o[8],ue=8191&de,le=de>>>13,fe=0|o[9],pe=8191&fe,me=fe>>>13;i.negative=e.negative^t.negative,i.length=19;var ge=(c+(s=Math.imul(u,F))|0)+((8191&(r=(r=Math.imul(u,j))+Math.imul(l,F)|0))<<13)|0;c=((a=Math.imul(l,j))+(r>>>13)|0)+(ge>>>26)|0,ge&=67108863,s=Math.imul(p,F),r=(r=Math.imul(p,j))+Math.imul(m,F)|0,a=Math.imul(m,j);var ye=(c+(s=s+Math.imul(u,H)|0)|0)+((8191&(r=(r=r+Math.imul(u,z)|0)+Math.imul(l,H)|0))<<13)|0;c=((a=a+Math.imul(l,z)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,s=Math.imul(y,F),r=(r=Math.imul(y,j))+Math.imul(b,F)|0,a=Math.imul(b,j),s=s+Math.imul(p,H)|0,r=(r=r+Math.imul(p,z)|0)+Math.imul(m,H)|0,a=a+Math.imul(m,z)|0;var be=(c+(s=s+Math.imul(u,W)|0)|0)+((8191&(r=(r=r+Math.imul(u,X)|0)+Math.imul(l,W)|0))<<13)|0;c=((a=a+Math.imul(l,X)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,s=Math.imul(w,F),r=(r=Math.imul(w,j))+Math.imul(k,F)|0,a=Math.imul(k,j),s=s+Math.imul(y,H)|0,r=(r=r+Math.imul(y,z)|0)+Math.imul(b,H)|0,a=a+Math.imul(b,z)|0,s=s+Math.imul(p,W)|0,r=(r=r+Math.imul(p,X)|0)+Math.imul(m,W)|0,a=a+Math.imul(m,X)|0;var ve=(c+(s=s+Math.imul(u,Y)|0)|0)+((8191&(r=(r=r+Math.imul(u,Q)|0)+Math.imul(l,Y)|0))<<13)|0;c=((a=a+Math.imul(l,Q)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,s=Math.imul(S,F),r=(r=Math.imul(S,j))+Math.imul(O,F)|0,a=Math.imul(O,j),s=s+Math.imul(w,H)|0,r=(r=r+Math.imul(w,z)|0)+Math.imul(k,H)|0,a=a+Math.imul(k,z)|0,s=s+Math.imul(y,W)|0,r=(r=r+Math.imul(y,X)|0)+Math.imul(b,W)|0,a=a+Math.imul(b,X)|0,s=s+Math.imul(p,Y)|0,r=(r=r+Math.imul(p,Q)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,Q)|0;var we=(c+(s=s+Math.imul(u,$)|0)|0)+((8191&(r=(r=r+Math.imul(u,ee)|0)+Math.imul(l,$)|0))<<13)|0;c=((a=a+Math.imul(l,ee)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,s=Math.imul(T,F),r=(r=Math.imul(T,j))+Math.imul(x,F)|0,a=Math.imul(x,j),s=s+Math.imul(S,H)|0,r=(r=r+Math.imul(S,z)|0)+Math.imul(O,H)|0,a=a+Math.imul(O,z)|0,s=s+Math.imul(w,W)|0,r=(r=r+Math.imul(w,X)|0)+Math.imul(k,W)|0,a=a+Math.imul(k,X)|0,s=s+Math.imul(y,Y)|0,r=(r=r+Math.imul(y,Q)|0)+Math.imul(b,Y)|0,a=a+Math.imul(b,Q)|0,s=s+Math.imul(p,$)|0,r=(r=r+Math.imul(p,ee)|0)+Math.imul(m,$)|0,a=a+Math.imul(m,ee)|0;var ke=(c+(s=s+Math.imul(u,ie)|0)|0)+((8191&(r=(r=r+Math.imul(u,se)|0)+Math.imul(l,ie)|0))<<13)|0;c=((a=a+Math.imul(l,se)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,s=Math.imul(A,F),r=(r=Math.imul(A,j))+Math.imul(C,F)|0,a=Math.imul(C,j),s=s+Math.imul(T,H)|0,r=(r=r+Math.imul(T,z)|0)+Math.imul(x,H)|0,a=a+Math.imul(x,z)|0,s=s+Math.imul(S,W)|0,r=(r=r+Math.imul(S,X)|0)+Math.imul(O,W)|0,a=a+Math.imul(O,X)|0,s=s+Math.imul(w,Y)|0,r=(r=r+Math.imul(w,Q)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,Q)|0,s=s+Math.imul(y,$)|0,r=(r=r+Math.imul(y,ee)|0)+Math.imul(b,$)|0,a=a+Math.imul(b,ee)|0,s=s+Math.imul(p,ie)|0,r=(r=r+Math.imul(p,se)|0)+Math.imul(m,ie)|0,a=a+Math.imul(m,se)|0;var _e=(c+(s=s+Math.imul(u,ae)|0)|0)+((8191&(r=(r=r+Math.imul(u,ne)|0)+Math.imul(l,ae)|0))<<13)|0;c=((a=a+Math.imul(l,ne)|0)+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,s=Math.imul(E,F),r=(r=Math.imul(E,j))+Math.imul(P,F)|0,a=Math.imul(P,j),s=s+Math.imul(A,H)|0,r=(r=r+Math.imul(A,z)|0)+Math.imul(C,H)|0,a=a+Math.imul(C,z)|0,s=s+Math.imul(T,W)|0,r=(r=r+Math.imul(T,X)|0)+Math.imul(x,W)|0,a=a+Math.imul(x,X)|0,s=s+Math.imul(S,Y)|0,r=(r=r+Math.imul(S,Q)|0)+Math.imul(O,Y)|0,a=a+Math.imul(O,Q)|0,s=s+Math.imul(w,$)|0,r=(r=r+Math.imul(w,ee)|0)+Math.imul(k,$)|0,a=a+Math.imul(k,ee)|0,s=s+Math.imul(y,ie)|0,r=(r=r+Math.imul(y,se)|0)+Math.imul(b,ie)|0,a=a+Math.imul(b,se)|0,s=s+Math.imul(p,ae)|0,r=(r=r+Math.imul(p,ne)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,ne)|0;var Se=(c+(s=s+Math.imul(u,he)|0)|0)+((8191&(r=(r=r+Math.imul(u,ce)|0)+Math.imul(l,he)|0))<<13)|0;c=((a=a+Math.imul(l,ce)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,s=Math.imul(R,F),r=(r=Math.imul(R,j))+Math.imul(V,F)|0,a=Math.imul(V,j),s=s+Math.imul(E,H)|0,r=(r=r+Math.imul(E,z)|0)+Math.imul(P,H)|0,a=a+Math.imul(P,z)|0,s=s+Math.imul(A,W)|0,r=(r=r+Math.imul(A,X)|0)+Math.imul(C,W)|0,a=a+Math.imul(C,X)|0,s=s+Math.imul(T,Y)|0,r=(r=r+Math.imul(T,Q)|0)+Math.imul(x,Y)|0,a=a+Math.imul(x,Q)|0,s=s+Math.imul(S,$)|0,r=(r=r+Math.imul(S,ee)|0)+Math.imul(O,$)|0,a=a+Math.imul(O,ee)|0,s=s+Math.imul(w,ie)|0,r=(r=r+Math.imul(w,se)|0)+Math.imul(k,ie)|0,a=a+Math.imul(k,se)|0,s=s+Math.imul(y,ae)|0,r=(r=r+Math.imul(y,ne)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,ne)|0,s=s+Math.imul(p,he)|0,r=(r=r+Math.imul(p,ce)|0)+Math.imul(m,he)|0,a=a+Math.imul(m,ce)|0;var Oe=(c+(s=s+Math.imul(u,ue)|0)|0)+((8191&(r=(r=r+Math.imul(u,le)|0)+Math.imul(l,ue)|0))<<13)|0;c=((a=a+Math.imul(l,le)|0)+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,s=Math.imul(D,F),r=(r=Math.imul(D,j))+Math.imul(q,F)|0,a=Math.imul(q,j),s=s+Math.imul(R,H)|0,r=(r=r+Math.imul(R,z)|0)+Math.imul(V,H)|0,a=a+Math.imul(V,z)|0,s=s+Math.imul(E,W)|0,r=(r=r+Math.imul(E,X)|0)+Math.imul(P,W)|0,a=a+Math.imul(P,X)|0,s=s+Math.imul(A,Y)|0,r=(r=r+Math.imul(A,Q)|0)+Math.imul(C,Y)|0,a=a+Math.imul(C,Q)|0,s=s+Math.imul(T,$)|0,r=(r=r+Math.imul(T,ee)|0)+Math.imul(x,$)|0,a=a+Math.imul(x,ee)|0,s=s+Math.imul(S,ie)|0,r=(r=r+Math.imul(S,se)|0)+Math.imul(O,ie)|0,a=a+Math.imul(O,se)|0,s=s+Math.imul(w,ae)|0,r=(r=r+Math.imul(w,ne)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,ne)|0,s=s+Math.imul(y,he)|0,r=(r=r+Math.imul(y,ce)|0)+Math.imul(b,he)|0,a=a+Math.imul(b,ce)|0,s=s+Math.imul(p,ue)|0,r=(r=r+Math.imul(p,le)|0)+Math.imul(m,ue)|0,a=a+Math.imul(m,le)|0;var Me=(c+(s=s+Math.imul(u,pe)|0)|0)+((8191&(r=(r=r+Math.imul(u,me)|0)+Math.imul(l,pe)|0))<<13)|0;c=((a=a+Math.imul(l,me)|0)+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,s=Math.imul(D,H),r=(r=Math.imul(D,z))+Math.imul(q,H)|0,a=Math.imul(q,z),s=s+Math.imul(R,W)|0,r=(r=r+Math.imul(R,X)|0)+Math.imul(V,W)|0,a=a+Math.imul(V,X)|0,s=s+Math.imul(E,Y)|0,r=(r=r+Math.imul(E,Q)|0)+Math.imul(P,Y)|0,a=a+Math.imul(P,Q)|0,s=s+Math.imul(A,$)|0,r=(r=r+Math.imul(A,ee)|0)+Math.imul(C,$)|0,a=a+Math.imul(C,ee)|0,s=s+Math.imul(T,ie)|0,r=(r=r+Math.imul(T,se)|0)+Math.imul(x,ie)|0,a=a+Math.imul(x,se)|0,s=s+Math.imul(S,ae)|0,r=(r=r+Math.imul(S,ne)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,ne)|0,s=s+Math.imul(w,he)|0,r=(r=r+Math.imul(w,ce)|0)+Math.imul(k,he)|0,a=a+Math.imul(k,ce)|0,s=s+Math.imul(y,ue)|0,r=(r=r+Math.imul(y,le)|0)+Math.imul(b,ue)|0,a=a+Math.imul(b,le)|0;var Te=(c+(s=s+Math.imul(p,pe)|0)|0)+((8191&(r=(r=r+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,s=Math.imul(D,W),r=(r=Math.imul(D,X))+Math.imul(q,W)|0,a=Math.imul(q,X),s=s+Math.imul(R,Y)|0,r=(r=r+Math.imul(R,Q)|0)+Math.imul(V,Y)|0,a=a+Math.imul(V,Q)|0,s=s+Math.imul(E,$)|0,r=(r=r+Math.imul(E,ee)|0)+Math.imul(P,$)|0,a=a+Math.imul(P,ee)|0,s=s+Math.imul(A,ie)|0,r=(r=r+Math.imul(A,se)|0)+Math.imul(C,ie)|0,a=a+Math.imul(C,se)|0,s=s+Math.imul(T,ae)|0,r=(r=r+Math.imul(T,ne)|0)+Math.imul(x,ae)|0,a=a+Math.imul(x,ne)|0,s=s+Math.imul(S,he)|0,r=(r=r+Math.imul(S,ce)|0)+Math.imul(O,he)|0,a=a+Math.imul(O,ce)|0,s=s+Math.imul(w,ue)|0,r=(r=r+Math.imul(w,le)|0)+Math.imul(k,ue)|0,a=a+Math.imul(k,le)|0;var xe=(c+(s=s+Math.imul(y,pe)|0)|0)+((8191&(r=(r=r+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;c=((a=a+Math.imul(b,me)|0)+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,s=Math.imul(D,Y),r=(r=Math.imul(D,Q))+Math.imul(q,Y)|0,a=Math.imul(q,Q),s=s+Math.imul(R,$)|0,r=(r=r+Math.imul(R,ee)|0)+Math.imul(V,$)|0,a=a+Math.imul(V,ee)|0,s=s+Math.imul(E,ie)|0,r=(r=r+Math.imul(E,se)|0)+Math.imul(P,ie)|0,a=a+Math.imul(P,se)|0,s=s+Math.imul(A,ae)|0,r=(r=r+Math.imul(A,ne)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,ne)|0,s=s+Math.imul(T,he)|0,r=(r=r+Math.imul(T,ce)|0)+Math.imul(x,he)|0,a=a+Math.imul(x,ce)|0,s=s+Math.imul(S,ue)|0,r=(r=r+Math.imul(S,le)|0)+Math.imul(O,ue)|0,a=a+Math.imul(O,le)|0;var Ie=(c+(s=s+Math.imul(w,pe)|0)|0)+((8191&(r=(r=r+Math.imul(w,me)|0)+Math.imul(k,pe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,s=Math.imul(D,$),r=(r=Math.imul(D,ee))+Math.imul(q,$)|0,a=Math.imul(q,ee),s=s+Math.imul(R,ie)|0,r=(r=r+Math.imul(R,se)|0)+Math.imul(V,ie)|0,a=a+Math.imul(V,se)|0,s=s+Math.imul(E,ae)|0,r=(r=r+Math.imul(E,ne)|0)+Math.imul(P,ae)|0,a=a+Math.imul(P,ne)|0,s=s+Math.imul(A,he)|0,r=(r=r+Math.imul(A,ce)|0)+Math.imul(C,he)|0,a=a+Math.imul(C,ce)|0,s=s+Math.imul(T,ue)|0,r=(r=r+Math.imul(T,le)|0)+Math.imul(x,ue)|0,a=a+Math.imul(x,le)|0;var Ae=(c+(s=s+Math.imul(S,pe)|0)|0)+((8191&(r=(r=r+Math.imul(S,me)|0)+Math.imul(O,pe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,s=Math.imul(D,ie),r=(r=Math.imul(D,se))+Math.imul(q,ie)|0,a=Math.imul(q,se),s=s+Math.imul(R,ae)|0,r=(r=r+Math.imul(R,ne)|0)+Math.imul(V,ae)|0,a=a+Math.imul(V,ne)|0,s=s+Math.imul(E,he)|0,r=(r=r+Math.imul(E,ce)|0)+Math.imul(P,he)|0,a=a+Math.imul(P,ce)|0,s=s+Math.imul(A,ue)|0,r=(r=r+Math.imul(A,le)|0)+Math.imul(C,ue)|0,a=a+Math.imul(C,le)|0;var Ce=(c+(s=s+Math.imul(T,pe)|0)|0)+((8191&(r=(r=r+Math.imul(T,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((a=a+Math.imul(x,me)|0)+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,s=Math.imul(D,ae),r=(r=Math.imul(D,ne))+Math.imul(q,ae)|0,a=Math.imul(q,ne),s=s+Math.imul(R,he)|0,r=(r=r+Math.imul(R,ce)|0)+Math.imul(V,he)|0,a=a+Math.imul(V,ce)|0,s=s+Math.imul(E,ue)|0,r=(r=r+Math.imul(E,le)|0)+Math.imul(P,ue)|0,a=a+Math.imul(P,le)|0;var Ne=(c+(s=s+Math.imul(A,pe)|0)|0)+((8191&(r=(r=r+Math.imul(A,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((a=a+Math.imul(C,me)|0)+(r>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,s=Math.imul(D,he),r=(r=Math.imul(D,ce))+Math.imul(q,he)|0,a=Math.imul(q,ce),s=s+Math.imul(R,ue)|0,r=(r=r+Math.imul(R,le)|0)+Math.imul(V,ue)|0,a=a+Math.imul(V,le)|0;var Ee=(c+(s=s+Math.imul(E,pe)|0)|0)+((8191&(r=(r=r+Math.imul(E,me)|0)+Math.imul(P,pe)|0))<<13)|0;c=((a=a+Math.imul(P,me)|0)+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,s=Math.imul(D,ue),r=(r=Math.imul(D,le))+Math.imul(q,ue)|0,a=Math.imul(q,le);var Pe=(c+(s=s+Math.imul(R,pe)|0)|0)+((8191&(r=(r=r+Math.imul(R,me)|0)+Math.imul(V,pe)|0))<<13)|0;c=((a=a+Math.imul(V,me)|0)+(r>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Be=(c+(s=Math.imul(D,pe))|0)+((8191&(r=(r=Math.imul(D,me))+Math.imul(q,pe)|0))<<13)|0;return c=((a=Math.imul(q,me))+(r>>>13)|0)+(Be>>>26)|0,Be&=67108863,h[0]=ge,h[1]=ye,h[2]=be,h[3]=ve,h[4]=we,h[5]=ke,h[6]=_e,h[7]=Se,h[8]=Oe,h[9]=Me,h[10]=Te,h[11]=xe,h[12]=Ie,h[13]=Ae,h[14]=Ce,h[15]=Ne,h[16]=Ee,h[17]=Pe,h[18]=Be,0!==c&&(h[19]=c,i.length++),i};function m(e,t,i){return(new g).mulp(e,t,i)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=f),a.prototype.mulTo=function(e,t){var i=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):i<63?f(this,e,t):i<1024?function(e,t,i){i.negative=t.negative^e.negative,i.length=e.length+t.length;for(var s=0,r=0,a=0;a<i.length-1;a++){var n=r;r=0;for(var o=67108863&s,h=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=h;c++){var d=a-c,u=(0|e.words[d])*(0|t.words[c]),l=67108863&u;o=67108863&(l=l+o|0),r+=(n=(n=n+(u/67108864|0)|0)+(l>>>26)|0)>>>26,n&=67108863}i.words[a]=o,s=n,n=r}return 0!==s?i.words[a]=s:i.length--,i.strip()}(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),i=a.prototype._countBits(e)-1,s=0;s<e;s++)t[s]=this.revBin(s,i,e);return t},g.prototype.revBin=function(e,t,i){if(0===e||e===i-1)return e;for(var s=0,r=0;r<t;r++)s|=(1&e)<<t-r-1,e>>=1;return s},g.prototype.permute=function(e,t,i,s,r,a){for(var n=0;n<a;n++)s[n]=t[e[n]],r[n]=i[e[n]]},g.prototype.transform=function(e,t,i,s,r,a){this.permute(a,e,t,i,s,r);for(var n=1;n<r;n<<=1)for(var o=n<<1,h=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),d=0;d<r;d+=o)for(var u=h,l=c,f=0;f<n;f++){var p=i[d+f],m=s[d+f],g=i[d+f+n],y=s[d+f+n],b=u*g-l*y;y=u*y+l*g,g=b,i[d+f]=p+g,s[d+f]=m+y,i[d+f+n]=p-g,s[d+f+n]=m-y,f!==o&&(b=h*u-c*l,l=h*l+c*u,u=b)}},g.prototype.guessLen13b=function(e,t){var i=1|Math.max(t,e),s=1&i,r=0;for(i=i/2|0;i;i>>>=1)r++;return 1<<r+1+s},g.prototype.conjugate=function(e,t,i){if(!(i<=1))for(var s=0;s<i/2;s++){var r=e[s];e[s]=e[i-s-1],e[i-s-1]=r,r=t[s],t[s]=-t[i-s-1],t[i-s-1]=-r}},g.prototype.normalize13b=function(e,t){for(var i=0,s=0;s<t/2;s++){var r=8192*Math.round(e[2*s+1]/t)+Math.round(e[2*s]/t)+i;e[s]=67108863&r,i=r<67108864?0:r/67108864|0}return e},g.prototype.convert13b=function(e,t,i,r){for(var a=0,n=0;n<t;n++)a+=0|e[n],i[2*n]=8191&a,a>>>=13,i[2*n+1]=8191&a,a>>>=13;for(n=2*t;n<r;++n)i[n]=0;s(0===a),s(0==(-8192&a))},g.prototype.stub=function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=0;return t},g.prototype.mulp=function(e,t,i){var s=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(s),a=this.stub(s),n=new Array(s),o=new Array(s),h=new Array(s),c=new Array(s),d=new Array(s),u=new Array(s),l=i.words;l.length=s,this.convert13b(e.words,e.length,n,s),this.convert13b(t.words,t.length,c,s),this.transform(n,a,o,h,s,r),this.transform(c,a,d,u,s,r);for(var f=0;f<s;f++){var p=o[f]*d[f]-h[f]*u[f];h[f]=o[f]*u[f]+h[f]*d[f],o[f]=p}return this.conjugate(o,h,s),this.transform(o,h,l,a,s,r),this.conjugate(l,a,s),this.normalize13b(l,s),i.negative=e.negative^t.negative,i.length=e.length+t.length,i.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),m(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){s("number"==typeof e),s(e<67108864);for(var t=0,i=0;i<this.length;i++){var r=(0|this.words[i])*e,a=(67108863&r)+(67108863&t);t>>=26,t+=r/67108864|0,t+=a>>>26,this.words[i]=67108863&a}return 0!==t&&(this.words[i]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),i=0;i<t.length;i++){var s=i/26|0,r=i%26;t[i]=(e.words[s]&1<<r)>>>r}return t}(e);if(0===t.length)return new a(1);for(var i=this,s=0;s<t.length&&0===t[s];s++,i=i.sqr());if(++s<t.length)for(var r=i.sqr();s<t.length;s++,r=r.sqr())0!==t[s]&&(i=i.mul(r));return i},a.prototype.iushln=function(e){s("number"==typeof e&&e>=0);var t,i=e%26,r=(e-i)/26,a=67108863>>>26-i<<26-i;if(0!==i){var n=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,h=(0|this.words[t])-o<<i;this.words[t]=h|n,n=o>>>26-i}n&&(this.words[t]=n,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this.strip()},a.prototype.ishln=function(e){return s(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,i){var r;s("number"==typeof e&&e>=0),r=t?(t-t%26)/26:0;var a=e%26,n=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,h=i;if(r-=n,r=Math.max(0,r),h){for(var c=0;c<n;c++)h.words[c]=this.words[c];h.length=n}if(0===n);else if(this.length>n)for(this.length-=n,c=0;c<this.length;c++)this.words[c]=this.words[c+n];else this.words[0]=0,this.length=1;var d=0;for(c=this.length-1;c>=0&&(0!==d||c>=r);c--){var u=0|this.words[c];this.words[c]=d<<26-a|u>>>a,d=u&o}return h&&0!==d&&(h.words[h.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,i){return s(0===this.negative),this.iushrn(e,t,i)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,r=1<<t;return!(this.length<=i||!(this.words[i]&r))},a.prototype.imaskn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this.strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return s("number"==typeof e),s(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(s("number"==typeof e),s(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,i){var r,a,n=e.length+i;this._expand(n);var o=0;for(r=0;r<e.length;r++){a=(0|this.words[r+i])+o;var h=(0|e.words[r])*t;o=((a-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&a}for(;r<this.length-i;r++)o=(a=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&a;if(0===o)return this.strip();for(s(-1===o),o=0,r=0;r<this.length;r++)o=(a=-(0|this.words[r])+o)>>26,this.words[r]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var i=(this.length,e.length),s=this.clone(),r=e,n=0|r.words[r.length-1];0!=(i=26-this._countBits(n))&&(r=r.ushln(i),s.iushln(i),n=0|r.words[r.length-1]);var o,h=s.length-r.length;if("mod"!==t){(o=new a(null)).length=h+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var d=s.clone()._ishlnsubmul(r,1,h);0===d.negative&&(s=d,o&&(o.words[h]=1));for(var u=h-1;u>=0;u--){var l=67108864*(0|s.words[r.length+u])+(0|s.words[r.length+u-1]);for(l=Math.min(l/n|0,67108863),s._ishlnsubmul(r,l,u);0!==s.negative;)l--,s.negative=0,s._ishlnsubmul(r,1,u),s.isZero()||(s.negative^=1);o&&(o.words[u]=l)}return o&&o.strip(),s.strip(),"div"!==t&&0!==i&&s.iushrn(i),{div:o||null,mod:s}},a.prototype.divmod=function(e,t,i){return s(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(r=o.div.neg()),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.iadd(e)),{div:r,mod:n}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.isub(e)),{div:o.div,mod:n}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t);var r,n,o},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var i=0!==t.div.negative?t.mod.isub(e):t.mod,s=e.ushrn(1),r=e.andln(1),a=i.cmp(s);return a<0||1===r&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modn=function(e){s(e<=67108863);for(var t=(1<<26)%e,i=0,r=this.length-1;r>=0;r--)i=(t*i+(0|this.words[r]))%e;return i},a.prototype.idivn=function(e){s(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*t;this.words[i]=r/e|0,t=r%e}return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new a(1),n=new a(0),o=new a(0),h=new a(1),c=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++c;for(var d=i.clone(),u=t.clone();!t.isZero();){for(var l=0,f=1;0==(t.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(d),n.isub(u)),r.iushrn(1),n.iushrn(1);for(var p=0,m=1;0==(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(d),h.isub(u)),o.iushrn(1),h.iushrn(1);t.cmp(i)>=0?(t.isub(i),r.isub(o),n.isub(h)):(i.isub(t),o.isub(r),h.isub(n))}return{a:o,b:h,gcd:i.iushln(c)}},a.prototype._invmp=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,n=new a(1),o=new a(0),h=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,d=1;0==(t.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(t.iushrn(c);c-- >0;)n.isOdd()&&n.iadd(h),n.iushrn(1);for(var u=0,l=1;0==(i.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(i.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);t.cmp(i)>=0?(t.isub(i),n.isub(o)):(i.isub(t),o.isub(n))}return(r=0===t.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(e),r},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),i=e.clone();t.negative=0,i.negative=0;for(var s=0;t.isEven()&&i.isEven();s++)t.iushrn(1),i.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=t.cmp(i);if(r<0){var a=t;t=i,i=a}else if(0===r||0===i.cmpn(1))break;t.isub(i)}return i.iushln(s)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){s("number"==typeof e);var t=e%26,i=(e-t)/26,r=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var a=r,n=i;0!==a&&n<this.length;n++){var o=0|this.words[n];a=(o+=a)>>>26,o&=67108863,this.words[n]=o}return 0!==a&&(this.words[n]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),s(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,i=this.length-1;i>=0;i--){var s=0|this.words[i],r=0|e.words[i];if(s!==r){s<r?t=-1:s>r&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new S(e)},a.prototype.toRed=function(e){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return s(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return s(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else s(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function O(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,i=e;do{this.split(i,this.tmp),t=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(t>this.n);var s=t<this.n?-1:i.ucmp(this.p);return 0===s?(i.words[0]=0,i.length=1):s>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},r(v,b),v.prototype.split=function(e,t){for(var i=4194303,s=Math.min(e.length,9),r=0;r<s;r++)t.words[r]=e.words[r];if(t.length=s,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&i,r=10;r<e.length;r++){var n=0|e.words[r];e.words[r-10]=(n&i)<<4|a>>>22,a=n}a>>>=22,e.words[r-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,i=0;i<e.length;i++){var s=0|e.words[i];t+=977*s,e.words[i]=67108863&t,t=64*s+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(w,b),r(k,b),r(_,b),_.prototype.imulK=function(e){for(var t=0,i=0;i<e.length;i++){var s=19*(0|e.words[i])+t,r=67108863&s;s>>>=26,e.words[i]=r,t=s}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new w;else if("p192"===e)t=new k;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return y[e]=t,t},S.prototype._verify1=function(e){s(0===e.negative,"red works only with positives"),s(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){s(0==(e.negative|t.negative),"red works only with positives"),s(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var i=e.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var i=e.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i},S.prototype.sub=function(e,t){this._verify2(e,t);var i=e.sub(t);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var i=e.isub(t);return i.cmpn(0)<0&&i.iadd(this.m),i},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(s(t%2==1),3===t){var i=this.m.add(new a(1)).iushrn(2);return this.pow(e,i)}for(var r=this.m.subn(1),n=0;!r.isZero()&&0===r.andln(1);)n++,r.iushrn(1);s(!r.isZero());var o=new a(1).toRed(this),h=o.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);0!==this.pow(d,c).cmp(h);)d.redIAdd(h);for(var u=this.pow(d,r),l=this.pow(e,r.addn(1).iushrn(1)),f=this.pow(e,r),p=n;0!==f.cmp(o);){for(var m=f,g=0;0!==m.cmp(o);g++)m=m.redSqr();s(g<p);var y=this.pow(u,new a(1).iushln(p-g-1));l=l.redMul(y),u=y.redSqr(),f=f.redMul(u),p=g}return l},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var i=new Array(16);i[0]=new a(1).toRed(this),i[1]=e;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],e);var r=i[0],n=0,o=0,h=t.bitLength()%26;for(0===h&&(h=26),s=t.length-1;s>=0;s--){for(var c=t.words[s],d=h-1;d>=0;d--){var u=c>>d&1;r!==i[0]&&(r=this.sqr(r)),0!==u||0!==n?(n<<=1,n|=u,(4==++o||0===s&&0===d)&&(r=this.mul(r,i[n]),o=0,n=0)):o=0}h=26}return r},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new O(e)},r(O,S),O.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},O.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},O.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var i=e.imul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},O.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var i=e.mul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n._forceRed(this)},O.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=i.nmd(e),this)},86266:(e,t,i)=>{"use strict";var s=t;s.version=i(17519).i8,s.utils=i(80953),s.rand=i(29931),s.curve=i(88254),s.curves=i(45427),s.ec=i(57954),s.eddsa=i(65980)},4918:(e,t,i)=>{"use strict";var s=i(73785),r=i(80953),a=r.getNAF,n=r.getJSF,o=r.assert;function h(e,t){this.type=e,this.p=new s(t.p,16),this.red=t.prime?s.red(t.prime):s.mont(this.p),this.zero=new s(0).toRed(this.red),this.one=new s(1).toRed(this.red),this.two=new s(2).toRed(this.red),this.n=t.n&&new s(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=h,h.prototype.point=function(){throw new Error("Not implemented")},h.prototype.validate=function(){throw new Error("Not implemented")},h.prototype._fixedNafMul=function(e,t){o(e.precomputed);var i=e._getDoubles(),s=a(t,1,this._bitLength),r=(1<<i.step+1)-(i.step%2==0?2:1);r/=3;var n,h,c=[];for(n=0;n<s.length;n+=i.step){h=0;for(var d=n+i.step-1;d>=n;d--)h=(h<<1)+s[d];c.push(h)}for(var u=this.jpoint(null,null,null),l=this.jpoint(null,null,null),f=r;f>0;f--){for(n=0;n<c.length;n++)(h=c[n])===f?l=l.mixedAdd(i.points[n]):h===-f&&(l=l.mixedAdd(i.points[n].neg()));u=u.add(l)}return u.toP()},h.prototype._wnafMul=function(e,t){var i=4,s=e._getNAFPoints(i);i=s.wnd;for(var r=s.points,n=a(t,i,this._bitLength),h=this.jpoint(null,null,null),c=n.length-1;c>=0;c--){for(var d=0;c>=0&&0===n[c];c--)d++;if(c>=0&&d++,h=h.dblp(d),c<0)break;var u=n[c];o(0!==u),h="affine"===e.type?u>0?h.mixedAdd(r[u-1>>1]):h.mixedAdd(r[-u-1>>1].neg()):u>0?h.add(r[u-1>>1]):h.add(r[-u-1>>1].neg())}return"affine"===e.type?h.toP():h},h.prototype._wnafMulAdd=function(e,t,i,s,r){var o,h,c,d=this._wnafT1,u=this._wnafT2,l=this._wnafT3,f=0;for(o=0;o<s;o++){var p=(c=t[o])._getNAFPoints(e);d[o]=p.wnd,u[o]=p.points}for(o=s-1;o>=1;o-=2){var m=o-1,g=o;if(1===d[m]&&1===d[g]){var y=[t[m],null,null,t[g]];0===t[m].y.cmp(t[g].y)?(y[1]=t[m].add(t[g]),y[2]=t[m].toJ().mixedAdd(t[g].neg())):0===t[m].y.cmp(t[g].y.redNeg())?(y[1]=t[m].toJ().mixedAdd(t[g]),y[2]=t[m].add(t[g].neg())):(y[1]=t[m].toJ().mixedAdd(t[g]),y[2]=t[m].toJ().mixedAdd(t[g].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],v=n(i[m],i[g]);for(f=Math.max(v[0].length,f),l[m]=new Array(f),l[g]=new Array(f),h=0;h<f;h++){var w=0|v[0][h],k=0|v[1][h];l[m][h]=b[3*(w+1)+(k+1)],l[g][h]=0,u[m]=y}}else l[m]=a(i[m],d[m],this._bitLength),l[g]=a(i[g],d[g],this._bitLength),f=Math.max(l[m].length,f),f=Math.max(l[g].length,f)}var _=this.jpoint(null,null,null),S=this._wnafT4;for(o=f;o>=0;o--){for(var O=0;o>=0;){var M=!0;for(h=0;h<s;h++)S[h]=0|l[h][o],0!==S[h]&&(M=!1);if(!M)break;O++,o--}if(o>=0&&O++,_=_.dblp(O),o<0)break;for(h=0;h<s;h++){var T=S[h];0!==T&&(T>0?c=u[h][T-1>>1]:T<0&&(c=u[h][-T-1>>1].neg()),_="affine"===c.type?_.mixedAdd(c):_.add(c))}}for(o=0;o<s;o++)u[o]=null;return r?_:_.toP()},h.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},h.prototype.decodePoint=function(e,t){e=r.toArray(e,t);var i=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*i)return 6===e[0]?o(e[e.length-1]%2==0):7===e[0]&&o(e[e.length-1]%2==1),this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));if((2===e[0]||3===e[0])&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),3===e[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(e){return this.encode(e,!0)},c.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))},c.prototype.encode=function(e,t){return r.encode(this._encode(t),e)},c.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},c.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},c.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],s=this,r=0;r<t;r+=e){for(var a=0;a<e;a++)s=s.dbl();i.push(s)}return{step:e,points:i}},c.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,s=1===i?null:this.dbl(),r=1;r<i;r++)t[r]=t[r-1].add(s);return{wnd:e,points:t}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t}},31138:(e,t,i)=>{"use strict";var s=i(80953),r=i(73785),a=i(35717),n=i(4918),o=s.assert;function h(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,n.call(this,"edwards",e),this.a=new r(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new r(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new r(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),o(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function c(e,t,i,s,a){n.BasePoint.call(this,e,"projective"),null===t&&null===i&&null===s?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new r(t,16),this.y=new r(i,16),this.z=s?new r(s,16):this.curve.one,this.t=a&&new r(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}a(h,n),e.exports=h,h.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},h.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},h.prototype.jpoint=function(e,t,i,s){return this.point(e,t,i,s)},h.prototype.pointFromX=function(e,t){(e=new r(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),s=this.c2.redSub(this.a.redMul(i)),a=this.one.redSub(this.c2.redMul(this.d).redMul(i)),n=s.redMul(a.redInvm()),o=n.redSqrt();if(0!==o.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var h=o.fromRed().isOdd();return(t&&!h||!t&&h)&&(o=o.redNeg()),this.point(e,o)},h.prototype.pointFromY=function(e,t){(e=new r(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),s=i.redSub(this.c2),a=i.redMul(this.d).redMul(this.c2).redSub(this.a),n=s.redMul(a.redInvm());if(0===n.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=n.redSqrt();if(0!==o.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");return o.fromRed().isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},h.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),i=e.y.redSqr(),s=t.redMul(this.a).redAdd(i),r=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(i)));return 0===s.cmp(r)},a(c,n.BasePoint),h.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},h.prototype.point=function(e,t,i,s){return new c(this,e,t,i,s)},c.fromJSON=function(e,t){return new c(e,t[0],t[1],t[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var s=this.curve._mulA(e),r=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=s.redAdd(t),n=a.redSub(i),o=s.redSub(t),h=r.redMul(n),c=a.redMul(o),d=r.redMul(o),u=n.redMul(a);return this.curve.point(h,c,u,d)},c.prototype._projDbl=function(){var e,t,i,s,r,a,n=this.x.redAdd(this.y).redSqr(),o=this.x.redSqr(),h=this.y.redSqr();if(this.curve.twisted){var c=(s=this.curve._mulA(o)).redAdd(h);this.zOne?(e=n.redSub(o).redSub(h).redMul(c.redSub(this.curve.two)),t=c.redMul(s.redSub(h)),i=c.redSqr().redSub(c).redSub(c)):(r=this.z.redSqr(),a=c.redSub(r).redISub(r),e=n.redSub(o).redISub(h).redMul(a),t=c.redMul(s.redSub(h)),i=c.redMul(a))}else s=o.redAdd(h),r=this.curve._mulC(this.z).redSqr(),a=s.redSub(r).redSub(r),e=this.curve._mulC(n.redISub(s)).redMul(a),t=this.curve._mulC(s).redMul(o.redISub(h)),i=s.redMul(a);return this.curve.point(e,t,i)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),s=this.t.redMul(this.curve.dd).redMul(e.t),r=this.z.redMul(e.z.redAdd(e.z)),a=i.redSub(t),n=r.redSub(s),o=r.redAdd(s),h=i.redAdd(t),c=a.redMul(n),d=o.redMul(h),u=a.redMul(h),l=n.redMul(o);return this.curve.point(c,d,l,u)},c.prototype._projAdd=function(e){var t,i,s=this.z.redMul(e.z),r=s.redSqr(),a=this.x.redMul(e.x),n=this.y.redMul(e.y),o=this.curve.d.redMul(a).redMul(n),h=r.redSub(o),c=r.redAdd(o),d=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(a).redISub(n),u=s.redMul(h).redMul(d);return this.curve.twisted?(t=s.redMul(c).redMul(n.redSub(this.curve._mulA(a))),i=h.redMul(c)):(t=s.redMul(c).redMul(n.redSub(a)),i=this.curve._mulC(h).redMul(c)),this.curve.point(u,t,i)},c.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},c.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!1)},c.prototype.jmulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},c.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var i=e.clone(),s=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(s),0===this.x.cmp(t))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},88254:(e,t,i)=>{"use strict";var s=t;s.base=i(4918),s.short=i(6673),s.mont=i(22881),s.edwards=i(31138)},22881:(e,t,i)=>{"use strict";var s=i(73785),r=i(35717),a=i(4918),n=i(80953);function o(e){a.call(this,"mont",e),this.a=new s(e.a,16).toRed(this.red),this.b=new s(e.b,16).toRed(this.red),this.i4=new s(4).toRed(this.red).redInvm(),this.two=new s(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function h(e,t,i){a.BasePoint.call(this,e,"projective"),null===t&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new s(t,16),this.z=new s(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}r(o,a),e.exports=o,o.prototype.validate=function(e){var t=e.normalize().x,i=t.redSqr(),s=i.redMul(t).redAdd(i.redMul(this.a)).redAdd(t);return 0===s.redSqrt().redSqr().cmp(s)},r(h,a.BasePoint),o.prototype.decodePoint=function(e,t){return this.point(n.toArray(e,t),1)},o.prototype.point=function(e,t){return new h(this,e,t)},o.prototype.pointFromJSON=function(e){return h.fromJSON(this,e)},h.prototype.precompute=function(){},h.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},h.fromJSON=function(e,t){return new h(e,t[0],t[1]||e.one)},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},h.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),i=e.redSub(t),s=e.redMul(t),r=i.redMul(t.redAdd(this.curve.a24.redMul(i)));return this.curve.point(s,r)},h.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},h.prototype.diffAdd=function(e,t){var i=this.x.redAdd(this.z),s=this.x.redSub(this.z),r=e.x.redAdd(e.z),a=e.x.redSub(e.z).redMul(i),n=r.redMul(s),o=t.z.redMul(a.redAdd(n).redSqr()),h=t.x.redMul(a.redISub(n).redSqr());return this.curve.point(o,h)},h.prototype.mul=function(e){for(var t=e.clone(),i=this,s=this.curve.point(null,null),r=[];0!==t.cmpn(0);t.iushrn(1))r.push(t.andln(1));for(var a=r.length-1;a>=0;a--)0===r[a]?(i=i.diffAdd(s,this),s=s.dbl()):(s=i.diffAdd(s,this),i=i.dbl());return s},h.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},h.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},h.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},h.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},6673:(e,t,i)=>{"use strict";var s=i(80953),r=i(73785),a=i(35717),n=i(4918),o=s.assert;function h(e){n.call(this,"short",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(e,t,i,s){n.BasePoint.call(this,e,"affine"),null===t&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new r(t,16),this.y=new r(i,16),s&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function d(e,t,i,s){n.BasePoint.call(this,e,"jacobian"),null===t&&null===i&&null===s?(this.x=this.curve.one,this.y=this.curve.one,this.z=new r(0)):(this.x=new r(t,16),this.y=new r(i,16),this.z=new r(s,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}a(h,n),e.exports=h,h.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,i;if(e.beta)t=new r(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);t=(t=s[0].cmp(s[1])<0?s[0]:s[1]).toRed(this.red)}if(e.lambda)i=new r(e.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(t))?i=a[0]:(i=a[1],o(0===this.g.mul(i).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:i,basis:e.basis?e.basis.map((function(e){return{a:new r(e.a,16),b:new r(e.b,16)}})):this._getEndoBasis(i)}}},h.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:r.mont(e),i=new r(2).toRed(t).redInvm(),s=i.redNeg(),a=new r(3).toRed(t).redNeg().redSqrt().redMul(i);return[s.redAdd(a).fromRed(),s.redSub(a).fromRed()]},h.prototype._getEndoBasis=function(e){for(var t,i,s,a,n,o,h,c,d,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,f=this.n.clone(),p=new r(1),m=new r(0),g=new r(0),y=new r(1),b=0;0!==l.cmpn(0);){var v=f.div(l);c=f.sub(v.mul(l)),d=g.sub(v.mul(p));var w=y.sub(v.mul(m));if(!s&&c.cmp(u)<0)t=h.neg(),i=p,s=c.neg(),a=d;else if(s&&2==++b)break;h=c,f=l,l=c,g=p,p=d,y=m,m=w}n=c.neg(),o=d;var k=s.sqr().add(a.sqr());return n.sqr().add(o.sqr()).cmp(k)>=0&&(n=t,o=i),s.negative&&(s=s.neg(),a=a.neg()),n.negative&&(n=n.neg(),o=o.neg()),[{a:s,b:a},{a:n,b:o}]},h.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],s=t[1],r=s.b.mul(e).divRound(this.n),a=i.b.neg().mul(e).divRound(this.n),n=r.mul(i.a),o=a.mul(s.a),h=r.mul(i.b),c=a.mul(s.b);return{k1:e.sub(n).sub(o),k2:h.add(c).neg()}},h.prototype.pointFromX=function(e,t){(e=new r(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=i.redSqrt();if(0!==s.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var a=s.fromRed().isOdd();return(t&&!a||!t&&a)&&(s=s.redNeg()),this.point(e,s)},h.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,s=this.a.redMul(t),r=t.redSqr().redMul(t).redIAdd(s).redIAdd(this.b);return 0===i.redSqr().redISub(r).cmpn(0)},h.prototype._endoWnafMulAdd=function(e,t,i){for(var s=this._endoWnafT1,r=this._endoWnafT2,a=0;a<e.length;a++){var n=this._endoSplit(t[a]),o=e[a],h=o._getBeta();n.k1.negative&&(n.k1.ineg(),o=o.neg(!0)),n.k2.negative&&(n.k2.ineg(),h=h.neg(!0)),s[2*a]=o,s[2*a+1]=h,r[2*a]=n.k1,r[2*a+1]=n.k2}for(var c=this._wnafMulAdd(1,s,r,2*a,i),d=0;d<2*a;d++)s[d]=null,r[d]=null;return c},a(c,n.BasePoint),h.prototype.point=function(e,t,i){return new c(this,e,t,i)},h.prototype.pointFromJSON=function(e,t){return c.fromJSON(this,e,t)},c.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,s=function(e){return i.point(e.x.redMul(i.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return t}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(e,t,i){"string"==typeof t&&(t=JSON.parse(t));var s=e.point(t[0],t[1],i);if(!t[2])return s;function r(t){return e.point(t[0],t[1],i)}var a=t[2];return s.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[s].concat(a.doubles.points.map(r))},naf:a.naf&&{wnd:a.naf.wnd,points:[s].concat(a.naf.points.map(r))}},s},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),s=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)},c.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),s=e.redInvm(),r=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(s),a=r.redSqr().redISub(this.x.redAdd(this.x)),n=r.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,n)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(e){return e=new r(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,i){var s=[this,t],r=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,r):this.curve._wnafMulAdd(1,s,r,2)},c.prototype.jmulAdd=function(e,t,i){var s=[this,t],r=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,r,!0):this.curve._wnafMulAdd(1,s,r,2,!0)},c.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},c.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,s=function(e){return e.neg()};t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(s)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(s)}}}return t},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},a(d,n.BasePoint),h.prototype.jpoint=function(e,t,i){return new d(this,e,t,i)},d.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),s=this.y.redMul(t).redMul(e);return this.curve.point(i,s)},d.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},d.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(t),r=e.x.redMul(i),a=this.y.redMul(t.redMul(e.z)),n=e.y.redMul(i.redMul(this.z)),o=s.redSub(r),h=a.redSub(n);if(0===o.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),d=c.redMul(o),u=s.redMul(c),l=h.redSqr().redIAdd(d).redISub(u).redISub(u),f=h.redMul(u.redISub(l)).redISub(a.redMul(d)),p=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(l,f,p)},d.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,s=e.x.redMul(t),r=this.y,a=e.y.redMul(t).redMul(this.z),n=i.redSub(s),o=r.redSub(a);if(0===n.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=n.redSqr(),c=h.redMul(n),d=i.redMul(h),u=o.redSqr().redIAdd(c).redISub(d).redISub(d),l=o.redMul(d.redISub(u)).redISub(r.redMul(c)),f=this.z.redMul(n);return this.curve.jpoint(u,l,f)},d.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var i=this;for(t=0;t<e;t++)i=i.dbl();return i}var s=this.curve.a,r=this.curve.tinv,a=this.x,n=this.y,o=this.z,h=o.redSqr().redSqr(),c=n.redAdd(n);for(t=0;t<e;t++){var d=a.redSqr(),u=c.redSqr(),l=u.redSqr(),f=d.redAdd(d).redIAdd(d).redIAdd(s.redMul(h)),p=a.redMul(u),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),y=f.redMul(g);y=y.redIAdd(y).redISub(l);var b=c.redMul(o);t+1<e&&(h=h.redMul(l)),a=m,o=b,c=y}return this.curve.jpoint(a,c.redMul(r),o)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},d.prototype._zeroDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),r=this.y.redSqr(),a=r.redSqr(),n=this.x.redAdd(r).redSqr().redISub(s).redISub(a);n=n.redIAdd(n);var o=s.redAdd(s).redIAdd(s),h=o.redSqr().redISub(n).redISub(n),c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),e=h,t=o.redMul(n.redISub(h)).redISub(c),i=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),u=this.y.redSqr(),l=u.redSqr(),f=this.x.redAdd(u).redSqr().redISub(d).redISub(l);f=f.redIAdd(f);var p=d.redAdd(d).redIAdd(d),m=p.redSqr(),g=l.redIAdd(l);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(g),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(e,t,i)},d.prototype._threeDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),r=this.y.redSqr(),a=r.redSqr(),n=this.x.redAdd(r).redSqr().redISub(s).redISub(a);n=n.redIAdd(n);var o=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),h=o.redSqr().redISub(n).redISub(n);e=h;var c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),t=o.redMul(n.redISub(h)).redISub(c),i=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),u=this.y.redSqr(),l=this.x.redMul(u),f=this.x.redSub(d).redMul(this.x.redAdd(d));f=f.redAdd(f).redIAdd(f);var p=l.redIAdd(l),m=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(m),i=this.y.redAdd(this.z).redSqr().redISub(u).redISub(d);var g=u.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=f.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,i)},d.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,s=this.z,r=s.redSqr().redSqr(),a=t.redSqr(),n=i.redSqr(),o=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(r)),h=t.redAdd(t),c=(h=h.redIAdd(h)).redMul(n),d=o.redSqr().redISub(c.redAdd(c)),u=c.redISub(d),l=n.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=o.redMul(u).redISub(l),p=i.redAdd(i).redMul(s);return this.curve.jpoint(d,f,p)},d.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),s=t.redSqr(),r=e.redAdd(e).redIAdd(e),a=r.redSqr(),n=this.x.redAdd(t).redSqr().redISub(e).redISub(s),o=(n=(n=(n=n.redIAdd(n)).redAdd(n).redIAdd(n)).redISub(a)).redSqr(),h=s.redIAdd(s);h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var c=r.redIAdd(n).redSqr().redISub(a).redISub(o).redISub(h),d=t.redMul(c);d=(d=d.redIAdd(d)).redIAdd(d);var u=this.x.redMul(o).redISub(d);u=(u=u.redIAdd(u)).redIAdd(u);var l=this.y.redMul(c.redMul(h.redISub(c)).redISub(n.redMul(o)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=this.z.redAdd(n).redSqr().redISub(i).redISub(o);return this.curve.jpoint(u,l,f)},d.prototype.mul=function(e,t){return e=new r(e,t),this.curve._wnafMul(this,e)},d.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(0!==this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0))return!1;var s=t.redMul(this.z),r=i.redMul(e.z);return 0===this.y.redMul(r).redISub(e.y.redMul(s)).cmpn(0)},d.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(i))return!0;for(var s=e.clone(),r=this.curve.redN.redMul(t);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(r),0===this.x.cmp(i))return!0}},d.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},45427:(e,t,i)=>{"use strict";var s,r=t,a=i(33715),n=i(88254),o=i(80953).assert;function h(e){"short"===e.type?this.curve=new n.short(e):"edwards"===e.type?this.curve=new n.edwards(e):this.curve=new n.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,t){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){var i=new h(t);return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,value:i}),i}})}r.PresetCurve=h,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{s=i(91037)}catch(e){s=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",s]})},57954:(e,t,i)=>{"use strict";var s=i(73785),r=i(2156),a=i(80953),n=i(45427),o=i(29931),h=a.assert,c=i(31251),d=i(90611);function u(e){if(!(this instanceof u))return new u(e);"string"==typeof e&&(h(Object.prototype.hasOwnProperty.call(n,e),"Unknown curve "+e),e=n[e]),e instanceof n.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=u,u.prototype.keyPair=function(e){return new c(this,e)},u.prototype.keyFromPrivate=function(e,t){return c.fromPrivate(this,e,t)},u.prototype.keyFromPublic=function(e,t){return c.fromPublic(this,e,t)},u.prototype.genKeyPair=function(e){e||(e={});for(var t=new r({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||o(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),a=this.n.sub(new s(2));;){var n=new s(t.generate(i));if(!(n.cmp(a)>0))return n.iaddn(1),this.keyFromPrivate(n)}},u.prototype._truncateToN=function(e,t){var i=8*e.byteLength()-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},u.prototype.sign=function(e,t,i,a){"object"==typeof i&&(a=i,i=null),a||(a={}),t=this.keyFromPrivate(t,i),e=this._truncateToN(new s(e,16));for(var n=this.n.byteLength(),o=t.getPrivate().toArray("be",n),h=e.toArray("be",n),c=new r({hash:this.hash,entropy:o,nonce:h,pers:a.pers,persEnc:a.persEnc||"utf8"}),u=this.n.sub(new s(1)),l=0;;l++){var f=a.k?a.k(l):new s(c.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(u)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var m=p.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var y=f.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(y=y.umod(this.n)).cmpn(0)){var b=(p.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return a.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),b^=1),new d({r:g,s:y,recoveryParam:b})}}}}}},u.prototype.verify=function(e,t,i,r){e=this._truncateToN(new s(e,16)),i=this.keyFromPublic(i,r);var a=(t=new d(t,"hex")).r,n=t.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;if(n.cmpn(1)<0||n.cmp(this.n)>=0)return!1;var o,h=n.invm(this.n),c=h.mul(e).umod(this.n),u=h.mul(a).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(c,i.getPublic(),u)).isInfinity()&&o.eqXToP(a):!(o=this.g.mulAdd(c,i.getPublic(),u)).isInfinity()&&0===o.getX().umod(this.n).cmp(a)},u.prototype.recoverPubKey=function(e,t,i,r){h((3&i)===i,"The recovery param is more than two bits"),t=new d(t,r);var a=this.n,n=new s(e),o=t.r,c=t.s,u=1&i,l=i>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");o=l?this.curve.pointFromX(o.add(this.curve.n),u):this.curve.pointFromX(o,u);var f=t.r.invm(a),p=a.sub(n).mul(f).umod(a),m=c.mul(f).umod(a);return this.g.mulAdd(p,o,m)},u.prototype.getKeyRecoveryParam=function(e,t,i,s){if(null!==(t=new d(t,s)).recoveryParam)return t.recoveryParam;for(var r=0;r<4;r++){var a;try{a=this.recoverPubKey(e,t,r)}catch(e){continue}if(a.eq(i))return r}throw new Error("Unable to find valid recovery factor")}},31251:(e,t,i)=>{"use strict";var s=i(73785),r=i(80953).assert;function a(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=a,a.fromPublic=function(e,t,i){return t instanceof a?t:new a(e,{pub:t,pubEnc:i})},a.fromPrivate=function(e,t,i){return t instanceof a?t:new a(e,{priv:t,privEnc:i})},a.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},a.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(e,t){this.priv=new s(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?r(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||r(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},a.prototype.derive=function(e){return e.validate()||r(e.validate(),"public point not validated"),e.mul(this.priv).getX()},a.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)},a.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},90611:(e,t,i)=>{"use strict";var s=i(73785),r=i(80953),a=r.assert;function n(e,t){if(e instanceof n)return e;this._importDER(e,t)||(a(e.r&&e.s,"Signature without r or s"),this.r=new s(e.r,16),this.s=new s(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function o(){this.place=0}function h(e,t){var i=e[t.place++];if(!(128&i))return i;var s=15&i;if(0===s||s>4)return!1;for(var r=0,a=0,n=t.place;a<s;a++,n++)r<<=8,r|=e[n],r>>>=0;return!(r<=127)&&(t.place=n,r)}function c(e){for(var t=0,i=e.length-1;!e[t]&&!(128&e[t+1])&&t<i;)t++;return 0===t?e:e.slice(t)}function d(e,t){if(t<128)e.push(t);else{var i=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|i);--i;)e.push(t>>>(i<<3)&255);e.push(t)}}e.exports=n,n.prototype._importDER=function(e,t){e=r.toArray(e,t);var i=new o;if(48!==e[i.place++])return!1;var a=h(e,i);if(!1===a)return!1;if(a+i.place!==e.length)return!1;if(2!==e[i.place++])return!1;var n=h(e,i);if(!1===n)return!1;var c=e.slice(i.place,n+i.place);if(i.place+=n,2!==e[i.place++])return!1;var d=h(e,i);if(!1===d)return!1;if(e.length!==d+i.place)return!1;var u=e.slice(i.place,d+i.place);if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}if(0===u[0]){if(!(128&u[1]))return!1;u=u.slice(1)}return this.r=new s(c),this.s=new s(u),this.recoveryParam=null,!0},n.prototype.toDER=function(e){var t=this.r.toArray(),i=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&i[0]&&(i=[0].concat(i)),t=c(t),i=c(i);!(i[0]||128&i[1]);)i=i.slice(1);var s=[2];d(s,t.length),(s=s.concat(t)).push(2),d(s,i.length);var a=s.concat(i),n=[48];return d(n,a.length),n=n.concat(a),r.encode(n,e)}},65980:(e,t,i)=>{"use strict";var s=i(33715),r=i(45427),a=i(80953),n=a.assert,o=a.parseBytes,h=i(79087),c=i(23622);function d(e){if(n("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof d))return new d(e);e=r[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=s.sha512}e.exports=d,d.prototype.sign=function(e,t){e=o(e);var i=this.keyFromSecret(t),s=this.hashInt(i.messagePrefix(),e),r=this.g.mul(s),a=this.encodePoint(r),n=this.hashInt(a,i.pubBytes(),e).mul(i.priv()),h=s.add(n).umod(this.curve.n);return this.makeSignature({R:r,S:h,Rencoded:a})},d.prototype.verify=function(e,t,i){e=o(e),t=this.makeSignature(t);var s=this.keyFromPublic(i),r=this.hashInt(t.Rencoded(),s.pubBytes(),e),a=this.g.mul(t.S());return t.R().add(s.pub().mul(r)).eq(a)},d.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return a.intFromLE(e.digest()).umod(this.curve.n)},d.prototype.keyFromPublic=function(e){return h.fromPublic(this,e)},d.prototype.keyFromSecret=function(e){return h.fromSecret(this,e)},d.prototype.makeSignature=function(e){return e instanceof c?e:new c(this,e)},d.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},d.prototype.decodePoint=function(e){var t=(e=a.parseBytes(e)).length-1,i=e.slice(0,t).concat(-129&e[t]),s=0!=(128&e[t]),r=a.intFromLE(i);return this.curve.pointFromY(r,s)},d.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},d.prototype.decodeInt=function(e){return a.intFromLE(e)},d.prototype.isPoint=function(e){return e instanceof this.pointClass}},79087:(e,t,i)=>{"use strict";var s=i(80953),r=s.assert,a=s.parseBytes,n=s.cachedProperty;function o(e,t){this.eddsa=e,this._secret=a(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=a(t.pub)}o.fromPublic=function(e,t){return t instanceof o?t:new o(e,{pub:t})},o.fromSecret=function(e,t){return t instanceof o?t:new o(e,{secret:t})},o.prototype.secret=function(){return this._secret},n(o,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),n(o,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),n(o,"privBytes",(function(){var e=this.eddsa,t=this.hash(),i=e.encodingLength-1,s=t.slice(0,e.encodingLength);return s[0]&=248,s[i]&=127,s[i]|=64,s})),n(o,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),n(o,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),n(o,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),o.prototype.sign=function(e){return r(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},o.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},o.prototype.getSecret=function(e){return r(this._secret,"KeyPair is public only"),s.encode(this.secret(),e)},o.prototype.getPublic=function(e){return s.encode(this.pubBytes(),e)},e.exports=o},23622:(e,t,i)=>{"use strict";var s=i(73785),r=i(80953),a=r.assert,n=r.cachedProperty,o=r.parseBytes;function h(e,t){this.eddsa=e,"object"!=typeof t&&(t=o(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),a(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof s&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}n(h,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),n(h,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),n(h,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),n(h,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),h.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},h.prototype.toHex=function(){return r.encode(this.toBytes(),"hex").toUpperCase()},e.exports=h},91037:e=>{e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},80953:(e,t,i)=>{"use strict";var s=t,r=i(73785),a=i(79746),n=i(34504);s.assert=a,s.toArray=n.toArray,s.zero2=n.zero2,s.toHex=n.toHex,s.encode=n.encode,s.getNAF=function(e,t,i){var s=new Array(Math.max(e.bitLength(),i)+1);s.fill(0);for(var r=1<<t+1,a=e.clone(),n=0;n<s.length;n++){var o,h=a.andln(r-1);a.isOdd()?(o=h>(r>>1)-1?(r>>1)-h:h,a.isubn(o)):o=0,s[n]=o,a.iushrn(1)}return s},s.getJSF=function(e,t){var i=[[],[]];e=e.clone(),t=t.clone();for(var s,r=0,a=0;e.cmpn(-r)>0||t.cmpn(-a)>0;){var n,o,h=e.andln(3)+r&3,c=t.andln(3)+a&3;3===h&&(h=-1),3===c&&(c=-1),n=0==(1&h)?0:3!=(s=e.andln(7)+r&7)&&5!==s||2!==c?h:-h,i[0].push(n),o=0==(1&c)?0:3!=(s=t.andln(7)+a&7)&&5!==s||2!==h?c:-c,i[1].push(o),2*r===n+1&&(r=1-r),2*a===o+1&&(a=1-a),e.iushrn(1),t.iushrn(1)}return i},s.cachedProperty=function(e,t,i){var s="_"+t;e.prototype[t]=function(){return void 0!==this[s]?this[s]:this[s]=i.call(this)}},s.parseBytes=function(e){return"string"==typeof e?s.toArray(e,"hex"):e},s.intFromLE=function(e){return new r(e,"hex","le")}},73785:function(e,t,i){!function(e,t){"use strict";function s(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function a(e,t,i){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(i=t,t=10),this._init(e||0,t||10,i||"be"))}var n;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(85568).Buffer}catch(e){}function o(e,t){var i=e.charCodeAt(t);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function h(e,t,i){var s=o(e,i);return i-1>=t&&(s|=o(e,i-1)<<4),s}function c(e,t,i,s){for(var r=0,a=Math.min(e.length,i),n=t;n<a;n++){var o=e.charCodeAt(n)-48;r*=s,r+=o>=49?o-49+10:o>=17?o-17+10:o}return r}a.isBN=function(e){return e instanceof a||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),s(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<e.length&&(16===t?this._parseHex(e,r,i):(this._parseBase(e,t,r),"le"===i&&this._initArray(this.toArray(),t,i)))},a.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(s(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},a.prototype._initArray=function(e,t,i){if(s("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var a,n,o=0;if("be"===i)for(r=e.length-1,a=0;r>=0;r-=3)n=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===i)for(r=0,a=0;r<e.length;r+=3)n=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this.strip()},a.prototype._parseHex=function(e,t,i){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var r,a=0,n=0;if("be"===i)for(s=e.length-1;s>=t;s-=2)r=h(e,t,s)<<a,this.words[n]|=67108863&r,a>=18?(a-=18,n+=1,this.words[n]|=r>>>26):a+=8;else for(s=(e.length-t)%2==0?t+1:t;s<e.length;s+=2)r=h(e,t,s)<<a,this.words[n]|=67108863&r,a>=18?(a-=18,n+=1,this.words[n]|=r>>>26):a+=8;this.strip()},a.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var s=0,r=1;r<=67108863;r*=t)s++;s--,r=r/t|0;for(var a=e.length-i,n=a%s,o=Math.min(a,a-n)+i,h=0,d=i;d<o;d+=s)h=c(e,d,d+s,t),this.imuln(r),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==n){var u=1;for(h=c(e,d,e.length,t),d=0;d<n;d++)u*=t;this.imuln(u),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,i){i.negative=t.negative^e.negative;var s=e.length+t.length|0;i.length=s,s=s-1|0;var r=0|e.words[0],a=0|t.words[0],n=r*a,o=67108863&n,h=n/67108864|0;i.words[0]=o;for(var c=1;c<s;c++){for(var d=h>>>26,u=67108863&h,l=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=l;f++){var p=c-f|0;d+=(n=(r=0|e.words[p])*(a=0|t.words[f])+u)/67108864|0,u=67108863&n}i.words[c]=0|u,h=0|d}return 0!==h?i.words[c]=0|h:i.length--,i.strip()}a.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var r=0,a=0,n=0;n<this.length;n++){var o=this.words[n],h=(16777215&(o<<r|a)).toString(16);i=0!=(a=o>>>24-r&16777215)||n!==this.length-1?d[6-h.length]+h+i:h+i,(r+=2)>=26&&(r-=26,n--)}for(0!==a&&(i=a.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var c=u[e],f=l[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);i=(p=p.idivn(f)).isZero()?m+i:d[c-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}s(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return s(void 0!==n),this.toArrayLike(n,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,i){var r=this.byteLength(),a=i||Math.max(1,r);s(r<=a,"byte array longer than desired length"),s(a>0,"Requested array length <= 0"),this.strip();var n,o,h="le"===t,c=new e(a),d=this.clone();if(h){for(o=0;!d.isZero();o++)n=d.andln(255),d.iushrn(8),c[o]=n;for(;o<a;o++)c[o]=0}else{for(o=0;o<a-r;o++)c[o]=0;for(o=0;!d.isZero();o++)n=d.andln(255),d.iushrn(8),c[a-o-1]=n}return c},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,i=0;return 0==(8191&t)&&(i+=13,t>>>=13),0==(127&t)&&(i+=7,t>>>=7),0==(15&t)&&(i+=4,t>>>=4),0==(3&t)&&(i+=2,t>>>=2),0==(1&t)&&i++,i},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var i=this._zeroBits(this.words[t]);if(e+=i,26!==i)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},a.prototype.ior=function(e){return s(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]&e.words[i];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return s(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,i;this.length>e.length?(t=this,i=e):(t=e,i=this);for(var s=0;s<i.length;s++)this.words[s]=t.words[s]^i.words[s];if(this!==t)for(;s<t.length;s++)this.words[s]=t.words[s];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return s(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){s("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){s("number"==typeof e&&e>=0);var i=e/26|0,r=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},a.prototype.iadd=function(e){var t,i,s;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(i=this,s=e):(i=e,s=this);for(var r=0,a=0;a<s.length;a++)t=(0|i.words[a])+(0|s.words[a])+r,this.words[a]=67108863&t,r=t>>>26;for(;0!==r&&a<i.length;a++)t=(0|i.words[a])+r,this.words[a]=67108863&t,r=t>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i,s,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,s=e):(i=e,s=this);for(var a=0,n=0;n<s.length;n++)a=(t=(0|i.words[n])-(0|s.words[n])+a)>>26,this.words[n]=67108863&t;for(;0!==a&&n<i.length;n++)a=(t=(0|i.words[n])+a)>>26,this.words[n]=67108863&t;if(0===a&&n<i.length&&i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this.length=Math.max(this.length,n),i!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,i){var s,r,a,n=e.words,o=t.words,h=i.words,c=0,d=0|n[0],u=8191&d,l=d>>>13,f=0|n[1],p=8191&f,m=f>>>13,g=0|n[2],y=8191&g,b=g>>>13,v=0|n[3],w=8191&v,k=v>>>13,_=0|n[4],S=8191&_,O=_>>>13,M=0|n[5],T=8191&M,x=M>>>13,I=0|n[6],A=8191&I,C=I>>>13,N=0|n[7],E=8191&N,P=N>>>13,B=0|n[8],R=8191&B,V=B>>>13,L=0|n[9],D=8191&L,q=L>>>13,G=0|o[0],F=8191&G,j=G>>>13,U=0|o[1],H=8191&U,z=U>>>13,K=0|o[2],W=8191&K,X=K>>>13,Z=0|o[3],Y=8191&Z,Q=Z>>>13,J=0|o[4],$=8191&J,ee=J>>>13,te=0|o[5],ie=8191&te,se=te>>>13,re=0|o[6],ae=8191&re,ne=re>>>13,oe=0|o[7],he=8191&oe,ce=oe>>>13,de=0|o[8],ue=8191&de,le=de>>>13,fe=0|o[9],pe=8191&fe,me=fe>>>13;i.negative=e.negative^t.negative,i.length=19;var ge=(c+(s=Math.imul(u,F))|0)+((8191&(r=(r=Math.imul(u,j))+Math.imul(l,F)|0))<<13)|0;c=((a=Math.imul(l,j))+(r>>>13)|0)+(ge>>>26)|0,ge&=67108863,s=Math.imul(p,F),r=(r=Math.imul(p,j))+Math.imul(m,F)|0,a=Math.imul(m,j);var ye=(c+(s=s+Math.imul(u,H)|0)|0)+((8191&(r=(r=r+Math.imul(u,z)|0)+Math.imul(l,H)|0))<<13)|0;c=((a=a+Math.imul(l,z)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,s=Math.imul(y,F),r=(r=Math.imul(y,j))+Math.imul(b,F)|0,a=Math.imul(b,j),s=s+Math.imul(p,H)|0,r=(r=r+Math.imul(p,z)|0)+Math.imul(m,H)|0,a=a+Math.imul(m,z)|0;var be=(c+(s=s+Math.imul(u,W)|0)|0)+((8191&(r=(r=r+Math.imul(u,X)|0)+Math.imul(l,W)|0))<<13)|0;c=((a=a+Math.imul(l,X)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,s=Math.imul(w,F),r=(r=Math.imul(w,j))+Math.imul(k,F)|0,a=Math.imul(k,j),s=s+Math.imul(y,H)|0,r=(r=r+Math.imul(y,z)|0)+Math.imul(b,H)|0,a=a+Math.imul(b,z)|0,s=s+Math.imul(p,W)|0,r=(r=r+Math.imul(p,X)|0)+Math.imul(m,W)|0,a=a+Math.imul(m,X)|0;var ve=(c+(s=s+Math.imul(u,Y)|0)|0)+((8191&(r=(r=r+Math.imul(u,Q)|0)+Math.imul(l,Y)|0))<<13)|0;c=((a=a+Math.imul(l,Q)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,s=Math.imul(S,F),r=(r=Math.imul(S,j))+Math.imul(O,F)|0,a=Math.imul(O,j),s=s+Math.imul(w,H)|0,r=(r=r+Math.imul(w,z)|0)+Math.imul(k,H)|0,a=a+Math.imul(k,z)|0,s=s+Math.imul(y,W)|0,r=(r=r+Math.imul(y,X)|0)+Math.imul(b,W)|0,a=a+Math.imul(b,X)|0,s=s+Math.imul(p,Y)|0,r=(r=r+Math.imul(p,Q)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,Q)|0;var we=(c+(s=s+Math.imul(u,$)|0)|0)+((8191&(r=(r=r+Math.imul(u,ee)|0)+Math.imul(l,$)|0))<<13)|0;c=((a=a+Math.imul(l,ee)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,s=Math.imul(T,F),r=(r=Math.imul(T,j))+Math.imul(x,F)|0,a=Math.imul(x,j),s=s+Math.imul(S,H)|0,r=(r=r+Math.imul(S,z)|0)+Math.imul(O,H)|0,a=a+Math.imul(O,z)|0,s=s+Math.imul(w,W)|0,r=(r=r+Math.imul(w,X)|0)+Math.imul(k,W)|0,a=a+Math.imul(k,X)|0,s=s+Math.imul(y,Y)|0,r=(r=r+Math.imul(y,Q)|0)+Math.imul(b,Y)|0,a=a+Math.imul(b,Q)|0,s=s+Math.imul(p,$)|0,r=(r=r+Math.imul(p,ee)|0)+Math.imul(m,$)|0,a=a+Math.imul(m,ee)|0;var ke=(c+(s=s+Math.imul(u,ie)|0)|0)+((8191&(r=(r=r+Math.imul(u,se)|0)+Math.imul(l,ie)|0))<<13)|0;c=((a=a+Math.imul(l,se)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,s=Math.imul(A,F),r=(r=Math.imul(A,j))+Math.imul(C,F)|0,a=Math.imul(C,j),s=s+Math.imul(T,H)|0,r=(r=r+Math.imul(T,z)|0)+Math.imul(x,H)|0,a=a+Math.imul(x,z)|0,s=s+Math.imul(S,W)|0,r=(r=r+Math.imul(S,X)|0)+Math.imul(O,W)|0,a=a+Math.imul(O,X)|0,s=s+Math.imul(w,Y)|0,r=(r=r+Math.imul(w,Q)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,Q)|0,s=s+Math.imul(y,$)|0,r=(r=r+Math.imul(y,ee)|0)+Math.imul(b,$)|0,a=a+Math.imul(b,ee)|0,s=s+Math.imul(p,ie)|0,r=(r=r+Math.imul(p,se)|0)+Math.imul(m,ie)|0,a=a+Math.imul(m,se)|0;var _e=(c+(s=s+Math.imul(u,ae)|0)|0)+((8191&(r=(r=r+Math.imul(u,ne)|0)+Math.imul(l,ae)|0))<<13)|0;c=((a=a+Math.imul(l,ne)|0)+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,s=Math.imul(E,F),r=(r=Math.imul(E,j))+Math.imul(P,F)|0,a=Math.imul(P,j),s=s+Math.imul(A,H)|0,r=(r=r+Math.imul(A,z)|0)+Math.imul(C,H)|0,a=a+Math.imul(C,z)|0,s=s+Math.imul(T,W)|0,r=(r=r+Math.imul(T,X)|0)+Math.imul(x,W)|0,a=a+Math.imul(x,X)|0,s=s+Math.imul(S,Y)|0,r=(r=r+Math.imul(S,Q)|0)+Math.imul(O,Y)|0,a=a+Math.imul(O,Q)|0,s=s+Math.imul(w,$)|0,r=(r=r+Math.imul(w,ee)|0)+Math.imul(k,$)|0,a=a+Math.imul(k,ee)|0,s=s+Math.imul(y,ie)|0,r=(r=r+Math.imul(y,se)|0)+Math.imul(b,ie)|0,a=a+Math.imul(b,se)|0,s=s+Math.imul(p,ae)|0,r=(r=r+Math.imul(p,ne)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,ne)|0;var Se=(c+(s=s+Math.imul(u,he)|0)|0)+((8191&(r=(r=r+Math.imul(u,ce)|0)+Math.imul(l,he)|0))<<13)|0;c=((a=a+Math.imul(l,ce)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,s=Math.imul(R,F),r=(r=Math.imul(R,j))+Math.imul(V,F)|0,a=Math.imul(V,j),s=s+Math.imul(E,H)|0,r=(r=r+Math.imul(E,z)|0)+Math.imul(P,H)|0,a=a+Math.imul(P,z)|0,s=s+Math.imul(A,W)|0,r=(r=r+Math.imul(A,X)|0)+Math.imul(C,W)|0,a=a+Math.imul(C,X)|0,s=s+Math.imul(T,Y)|0,r=(r=r+Math.imul(T,Q)|0)+Math.imul(x,Y)|0,a=a+Math.imul(x,Q)|0,s=s+Math.imul(S,$)|0,r=(r=r+Math.imul(S,ee)|0)+Math.imul(O,$)|0,a=a+Math.imul(O,ee)|0,s=s+Math.imul(w,ie)|0,r=(r=r+Math.imul(w,se)|0)+Math.imul(k,ie)|0,a=a+Math.imul(k,se)|0,s=s+Math.imul(y,ae)|0,r=(r=r+Math.imul(y,ne)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,ne)|0,s=s+Math.imul(p,he)|0,r=(r=r+Math.imul(p,ce)|0)+Math.imul(m,he)|0,a=a+Math.imul(m,ce)|0;var Oe=(c+(s=s+Math.imul(u,ue)|0)|0)+((8191&(r=(r=r+Math.imul(u,le)|0)+Math.imul(l,ue)|0))<<13)|0;c=((a=a+Math.imul(l,le)|0)+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,s=Math.imul(D,F),r=(r=Math.imul(D,j))+Math.imul(q,F)|0,a=Math.imul(q,j),s=s+Math.imul(R,H)|0,r=(r=r+Math.imul(R,z)|0)+Math.imul(V,H)|0,a=a+Math.imul(V,z)|0,s=s+Math.imul(E,W)|0,r=(r=r+Math.imul(E,X)|0)+Math.imul(P,W)|0,a=a+Math.imul(P,X)|0,s=s+Math.imul(A,Y)|0,r=(r=r+Math.imul(A,Q)|0)+Math.imul(C,Y)|0,a=a+Math.imul(C,Q)|0,s=s+Math.imul(T,$)|0,r=(r=r+Math.imul(T,ee)|0)+Math.imul(x,$)|0,a=a+Math.imul(x,ee)|0,s=s+Math.imul(S,ie)|0,r=(r=r+Math.imul(S,se)|0)+Math.imul(O,ie)|0,a=a+Math.imul(O,se)|0,s=s+Math.imul(w,ae)|0,r=(r=r+Math.imul(w,ne)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,ne)|0,s=s+Math.imul(y,he)|0,r=(r=r+Math.imul(y,ce)|0)+Math.imul(b,he)|0,a=a+Math.imul(b,ce)|0,s=s+Math.imul(p,ue)|0,r=(r=r+Math.imul(p,le)|0)+Math.imul(m,ue)|0,a=a+Math.imul(m,le)|0;var Me=(c+(s=s+Math.imul(u,pe)|0)|0)+((8191&(r=(r=r+Math.imul(u,me)|0)+Math.imul(l,pe)|0))<<13)|0;c=((a=a+Math.imul(l,me)|0)+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,s=Math.imul(D,H),r=(r=Math.imul(D,z))+Math.imul(q,H)|0,a=Math.imul(q,z),s=s+Math.imul(R,W)|0,r=(r=r+Math.imul(R,X)|0)+Math.imul(V,W)|0,a=a+Math.imul(V,X)|0,s=s+Math.imul(E,Y)|0,r=(r=r+Math.imul(E,Q)|0)+Math.imul(P,Y)|0,a=a+Math.imul(P,Q)|0,s=s+Math.imul(A,$)|0,r=(r=r+Math.imul(A,ee)|0)+Math.imul(C,$)|0,a=a+Math.imul(C,ee)|0,s=s+Math.imul(T,ie)|0,r=(r=r+Math.imul(T,se)|0)+Math.imul(x,ie)|0,a=a+Math.imul(x,se)|0,s=s+Math.imul(S,ae)|0,r=(r=r+Math.imul(S,ne)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,ne)|0,s=s+Math.imul(w,he)|0,r=(r=r+Math.imul(w,ce)|0)+Math.imul(k,he)|0,a=a+Math.imul(k,ce)|0,s=s+Math.imul(y,ue)|0,r=(r=r+Math.imul(y,le)|0)+Math.imul(b,ue)|0,a=a+Math.imul(b,le)|0;var Te=(c+(s=s+Math.imul(p,pe)|0)|0)+((8191&(r=(r=r+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,s=Math.imul(D,W),r=(r=Math.imul(D,X))+Math.imul(q,W)|0,a=Math.imul(q,X),s=s+Math.imul(R,Y)|0,r=(r=r+Math.imul(R,Q)|0)+Math.imul(V,Y)|0,a=a+Math.imul(V,Q)|0,s=s+Math.imul(E,$)|0,r=(r=r+Math.imul(E,ee)|0)+Math.imul(P,$)|0,a=a+Math.imul(P,ee)|0,s=s+Math.imul(A,ie)|0,r=(r=r+Math.imul(A,se)|0)+Math.imul(C,ie)|0,a=a+Math.imul(C,se)|0,s=s+Math.imul(T,ae)|0,r=(r=r+Math.imul(T,ne)|0)+Math.imul(x,ae)|0,a=a+Math.imul(x,ne)|0,s=s+Math.imul(S,he)|0,r=(r=r+Math.imul(S,ce)|0)+Math.imul(O,he)|0,a=a+Math.imul(O,ce)|0,s=s+Math.imul(w,ue)|0,r=(r=r+Math.imul(w,le)|0)+Math.imul(k,ue)|0,a=a+Math.imul(k,le)|0;var xe=(c+(s=s+Math.imul(y,pe)|0)|0)+((8191&(r=(r=r+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;c=((a=a+Math.imul(b,me)|0)+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,s=Math.imul(D,Y),r=(r=Math.imul(D,Q))+Math.imul(q,Y)|0,a=Math.imul(q,Q),s=s+Math.imul(R,$)|0,r=(r=r+Math.imul(R,ee)|0)+Math.imul(V,$)|0,a=a+Math.imul(V,ee)|0,s=s+Math.imul(E,ie)|0,r=(r=r+Math.imul(E,se)|0)+Math.imul(P,ie)|0,a=a+Math.imul(P,se)|0,s=s+Math.imul(A,ae)|0,r=(r=r+Math.imul(A,ne)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,ne)|0,s=s+Math.imul(T,he)|0,r=(r=r+Math.imul(T,ce)|0)+Math.imul(x,he)|0,a=a+Math.imul(x,ce)|0,s=s+Math.imul(S,ue)|0,r=(r=r+Math.imul(S,le)|0)+Math.imul(O,ue)|0,a=a+Math.imul(O,le)|0;var Ie=(c+(s=s+Math.imul(w,pe)|0)|0)+((8191&(r=(r=r+Math.imul(w,me)|0)+Math.imul(k,pe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,s=Math.imul(D,$),r=(r=Math.imul(D,ee))+Math.imul(q,$)|0,a=Math.imul(q,ee),s=s+Math.imul(R,ie)|0,r=(r=r+Math.imul(R,se)|0)+Math.imul(V,ie)|0,a=a+Math.imul(V,se)|0,s=s+Math.imul(E,ae)|0,r=(r=r+Math.imul(E,ne)|0)+Math.imul(P,ae)|0,a=a+Math.imul(P,ne)|0,s=s+Math.imul(A,he)|0,r=(r=r+Math.imul(A,ce)|0)+Math.imul(C,he)|0,a=a+Math.imul(C,ce)|0,s=s+Math.imul(T,ue)|0,r=(r=r+Math.imul(T,le)|0)+Math.imul(x,ue)|0,a=a+Math.imul(x,le)|0;var Ae=(c+(s=s+Math.imul(S,pe)|0)|0)+((8191&(r=(r=r+Math.imul(S,me)|0)+Math.imul(O,pe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,s=Math.imul(D,ie),r=(r=Math.imul(D,se))+Math.imul(q,ie)|0,a=Math.imul(q,se),s=s+Math.imul(R,ae)|0,r=(r=r+Math.imul(R,ne)|0)+Math.imul(V,ae)|0,a=a+Math.imul(V,ne)|0,s=s+Math.imul(E,he)|0,r=(r=r+Math.imul(E,ce)|0)+Math.imul(P,he)|0,a=a+Math.imul(P,ce)|0,s=s+Math.imul(A,ue)|0,r=(r=r+Math.imul(A,le)|0)+Math.imul(C,ue)|0,a=a+Math.imul(C,le)|0;var Ce=(c+(s=s+Math.imul(T,pe)|0)|0)+((8191&(r=(r=r+Math.imul(T,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((a=a+Math.imul(x,me)|0)+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,s=Math.imul(D,ae),r=(r=Math.imul(D,ne))+Math.imul(q,ae)|0,a=Math.imul(q,ne),s=s+Math.imul(R,he)|0,r=(r=r+Math.imul(R,ce)|0)+Math.imul(V,he)|0,a=a+Math.imul(V,ce)|0,s=s+Math.imul(E,ue)|0,r=(r=r+Math.imul(E,le)|0)+Math.imul(P,ue)|0,a=a+Math.imul(P,le)|0;var Ne=(c+(s=s+Math.imul(A,pe)|0)|0)+((8191&(r=(r=r+Math.imul(A,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((a=a+Math.imul(C,me)|0)+(r>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,s=Math.imul(D,he),r=(r=Math.imul(D,ce))+Math.imul(q,he)|0,a=Math.imul(q,ce),s=s+Math.imul(R,ue)|0,r=(r=r+Math.imul(R,le)|0)+Math.imul(V,ue)|0,a=a+Math.imul(V,le)|0;var Ee=(c+(s=s+Math.imul(E,pe)|0)|0)+((8191&(r=(r=r+Math.imul(E,me)|0)+Math.imul(P,pe)|0))<<13)|0;c=((a=a+Math.imul(P,me)|0)+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,s=Math.imul(D,ue),r=(r=Math.imul(D,le))+Math.imul(q,ue)|0,a=Math.imul(q,le);var Pe=(c+(s=s+Math.imul(R,pe)|0)|0)+((8191&(r=(r=r+Math.imul(R,me)|0)+Math.imul(V,pe)|0))<<13)|0;c=((a=a+Math.imul(V,me)|0)+(r>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Be=(c+(s=Math.imul(D,pe))|0)+((8191&(r=(r=Math.imul(D,me))+Math.imul(q,pe)|0))<<13)|0;return c=((a=Math.imul(q,me))+(r>>>13)|0)+(Be>>>26)|0,Be&=67108863,h[0]=ge,h[1]=ye,h[2]=be,h[3]=ve,h[4]=we,h[5]=ke,h[6]=_e,h[7]=Se,h[8]=Oe,h[9]=Me,h[10]=Te,h[11]=xe,h[12]=Ie,h[13]=Ae,h[14]=Ce,h[15]=Ne,h[16]=Ee,h[17]=Pe,h[18]=Be,0!==c&&(h[19]=c,i.length++),i};function m(e,t,i){return(new g).mulp(e,t,i)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=f),a.prototype.mulTo=function(e,t){var i=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):i<63?f(this,e,t):i<1024?function(e,t,i){i.negative=t.negative^e.negative,i.length=e.length+t.length;for(var s=0,r=0,a=0;a<i.length-1;a++){var n=r;r=0;for(var o=67108863&s,h=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=h;c++){var d=a-c,u=(0|e.words[d])*(0|t.words[c]),l=67108863&u;o=67108863&(l=l+o|0),r+=(n=(n=n+(u/67108864|0)|0)+(l>>>26)|0)>>>26,n&=67108863}i.words[a]=o,s=n,n=r}return 0!==s?i.words[a]=s:i.length--,i.strip()}(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),i=a.prototype._countBits(e)-1,s=0;s<e;s++)t[s]=this.revBin(s,i,e);return t},g.prototype.revBin=function(e,t,i){if(0===e||e===i-1)return e;for(var s=0,r=0;r<t;r++)s|=(1&e)<<t-r-1,e>>=1;return s},g.prototype.permute=function(e,t,i,s,r,a){for(var n=0;n<a;n++)s[n]=t[e[n]],r[n]=i[e[n]]},g.prototype.transform=function(e,t,i,s,r,a){this.permute(a,e,t,i,s,r);for(var n=1;n<r;n<<=1)for(var o=n<<1,h=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),d=0;d<r;d+=o)for(var u=h,l=c,f=0;f<n;f++){var p=i[d+f],m=s[d+f],g=i[d+f+n],y=s[d+f+n],b=u*g-l*y;y=u*y+l*g,g=b,i[d+f]=p+g,s[d+f]=m+y,i[d+f+n]=p-g,s[d+f+n]=m-y,f!==o&&(b=h*u-c*l,l=h*l+c*u,u=b)}},g.prototype.guessLen13b=function(e,t){var i=1|Math.max(t,e),s=1&i,r=0;for(i=i/2|0;i;i>>>=1)r++;return 1<<r+1+s},g.prototype.conjugate=function(e,t,i){if(!(i<=1))for(var s=0;s<i/2;s++){var r=e[s];e[s]=e[i-s-1],e[i-s-1]=r,r=t[s],t[s]=-t[i-s-1],t[i-s-1]=-r}},g.prototype.normalize13b=function(e,t){for(var i=0,s=0;s<t/2;s++){var r=8192*Math.round(e[2*s+1]/t)+Math.round(e[2*s]/t)+i;e[s]=67108863&r,i=r<67108864?0:r/67108864|0}return e},g.prototype.convert13b=function(e,t,i,r){for(var a=0,n=0;n<t;n++)a+=0|e[n],i[2*n]=8191&a,a>>>=13,i[2*n+1]=8191&a,a>>>=13;for(n=2*t;n<r;++n)i[n]=0;s(0===a),s(0==(-8192&a))},g.prototype.stub=function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=0;return t},g.prototype.mulp=function(e,t,i){var s=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(s),a=this.stub(s),n=new Array(s),o=new Array(s),h=new Array(s),c=new Array(s),d=new Array(s),u=new Array(s),l=i.words;l.length=s,this.convert13b(e.words,e.length,n,s),this.convert13b(t.words,t.length,c,s),this.transform(n,a,o,h,s,r),this.transform(c,a,d,u,s,r);for(var f=0;f<s;f++){var p=o[f]*d[f]-h[f]*u[f];h[f]=o[f]*u[f]+h[f]*d[f],o[f]=p}return this.conjugate(o,h,s),this.transform(o,h,l,a,s,r),this.conjugate(l,a,s),this.normalize13b(l,s),i.negative=e.negative^t.negative,i.length=e.length+t.length,i.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),m(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){s("number"==typeof e),s(e<67108864);for(var t=0,i=0;i<this.length;i++){var r=(0|this.words[i])*e,a=(67108863&r)+(67108863&t);t>>=26,t+=r/67108864|0,t+=a>>>26,this.words[i]=67108863&a}return 0!==t&&(this.words[i]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),i=0;i<t.length;i++){var s=i/26|0,r=i%26;t[i]=(e.words[s]&1<<r)>>>r}return t}(e);if(0===t.length)return new a(1);for(var i=this,s=0;s<t.length&&0===t[s];s++,i=i.sqr());if(++s<t.length)for(var r=i.sqr();s<t.length;s++,r=r.sqr())0!==t[s]&&(i=i.mul(r));return i},a.prototype.iushln=function(e){s("number"==typeof e&&e>=0);var t,i=e%26,r=(e-i)/26,a=67108863>>>26-i<<26-i;if(0!==i){var n=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,h=(0|this.words[t])-o<<i;this.words[t]=h|n,n=o>>>26-i}n&&(this.words[t]=n,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this.strip()},a.prototype.ishln=function(e){return s(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,i){var r;s("number"==typeof e&&e>=0),r=t?(t-t%26)/26:0;var a=e%26,n=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,h=i;if(r-=n,r=Math.max(0,r),h){for(var c=0;c<n;c++)h.words[c]=this.words[c];h.length=n}if(0===n);else if(this.length>n)for(this.length-=n,c=0;c<this.length;c++)this.words[c]=this.words[c+n];else this.words[0]=0,this.length=1;var d=0;for(c=this.length-1;c>=0&&(0!==d||c>=r);c--){var u=0|this.words[c];this.words[c]=d<<26-a|u>>>a,d=u&o}return h&&0!==d&&(h.words[h.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,i){return s(0===this.negative),this.iushrn(e,t,i)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,r=1<<t;return!(this.length<=i||!(this.words[i]&r))},a.prototype.imaskn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this.strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return s("number"==typeof e),s(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(s("number"==typeof e),s(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,i){var r,a,n=e.length+i;this._expand(n);var o=0;for(r=0;r<e.length;r++){a=(0|this.words[r+i])+o;var h=(0|e.words[r])*t;o=((a-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&a}for(;r<this.length-i;r++)o=(a=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&a;if(0===o)return this.strip();for(s(-1===o),o=0,r=0;r<this.length;r++)o=(a=-(0|this.words[r])+o)>>26,this.words[r]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var i=(this.length,e.length),s=this.clone(),r=e,n=0|r.words[r.length-1];0!=(i=26-this._countBits(n))&&(r=r.ushln(i),s.iushln(i),n=0|r.words[r.length-1]);var o,h=s.length-r.length;if("mod"!==t){(o=new a(null)).length=h+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var d=s.clone()._ishlnsubmul(r,1,h);0===d.negative&&(s=d,o&&(o.words[h]=1));for(var u=h-1;u>=0;u--){var l=67108864*(0|s.words[r.length+u])+(0|s.words[r.length+u-1]);for(l=Math.min(l/n|0,67108863),s._ishlnsubmul(r,l,u);0!==s.negative;)l--,s.negative=0,s._ishlnsubmul(r,1,u),s.isZero()||(s.negative^=1);o&&(o.words[u]=l)}return o&&o.strip(),s.strip(),"div"!==t&&0!==i&&s.iushrn(i),{div:o||null,mod:s}},a.prototype.divmod=function(e,t,i){return s(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(r=o.div.neg()),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.iadd(e)),{div:r,mod:n}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.isub(e)),{div:o.div,mod:n}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t);var r,n,o},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var i=0!==t.div.negative?t.mod.isub(e):t.mod,s=e.ushrn(1),r=e.andln(1),a=i.cmp(s);return a<0||1===r&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modn=function(e){s(e<=67108863);for(var t=(1<<26)%e,i=0,r=this.length-1;r>=0;r--)i=(t*i+(0|this.words[r]))%e;return i},a.prototype.idivn=function(e){s(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*t;this.words[i]=r/e|0,t=r%e}return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new a(1),n=new a(0),o=new a(0),h=new a(1),c=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++c;for(var d=i.clone(),u=t.clone();!t.isZero();){for(var l=0,f=1;0==(t.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(d),n.isub(u)),r.iushrn(1),n.iushrn(1);for(var p=0,m=1;0==(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(d),h.isub(u)),o.iushrn(1),h.iushrn(1);t.cmp(i)>=0?(t.isub(i),r.isub(o),n.isub(h)):(i.isub(t),o.isub(r),h.isub(n))}return{a:o,b:h,gcd:i.iushln(c)}},a.prototype._invmp=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,n=new a(1),o=new a(0),h=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,d=1;0==(t.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(t.iushrn(c);c-- >0;)n.isOdd()&&n.iadd(h),n.iushrn(1);for(var u=0,l=1;0==(i.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(i.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);t.cmp(i)>=0?(t.isub(i),n.isub(o)):(i.isub(t),o.isub(n))}return(r=0===t.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(e),r},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),i=e.clone();t.negative=0,i.negative=0;for(var s=0;t.isEven()&&i.isEven();s++)t.iushrn(1),i.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=t.cmp(i);if(r<0){var a=t;t=i,i=a}else if(0===r||0===i.cmpn(1))break;t.isub(i)}return i.iushln(s)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){s("number"==typeof e);var t=e%26,i=(e-t)/26,r=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var a=r,n=i;0!==a&&n<this.length;n++){var o=0|this.words[n];a=(o+=a)>>>26,o&=67108863,this.words[n]=o}return 0!==a&&(this.words[n]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),s(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,i=this.length-1;i>=0;i--){var s=0|this.words[i],r=0|e.words[i];if(s!==r){s<r?t=-1:s>r&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new S(e)},a.prototype.toRed=function(e){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return s(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return s(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else s(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function O(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,i=e;do{this.split(i,this.tmp),t=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(t>this.n);var s=t<this.n?-1:i.ucmp(this.p);return 0===s?(i.words[0]=0,i.length=1):s>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},r(v,b),v.prototype.split=function(e,t){for(var i=4194303,s=Math.min(e.length,9),r=0;r<s;r++)t.words[r]=e.words[r];if(t.length=s,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&i,r=10;r<e.length;r++){var n=0|e.words[r];e.words[r-10]=(n&i)<<4|a>>>22,a=n}a>>>=22,e.words[r-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,i=0;i<e.length;i++){var s=0|e.words[i];t+=977*s,e.words[i]=67108863&t,t=64*s+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(w,b),r(k,b),r(_,b),_.prototype.imulK=function(e){for(var t=0,i=0;i<e.length;i++){var s=19*(0|e.words[i])+t,r=67108863&s;s>>>=26,e.words[i]=r,t=s}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new w;else if("p192"===e)t=new k;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return y[e]=t,t},S.prototype._verify1=function(e){s(0===e.negative,"red works only with positives"),s(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){s(0==(e.negative|t.negative),"red works only with positives"),s(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var i=e.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var i=e.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i},S.prototype.sub=function(e,t){this._verify2(e,t);var i=e.sub(t);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var i=e.isub(t);return i.cmpn(0)<0&&i.iadd(this.m),i},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(s(t%2==1),3===t){var i=this.m.add(new a(1)).iushrn(2);return this.pow(e,i)}for(var r=this.m.subn(1),n=0;!r.isZero()&&0===r.andln(1);)n++,r.iushrn(1);s(!r.isZero());var o=new a(1).toRed(this),h=o.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);0!==this.pow(d,c).cmp(h);)d.redIAdd(h);for(var u=this.pow(d,r),l=this.pow(e,r.addn(1).iushrn(1)),f=this.pow(e,r),p=n;0!==f.cmp(o);){for(var m=f,g=0;0!==m.cmp(o);g++)m=m.redSqr();s(g<p);var y=this.pow(u,new a(1).iushln(p-g-1));l=l.redMul(y),u=y.redSqr(),f=f.redMul(u),p=g}return l},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var i=new Array(16);i[0]=new a(1).toRed(this),i[1]=e;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],e);var r=i[0],n=0,o=0,h=t.bitLength()%26;for(0===h&&(h=26),s=t.length-1;s>=0;s--){for(var c=t.words[s],d=h-1;d>=0;d--){var u=c>>d&1;r!==i[0]&&(r=this.sqr(r)),0!==u||0!==n?(n<<=1,n|=u,(4==++o||0===s&&0===d)&&(r=this.mul(r,i[n]),o=0,n=0)):o=0}h=26}return r},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new O(e)},r(O,S),O.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},O.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},O.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var i=e.imul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},O.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var i=e.mul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n._forceRed(this)},O.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=i.nmd(e),this)},17519:e=>{"use strict";e.exports={i8:"6.5.4"}},94079:(e,t,i)=>{"use strict";var s=i(40210)("%Object.getOwnPropertyDescriptor%",!0);if(s)try{s([],"length")}catch(e){s=null}e.exports=s},8091:e=>{"use strict";function t(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var i=Object(e),s=1;s<arguments.length;s++){var r=arguments[s];if(null!=r)for(var a=Object.keys(Object(r)),n=0,o=a.length;n<o;n++){var h=a[n],c=Object.getOwnPropertyDescriptor(r,h);void 0!==c&&c.enumerable&&(i[h]=r[h])}}return i}e.exports={assign:t,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}}},17187:(e,t,i)=>{"use strict";var s,r=i(25108),a="object"==typeof Reflect?Reflect:null,n=a&&"function"==typeof a.apply?a.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};s=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function h(){h.init.call(this)}e.exports=h,e.exports.once=function(e,t){return new Promise((function(i,s){function r(i){e.removeListener(t,a),s(i)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",r),i([].slice.call(arguments))}b(e,t,a,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&b(e,"error",t,{once:!0})}(e,r)}))},h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var c=10;function d(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?h.defaultMaxListeners:e._maxListeners}function l(e,t,i,s){var a,n,o,h;if(d(i),void 0===(n=e._events)?(n=e._events=Object.create(null),e._eventsCount=0):(void 0!==n.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),n=e._events),o=n[t]),void 0===o)o=n[t]=i,++e._eventsCount;else if("function"==typeof o?o=n[t]=s?[i,o]:[o,i]:s?o.unshift(i):o.push(i),(a=u(e))>0&&o.length>a&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,h=c,r&&r.warn&&r.warn(h)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,i){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},r=f.bind(s);return r.listener=i,s.wrapFn=r,r}function m(e,t,i){var s=e._events;if(void 0===s)return[];var r=s[t];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(r):y(r,r.length)}function g(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function y(e,t){for(var i=new Array(t),s=0;s<t;++s)i[s]=e[s];return i}function b(e,t,i,s){if("function"==typeof e.on)s.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(a){s.once&&e.removeEventListener(t,r),i(a)}))}}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),h.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},h.prototype.getMaxListeners=function(){return u(this)},h.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var s="error"===e,r=this._events;if(void 0!==r)s=s&&void 0===r.error;else if(!s)return!1;if(s){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var h=r[e];if(void 0===h)return!1;if("function"==typeof h)n(h,this,t);else{var c=h.length,d=y(h,c);for(i=0;i<c;++i)n(d[i],this,t)}return!0},h.prototype.addListener=function(e,t){return l(this,e,t,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(e,t){return l(this,e,t,!0)},h.prototype.once=function(e,t){return d(t),this.on(e,p(this,e,t)),this},h.prototype.prependOnceListener=function(e,t){return d(t),this.prependListener(e,p(this,e,t)),this},h.prototype.removeListener=function(e,t){var i,s,r,a,n;if(d(t),void 0===(s=this._events))return this;if(void 0===(i=s[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,a=i.length-1;a>=0;a--)if(i[a]===t||i[a].listener===t){n=i[a].listener,r=a;break}if(r<0)return this;0===r?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,r),1===i.length&&(s[e]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",e,n||t)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(e){var t,i,s;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var r,a=Object.keys(i);for(s=0;s<a.length;++s)"removeListener"!==(r=a[s])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this},h.prototype.listeners=function(e){return m(this,e,!0)},h.prototype.rawListeners=function(e){return m(this,e,!1)},h.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},h.prototype.listenerCount=g,h.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]}},13048:(e,t,i)=>{var s=i(89509).Buffer,r=i(62318);e.exports=function(e,t,i,a){if(s.isBuffer(e)||(e=s.from(e,"binary")),t&&(s.isBuffer(t)||(t=s.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var n=i/8,o=s.alloc(n),h=s.alloc(a||0),c=s.alloc(0);n>0||a>0;){var d=new r;d.update(c),d.update(e),t&&d.update(t),c=d.digest();var u=0;if(n>0){var l=o.length-n;u=Math.min(n,c.length),c.copy(o,l,0,u),n-=u}if(u<c.length&&a>0){var f=h.length-a,p=Math.min(a,c.length-u);c.copy(h,f,u,u+p),a-=p}}return c.fill(0),{key:o,iv:h}}},49804:e=>{var t=Object.prototype.hasOwnProperty,i=Object.prototype.toString;e.exports=function(e,s,r){if("[object Function]"!==i.call(s))throw new TypeError("iterator must be a function");var a=e.length;if(a===+a)for(var n=0;n<a;n++)s.call(r,e[n],n,e);else for(var o in e)t.call(e,o)&&s.call(r,e[o],o,e)}},17648:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,s=Object.prototype.toString,r="[object Function]";e.exports=function(e){var a=this;if("function"!=typeof a||s.call(a)!==r)throw new TypeError(t+a);for(var n,o=i.call(arguments,1),h=function(){if(this instanceof n){var t=a.apply(this,o.concat(i.call(arguments)));return Object(t)===t?t:this}return a.apply(e,o.concat(i.call(arguments)))},c=Math.max(0,a.length-o.length),d=[],u=0;u<c;u++)d.push("$"+u);if(n=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(h),a.prototype){var l=function(){};l.prototype=a.prototype,n.prototype=new l,l.prototype=null}return n}},58612:(e,t,i)=>{"use strict";var s=i(17648);e.exports=Function.prototype.bind||s},40210:(e,t,i)=>{"use strict";var s,r=SyntaxError,a=Function,n=TypeError,o=function(e){try{return a('"use strict"; return ('+e+").constructor;")()}catch(e){}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch(e){h=null}var c=function(){throw new n},d=h?function(){try{return c}catch(e){try{return h(arguments,"callee").get}catch(e){return c}}}():c,u=i(41405)(),l=Object.getPrototypeOf||function(e){return e.__proto__},f={},p="undefined"==typeof Uint8Array?s:l(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?s:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?s:ArrayBuffer,"%ArrayIteratorPrototype%":u?l([][Symbol.iterator]()):s,"%AsyncFromSyncIteratorPrototype%":s,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?s:Atomics,"%BigInt%":"undefined"==typeof BigInt?s:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?s:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?s:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?s:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?s:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?s:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?s:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?s:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?l(l([][Symbol.iterator]())):s,"%JSON%":"object"==typeof JSON?JSON:s,"%Map%":"undefined"==typeof Map?s:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&u?l((new Map)[Symbol.iterator]()):s,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?s:Promise,"%Proxy%":"undefined"==typeof Proxy?s:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?s:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?s:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&u?l((new Set)[Symbol.iterator]()):s,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?s:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":u?l(""[Symbol.iterator]()):s,"%Symbol%":u?Symbol:s,"%SyntaxError%":r,"%ThrowTypeError%":d,"%TypedArray%":p,"%TypeError%":n,"%Uint8Array%":"undefined"==typeof Uint8Array?s:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?s:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?s:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?s:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?s:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?s:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?s:WeakSet},g=function e(t){var i;if("%AsyncFunction%"===t)i=o("async function () {}");else if("%GeneratorFunction%"===t)i=o("function* () {}");else if("%AsyncGeneratorFunction%"===t)i=o("async function* () {}");else if("%AsyncGenerator%"===t){var s=e("%AsyncGeneratorFunction%");s&&(i=s.prototype)}else if("%AsyncIteratorPrototype%"===t){var r=e("%AsyncGenerator%");r&&(i=l(r.prototype))}return m[t]=i,i},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=i(58612),v=i(17642),w=b.call(Function.call,Array.prototype.concat),k=b.call(Function.apply,Array.prototype.splice),_=b.call(Function.call,String.prototype.replace),S=b.call(Function.call,String.prototype.slice),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,T=function(e){var t=S(e,0,1),i=S(e,-1);if("%"===t&&"%"!==i)throw new r("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==t)throw new r("invalid intrinsic syntax, expected opening `%`");var s=[];return _(e,O,(function(e,t,i,r){s[s.length]=i?_(r,M,"$1"):t||e})),s},x=function(e,t){var i,s=e;if(v(y,s)&&(s="%"+(i=y[s])[0]+"%"),v(m,s)){var a=m[s];if(a===f&&(a=g(s)),void 0===a&&!t)throw new n("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:s,value:a}}throw new r("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new n("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new n('"allowMissing" argument must be a boolean');var i=T(e),s=i.length>0?i[0]:"",a=x("%"+s+"%",t),o=a.name,c=a.value,d=!1,u=a.alias;u&&(s=u[0],k(i,w([0,1],u)));for(var l=1,f=!0;l<i.length;l+=1){var p=i[l],g=S(p,0,1),y=S(p,-1);if(('"'===g||"'"===g||"`"===g||'"'===y||"'"===y||"`"===y)&&g!==y)throw new r("property names with quotes must have matching quotes");if("constructor"!==p&&f||(d=!0),v(m,o="%"+(s+="."+p)+"%"))c=m[o];else if(null!=c){if(!(p in c)){if(!t)throw new n("base intrinsic for "+e+" exists, but the property is not available.");return}if(h&&l+1>=i.length){var b=h(c,p);c=(f=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:c[p]}else f=v(c,p),c=c[p];f&&!d&&(m[o]=c)}}return c}},41405:(e,t,i)=>{"use strict";var s="undefined"!=typeof Symbol&&Symbol,r=i(55419);e.exports=function(){return"function"==typeof s&&"function"==typeof Symbol&&"symbol"==typeof s("foo")&&"symbol"==typeof Symbol("bar")&&r()}},55419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),i=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var s=Object.getOwnPropertySymbols(e);if(1!==s.length||s[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(e,t);if(42!==r.value||!0!==r.enumerable)return!1}return!0}},17642:(e,t,i)=>{"use strict";var s=i(58612);e.exports=s.call(Function.call,Object.prototype.hasOwnProperty)},3349:(e,t,i)=>{"use strict";var s=i(89509).Buffer,r=i(88473).Transform;function a(e){r.call(this),this._block=s.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}i(35717)(a,r),a.prototype._transform=function(e,t,i){var s=null;try{this.update(e,t)}catch(e){s=e}i(s)},a.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},a.prototype.update=function(e,t){if(function(e,t){if(!s.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer")}(e),this._finalized)throw new Error("Digest already called");s.isBuffer(e)||(e=s.from(e,t));for(var i=this._block,r=0;this._blockOffset+e.length-r>=this._blockSize;){for(var a=this._blockOffset;a<this._blockSize;)i[a++]=e[r++];this._update(),this._blockOffset=0}for(;r<e.length;)i[this._blockOffset++]=e[r++];for(var n=0,o=8*e.length;o>0;++n)this._length[n]+=o,(o=this._length[n]/4294967296|0)>0&&(this._length[n]-=4294967296*o);return this},a.prototype._update=function(){throw new Error("_update is not implemented")},a.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return t},a.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=a},33715:(e,t,i)=>{var s=t;s.utils=i(26436),s.common=i(95772),s.sha=i(89041),s.ripemd=i(12949),s.hmac=i(52344),s.sha1=s.sha.sha1,s.sha256=s.sha.sha256,s.sha224=s.sha.sha224,s.sha384=s.sha.sha384,s.sha512=s.sha.sha512,s.ripemd160=s.ripemd.ripemd160},95772:(e,t,i)=>{"use strict";var s=i(26436),r=i(79746);function a(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=a,a.prototype.update=function(e,t){if(e=s.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var i=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-i,e.length),0===this.pending.length&&(this.pending=null),e=s.join32(e,0,e.length-i,this.endian);for(var r=0;r<e.length;r+=this._delta32)this._update(e,r,r+this._delta32)}return this},a.prototype.digest=function(e){return this.update(this._pad()),r(null===this.pending),this._digest(e)},a.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,i=t-(e+this.padLength)%t,s=new Array(i+this.padLength);s[0]=128;for(var r=1;r<i;r++)s[r]=0;if(e<<=3,"big"===this.endian){for(var a=8;a<this.padLength;a++)s[r++]=0;s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=e>>>24&255,s[r++]=e>>>16&255,s[r++]=e>>>8&255,s[r++]=255&e}else for(s[r++]=255&e,s[r++]=e>>>8&255,s[r++]=e>>>16&255,s[r++]=e>>>24&255,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=0,a=8;a<this.padLength;a++)s[r++]=0;return s}},52344:(e,t,i)=>{"use strict";var s=i(26436),r=i(79746);function a(e,t,i){if(!(this instanceof a))return new a(e,t,i);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(s.toArray(t,i))}e.exports=a,a.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),r(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},a.prototype.update=function(e,t){return this.inner.update(e,t),this},a.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},12949:(e,t,i)=>{"use strict";var s=i(26436),r=i(95772),a=s.rotl32,n=s.sum32,o=s.sum32_3,h=s.sum32_4,c=r.BlockHash;function d(){if(!(this instanceof d))return new d;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function u(e,t,i,s){return e<=15?t^i^s:e<=31?t&i|~t&s:e<=47?(t|~i)^s:e<=63?t&s|i&~s:t^(i|~s)}function l(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function f(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}s.inherits(d,c),t.ripemd160=d,d.blockSize=512,d.outSize=160,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(e,t){for(var i=this.h[0],s=this.h[1],r=this.h[2],c=this.h[3],d=this.h[4],b=i,v=s,w=r,k=c,_=d,S=0;S<80;S++){var O=n(a(h(i,u(S,s,r,c),e[p[S]+t],l(S)),g[S]),d);i=d,d=c,c=a(r,10),r=s,s=O,O=n(a(h(b,u(79-S,v,w,k),e[m[S]+t],f(S)),y[S]),_),b=_,_=k,k=a(w,10),w=v,v=O}O=o(this.h[1],r,k),this.h[1]=o(this.h[2],c,_),this.h[2]=o(this.h[3],d,b),this.h[3]=o(this.h[4],i,v),this.h[4]=o(this.h[0],s,w),this.h[0]=O},d.prototype._digest=function(e){return"hex"===e?s.toHex32(this.h,"little"):s.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},89041:(e,t,i)=>{"use strict";t.sha1=i(84761),t.sha224=i(10799),t.sha256=i(89344),t.sha384=i(80772),t.sha512=i(45900)},84761:(e,t,i)=>{"use strict";var s=i(26436),r=i(95772),a=i(37038),n=s.rotl32,o=s.sum32,h=s.sum32_5,c=a.ft_1,d=r.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function l(){if(!(this instanceof l))return new l;d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}s.inherits(l,d),e.exports=l,l.blockSize=512,l.outSize=160,l.hmacStrength=80,l.padLength=64,l.prototype._update=function(e,t){for(var i=this.W,s=0;s<16;s++)i[s]=e[t+s];for(;s<i.length;s++)i[s]=n(i[s-3]^i[s-8]^i[s-14]^i[s-16],1);var r=this.h[0],a=this.h[1],d=this.h[2],l=this.h[3],f=this.h[4];for(s=0;s<i.length;s++){var p=~~(s/20),m=h(n(r,5),c(p,a,d,l),f,i[s],u[p]);f=l,l=d,d=n(a,30),a=r,r=m}this.h[0]=o(this.h[0],r),this.h[1]=o(this.h[1],a),this.h[2]=o(this.h[2],d),this.h[3]=o(this.h[3],l),this.h[4]=o(this.h[4],f)},l.prototype._digest=function(e){return"hex"===e?s.toHex32(this.h,"big"):s.split32(this.h,"big")}},10799:(e,t,i)=>{"use strict";var s=i(26436),r=i(89344);function a(){if(!(this instanceof a))return new a;r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}s.inherits(a,r),e.exports=a,a.blockSize=512,a.outSize=224,a.hmacStrength=192,a.padLength=64,a.prototype._digest=function(e){return"hex"===e?s.toHex32(this.h.slice(0,7),"big"):s.split32(this.h.slice(0,7),"big")}},89344:(e,t,i)=>{"use strict";var s=i(26436),r=i(95772),a=i(37038),n=i(79746),o=s.sum32,h=s.sum32_4,c=s.sum32_5,d=a.ch32,u=a.maj32,l=a.s0_256,f=a.s1_256,p=a.g0_256,m=a.g1_256,g=r.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}s.inherits(b,g),e.exports=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(e,t){for(var i=this.W,s=0;s<16;s++)i[s]=e[t+s];for(;s<i.length;s++)i[s]=h(m(i[s-2]),i[s-7],p(i[s-15]),i[s-16]);var r=this.h[0],a=this.h[1],g=this.h[2],y=this.h[3],b=this.h[4],v=this.h[5],w=this.h[6],k=this.h[7];for(n(this.k.length===i.length),s=0;s<i.length;s++){var _=c(k,f(b),d(b,v,w),this.k[s],i[s]),S=o(l(r),u(r,a,g));k=w,w=v,v=b,b=o(y,_),y=g,g=a,a=r,r=o(_,S)}this.h[0]=o(this.h[0],r),this.h[1]=o(this.h[1],a),this.h[2]=o(this.h[2],g),this.h[3]=o(this.h[3],y),this.h[4]=o(this.h[4],b),this.h[5]=o(this.h[5],v),this.h[6]=o(this.h[6],w),this.h[7]=o(this.h[7],k)},b.prototype._digest=function(e){return"hex"===e?s.toHex32(this.h,"big"):s.split32(this.h,"big")}},80772:(e,t,i)=>{"use strict";var s=i(26436),r=i(45900);function a(){if(!(this instanceof a))return new a;r.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}s.inherits(a,r),e.exports=a,a.blockSize=1024,a.outSize=384,a.hmacStrength=192,a.padLength=128,a.prototype._digest=function(e){return"hex"===e?s.toHex32(this.h.slice(0,12),"big"):s.split32(this.h.slice(0,12),"big")}},45900:(e,t,i)=>{"use strict";var s=i(26436),r=i(95772),a=i(79746),n=s.rotr64_hi,o=s.rotr64_lo,h=s.shr64_hi,c=s.shr64_lo,d=s.sum64,u=s.sum64_hi,l=s.sum64_lo,f=s.sum64_4_hi,p=s.sum64_4_lo,m=s.sum64_5_hi,g=s.sum64_5_lo,y=r.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=new Array(160)}function w(e,t,i,s,r){var a=e&i^~e&r;return a<0&&(a+=4294967296),a}function k(e,t,i,s,r,a){var n=t&s^~t&a;return n<0&&(n+=4294967296),n}function _(e,t,i,s,r){var a=e&i^e&r^i&r;return a<0&&(a+=4294967296),a}function S(e,t,i,s,r,a){var n=t&s^t&a^s&a;return n<0&&(n+=4294967296),n}function O(e,t){var i=n(e,t,28)^n(t,e,2)^n(t,e,7);return i<0&&(i+=4294967296),i}function M(e,t){var i=o(e,t,28)^o(t,e,2)^o(t,e,7);return i<0&&(i+=4294967296),i}function T(e,t){var i=o(e,t,14)^o(e,t,18)^o(t,e,9);return i<0&&(i+=4294967296),i}function x(e,t){var i=n(e,t,1)^n(e,t,8)^h(e,t,7);return i<0&&(i+=4294967296),i}function I(e,t){var i=o(e,t,1)^o(e,t,8)^c(e,t,7);return i<0&&(i+=4294967296),i}function A(e,t){var i=o(e,t,19)^o(t,e,29)^c(e,t,6);return i<0&&(i+=4294967296),i}s.inherits(v,y),e.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(e,t){for(var i=this.W,s=0;s<32;s++)i[s]=e[t+s];for(;s<i.length;s+=2){var r=(g=i[s-4],y=i[s-3],b=void 0,(b=n(g,y,19)^n(y,g,29)^h(g,y,6))<0&&(b+=4294967296),b),a=A(i[s-4],i[s-3]),o=i[s-14],c=i[s-13],d=x(i[s-30],i[s-29]),u=I(i[s-30],i[s-29]),l=i[s-32],m=i[s-31];i[s]=f(r,a,o,c,d,u,l,m),i[s+1]=p(r,a,o,c,d,u,l,m)}var g,y,b},v.prototype._update=function(e,t){this._prepareBlock(e,t);var i,s,r,o=this.W,h=this.h[0],c=this.h[1],f=this.h[2],p=this.h[3],y=this.h[4],b=this.h[5],v=this.h[6],x=this.h[7],I=this.h[8],A=this.h[9],C=this.h[10],N=this.h[11],E=this.h[12],P=this.h[13],B=this.h[14],R=this.h[15];a(this.k.length===o.length);for(var V=0;V<o.length;V+=2){var L=B,D=R,q=(r=void 0,(r=n(i=I,s=A,14)^n(i,s,18)^n(s,i,9))<0&&(r+=4294967296),r),G=T(I,A),F=w(I,0,C,0,E),j=k(0,A,0,N,0,P),U=this.k[V],H=this.k[V+1],z=o[V],K=o[V+1],W=m(L,D,q,G,F,j,U,H,z,K),X=g(L,D,q,G,F,j,U,H,z,K);L=O(h,c),D=M(h,c),q=_(h,0,f,0,y),G=S(0,c,0,p,0,b);var Z=u(L,D,q,G),Y=l(L,D,q,G);B=E,R=P,E=C,P=N,C=I,N=A,I=u(v,x,W,X),A=l(x,x,W,X),v=y,x=b,y=f,b=p,f=h,p=c,h=u(W,X,Z,Y),c=l(W,X,Z,Y)}d(this.h,0,h,c),d(this.h,2,f,p),d(this.h,4,y,b),d(this.h,6,v,x),d(this.h,8,I,A),d(this.h,10,C,N),d(this.h,12,E,P),d(this.h,14,B,R)},v.prototype._digest=function(e){return"hex"===e?s.toHex32(this.h,"big"):s.split32(this.h,"big")}},37038:(e,t,i)=>{"use strict";var s=i(26436).rotr32;function r(e,t,i){return e&t^~e&i}function a(e,t,i){return e&t^e&i^t&i}function n(e,t,i){return e^t^i}t.ft_1=function(e,t,i,s){return 0===e?r(t,i,s):1===e||3===e?n(t,i,s):2===e?a(t,i,s):void 0},t.ch32=r,t.maj32=a,t.p32=n,t.s0_256=function(e){return s(e,2)^s(e,13)^s(e,22)},t.s1_256=function(e){return s(e,6)^s(e,11)^s(e,25)},t.g0_256=function(e){return s(e,7)^s(e,18)^e>>>3},t.g1_256=function(e){return s(e,17)^s(e,19)^e>>>10}},26436:(e,t,i)=>{"use strict";var s=i(79746),r=i(35717);function a(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1))}function n(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function o(e){return 1===e.length?"0"+e:e}function h(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=r,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var i=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),r=0;r<e.length;r+=2)i.push(parseInt(e[r]+e[r+1],16))}else for(var s=0,r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?i[s++]=n:n<2048?(i[s++]=n>>6|192,i[s++]=63&n|128):a(e,r)?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++r)),i[s++]=n>>18|240,i[s++]=n>>12&63|128,i[s++]=n>>6&63|128,i[s++]=63&n|128):(i[s++]=n>>12|224,i[s++]=n>>6&63|128,i[s++]=63&n|128)}else for(r=0;r<e.length;r++)i[r]=0|e[r];return i},t.toHex=function(e){for(var t="",i=0;i<e.length;i++)t+=o(e[i].toString(16));return t},t.htonl=n,t.toHex32=function(e,t){for(var i="",s=0;s<e.length;s++){var r=e[s];"little"===t&&(r=n(r)),i+=h(r.toString(16))}return i},t.zero2=o,t.zero8=h,t.join32=function(e,t,i,r){var a=i-t;s(a%4==0);for(var n=new Array(a/4),o=0,h=t;o<n.length;o++,h+=4){var c;c="big"===r?e[h]<<24|e[h+1]<<16|e[h+2]<<8|e[h+3]:e[h+3]<<24|e[h+2]<<16|e[h+1]<<8|e[h],n[o]=c>>>0}return n},t.split32=function(e,t){for(var i=new Array(4*e.length),s=0,r=0;s<e.length;s++,r+=4){var a=e[s];"big"===t?(i[r]=a>>>24,i[r+1]=a>>>16&255,i[r+2]=a>>>8&255,i[r+3]=255&a):(i[r+3]=a>>>24,i[r+2]=a>>>16&255,i[r+1]=a>>>8&255,i[r]=255&a)}return i},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,i){return e+t+i>>>0},t.sum32_4=function(e,t,i,s){return e+t+i+s>>>0},t.sum32_5=function(e,t,i,s,r){return e+t+i+s+r>>>0},t.sum64=function(e,t,i,s){var r=e[t],a=s+e[t+1]>>>0,n=(a<s?1:0)+i+r;e[t]=n>>>0,e[t+1]=a},t.sum64_hi=function(e,t,i,s){return(t+s>>>0<t?1:0)+e+i>>>0},t.sum64_lo=function(e,t,i,s){return t+s>>>0},t.sum64_4_hi=function(e,t,i,s,r,a,n,o){var h=0,c=t;return h+=(c=c+s>>>0)<t?1:0,h+=(c=c+a>>>0)<a?1:0,e+i+r+n+(h+=(c=c+o>>>0)<o?1:0)>>>0},t.sum64_4_lo=function(e,t,i,s,r,a,n,o){return t+s+a+o>>>0},t.sum64_5_hi=function(e,t,i,s,r,a,n,o,h,c){var d=0,u=t;return d+=(u=u+s>>>0)<t?1:0,d+=(u=u+a>>>0)<a?1:0,d+=(u=u+o>>>0)<o?1:0,e+i+r+n+h+(d+=(u=u+c>>>0)<c?1:0)>>>0},t.sum64_5_lo=function(e,t,i,s,r,a,n,o,h,c){return t+s+a+o+c>>>0},t.rotr64_hi=function(e,t,i){return(t<<32-i|e>>>i)>>>0},t.rotr64_lo=function(e,t,i){return(e<<32-i|t>>>i)>>>0},t.shr64_hi=function(e,t,i){return e>>>i},t.shr64_lo=function(e,t,i){return(e<<32-i|t>>>i)>>>0}},2156:(e,t,i)=>{"use strict";var s=i(33715),r=i(34504),a=i(79746);function n(e){if(!(this instanceof n))return new n(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=r.toArray(e.entropy,e.entropyEnc||"hex"),i=r.toArray(e.nonce,e.nonceEnc||"hex"),s=r.toArray(e.pers,e.persEnc||"hex");a(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,i,s)}e.exports=n,n.prototype._init=function(e,t,i){var s=e.concat(t).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var r=0;r<this.V.length;r++)this.K[r]=0,this.V[r]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656},n.prototype._hmac=function(){return new s.hmac(this.hash,this.K)},n.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},n.prototype.reseed=function(e,t,i,s){"string"!=typeof t&&(s=i,i=t,t=null),e=r.toArray(e,t),i=r.toArray(i,s),a(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1},n.prototype.generate=function(e,t,i,s){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(s=i,i=t,t=null),i&&(i=r.toArray(i,s||"hex"),this._update(i));for(var a=[];a.length<e;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var n=a.slice(0,e);return this._update(i),this._reseed++,r.encode(n,t)}},79267:(e,t,i)=>{var s=i(8501),r=i(8575),a=e.exports;for(var n in s)s.hasOwnProperty(n)&&(a[n]=s[n]);function o(e){if("string"==typeof e&&(e=r.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}a.request=function(e,t){return e=o(e),s.request.call(this,e,t)},a.get=function(e,t){return e=o(e),s.get.call(this,e,t)}},80645:(e,t)=>{t.read=function(e,t,i,s,r){var a,n,o=8*r-s-1,h=(1<<o)-1,c=h>>1,d=-7,u=i?r-1:0,l=i?-1:1,f=e[t+u];for(u+=l,a=f&(1<<-d)-1,f>>=-d,d+=o;d>0;a=256*a+e[t+u],u+=l,d-=8);for(n=a&(1<<-d)-1,a>>=-d,d+=s;d>0;n=256*n+e[t+u],u+=l,d-=8);if(0===a)a=1-c;else{if(a===h)return n?NaN:1/0*(f?-1:1);n+=Math.pow(2,s),a-=c}return(f?-1:1)*n*Math.pow(2,a-s)},t.write=function(e,t,i,s,r,a){var n,o,h,c=8*a-r-1,d=(1<<c)-1,u=d>>1,l=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=s?0:a-1,p=s?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,n=d):(n=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-n))<1&&(n--,h*=2),(t+=n+u>=1?l/h:l*Math.pow(2,1-u))*h>=2&&(n++,h/=2),n+u>=d?(o=0,n=d):n+u>=1?(o=(t*h-1)*Math.pow(2,r),n+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,r),n=0));r>=8;e[i+f]=255&o,f+=p,o/=256,r-=8);for(n=n<<r|o,c+=r;c>0;e[i+f]=255&n,f+=p,n/=256,c-=8);e[i+f-p]|=128*m}},35717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}},82584:(e,t,i)=>{"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,r=i(21924)("Object.prototype.toString"),a=function(e){return!(s&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===r(e)},n=function(e){return!!a(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==r(e)&&"[object Function]"===r(e.callee)},o=function(){return a(arguments)}();a.isLegacyArguments=n,e.exports=o?a:n},48662:e=>{"use strict";var t=Object.prototype.toString,i=Function.prototype.toString,s=/^\s*(?:function)?\*/,r="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,a=Object.getPrototypeOf,n=function(){if(!r)return!1;try{return Function("return function*() {}")()}catch(e){}}(),o=!(!a||!n)&&a(n);e.exports=function(e){return"function"==typeof e&&(!!s.test(i.call(e))||(r?a&&a(e)===o:"[object GeneratorFunction]"===t.call(e)))}},98611:e=>{"use strict";e.exports=function(e){return e!=e}},20360:(e,t,i)=>{"use strict";var s=i(55559),r=i(4289),a=i(98611),n=i(29415),o=i(23194),h=s(n(),Number);r(h,{getPolyfill:n,implementation:a,shim:o}),e.exports=h},29415:(e,t,i)=>{"use strict";var s=i(98611);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:s}},23194:(e,t,i)=>{"use strict";var s=i(4289),r=i(29415);e.exports=function(){var e=r();return s(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},85692:(e,t,i)=>{"use strict";var s=i(49804),r=i(16314),a=i(21924),n=a("Object.prototype.toString"),o=i(41405)()&&"symbol"==typeof Symbol.toStringTag,h=r(),c=a("Array.prototype.indexOf",!0)||function(e,t){for(var i=0;i<e.length;i+=1)if(e[i]===t)return i;return-1},d=a("String.prototype.slice"),u={},l=i(94079),f=Object.getPrototypeOf;o&&l&&f&&s(h,(function(e){var t=new i.g[e];if(!(Symbol.toStringTag in t))throw new EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var s=f(t),r=l(s,Symbol.toStringTag);if(!r){var a=f(s);r=l(a,Symbol.toStringTag)}u[e]=r.get})),e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!o){var t=d(n(e),8,-1);return c(h,t)>-1}return!!l&&function(e){var t=!1;return s(u,(function(i,s){if(!t)try{t=i.call(e)===s}catch(e){}})),t}(e)}},62318:(e,t,i)=>{"use strict";var s=i(35717),r=i(3349),a=i(89509).Buffer,n=new Array(16);function o(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function h(e,t){return e<<t|e>>>32-t}function c(e,t,i,s,r,a,n){return h(e+(t&i|~t&s)+r+a|0,n)+t|0}function d(e,t,i,s,r,a,n){return h(e+(t&s|i&~s)+r+a|0,n)+t|0}function u(e,t,i,s,r,a,n){return h(e+(t^i^s)+r+a|0,n)+t|0}function l(e,t,i,s,r,a,n){return h(e+(i^(t|~s))+r+a|0,n)+t|0}s(o,r),o.prototype._update=function(){for(var e=n,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var i=this._a,s=this._b,r=this._c,a=this._d;i=c(i,s,r,a,e[0],3614090360,7),a=c(a,i,s,r,e[1],3905402710,12),r=c(r,a,i,s,e[2],606105819,17),s=c(s,r,a,i,e[3],3250441966,22),i=c(i,s,r,a,e[4],4118548399,7),a=c(a,i,s,r,e[5],1200080426,12),r=c(r,a,i,s,e[6],2821735955,17),s=c(s,r,a,i,e[7],4249261313,22),i=c(i,s,r,a,e[8],1770035416,7),a=c(a,i,s,r,e[9],2336552879,12),r=c(r,a,i,s,e[10],4294925233,17),s=c(s,r,a,i,e[11],2304563134,22),i=c(i,s,r,a,e[12],1804603682,7),a=c(a,i,s,r,e[13],4254626195,12),r=c(r,a,i,s,e[14],2792965006,17),i=d(i,s=c(s,r,a,i,e[15],1236535329,22),r,a,e[1],4129170786,5),a=d(a,i,s,r,e[6],3225465664,9),r=d(r,a,i,s,e[11],643717713,14),s=d(s,r,a,i,e[0],3921069994,20),i=d(i,s,r,a,e[5],3593408605,5),a=d(a,i,s,r,e[10],38016083,9),r=d(r,a,i,s,e[15],3634488961,14),s=d(s,r,a,i,e[4],3889429448,20),i=d(i,s,r,a,e[9],568446438,5),a=d(a,i,s,r,e[14],3275163606,9),r=d(r,a,i,s,e[3],4107603335,14),s=d(s,r,a,i,e[8],1163531501,20),i=d(i,s,r,a,e[13],2850285829,5),a=d(a,i,s,r,e[2],4243563512,9),r=d(r,a,i,s,e[7],1735328473,14),i=u(i,s=d(s,r,a,i,e[12],2368359562,20),r,a,e[5],4294588738,4),a=u(a,i,s,r,e[8],2272392833,11),r=u(r,a,i,s,e[11],1839030562,16),s=u(s,r,a,i,e[14],4259657740,23),i=u(i,s,r,a,e[1],2763975236,4),a=u(a,i,s,r,e[4],1272893353,11),r=u(r,a,i,s,e[7],4139469664,16),s=u(s,r,a,i,e[10],3200236656,23),i=u(i,s,r,a,e[13],681279174,4),a=u(a,i,s,r,e[0],3936430074,11),r=u(r,a,i,s,e[3],3572445317,16),s=u(s,r,a,i,e[6],76029189,23),i=u(i,s,r,a,e[9],3654602809,4),a=u(a,i,s,r,e[12],3873151461,11),r=u(r,a,i,s,e[15],530742520,16),i=l(i,s=u(s,r,a,i,e[2],3299628645,23),r,a,e[0],4096336452,6),a=l(a,i,s,r,e[7],1126891415,10),r=l(r,a,i,s,e[14],2878612391,15),s=l(s,r,a,i,e[5],4237533241,21),i=l(i,s,r,a,e[12],1700485571,6),a=l(a,i,s,r,e[3],2399980690,10),r=l(r,a,i,s,e[10],4293915773,15),s=l(s,r,a,i,e[1],2240044497,21),i=l(i,s,r,a,e[8],1873313359,6),a=l(a,i,s,r,e[15],4264355552,10),r=l(r,a,i,s,e[6],2734768916,15),s=l(s,r,a,i,e[13],1309151649,21),i=l(i,s,r,a,e[4],4149444226,6),a=l(a,i,s,r,e[11],3174756917,10),r=l(r,a,i,s,e[2],718787259,15),s=l(s,r,a,i,e[9],3951481745,21),this._a=this._a+i|0,this._b=this._b+s|0,this._c=this._c+r|0,this._d=this._d+a|0},o.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=a.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=o},63047:(e,t,i)=>{var s=i(96240),r=i(29931);function a(e){this.rand=e||new r.Rand}e.exports=a,a.create=function(e){return new a(e)},a.prototype._randbelow=function(e){var t=e.bitLength(),i=Math.ceil(t/8);do{var r=new s(this.rand.generate(i))}while(r.cmp(e)>=0);return r},a.prototype._randrange=function(e,t){var i=t.sub(e);return e.add(this._randbelow(i))},a.prototype.test=function(e,t,i){var r=e.bitLength(),a=s.mont(e),n=new s(1).toRed(a);t||(t=Math.max(1,r/48|0));for(var o=e.subn(1),h=0;!o.testn(h);h++);for(var c=e.shrn(h),d=o.toRed(a);t>0;t--){var u=this._randrange(new s(2),o);i&&i(u);var l=u.toRed(a).redPow(c);if(0!==l.cmp(n)&&0!==l.cmp(d)){for(var f=1;f<h;f++){if(0===(l=l.redSqr()).cmp(n))return!1;if(0===l.cmp(d))break}if(f===h)return!1}}return!0},a.prototype.getDivisor=function(e,t){var i=e.bitLength(),r=s.mont(e),a=new s(1).toRed(r);t||(t=Math.max(1,i/48|0));for(var n=e.subn(1),o=0;!n.testn(o);o++);for(var h=e.shrn(o),c=n.toRed(r);t>0;t--){var d=this._randrange(new s(2),n),u=e.gcd(d);if(0!==u.cmpn(1))return u;var l=d.toRed(r).redPow(h);if(0!==l.cmp(a)&&0!==l.cmp(c)){for(var f=1;f<o;f++){if(0===(l=l.redSqr()).cmp(a))return l.fromRed().subn(1).gcd(e);if(0===l.cmp(c))break}if(f===o)return(l=l.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},96240:function(e,t,i){!function(e,t){"use strict";function s(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function a(e,t,i){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(i=t,t=10),this._init(e||0,t||10,i||"be"))}var n;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(56619).Buffer}catch(e){}function o(e,t){var i=e.charCodeAt(t);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function h(e,t,i){var s=o(e,i);return i-1>=t&&(s|=o(e,i-1)<<4),s}function c(e,t,i,s){for(var r=0,a=Math.min(e.length,i),n=t;n<a;n++){var o=e.charCodeAt(n)-48;r*=s,r+=o>=49?o-49+10:o>=17?o-17+10:o}return r}a.isBN=function(e){return e instanceof a||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),s(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<e.length&&(16===t?this._parseHex(e,r,i):(this._parseBase(e,t,r),"le"===i&&this._initArray(this.toArray(),t,i)))},a.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(s(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},a.prototype._initArray=function(e,t,i){if(s("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var a,n,o=0;if("be"===i)for(r=e.length-1,a=0;r>=0;r-=3)n=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===i)for(r=0,a=0;r<e.length;r+=3)n=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this.strip()},a.prototype._parseHex=function(e,t,i){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var r,a=0,n=0;if("be"===i)for(s=e.length-1;s>=t;s-=2)r=h(e,t,s)<<a,this.words[n]|=67108863&r,a>=18?(a-=18,n+=1,this.words[n]|=r>>>26):a+=8;else for(s=(e.length-t)%2==0?t+1:t;s<e.length;s+=2)r=h(e,t,s)<<a,this.words[n]|=67108863&r,a>=18?(a-=18,n+=1,this.words[n]|=r>>>26):a+=8;this.strip()},a.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var s=0,r=1;r<=67108863;r*=t)s++;s--,r=r/t|0;for(var a=e.length-i,n=a%s,o=Math.min(a,a-n)+i,h=0,d=i;d<o;d+=s)h=c(e,d,d+s,t),this.imuln(r),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==n){var u=1;for(h=c(e,d,e.length,t),d=0;d<n;d++)u*=t;this.imuln(u),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,i){i.negative=t.negative^e.negative;var s=e.length+t.length|0;i.length=s,s=s-1|0;var r=0|e.words[0],a=0|t.words[0],n=r*a,o=67108863&n,h=n/67108864|0;i.words[0]=o;for(var c=1;c<s;c++){for(var d=h>>>26,u=67108863&h,l=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=l;f++){var p=c-f|0;d+=(n=(r=0|e.words[p])*(a=0|t.words[f])+u)/67108864|0,u=67108863&n}i.words[c]=0|u,h=0|d}return 0!==h?i.words[c]=0|h:i.length--,i.strip()}a.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var r=0,a=0,n=0;n<this.length;n++){var o=this.words[n],h=(16777215&(o<<r|a)).toString(16);i=0!=(a=o>>>24-r&16777215)||n!==this.length-1?d[6-h.length]+h+i:h+i,(r+=2)>=26&&(r-=26,n--)}for(0!==a&&(i=a.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var c=u[e],f=l[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);i=(p=p.idivn(f)).isZero()?m+i:d[c-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}s(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return s(void 0!==n),this.toArrayLike(n,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,i){var r=this.byteLength(),a=i||Math.max(1,r);s(r<=a,"byte array longer than desired length"),s(a>0,"Requested array length <= 0"),this.strip();var n,o,h="le"===t,c=new e(a),d=this.clone();if(h){for(o=0;!d.isZero();o++)n=d.andln(255),d.iushrn(8),c[o]=n;for(;o<a;o++)c[o]=0}else{for(o=0;o<a-r;o++)c[o]=0;for(o=0;!d.isZero();o++)n=d.andln(255),d.iushrn(8),c[a-o-1]=n}return c},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,i=0;return 0==(8191&t)&&(i+=13,t>>>=13),0==(127&t)&&(i+=7,t>>>=7),0==(15&t)&&(i+=4,t>>>=4),0==(3&t)&&(i+=2,t>>>=2),0==(1&t)&&i++,i},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var i=this._zeroBits(this.words[t]);if(e+=i,26!==i)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},a.prototype.ior=function(e){return s(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]&e.words[i];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return s(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,i;this.length>e.length?(t=this,i=e):(t=e,i=this);for(var s=0;s<i.length;s++)this.words[s]=t.words[s]^i.words[s];if(this!==t)for(;s<t.length;s++)this.words[s]=t.words[s];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return s(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){s("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){s("number"==typeof e&&e>=0);var i=e/26|0,r=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},a.prototype.iadd=function(e){var t,i,s;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(i=this,s=e):(i=e,s=this);for(var r=0,a=0;a<s.length;a++)t=(0|i.words[a])+(0|s.words[a])+r,this.words[a]=67108863&t,r=t>>>26;for(;0!==r&&a<i.length;a++)t=(0|i.words[a])+r,this.words[a]=67108863&t,r=t>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i,s,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,s=e):(i=e,s=this);for(var a=0,n=0;n<s.length;n++)a=(t=(0|i.words[n])-(0|s.words[n])+a)>>26,this.words[n]=67108863&t;for(;0!==a&&n<i.length;n++)a=(t=(0|i.words[n])+a)>>26,this.words[n]=67108863&t;if(0===a&&n<i.length&&i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this.length=Math.max(this.length,n),i!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,i){var s,r,a,n=e.words,o=t.words,h=i.words,c=0,d=0|n[0],u=8191&d,l=d>>>13,f=0|n[1],p=8191&f,m=f>>>13,g=0|n[2],y=8191&g,b=g>>>13,v=0|n[3],w=8191&v,k=v>>>13,_=0|n[4],S=8191&_,O=_>>>13,M=0|n[5],T=8191&M,x=M>>>13,I=0|n[6],A=8191&I,C=I>>>13,N=0|n[7],E=8191&N,P=N>>>13,B=0|n[8],R=8191&B,V=B>>>13,L=0|n[9],D=8191&L,q=L>>>13,G=0|o[0],F=8191&G,j=G>>>13,U=0|o[1],H=8191&U,z=U>>>13,K=0|o[2],W=8191&K,X=K>>>13,Z=0|o[3],Y=8191&Z,Q=Z>>>13,J=0|o[4],$=8191&J,ee=J>>>13,te=0|o[5],ie=8191&te,se=te>>>13,re=0|o[6],ae=8191&re,ne=re>>>13,oe=0|o[7],he=8191&oe,ce=oe>>>13,de=0|o[8],ue=8191&de,le=de>>>13,fe=0|o[9],pe=8191&fe,me=fe>>>13;i.negative=e.negative^t.negative,i.length=19;var ge=(c+(s=Math.imul(u,F))|0)+((8191&(r=(r=Math.imul(u,j))+Math.imul(l,F)|0))<<13)|0;c=((a=Math.imul(l,j))+(r>>>13)|0)+(ge>>>26)|0,ge&=67108863,s=Math.imul(p,F),r=(r=Math.imul(p,j))+Math.imul(m,F)|0,a=Math.imul(m,j);var ye=(c+(s=s+Math.imul(u,H)|0)|0)+((8191&(r=(r=r+Math.imul(u,z)|0)+Math.imul(l,H)|0))<<13)|0;c=((a=a+Math.imul(l,z)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,s=Math.imul(y,F),r=(r=Math.imul(y,j))+Math.imul(b,F)|0,a=Math.imul(b,j),s=s+Math.imul(p,H)|0,r=(r=r+Math.imul(p,z)|0)+Math.imul(m,H)|0,a=a+Math.imul(m,z)|0;var be=(c+(s=s+Math.imul(u,W)|0)|0)+((8191&(r=(r=r+Math.imul(u,X)|0)+Math.imul(l,W)|0))<<13)|0;c=((a=a+Math.imul(l,X)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,s=Math.imul(w,F),r=(r=Math.imul(w,j))+Math.imul(k,F)|0,a=Math.imul(k,j),s=s+Math.imul(y,H)|0,r=(r=r+Math.imul(y,z)|0)+Math.imul(b,H)|0,a=a+Math.imul(b,z)|0,s=s+Math.imul(p,W)|0,r=(r=r+Math.imul(p,X)|0)+Math.imul(m,W)|0,a=a+Math.imul(m,X)|0;var ve=(c+(s=s+Math.imul(u,Y)|0)|0)+((8191&(r=(r=r+Math.imul(u,Q)|0)+Math.imul(l,Y)|0))<<13)|0;c=((a=a+Math.imul(l,Q)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,s=Math.imul(S,F),r=(r=Math.imul(S,j))+Math.imul(O,F)|0,a=Math.imul(O,j),s=s+Math.imul(w,H)|0,r=(r=r+Math.imul(w,z)|0)+Math.imul(k,H)|0,a=a+Math.imul(k,z)|0,s=s+Math.imul(y,W)|0,r=(r=r+Math.imul(y,X)|0)+Math.imul(b,W)|0,a=a+Math.imul(b,X)|0,s=s+Math.imul(p,Y)|0,r=(r=r+Math.imul(p,Q)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,Q)|0;var we=(c+(s=s+Math.imul(u,$)|0)|0)+((8191&(r=(r=r+Math.imul(u,ee)|0)+Math.imul(l,$)|0))<<13)|0;c=((a=a+Math.imul(l,ee)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,s=Math.imul(T,F),r=(r=Math.imul(T,j))+Math.imul(x,F)|0,a=Math.imul(x,j),s=s+Math.imul(S,H)|0,r=(r=r+Math.imul(S,z)|0)+Math.imul(O,H)|0,a=a+Math.imul(O,z)|0,s=s+Math.imul(w,W)|0,r=(r=r+Math.imul(w,X)|0)+Math.imul(k,W)|0,a=a+Math.imul(k,X)|0,s=s+Math.imul(y,Y)|0,r=(r=r+Math.imul(y,Q)|0)+Math.imul(b,Y)|0,a=a+Math.imul(b,Q)|0,s=s+Math.imul(p,$)|0,r=(r=r+Math.imul(p,ee)|0)+Math.imul(m,$)|0,a=a+Math.imul(m,ee)|0;var ke=(c+(s=s+Math.imul(u,ie)|0)|0)+((8191&(r=(r=r+Math.imul(u,se)|0)+Math.imul(l,ie)|0))<<13)|0;c=((a=a+Math.imul(l,se)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,s=Math.imul(A,F),r=(r=Math.imul(A,j))+Math.imul(C,F)|0,a=Math.imul(C,j),s=s+Math.imul(T,H)|0,r=(r=r+Math.imul(T,z)|0)+Math.imul(x,H)|0,a=a+Math.imul(x,z)|0,s=s+Math.imul(S,W)|0,r=(r=r+Math.imul(S,X)|0)+Math.imul(O,W)|0,a=a+Math.imul(O,X)|0,s=s+Math.imul(w,Y)|0,r=(r=r+Math.imul(w,Q)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,Q)|0,s=s+Math.imul(y,$)|0,r=(r=r+Math.imul(y,ee)|0)+Math.imul(b,$)|0,a=a+Math.imul(b,ee)|0,s=s+Math.imul(p,ie)|0,r=(r=r+Math.imul(p,se)|0)+Math.imul(m,ie)|0,a=a+Math.imul(m,se)|0;var _e=(c+(s=s+Math.imul(u,ae)|0)|0)+((8191&(r=(r=r+Math.imul(u,ne)|0)+Math.imul(l,ae)|0))<<13)|0;c=((a=a+Math.imul(l,ne)|0)+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,s=Math.imul(E,F),r=(r=Math.imul(E,j))+Math.imul(P,F)|0,a=Math.imul(P,j),s=s+Math.imul(A,H)|0,r=(r=r+Math.imul(A,z)|0)+Math.imul(C,H)|0,a=a+Math.imul(C,z)|0,s=s+Math.imul(T,W)|0,r=(r=r+Math.imul(T,X)|0)+Math.imul(x,W)|0,a=a+Math.imul(x,X)|0,s=s+Math.imul(S,Y)|0,r=(r=r+Math.imul(S,Q)|0)+Math.imul(O,Y)|0,a=a+Math.imul(O,Q)|0,s=s+Math.imul(w,$)|0,r=(r=r+Math.imul(w,ee)|0)+Math.imul(k,$)|0,a=a+Math.imul(k,ee)|0,s=s+Math.imul(y,ie)|0,r=(r=r+Math.imul(y,se)|0)+Math.imul(b,ie)|0,a=a+Math.imul(b,se)|0,s=s+Math.imul(p,ae)|0,r=(r=r+Math.imul(p,ne)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,ne)|0;var Se=(c+(s=s+Math.imul(u,he)|0)|0)+((8191&(r=(r=r+Math.imul(u,ce)|0)+Math.imul(l,he)|0))<<13)|0;c=((a=a+Math.imul(l,ce)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,s=Math.imul(R,F),r=(r=Math.imul(R,j))+Math.imul(V,F)|0,a=Math.imul(V,j),s=s+Math.imul(E,H)|0,r=(r=r+Math.imul(E,z)|0)+Math.imul(P,H)|0,a=a+Math.imul(P,z)|0,s=s+Math.imul(A,W)|0,r=(r=r+Math.imul(A,X)|0)+Math.imul(C,W)|0,a=a+Math.imul(C,X)|0,s=s+Math.imul(T,Y)|0,r=(r=r+Math.imul(T,Q)|0)+Math.imul(x,Y)|0,a=a+Math.imul(x,Q)|0,s=s+Math.imul(S,$)|0,r=(r=r+Math.imul(S,ee)|0)+Math.imul(O,$)|0,a=a+Math.imul(O,ee)|0,s=s+Math.imul(w,ie)|0,r=(r=r+Math.imul(w,se)|0)+Math.imul(k,ie)|0,a=a+Math.imul(k,se)|0,s=s+Math.imul(y,ae)|0,r=(r=r+Math.imul(y,ne)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,ne)|0,s=s+Math.imul(p,he)|0,r=(r=r+Math.imul(p,ce)|0)+Math.imul(m,he)|0,a=a+Math.imul(m,ce)|0;var Oe=(c+(s=s+Math.imul(u,ue)|0)|0)+((8191&(r=(r=r+Math.imul(u,le)|0)+Math.imul(l,ue)|0))<<13)|0;c=((a=a+Math.imul(l,le)|0)+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,s=Math.imul(D,F),r=(r=Math.imul(D,j))+Math.imul(q,F)|0,a=Math.imul(q,j),s=s+Math.imul(R,H)|0,r=(r=r+Math.imul(R,z)|0)+Math.imul(V,H)|0,a=a+Math.imul(V,z)|0,s=s+Math.imul(E,W)|0,r=(r=r+Math.imul(E,X)|0)+Math.imul(P,W)|0,a=a+Math.imul(P,X)|0,s=s+Math.imul(A,Y)|0,r=(r=r+Math.imul(A,Q)|0)+Math.imul(C,Y)|0,a=a+Math.imul(C,Q)|0,s=s+Math.imul(T,$)|0,r=(r=r+Math.imul(T,ee)|0)+Math.imul(x,$)|0,a=a+Math.imul(x,ee)|0,s=s+Math.imul(S,ie)|0,r=(r=r+Math.imul(S,se)|0)+Math.imul(O,ie)|0,a=a+Math.imul(O,se)|0,s=s+Math.imul(w,ae)|0,r=(r=r+Math.imul(w,ne)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,ne)|0,s=s+Math.imul(y,he)|0,r=(r=r+Math.imul(y,ce)|0)+Math.imul(b,he)|0,a=a+Math.imul(b,ce)|0,s=s+Math.imul(p,ue)|0,r=(r=r+Math.imul(p,le)|0)+Math.imul(m,ue)|0,a=a+Math.imul(m,le)|0;var Me=(c+(s=s+Math.imul(u,pe)|0)|0)+((8191&(r=(r=r+Math.imul(u,me)|0)+Math.imul(l,pe)|0))<<13)|0;c=((a=a+Math.imul(l,me)|0)+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,s=Math.imul(D,H),r=(r=Math.imul(D,z))+Math.imul(q,H)|0,a=Math.imul(q,z),s=s+Math.imul(R,W)|0,r=(r=r+Math.imul(R,X)|0)+Math.imul(V,W)|0,a=a+Math.imul(V,X)|0,s=s+Math.imul(E,Y)|0,r=(r=r+Math.imul(E,Q)|0)+Math.imul(P,Y)|0,a=a+Math.imul(P,Q)|0,s=s+Math.imul(A,$)|0,r=(r=r+Math.imul(A,ee)|0)+Math.imul(C,$)|0,a=a+Math.imul(C,ee)|0,s=s+Math.imul(T,ie)|0,r=(r=r+Math.imul(T,se)|0)+Math.imul(x,ie)|0,a=a+Math.imul(x,se)|0,s=s+Math.imul(S,ae)|0,r=(r=r+Math.imul(S,ne)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,ne)|0,s=s+Math.imul(w,he)|0,r=(r=r+Math.imul(w,ce)|0)+Math.imul(k,he)|0,a=a+Math.imul(k,ce)|0,s=s+Math.imul(y,ue)|0,r=(r=r+Math.imul(y,le)|0)+Math.imul(b,ue)|0,a=a+Math.imul(b,le)|0;var Te=(c+(s=s+Math.imul(p,pe)|0)|0)+((8191&(r=(r=r+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,s=Math.imul(D,W),r=(r=Math.imul(D,X))+Math.imul(q,W)|0,a=Math.imul(q,X),s=s+Math.imul(R,Y)|0,r=(r=r+Math.imul(R,Q)|0)+Math.imul(V,Y)|0,a=a+Math.imul(V,Q)|0,s=s+Math.imul(E,$)|0,r=(r=r+Math.imul(E,ee)|0)+Math.imul(P,$)|0,a=a+Math.imul(P,ee)|0,s=s+Math.imul(A,ie)|0,r=(r=r+Math.imul(A,se)|0)+Math.imul(C,ie)|0,a=a+Math.imul(C,se)|0,s=s+Math.imul(T,ae)|0,r=(r=r+Math.imul(T,ne)|0)+Math.imul(x,ae)|0,a=a+Math.imul(x,ne)|0,s=s+Math.imul(S,he)|0,r=(r=r+Math.imul(S,ce)|0)+Math.imul(O,he)|0,a=a+Math.imul(O,ce)|0,s=s+Math.imul(w,ue)|0,r=(r=r+Math.imul(w,le)|0)+Math.imul(k,ue)|0,a=a+Math.imul(k,le)|0;var xe=(c+(s=s+Math.imul(y,pe)|0)|0)+((8191&(r=(r=r+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;c=((a=a+Math.imul(b,me)|0)+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,s=Math.imul(D,Y),r=(r=Math.imul(D,Q))+Math.imul(q,Y)|0,a=Math.imul(q,Q),s=s+Math.imul(R,$)|0,r=(r=r+Math.imul(R,ee)|0)+Math.imul(V,$)|0,a=a+Math.imul(V,ee)|0,s=s+Math.imul(E,ie)|0,r=(r=r+Math.imul(E,se)|0)+Math.imul(P,ie)|0,a=a+Math.imul(P,se)|0,s=s+Math.imul(A,ae)|0,r=(r=r+Math.imul(A,ne)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,ne)|0,s=s+Math.imul(T,he)|0,r=(r=r+Math.imul(T,ce)|0)+Math.imul(x,he)|0,a=a+Math.imul(x,ce)|0,s=s+Math.imul(S,ue)|0,r=(r=r+Math.imul(S,le)|0)+Math.imul(O,ue)|0,a=a+Math.imul(O,le)|0;var Ie=(c+(s=s+Math.imul(w,pe)|0)|0)+((8191&(r=(r=r+Math.imul(w,me)|0)+Math.imul(k,pe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,s=Math.imul(D,$),r=(r=Math.imul(D,ee))+Math.imul(q,$)|0,a=Math.imul(q,ee),s=s+Math.imul(R,ie)|0,r=(r=r+Math.imul(R,se)|0)+Math.imul(V,ie)|0,a=a+Math.imul(V,se)|0,s=s+Math.imul(E,ae)|0,r=(r=r+Math.imul(E,ne)|0)+Math.imul(P,ae)|0,a=a+Math.imul(P,ne)|0,s=s+Math.imul(A,he)|0,r=(r=r+Math.imul(A,ce)|0)+Math.imul(C,he)|0,a=a+Math.imul(C,ce)|0,s=s+Math.imul(T,ue)|0,r=(r=r+Math.imul(T,le)|0)+Math.imul(x,ue)|0,a=a+Math.imul(x,le)|0;var Ae=(c+(s=s+Math.imul(S,pe)|0)|0)+((8191&(r=(r=r+Math.imul(S,me)|0)+Math.imul(O,pe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,s=Math.imul(D,ie),r=(r=Math.imul(D,se))+Math.imul(q,ie)|0,a=Math.imul(q,se),s=s+Math.imul(R,ae)|0,r=(r=r+Math.imul(R,ne)|0)+Math.imul(V,ae)|0,a=a+Math.imul(V,ne)|0,s=s+Math.imul(E,he)|0,r=(r=r+Math.imul(E,ce)|0)+Math.imul(P,he)|0,a=a+Math.imul(P,ce)|0,s=s+Math.imul(A,ue)|0,r=(r=r+Math.imul(A,le)|0)+Math.imul(C,ue)|0,a=a+Math.imul(C,le)|0;var Ce=(c+(s=s+Math.imul(T,pe)|0)|0)+((8191&(r=(r=r+Math.imul(T,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((a=a+Math.imul(x,me)|0)+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,s=Math.imul(D,ae),r=(r=Math.imul(D,ne))+Math.imul(q,ae)|0,a=Math.imul(q,ne),s=s+Math.imul(R,he)|0,r=(r=r+Math.imul(R,ce)|0)+Math.imul(V,he)|0,a=a+Math.imul(V,ce)|0,s=s+Math.imul(E,ue)|0,r=(r=r+Math.imul(E,le)|0)+Math.imul(P,ue)|0,a=a+Math.imul(P,le)|0;var Ne=(c+(s=s+Math.imul(A,pe)|0)|0)+((8191&(r=(r=r+Math.imul(A,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((a=a+Math.imul(C,me)|0)+(r>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,s=Math.imul(D,he),r=(r=Math.imul(D,ce))+Math.imul(q,he)|0,a=Math.imul(q,ce),s=s+Math.imul(R,ue)|0,r=(r=r+Math.imul(R,le)|0)+Math.imul(V,ue)|0,a=a+Math.imul(V,le)|0;var Ee=(c+(s=s+Math.imul(E,pe)|0)|0)+((8191&(r=(r=r+Math.imul(E,me)|0)+Math.imul(P,pe)|0))<<13)|0;c=((a=a+Math.imul(P,me)|0)+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,s=Math.imul(D,ue),r=(r=Math.imul(D,le))+Math.imul(q,ue)|0,a=Math.imul(q,le);var Pe=(c+(s=s+Math.imul(R,pe)|0)|0)+((8191&(r=(r=r+Math.imul(R,me)|0)+Math.imul(V,pe)|0))<<13)|0;c=((a=a+Math.imul(V,me)|0)+(r>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Be=(c+(s=Math.imul(D,pe))|0)+((8191&(r=(r=Math.imul(D,me))+Math.imul(q,pe)|0))<<13)|0;return c=((a=Math.imul(q,me))+(r>>>13)|0)+(Be>>>26)|0,Be&=67108863,h[0]=ge,h[1]=ye,h[2]=be,h[3]=ve,h[4]=we,h[5]=ke,h[6]=_e,h[7]=Se,h[8]=Oe,h[9]=Me,h[10]=Te,h[11]=xe,h[12]=Ie,h[13]=Ae,h[14]=Ce,h[15]=Ne,h[16]=Ee,h[17]=Pe,h[18]=Be,0!==c&&(h[19]=c,i.length++),i};function m(e,t,i){return(new g).mulp(e,t,i)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=f),a.prototype.mulTo=function(e,t){var i=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):i<63?f(this,e,t):i<1024?function(e,t,i){i.negative=t.negative^e.negative,i.length=e.length+t.length;for(var s=0,r=0,a=0;a<i.length-1;a++){var n=r;r=0;for(var o=67108863&s,h=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=h;c++){var d=a-c,u=(0|e.words[d])*(0|t.words[c]),l=67108863&u;o=67108863&(l=l+o|0),r+=(n=(n=n+(u/67108864|0)|0)+(l>>>26)|0)>>>26,n&=67108863}i.words[a]=o,s=n,n=r}return 0!==s?i.words[a]=s:i.length--,i.strip()}(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),i=a.prototype._countBits(e)-1,s=0;s<e;s++)t[s]=this.revBin(s,i,e);return t},g.prototype.revBin=function(e,t,i){if(0===e||e===i-1)return e;for(var s=0,r=0;r<t;r++)s|=(1&e)<<t-r-1,e>>=1;return s},g.prototype.permute=function(e,t,i,s,r,a){for(var n=0;n<a;n++)s[n]=t[e[n]],r[n]=i[e[n]]},g.prototype.transform=function(e,t,i,s,r,a){this.permute(a,e,t,i,s,r);for(var n=1;n<r;n<<=1)for(var o=n<<1,h=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),d=0;d<r;d+=o)for(var u=h,l=c,f=0;f<n;f++){var p=i[d+f],m=s[d+f],g=i[d+f+n],y=s[d+f+n],b=u*g-l*y;y=u*y+l*g,g=b,i[d+f]=p+g,s[d+f]=m+y,i[d+f+n]=p-g,s[d+f+n]=m-y,f!==o&&(b=h*u-c*l,l=h*l+c*u,u=b)}},g.prototype.guessLen13b=function(e,t){var i=1|Math.max(t,e),s=1&i,r=0;for(i=i/2|0;i;i>>>=1)r++;return 1<<r+1+s},g.prototype.conjugate=function(e,t,i){if(!(i<=1))for(var s=0;s<i/2;s++){var r=e[s];e[s]=e[i-s-1],e[i-s-1]=r,r=t[s],t[s]=-t[i-s-1],t[i-s-1]=-r}},g.prototype.normalize13b=function(e,t){for(var i=0,s=0;s<t/2;s++){var r=8192*Math.round(e[2*s+1]/t)+Math.round(e[2*s]/t)+i;e[s]=67108863&r,i=r<67108864?0:r/67108864|0}return e},g.prototype.convert13b=function(e,t,i,r){for(var a=0,n=0;n<t;n++)a+=0|e[n],i[2*n]=8191&a,a>>>=13,i[2*n+1]=8191&a,a>>>=13;for(n=2*t;n<r;++n)i[n]=0;s(0===a),s(0==(-8192&a))},g.prototype.stub=function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=0;return t},g.prototype.mulp=function(e,t,i){var s=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(s),a=this.stub(s),n=new Array(s),o=new Array(s),h=new Array(s),c=new Array(s),d=new Array(s),u=new Array(s),l=i.words;l.length=s,this.convert13b(e.words,e.length,n,s),this.convert13b(t.words,t.length,c,s),this.transform(n,a,o,h,s,r),this.transform(c,a,d,u,s,r);for(var f=0;f<s;f++){var p=o[f]*d[f]-h[f]*u[f];h[f]=o[f]*u[f]+h[f]*d[f],o[f]=p}return this.conjugate(o,h,s),this.transform(o,h,l,a,s,r),this.conjugate(l,a,s),this.normalize13b(l,s),i.negative=e.negative^t.negative,i.length=e.length+t.length,i.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),m(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){s("number"==typeof e),s(e<67108864);for(var t=0,i=0;i<this.length;i++){var r=(0|this.words[i])*e,a=(67108863&r)+(67108863&t);t>>=26,t+=r/67108864|0,t+=a>>>26,this.words[i]=67108863&a}return 0!==t&&(this.words[i]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),i=0;i<t.length;i++){var s=i/26|0,r=i%26;t[i]=(e.words[s]&1<<r)>>>r}return t}(e);if(0===t.length)return new a(1);for(var i=this,s=0;s<t.length&&0===t[s];s++,i=i.sqr());if(++s<t.length)for(var r=i.sqr();s<t.length;s++,r=r.sqr())0!==t[s]&&(i=i.mul(r));return i},a.prototype.iushln=function(e){s("number"==typeof e&&e>=0);var t,i=e%26,r=(e-i)/26,a=67108863>>>26-i<<26-i;if(0!==i){var n=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,h=(0|this.words[t])-o<<i;this.words[t]=h|n,n=o>>>26-i}n&&(this.words[t]=n,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this.strip()},a.prototype.ishln=function(e){return s(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,i){var r;s("number"==typeof e&&e>=0),r=t?(t-t%26)/26:0;var a=e%26,n=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,h=i;if(r-=n,r=Math.max(0,r),h){for(var c=0;c<n;c++)h.words[c]=this.words[c];h.length=n}if(0===n);else if(this.length>n)for(this.length-=n,c=0;c<this.length;c++)this.words[c]=this.words[c+n];else this.words[0]=0,this.length=1;var d=0;for(c=this.length-1;c>=0&&(0!==d||c>=r);c--){var u=0|this.words[c];this.words[c]=d<<26-a|u>>>a,d=u&o}return h&&0!==d&&(h.words[h.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,i){return s(0===this.negative),this.iushrn(e,t,i)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,r=1<<t;return!(this.length<=i||!(this.words[i]&r))},a.prototype.imaskn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this.strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return s("number"==typeof e),s(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(s("number"==typeof e),s(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,i){var r,a,n=e.length+i;this._expand(n);var o=0;for(r=0;r<e.length;r++){a=(0|this.words[r+i])+o;var h=(0|e.words[r])*t;o=((a-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&a}for(;r<this.length-i;r++)o=(a=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&a;if(0===o)return this.strip();for(s(-1===o),o=0,r=0;r<this.length;r++)o=(a=-(0|this.words[r])+o)>>26,this.words[r]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var i=(this.length,e.length),s=this.clone(),r=e,n=0|r.words[r.length-1];0!=(i=26-this._countBits(n))&&(r=r.ushln(i),s.iushln(i),n=0|r.words[r.length-1]);var o,h=s.length-r.length;if("mod"!==t){(o=new a(null)).length=h+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var d=s.clone()._ishlnsubmul(r,1,h);0===d.negative&&(s=d,o&&(o.words[h]=1));for(var u=h-1;u>=0;u--){var l=67108864*(0|s.words[r.length+u])+(0|s.words[r.length+u-1]);for(l=Math.min(l/n|0,67108863),s._ishlnsubmul(r,l,u);0!==s.negative;)l--,s.negative=0,s._ishlnsubmul(r,1,u),s.isZero()||(s.negative^=1);o&&(o.words[u]=l)}return o&&o.strip(),s.strip(),"div"!==t&&0!==i&&s.iushrn(i),{div:o||null,mod:s}},a.prototype.divmod=function(e,t,i){return s(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(r=o.div.neg()),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.iadd(e)),{div:r,mod:n}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.isub(e)),{div:o.div,mod:n}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t);var r,n,o},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var i=0!==t.div.negative?t.mod.isub(e):t.mod,s=e.ushrn(1),r=e.andln(1),a=i.cmp(s);return a<0||1===r&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modn=function(e){s(e<=67108863);for(var t=(1<<26)%e,i=0,r=this.length-1;r>=0;r--)i=(t*i+(0|this.words[r]))%e;return i},a.prototype.idivn=function(e){s(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*t;this.words[i]=r/e|0,t=r%e}return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new a(1),n=new a(0),o=new a(0),h=new a(1),c=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++c;for(var d=i.clone(),u=t.clone();!t.isZero();){for(var l=0,f=1;0==(t.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(d),n.isub(u)),r.iushrn(1),n.iushrn(1);for(var p=0,m=1;0==(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(d),h.isub(u)),o.iushrn(1),h.iushrn(1);t.cmp(i)>=0?(t.isub(i),r.isub(o),n.isub(h)):(i.isub(t),o.isub(r),h.isub(n))}return{a:o,b:h,gcd:i.iushln(c)}},a.prototype._invmp=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,n=new a(1),o=new a(0),h=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,d=1;0==(t.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(t.iushrn(c);c-- >0;)n.isOdd()&&n.iadd(h),n.iushrn(1);for(var u=0,l=1;0==(i.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(i.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);t.cmp(i)>=0?(t.isub(i),n.isub(o)):(i.isub(t),o.isub(n))}return(r=0===t.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(e),r},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),i=e.clone();t.negative=0,i.negative=0;for(var s=0;t.isEven()&&i.isEven();s++)t.iushrn(1),i.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=t.cmp(i);if(r<0){var a=t;t=i,i=a}else if(0===r||0===i.cmpn(1))break;t.isub(i)}return i.iushln(s)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){s("number"==typeof e);var t=e%26,i=(e-t)/26,r=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var a=r,n=i;0!==a&&n<this.length;n++){var o=0|this.words[n];a=(o+=a)>>>26,o&=67108863,this.words[n]=o}return 0!==a&&(this.words[n]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),s(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,i=this.length-1;i>=0;i--){var s=0|this.words[i],r=0|e.words[i];if(s!==r){s<r?t=-1:s>r&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new S(e)},a.prototype.toRed=function(e){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return s(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return s(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else s(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function O(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,i=e;do{this.split(i,this.tmp),t=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(t>this.n);var s=t<this.n?-1:i.ucmp(this.p);return 0===s?(i.words[0]=0,i.length=1):s>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},r(v,b),v.prototype.split=function(e,t){for(var i=4194303,s=Math.min(e.length,9),r=0;r<s;r++)t.words[r]=e.words[r];if(t.length=s,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&i,r=10;r<e.length;r++){var n=0|e.words[r];e.words[r-10]=(n&i)<<4|a>>>22,a=n}a>>>=22,e.words[r-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,i=0;i<e.length;i++){var s=0|e.words[i];t+=977*s,e.words[i]=67108863&t,t=64*s+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(w,b),r(k,b),r(_,b),_.prototype.imulK=function(e){for(var t=0,i=0;i<e.length;i++){var s=19*(0|e.words[i])+t,r=67108863&s;s>>>=26,e.words[i]=r,t=s}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new w;else if("p192"===e)t=new k;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return y[e]=t,t},S.prototype._verify1=function(e){s(0===e.negative,"red works only with positives"),s(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){s(0==(e.negative|t.negative),"red works only with positives"),s(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var i=e.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var i=e.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i},S.prototype.sub=function(e,t){this._verify2(e,t);var i=e.sub(t);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var i=e.isub(t);return i.cmpn(0)<0&&i.iadd(this.m),i},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(s(t%2==1),3===t){var i=this.m.add(new a(1)).iushrn(2);return this.pow(e,i)}for(var r=this.m.subn(1),n=0;!r.isZero()&&0===r.andln(1);)n++,r.iushrn(1);s(!r.isZero());var o=new a(1).toRed(this),h=o.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);0!==this.pow(d,c).cmp(h);)d.redIAdd(h);for(var u=this.pow(d,r),l=this.pow(e,r.addn(1).iushrn(1)),f=this.pow(e,r),p=n;0!==f.cmp(o);){for(var m=f,g=0;0!==m.cmp(o);g++)m=m.redSqr();s(g<p);var y=this.pow(u,new a(1).iushln(p-g-1));l=l.redMul(y),u=y.redSqr(),f=f.redMul(u),p=g}return l},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var i=new Array(16);i[0]=new a(1).toRed(this),i[1]=e;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],e);var r=i[0],n=0,o=0,h=t.bitLength()%26;for(0===h&&(h=26),s=t.length-1;s>=0;s--){for(var c=t.words[s],d=h-1;d>=0;d--){var u=c>>d&1;r!==i[0]&&(r=this.sqr(r)),0!==u||0!==n?(n<<=1,n|=u,(4==++o||0===s&&0===d)&&(r=this.mul(r,i[n]),o=0,n=0)):o=0}h=26}return r},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new O(e)},r(O,S),O.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},O.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},O.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var i=e.imul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},O.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var i=e.mul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n._forceRed(this)},O.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=i.nmd(e),this)},79746:e=>{function t(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,i){if(e!=t)throw new Error(i||"Assertion failed: "+e+" != "+t)}},34504:(e,t)=>{"use strict";var i=t;function s(e){return 1===e.length?"0"+e:e}function r(e){for(var t="",i=0;i<e.length;i++)t+=s(e[i].toString(16));return t}i.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var i=[];if("string"!=typeof e){for(var s=0;s<e.length;s++)i[s]=0|e[s];return i}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),s=0;s<e.length;s+=2)i.push(parseInt(e[s]+e[s+1],16));else for(s=0;s<e.length;s++){var r=e.charCodeAt(s),a=r>>8,n=255&r;a?i.push(a,n):i.push(n)}return i},i.zero2=s,i.toHex=r,i.encode=function(e,t){return"hex"===t?r(e):e}},83300:(e,t)=>{"use strict";var i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i)return i;throw new Error("unable to locate global object")}();e.exports=t=i.fetch,i.fetch&&(t.default=i.fetch.bind(i)),t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response},24244:e=>{"use strict";var t=function(e){return e!=e};e.exports=function(e,i){return 0===e&&0===i?1/e==1/i:e===i||!(!t(e)||!t(i))}},20609:(e,t,i)=>{"use strict";var s=i(4289),r=i(55559),a=i(24244),n=i(75624),o=i(52281),h=r(n(),Object);s(h,{getPolyfill:n,implementation:a,shim:o}),e.exports=h},75624:(e,t,i)=>{"use strict";var s=i(24244);e.exports=function(){return"function"==typeof Object.is?Object.is:s}},52281:(e,t,i)=>{"use strict";var s=i(75624),r=i(4289);e.exports=function(){var e=s();return r(Object,{is:e},{is:function(){return Object.is!==e}}),e}},18987:(e,t,i)=>{"use strict";var s;if(!Object.keys){var r=Object.prototype.hasOwnProperty,a=Object.prototype.toString,n=i(21414),o=Object.prototype.propertyIsEnumerable,h=!o.call({toString:null},"toString"),c=o.call((function(){}),"prototype"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(e){var t=e.constructor;return t&&t.prototype===e},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!l["$"+e]&&r.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{u(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();s=function(e){var t=null!==e&&"object"==typeof e,i="[object Function]"===a.call(e),s=n(e),o=t&&"[object String]"===a.call(e),l=[];if(!t&&!i&&!s)throw new TypeError("Object.keys called on a non-object");var p=c&&i;if(o&&e.length>0&&!r.call(e,0))for(var m=0;m<e.length;++m)l.push(String(m));if(s&&e.length>0)for(var g=0;g<e.length;++g)l.push(String(g));else for(var y in e)p&&"prototype"===y||!r.call(e,y)||l.push(String(y));if(h)for(var b=function(e){if("undefined"==typeof window||!f)return u(e);try{return u(e)}catch(e){return!1}}(e),v=0;v<d.length;++v)b&&"constructor"===d[v]||!r.call(e,d[v])||l.push(d[v]);return l}}e.exports=s},82215:(e,t,i)=>{"use strict";var s=Array.prototype.slice,r=i(21414),a=Object.keys,n=a?function(e){return a(e)}:i(18987),o=Object.keys;n.shim=function(){return Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return r(e)?o(s.call(e)):o(e)}):Object.keys=n,Object.keys||n},e.exports=n},21414:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var i=t.call(e),s="[object Arguments]"===i;return s||(s="[object Array]"!==i&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),s}},56171:(e,t,i)=>{var s=i(48764).Buffer;const r=i(1191),a=i(50780),n=i(83300);var o=function(e){if("Uint8Array"!==(e.constructor.name||null))throw new TypeError("Expected Uint8Array");return s.from(e).toString("hex")},h=function(e){if("string"!=typeof e)throw new TypeError("Expected string: "+e);return new Uint8Array(s.from(e,"hex"))};function c(e){var t,i=new Uint8Array(e.length);for(t=0;t<e.length;t++)i[t]=e.charCodeAt(t);return i}function d(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function u(e){return b64url.encode(d(e))}b64url=function(){"use strict";var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function t(e){this.message=e}return t.prototype=new Error,t.prototype.name="InvalidCharacterError",{encode:function(i){for(var s,r,a=String(i),n=0,o=e,h="";a.charAt(0|n);h+=o.charAt(63&s>>8-n%1*8)){if((r=a.charCodeAt(n+=3/4))>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");s=s<<8|r}return h},decode:function(i){var s=String(i).replace(/[=]+$/,"");if(s.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,a,n=0,o=0,h="";a=s.charAt(o++);~a&&(r=n%4?64*r+a:a,n++%4)?h+=String.fromCharCode(255&r>>(-2*n&6)):0)a=e.indexOf(a);return h}}}();var l=function(e){return r.blake2b(e,null,32)},f=function(e){if(!e.hasOwnProperty("publicKey")||!e.hasOwnProperty("secretKey"))throw new TypeError("Invalid KeyPair: expected to find keys of name 'secretKey' and 'publicKey': "+JSON.stringify(e));return h(e.secretKey+e.publicKey)},p=function(e,t){var i=u(l(e));return 0===t.length?[{hash:i,sig:void 0}]:t.map((t=>t.hasOwnProperty("publicKey")&&t.publicKey&&t.hasOwnProperty("secretKey")&&t.secretKey?m(e,t):{hash:i,sig:void 0,publicKey:t.publicKey}))},m=function(e,t){if(!t.hasOwnProperty("publicKey")||!t.hasOwnProperty("secretKey"))throw new TypeError("Invalid KeyPair: expected to find keys of name 'secretKey' and 'publicKey': "+JSON.stringify(t));var i=l(e),s=u(i),r=a.sign.detached(i,f(t));return{hash:s,sig:o(r),pubKey:t.publicKey}},g=function(e){if(!e.hasOwnProperty("sig"))throw new TypeError("Expected to find keys of name 'sig' in "+JSON.stringify(e));return{sig:e.sig}},y=function(e){for(var t=e[0].hash,i=1;i<e.length;i++)if(e[i].hash!==t)throw new Error("Sigs for different hashes found: "+JSON.stringify(e));return t},b=function(e=[],t=(new Date).toISOString(),i,s,r=x("","",0,0,0,0),a=null){O(t,"string","nonce"),O(i,"string","pactCode");var n=S(e),o={networkId:a,payload:{exec:{data:s||{},code:i}},signers:n.map(_),meta:r,nonce:JSON.stringify(t)},h=JSON.stringify(o),c=p(h,n);return w(c,h)},v=function(e=[],t=(new Date).toISOString(),i,s,r,a,n,o=x("","",0,0,0,0),h=null){O(t,"string","nonce");var c=S(e),d={networkId:h,payload:{cont:{proof:i||null,pactId:s,rollback:r,step:a,data:n||{}}},signers:c.map(_),meta:o,nonce:JSON.stringify(t)},u=JSON.stringify(d),l=p(u,c);return w(l,u)},w=function(e,t){return M(e,"sigs"),O(t,"string","cmd"),{hash:y(e),sigs:e.filter((e=>e.sig)).map(g),cmd:t}},k=function(e){return{cmds:S(e)}},_=function(e){return e.clist?{clist:S(e.clist),pubKey:e.publicKey}:{pubKey:e.publicKey}},S=function(e){return Array.isArray(e)?e:[e]},O=function(e,t,i){if(typeof e!==t)throw new TypeError(i+" must be a "+t+": "+JSON.stringify(e))},M=function(e,t){if(!Array.isArray(e))throw new TypeError(t+" must be an array: "+JSON.stringify(e))},T=function(e){for(var t={},i=[],s=0;s<e.length;s++)t[e[s]]||(t[e[s]]=!0,i.push(e[s]));return i},x=function(e,t,i,s,r,a){return O(e,"string","sender"),O(t,"string","chainId"),O(i,"number","gasPrice"),O(s,"number","gasLimit"),O(r,"number","creationTime"),O(a,"number","ttl"),{creationTime:r,ttl:a,gasLimit:s,chainId:t,gasPrice:i,sender:e}},I=function(e){return{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}},A=async function(e){const t=await e;return(await t).ok?await t.json():await t.text()};e.exports={crypto:{binToHex:o,hexToBin:h,base64UrlEncode:b64url.encode,base64UrlDecode:b64url.decode,base64UrlEncodeArr:u,base64UrlDecodeArr:function(e){return c(b64url.decode(e))},strToUint8Array:c,uint8ArrayToStr:d,hash:function(e){return u(l(e))},hashBin:l,genKeyPair:function(){var e=a.sign.keyPair();return{publicKey:o(e.publicKey),secretKey:o(e.secretKey).slice(0,64)}},restoreKeyPairFromSecretKey:function(e){if(!e)throw new Error("seed for KeyPair generation not provided");if(64!==e.length)throw new Error("Seed for KeyPair generation has bad size");var t=h(e),i=a.sign.keyPair.fromSeed(t);return{publicKey:o(i.publicKey),secretKey:o(i.secretKey).slice(0,64)}},sign:m,signHash:function(e,t){if(!t.hasOwnProperty("publicKey")||!t.hasOwnProperty("secretKey"))throw new TypeError("Invalid KeyPair: expected to find keys of name 'secretKey' and 'publicKey': "+JSON.stringify(t));var i=b64url.decode(e),s=a.sign.detached(i,f(t));return{hash:e,sig:o(s),pubKey:t.publicKey}},verifySig:a.sign.detached.verify,toTweetNaclSecretKey:f},api:{prepareContCmd:v,prepareExecCmd:b,mkSingleCmd:w,mkPublicSend:k},lang:{mkExp:function(e){return O(e,"string","pgmName"),"("+e+" "+Array.prototype.slice.call(arguments,1).map(JSON.stringify).join(" ")+")"},mkMeta:x,mkCap:function(e,t,i,s=[]){return O(e,"string","role"),O(t,"string","description"),O(i,"string","name of capability"),O(s,"object","arguments to capability"),{role:e,description:t,cap:{name:i,args:s}}}},simple:{cont:{createCommand:function(e,t,i,s,r,a,n,o,h){return k(v(e,t,o,s,r,i,a,n,h))}},exec:{createCommand:function(e,t,i,s,r,a){return k(b(e,t,i,s,r,a))},createLocalCommand:b,createPollRequest:function(e){var t=e.cmds||TypeError("expected key 'cmds' in object: "+JSON.stringify(e));if(!t.every((function(e){return e.hasOwnProperty("hash")})))throw new TypeError('maleformed object, expected "hash" key in every cmd: '+JSON.stringify(e));return{requestKeys:T(t.map((function(e){return e.hash})))}},createListenRequest:function(e){var t=e.cmds||TypeError("expected key 'cmds' in object: "+JSON.stringify(e));if(!t.every((function(e){return e.hasOwnProperty("hash")})))throw new TypeError('maleformed object, expected "hash" key in every cmd: '+JSON.stringify(e));return{listen:T(t.map((function(e){return e.hash})))[0]}}}},fetch:{send:async function(e,t){let i=function(e,t){if(!t)throw new Error("Pact.fetch.send(): No apiHost provided");const i=S(e).map((e=>"cont"===e.type?v(e.keyPairs,e.nonce,e.proof,e.pactId,e.rollback,e.step,e.envData,e.meta,e.networkId):b(e.keyPairs,e.nonce,e.pactCode,e.envData,e.meta,e.networkId)));return n(`${t}/api/v1/send`,I(k(i)))}(e,t);return A(i)},local:async function(e,t){let i=function(e,t){if(!t)throw new Error("Pact.fetch.local(): No apiHost provided");const{keyPairs:i,nonce:s,pactCode:r,envData:a,meta:o,networkId:h}=e,c=b(i,s,r,a,o,h);return n(`${t}/api/v1/local`,I(c))}(e,t);return A(i)},poll:async function(e,t){let i=function(e,t){if(!t)throw new Error("Pact.fetch.poll(): No apiHost provided");return n(`${t}/api/v1/poll`,I(e))}(e,t);return A(i)},listen:async function(e,t){let i=function(e,t){if(!t)throw new Error("Pact.fetch.listen(): No apiHost provided");return n(`${t}/api/v1/listen`,I(e))}(e,t);return A(i)},spv:async function(e,t){let i=function(e,t){if(!t)throw new Error("Pact.fetch.spv(): No apiHost provided");return O(e.targetChainId,"string","targetChainId"),O(e.requestKey,"string","requestKey"),n(`${t}/spv`,I(e))}(e,t);return A(i)}},wallet:{sign:async function(e){let t=function(e){if(!e.pactCode)throw new Error("Pact.wallet.sign(): No Pact Code provided");if(!e.caps)throw new Error("Pact.wallet.sign(): No Caps provided");O(e.pactCode,"string","pactCode"),O(e.caps,"object","caps"),e.envData&&O(e.envData,"object","envData"),e.sender&&O(e.sender,"string","sender"),e.chainId&&O(e.chainId,"string","chainId"),e.gasPrice&&O(e.gasPrice,"number","gasPrice"),e.gasLimit&&O(e.gasLimit,"number","gasLimit"),e.nonce&&O(e.nonce,"string","nonce"),e.ttl&&O(e.ttl,"number","ttl"),e.networkId&&O(e.networkId,"string","networkId"),e.signingPubKey&&O(e.signingPubKey,"string","signingPubKey");const t={code:e.pactCode,caps:S(e.caps),data:e.envData,sender:e.sender,chainId:e.chainId,gasLimit:e.gasLimit,gasPrice:e.gasPrice,nonce:e.nonce,ttl:e.ttl,signingPubKey:e.signingPubKey,networkId:e.networkId};return n("http://127.0.0.1:9467/v1/sign",I(t))}(e);return(await A(t)).body},sendSigned:async function(e,t){const i={cmds:[e]},s=await n(`${t}/api/v1/send`,I(i));return await s.json()}}}},24236:(e,t)=>{"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)s(i,r)&&(e[r]=i[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,i,s,r){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+s),r);else for(var a=0;a<s;a++)e[r+a]=t[i+a]},flattenChunks:function(e){var t,i,s,r,a,n;for(s=0,t=0,i=e.length;t<i;t++)s+=e[t].length;for(n=new Uint8Array(s),r=0,t=0,i=e.length;t<i;t++)a=e[t],n.set(a,r),r+=a.length;return n}},a={arraySet:function(e,t,i,s,r){for(var a=0;a<s;a++)e[r+a]=t[i+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(i)},66069:e=>{"use strict";e.exports=function(e,t,i,s){for(var r=65535&e|0,a=e>>>16&65535|0,n=0;0!==i;){i-=n=i>2e3?2e3:i;do{a=a+(r=r+t[s++]|0)|0}while(--n);r%=65521,a%=65521}return r|a<<16|0}},71619:e=>{"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},2869:e=>{"use strict";var t=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var s=0;s<8;s++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();e.exports=function(e,i,s,r){var a=t,n=r+s;e^=-1;for(var o=r;o<n;o++)e=e>>>8^a[255&(e^i[o])];return-1^e}},30405:(e,t,i)=>{"use strict";var s,r=i(24236),a=i(10342),n=i(66069),o=i(2869),h=i(48898),c=-2,d=258,u=262,l=103,f=113,p=666;function m(e,t){return e.msg=h[t],t}function g(e){return(e<<1)-(e>4?9:0)}function y(e){for(var t=e.length;--t>=0;)e[t]=0}function b(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(r.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function v(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,b(e.strm)}function w(e,t){e.pending_buf[e.pending++]=t}function k(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function _(e,t){var i,s,r=e.max_chain_length,a=e.strstart,n=e.prev_length,o=e.nice_match,h=e.strstart>e.w_size-u?e.strstart-(e.w_size-u):0,c=e.window,l=e.w_mask,f=e.prev,p=e.strstart+d,m=c[a+n-1],g=c[a+n];e.prev_length>=e.good_match&&(r>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(i=t)+n]===g&&c[i+n-1]===m&&c[i]===c[a]&&c[++i]===c[a+1]){a+=2,i++;do{}while(c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&a<p);if(s=d-(p-a),a=p-d,s>n){if(e.match_start=t,n=s,s>=o)break;m=c[a+n-1],g=c[a+n]}}}while((t=f[t&l])>h&&0!=--r);return n<=e.lookahead?n:e.lookahead}function S(e){var t,i,s,a,h,c,d,l,f,p,m=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-u)){r.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=i=e.hash_size;do{s=e.head[--t],e.head[t]=s>=m?s-m:0}while(--i);t=i=m;do{s=e.prev[--t],e.prev[t]=s>=m?s-m:0}while(--i);a+=m}if(0===e.strm.avail_in)break;if(c=e.strm,d=e.window,l=e.strstart+e.lookahead,f=a,p=void 0,(p=c.avail_in)>f&&(p=f),i=0===p?0:(c.avail_in-=p,r.arraySet(d,c.input,c.next_in,p,l),1===c.state.wrap?c.adler=n(c.adler,d,p,l):2===c.state.wrap&&(c.adler=o(c.adler,d,p,l)),c.next_in+=p,c.total_in+=p,p),e.lookahead+=i,e.lookahead+e.insert>=3)for(h=e.strstart-e.insert,e.ins_h=e.window[h],e.ins_h=(e.ins_h<<e.hash_shift^e.window[h+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[h+3-1])&e.hash_mask,e.prev[h&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=h,h++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<u&&0!==e.strm.avail_in)}function O(e,t){for(var i,s;;){if(e.lookahead<u){if(S(e),e.lookahead<u&&0===t)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-u&&(e.match_length=_(e,i)),e.match_length>=3)if(s=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else s=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(s&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}function M(e,t){for(var i,s,r;;){if(e.lookahead<u){if(S(e),e.lookahead<u&&0===t)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-u&&(e.match_length=_(e,i),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,s=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,s&&(v(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((s=a._tr_tally(e,0,e.window[e.strstart-1]))&&v(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(s=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}function T(e,t,i,s,r){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=s,this.func=r}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(1146),this.dyn_dtree=new r.Buf16(122),this.bl_tree=new r.Buf16(78),y(this.dyn_ltree),y(this.dyn_dtree),y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(16),this.heap=new r.Buf16(573),y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(573),y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function I(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:f,e.adler=2===t.wrap?0:1,t.last_flush=0,a._tr_init(t),0):m(e,c)}function A(e){var t,i=I(e);return 0===i&&((t=e.state).window_size=2*t.w_size,y(t.head),t.max_lazy_match=s[t.level].max_lazy,t.good_match=s[t.level].good_length,t.nice_match=s[t.level].nice_length,t.max_chain_length=s[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),i}function C(e,t,i,s,a,n){if(!e)return c;var o=1;if(-1===t&&(t=6),s<0?(o=0,s=-s):s>15&&(o=2,s-=16),a<1||a>9||8!==i||s<8||s>15||t<0||t>9||n<0||n>4)return m(e,c);8===s&&(s=9);var h=new x;return e.state=h,h.strm=e,h.wrap=o,h.gzhead=null,h.w_bits=s,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=a+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new r.Buf8(2*h.w_size),h.head=new r.Buf16(h.hash_size),h.prev=new r.Buf16(h.w_size),h.lit_bufsize=1<<a+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new r.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=t,h.strategy=n,h.method=i,A(e)}s=[new T(0,0,0,0,(function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(S(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var s=e.block_start+i;if((0===e.strstart||e.strstart>=s)&&(e.lookahead=e.strstart-s,e.strstart=s,v(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-u&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(v(e,!1),e.strm.avail_out),1)})),new T(4,4,8,4,O),new T(4,5,16,8,O),new T(4,6,32,32,O),new T(4,4,16,16,M),new T(8,16,32,32,M),new T(8,16,128,128,M),new T(8,32,128,256,M),new T(32,128,258,1024,M),new T(32,258,258,4096,M)],t.deflateInit=function(e,t){return C(e,t,8,15,8,0)},t.deflateInit2=C,t.deflateReset=A,t.deflateResetKeep=I,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?c:(e.state.gzhead=t,0):c},t.deflate=function(e,t){var i,r,n,h;if(!e||!e.state||t>5||t<0)return e?m(e,c):c;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===p&&4!==t)return m(e,0===e.avail_out?-5:c);if(r.strm=e,i=r.last_flush,r.last_flush=t,42===r.status)if(2===r.wrap)e.adler=0,w(r,31),w(r,139),w(r,8),r.gzhead?(w(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),w(r,255&r.gzhead.time),w(r,r.gzhead.time>>8&255),w(r,r.gzhead.time>>16&255),w(r,r.gzhead.time>>24&255),w(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),w(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(w(r,255&r.gzhead.extra.length),w(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=o(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(w(r,0),w(r,0),w(r,0),w(r,0),w(r,0),w(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),w(r,3),r.status=f);else{var u=8+(r.w_bits-8<<4)<<8;u|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(u|=32),u+=31-u%31,r.status=f,k(r,u),0!==r.strstart&&(k(r,e.adler>>>16),k(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>n&&(e.adler=o(e.adler,r.pending_buf,r.pending-n,n)),b(e),n=r.pending,r.pending!==r.pending_buf_size));)w(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=o(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=o(e.adler,r.pending_buf,r.pending-n,n)),b(e),n=r.pending,r.pending===r.pending_buf_size)){h=1;break}h=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,w(r,h)}while(0!==h);r.gzhead.hcrc&&r.pending>n&&(e.adler=o(e.adler,r.pending_buf,r.pending-n,n)),0===h&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=o(e.adler,r.pending_buf,r.pending-n,n)),b(e),n=r.pending,r.pending===r.pending_buf_size)){h=1;break}h=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,w(r,h)}while(0!==h);r.gzhead.hcrc&&r.pending>n&&(e.adler=o(e.adler,r.pending_buf,r.pending-n,n)),0===h&&(r.status=l)}else r.status=l;if(r.status===l&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&b(e),r.pending+2<=r.pending_buf_size&&(w(r,255&e.adler),w(r,e.adler>>8&255),e.adler=0,r.status=f)):r.status=f),0!==r.pending){if(b(e),0===e.avail_out)return r.last_flush=-1,0}else if(0===e.avail_in&&g(t)<=g(i)&&4!==t)return m(e,-5);if(r.status===p&&0!==e.avail_in)return m(e,-5);if(0!==e.avail_in||0!==r.lookahead||0!==t&&r.status!==p){var _=2===r.strategy?function(e,t){for(var i;;){if(0===e.lookahead&&(S(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,i=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}(r,t):3===r.strategy?function(e,t){for(var i,s,r,n,o=e.window;;){if(e.lookahead<=d){if(S(e),e.lookahead<=d&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(s=o[r=e.strstart-1])===o[++r]&&s===o[++r]&&s===o[++r]){n=e.strstart+d;do{}while(s===o[++r]&&s===o[++r]&&s===o[++r]&&s===o[++r]&&s===o[++r]&&s===o[++r]&&s===o[++r]&&s===o[++r]&&r<n);e.match_length=d-(n-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(i=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}(r,t):s[r.level].func(r,t);if(3!==_&&4!==_||(r.status=p),1===_||3===_)return 0===e.avail_out&&(r.last_flush=-1),0;if(2===_&&(1===t?a._tr_align(r):5!==t&&(a._tr_stored_block(r,0,0,!1),3===t&&(y(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),b(e),0===e.avail_out))return r.last_flush=-1,0}return 4!==t?0:r.wrap<=0?1:(2===r.wrap?(w(r,255&e.adler),w(r,e.adler>>8&255),w(r,e.adler>>16&255),w(r,e.adler>>24&255),w(r,255&e.total_in),w(r,e.total_in>>8&255),w(r,e.total_in>>16&255),w(r,e.total_in>>24&255)):(k(r,e.adler>>>16),k(r,65535&e.adler)),b(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==l&&t!==f&&t!==p?m(e,c):(e.state=null,t===f?m(e,-3):0):c},t.deflateSetDictionary=function(e,t){var i,s,a,o,h,d,u,l,f=t.length;if(!e||!e.state)return c;if(2===(o=(i=e.state).wrap)||1===o&&42!==i.status||i.lookahead)return c;for(1===o&&(e.adler=n(e.adler,t,f,0)),i.wrap=0,f>=i.w_size&&(0===o&&(y(i.head),i.strstart=0,i.block_start=0,i.insert=0),l=new r.Buf8(i.w_size),r.arraySet(l,t,f-i.w_size,i.w_size,0),t=l,f=i.w_size),h=e.avail_in,d=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,S(i);i.lookahead>=3;){s=i.strstart,a=i.lookahead-2;do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[s+3-1])&i.hash_mask,i.prev[s&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=s,s++}while(--a);i.strstart=s,i.lookahead=2,S(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=d,e.input=u,e.avail_in=h,i.wrap=o,0},t.deflateInfo="pako deflate (from Nodeca project)"},94264:e=>{"use strict";e.exports=function(e,t){var i,s,r,a,n,o,h,c,d,u,l,f,p,m,g,y,b,v,w,k,_,S,O,M,T;i=e.state,s=e.next_in,M=e.input,r=s+(e.avail_in-5),a=e.next_out,T=e.output,n=a-(t-e.avail_out),o=a+(e.avail_out-257),h=i.dmax,c=i.wsize,d=i.whave,u=i.wnext,l=i.window,f=i.hold,p=i.bits,m=i.lencode,g=i.distcode,y=(1<<i.lenbits)-1,b=(1<<i.distbits)-1;e:do{p<15&&(f+=M[s++]<<p,p+=8,f+=M[s++]<<p,p+=8),v=m[f&y];t:for(;;){if(f>>>=w=v>>>24,p-=w,0==(w=v>>>16&255))T[a++]=65535&v;else{if(!(16&w)){if(0==(64&w)){v=m[(65535&v)+(f&(1<<w)-1)];continue t}if(32&w){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}k=65535&v,(w&=15)&&(p<w&&(f+=M[s++]<<p,p+=8),k+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=M[s++]<<p,p+=8,f+=M[s++]<<p,p+=8),v=g[f&b];i:for(;;){if(f>>>=w=v>>>24,p-=w,!(16&(w=v>>>16&255))){if(0==(64&w)){v=g[(65535&v)+(f&(1<<w)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(_=65535&v,p<(w&=15)&&(f+=M[s++]<<p,(p+=8)<w&&(f+=M[s++]<<p,p+=8)),(_+=f&(1<<w)-1)>h){e.msg="invalid distance too far back",i.mode=30;break e}if(f>>>=w,p-=w,_>(w=a-n)){if((w=_-w)>d&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(S=0,O=l,0===u){if(S+=c-w,w<k){k-=w;do{T[a++]=l[S++]}while(--w);S=a-_,O=T}}else if(u<w){if(S+=c+u-w,(w-=u)<k){k-=w;do{T[a++]=l[S++]}while(--w);if(S=0,u<k){k-=w=u;do{T[a++]=l[S++]}while(--w);S=a-_,O=T}}}else if(S+=u-w,w<k){k-=w;do{T[a++]=l[S++]}while(--w);S=a-_,O=T}for(;k>2;)T[a++]=O[S++],T[a++]=O[S++],T[a++]=O[S++],k-=3;k&&(T[a++]=O[S++],k>1&&(T[a++]=O[S++]))}else{S=a-_;do{T[a++]=T[S++],T[a++]=T[S++],T[a++]=T[S++],k-=3}while(k>2);k&&(T[a++]=T[S++],k>1&&(T[a++]=T[S++]))}break}}break}}while(s<r&&a<o);s-=k=p>>3,f&=(1<<(p-=k<<3))-1,e.next_in=s,e.next_out=a,e.avail_in=s<r?r-s+5:5-(s-r),e.avail_out=a<o?o-a+257:257-(a-o),i.hold=f,i.bits=p}},27948:(e,t,i)=>{"use strict";var s=i(24236),r=i(66069),a=i(2869),n=i(94264),o=i(9241),h=-2,c=12,d=30;function u(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new s.Buf32(852),t.distcode=t.distdyn=new s.Buf32(592),t.sane=1,t.back=-1,0):h}function p(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,f(e)):h}function m(e,t){var i,s;return e&&e.state?(s=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?h:(null!==s.window&&s.wbits!==t&&(s.window=null),s.wrap=i,s.wbits=t,p(e))):h}function g(e,t){var i,s;return e?(s=new l,e.state=s,s.window=null,0!==(i=m(e,t))&&(e.state=null),i):h}var y,b,v=!0;function w(e){if(v){var t;for(y=new s.Buf32(512),b=new s.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(1,e.lens,0,288,y,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(2,e.lens,0,32,b,0,e.work,{bits:5}),v=!1}e.lencode=y,e.lenbits=9,e.distcode=b,e.distbits=5}function k(e,t,i,r){var a,n=e.state;return null===n.window&&(n.wsize=1<<n.wbits,n.wnext=0,n.whave=0,n.window=new s.Buf8(n.wsize)),r>=n.wsize?(s.arraySet(n.window,t,i-n.wsize,n.wsize,0),n.wnext=0,n.whave=n.wsize):((a=n.wsize-n.wnext)>r&&(a=r),s.arraySet(n.window,t,i-r,a,n.wnext),(r-=a)?(s.arraySet(n.window,t,i-r,r,0),n.wnext=r,n.whave=n.wsize):(n.wnext+=a,n.wnext===n.wsize&&(n.wnext=0),n.whave<n.wsize&&(n.whave+=a))),0}t.inflateReset=p,t.inflateReset2=m,t.inflateResetKeep=f,t.inflateInit=function(e){return g(e,15)},t.inflateInit2=g,t.inflate=function(e,t){var i,l,f,p,m,g,y,b,v,_,S,O,M,T,x,I,A,C,N,E,P,B,R,V,L=0,D=new s.Buf8(4),q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return h;(i=e.state).mode===c&&(i.mode=13),m=e.next_out,f=e.output,y=e.avail_out,p=e.next_in,l=e.input,g=e.avail_in,b=i.hold,v=i.bits,_=g,S=y,B=0;e:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;v<16;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}if(2&i.wrap&&35615===b){i.check=0,D[0]=255&b,D[1]=b>>>8&255,i.check=a(i.check,D,2,0),b=0,v=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&b)<<8)+(b>>8))%31){e.msg="incorrect header check",i.mode=d;break}if(8!=(15&b)){e.msg="unknown compression method",i.mode=d;break}if(v-=4,P=8+(15&(b>>>=4)),0===i.wbits)i.wbits=P;else if(P>i.wbits){e.msg="invalid window size",i.mode=d;break}i.dmax=1<<P,e.adler=i.check=1,i.mode=512&b?10:c,b=0,v=0;break;case 2:for(;v<16;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}if(i.flags=b,8!=(255&i.flags)){e.msg="unknown compression method",i.mode=d;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=d;break}i.head&&(i.head.text=b>>8&1),512&i.flags&&(D[0]=255&b,D[1]=b>>>8&255,i.check=a(i.check,D,2,0)),b=0,v=0,i.mode=3;case 3:for(;v<32;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}i.head&&(i.head.time=b),512&i.flags&&(D[0]=255&b,D[1]=b>>>8&255,D[2]=b>>>16&255,D[3]=b>>>24&255,i.check=a(i.check,D,4,0)),b=0,v=0,i.mode=4;case 4:for(;v<16;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}i.head&&(i.head.xflags=255&b,i.head.os=b>>8),512&i.flags&&(D[0]=255&b,D[1]=b>>>8&255,i.check=a(i.check,D,2,0)),b=0,v=0,i.mode=5;case 5:if(1024&i.flags){for(;v<16;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}i.length=b,i.head&&(i.head.extra_len=b),512&i.flags&&(D[0]=255&b,D[1]=b>>>8&255,i.check=a(i.check,D,2,0)),b=0,v=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((O=i.length)>g&&(O=g),O&&(i.head&&(P=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),s.arraySet(i.head.extra,l,p,O,P)),512&i.flags&&(i.check=a(i.check,l,O,p)),g-=O,p+=O,i.length-=O),i.length))break e;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===g)break e;O=0;do{P=l[p+O++],i.head&&P&&i.length<65536&&(i.head.name+=String.fromCharCode(P))}while(P&&O<g);if(512&i.flags&&(i.check=a(i.check,l,O,p)),g-=O,p+=O,P)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===g)break e;O=0;do{P=l[p+O++],i.head&&P&&i.length<65536&&(i.head.comment+=String.fromCharCode(P))}while(P&&O<g);if(512&i.flags&&(i.check=a(i.check,l,O,p)),g-=O,p+=O,P)break e}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;v<16;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}if(b!==(65535&i.check)){e.msg="header crc mismatch",i.mode=d;break}b=0,v=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=c;break;case 10:for(;v<32;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}e.adler=i.check=u(b),b=0,v=0,i.mode=11;case 11:if(0===i.havedict)return e.next_out=m,e.avail_out=y,e.next_in=p,e.avail_in=g,i.hold=b,i.bits=v,2;e.adler=i.check=1,i.mode=c;case c:if(5===t||6===t)break e;case 13:if(i.last){b>>>=7&v,v-=7&v,i.mode=27;break}for(;v<3;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}switch(i.last=1&b,v-=1,3&(b>>>=1)){case 0:i.mode=14;break;case 1:if(w(i),i.mode=20,6===t){b>>>=2,v-=2;break e}break;case 2:i.mode=17;break;case 3:e.msg="invalid block type",i.mode=d}b>>>=2,v-=2;break;case 14:for(b>>>=7&v,v-=7&v;v<32;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}if((65535&b)!=(b>>>16^65535)){e.msg="invalid stored block lengths",i.mode=d;break}if(i.length=65535&b,b=0,v=0,i.mode=15,6===t)break e;case 15:i.mode=16;case 16:if(O=i.length){if(O>g&&(O=g),O>y&&(O=y),0===O)break e;s.arraySet(f,l,p,O,m),g-=O,p+=O,y-=O,m+=O,i.length-=O;break}i.mode=c;break;case 17:for(;v<14;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}if(i.nlen=257+(31&b),b>>>=5,v-=5,i.ndist=1+(31&b),b>>>=5,v-=5,i.ncode=4+(15&b),b>>>=4,v-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=d;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;v<3;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}i.lens[q[i.have++]]=7&b,b>>>=3,v-=3}for(;i.have<19;)i.lens[q[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,R={bits:i.lenbits},B=o(0,i.lens,0,19,i.lencode,0,i.work,R),i.lenbits=R.bits,B){e.msg="invalid code lengths set",i.mode=d;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;I=(L=i.lencode[b&(1<<i.lenbits)-1])>>>16&255,A=65535&L,!((x=L>>>24)<=v);){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}if(A<16)b>>>=x,v-=x,i.lens[i.have++]=A;else{if(16===A){for(V=x+2;v<V;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}if(b>>>=x,v-=x,0===i.have){e.msg="invalid bit length repeat",i.mode=d;break}P=i.lens[i.have-1],O=3+(3&b),b>>>=2,v-=2}else if(17===A){for(V=x+3;v<V;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}v-=x,P=0,O=3+(7&(b>>>=x)),b>>>=3,v-=3}else{for(V=x+7;v<V;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}v-=x,P=0,O=11+(127&(b>>>=x)),b>>>=7,v-=7}if(i.have+O>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=d;break}for(;O--;)i.lens[i.have++]=P}}if(i.mode===d)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=d;break}if(i.lenbits=9,R={bits:i.lenbits},B=o(1,i.lens,0,i.nlen,i.lencode,0,i.work,R),i.lenbits=R.bits,B){e.msg="invalid literal/lengths set",i.mode=d;break}if(i.distbits=6,i.distcode=i.distdyn,R={bits:i.distbits},B=o(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,R),i.distbits=R.bits,B){e.msg="invalid distances set",i.mode=d;break}if(i.mode=20,6===t)break e;case 20:i.mode=21;case 21:if(g>=6&&y>=258){e.next_out=m,e.avail_out=y,e.next_in=p,e.avail_in=g,i.hold=b,i.bits=v,n(e,S),m=e.next_out,f=e.output,y=e.avail_out,p=e.next_in,l=e.input,g=e.avail_in,b=i.hold,v=i.bits,i.mode===c&&(i.back=-1);break}for(i.back=0;I=(L=i.lencode[b&(1<<i.lenbits)-1])>>>16&255,A=65535&L,!((x=L>>>24)<=v);){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}if(I&&0==(240&I)){for(C=x,N=I,E=A;I=(L=i.lencode[E+((b&(1<<C+N)-1)>>C)])>>>16&255,A=65535&L,!(C+(x=L>>>24)<=v);){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}b>>>=C,v-=C,i.back+=C}if(b>>>=x,v-=x,i.back+=x,i.length=A,0===I){i.mode=26;break}if(32&I){i.back=-1,i.mode=c;break}if(64&I){e.msg="invalid literal/length code",i.mode=d;break}i.extra=15&I,i.mode=22;case 22:if(i.extra){for(V=i.extra;v<V;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}i.length+=b&(1<<i.extra)-1,b>>>=i.extra,v-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;I=(L=i.distcode[b&(1<<i.distbits)-1])>>>16&255,A=65535&L,!((x=L>>>24)<=v);){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}if(0==(240&I)){for(C=x,N=I,E=A;I=(L=i.distcode[E+((b&(1<<C+N)-1)>>C)])>>>16&255,A=65535&L,!(C+(x=L>>>24)<=v);){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}b>>>=C,v-=C,i.back+=C}if(b>>>=x,v-=x,i.back+=x,64&I){e.msg="invalid distance code",i.mode=d;break}i.offset=A,i.extra=15&I,i.mode=24;case 24:if(i.extra){for(V=i.extra;v<V;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}i.offset+=b&(1<<i.extra)-1,b>>>=i.extra,v-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=d;break}i.mode=25;case 25:if(0===y)break e;if(O=S-y,i.offset>O){if((O=i.offset-O)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=d;break}O>i.wnext?(O-=i.wnext,M=i.wsize-O):M=i.wnext-O,O>i.length&&(O=i.length),T=i.window}else T=f,M=m-i.offset,O=i.length;O>y&&(O=y),y-=O,i.length-=O;do{f[m++]=T[M++]}while(--O);0===i.length&&(i.mode=21);break;case 26:if(0===y)break e;f[m++]=i.length,y--,i.mode=21;break;case 27:if(i.wrap){for(;v<32;){if(0===g)break e;g--,b|=l[p++]<<v,v+=8}if(S-=y,e.total_out+=S,i.total+=S,S&&(e.adler=i.check=i.flags?a(i.check,f,S,m-S):r(i.check,f,S,m-S)),S=y,(i.flags?b:u(b))!==i.check){e.msg="incorrect data check",i.mode=d;break}b=0,v=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;v<32;){if(0===g)break e;g--,b+=l[p++]<<v,v+=8}if(b!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=d;break}b=0,v=0}i.mode=29;case 29:B=1;break e;case d:B=-3;break e;case 31:return-4;case 32:default:return h}return e.next_out=m,e.avail_out=y,e.next_in=p,e.avail_in=g,i.hold=b,i.bits=v,(i.wsize||S!==e.avail_out&&i.mode<d&&(i.mode<27||4!==t))&&k(e,e.output,e.next_out,S-e.avail_out)?(i.mode=31,-4):(_-=e.avail_in,S-=e.avail_out,e.total_in+=_,e.total_out+=S,i.total+=S,i.wrap&&S&&(e.adler=i.check=i.flags?a(i.check,f,S,e.next_out-S):r(i.check,f,S,e.next_out-S)),e.data_type=i.bits+(i.last?64:0)+(i.mode===c?128:0)+(20===i.mode||15===i.mode?256:0),(0===_&&0===S||4===t)&&0===B&&(B=-5),B)},t.inflateEnd=function(e){if(!e||!e.state)return h;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var i;return e&&e.state?0==(2&(i=e.state).wrap)?h:(i.head=t,t.done=!1,0):h},t.inflateSetDictionary=function(e,t){var i,s=t.length;return e&&e.state?0!==(i=e.state).wrap&&11!==i.mode?h:11===i.mode&&r(1,t,s,0)!==i.check?-3:k(e,t,s,s)?(i.mode=31,-4):(i.havedict=1,0):h},t.inflateInfo="pako inflate (from Nodeca project)"},9241:(e,t,i)=>{"use strict";var s=i(24236),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],n=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,i,h,c,d,u,l){var f,p,m,g,y,b,v,w,k,_=l.bits,S=0,O=0,M=0,T=0,x=0,I=0,A=0,C=0,N=0,E=0,P=null,B=0,R=new s.Buf16(16),V=new s.Buf16(16),L=null,D=0;for(S=0;S<=15;S++)R[S]=0;for(O=0;O<h;O++)R[t[i+O]]++;for(x=_,T=15;T>=1&&0===R[T];T--);if(x>T&&(x=T),0===T)return c[d++]=20971520,c[d++]=20971520,l.bits=1,0;for(M=1;M<T&&0===R[M];M++);for(x<M&&(x=M),C=1,S=1;S<=15;S++)if(C<<=1,(C-=R[S])<0)return-1;if(C>0&&(0===e||1!==T))return-1;for(V[1]=0,S=1;S<15;S++)V[S+1]=V[S]+R[S];for(O=0;O<h;O++)0!==t[i+O]&&(u[V[t[i+O]]++]=O);if(0===e?(P=L=u,b=19):1===e?(P=r,B-=257,L=a,D-=257,b=256):(P=n,L=o,b=-1),E=0,O=0,S=M,y=d,I=x,A=0,m=-1,g=(N=1<<x)-1,1===e&&N>852||2===e&&N>592)return 1;for(;;){v=S-A,u[O]<b?(w=0,k=u[O]):u[O]>b?(w=L[D+u[O]],k=P[B+u[O]]):(w=96,k=0),f=1<<S-A,M=p=1<<I;do{c[y+(E>>A)+(p-=f)]=v<<24|w<<16|k|0}while(0!==p);for(f=1<<S-1;E&f;)f>>=1;if(0!==f?(E&=f-1,E+=f):E=0,O++,0==--R[S]){if(S===T)break;S=t[i+u[O]]}if(S>x&&(E&g)!==m){for(0===A&&(A=x),y+=M,C=1<<(I=S-A);I+A<T&&!((C-=R[I+A])<=0);)I++,C<<=1;if(N+=1<<I,1===e&&N>852||2===e&&N>592)return 1;c[m=E&g]=x<<24|I<<16|y-d|0}}return 0!==E&&(c[y+E]=S-A<<24|64<<16|0),l.bits=x,0}},48898:e=>{"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},10342:(e,t,i)=>{"use strict";var s=i(24236);function r(e){for(var t=e.length;--t>=0;)e[t]=0}var a=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],n=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c=new Array(576);r(c);var d=new Array(60);r(d);var u=new Array(512);r(u);var l=new Array(256);r(l);var f=new Array(29);r(f);var p,m,g,y=new Array(30);function b(e,t,i,s,r){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=s,this.max_length=r,this.has_stree=e&&e.length}function v(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function w(e){return e<256?u[e]:u[256+(e>>>7)]}function k(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function _(e,t,i){e.bi_valid>16-i?(e.bi_buf|=t<<e.bi_valid&65535,k(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=i-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function S(e,t,i){_(e,i[2*t],i[2*t+1])}function O(e,t){var i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1}function M(e,t,i){var s,r,a=new Array(16),n=0;for(s=1;s<=15;s++)a[s]=n=n+i[s-1]<<1;for(r=0;r<=t;r++){var o=e[2*r+1];0!==o&&(e[2*r]=O(a[o]++,o))}}function T(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function x(e){e.bi_valid>8?k(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function I(e,t,i,s){var r=2*t,a=2*i;return e[r]<e[a]||e[r]===e[a]&&s[t]<=s[i]}function A(e,t,i){for(var s=e.heap[i],r=i<<1;r<=e.heap_len&&(r<e.heap_len&&I(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!I(t,s,e.heap[r],e.depth));)e.heap[i]=e.heap[r],i=r,r<<=1;e.heap[i]=s}function C(e,t,i){var s,r,o,h,c=0;if(0!==e.last_lit)do{s=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],r=e.pending_buf[e.l_buf+c],c++,0===s?S(e,r,t):(S(e,(o=l[r])+256+1,t),0!==(h=a[o])&&_(e,r-=f[o],h),S(e,o=w(--s),i),0!==(h=n[o])&&_(e,s-=y[o],h))}while(c<e.last_lit);S(e,256,t)}function N(e,t){var i,s,r,a=t.dyn_tree,n=t.stat_desc.static_tree,o=t.stat_desc.has_stree,h=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<h;i++)0!==a[2*i]?(e.heap[++e.heap_len]=c=i,e.depth[i]=0):a[2*i+1]=0;for(;e.heap_len<2;)a[2*(r=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[r]=0,e.opt_len--,o&&(e.static_len-=n[2*r+1]);for(t.max_code=c,i=e.heap_len>>1;i>=1;i--)A(e,a,i);r=h;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],A(e,a,1),s=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=s,a[2*r]=a[2*i]+a[2*s],e.depth[r]=(e.depth[i]>=e.depth[s]?e.depth[i]:e.depth[s])+1,a[2*i+1]=a[2*s+1]=r,e.heap[1]=r++,A(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var i,s,r,a,n,o,h=t.dyn_tree,c=t.max_code,d=t.stat_desc.static_tree,u=t.stat_desc.has_stree,l=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(a=0;a<=15;a++)e.bl_count[a]=0;for(h[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<573;i++)(a=h[2*h[2*(s=e.heap[i])+1]+1]+1)>p&&(a=p,m++),h[2*s+1]=a,s>c||(e.bl_count[a]++,n=0,s>=f&&(n=l[s-f]),o=h[2*s],e.opt_len+=o*(a+n),u&&(e.static_len+=o*(d[2*s+1]+n)));if(0!==m){do{for(a=p-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(a=p;0!==a;a--)for(s=e.bl_count[a];0!==s;)(r=e.heap[--i])>c||(h[2*r+1]!==a&&(e.opt_len+=(a-h[2*r+1])*h[2*r],h[2*r+1]=a),s--)}}(e,t),M(a,c,e.bl_count)}function E(e,t,i){var s,r,a=-1,n=t[1],o=0,h=7,c=4;for(0===n&&(h=138,c=3),t[2*(i+1)+1]=65535,s=0;s<=i;s++)r=n,n=t[2*(s+1)+1],++o<h&&r===n||(o<c?e.bl_tree[2*r]+=o:0!==r?(r!==a&&e.bl_tree[2*r]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=r,0===n?(h=138,c=3):r===n?(h=6,c=3):(h=7,c=4))}function P(e,t,i){var s,r,a=-1,n=t[1],o=0,h=7,c=4;for(0===n&&(h=138,c=3),s=0;s<=i;s++)if(r=n,n=t[2*(s+1)+1],!(++o<h&&r===n)){if(o<c)do{S(e,r,e.bl_tree)}while(0!=--o);else 0!==r?(r!==a&&(S(e,r,e.bl_tree),o--),S(e,16,e.bl_tree),_(e,o-3,2)):o<=10?(S(e,17,e.bl_tree),_(e,o-3,3)):(S(e,18,e.bl_tree),_(e,o-11,7));o=0,a=r,0===n?(h=138,c=3):r===n?(h=6,c=3):(h=7,c=4)}}r(y);var B=!1;function R(e,t,i,r){_(e,0+(r?1:0),3),function(e,t,i,r){x(e),k(e,i),k(e,~i),s.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}(e,t,i)}t._tr_init=function(e){B||(function(){var e,t,i,s,r,h=new Array(16);for(i=0,s=0;s<28;s++)for(f[s]=i,e=0;e<1<<a[s];e++)l[i++]=s;for(l[i-1]=s,r=0,s=0;s<16;s++)for(y[s]=r,e=0;e<1<<n[s];e++)u[r++]=s;for(r>>=7;s<30;s++)for(y[s]=r<<7,e=0;e<1<<n[s]-7;e++)u[256+r++]=s;for(t=0;t<=15;t++)h[t]=0;for(e=0;e<=143;)c[2*e+1]=8,e++,h[8]++;for(;e<=255;)c[2*e+1]=9,e++,h[9]++;for(;e<=279;)c[2*e+1]=7,e++,h[7]++;for(;e<=287;)c[2*e+1]=8,e++,h[8]++;for(M(c,287,h),e=0;e<30;e++)d[2*e+1]=5,d[2*e]=O(e,5);p=new b(c,a,257,286,15),m=new b(d,n,0,30,15),g=new b(new Array(0),o,0,19,7)}(),B=!0),e.l_desc=new v(e.dyn_ltree,p),e.d_desc=new v(e.dyn_dtree,m),e.bl_desc=new v(e.bl_tree,g),e.bi_buf=0,e.bi_valid=0,T(e)},t._tr_stored_block=R,t._tr_flush_block=function(e,t,i,s){var r,a,n=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),N(e,e.l_desc),N(e,e.d_desc),n=function(e){var t;for(E(e,e.dyn_ltree,e.l_desc.max_code),E(e,e.dyn_dtree,e.d_desc.max_code),N(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*h[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),r=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=r&&(r=a)):r=a=i+5,i+4<=r&&-1!==t?R(e,t,i,s):4===e.strategy||a===r?(_(e,2+(s?1:0),3),C(e,c,d)):(_(e,4+(s?1:0),3),function(e,t,i,s){var r;for(_(e,t-257,5),_(e,i-1,5),_(e,s-4,4),r=0;r<s;r++)_(e,e.bl_tree[2*h[r]+1],3);P(e,e.dyn_ltree,t-1),P(e,e.dyn_dtree,i-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,n+1),C(e,e.dyn_ltree,e.dyn_dtree)),T(e),s&&x(e)},t._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(l[i]+256+1)]++,e.dyn_dtree[2*w(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){_(e,2,3),S(e,256,c),function(e){16===e.bi_valid?(k(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},62292:e=>{"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},873:e=>{"use strict";e.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},52818:(e,t,i)=>{"use strict";var s=i(39809);t.certificate=i(41934);var r=s.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));t.RSAPrivateKey=r;var a=s.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));t.RSAPublicKey=a;var n=s.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())}));t.PublicKey=n;var o=s.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),h=s.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(o),this.key("subjectPrivateKey").octstr())}));t.PrivateKey=h;var c=s.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));t.EncryptedPrivateKey=c;var d=s.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));t.DSAPrivateKey=d,t.DSAparam=s.define("DSAparam",(function(){this.int()}));var u=s.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(l),this.key("publicKey").optional().explicit(1).bitstr())}));t.ECPrivateKey=u;var l=s.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));t.signature=s.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},41934:(e,t,i)=>{"use strict";var s=i(39809),r=s.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),a=s.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),n=s.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),o=s.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())})),h=s.define("RelativeDistinguishedName",(function(){this.setof(a)})),c=s.define("RDNSequence",(function(){this.seqof(h)})),d=s.define("Name",(function(){this.choice({rdnSequence:this.use(c)})})),u=s.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(r),this.key("notAfter").use(r))})),l=s.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),f=s.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(n),this.key("issuer").use(d),this.key("validity").use(u),this.key("subject").use(d),this.key("subjectPublicKeyInfo").use(o),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(l).optional())})),p=s.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(f),this.key("signatureAlgorithm").use(n),this.key("signatureValue").bitstr())}));e.exports=p},77631:(e,t,i)=>{var s=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,n=i(13048),o=i(44696),h=i(89509).Buffer;e.exports=function(e,t){var i,c=e.toString(),d=c.match(s);if(d){var u="aes"+d[1],l=h.from(d[2],"hex"),f=h.from(d[3].replace(/[\r\n]/g,""),"base64"),p=n(t,l.slice(0,8),parseInt(d[1],10)).key,m=[],g=o.createDecipheriv(u,p,l);m.push(g.update(f)),m.push(g.final()),i=h.concat(m)}else{var y=c.match(a);i=h.from(y[2].replace(/[\r\n]/g,""),"base64")}return{tag:c.match(r)[1],data:i}}},70980:(e,t,i)=>{var s=i(52818),r=i(873),a=i(77631),n=i(44696),o=i(25632),h=i(89509).Buffer;function c(e){var t;"object"!=typeof e||h.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=h.from(e));var i,c,d=a(e,t),u=d.tag,l=d.data;switch(u){case"CERTIFICATE":c=s.certificate.decode(l,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(c||(c=s.PublicKey.decode(l,"der")),i=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return s.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=s.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw new Error("unknown key id "+i)}case"ENCRYPTED PRIVATE KEY":l=function(e,t){var i=e.algorithm.decrypt.kde.kdeparams.salt,s=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),a=r[e.algorithm.decrypt.cipher.algo.join(".")],c=e.algorithm.decrypt.cipher.iv,d=e.subjectPrivateKey,u=parseInt(a.split("-")[1],10)/8,l=o.pbkdf2Sync(t,i,s,u,"sha1"),f=n.createDecipheriv(a,l,c),p=[];return p.push(f.update(d)),p.push(f.final()),h.concat(p)}(l=s.EncryptedPrivateKey.decode(l,"der"),t);case"PRIVATE KEY":switch(i=(c=s.PrivateKey.decode(l,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return s.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:s.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=s.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw new Error("unknown key id "+i)}case"RSA PUBLIC KEY":return s.RSAPublicKey.decode(l,"der");case"RSA PRIVATE KEY":return s.RSAPrivateKey.decode(l,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:s.DSAPrivateKey.decode(l,"der")};case"EC PRIVATE KEY":return{curve:(l=s.ECPrivateKey.decode(l,"der")).parameters.value,privateKey:l.privateKey};default:throw new Error("unknown key type "+u)}}e.exports=c,c.signature=s.signature},25632:(e,t,i)=>{t.pbkdf2=i(88638),t.pbkdf2Sync=i(91257)},88638:(e,t,i)=>{var s,r,a=i(89509).Buffer,n=i(77357),o=i(12368),h=i(91257),c=i(57777),d=i.g.crypto&&i.g.crypto.subtle,u={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},l=[];function f(){return r||(r=i.g.process&&i.g.process.nextTick?i.g.process.nextTick:i.g.queueMicrotask?i.g.queueMicrotask:i.g.setImmediate?i.g.setImmediate:i.g.setTimeout)}function p(e,t,i,s,r){return d.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then((function(e){return d.deriveBits({name:"PBKDF2",salt:t,iterations:i,hash:{name:r}},e,s<<3)})).then((function(e){return a.from(e)}))}e.exports=function(e,t,r,m,g,y){"function"==typeof g&&(y=g,g=void 0);var b=u[(g=g||"sha1").toLowerCase()];if(b&&"function"==typeof i.g.Promise){if(n(r,m),e=c(e,o,"Password"),t=c(t,o,"Salt"),"function"!=typeof y)throw new Error("No callback provided to pbkdf2");!function(e,t){e.then((function(e){f()((function(){t(null,e)}))}),(function(e){f()((function(){t(e)}))}))}(function(e){if(i.g.process&&!i.g.process.browser)return Promise.resolve(!1);if(!d||!d.importKey||!d.deriveBits)return Promise.resolve(!1);if(void 0!==l[e])return l[e];var t=p(s=s||a.alloc(8),s,10,128,e).then((function(){return!0})).catch((function(){return!1}));return l[e]=t,t}(b).then((function(i){return i?p(e,t,r,m,b):h(e,t,r,m,g)})),y)}else f()((function(){var i;try{i=h(e,t,r,m,g)}catch(e){return y(e)}y(null,i)}))}},12368:(e,t,i)=>{var s,r=i(34155);s=i.g.process&&i.g.process.browser?"utf-8":i.g.process&&i.g.process.version?parseInt(r.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",e.exports=s},77357:e=>{var t=Math.pow(2,30)-1;e.exports=function(e,i){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof i)throw new TypeError("Key length not a number");if(i<0||i>t||i!=i)throw new TypeError("Bad key length")}},91257:(e,t,i)=>{var s=i(78028),r=i(79785),a=i(89072),n=i(89509).Buffer,o=i(77357),h=i(12368),c=i(57777),d=n.alloc(128),u={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function l(e,t,i){var o=function(e){return"rmd160"===e||"ripemd160"===e?function(e){return(new r).update(e).digest()}:"md5"===e?s:function(t){return a(e).update(t).digest()}}(e),h="sha512"===e||"sha384"===e?128:64;t.length>h?t=o(t):t.length<h&&(t=n.concat([t,d],h));for(var c=n.allocUnsafe(h+u[e]),l=n.allocUnsafe(h+u[e]),f=0;f<h;f++)c[f]=54^t[f],l[f]=92^t[f];var p=n.allocUnsafe(h+i+4);c.copy(p,0,0,h),this.ipad1=p,this.ipad2=c,this.opad=l,this.alg=e,this.blocksize=h,this.hash=o,this.size=u[e]}l.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=function(e,t,i,s,r){o(i,s);var a=new l(r=r||"sha1",e=c(e,h,"Password"),(t=c(t,h,"Salt")).length),d=n.allocUnsafe(s),f=n.allocUnsafe(t.length+4);t.copy(f,0,0,t.length);for(var p=0,m=u[r],g=Math.ceil(s/m),y=1;y<=g;y++){f.writeUInt32BE(y,t.length);for(var b=a.run(f,a.ipad1),v=b,w=1;w<i;w++){v=a.run(v,a.ipad2);for(var k=0;k<m;k++)b[k]^=v[k]}b.copy(d,p),p+=m}return d}},57777:(e,t,i)=>{var s=i(89509).Buffer;e.exports=function(e,t,i){if(s.isBuffer(e))return e;if("string"==typeof e)return s.from(e,t);if(ArrayBuffer.isView(e))return s.from(e.buffer);throw new TypeError(i+" must be a string, a Buffer, a typed array or a DataView")}},34155:e=>{var t,i,s=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function n(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(i){try{return t.call(null,e,0)}catch(i){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var o,h=[],c=!1,d=-1;function u(){c&&o&&(c=!1,o.length?h=o.concat(h):d=-1,h.length&&l())}function l(){if(!c){var e=n(u);c=!0;for(var t=h.length;t;){for(o=h,h=[];++d<t;)o&&o[d].run();d=-1,t=h.length}o=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new f(e,t)),1!==h.length||c||n(l)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},7900:(e,t,i)=>{t.publicEncrypt=i(16559),t.privateDecrypt=i(26138),t.privateEncrypt=function(e,i){return t.publicEncrypt(e,i,!0)},t.publicDecrypt=function(e,i){return t.privateDecrypt(e,i,!0)}},99199:(e,t,i)=>{var s=i(23482),r=i(89509).Buffer;function a(e){var t=r.allocUnsafe(4);return t.writeUInt32BE(e,0),t}e.exports=function(e,t){for(var i,n=r.alloc(0),o=0;n.length<t;)i=a(o++),n=r.concat([n,s("sha1").update(e).update(i).digest()]);return n.slice(0,t)}},92144:function(e,t,i){!function(e,t){"use strict";function s(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function a(e,t,i){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(i=t,t=10),this._init(e||0,t||10,i||"be"))}var n;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{n="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(77108).Buffer}catch(e){}function o(e,t){var i=e.charCodeAt(t);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function h(e,t,i){var s=o(e,i);return i-1>=t&&(s|=o(e,i-1)<<4),s}function c(e,t,i,s){for(var r=0,a=Math.min(e.length,i),n=t;n<a;n++){var o=e.charCodeAt(n)-48;r*=s,r+=o>=49?o-49+10:o>=17?o-17+10:o}return r}a.isBN=function(e){return e instanceof a||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),s(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<e.length&&(16===t?this._parseHex(e,r,i):(this._parseBase(e,t,r),"le"===i&&this._initArray(this.toArray(),t,i)))},a.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(s(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},a.prototype._initArray=function(e,t,i){if(s("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var a,n,o=0;if("be"===i)for(r=e.length-1,a=0;r>=0;r-=3)n=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===i)for(r=0,a=0;r<e.length;r+=3)n=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[a]|=n<<o&67108863,this.words[a+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this.strip()},a.prototype._parseHex=function(e,t,i){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var r,a=0,n=0;if("be"===i)for(s=e.length-1;s>=t;s-=2)r=h(e,t,s)<<a,this.words[n]|=67108863&r,a>=18?(a-=18,n+=1,this.words[n]|=r>>>26):a+=8;else for(s=(e.length-t)%2==0?t+1:t;s<e.length;s+=2)r=h(e,t,s)<<a,this.words[n]|=67108863&r,a>=18?(a-=18,n+=1,this.words[n]|=r>>>26):a+=8;this.strip()},a.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var s=0,r=1;r<=67108863;r*=t)s++;s--,r=r/t|0;for(var a=e.length-i,n=a%s,o=Math.min(a,a-n)+i,h=0,d=i;d<o;d+=s)h=c(e,d,d+s,t),this.imuln(r),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==n){var u=1;for(h=c(e,d,e.length,t),d=0;d<n;d++)u*=t;this.imuln(u),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,i){i.negative=t.negative^e.negative;var s=e.length+t.length|0;i.length=s,s=s-1|0;var r=0|e.words[0],a=0|t.words[0],n=r*a,o=67108863&n,h=n/67108864|0;i.words[0]=o;for(var c=1;c<s;c++){for(var d=h>>>26,u=67108863&h,l=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=l;f++){var p=c-f|0;d+=(n=(r=0|e.words[p])*(a=0|t.words[f])+u)/67108864|0,u=67108863&n}i.words[c]=0|u,h=0|d}return 0!==h?i.words[c]=0|h:i.length--,i.strip()}a.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var r=0,a=0,n=0;n<this.length;n++){var o=this.words[n],h=(16777215&(o<<r|a)).toString(16);i=0!=(a=o>>>24-r&16777215)||n!==this.length-1?d[6-h.length]+h+i:h+i,(r+=2)>=26&&(r-=26,n--)}for(0!==a&&(i=a.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var c=u[e],f=l[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);i=(p=p.idivn(f)).isZero()?m+i:d[c-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}s(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return s(void 0!==n),this.toArrayLike(n,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,i){var r=this.byteLength(),a=i||Math.max(1,r);s(r<=a,"byte array longer than desired length"),s(a>0,"Requested array length <= 0"),this.strip();var n,o,h="le"===t,c=new e(a),d=this.clone();if(h){for(o=0;!d.isZero();o++)n=d.andln(255),d.iushrn(8),c[o]=n;for(;o<a;o++)c[o]=0}else{for(o=0;o<a-r;o++)c[o]=0;for(o=0;!d.isZero();o++)n=d.andln(255),d.iushrn(8),c[a-o-1]=n}return c},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,i=0;return 0==(8191&t)&&(i+=13,t>>>=13),0==(127&t)&&(i+=7,t>>>=7),0==(15&t)&&(i+=4,t>>>=4),0==(3&t)&&(i+=2,t>>>=2),0==(1&t)&&i++,i},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var i=this._zeroBits(this.words[t]);if(e+=i,26!==i)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},a.prototype.ior=function(e){return s(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]&e.words[i];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return s(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,i;this.length>e.length?(t=this,i=e):(t=e,i=this);for(var s=0;s<i.length;s++)this.words[s]=t.words[s]^i.words[s];if(this!==t)for(;s<t.length;s++)this.words[s]=t.words[s];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return s(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){s("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){s("number"==typeof e&&e>=0);var i=e/26|0,r=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},a.prototype.iadd=function(e){var t,i,s;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(i=this,s=e):(i=e,s=this);for(var r=0,a=0;a<s.length;a++)t=(0|i.words[a])+(0|s.words[a])+r,this.words[a]=67108863&t,r=t>>>26;for(;0!==r&&a<i.length;a++)t=(0|i.words[a])+r,this.words[a]=67108863&t,r=t>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i,s,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,s=e):(i=e,s=this);for(var a=0,n=0;n<s.length;n++)a=(t=(0|i.words[n])-(0|s.words[n])+a)>>26,this.words[n]=67108863&t;for(;0!==a&&n<i.length;n++)a=(t=(0|i.words[n])+a)>>26,this.words[n]=67108863&t;if(0===a&&n<i.length&&i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this.length=Math.max(this.length,n),i!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,i){var s,r,a,n=e.words,o=t.words,h=i.words,c=0,d=0|n[0],u=8191&d,l=d>>>13,f=0|n[1],p=8191&f,m=f>>>13,g=0|n[2],y=8191&g,b=g>>>13,v=0|n[3],w=8191&v,k=v>>>13,_=0|n[4],S=8191&_,O=_>>>13,M=0|n[5],T=8191&M,x=M>>>13,I=0|n[6],A=8191&I,C=I>>>13,N=0|n[7],E=8191&N,P=N>>>13,B=0|n[8],R=8191&B,V=B>>>13,L=0|n[9],D=8191&L,q=L>>>13,G=0|o[0],F=8191&G,j=G>>>13,U=0|o[1],H=8191&U,z=U>>>13,K=0|o[2],W=8191&K,X=K>>>13,Z=0|o[3],Y=8191&Z,Q=Z>>>13,J=0|o[4],$=8191&J,ee=J>>>13,te=0|o[5],ie=8191&te,se=te>>>13,re=0|o[6],ae=8191&re,ne=re>>>13,oe=0|o[7],he=8191&oe,ce=oe>>>13,de=0|o[8],ue=8191&de,le=de>>>13,fe=0|o[9],pe=8191&fe,me=fe>>>13;i.negative=e.negative^t.negative,i.length=19;var ge=(c+(s=Math.imul(u,F))|0)+((8191&(r=(r=Math.imul(u,j))+Math.imul(l,F)|0))<<13)|0;c=((a=Math.imul(l,j))+(r>>>13)|0)+(ge>>>26)|0,ge&=67108863,s=Math.imul(p,F),r=(r=Math.imul(p,j))+Math.imul(m,F)|0,a=Math.imul(m,j);var ye=(c+(s=s+Math.imul(u,H)|0)|0)+((8191&(r=(r=r+Math.imul(u,z)|0)+Math.imul(l,H)|0))<<13)|0;c=((a=a+Math.imul(l,z)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,s=Math.imul(y,F),r=(r=Math.imul(y,j))+Math.imul(b,F)|0,a=Math.imul(b,j),s=s+Math.imul(p,H)|0,r=(r=r+Math.imul(p,z)|0)+Math.imul(m,H)|0,a=a+Math.imul(m,z)|0;var be=(c+(s=s+Math.imul(u,W)|0)|0)+((8191&(r=(r=r+Math.imul(u,X)|0)+Math.imul(l,W)|0))<<13)|0;c=((a=a+Math.imul(l,X)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,s=Math.imul(w,F),r=(r=Math.imul(w,j))+Math.imul(k,F)|0,a=Math.imul(k,j),s=s+Math.imul(y,H)|0,r=(r=r+Math.imul(y,z)|0)+Math.imul(b,H)|0,a=a+Math.imul(b,z)|0,s=s+Math.imul(p,W)|0,r=(r=r+Math.imul(p,X)|0)+Math.imul(m,W)|0,a=a+Math.imul(m,X)|0;var ve=(c+(s=s+Math.imul(u,Y)|0)|0)+((8191&(r=(r=r+Math.imul(u,Q)|0)+Math.imul(l,Y)|0))<<13)|0;c=((a=a+Math.imul(l,Q)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,s=Math.imul(S,F),r=(r=Math.imul(S,j))+Math.imul(O,F)|0,a=Math.imul(O,j),s=s+Math.imul(w,H)|0,r=(r=r+Math.imul(w,z)|0)+Math.imul(k,H)|0,a=a+Math.imul(k,z)|0,s=s+Math.imul(y,W)|0,r=(r=r+Math.imul(y,X)|0)+Math.imul(b,W)|0,a=a+Math.imul(b,X)|0,s=s+Math.imul(p,Y)|0,r=(r=r+Math.imul(p,Q)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,Q)|0;var we=(c+(s=s+Math.imul(u,$)|0)|0)+((8191&(r=(r=r+Math.imul(u,ee)|0)+Math.imul(l,$)|0))<<13)|0;c=((a=a+Math.imul(l,ee)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,s=Math.imul(T,F),r=(r=Math.imul(T,j))+Math.imul(x,F)|0,a=Math.imul(x,j),s=s+Math.imul(S,H)|0,r=(r=r+Math.imul(S,z)|0)+Math.imul(O,H)|0,a=a+Math.imul(O,z)|0,s=s+Math.imul(w,W)|0,r=(r=r+Math.imul(w,X)|0)+Math.imul(k,W)|0,a=a+Math.imul(k,X)|0,s=s+Math.imul(y,Y)|0,r=(r=r+Math.imul(y,Q)|0)+Math.imul(b,Y)|0,a=a+Math.imul(b,Q)|0,s=s+Math.imul(p,$)|0,r=(r=r+Math.imul(p,ee)|0)+Math.imul(m,$)|0,a=a+Math.imul(m,ee)|0;var ke=(c+(s=s+Math.imul(u,ie)|0)|0)+((8191&(r=(r=r+Math.imul(u,se)|0)+Math.imul(l,ie)|0))<<13)|0;c=((a=a+Math.imul(l,se)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,s=Math.imul(A,F),r=(r=Math.imul(A,j))+Math.imul(C,F)|0,a=Math.imul(C,j),s=s+Math.imul(T,H)|0,r=(r=r+Math.imul(T,z)|0)+Math.imul(x,H)|0,a=a+Math.imul(x,z)|0,s=s+Math.imul(S,W)|0,r=(r=r+Math.imul(S,X)|0)+Math.imul(O,W)|0,a=a+Math.imul(O,X)|0,s=s+Math.imul(w,Y)|0,r=(r=r+Math.imul(w,Q)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,Q)|0,s=s+Math.imul(y,$)|0,r=(r=r+Math.imul(y,ee)|0)+Math.imul(b,$)|0,a=a+Math.imul(b,ee)|0,s=s+Math.imul(p,ie)|0,r=(r=r+Math.imul(p,se)|0)+Math.imul(m,ie)|0,a=a+Math.imul(m,se)|0;var _e=(c+(s=s+Math.imul(u,ae)|0)|0)+((8191&(r=(r=r+Math.imul(u,ne)|0)+Math.imul(l,ae)|0))<<13)|0;c=((a=a+Math.imul(l,ne)|0)+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,s=Math.imul(E,F),r=(r=Math.imul(E,j))+Math.imul(P,F)|0,a=Math.imul(P,j),s=s+Math.imul(A,H)|0,r=(r=r+Math.imul(A,z)|0)+Math.imul(C,H)|0,a=a+Math.imul(C,z)|0,s=s+Math.imul(T,W)|0,r=(r=r+Math.imul(T,X)|0)+Math.imul(x,W)|0,a=a+Math.imul(x,X)|0,s=s+Math.imul(S,Y)|0,r=(r=r+Math.imul(S,Q)|0)+Math.imul(O,Y)|0,a=a+Math.imul(O,Q)|0,s=s+Math.imul(w,$)|0,r=(r=r+Math.imul(w,ee)|0)+Math.imul(k,$)|0,a=a+Math.imul(k,ee)|0,s=s+Math.imul(y,ie)|0,r=(r=r+Math.imul(y,se)|0)+Math.imul(b,ie)|0,a=a+Math.imul(b,se)|0,s=s+Math.imul(p,ae)|0,r=(r=r+Math.imul(p,ne)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,ne)|0;var Se=(c+(s=s+Math.imul(u,he)|0)|0)+((8191&(r=(r=r+Math.imul(u,ce)|0)+Math.imul(l,he)|0))<<13)|0;c=((a=a+Math.imul(l,ce)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,s=Math.imul(R,F),r=(r=Math.imul(R,j))+Math.imul(V,F)|0,a=Math.imul(V,j),s=s+Math.imul(E,H)|0,r=(r=r+Math.imul(E,z)|0)+Math.imul(P,H)|0,a=a+Math.imul(P,z)|0,s=s+Math.imul(A,W)|0,r=(r=r+Math.imul(A,X)|0)+Math.imul(C,W)|0,a=a+Math.imul(C,X)|0,s=s+Math.imul(T,Y)|0,r=(r=r+Math.imul(T,Q)|0)+Math.imul(x,Y)|0,a=a+Math.imul(x,Q)|0,s=s+Math.imul(S,$)|0,r=(r=r+Math.imul(S,ee)|0)+Math.imul(O,$)|0,a=a+Math.imul(O,ee)|0,s=s+Math.imul(w,ie)|0,r=(r=r+Math.imul(w,se)|0)+Math.imul(k,ie)|0,a=a+Math.imul(k,se)|0,s=s+Math.imul(y,ae)|0,r=(r=r+Math.imul(y,ne)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,ne)|0,s=s+Math.imul(p,he)|0,r=(r=r+Math.imul(p,ce)|0)+Math.imul(m,he)|0,a=a+Math.imul(m,ce)|0;var Oe=(c+(s=s+Math.imul(u,ue)|0)|0)+((8191&(r=(r=r+Math.imul(u,le)|0)+Math.imul(l,ue)|0))<<13)|0;c=((a=a+Math.imul(l,le)|0)+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,s=Math.imul(D,F),r=(r=Math.imul(D,j))+Math.imul(q,F)|0,a=Math.imul(q,j),s=s+Math.imul(R,H)|0,r=(r=r+Math.imul(R,z)|0)+Math.imul(V,H)|0,a=a+Math.imul(V,z)|0,s=s+Math.imul(E,W)|0,r=(r=r+Math.imul(E,X)|0)+Math.imul(P,W)|0,a=a+Math.imul(P,X)|0,s=s+Math.imul(A,Y)|0,r=(r=r+Math.imul(A,Q)|0)+Math.imul(C,Y)|0,a=a+Math.imul(C,Q)|0,s=s+Math.imul(T,$)|0,r=(r=r+Math.imul(T,ee)|0)+Math.imul(x,$)|0,a=a+Math.imul(x,ee)|0,s=s+Math.imul(S,ie)|0,r=(r=r+Math.imul(S,se)|0)+Math.imul(O,ie)|0,a=a+Math.imul(O,se)|0,s=s+Math.imul(w,ae)|0,r=(r=r+Math.imul(w,ne)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,ne)|0,s=s+Math.imul(y,he)|0,r=(r=r+Math.imul(y,ce)|0)+Math.imul(b,he)|0,a=a+Math.imul(b,ce)|0,s=s+Math.imul(p,ue)|0,r=(r=r+Math.imul(p,le)|0)+Math.imul(m,ue)|0,a=a+Math.imul(m,le)|0;var Me=(c+(s=s+Math.imul(u,pe)|0)|0)+((8191&(r=(r=r+Math.imul(u,me)|0)+Math.imul(l,pe)|0))<<13)|0;c=((a=a+Math.imul(l,me)|0)+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,s=Math.imul(D,H),r=(r=Math.imul(D,z))+Math.imul(q,H)|0,a=Math.imul(q,z),s=s+Math.imul(R,W)|0,r=(r=r+Math.imul(R,X)|0)+Math.imul(V,W)|0,a=a+Math.imul(V,X)|0,s=s+Math.imul(E,Y)|0,r=(r=r+Math.imul(E,Q)|0)+Math.imul(P,Y)|0,a=a+Math.imul(P,Q)|0,s=s+Math.imul(A,$)|0,r=(r=r+Math.imul(A,ee)|0)+Math.imul(C,$)|0,a=a+Math.imul(C,ee)|0,s=s+Math.imul(T,ie)|0,r=(r=r+Math.imul(T,se)|0)+Math.imul(x,ie)|0,a=a+Math.imul(x,se)|0,s=s+Math.imul(S,ae)|0,r=(r=r+Math.imul(S,ne)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,ne)|0,s=s+Math.imul(w,he)|0,r=(r=r+Math.imul(w,ce)|0)+Math.imul(k,he)|0,a=a+Math.imul(k,ce)|0,s=s+Math.imul(y,ue)|0,r=(r=r+Math.imul(y,le)|0)+Math.imul(b,ue)|0,a=a+Math.imul(b,le)|0;var Te=(c+(s=s+Math.imul(p,pe)|0)|0)+((8191&(r=(r=r+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,s=Math.imul(D,W),r=(r=Math.imul(D,X))+Math.imul(q,W)|0,a=Math.imul(q,X),s=s+Math.imul(R,Y)|0,r=(r=r+Math.imul(R,Q)|0)+Math.imul(V,Y)|0,a=a+Math.imul(V,Q)|0,s=s+Math.imul(E,$)|0,r=(r=r+Math.imul(E,ee)|0)+Math.imul(P,$)|0,a=a+Math.imul(P,ee)|0,s=s+Math.imul(A,ie)|0,r=(r=r+Math.imul(A,se)|0)+Math.imul(C,ie)|0,a=a+Math.imul(C,se)|0,s=s+Math.imul(T,ae)|0,r=(r=r+Math.imul(T,ne)|0)+Math.imul(x,ae)|0,a=a+Math.imul(x,ne)|0,s=s+Math.imul(S,he)|0,r=(r=r+Math.imul(S,ce)|0)+Math.imul(O,he)|0,a=a+Math.imul(O,ce)|0,s=s+Math.imul(w,ue)|0,r=(r=r+Math.imul(w,le)|0)+Math.imul(k,ue)|0,a=a+Math.imul(k,le)|0;var xe=(c+(s=s+Math.imul(y,pe)|0)|0)+((8191&(r=(r=r+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;c=((a=a+Math.imul(b,me)|0)+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,s=Math.imul(D,Y),r=(r=Math.imul(D,Q))+Math.imul(q,Y)|0,a=Math.imul(q,Q),s=s+Math.imul(R,$)|0,r=(r=r+Math.imul(R,ee)|0)+Math.imul(V,$)|0,a=a+Math.imul(V,ee)|0,s=s+Math.imul(E,ie)|0,r=(r=r+Math.imul(E,se)|0)+Math.imul(P,ie)|0,a=a+Math.imul(P,se)|0,s=s+Math.imul(A,ae)|0,r=(r=r+Math.imul(A,ne)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,ne)|0,s=s+Math.imul(T,he)|0,r=(r=r+Math.imul(T,ce)|0)+Math.imul(x,he)|0,a=a+Math.imul(x,ce)|0,s=s+Math.imul(S,ue)|0,r=(r=r+Math.imul(S,le)|0)+Math.imul(O,ue)|0,a=a+Math.imul(O,le)|0;var Ie=(c+(s=s+Math.imul(w,pe)|0)|0)+((8191&(r=(r=r+Math.imul(w,me)|0)+Math.imul(k,pe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,s=Math.imul(D,$),r=(r=Math.imul(D,ee))+Math.imul(q,$)|0,a=Math.imul(q,ee),s=s+Math.imul(R,ie)|0,r=(r=r+Math.imul(R,se)|0)+Math.imul(V,ie)|0,a=a+Math.imul(V,se)|0,s=s+Math.imul(E,ae)|0,r=(r=r+Math.imul(E,ne)|0)+Math.imul(P,ae)|0,a=a+Math.imul(P,ne)|0,s=s+Math.imul(A,he)|0,r=(r=r+Math.imul(A,ce)|0)+Math.imul(C,he)|0,a=a+Math.imul(C,ce)|0,s=s+Math.imul(T,ue)|0,r=(r=r+Math.imul(T,le)|0)+Math.imul(x,ue)|0,a=a+Math.imul(x,le)|0;var Ae=(c+(s=s+Math.imul(S,pe)|0)|0)+((8191&(r=(r=r+Math.imul(S,me)|0)+Math.imul(O,pe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,s=Math.imul(D,ie),r=(r=Math.imul(D,se))+Math.imul(q,ie)|0,a=Math.imul(q,se),s=s+Math.imul(R,ae)|0,r=(r=r+Math.imul(R,ne)|0)+Math.imul(V,ae)|0,a=a+Math.imul(V,ne)|0,s=s+Math.imul(E,he)|0,r=(r=r+Math.imul(E,ce)|0)+Math.imul(P,he)|0,a=a+Math.imul(P,ce)|0,s=s+Math.imul(A,ue)|0,r=(r=r+Math.imul(A,le)|0)+Math.imul(C,ue)|0,a=a+Math.imul(C,le)|0;var Ce=(c+(s=s+Math.imul(T,pe)|0)|0)+((8191&(r=(r=r+Math.imul(T,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((a=a+Math.imul(x,me)|0)+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,s=Math.imul(D,ae),r=(r=Math.imul(D,ne))+Math.imul(q,ae)|0,a=Math.imul(q,ne),s=s+Math.imul(R,he)|0,r=(r=r+Math.imul(R,ce)|0)+Math.imul(V,he)|0,a=a+Math.imul(V,ce)|0,s=s+Math.imul(E,ue)|0,r=(r=r+Math.imul(E,le)|0)+Math.imul(P,ue)|0,a=a+Math.imul(P,le)|0;var Ne=(c+(s=s+Math.imul(A,pe)|0)|0)+((8191&(r=(r=r+Math.imul(A,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((a=a+Math.imul(C,me)|0)+(r>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,s=Math.imul(D,he),r=(r=Math.imul(D,ce))+Math.imul(q,he)|0,a=Math.imul(q,ce),s=s+Math.imul(R,ue)|0,r=(r=r+Math.imul(R,le)|0)+Math.imul(V,ue)|0,a=a+Math.imul(V,le)|0;var Ee=(c+(s=s+Math.imul(E,pe)|0)|0)+((8191&(r=(r=r+Math.imul(E,me)|0)+Math.imul(P,pe)|0))<<13)|0;c=((a=a+Math.imul(P,me)|0)+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,s=Math.imul(D,ue),r=(r=Math.imul(D,le))+Math.imul(q,ue)|0,a=Math.imul(q,le);var Pe=(c+(s=s+Math.imul(R,pe)|0)|0)+((8191&(r=(r=r+Math.imul(R,me)|0)+Math.imul(V,pe)|0))<<13)|0;c=((a=a+Math.imul(V,me)|0)+(r>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Be=(c+(s=Math.imul(D,pe))|0)+((8191&(r=(r=Math.imul(D,me))+Math.imul(q,pe)|0))<<13)|0;return c=((a=Math.imul(q,me))+(r>>>13)|0)+(Be>>>26)|0,Be&=67108863,h[0]=ge,h[1]=ye,h[2]=be,h[3]=ve,h[4]=we,h[5]=ke,h[6]=_e,h[7]=Se,h[8]=Oe,h[9]=Me,h[10]=Te,h[11]=xe,h[12]=Ie,h[13]=Ae,h[14]=Ce,h[15]=Ne,h[16]=Ee,h[17]=Pe,h[18]=Be,0!==c&&(h[19]=c,i.length++),i};function m(e,t,i){return(new g).mulp(e,t,i)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=f),a.prototype.mulTo=function(e,t){var i=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):i<63?f(this,e,t):i<1024?function(e,t,i){i.negative=t.negative^e.negative,i.length=e.length+t.length;for(var s=0,r=0,a=0;a<i.length-1;a++){var n=r;r=0;for(var o=67108863&s,h=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=h;c++){var d=a-c,u=(0|e.words[d])*(0|t.words[c]),l=67108863&u;o=67108863&(l=l+o|0),r+=(n=(n=n+(u/67108864|0)|0)+(l>>>26)|0)>>>26,n&=67108863}i.words[a]=o,s=n,n=r}return 0!==s?i.words[a]=s:i.length--,i.strip()}(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),i=a.prototype._countBits(e)-1,s=0;s<e;s++)t[s]=this.revBin(s,i,e);return t},g.prototype.revBin=function(e,t,i){if(0===e||e===i-1)return e;for(var s=0,r=0;r<t;r++)s|=(1&e)<<t-r-1,e>>=1;return s},g.prototype.permute=function(e,t,i,s,r,a){for(var n=0;n<a;n++)s[n]=t[e[n]],r[n]=i[e[n]]},g.prototype.transform=function(e,t,i,s,r,a){this.permute(a,e,t,i,s,r);for(var n=1;n<r;n<<=1)for(var o=n<<1,h=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),d=0;d<r;d+=o)for(var u=h,l=c,f=0;f<n;f++){var p=i[d+f],m=s[d+f],g=i[d+f+n],y=s[d+f+n],b=u*g-l*y;y=u*y+l*g,g=b,i[d+f]=p+g,s[d+f]=m+y,i[d+f+n]=p-g,s[d+f+n]=m-y,f!==o&&(b=h*u-c*l,l=h*l+c*u,u=b)}},g.prototype.guessLen13b=function(e,t){var i=1|Math.max(t,e),s=1&i,r=0;for(i=i/2|0;i;i>>>=1)r++;return 1<<r+1+s},g.prototype.conjugate=function(e,t,i){if(!(i<=1))for(var s=0;s<i/2;s++){var r=e[s];e[s]=e[i-s-1],e[i-s-1]=r,r=t[s],t[s]=-t[i-s-1],t[i-s-1]=-r}},g.prototype.normalize13b=function(e,t){for(var i=0,s=0;s<t/2;s++){var r=8192*Math.round(e[2*s+1]/t)+Math.round(e[2*s]/t)+i;e[s]=67108863&r,i=r<67108864?0:r/67108864|0}return e},g.prototype.convert13b=function(e,t,i,r){for(var a=0,n=0;n<t;n++)a+=0|e[n],i[2*n]=8191&a,a>>>=13,i[2*n+1]=8191&a,a>>>=13;for(n=2*t;n<r;++n)i[n]=0;s(0===a),s(0==(-8192&a))},g.prototype.stub=function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=0;return t},g.prototype.mulp=function(e,t,i){var s=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(s),a=this.stub(s),n=new Array(s),o=new Array(s),h=new Array(s),c=new Array(s),d=new Array(s),u=new Array(s),l=i.words;l.length=s,this.convert13b(e.words,e.length,n,s),this.convert13b(t.words,t.length,c,s),this.transform(n,a,o,h,s,r),this.transform(c,a,d,u,s,r);for(var f=0;f<s;f++){var p=o[f]*d[f]-h[f]*u[f];h[f]=o[f]*u[f]+h[f]*d[f],o[f]=p}return this.conjugate(o,h,s),this.transform(o,h,l,a,s,r),this.conjugate(l,a,s),this.normalize13b(l,s),i.negative=e.negative^t.negative,i.length=e.length+t.length,i.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),m(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){s("number"==typeof e),s(e<67108864);for(var t=0,i=0;i<this.length;i++){var r=(0|this.words[i])*e,a=(67108863&r)+(67108863&t);t>>=26,t+=r/67108864|0,t+=a>>>26,this.words[i]=67108863&a}return 0!==t&&(this.words[i]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),i=0;i<t.length;i++){var s=i/26|0,r=i%26;t[i]=(e.words[s]&1<<r)>>>r}return t}(e);if(0===t.length)return new a(1);for(var i=this,s=0;s<t.length&&0===t[s];s++,i=i.sqr());if(++s<t.length)for(var r=i.sqr();s<t.length;s++,r=r.sqr())0!==t[s]&&(i=i.mul(r));return i},a.prototype.iushln=function(e){s("number"==typeof e&&e>=0);var t,i=e%26,r=(e-i)/26,a=67108863>>>26-i<<26-i;if(0!==i){var n=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,h=(0|this.words[t])-o<<i;this.words[t]=h|n,n=o>>>26-i}n&&(this.words[t]=n,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this.strip()},a.prototype.ishln=function(e){return s(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,i){var r;s("number"==typeof e&&e>=0),r=t?(t-t%26)/26:0;var a=e%26,n=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,h=i;if(r-=n,r=Math.max(0,r),h){for(var c=0;c<n;c++)h.words[c]=this.words[c];h.length=n}if(0===n);else if(this.length>n)for(this.length-=n,c=0;c<this.length;c++)this.words[c]=this.words[c+n];else this.words[0]=0,this.length=1;var d=0;for(c=this.length-1;c>=0&&(0!==d||c>=r);c--){var u=0|this.words[c];this.words[c]=d<<26-a|u>>>a,d=u&o}return h&&0!==d&&(h.words[h.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,i){return s(0===this.negative),this.iushrn(e,t,i)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,r=1<<t;return!(this.length<=i||!(this.words[i]&r))},a.prototype.imaskn=function(e){s("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(s(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this.strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return s("number"==typeof e),s(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(s("number"==typeof e),s(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,i){var r,a,n=e.length+i;this._expand(n);var o=0;for(r=0;r<e.length;r++){a=(0|this.words[r+i])+o;var h=(0|e.words[r])*t;o=((a-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&a}for(;r<this.length-i;r++)o=(a=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&a;if(0===o)return this.strip();for(s(-1===o),o=0,r=0;r<this.length;r++)o=(a=-(0|this.words[r])+o)>>26,this.words[r]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var i=(this.length,e.length),s=this.clone(),r=e,n=0|r.words[r.length-1];0!=(i=26-this._countBits(n))&&(r=r.ushln(i),s.iushln(i),n=0|r.words[r.length-1]);var o,h=s.length-r.length;if("mod"!==t){(o=new a(null)).length=h+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var d=s.clone()._ishlnsubmul(r,1,h);0===d.negative&&(s=d,o&&(o.words[h]=1));for(var u=h-1;u>=0;u--){var l=67108864*(0|s.words[r.length+u])+(0|s.words[r.length+u-1]);for(l=Math.min(l/n|0,67108863),s._ishlnsubmul(r,l,u);0!==s.negative;)l--,s.negative=0,s._ishlnsubmul(r,1,u),s.isZero()||(s.negative^=1);o&&(o.words[u]=l)}return o&&o.strip(),s.strip(),"div"!==t&&0!==i&&s.iushrn(i),{div:o||null,mod:s}},a.prototype.divmod=function(e,t,i){return s(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(r=o.div.neg()),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.iadd(e)),{div:r,mod:n}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(r=o.div.neg()),{div:r,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(n=o.mod.neg(),i&&0!==n.negative&&n.isub(e)),{div:o.div,mod:n}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t);var r,n,o},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var i=0!==t.div.negative?t.mod.isub(e):t.mod,s=e.ushrn(1),r=e.andln(1),a=i.cmp(s);return a<0||1===r&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modn=function(e){s(e<=67108863);for(var t=(1<<26)%e,i=0,r=this.length-1;r>=0;r--)i=(t*i+(0|this.words[r]))%e;return i},a.prototype.idivn=function(e){s(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*t;this.words[i]=r/e|0,t=r%e}return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new a(1),n=new a(0),o=new a(0),h=new a(1),c=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++c;for(var d=i.clone(),u=t.clone();!t.isZero();){for(var l=0,f=1;0==(t.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(d),n.isub(u)),r.iushrn(1),n.iushrn(1);for(var p=0,m=1;0==(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(d),h.isub(u)),o.iushrn(1),h.iushrn(1);t.cmp(i)>=0?(t.isub(i),r.isub(o),n.isub(h)):(i.isub(t),o.isub(r),h.isub(n))}return{a:o,b:h,gcd:i.iushln(c)}},a.prototype._invmp=function(e){s(0===e.negative),s(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,n=new a(1),o=new a(0),h=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,d=1;0==(t.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(t.iushrn(c);c-- >0;)n.isOdd()&&n.iadd(h),n.iushrn(1);for(var u=0,l=1;0==(i.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(i.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);t.cmp(i)>=0?(t.isub(i),n.isub(o)):(i.isub(t),o.isub(n))}return(r=0===t.cmpn(1)?n:o).cmpn(0)<0&&r.iadd(e),r},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),i=e.clone();t.negative=0,i.negative=0;for(var s=0;t.isEven()&&i.isEven();s++)t.iushrn(1),i.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=t.cmp(i);if(r<0){var a=t;t=i,i=a}else if(0===r||0===i.cmpn(1))break;t.isub(i)}return i.iushln(s)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){s("number"==typeof e);var t=e%26,i=(e-t)/26,r=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var a=r,n=i;0!==a&&n<this.length;n++){var o=0|this.words[n];a=(o+=a)>>>26,o&=67108863,this.words[n]=o}return 0!==a&&(this.words[n]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),s(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,i=this.length-1;i>=0;i--){var s=0|this.words[i],r=0|e.words[i];if(s!==r){s<r?t=-1:s>r&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new S(e)},a.prototype.toRed=function(e){return s(!this.red,"Already a number in reduction context"),s(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return s(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return s(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else s(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function O(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,i=e;do{this.split(i,this.tmp),t=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(t>this.n);var s=t<this.n?-1:i.ucmp(this.p);return 0===s?(i.words[0]=0,i.length=1):s>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},r(v,b),v.prototype.split=function(e,t){for(var i=4194303,s=Math.min(e.length,9),r=0;r<s;r++)t.words[r]=e.words[r];if(t.length=s,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&i,r=10;r<e.length;r++){var n=0|e.words[r];e.words[r-10]=(n&i)<<4|a>>>22,a=n}a>>>=22,e.words[r-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,i=0;i<e.length;i++){var s=0|e.words[i];t+=977*s,e.words[i]=67108863&t,t=64*s+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(w,b),r(k,b),r(_,b),_.prototype.imulK=function(e){for(var t=0,i=0;i<e.length;i++){var s=19*(0|e.words[i])+t,r=67108863&s;s>>>=26,e.words[i]=r,t=s}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new w;else if("p192"===e)t=new k;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return y[e]=t,t},S.prototype._verify1=function(e){s(0===e.negative,"red works only with positives"),s(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){s(0==(e.negative|t.negative),"red works only with positives"),s(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var i=e.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var i=e.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i},S.prototype.sub=function(e,t){this._verify2(e,t);var i=e.sub(t);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var i=e.isub(t);return i.cmpn(0)<0&&i.iadd(this.m),i},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(s(t%2==1),3===t){var i=this.m.add(new a(1)).iushrn(2);return this.pow(e,i)}for(var r=this.m.subn(1),n=0;!r.isZero()&&0===r.andln(1);)n++,r.iushrn(1);s(!r.isZero());var o=new a(1).toRed(this),h=o.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);0!==this.pow(d,c).cmp(h);)d.redIAdd(h);for(var u=this.pow(d,r),l=this.pow(e,r.addn(1).iushrn(1)),f=this.pow(e,r),p=n;0!==f.cmp(o);){for(var m=f,g=0;0!==m.cmp(o);g++)m=m.redSqr();s(g<p);var y=this.pow(u,new a(1).iushln(p-g-1));l=l.redMul(y),u=y.redSqr(),f=f.redMul(u),p=g}return l},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var i=new Array(16);i[0]=new a(1).toRed(this),i[1]=e;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],e);var r=i[0],n=0,o=0,h=t.bitLength()%26;for(0===h&&(h=26),s=t.length-1;s>=0;s--){for(var c=t.words[s],d=h-1;d>=0;d--){var u=c>>d&1;r!==i[0]&&(r=this.sqr(r)),0!==u||0!==n?(n<<=1,n|=u,(4==++o||0===s&&0===d)&&(r=this.mul(r,i[n]),o=0,n=0)):o=0}h=26}return r},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new O(e)},r(O,S),O.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},O.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},O.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var i=e.imul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},O.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var i=e.mul(t),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n._forceRed(this)},O.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=i.nmd(e),this)},26138:(e,t,i)=>{var s=i(70980),r=i(99199),a=i(57859),n=i(92144),o=i(23663),h=i(23482),c=i(84818),d=i(89509).Buffer;e.exports=function(e,t,i){var u;u=e.padding?e.padding:i?1:4;var l,f=s(e),p=f.modulus.byteLength();if(t.length>p||new n(t).cmp(f.modulus)>=0)throw new Error("decryption error");l=i?c(new n(t),f):o(t,f);var m=d.alloc(p-l.length);if(l=d.concat([m,l],p),4===u)return function(e,t){var i=e.modulus.byteLength(),s=h("sha1").update(d.alloc(0)).digest(),n=s.length;if(0!==t[0])throw new Error("decryption error");var o=t.slice(1,n+1),c=t.slice(n+1),u=a(o,r(c,n)),l=a(c,r(u,i-n-1));if(function(e,t){e=d.from(e),t=d.from(t);var i=0,s=e.length;e.length!==t.length&&(i++,s=Math.min(e.length,t.length));for(var r=-1;++r<s;)i+=e[r]^t[r];return i}(s,l.slice(0,n)))throw new Error("decryption error");for(var f=n;0===l[f];)f++;if(1!==l[f++])throw new Error("decryption error");return l.slice(f)}(f,l);if(1===u)return function(e,t,i){for(var s=t.slice(0,2),r=2,a=0;0!==t[r++];)if(r>=t.length){a++;break}var n=t.slice(2,r-1);if(("0002"!==s.toString("hex")&&!i||"0001"!==s.toString("hex")&&i)&&a++,n.length<8&&a++,a)throw new Error("decryption error");return t.slice(r)}(0,l,i);if(3===u)return l;throw new Error("unknown padding")}},16559:(e,t,i)=>{var s=i(70980),r=i(61798),a=i(23482),n=i(99199),o=i(57859),h=i(92144),c=i(84818),d=i(23663),u=i(89509).Buffer;e.exports=function(e,t,i){var l;l=e.padding?e.padding:i?1:4;var f,p=s(e);if(4===l)f=function(e,t){var i=e.modulus.byteLength(),s=t.length,c=a("sha1").update(u.alloc(0)).digest(),d=c.length,l=2*d;if(s>i-l-2)throw new Error("message too long");var f=u.alloc(i-s-l-2),p=i-d-1,m=r(d),g=o(u.concat([c,f,u.alloc(1,1),t],p),n(m,p)),y=o(m,n(g,d));return new h(u.concat([u.alloc(1),y,g],i))}(p,t);else if(1===l)f=function(e,t,i){var s,a=t.length,n=e.modulus.byteLength();if(a>n-11)throw new Error("message too long");return s=i?u.alloc(n-a-3,255):function(e){for(var t,i=u.allocUnsafe(e),s=0,a=r(2*e),n=0;s<e;)n===a.length&&(a=r(2*e),n=0),(t=a[n++])&&(i[s++]=t);return i}(n-a-3),new h(u.concat([u.from([0,i?1:2]),s,u.alloc(1),t],n))}(p,t,i);else{if(3!==l)throw new Error("unknown padding");if((f=new h(t)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return i?d(f,p):c(f,p)}},84818:(e,t,i)=>{var s=i(92144),r=i(89509).Buffer;e.exports=function(e,t){return r.from(e.toRed(s.mont(t.modulus)).redPow(new s(t.publicExponent)).fromRed().toArray())}},57859:e=>{e.exports=function(e,t){for(var i=e.length,s=-1;++s<i;)e[s]^=t[s];return e}},62587:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,i,s,r){i=i||"&",s=s||"=";var a={};if("string"!=typeof e||0===e.length)return a;var n=/\+/g;e=e.split(i);var o=1e3;r&&"number"==typeof r.maxKeys&&(o=r.maxKeys);var h=e.length;o>0&&h>o&&(h=o);for(var c=0;c<h;++c){var d,u,l,f,p=e[c].replace(n,"%20"),m=p.indexOf(s);m>=0?(d=p.substr(0,m),u=p.substr(m+1)):(d=p,u=""),l=decodeURIComponent(d),f=decodeURIComponent(u),t(a,l)?Array.isArray(a[l])?a[l].push(f):a[l]=[a[l],f]:a[l]=f}return a}},12361:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,i,s,r){return i=i||"&",s=s||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(r){var a=encodeURIComponent(t(r))+s;return Array.isArray(e[r])?e[r].map((function(e){return a+encodeURIComponent(t(e))})).join(i):a+encodeURIComponent(t(e[r]))})).join(i):r?encodeURIComponent(t(r))+s+encodeURIComponent(t(e)):""}},17673:(e,t,i)=>{"use strict";t.decode=t.parse=i(62587),t.encode=t.stringify=i(12361)},61798:(e,t,i)=>{"use strict";var s=i(34155),r=65536,a=i(89509).Buffer,n=i.g.crypto||i.g.msCrypto;n&&n.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var i=a.allocUnsafe(e);if(e>0)if(e>r)for(var o=0;o<e;o+=r)n.getRandomValues(i.slice(o,o+r));else n.getRandomValues(i);return"function"==typeof t?s.nextTick((function(){t(null,i)})):i}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},77963:(e,t,i)=>{"use strict";var s=i(34155);function r(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var a=i(89509),n=i(61798),o=a.Buffer,h=a.kMaxLength,c=i.g.crypto||i.g.msCrypto,d=Math.pow(2,32)-1;function u(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>d||e<0)throw new TypeError("offset must be a uint32");if(e>h||e>t)throw new RangeError("offset out of range")}function l(e,t,i){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>d||e<0)throw new TypeError("size must be a uint32");if(e+t>i||e>h)throw new RangeError("buffer too small")}function f(e,t,i,r){if(s.browser){var a=e.buffer,o=new Uint8Array(a,t,i);return c.getRandomValues(o),r?void s.nextTick((function(){r(null,e)})):e}if(!r)return n(i).copy(e,t),e;n(i,(function(i,s){if(i)return r(i);s.copy(e,t),r(null,e)}))}c&&c.getRandomValues||!s.browser?(t.randomFill=function(e,t,s,r){if(!(o.isBuffer(e)||e instanceof i.g.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof t)r=t,t=0,s=e.length;else if("function"==typeof s)r=s,s=e.length-t;else if("function"!=typeof r)throw new TypeError('"cb" argument must be a function');return u(t,e.length),l(s,t,e.length),f(e,t,s,r)},t.randomFillSync=function(e,t,s){if(void 0===t&&(t=0),!(o.isBuffer(e)||e instanceof i.g.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return u(t,e.length),void 0===s&&(s=e.length-t),l(s,t,e.length),f(e,t,s)}):(t.randomFill=r,t.randomFillSync=r)},94281:e=>{"use strict";var t={};function i(e,i,s){s||(s=Error);var r=function(e){var t,s;function r(t,s,r){return e.call(this,function(e,t,s){return"string"==typeof i?i:i(e,t,s)}(t,s,r))||this}return s=e,(t=r).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s,r}(s);r.prototype.name=s.name,r.prototype.code=e,t[e]=r}function s(e,t){if(Array.isArray(e)){var i=e.length;return e=e.map((function(e){return String(e)})),i>2?"one of ".concat(t," ").concat(e.slice(0,i-1).join(", "),", or ")+e[i-1]:2===i?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,i){var r,a,n,o,h;if("string"==typeof t&&(a="not ",t.substr(0,a.length)===a)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,i){return(void 0===i||i>e.length)&&(i=e.length),e.substring(i-t.length,i)===t}(e," argument"))n="The ".concat(e," ").concat(r," ").concat(s(t,"type"));else{var c=("number"!=typeof h&&(h=0),h+".".length>(o=e).length||-1===o.indexOf(".",h)?"argument":"property");n='The "'.concat(e,'" ').concat(c," ").concat(r," ").concat(s(t,"type"))}return n+". Received type ".concat(typeof i)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},56753:(e,t,i)=>{"use strict";var s=i(34155),r=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t};e.exports=d;var a=i(79481),n=i(64229);i(35717)(d,a);for(var o=r(n.prototype),h=0;h<o.length;h++){var c=o[h];d.prototype[c]||(d.prototype[c]=n.prototype[c])}function d(e){if(!(this instanceof d))return new d(e);a.call(this,e),n.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||s.nextTick(l,this)}function l(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},82725:(e,t,i)=>{"use strict";e.exports=r;var s=i(74605);function r(e){if(!(this instanceof r))return new r(e);s.call(this,e)}i(35717)(r,s),r.prototype._transform=function(e,t,i){i(null,e)}},79481:(e,t,i)=>{"use strict";var s,r=i(34155);e.exports=M,M.ReadableState=O,i(17187).EventEmitter;var a,n=function(e,t){return e.listeners(t).length},o=i(22503),h=i(48764).Buffer,c=i.g.Uint8Array||function(){},d=i(94616);a=d&&d.debuglog?d.debuglog("stream"):function(){};var u,l,f,p=i(57327),m=i(61195),g=i(82457).getHighWaterMark,y=i(94281).q,b=y.ERR_INVALID_ARG_TYPE,v=y.ERR_STREAM_PUSH_AFTER_EOF,w=y.ERR_METHOD_NOT_IMPLEMENTED,k=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i(35717)(M,o);var _=m.errorOrDestroy,S=["error","close","destroy","pause","resume"];function O(e,t,r){s=s||i(56753),e=e||{},"boolean"!=typeof r&&(r=t instanceof s),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=i(32553).s),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function M(e){if(s=s||i(56753),!(this instanceof M))return new M(e);var t=this instanceof s;this._readableState=new O(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function T(e,t,i,s,r){a("readableAddChunk",t);var n,o=e._readableState;if(null===t)o.reading=!1,function(e,t){if(a("onEofChunk"),!t.ended){if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,t.sync?C(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,N(e)))}}(e,o);else if(r||(n=function(e,t){var i,s;return s=t,h.isBuffer(s)||s instanceof c||"string"==typeof t||void 0===t||e.objectMode||(i=new b("chunk",["string","Buffer","Uint8Array"],t)),i}(o,t)),n)_(e,n);else if(o.objectMode||t&&t.length>0)if("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===h.prototype||(t=function(e){return h.from(e)}(t)),s)o.endEmitted?_(e,new k):x(e,o,t,!0);else if(o.ended)_(e,new v);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!i?(t=o.decoder.write(t),o.objectMode||0!==t.length?x(e,o,t,!1):E(e,o)):x(e,o,t,!1)}else s||(o.reading=!1,E(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function x(e,t,i,s){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",i)):(t.length+=t.objectMode?1:i.length,s?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&C(e)),E(e,t)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),M.prototype.destroy=m.destroy,M.prototype._undestroy=m.undestroy,M.prototype._destroy=function(e,t){t(e)},M.prototype.push=function(e,t){var i,s=this._readableState;return s.objectMode?i=!0:"string"==typeof e&&((t=t||s.defaultEncoding)!==s.encoding&&(e=h.from(e,t),t=""),i=!0),T(this,e,t,!1,i)},M.prototype.unshift=function(e){return T(this,e,null,!0,!1)},M.prototype.isPaused=function(){return!1===this._readableState.flowing},M.prototype.setEncoding=function(e){u||(u=i(32553).s);var t=new u(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var s=this._readableState.buffer.head,r="";null!==s;)r+=t.write(s.data),s=s.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var I=1073741824;function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function C(e){var t=e._readableState;a("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(a("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(N,e))}function N(e){var t=e._readableState;a("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function E(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(P,e,t))}function P(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var i=t.length;if(a("maybeReadMore read 0"),e.read(0),i===t.length)break}t.readingMore=!1}function B(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function R(e){a("readable nexttick read 0"),e.read(0)}function V(e,t){a("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(a("flow",t.flowing);t.flowing&&null!==e.read(););}function D(e,t){return 0===t.length?null:(t.objectMode?i=t.buffer.shift():!e||e>=t.length?(i=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):i=t.buffer.consume(e,t.decoder),i);var i}function q(e){var t=e._readableState;a("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(G,t,e))}function G(e,t){if(a("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var i=t._writableState;(!i||i.autoDestroy&&i.finished)&&t.destroy()}}function F(e,t){for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1}M.prototype.read=function(e){a("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return a("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?q(this):C(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&q(this),null;var s,r=t.needReadable;return a("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&a("length less than watermark",r=!0),t.ended||t.reading?a("reading or ended",r=!1):r&&(a("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(i,t))),null===(s=e>0?D(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&q(this)),null!==s&&this.emit("data",s),s},M.prototype._read=function(e){_(this,new w("_read()"))},M.prototype.pipe=function(e,t){var i=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,a("pipe count=%d opts=%j",s.pipesCount,t);var o=t&&!1===t.end||e===r.stdout||e===r.stderr?m:h;function h(){a("onend"),e.end()}s.endEmitted?r.nextTick(o):i.once("end",o),e.on("unpipe",(function t(r,n){a("onunpipe"),r===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,a("cleanup"),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("drain",c),e.removeListener("error",l),e.removeListener("unpipe",t),i.removeListener("end",h),i.removeListener("end",m),i.removeListener("data",u),d=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}));var c=function(e){return function(){var t=e._readableState;a("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&n(e,"data")&&(t.flowing=!0,L(e))}}(i);e.on("drain",c);var d=!1;function u(t){a("ondata");var r=e.write(t);a("dest.write",r),!1===r&&((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==F(s.pipes,e))&&!d&&(a("false write response, pause",s.awaitDrain),s.awaitDrain++),i.pause())}function l(t){a("onerror",t),m(),e.removeListener("error",l),0===n(e,"error")&&_(e,t)}function f(){e.removeListener("finish",p),m()}function p(){a("onfinish"),e.removeListener("close",f),m()}function m(){a("unpipe"),i.unpipe(e)}return i.on("data",u),function(e,t,i){if("function"==typeof e.prependListener)return e.prependListener(t,i);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(i):e._events.error=[i,e._events.error]:e.on(t,i)}(e,"error",l),e.once("close",f),e.once("finish",p),e.emit("pipe",i),s.flowing||(a("pipe resume"),i.resume()),e},M.prototype.unpipe=function(e){var t=this._readableState,i={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,i)),this;if(!e){var s=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<r;a++)s[a].emit("unpipe",this,{hasUnpiped:!1});return this}var n=F(t.pipes,e);return-1===n||(t.pipes.splice(n,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,i)),this},M.prototype.on=function(e,t){var i=o.prototype.on.call(this,e,t),s=this._readableState;return"data"===e?(s.readableListening=this.listenerCount("readable")>0,!1!==s.flowing&&this.resume()):"readable"===e&&(s.endEmitted||s.readableListening||(s.readableListening=s.needReadable=!0,s.flowing=!1,s.emittedReadable=!1,a("on readable",s.length,s.reading),s.length?C(this):s.reading||r.nextTick(R,this))),i},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(e,t){var i=o.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(B,this),i},M.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(B,this),t},M.prototype.resume=function(){var e=this._readableState;return e.flowing||(a("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(V,e,t))}(this,e)),e.paused=!1,this},M.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(e){var t=this,i=this._readableState,s=!1;for(var r in e.on("end",(function(){if(a("wrapped end"),i.decoder&&!i.ended){var e=i.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(r){a("wrapped data"),i.decoder&&(r=i.decoder.write(r)),i.objectMode&&null==r||(i.objectMode||r&&r.length)&&(t.push(r)||(s=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var n=0;n<S.length;n++)e.on(S[n],this.emit.bind(this,S[n]));return this._read=function(t){a("wrapped _read",t),s&&(s=!1,e.resume())},this},"function"==typeof Symbol&&(M.prototype[Symbol.asyncIterator]=function(){return void 0===l&&(l=i(45850)),l(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),M._fromList=D,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(M.from=function(e,t){return void 0===f&&(f=i(15167)),f(M,e,t)})},74605:(e,t,i)=>{"use strict";e.exports=d;var s=i(94281).q,r=s.ERR_METHOD_NOT_IMPLEMENTED,a=s.ERR_MULTIPLE_CALLBACK,n=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=s.ERR_TRANSFORM_WITH_LENGTH_0,h=i(56753);function c(e,t){var i=this._transformState;i.transforming=!1;var s=i.writecb;if(null===s)return this.emit("error",new a);i.writechunk=null,i.writecb=null,null!=t&&this.push(t),s(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function d(e){if(!(this instanceof d))return new d(e);h.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?l(this,null,null):this._flush((function(t,i){l(e,t,i)}))}function l(e,t,i){if(t)return e.emit("error",t);if(null!=i&&e.push(i),e._writableState.length)throw new o;if(e._transformState.transforming)throw new n;return e.push(null)}i(35717)(d,h),d.prototype.push=function(e,t){return this._transformState.needTransform=!1,h.prototype.push.call(this,e,t)},d.prototype._transform=function(e,t,i){i(new r("_transform()"))},d.prototype._write=function(e,t,i){var s=this._transformState;if(s.writecb=i,s.writechunk=e,s.writeencoding=t,!s.transforming){var r=this._readableState;(s.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},d.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},d.prototype._destroy=function(e,t){h.prototype._destroy.call(this,e,(function(e){t(e)}))}},64229:(e,t,i)=>{"use strict";var s,r=i(34155);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,i){var s=e.entry;for(e.entry=null;s;){var r=s.callback;t.pendingcb--,r(undefined),s=s.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=M,M.WritableState=O;var n,o={deprecate:i(94927)},h=i(22503),c=i(48764).Buffer,d=i.g.Uint8Array||function(){},u=i(61195),l=i(82457).getHighWaterMark,f=i(94281).q,p=f.ERR_INVALID_ARG_TYPE,m=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,y=f.ERR_STREAM_CANNOT_PIPE,b=f.ERR_STREAM_DESTROYED,v=f.ERR_STREAM_NULL_VALUES,w=f.ERR_STREAM_WRITE_AFTER_END,k=f.ERR_UNKNOWN_ENCODING,_=u.errorOrDestroy;function S(){}function O(e,t,n){s=s||i(56753),e=e||{},"boolean"!=typeof n&&(n=t instanceof s),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=l(this,e,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var i=e._writableState,s=i.sync,a=i.writecb;if("function"!=typeof a)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(i),t)!function(e,t,i,s,a){--t.pendingcb,i?(r.nextTick(a,s),r.nextTick(N,e,t),e._writableState.errorEmitted=!0,_(e,s)):(a(s),e._writableState.errorEmitted=!0,_(e,s),N(e,t))}(e,i,s,t,a);else{var n=A(i)||e.destroyed;n||i.corked||i.bufferProcessing||!i.bufferedRequest||I(e,i),s?r.nextTick(x,e,i,n,a):x(e,i,n,a)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function M(e){var t=this instanceof(s=s||i(56753));if(!t&&!n.call(M,this))return new M(e);this._writableState=new O(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),h.call(this)}function T(e,t,i,s,r,a,n){t.writelen=s,t.writecb=n,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):i?e._writev(r,t.onwrite):e._write(r,a,t.onwrite),t.sync=!1}function x(e,t,i,s){i||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,s(),N(e,t)}function I(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var s=t.bufferedRequestCount,r=new Array(s),n=t.corkedRequestsFree;n.entry=i;for(var o=0,h=!0;i;)r[o]=i,i.isBuf||(h=!1),i=i.next,o+=1;r.allBuffers=h,T(e,t,!0,t.length,r,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;i;){var c=i.chunk,d=i.encoding,u=i.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,d,u),i=i.next,t.bufferedRequestCount--,t.writing)break}null===i&&(t.lastBufferedRequest=null)}t.bufferedRequest=i,t.bufferProcessing=!1}function A(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final((function(i){t.pendingcb--,i&&_(e,i),t.prefinished=!0,e.emit("prefinish"),N(e,t)}))}function N(e,t){var i=A(t);if(i&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(C,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var s=e._readableState;(!s||s.autoDestroy&&s.endEmitted)&&e.destroy()}return i}i(35717)(M,h),O.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(O.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(n=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(e){return!!n.call(this,e)||this===M&&e&&e._writableState instanceof O}})):n=function(e){return e instanceof this},M.prototype.pipe=function(){_(this,new y)},M.prototype.write=function(e,t,i){var s,a=this._writableState,n=!1,o=!a.objectMode&&(s=e,c.isBuffer(s)||s instanceof d);return o&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(i=t,t=null),o?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof i&&(i=S),a.ending?function(e,t){var i=new w;_(e,i),r.nextTick(t,i)}(this,i):(o||function(e,t,i,s){var a;return null===i?a=new v:"string"==typeof i||t.objectMode||(a=new p("chunk",["string","Buffer"],i)),!a||(_(e,a),r.nextTick(s,a),!1)}(this,a,e,i))&&(a.pendingcb++,n=function(e,t,i,s,r,a){if(!i){var n=function(e,t,i){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,i)),t}(t,s,r);s!==n&&(i=!0,r="buffer",s=n)}var o=t.objectMode?1:s.length;t.length+=o;var h=t.length<t.highWaterMark;if(h||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:s,encoding:r,isBuf:i,callback:a,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,o,s,r,a);return h}(this,a,o,e,t,i)),n},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},M.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new k(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function(e,t,i){i(new m("_write()"))},M.prototype._writev=null,M.prototype.end=function(e,t,i){var s=this._writableState;return"function"==typeof e?(i=e,e=null,t=null):"function"==typeof t&&(i=t,t=null),null!=e&&this.write(e,t),s.corked&&(s.corked=1,this.uncork()),s.ending||function(e,t,i){t.ending=!0,N(e,t),i&&(t.finished?r.nextTick(i):e.once("finish",i)),t.ended=!0,e.writable=!1}(this,s,i),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),M.prototype.destroy=u.destroy,M.prototype._undestroy=u.undestroy,M.prototype._destroy=function(e,t){t(e)}},45850:(e,t,i)=>{"use strict";var s,r=i(34155);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var n=i(8610),o=Symbol("lastResolve"),h=Symbol("lastReject"),c=Symbol("error"),d=Symbol("ended"),u=Symbol("lastPromise"),l=Symbol("handlePromise"),f=Symbol("stream");function p(e,t){return{value:e,done:t}}function m(e){var t=e[o];if(null!==t){var i=e[f].read();null!==i&&(e[u]=null,e[o]=null,e[h]=null,t(p(i,!1)))}}function g(e){r.nextTick(m,e)}var y=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((a(s={get stream(){return this[f]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[d])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise((function(t,i){r.nextTick((function(){e[c]?i(e[c]):t(p(void 0,!0))}))}));var i,s=this[u];if(s)i=new Promise(function(e,t){return function(i,s){e.then((function(){t[d]?i(p(void 0,!0)):t[l](i,s)}),s)}}(s,this));else{var a=this[f].read();if(null!==a)return Promise.resolve(p(a,!1));i=new Promise(this[l])}return this[u]=i,i}},Symbol.asyncIterator,(function(){return this})),a(s,"return",(function(){var e=this;return new Promise((function(t,i){e[f].destroy(null,(function(e){e?i(e):t(p(void 0,!0))}))}))})),s),y);e.exports=function(e){var t,i=Object.create(b,(a(t={},f,{value:e,writable:!0}),a(t,o,{value:null,writable:!0}),a(t,h,{value:null,writable:!0}),a(t,c,{value:null,writable:!0}),a(t,d,{value:e._readableState.endEmitted,writable:!0}),a(t,l,{value:function(e,t){var s=i[f].read();s?(i[u]=null,i[o]=null,i[h]=null,e(p(s,!1))):(i[o]=e,i[h]=t)},writable:!0}),t));return i[u]=null,n(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=i[h];return null!==t&&(i[u]=null,i[o]=null,i[h]=null,t(e)),void(i[c]=e)}var s=i[o];null!==s&&(i[u]=null,i[o]=null,i[h]=null,s(p(void 0,!0))),i[d]=!0})),e.on("readable",g.bind(null,i)),i}},57327:(e,t,i)=>{"use strict";function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var n=i(48764).Buffer,o=i(52361).inspect,h=o&&o.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,i;return t=e,(i=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i}},{key:"concat",value:function(e){if(0===this.length)return n.alloc(0);for(var t,i,s,r=n.allocUnsafe(e>>>0),a=this.head,o=0;a;)t=a.data,i=r,s=o,n.prototype.copy.call(t,i,s),o+=a.data.length,a=a.next;return r}},{key:"consume",value:function(e,t){var i;return e<this.head.data.length?(i=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):i=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,i=1,s=t.data;for(e-=s.length;t=t.next;){var r=t.data,a=e>r.length?r.length:e;if(a===r.length?s+=r:s+=r.slice(0,e),0==(e-=a)){a===r.length?(++i,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=r.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(e){var t=n.allocUnsafe(e),i=this.head,s=1;for(i.data.copy(t),e-=i.data.length;i=i.next;){var r=i.data,a=e>r.length?r.length:e;if(r.copy(t,t.length-e,0,a),0==(e-=a)){a===r.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=r.slice(a));break}++s}return this.length-=s,t}},{key:h,value:function(e,t){return o(this,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&a(t.prototype,i),e}()},61195:(e,t,i)=>{"use strict";var s=i(34155);function r(e,t){n(e,t),a(e)}function a(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var i=this,o=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return o||h?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,s.nextTick(n,this,e)):s.nextTick(n,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?i._writableState?i._writableState.errorEmitted?s.nextTick(a,i):(i._writableState.errorEmitted=!0,s.nextTick(r,i,e)):s.nextTick(r,i,e):t?(s.nextTick(a,i),t(e)):s.nextTick(a,i)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var i=e._readableState,s=e._writableState;i&&i.autoDestroy||s&&s.autoDestroy?e.destroy(t):e.emit("error",t)}}},8610:(e,t,i)=>{"use strict";var s=i(94281).q.ERR_STREAM_PREMATURE_CLOSE;function r(){}e.exports=function e(t,i,a){if("function"==typeof i)return e(t,null,i);i||(i={}),a=function(e){var t=!1;return function(){if(!t){t=!0;for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];e.apply(this,s)}}}(a||r);var n=i.readable||!1!==i.readable&&t.readable,o=i.writable||!1!==i.writable&&t.writable,h=function(){t.writable||d()},c=t._writableState&&t._writableState.finished,d=function(){o=!1,c=!0,n||a.call(t)},u=t._readableState&&t._readableState.endEmitted,l=function(){n=!1,u=!0,o||a.call(t)},f=function(e){a.call(t,e)},p=function(){var e;return n&&!u?(t._readableState&&t._readableState.ended||(e=new s),a.call(t,e)):o&&!c?(t._writableState&&t._writableState.ended||(e=new s),a.call(t,e)):void 0},m=function(){t.req.on("finish",d)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",d),t.on("abort",p),t.req?m():t.on("request",m)):o&&!t._writableState&&(t.on("end",h),t.on("close",h)),t.on("end",l),t.on("finish",d),!1!==i.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",d),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",d),t.removeListener("end",h),t.removeListener("close",h),t.removeListener("finish",d),t.removeListener("end",l),t.removeListener("error",f),t.removeListener("close",p)}}},15167:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},59946:(e,t,i)=>{"use strict";var s,r=i(94281).q,a=r.ERR_MISSING_ARGS,n=r.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function h(e,t,r,a){a=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(a);var o=!1;e.on("close",(function(){o=!0})),void 0===s&&(s=i(8610)),s(e,{readable:t,writable:r},(function(e){if(e)return a(e);o=!0,a()}));var h=!1;return function(t){if(!o&&!h)return h=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void a(t||new n("pipe"))}}function c(e){e()}function d(e,t){return e.pipe(t)}function u(e){return e.length?"function"!=typeof e[e.length-1]?o:e.pop():o}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var s,r=u(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new a("streams");var n=t.map((function(e,i){var a=i<t.length-1;return h(e,a,i>0,(function(e){s||(s=e),e&&n.forEach(c),a||(n.forEach(c),r(s))}))}));return t.reduce(d)}},82457:(e,t,i)=>{"use strict";var s=i(94281).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,i,r){var a=function(e,t,i){return null!=e.highWaterMark?e.highWaterMark:t?e[i]:null}(t,r,i);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new s(r?i:"highWaterMark",a);return Math.floor(a)}return e.objectMode?16:16384}}},22503:(e,t,i)=>{e.exports=i(17187).EventEmitter},88473:(e,t,i)=>{(t=e.exports=i(79481)).Stream=t,t.Readable=t,t.Writable=i(64229),t.Duplex=i(56753),t.Transform=i(74605),t.PassThrough=i(82725),t.finished=i(8610),t.pipeline=i(59946)},35666:e=>{var t=function(e){"use strict";var t,i=Object.prototype,s=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",n=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function h(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,i){return e[t]=i}}function c(e,t,i,s){var r=t&&t.prototype instanceof g?t:g,a=Object.create(r.prototype),n=new I(s||[]);return a._invoke=function(e,t,i){var s=u;return function(r,a){if(s===f)throw new Error("Generator is already running");if(s===p){if("throw"===r)throw a;return C()}for(i.method=r,i.arg=a;;){var n=i.delegate;if(n){var o=M(n,i);if(o){if(o===m)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(s===u)throw s=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);s=f;var h=d(e,t,i);if("normal"===h.type){if(s=i.done?p:l,h.arg===m)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(s=p,i.method="throw",i.arg=h.arg)}}}(e,i,n),a}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u="suspendedStart",l="suspendedYield",f="executing",p="completed",m={};function g(){}function y(){}function b(){}var v={};v[a]=function(){return this};var w=Object.getPrototypeOf,k=w&&w(w(A([])));k&&k!==i&&s.call(k,a)&&(v=k);var _=b.prototype=g.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function i(r,a,n,o){var h=d(e[r],e,a);if("throw"!==h.type){var c=h.arg,u=c.value;return u&&"object"==typeof u&&s.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,n,o)}),(function(e){i("throw",e,n,o)})):t.resolve(u).then((function(e){c.value=e,n(c)}),(function(e){return i("throw",e,n,o)}))}o(h.arg)}var r;this._invoke=function(e,s){function a(){return new t((function(t,r){i(e,s,t,r)}))}return r=r?r.then(a,a):a()}}function M(e,i){var s=e.iterator[i.method];if(s===t){if(i.delegate=null,"throw"===i.method){if(e.iterator.return&&(i.method="return",i.arg=t,M(e,i),"throw"===i.method))return m;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=d(s,e.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,m;var a=r.arg;return a?a.done?(i[e.resultName]=a.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,m):a:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var i=e[a];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function i(){for(;++r<e.length;)if(s.call(e,r))return i.value=e[r],i.done=!1,i;return i.value=t,i.done=!0,i};return n.next=n}}return{next:C}}function C(){return{value:t,done:!0}}return y.prototype=_.constructor=b,b.constructor=y,y.displayName=h(b,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,h(e,o,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},S(O.prototype),O.prototype[n]=function(){return this},e.AsyncIterator=O,e.async=function(t,i,s,r,a){void 0===a&&(a=Promise);var n=new O(c(t,i,s,r),a);return e.isGeneratorFunction(i)?n:n.next().then((function(e){return e.done?e.value:n.next()}))},S(_),h(_,o,"Generator"),_[a]=function(){return this},_.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var s=t.pop();if(s in e)return i.value=s,i.done=!1,i}return i.done=!0,i}},e.values=A,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var i in this)"t"===i.charAt(0)&&s.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function r(s,r){return o.type="throw",o.arg=e,i.next=s,r&&(i.method="next",i.arg=t),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a],o=n.completion;if("root"===n.tryLoc)return r("end");if(n.tryLoc<=this.prev){var h=s.call(n,"catchLoc"),c=s.call(n,"finallyLoc");if(h&&c){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(h){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return r(n.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var n=a?a.completion:{};return n.type=e,n.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),x(i),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var s=i.completion;if("throw"===s.type){var r=s.arg;x(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,s){return this.delegate={iterator:A(e),resultName:i,nextLoc:s},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},79785:(e,t,i)=>{"use strict";var s=i(48764).Buffer,r=i(35717),a=i(3349),n=new Array(16),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],h=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],u=[0,1518500249,1859775393,2400959708,2840853838],l=[1352829926,1548603684,1836072691,2053994217,0];function f(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(e,t){return e<<t|e>>>32-t}function m(e,t,i,s,r,a,n,o){return p(e+(t^i^s)+a+n|0,o)+r|0}function g(e,t,i,s,r,a,n,o){return p(e+(t&i|~t&s)+a+n|0,o)+r|0}function y(e,t,i,s,r,a,n,o){return p(e+((t|~i)^s)+a+n|0,o)+r|0}function b(e,t,i,s,r,a,n,o){return p(e+(t&s|i&~s)+a+n|0,o)+r|0}function v(e,t,i,s,r,a,n,o){return p(e+(t^(i|~s))+a+n|0,o)+r|0}r(f,a),f.prototype._update=function(){for(var e=n,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var i=0|this._a,s=0|this._b,r=0|this._c,a=0|this._d,f=0|this._e,w=0|this._a,k=0|this._b,_=0|this._c,S=0|this._d,O=0|this._e,M=0;M<80;M+=1){var T,x;M<16?(T=m(i,s,r,a,f,e[o[M]],u[0],c[M]),x=v(w,k,_,S,O,e[h[M]],l[0],d[M])):M<32?(T=g(i,s,r,a,f,e[o[M]],u[1],c[M]),x=b(w,k,_,S,O,e[h[M]],l[1],d[M])):M<48?(T=y(i,s,r,a,f,e[o[M]],u[2],c[M]),x=y(w,k,_,S,O,e[h[M]],l[2],d[M])):M<64?(T=b(i,s,r,a,f,e[o[M]],u[3],c[M]),x=g(w,k,_,S,O,e[h[M]],l[3],d[M])):(T=v(i,s,r,a,f,e[o[M]],u[4],c[M]),x=m(w,k,_,S,O,e[h[M]],l[4],d[M])),i=f,f=a,a=p(r,10),r=s,s=T,w=O,O=S,S=p(_,10),_=k,k=x}var I=this._b+r+S|0;this._b=this._c+a+O|0,this._c=this._d+f+w|0,this._d=this._e+i+k|0,this._e=this._a+s+_|0,this._a=I},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=s.alloc?s.alloc(20):new s(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=f},89509:(e,t,i)=>{var s=i(48764),r=s.Buffer;function a(e,t){for(var i in e)t[i]=e[i]}function n(e,t,i){return r(e,t,i)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=s:(a(s,t),t.Buffer=n),n.prototype=Object.create(r.prototype),a(r,n),n.from=function(e,t,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,i)},n.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var s=r(e);return void 0!==t?"string"==typeof i?s.fill(t,i):s.fill(t):s.fill(0),s},n.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},n.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s.SlowBuffer(e)}},2399:(e,t,i)=>{"use strict";var s,r=i(34155),a=i(48764),n=a.Buffer,o={};for(s in a)a.hasOwnProperty(s)&&"SlowBuffer"!==s&&"Buffer"!==s&&(o[s]=a[s]);var h=o.Buffer={};for(s in n)n.hasOwnProperty(s)&&"allocUnsafe"!==s&&"allocUnsafeSlow"!==s&&(h[s]=n[s]);if(o.Buffer.prototype=n.prototype,h.from&&h.from!==Uint8Array.from||(h.from=function(e,t,i){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return n(e,t,i)}),h.alloc||(h.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var s=n(e);return t&&0!==t.length?"string"==typeof i?s.fill(t,i):s.fill(t):s.fill(0),s}),!o.kStringMaxLength)try{o.kStringMaxLength=r.binding("buffer").kStringMaxLength}catch(e){}o.constants||(o.constants={MAX_LENGTH:o.kMaxLength},o.kStringMaxLength&&(o.constants.MAX_STRING_LENGTH=o.kStringMaxLength)),e.exports=o},24189:(e,t,i)=>{var s=i(89509).Buffer;function r(e,t){this._block=s.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}r.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=s.from(e,t));for(var i=this._block,r=this._blockSize,a=e.length,n=this._len,o=0;o<a;){for(var h=n%r,c=Math.min(a-o,r-h),d=0;d<c;d++)i[h+d]=e[o+d];o+=c,(n+=c)%r==0&&this._update(i)}return this._len+=a,this},r.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var i=8*this._len;if(i<=4294967295)this._block.writeUInt32BE(i,this._blockSize-4);else{var s=(4294967295&i)>>>0,r=(i-s)/4294967296;this._block.writeUInt32BE(r,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var a=this._hash();return e?a.toString(e):a},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=r},89072:(e,t,i)=>{var s=e.exports=function(e){e=e.toLowerCase();var t=s[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};s.sha=i(74448),s.sha1=i(18336),s.sha224=i(48432),s.sha256=i(67499),s.sha384=i(51686),s.sha512=i(87816)},74448:(e,t,i)=>{var s=i(35717),r=i(24189),a=i(89509).Buffer,n=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function h(){this.init(),this._w=o,r.call(this,64,56)}function c(e){return e<<30|e>>>2}function d(e,t,i,s){return 0===e?t&i|~t&s:2===e?t&i|t&s|i&s:t^i^s}s(h,r),h.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},h.prototype._update=function(e){for(var t,i=this._w,s=0|this._a,r=0|this._b,a=0|this._c,o=0|this._d,h=0|this._e,u=0;u<16;++u)i[u]=e.readInt32BE(4*u);for(;u<80;++u)i[u]=i[u-3]^i[u-8]^i[u-14]^i[u-16];for(var l=0;l<80;++l){var f=~~(l/20),p=0|((t=s)<<5|t>>>27)+d(f,r,a,o)+h+i[l]+n[f];h=o,o=a,a=c(r),r=s,s=p}this._a=s+this._a|0,this._b=r+this._b|0,this._c=a+this._c|0,this._d=o+this._d|0,this._e=h+this._e|0},h.prototype._hash=function(){var e=a.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=h},18336:(e,t,i)=>{var s=i(35717),r=i(24189),a=i(89509).Buffer,n=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function h(){this.init(),this._w=o,r.call(this,64,56)}function c(e){return e<<5|e>>>27}function d(e){return e<<30|e>>>2}function u(e,t,i,s){return 0===e?t&i|~t&s:2===e?t&i|t&s|i&s:t^i^s}s(h,r),h.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},h.prototype._update=function(e){for(var t,i=this._w,s=0|this._a,r=0|this._b,a=0|this._c,o=0|this._d,h=0|this._e,l=0;l<16;++l)i[l]=e.readInt32BE(4*l);for(;l<80;++l)i[l]=(t=i[l-3]^i[l-8]^i[l-14]^i[l-16])<<1|t>>>31;for(var f=0;f<80;++f){var p=~~(f/20),m=c(s)+u(p,r,a,o)+h+i[f]+n[p]|0;h=o,o=a,a=d(r),r=s,s=m}this._a=s+this._a|0,this._b=r+this._b|0,this._c=a+this._c|0,this._d=o+this._d|0,this._e=h+this._e|0},h.prototype._hash=function(){var e=a.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=h},48432:(e,t,i)=>{var s=i(35717),r=i(67499),a=i(24189),n=i(89509).Buffer,o=new Array(64);function h(){this.init(),this._w=o,a.call(this,64,56)}s(h,r),h.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},h.prototype._hash=function(){var e=n.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=h},67499:(e,t,i)=>{var s=i(35717),r=i(24189),a=i(89509).Buffer,n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=new Array(64);function h(){this.init(),this._w=o,r.call(this,64,56)}function c(e,t,i){return i^e&(t^i)}function d(e,t,i){return e&t|i&(e|t)}function u(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function l(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function f(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}s(h,r),h.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},h.prototype._update=function(e){for(var t,i=this._w,s=0|this._a,r=0|this._b,a=0|this._c,o=0|this._d,h=0|this._e,p=0|this._f,m=0|this._g,g=0|this._h,y=0;y<16;++y)i[y]=e.readInt32BE(4*y);for(;y<64;++y)i[y]=0|(((t=i[y-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+i[y-7]+f(i[y-15])+i[y-16];for(var b=0;b<64;++b){var v=g+l(h)+c(h,p,m)+n[b]+i[b]|0,w=u(s)+d(s,r,a)|0;g=m,m=p,p=h,h=o+v|0,o=a,a=r,r=s,s=v+w|0}this._a=s+this._a|0,this._b=r+this._b|0,this._c=a+this._c|0,this._d=o+this._d|0,this._e=h+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},h.prototype._hash=function(){var e=a.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=h},51686:(e,t,i)=>{var s=i(35717),r=i(87816),a=i(24189),n=i(89509).Buffer,o=new Array(160);function h(){this.init(),this._w=o,a.call(this,128,112)}s(h,r),h.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},h.prototype._hash=function(){var e=n.allocUnsafe(48);function t(t,i,s){e.writeInt32BE(t,s),e.writeInt32BE(i,s+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=h},87816:(e,t,i)=>{var s=i(35717),r=i(24189),a=i(89509).Buffer,n=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=new Array(160);function h(){this.init(),this._w=o,r.call(this,128,112)}function c(e,t,i){return i^e&(t^i)}function d(e,t,i){return e&t|i&(e|t)}function u(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function l(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function f(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function y(e,t){return e>>>0<t>>>0?1:0}s(h,r),h.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},h.prototype._update=function(e){for(var t=this._w,i=0|this._ah,s=0|this._bh,r=0|this._ch,a=0|this._dh,o=0|this._eh,h=0|this._fh,b=0|this._gh,v=0|this._hh,w=0|this._al,k=0|this._bl,_=0|this._cl,S=0|this._dl,O=0|this._el,M=0|this._fl,T=0|this._gl,x=0|this._hl,I=0;I<32;I+=2)t[I]=e.readInt32BE(4*I),t[I+1]=e.readInt32BE(4*I+4);for(;I<160;I+=2){var A=t[I-30],C=t[I-30+1],N=f(A,C),E=p(C,A),P=m(A=t[I-4],C=t[I-4+1]),B=g(C,A),R=t[I-14],V=t[I-14+1],L=t[I-32],D=t[I-32+1],q=E+V|0,G=N+R+y(q,E)|0;G=(G=G+P+y(q=q+B|0,B)|0)+L+y(q=q+D|0,D)|0,t[I]=G,t[I+1]=q}for(var F=0;F<160;F+=2){G=t[F],q=t[F+1];var j=d(i,s,r),U=d(w,k,_),H=u(i,w),z=u(w,i),K=l(o,O),W=l(O,o),X=n[F],Z=n[F+1],Y=c(o,h,b),Q=c(O,M,T),J=x+W|0,$=v+K+y(J,x)|0;$=($=($=$+Y+y(J=J+Q|0,Q)|0)+X+y(J=J+Z|0,Z)|0)+G+y(J=J+q|0,q)|0;var ee=z+U|0,te=H+j+y(ee,z)|0;v=b,x=T,b=h,T=M,h=o,M=O,o=a+$+y(O=S+J|0,S)|0,a=r,S=_,r=s,_=k,s=i,k=w,i=$+te+y(w=J+ee|0,J)|0}this._al=this._al+w|0,this._bl=this._bl+k|0,this._cl=this._cl+_|0,this._dl=this._dl+S|0,this._el=this._el+O|0,this._fl=this._fl+M|0,this._gl=this._gl+T|0,this._hl=this._hl+x|0,this._ah=this._ah+i+y(this._al,w)|0,this._bh=this._bh+s+y(this._bl,k)|0,this._ch=this._ch+r+y(this._cl,_)|0,this._dh=this._dh+a+y(this._dl,S)|0,this._eh=this._eh+o+y(this._el,O)|0,this._fh=this._fh+h+y(this._fl,M)|0,this._gh=this._gh+b+y(this._gl,T)|0,this._hh=this._hh+v+y(this._hl,x)|0},h.prototype._hash=function(){var e=a.allocUnsafe(64);function t(t,i,s){e.writeInt32BE(t,s),e.writeInt32BE(i,s+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=h},42830:(e,t,i)=>{e.exports=r;var s=i(17187).EventEmitter;function r(){s.call(this)}i(35717)(r,s),r.Readable=i(79481),r.Writable=i(64229),r.Duplex=i(56753),r.Transform=i(74605),r.PassThrough=i(82725),r.finished=i(8610),r.pipeline=i(59946),r.Stream=r,r.prototype.pipe=function(e,t){var i=this;function r(t){e.writable&&!1===e.write(t)&&i.pause&&i.pause()}function a(){i.readable&&i.resume&&i.resume()}i.on("data",r),e.on("drain",a),e._isStdio||t&&!1===t.end||(i.on("end",o),i.on("close",h));var n=!1;function o(){n||(n=!0,e.end())}function h(){n||(n=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(d(),0===s.listenerCount(this,"error"))throw e}function d(){i.removeListener("data",r),e.removeListener("drain",a),i.removeListener("end",o),i.removeListener("close",h),i.removeListener("error",c),e.removeListener("error",c),i.removeListener("end",d),i.removeListener("close",d),e.removeListener("close",d)}return i.on("error",c),e.on("error",c),i.on("end",d),i.on("close",d),e.on("close",d),e.emit("pipe",i),e}},8501:(e,t,i)=>{var s=i(11989),r=i(55676),a=i(47529),n=i(50584),o=i(8575),h=t;h.request=function(e,t){e="string"==typeof e?o.parse(e):a(e);var r=-1===i.g.location.protocol.search(/^https?:$/)?"http:":"",n=e.protocol||r,h=e.hostname||e.host,c=e.port,d=e.path||"/";h&&-1!==h.indexOf(":")&&(h="["+h+"]"),e.url=(h?n+"//"+h:"")+(c?":"+c:"")+d,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var u=new s(e);return t&&u.on("response",t),u},h.get=function(e,t){var i=h.request(e,t);return i.end(),i},h.ClientRequest=s,h.IncomingMessage=r.IncomingMessage,h.Agent=function(){},h.Agent.defaultMaxSockets=4,h.globalAgent=new h.Agent,h.STATUS_CODES=n,h.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]},8725:(e,t,i)=>{var s;function r(){if(void 0!==s)return s;if(i.g.XMLHttpRequest){s=new i.g.XMLHttpRequest;try{s.open("GET",i.g.XDomainRequest?"/":"https://example.com")}catch(e){s=null}}else s=null;return s}function a(e){var t=r();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}function n(e){return"function"==typeof e}t.fetch=n(i.g.fetch)&&n(i.g.ReadableStream),t.writableStream=n(i.g.WritableStream),t.abortController=n(i.g.AbortController),t.arraybuffer=t.fetch||a("arraybuffer"),t.msstream=!t.fetch&&a("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&a("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!r()&&n(r().overrideMimeType),s=null},11989:(e,t,i)=>{var s=i(48764).Buffer,r=i(34155),a=i(8725),n=i(35717),o=i(55676),h=i(88473),c=o.IncomingMessage,d=o.readyStates,u=e.exports=function(e){var t,i=this;h.Writable.call(i),i._opts=e,i._body=[],i._headers={},e.auth&&i.setHeader("Authorization","Basic "+s.from(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){i.setHeader(t,e.headers[t])}));var r=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!a.abortController)r=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!a.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}i._mode=function(e,t){return a.fetch&&t?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&e?"arraybuffer":"text"}(t,r),i._fetchTimer=null,i._socketTimeout=null,i._socketTimer=null,i.on("finish",(function(){i._onFinish()}))};n(u,h.Writable),u.prototype.setHeader=function(e,t){var i=e.toLowerCase();-1===l.indexOf(i)&&(this._headers[i]={name:e,value:t})},u.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},u.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},u.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts;"timeout"in t&&0!==t.timeout&&e.setTimeout(t.timeout);var s=e._headers,n=null;"GET"!==t.method&&"HEAD"!==t.method&&(n=new Blob(e._body,{type:(s["content-type"]||{}).value||""}));var o=[];if(Object.keys(s).forEach((function(e){var t=s[e].name,i=s[e].value;Array.isArray(i)?i.forEach((function(e){o.push([t,e])})):o.push([t,i])})),"fetch"===e._mode){var h=null;if(a.abortController){var c=new AbortController;h=c.signal,e._fetchAbortController=c,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=i.g.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),t.requestTimeout))}i.g.fetch(e._opts.url,{method:e._opts.method,headers:o,body:n||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:h}).then((function(t){e._fetchResponse=t,e._resetTimers(!1),e._connect()}),(function(t){e._resetTimers(!0),e._destroyed||e.emit("error",t)}))}else{var u=e._xhr=new i.g.XMLHttpRequest;try{u.open(e._opts.method,e._opts.url,!0)}catch(t){return void r.nextTick((function(){e.emit("error",t)}))}"responseType"in u&&(u.responseType=e._mode),"withCredentials"in u&&(u.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in u&&u.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(u.timeout=t.requestTimeout,u.ontimeout=function(){e.emit("requestTimeout")}),o.forEach((function(e){u.setRequestHeader(e[0],e[1])})),e._response=null,u.onreadystatechange=function(){switch(u.readyState){case d.LOADING:case d.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(u.onprogress=function(){e._onXHRProgress()}),u.onerror=function(){e._destroyed||(e._resetTimers(!0),e.emit("error",new Error("XHR error")))};try{u.send(n)}catch(t){return void r.nextTick((function(){e.emit("error",t)}))}}}},u.prototype._onXHRProgress=function(){var e=this;e._resetTimers(!1),function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress(e._resetTimers.bind(e)))},u.prototype._connect=function(){var e=this;e._destroyed||(e._response=new c(e._xhr,e._fetchResponse,e._mode,e._resetTimers.bind(e)),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},u.prototype._write=function(e,t,i){this._body.push(e),i()},u.prototype._resetTimers=function(e){var t=this;i.g.clearTimeout(t._socketTimer),t._socketTimer=null,e?(i.g.clearTimeout(t._fetchTimer),t._fetchTimer=null):t._socketTimeout&&(t._socketTimer=i.g.setTimeout((function(){t.emit("timeout")}),t._socketTimeout))},u.prototype.abort=u.prototype.destroy=function(e){var t=this;t._destroyed=!0,t._resetTimers(!0),t._response&&(t._response._destroyed=!0),t._xhr?t._xhr.abort():t._fetchAbortController&&t._fetchAbortController.abort(),e&&t.emit("error",e)},u.prototype.end=function(e,t,i){"function"==typeof e&&(i=e,e=void 0),h.Writable.prototype.end.call(this,e,t,i)},u.prototype.setTimeout=function(e,t){var i=this;t&&i.once("timeout",t),i._socketTimeout=e,i._resetTimers(!1)},u.prototype.flushHeaders=function(){},u.prototype.setNoDelay=function(){},u.prototype.setSocketKeepAlive=function(){};var l=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]},55676:(e,t,i)=>{var s=i(34155),r=i(48764).Buffer,a=i(8725),n=i(35717),o=i(88473),h=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=t.IncomingMessage=function(e,t,i,n){var h=this;if(o.Readable.call(h),h._mode=i,h.headers={},h.rawHeaders=[],h.trailers={},h.rawTrailers=[],h.on("end",(function(){s.nextTick((function(){h.emit("close")}))})),"fetch"===i){if(h._fetchResponse=t,h.url=t.url,h.statusCode=t.status,h.statusMessage=t.statusText,t.headers.forEach((function(e,t){h.headers[t.toLowerCase()]=e,h.rawHeaders.push(t,e)})),a.writableStream){var c=new WritableStream({write:function(e){return n(!1),new Promise((function(t,i){h._destroyed?i():h.push(r.from(e))?t():h._resumeFetch=t}))},close:function(){n(!0),h._destroyed||h.push(null)},abort:function(e){n(!0),h._destroyed||h.emit("error",e)}});try{return void t.body.pipeTo(c).catch((function(e){n(!0),h._destroyed||h.emit("error",e)}))}catch(e){}}var d=t.body.getReader();!function e(){d.read().then((function(t){h._destroyed||(n(t.done),t.done?h.push(null):(h.push(r.from(t.value)),e()))})).catch((function(e){n(!0),h._destroyed||h.emit("error",e)}))}()}else if(h._xhr=e,h._pos=0,h.url=e.responseURL,h.statusCode=e.status,h.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var i=t[1].toLowerCase();"set-cookie"===i?(void 0===h.headers[i]&&(h.headers[i]=[]),h.headers[i].push(t[2])):void 0!==h.headers[i]?h.headers[i]+=", "+t[2]:h.headers[i]=t[2],h.rawHeaders.push(t[1],t[2])}})),h._charset="x-user-defined",!a.overrideMimeType){var u=h.rawHeaders["mime-type"];if(u){var l=u.match(/;\s*charset=([^;])(;|$)/);l&&(h._charset=l[1].toLowerCase())}h._charset||(h._charset="utf-8")}};n(c,o.Readable),c.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},c.prototype._onXHRProgress=function(e){var t=this,s=t._xhr,a=null;switch(t._mode){case"text":if((a=s.responseText).length>t._pos){var n=a.substr(t._pos);if("x-user-defined"===t._charset){for(var o=r.alloc(n.length),c=0;c<n.length;c++)o[c]=255&n.charCodeAt(c);t.push(o)}else t.push(n,t._charset);t._pos=a.length}break;case"arraybuffer":if(s.readyState!==h.DONE||!s.response)break;a=s.response,t.push(r.from(new Uint8Array(a)));break;case"moz-chunked-arraybuffer":if(a=s.response,s.readyState!==h.LOADING||!a)break;t.push(r.from(new Uint8Array(a)));break;case"ms-stream":if(a=s.response,s.readyState!==h.LOADING)break;var d=new i.g.MSStreamReader;d.onprogress=function(){d.result.byteLength>t._pos&&(t.push(r.from(new Uint8Array(d.result.slice(t._pos)))),t._pos=d.result.byteLength)},d.onload=function(){e(!0),t.push(null)},d.readAsArrayBuffer(a)}t._xhr.readyState===h.DONE&&"ms-stream"!==t._mode&&(e(!0),t.push(null))}},32553:(e,t,i)=>{"use strict";var s=i(89509).Buffer,r=s.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(s.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=h,this.end=c,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=d,this.end=u,t=3;break;default:return this.write=l,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(t)}function n(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,i=function(e,t,i){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==i?i:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function h(e,t){if((e.length-t)%2==0){var i=e.toString("utf16le",t);if(i){var s=i.charCodeAt(i.length-1);if(s>=55296&&s<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,i)}return t}function d(e,t){var i=(e.length-t)%3;return 0===i?e.toString("base64",t):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-i))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function l(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.s=a,a.prototype.write=function(e){if(0===e.length)return"";var t,i;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<e.length?t?t+this.text(e,i):this.text(e,i):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},a.prototype.text=function(e,t){var i=function(e,t,i){var s=t.length-1;if(s<i)return 0;var r=n(t[s]);return r>=0?(r>0&&(e.lastNeed=r-1),r):--s<i||-2===r?0:(r=n(t[s]))>=0?(r>0&&(e.lastNeed=r-2),r):--s<i||-2===r?0:(r=n(t[s]))>=0?(r>0&&(2===r?r=0:e.lastNeed=r-3),r):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=i;var s=e.length-(i-this.lastNeed);return e.copy(this.lastChar,0,s),e.toString("utf8",t,s)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},50780:(e,t,i)=>{!function(e){"use strict";var t=function(e){var t,i=new Float64Array(16);if(e)for(t=0;t<e.length;t++)i[t]=e[t];return i},s=function(){throw new Error("no PRNG")},r=new Uint8Array(16),a=new Uint8Array(32);a[0]=9;var n=t(),o=t([1]),h=t([56129,1]),c=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),f=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(e,t,i,s){e[t]=i>>24&255,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i,e[t+4]=s>>24&255,e[t+5]=s>>16&255,e[t+6]=s>>8&255,e[t+7]=255&s}function m(e,t,i,s,r){var a,n=0;for(a=0;a<r;a++)n|=e[t+a]^i[s+a];return(1&n-1>>>8)-1}function g(e,t,i,s){return m(e,t,i,s,16)}function y(e,t,i,s){return m(e,t,i,s,32)}function b(e,t,i,s){!function(e,t,i,s){for(var r,a=255&s[0]|(255&s[1])<<8|(255&s[2])<<16|(255&s[3])<<24,n=255&i[0]|(255&i[1])<<8|(255&i[2])<<16|(255&i[3])<<24,o=255&i[4]|(255&i[5])<<8|(255&i[6])<<16|(255&i[7])<<24,h=255&i[8]|(255&i[9])<<8|(255&i[10])<<16|(255&i[11])<<24,c=255&i[12]|(255&i[13])<<8|(255&i[14])<<16|(255&i[15])<<24,d=255&s[4]|(255&s[5])<<8|(255&s[6])<<16|(255&s[7])<<24,u=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,l=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&s[8]|(255&s[9])<<8|(255&s[10])<<16|(255&s[11])<<24,g=255&i[16]|(255&i[17])<<8|(255&i[18])<<16|(255&i[19])<<24,y=255&i[20]|(255&i[21])<<8|(255&i[22])<<16|(255&i[23])<<24,b=255&i[24]|(255&i[25])<<8|(255&i[26])<<16|(255&i[27])<<24,v=255&i[28]|(255&i[29])<<8|(255&i[30])<<16|(255&i[31])<<24,w=255&s[12]|(255&s[13])<<8|(255&s[14])<<16|(255&s[15])<<24,k=a,_=n,S=o,O=h,M=c,T=d,x=u,I=l,A=f,C=p,N=m,E=g,P=y,B=b,R=v,V=w,L=0;L<20;L+=2)k^=(r=(P^=(r=(A^=(r=(M^=(r=k+P|0)<<7|r>>>25)+k|0)<<9|r>>>23)+M|0)<<13|r>>>19)+A|0)<<18|r>>>14,T^=(r=(_^=(r=(B^=(r=(C^=(r=T+_|0)<<7|r>>>25)+T|0)<<9|r>>>23)+C|0)<<13|r>>>19)+B|0)<<18|r>>>14,N^=(r=(x^=(r=(S^=(r=(R^=(r=N+x|0)<<7|r>>>25)+N|0)<<9|r>>>23)+R|0)<<13|r>>>19)+S|0)<<18|r>>>14,V^=(r=(E^=(r=(I^=(r=(O^=(r=V+E|0)<<7|r>>>25)+V|0)<<9|r>>>23)+O|0)<<13|r>>>19)+I|0)<<18|r>>>14,k^=(r=(O^=(r=(S^=(r=(_^=(r=k+O|0)<<7|r>>>25)+k|0)<<9|r>>>23)+_|0)<<13|r>>>19)+S|0)<<18|r>>>14,T^=(r=(M^=(r=(I^=(r=(x^=(r=T+M|0)<<7|r>>>25)+T|0)<<9|r>>>23)+x|0)<<13|r>>>19)+I|0)<<18|r>>>14,N^=(r=(C^=(r=(A^=(r=(E^=(r=N+C|0)<<7|r>>>25)+N|0)<<9|r>>>23)+E|0)<<13|r>>>19)+A|0)<<18|r>>>14,V^=(r=(R^=(r=(B^=(r=(P^=(r=V+R|0)<<7|r>>>25)+V|0)<<9|r>>>23)+P|0)<<13|r>>>19)+B|0)<<18|r>>>14;k=k+a|0,_=_+n|0,S=S+o|0,O=O+h|0,M=M+c|0,T=T+d|0,x=x+u|0,I=I+l|0,A=A+f|0,C=C+p|0,N=N+m|0,E=E+g|0,P=P+y|0,B=B+b|0,R=R+v|0,V=V+w|0,e[0]=k>>>0&255,e[1]=k>>>8&255,e[2]=k>>>16&255,e[3]=k>>>24&255,e[4]=_>>>0&255,e[5]=_>>>8&255,e[6]=_>>>16&255,e[7]=_>>>24&255,e[8]=S>>>0&255,e[9]=S>>>8&255,e[10]=S>>>16&255,e[11]=S>>>24&255,e[12]=O>>>0&255,e[13]=O>>>8&255,e[14]=O>>>16&255,e[15]=O>>>24&255,e[16]=M>>>0&255,e[17]=M>>>8&255,e[18]=M>>>16&255,e[19]=M>>>24&255,e[20]=T>>>0&255,e[21]=T>>>8&255,e[22]=T>>>16&255,e[23]=T>>>24&255,e[24]=x>>>0&255,e[25]=x>>>8&255,e[26]=x>>>16&255,e[27]=x>>>24&255,e[28]=I>>>0&255,e[29]=I>>>8&255,e[30]=I>>>16&255,e[31]=I>>>24&255,e[32]=A>>>0&255,e[33]=A>>>8&255,e[34]=A>>>16&255,e[35]=A>>>24&255,e[36]=C>>>0&255,e[37]=C>>>8&255,e[38]=C>>>16&255,e[39]=C>>>24&255,e[40]=N>>>0&255,e[41]=N>>>8&255,e[42]=N>>>16&255,e[43]=N>>>24&255,e[44]=E>>>0&255,e[45]=E>>>8&255,e[46]=E>>>16&255,e[47]=E>>>24&255,e[48]=P>>>0&255,e[49]=P>>>8&255,e[50]=P>>>16&255,e[51]=P>>>24&255,e[52]=B>>>0&255,e[53]=B>>>8&255,e[54]=B>>>16&255,e[55]=B>>>24&255,e[56]=R>>>0&255,e[57]=R>>>8&255,e[58]=R>>>16&255,e[59]=R>>>24&255,e[60]=V>>>0&255,e[61]=V>>>8&255,e[62]=V>>>16&255,e[63]=V>>>24&255}(e,t,i,s)}function v(e,t,i,s){!function(e,t,i,s){for(var r,a=255&s[0]|(255&s[1])<<8|(255&s[2])<<16|(255&s[3])<<24,n=255&i[0]|(255&i[1])<<8|(255&i[2])<<16|(255&i[3])<<24,o=255&i[4]|(255&i[5])<<8|(255&i[6])<<16|(255&i[7])<<24,h=255&i[8]|(255&i[9])<<8|(255&i[10])<<16|(255&i[11])<<24,c=255&i[12]|(255&i[13])<<8|(255&i[14])<<16|(255&i[15])<<24,d=255&s[4]|(255&s[5])<<8|(255&s[6])<<16|(255&s[7])<<24,u=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,l=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&s[8]|(255&s[9])<<8|(255&s[10])<<16|(255&s[11])<<24,g=255&i[16]|(255&i[17])<<8|(255&i[18])<<16|(255&i[19])<<24,y=255&i[20]|(255&i[21])<<8|(255&i[22])<<16|(255&i[23])<<24,b=255&i[24]|(255&i[25])<<8|(255&i[26])<<16|(255&i[27])<<24,v=255&i[28]|(255&i[29])<<8|(255&i[30])<<16|(255&i[31])<<24,w=255&s[12]|(255&s[13])<<8|(255&s[14])<<16|(255&s[15])<<24,k=0;k<20;k+=2)a^=(r=(y^=(r=(f^=(r=(c^=(r=a+y|0)<<7|r>>>25)+a|0)<<9|r>>>23)+c|0)<<13|r>>>19)+f|0)<<18|r>>>14,d^=(r=(n^=(r=(b^=(r=(p^=(r=d+n|0)<<7|r>>>25)+d|0)<<9|r>>>23)+p|0)<<13|r>>>19)+b|0)<<18|r>>>14,m^=(r=(u^=(r=(o^=(r=(v^=(r=m+u|0)<<7|r>>>25)+m|0)<<9|r>>>23)+v|0)<<13|r>>>19)+o|0)<<18|r>>>14,w^=(r=(g^=(r=(l^=(r=(h^=(r=w+g|0)<<7|r>>>25)+w|0)<<9|r>>>23)+h|0)<<13|r>>>19)+l|0)<<18|r>>>14,a^=(r=(h^=(r=(o^=(r=(n^=(r=a+h|0)<<7|r>>>25)+a|0)<<9|r>>>23)+n|0)<<13|r>>>19)+o|0)<<18|r>>>14,d^=(r=(c^=(r=(l^=(r=(u^=(r=d+c|0)<<7|r>>>25)+d|0)<<9|r>>>23)+u|0)<<13|r>>>19)+l|0)<<18|r>>>14,m^=(r=(p^=(r=(f^=(r=(g^=(r=m+p|0)<<7|r>>>25)+m|0)<<9|r>>>23)+g|0)<<13|r>>>19)+f|0)<<18|r>>>14,w^=(r=(v^=(r=(b^=(r=(y^=(r=w+v|0)<<7|r>>>25)+w|0)<<9|r>>>23)+y|0)<<13|r>>>19)+b|0)<<18|r>>>14;e[0]=a>>>0&255,e[1]=a>>>8&255,e[2]=a>>>16&255,e[3]=a>>>24&255,e[4]=d>>>0&255,e[5]=d>>>8&255,e[6]=d>>>16&255,e[7]=d>>>24&255,e[8]=m>>>0&255,e[9]=m>>>8&255,e[10]=m>>>16&255,e[11]=m>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=u>>>0&255,e[17]=u>>>8&255,e[18]=u>>>16&255,e[19]=u>>>24&255,e[20]=l>>>0&255,e[21]=l>>>8&255,e[22]=l>>>16&255,e[23]=l>>>24&255,e[24]=f>>>0&255,e[25]=f>>>8&255,e[26]=f>>>16&255,e[27]=f>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,i,s)}var w=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function k(e,t,i,s,r,a,n){var o,h,c=new Uint8Array(16),d=new Uint8Array(64);for(h=0;h<16;h++)c[h]=0;for(h=0;h<8;h++)c[h]=a[h];for(;r>=64;){for(b(d,c,n,w),h=0;h<64;h++)e[t+h]=i[s+h]^d[h];for(o=1,h=8;h<16;h++)o=o+(255&c[h])|0,c[h]=255&o,o>>>=8;r-=64,t+=64,s+=64}if(r>0)for(b(d,c,n,w),h=0;h<r;h++)e[t+h]=i[s+h]^d[h];return 0}function _(e,t,i,s,r){var a,n,o=new Uint8Array(16),h=new Uint8Array(64);for(n=0;n<16;n++)o[n]=0;for(n=0;n<8;n++)o[n]=s[n];for(;i>=64;){for(b(h,o,r,w),n=0;n<64;n++)e[t+n]=h[n];for(a=1,n=8;n<16;n++)a=a+(255&o[n])|0,o[n]=255&a,a>>>=8;i-=64,t+=64}if(i>0)for(b(h,o,r,w),n=0;n<i;n++)e[t+n]=h[n];return 0}function S(e,t,i,s,r){var a=new Uint8Array(32);v(a,s,r,w);for(var n=new Uint8Array(8),o=0;o<8;o++)n[o]=s[o+16];return _(e,t,i,n,a)}function O(e,t,i,s,r,a,n){var o=new Uint8Array(32);v(o,a,n,w);for(var h=new Uint8Array(8),c=0;c<8;c++)h[c]=a[c+16];return k(e,t,i,s,r,h,o)}var M=function(e){var t,i,s,r,a,n,o,h;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,i=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|i<<3),s=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(i>>>10|s<<6),r=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(s>>>7|r<<9),a=255&e[8]|(255&e[9])<<8,this.r[4]=255&(r>>>4|a<<12),this.r[5]=a>>>1&8190,n=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(a>>>14|n<<2),o=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(n>>>11|o<<5),h=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(o>>>8|h<<8),this.r[9]=h>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function T(e,t,i,s,r,a){var n=new M(a);return n.update(i,s,r),n.finish(e,t),0}function x(e,t,i,s,r,a){var n=new Uint8Array(16);return T(n,0,i,s,r,a),g(e,t,n,0)}function I(e,t,i,s,r){var a;if(i<32)return-1;for(O(e,0,t,0,i,s,r),T(e,16,e,32,i-32,e),a=0;a<16;a++)e[a]=0;return 0}function A(e,t,i,s,r){var a,n=new Uint8Array(32);if(i<32)return-1;if(S(n,0,32,s,r),0!==x(t,16,t,32,i-32,n))return-1;for(O(e,0,t,0,i,s,r),a=0;a<32;a++)e[a]=0;return 0}function C(e,t){var i;for(i=0;i<16;i++)e[i]=0|t[i]}function N(e){var t,i,s=1;for(t=0;t<16;t++)i=e[t]+s+65535,s=Math.floor(i/65536),e[t]=i-65536*s;e[0]+=s-1+37*(s-1)}function E(e,t,i){for(var s,r=~(i-1),a=0;a<16;a++)s=r&(e[a]^t[a]),e[a]^=s,t[a]^=s}function P(e,i){var s,r,a,n=t(),o=t();for(s=0;s<16;s++)o[s]=i[s];for(N(o),N(o),N(o),r=0;r<2;r++){for(n[0]=o[0]-65517,s=1;s<15;s++)n[s]=o[s]-65535-(n[s-1]>>16&1),n[s-1]&=65535;n[15]=o[15]-32767-(n[14]>>16&1),a=n[15]>>16&1,n[14]&=65535,E(o,n,1-a)}for(s=0;s<16;s++)e[2*s]=255&o[s],e[2*s+1]=o[s]>>8}function B(e,t){var i=new Uint8Array(32),s=new Uint8Array(32);return P(i,e),P(s,t),y(i,0,s,0)}function R(e){var t=new Uint8Array(32);return P(t,e),1&t[0]}function V(e,t){var i;for(i=0;i<16;i++)e[i]=t[2*i]+(t[2*i+1]<<8);e[15]&=32767}function L(e,t,i){for(var s=0;s<16;s++)e[s]=t[s]+i[s]}function D(e,t,i){for(var s=0;s<16;s++)e[s]=t[s]-i[s]}function q(e,t,i){var s,r,a=0,n=0,o=0,h=0,c=0,d=0,u=0,l=0,f=0,p=0,m=0,g=0,y=0,b=0,v=0,w=0,k=0,_=0,S=0,O=0,M=0,T=0,x=0,I=0,A=0,C=0,N=0,E=0,P=0,B=0,R=0,V=i[0],L=i[1],D=i[2],q=i[3],G=i[4],F=i[5],j=i[6],U=i[7],H=i[8],z=i[9],K=i[10],W=i[11],X=i[12],Z=i[13],Y=i[14],Q=i[15];a+=(s=t[0])*V,n+=s*L,o+=s*D,h+=s*q,c+=s*G,d+=s*F,u+=s*j,l+=s*U,f+=s*H,p+=s*z,m+=s*K,g+=s*W,y+=s*X,b+=s*Z,v+=s*Y,w+=s*Q,n+=(s=t[1])*V,o+=s*L,h+=s*D,c+=s*q,d+=s*G,u+=s*F,l+=s*j,f+=s*U,p+=s*H,m+=s*z,g+=s*K,y+=s*W,b+=s*X,v+=s*Z,w+=s*Y,k+=s*Q,o+=(s=t[2])*V,h+=s*L,c+=s*D,d+=s*q,u+=s*G,l+=s*F,f+=s*j,p+=s*U,m+=s*H,g+=s*z,y+=s*K,b+=s*W,v+=s*X,w+=s*Z,k+=s*Y,_+=s*Q,h+=(s=t[3])*V,c+=s*L,d+=s*D,u+=s*q,l+=s*G,f+=s*F,p+=s*j,m+=s*U,g+=s*H,y+=s*z,b+=s*K,v+=s*W,w+=s*X,k+=s*Z,_+=s*Y,S+=s*Q,c+=(s=t[4])*V,d+=s*L,u+=s*D,l+=s*q,f+=s*G,p+=s*F,m+=s*j,g+=s*U,y+=s*H,b+=s*z,v+=s*K,w+=s*W,k+=s*X,_+=s*Z,S+=s*Y,O+=s*Q,d+=(s=t[5])*V,u+=s*L,l+=s*D,f+=s*q,p+=s*G,m+=s*F,g+=s*j,y+=s*U,b+=s*H,v+=s*z,w+=s*K,k+=s*W,_+=s*X,S+=s*Z,O+=s*Y,M+=s*Q,u+=(s=t[6])*V,l+=s*L,f+=s*D,p+=s*q,m+=s*G,g+=s*F,y+=s*j,b+=s*U,v+=s*H,w+=s*z,k+=s*K,_+=s*W,S+=s*X,O+=s*Z,M+=s*Y,T+=s*Q,l+=(s=t[7])*V,f+=s*L,p+=s*D,m+=s*q,g+=s*G,y+=s*F,b+=s*j,v+=s*U,w+=s*H,k+=s*z,_+=s*K,S+=s*W,O+=s*X,M+=s*Z,T+=s*Y,x+=s*Q,f+=(s=t[8])*V,p+=s*L,m+=s*D,g+=s*q,y+=s*G,b+=s*F,v+=s*j,w+=s*U,k+=s*H,_+=s*z,S+=s*K,O+=s*W,M+=s*X,T+=s*Z,x+=s*Y,I+=s*Q,p+=(s=t[9])*V,m+=s*L,g+=s*D,y+=s*q,b+=s*G,v+=s*F,w+=s*j,k+=s*U,_+=s*H,S+=s*z,O+=s*K,M+=s*W,T+=s*X,x+=s*Z,I+=s*Y,A+=s*Q,m+=(s=t[10])*V,g+=s*L,y+=s*D,b+=s*q,v+=s*G,w+=s*F,k+=s*j,_+=s*U,S+=s*H,O+=s*z,M+=s*K,T+=s*W,x+=s*X,I+=s*Z,A+=s*Y,C+=s*Q,g+=(s=t[11])*V,y+=s*L,b+=s*D,v+=s*q,w+=s*G,k+=s*F,_+=s*j,S+=s*U,O+=s*H,M+=s*z,T+=s*K,x+=s*W,I+=s*X,A+=s*Z,C+=s*Y,N+=s*Q,y+=(s=t[12])*V,b+=s*L,v+=s*D,w+=s*q,k+=s*G,_+=s*F,S+=s*j,O+=s*U,M+=s*H,T+=s*z,x+=s*K,I+=s*W,A+=s*X,C+=s*Z,N+=s*Y,E+=s*Q,b+=(s=t[13])*V,v+=s*L,w+=s*D,k+=s*q,_+=s*G,S+=s*F,O+=s*j,M+=s*U,T+=s*H,x+=s*z,I+=s*K,A+=s*W,C+=s*X,N+=s*Z,E+=s*Y,P+=s*Q,v+=(s=t[14])*V,w+=s*L,k+=s*D,_+=s*q,S+=s*G,O+=s*F,M+=s*j,T+=s*U,x+=s*H,I+=s*z,A+=s*K,C+=s*W,N+=s*X,E+=s*Z,P+=s*Y,B+=s*Q,w+=(s=t[15])*V,n+=38*(_+=s*D),o+=38*(S+=s*q),h+=38*(O+=s*G),c+=38*(M+=s*F),d+=38*(T+=s*j),u+=38*(x+=s*U),l+=38*(I+=s*H),f+=38*(A+=s*z),p+=38*(C+=s*K),m+=38*(N+=s*W),g+=38*(E+=s*X),y+=38*(P+=s*Z),b+=38*(B+=s*Y),v+=38*(R+=s*Q),a=(s=(a+=38*(k+=s*L))+(r=1)+65535)-65536*(r=Math.floor(s/65536)),n=(s=n+r+65535)-65536*(r=Math.floor(s/65536)),o=(s=o+r+65535)-65536*(r=Math.floor(s/65536)),h=(s=h+r+65535)-65536*(r=Math.floor(s/65536)),c=(s=c+r+65535)-65536*(r=Math.floor(s/65536)),d=(s=d+r+65535)-65536*(r=Math.floor(s/65536)),u=(s=u+r+65535)-65536*(r=Math.floor(s/65536)),l=(s=l+r+65535)-65536*(r=Math.floor(s/65536)),f=(s=f+r+65535)-65536*(r=Math.floor(s/65536)),p=(s=p+r+65535)-65536*(r=Math.floor(s/65536)),m=(s=m+r+65535)-65536*(r=Math.floor(s/65536)),g=(s=g+r+65535)-65536*(r=Math.floor(s/65536)),y=(s=y+r+65535)-65536*(r=Math.floor(s/65536)),b=(s=b+r+65535)-65536*(r=Math.floor(s/65536)),v=(s=v+r+65535)-65536*(r=Math.floor(s/65536)),w=(s=w+r+65535)-65536*(r=Math.floor(s/65536)),a=(s=(a+=r-1+37*(r-1))+(r=1)+65535)-65536*(r=Math.floor(s/65536)),n=(s=n+r+65535)-65536*(r=Math.floor(s/65536)),o=(s=o+r+65535)-65536*(r=Math.floor(s/65536)),h=(s=h+r+65535)-65536*(r=Math.floor(s/65536)),c=(s=c+r+65535)-65536*(r=Math.floor(s/65536)),d=(s=d+r+65535)-65536*(r=Math.floor(s/65536)),u=(s=u+r+65535)-65536*(r=Math.floor(s/65536)),l=(s=l+r+65535)-65536*(r=Math.floor(s/65536)),f=(s=f+r+65535)-65536*(r=Math.floor(s/65536)),p=(s=p+r+65535)-65536*(r=Math.floor(s/65536)),m=(s=m+r+65535)-65536*(r=Math.floor(s/65536)),g=(s=g+r+65535)-65536*(r=Math.floor(s/65536)),y=(s=y+r+65535)-65536*(r=Math.floor(s/65536)),b=(s=b+r+65535)-65536*(r=Math.floor(s/65536)),v=(s=v+r+65535)-65536*(r=Math.floor(s/65536)),w=(s=w+r+65535)-65536*(r=Math.floor(s/65536)),a+=r-1+37*(r-1),e[0]=a,e[1]=n,e[2]=o,e[3]=h,e[4]=c,e[5]=d,e[6]=u,e[7]=l,e[8]=f,e[9]=p,e[10]=m,e[11]=g,e[12]=y,e[13]=b,e[14]=v,e[15]=w}function G(e,t){q(e,t,t)}function F(e,i){var s,r=t();for(s=0;s<16;s++)r[s]=i[s];for(s=253;s>=0;s--)G(r,r),2!==s&&4!==s&&q(r,r,i);for(s=0;s<16;s++)e[s]=r[s]}function j(e,i,s){var r,a,n=new Uint8Array(32),o=new Float64Array(80),c=t(),d=t(),u=t(),l=t(),f=t(),p=t();for(a=0;a<31;a++)n[a]=i[a];for(n[31]=127&i[31]|64,n[0]&=248,V(o,s),a=0;a<16;a++)d[a]=o[a],l[a]=c[a]=u[a]=0;for(c[0]=l[0]=1,a=254;a>=0;--a)E(c,d,r=n[a>>>3]>>>(7&a)&1),E(u,l,r),L(f,c,u),D(c,c,u),L(u,d,l),D(d,d,l),G(l,f),G(p,c),q(c,u,c),q(u,d,f),L(f,c,u),D(c,c,u),G(d,c),D(u,l,p),q(c,u,h),L(c,c,l),q(u,u,c),q(c,l,p),q(l,d,o),G(d,f),E(c,d,r),E(u,l,r);for(a=0;a<16;a++)o[a+16]=c[a],o[a+32]=u[a],o[a+48]=d[a],o[a+64]=l[a];var m=o.subarray(32),g=o.subarray(16);return F(m,m),q(g,g,m),P(e,g),0}function U(e,t){return j(e,t,a)}function H(e,t){return s(t,32),U(e,t)}function z(e,t,i){var s=new Uint8Array(32);return j(s,i,t),v(e,r,s,w)}M.prototype.blocks=function(e,t,i){for(var s,r,a,n,o,h,c,d,u,l,f,p,m,g,y,b,v,w,k,_=this.fin?0:2048,S=this.h[0],O=this.h[1],M=this.h[2],T=this.h[3],x=this.h[4],I=this.h[5],A=this.h[6],C=this.h[7],N=this.h[8],E=this.h[9],P=this.r[0],B=this.r[1],R=this.r[2],V=this.r[3],L=this.r[4],D=this.r[5],q=this.r[6],G=this.r[7],F=this.r[8],j=this.r[9];i>=16;)l=u=0,l+=(S+=8191&(s=255&e[t+0]|(255&e[t+1])<<8))*P,l+=(O+=8191&(s>>>13|(r=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*j),l+=(M+=8191&(r>>>10|(a=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*F),l+=(T+=8191&(a>>>7|(n=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*G),u=(l+=(x+=8191&(n>>>4|(o=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*q))>>>13,l&=8191,l+=(I+=o>>>1&8191)*(5*D),l+=(A+=8191&(o>>>14|(h=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*L),l+=(C+=8191&(h>>>11|(c=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*V),l+=(N+=8191&(c>>>8|(d=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*R),f=u+=(l+=(E+=d>>>5|_)*(5*B))>>>13,f+=S*B,f+=O*P,f+=M*(5*j),f+=T*(5*F),u=(f+=x*(5*G))>>>13,f&=8191,f+=I*(5*q),f+=A*(5*D),f+=C*(5*L),f+=N*(5*V),u+=(f+=E*(5*R))>>>13,f&=8191,p=u,p+=S*R,p+=O*B,p+=M*P,p+=T*(5*j),u=(p+=x*(5*F))>>>13,p&=8191,p+=I*(5*G),p+=A*(5*q),p+=C*(5*D),p+=N*(5*L),m=u+=(p+=E*(5*V))>>>13,m+=S*V,m+=O*R,m+=M*B,m+=T*P,u=(m+=x*(5*j))>>>13,m&=8191,m+=I*(5*F),m+=A*(5*G),m+=C*(5*q),m+=N*(5*D),g=u+=(m+=E*(5*L))>>>13,g+=S*L,g+=O*V,g+=M*R,g+=T*B,u=(g+=x*P)>>>13,g&=8191,g+=I*(5*j),g+=A*(5*F),g+=C*(5*G),g+=N*(5*q),y=u+=(g+=E*(5*D))>>>13,y+=S*D,y+=O*L,y+=M*V,y+=T*R,u=(y+=x*B)>>>13,y&=8191,y+=I*P,y+=A*(5*j),y+=C*(5*F),y+=N*(5*G),b=u+=(y+=E*(5*q))>>>13,b+=S*q,b+=O*D,b+=M*L,b+=T*V,u=(b+=x*R)>>>13,b&=8191,b+=I*B,b+=A*P,b+=C*(5*j),b+=N*(5*F),v=u+=(b+=E*(5*G))>>>13,v+=S*G,v+=O*q,v+=M*D,v+=T*L,u=(v+=x*V)>>>13,v&=8191,v+=I*R,v+=A*B,v+=C*P,v+=N*(5*j),w=u+=(v+=E*(5*F))>>>13,w+=S*F,w+=O*G,w+=M*q,w+=T*D,u=(w+=x*L)>>>13,w&=8191,w+=I*V,w+=A*R,w+=C*B,w+=N*P,k=u+=(w+=E*(5*j))>>>13,k+=S*j,k+=O*F,k+=M*G,k+=T*q,u=(k+=x*D)>>>13,k&=8191,k+=I*L,k+=A*V,k+=C*R,k+=N*B,S=l=8191&(u=(u=((u+=(k+=E*P)>>>13)<<2)+u|0)+(l&=8191)|0),O=f+=u>>>=13,M=p&=8191,T=m&=8191,x=g&=8191,I=y&=8191,A=b&=8191,C=v&=8191,N=w&=8191,E=k&=8191,t+=16,i-=16;this.h[0]=S,this.h[1]=O,this.h[2]=M,this.h[3]=T,this.h[4]=x,this.h[5]=I,this.h[6]=A,this.h[7]=C,this.h[8]=N,this.h[9]=E},M.prototype.finish=function(e,t){var i,s,r,a,n=new Uint16Array(10);if(this.leftover){for(a=this.leftover,this.buffer[a++]=1;a<16;a++)this.buffer[a]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(i=this.h[1]>>>13,this.h[1]&=8191,a=2;a<10;a++)this.h[a]+=i,i=this.h[a]>>>13,this.h[a]&=8191;for(this.h[0]+=5*i,i=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=i,i=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=i,n[0]=this.h[0]+5,i=n[0]>>>13,n[0]&=8191,a=1;a<10;a++)n[a]=this.h[a]+i,i=n[a]>>>13,n[a]&=8191;for(n[9]-=8192,s=(1^i)-1,a=0;a<10;a++)n[a]&=s;for(s=~s,a=0;a<10;a++)this.h[a]=this.h[a]&s|n[a];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),r=this.h[0]+this.pad[0],this.h[0]=65535&r,a=1;a<8;a++)r=(this.h[a]+this.pad[a]|0)+(r>>>16)|0,this.h[a]=65535&r;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},M.prototype.update=function(e,t,i){var s,r;if(this.leftover){for((r=16-this.leftover)>i&&(r=i),s=0;s<r;s++)this.buffer[this.leftover+s]=e[t+s];if(i-=r,t+=r,this.leftover+=r,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(i>=16&&(r=i-i%16,this.blocks(e,t,r),t+=r,i-=r),i){for(s=0;s<i;s++)this.buffer[this.leftover+s]=e[t+s];this.leftover+=i}};var K=I,W=A,X=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Z(e,t,i,s){for(var r,a,n,o,h,c,d,u,l,f,p,m,g,y,b,v,w,k,_,S,O,M,T,x,I,A,C=new Int32Array(16),N=new Int32Array(16),E=e[0],P=e[1],B=e[2],R=e[3],V=e[4],L=e[5],D=e[6],q=e[7],G=t[0],F=t[1],j=t[2],U=t[3],H=t[4],z=t[5],K=t[6],W=t[7],Z=0;s>=128;){for(_=0;_<16;_++)S=8*_+Z,C[_]=i[S+0]<<24|i[S+1]<<16|i[S+2]<<8|i[S+3],N[_]=i[S+4]<<24|i[S+5]<<16|i[S+6]<<8|i[S+7];for(_=0;_<80;_++)if(r=E,a=P,n=B,o=R,h=V,c=L,d=D,l=G,f=F,p=j,m=U,g=H,y=z,b=K,T=65535&(M=W),x=M>>>16,I=65535&(O=q),A=O>>>16,T+=65535&(M=(H>>>14|V<<18)^(H>>>18|V<<14)^(V>>>9|H<<23)),x+=M>>>16,I+=65535&(O=(V>>>14|H<<18)^(V>>>18|H<<14)^(H>>>9|V<<23)),A+=O>>>16,T+=65535&(M=H&z^~H&K),x+=M>>>16,I+=65535&(O=V&L^~V&D),A+=O>>>16,T+=65535&(M=X[2*_+1]),x+=M>>>16,I+=65535&(O=X[2*_]),A+=O>>>16,O=C[_%16],x+=(M=N[_%16])>>>16,I+=65535&O,A+=O>>>16,I+=(x+=(T+=65535&M)>>>16)>>>16,T=65535&(M=k=65535&T|x<<16),x=M>>>16,I=65535&(O=w=65535&I|(A+=I>>>16)<<16),A=O>>>16,T+=65535&(M=(G>>>28|E<<4)^(E>>>2|G<<30)^(E>>>7|G<<25)),x+=M>>>16,I+=65535&(O=(E>>>28|G<<4)^(G>>>2|E<<30)^(G>>>7|E<<25)),A+=O>>>16,x+=(M=G&F^G&j^F&j)>>>16,I+=65535&(O=E&P^E&B^P&B),A+=O>>>16,u=65535&(I+=(x+=(T+=65535&M)>>>16)>>>16)|(A+=I>>>16)<<16,v=65535&T|x<<16,T=65535&(M=m),x=M>>>16,I=65535&(O=o),A=O>>>16,x+=(M=k)>>>16,I+=65535&(O=w),A+=O>>>16,P=r,B=a,R=n,V=o=65535&(I+=(x+=(T+=65535&M)>>>16)>>>16)|(A+=I>>>16)<<16,L=h,D=c,q=d,E=u,F=l,j=f,U=p,H=m=65535&T|x<<16,z=g,K=y,W=b,G=v,_%16==15)for(S=0;S<16;S++)O=C[S],T=65535&(M=N[S]),x=M>>>16,I=65535&O,A=O>>>16,O=C[(S+9)%16],T+=65535&(M=N[(S+9)%16]),x+=M>>>16,I+=65535&O,A+=O>>>16,w=C[(S+1)%16],T+=65535&(M=((k=N[(S+1)%16])>>>1|w<<31)^(k>>>8|w<<24)^(k>>>7|w<<25)),x+=M>>>16,I+=65535&(O=(w>>>1|k<<31)^(w>>>8|k<<24)^w>>>7),A+=O>>>16,w=C[(S+14)%16],x+=(M=((k=N[(S+14)%16])>>>19|w<<13)^(w>>>29|k<<3)^(k>>>6|w<<26))>>>16,I+=65535&(O=(w>>>19|k<<13)^(k>>>29|w<<3)^w>>>6),A+=O>>>16,A+=(I+=(x+=(T+=65535&M)>>>16)>>>16)>>>16,C[S]=65535&I|A<<16,N[S]=65535&T|x<<16;T=65535&(M=G),x=M>>>16,I=65535&(O=E),A=O>>>16,O=e[0],x+=(M=t[0])>>>16,I+=65535&O,A+=O>>>16,A+=(I+=(x+=(T+=65535&M)>>>16)>>>16)>>>16,e[0]=E=65535&I|A<<16,t[0]=G=65535&T|x<<16,T=65535&(M=F),x=M>>>16,I=65535&(O=P),A=O>>>16,O=e[1],x+=(M=t[1])>>>16,I+=65535&O,A+=O>>>16,A+=(I+=(x+=(T+=65535&M)>>>16)>>>16)>>>16,e[1]=P=65535&I|A<<16,t[1]=F=65535&T|x<<16,T=65535&(M=j),x=M>>>16,I=65535&(O=B),A=O>>>16,O=e[2],x+=(M=t[2])>>>16,I+=65535&O,A+=O>>>16,A+=(I+=(x+=(T+=65535&M)>>>16)>>>16)>>>16,e[2]=B=65535&I|A<<16,t[2]=j=65535&T|x<<16,T=65535&(M=U),x=M>>>16,I=65535&(O=R),A=O>>>16,O=e[3],x+=(M=t[3])>>>16,I+=65535&O,A+=O>>>16,A+=(I+=(x+=(T+=65535&M)>>>16)>>>16)>>>16,e[3]=R=65535&I|A<<16,t[3]=U=65535&T|x<<16,T=65535&(M=H),x=M>>>16,I=65535&(O=V),A=O>>>16,O=e[4],x+=(M=t[4])>>>16,I+=65535&O,A+=O>>>16,A+=(I+=(x+=(T+=65535&M)>>>16)>>>16)>>>16,e[4]=V=65535&I|A<<16,t[4]=H=65535&T|x<<16,T=65535&(M=z),x=M>>>16,I=65535&(O=L),A=O>>>16,O=e[5],x+=(M=t[5])>>>16,I+=65535&O,A+=O>>>16,A+=(I+=(x+=(T+=65535&M)>>>16)>>>16)>>>16,e[5]=L=65535&I|A<<16,t[5]=z=65535&T|x<<16,T=65535&(M=K),x=M>>>16,I=65535&(O=D),A=O>>>16,O=e[6],x+=(M=t[6])>>>16,I+=65535&O,A+=O>>>16,A+=(I+=(x+=(T+=65535&M)>>>16)>>>16)>>>16,e[6]=D=65535&I|A<<16,t[6]=K=65535&T|x<<16,T=65535&(M=W),x=M>>>16,I=65535&(O=q),A=O>>>16,O=e[7],x+=(M=t[7])>>>16,I+=65535&O,A+=O>>>16,A+=(I+=(x+=(T+=65535&M)>>>16)>>>16)>>>16,e[7]=q=65535&I|A<<16,t[7]=W=65535&T|x<<16,Z+=128,s-=128}return s}function Y(e,t,i){var s,r=new Int32Array(8),a=new Int32Array(8),n=new Uint8Array(256),o=i;for(r[0]=1779033703,r[1]=3144134277,r[2]=1013904242,r[3]=2773480762,r[4]=1359893119,r[5]=2600822924,r[6]=528734635,r[7]=1541459225,a[0]=4089235720,a[1]=2227873595,a[2]=4271175723,a[3]=1595750129,a[4]=2917565137,a[5]=725511199,a[6]=4215389547,a[7]=327033209,Z(r,a,t,i),i%=128,s=0;s<i;s++)n[s]=t[o-i+s];for(n[i]=128,n[(i=256-128*(i<112?1:0))-9]=0,p(n,i-8,o/536870912|0,o<<3),Z(r,a,n,i),s=0;s<8;s++)p(e,8*s,r[s],a[s]);return 0}function Q(e,i){var s=t(),r=t(),a=t(),n=t(),o=t(),h=t(),c=t(),u=t(),l=t();D(s,e[1],e[0]),D(l,i[1],i[0]),q(s,s,l),L(r,e[0],e[1]),L(l,i[0],i[1]),q(r,r,l),q(a,e[3],i[3]),q(a,a,d),q(n,e[2],i[2]),L(n,n,n),D(o,r,s),D(h,n,a),L(c,n,a),L(u,r,s),q(e[0],o,h),q(e[1],u,c),q(e[2],c,h),q(e[3],o,u)}function J(e,t,i){var s;for(s=0;s<4;s++)E(e[s],t[s],i)}function $(e,i){var s=t(),r=t(),a=t();F(a,i[2]),q(s,i[0],a),q(r,i[1],a),P(e,r),e[31]^=R(s)<<7}function ee(e,t,i){var s,r;for(C(e[0],n),C(e[1],o),C(e[2],o),C(e[3],n),r=255;r>=0;--r)J(e,t,s=i[r/8|0]>>(7&r)&1),Q(t,e),Q(e,e),J(e,t,s)}function te(e,i){var s=[t(),t(),t(),t()];C(s[0],u),C(s[1],l),C(s[2],o),q(s[3],u,l),ee(e,s,i)}function ie(e,i,r){var a,n=new Uint8Array(64),o=[t(),t(),t(),t()];for(r||s(i,32),Y(n,i,32),n[0]&=248,n[31]&=127,n[31]|=64,te(o,n),$(e,o),a=0;a<32;a++)i[a+32]=e[a];return 0}var se=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function re(e,t){var i,s,r,a;for(s=63;s>=32;--s){for(i=0,r=s-32,a=s-12;r<a;++r)t[r]+=i-16*t[s]*se[r-(s-32)],i=t[r]+128>>8,t[r]-=256*i;t[r]+=i,t[s]=0}for(i=0,r=0;r<32;r++)t[r]+=i-(t[31]>>4)*se[r],i=t[r]>>8,t[r]&=255;for(r=0;r<32;r++)t[r]-=i*se[r];for(s=0;s<32;s++)t[s+1]+=t[s]>>8,e[s]=255&t[s]}function ae(e){var t,i=new Float64Array(64);for(t=0;t<64;t++)i[t]=e[t];for(t=0;t<64;t++)e[t]=0;re(e,i)}function ne(e,i,s,r){var a,n,o=new Uint8Array(64),h=new Uint8Array(64),c=new Uint8Array(64),d=new Float64Array(64),u=[t(),t(),t(),t()];Y(o,r,32),o[0]&=248,o[31]&=127,o[31]|=64;var l=s+64;for(a=0;a<s;a++)e[64+a]=i[a];for(a=0;a<32;a++)e[32+a]=o[32+a];for(Y(c,e.subarray(32),s+32),ae(c),te(u,c),$(e,u),a=32;a<64;a++)e[a]=r[a];for(Y(h,e,s+64),ae(h),a=0;a<64;a++)d[a]=0;for(a=0;a<32;a++)d[a]=c[a];for(a=0;a<32;a++)for(n=0;n<32;n++)d[a+n]+=h[a]*o[n];return re(e.subarray(32),d),l}function oe(e,i,s,r){var a,h=new Uint8Array(32),d=new Uint8Array(64),u=[t(),t(),t(),t()],l=[t(),t(),t(),t()];if(s<64)return-1;if(function(e,i){var s=t(),r=t(),a=t(),h=t(),d=t(),u=t(),l=t();return C(e[2],o),V(e[1],i),G(a,e[1]),q(h,a,c),D(a,a,e[2]),L(h,e[2],h),G(d,h),G(u,d),q(l,u,d),q(s,l,a),q(s,s,h),function(e,i){var s,r=t();for(s=0;s<16;s++)r[s]=i[s];for(s=250;s>=0;s--)G(r,r),1!==s&&q(r,r,i);for(s=0;s<16;s++)e[s]=r[s]}(s,s),q(s,s,a),q(s,s,h),q(s,s,h),q(e[0],s,h),G(r,e[0]),q(r,r,h),B(r,a)&&q(e[0],e[0],f),G(r,e[0]),q(r,r,h),B(r,a)?-1:(R(e[0])===i[31]>>7&&D(e[0],n,e[0]),q(e[3],e[0],e[1]),0)}(l,r))return-1;for(a=0;a<s;a++)e[a]=i[a];for(a=0;a<32;a++)e[a+32]=r[a];if(Y(d,e,s),ae(d),ee(u,l,d),te(l,i.subarray(32)),Q(u,l),$(h,u),s-=64,y(i,0,h,0)){for(a=0;a<s;a++)e[a]=0;return-1}for(a=0;a<s;a++)e[a]=i[a+64];return s}var he=64,ce=32,de=64;function ue(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function le(){var e,t;for(t=0;t<arguments.length;t++)if("[object Uint8Array]"!==(e=Object.prototype.toString.call(arguments[t])))throw new TypeError("unexpected type "+e+", use Uint8Array")}function fe(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:v,crypto_stream_xor:O,crypto_stream:S,crypto_stream_salsa20_xor:k,crypto_stream_salsa20:_,crypto_onetimeauth:T,crypto_onetimeauth_verify:x,crypto_verify_16:g,crypto_verify_32:y,crypto_secretbox:I,crypto_secretbox_open:A,crypto_scalarmult:j,crypto_scalarmult_base:U,crypto_box_beforenm:z,crypto_box_afternm:K,crypto_box:function(e,t,i,s,r,a){var n=new Uint8Array(32);return z(n,r,a),K(e,t,i,s,n)},crypto_box_open:function(e,t,i,s,r,a){var n=new Uint8Array(32);return z(n,r,a),W(e,t,i,s,n)},crypto_box_keypair:H,crypto_hash:Y,crypto_sign:ne,crypto_sign_keypair:ie,crypto_sign_open:oe,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:he,crypto_sign_PUBLICKEYBYTES:ce,crypto_sign_SECRETKEYBYTES:de,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},e.util||(e.util={},e.util.decodeUTF8=e.util.encodeUTF8=e.util.encodeBase64=e.util.decodeBase64=function(){throw new Error("nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js")}),e.randomBytes=function(e){var t=new Uint8Array(e);return s(t,e),t},e.secretbox=function(e,t,i){le(e,t,i),ue(i,t);for(var s=new Uint8Array(32+e.length),r=new Uint8Array(s.length),a=0;a<e.length;a++)s[a+32]=e[a];return I(r,s,s.length,t,i),r.subarray(16)},e.secretbox.open=function(e,t,i){le(e,t,i),ue(i,t);for(var s=new Uint8Array(16+e.length),r=new Uint8Array(s.length),a=0;a<e.length;a++)s[a+16]=e[a];return!(s.length<32)&&0===A(r,s,s.length,t,i)&&r.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(le(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var i=new Uint8Array(32);return j(i,e,t),i},e.scalarMult.base=function(e){if(le(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return U(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,i,s,r){var a=e.box.before(s,r);return e.secretbox(t,i,a)},e.box.before=function(e,t){le(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var i=new Uint8Array(32);return z(i,e,t),i},e.box.after=e.secretbox,e.box.open=function(t,i,s,r){var a=e.box.before(s,r);return e.secretbox.open(t,i,a)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return H(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(le(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return U(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(le(e,t),t.length!==de)throw new Error("bad secret key size");var i=new Uint8Array(he+e.length);return ne(i,e,e.length,t),i},e.sign.open=function(e,t){if(2!==arguments.length)throw new Error("nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?");if(le(e,t),t.length!==ce)throw new Error("bad public key size");var i=new Uint8Array(e.length),s=oe(i,e,e.length,t);if(s<0)return null;for(var r=new Uint8Array(s),a=0;a<r.length;a++)r[a]=i[a];return r},e.sign.detached=function(t,i){for(var s=e.sign(t,i),r=new Uint8Array(he),a=0;a<r.length;a++)r[a]=s[a];return r},e.sign.detached.verify=function(e,t,i){if(le(e,t,i),t.length!==he)throw new Error("bad signature size");if(i.length!==ce)throw new Error("bad public key size");var s,r=new Uint8Array(he+e.length),a=new Uint8Array(he+e.length);for(s=0;s<he;s++)r[s]=t[s];for(s=0;s<e.length;s++)r[s+he]=e[s];return oe(a,r,r.length,i)>=0},e.sign.keyPair=function(){var e=new Uint8Array(ce),t=new Uint8Array(de);return ie(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(le(e),e.length!==de)throw new Error("bad secret key size");for(var t=new Uint8Array(ce),i=0;i<t.length;i++)t[i]=e[32+i];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(le(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(ce),i=new Uint8Array(de),s=0;s<32;s++)i[s]=e[s];return ie(t,i,!0),{publicKey:t,secretKey:i}},e.sign.publicKeyLength=ce,e.sign.secretKeyLength=de,e.sign.seedLength=32,e.sign.signatureLength=he,e.hash=function(e){le(e);var t=new Uint8Array(64);return Y(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return le(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===m(e,0,t,0,e.length)},e.setPRNG=function(e){s=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;t&&t.getRandomValues?e.setPRNG((function(e,i){var s,r=new Uint8Array(i);for(s=0;s<i;s+=65536)t.getRandomValues(r.subarray(s,s+Math.min(i-s,65536)));for(s=0;s<i;s++)e[s]=r[s];fe(r)})):(t=i(55024))&&t.randomBytes&&e.setPRNG((function(e,i){var s,r=t.randomBytes(i);for(s=0;s<i;s++)e[s]=r[s];fe(r)}))}()}(e.exports?e.exports:self.nacl=self.nacl||{})},52511:function(e,t,i){var s;e=i.nmd(e),function(r){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof i.g&&i.g;a.global!==a&&a.window!==a&&a.self;var n,o=2147483647,h=36,c=/^xn--/,d=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,p=String.fromCharCode;function m(e){throw RangeError(l[e])}function g(e,t){for(var i=e.length,s=[];i--;)s[i]=t(e[i]);return s}function y(e,t){var i=e.split("@"),s="";return i.length>1&&(s=i[0]+"@",e=i[1]),s+g((e=e.replace(u,".")).split("."),t).join(".")}function b(e){for(var t,i,s=[],r=0,a=e.length;r<a;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<a?56320==(64512&(i=e.charCodeAt(r++)))?s.push(((1023&t)<<10)+(1023&i)+65536):(s.push(t),r--):s.push(t);return s}function v(e){return g(e,(function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+p(e)})).join("")}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function k(e,t,i){var s=0;for(e=i?f(e/700):e>>1,e+=f(e/t);e>455;s+=h)e=f(e/35);return f(s+36*e/(e+38))}function _(e){var t,i,s,r,a,n,c,d,u,l,p,g=[],y=e.length,b=0,w=128,_=72;for((i=e.lastIndexOf("-"))<0&&(i=0),s=0;s<i;++s)e.charCodeAt(s)>=128&&m("not-basic"),g.push(e.charCodeAt(s));for(r=i>0?i+1:0;r<y;){for(a=b,n=1,c=h;r>=y&&m("invalid-input"),((d=(p=e.charCodeAt(r++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:h)>=h||d>f((o-b)/n))&&m("overflow"),b+=d*n,!(d<(u=c<=_?1:c>=_+26?26:c-_));c+=h)n>f(o/(l=h-u))&&m("overflow"),n*=l;_=k(b-a,t=g.length+1,0==a),f(b/t)>o-w&&m("overflow"),w+=f(b/t),b%=t,g.splice(b++,0,w)}return v(g)}function S(e){var t,i,s,r,a,n,c,d,u,l,g,y,v,_,S,O=[];for(y=(e=b(e)).length,t=128,i=0,a=72,n=0;n<y;++n)(g=e[n])<128&&O.push(p(g));for(s=r=O.length,r&&O.push("-");s<y;){for(c=o,n=0;n<y;++n)(g=e[n])>=t&&g<c&&(c=g);for(c-t>f((o-i)/(v=s+1))&&m("overflow"),i+=(c-t)*v,t=c,n=0;n<y;++n)if((g=e[n])<t&&++i>o&&m("overflow"),g==t){for(d=i,u=h;!(d<(l=u<=a?1:u>=a+26?26:u-a));u+=h)S=d-l,_=h-l,O.push(p(w(l+S%_,0))),d=f(S/_);O.push(p(w(d,0))),a=k(i,v,s==r),i=0,++s}++i,++t}return O.join("")}n={version:"1.3.2",ucs2:{decode:b,encode:v},decode:_,encode:S,toASCII:function(e){return y(e,(function(e){return d.test(e)?"xn--"+S(e):e}))},toUnicode:function(e){return y(e,(function(e){return c.test(e)?_(e.slice(4).toLowerCase()):e}))}},void 0===(s=function(){return n}.call(t,i,t,e))||(e.exports=s)}()},8575:(e,t,i)=>{"use strict";var s=i(52511),r=i(62502);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=v,t.resolve=function(e,t){return v(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?v(e,!1,!0).resolveObject(t):t},t.format=function(e){return r.isString(e)&&(e=v(e)),e instanceof a?e.format():a.prototype.format.call(e)},t.Url=a;var n=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(c),u=["%","/","?",";","#"].concat(d),l=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=i(17673);function v(e,t,i){if(e&&r.isObject(e)&&e instanceof a)return e;var s=new a;return s.parse(e,t,i),s}a.prototype.parse=function(e,t,i){if(!r.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),o=-1!==a&&a<e.indexOf("#")?"?":"#",c=e.split(o);c[0]=c[0].replace(/\\/g,"/");var v=e=c.join(o);if(v=v.trim(),!i&&1===e.split("#").length){var w=h.exec(v);if(w)return this.path=v,this.href=v,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var k=n.exec(v);if(k){var _=(k=k[0]).toLowerCase();this.protocol=_,v=v.substr(k.length)}if(i||k||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===v.substr(0,2);!S||k&&g[k]||(v=v.substr(2),this.slashes=!0)}if(!g[k]&&(S||k&&!y[k])){for(var O,M,T=-1,x=0;x<l.length;x++)-1!==(I=v.indexOf(l[x]))&&(-1===T||I<T)&&(T=I);for(-1!==(M=-1===T?v.lastIndexOf("@"):v.lastIndexOf("@",T))&&(O=v.slice(0,M),v=v.slice(M+1),this.auth=decodeURIComponent(O)),T=-1,x=0;x<u.length;x++){var I;-1!==(I=v.indexOf(u[x]))&&(-1===T||I<T)&&(T=I)}-1===T&&(T=v.length),this.host=v.slice(0,T),v=v.slice(T),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var C=this.hostname.split(/\./),N=(x=0,C.length);x<N;x++){var E=C[x];if(E&&!E.match(f)){for(var P="",B=0,R=E.length;B<R;B++)E.charCodeAt(B)>127?P+="x":P+=E[B];if(!P.match(f)){var V=C.slice(0,x),L=C.slice(x+1),D=E.match(p);D&&(V.push(D[1]),L.unshift(D[2])),L.length&&(v="/"+L.join(".")+v),this.hostname=V.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=s.toASCII(this.hostname));var q=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+q,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!m[_])for(x=0,N=d.length;x<N;x++){var F=d[x];if(-1!==v.indexOf(F)){var j=encodeURIComponent(F);j===F&&(j=escape(F)),v=v.split(F).join(j)}}var U=v.indexOf("#");-1!==U&&(this.hash=v.substr(U),v=v.slice(0,U));var H=v.indexOf("?");if(-1!==H?(this.search=v.substr(H),this.query=v.substr(H+1),t&&(this.query=b.parse(this.query)),v=v.slice(0,H)):t&&(this.search="",this.query={}),v&&(this.pathname=v),y[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){q=this.pathname||"";var z=this.search||"";this.path=q+z}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",s=this.hash||"",a=!1,n="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(n=b.stringify(this.query));var o=this.search||n&&"?"+n||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==a?(a="//"+(a||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):a||(a=""),s&&"#"!==s.charAt(0)&&(s="#"+s),o&&"?"!==o.charAt(0)&&(o="?"+o),t+a+(i=i.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(o=o.replace("#","%23"))+s},a.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(r.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var i=new a,s=Object.keys(this),n=0;n<s.length;n++){var o=s[n];i[o]=this[o]}if(i.hash=e.hash,""===e.href)return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var h=Object.keys(e),c=0;c<h.length;c++){var d=h[c];"protocol"!==d&&(i[d]=e[d])}return y[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!y[e.protocol]){for(var u=Object.keys(e),l=0;l<u.length;l++){var f=u[l];i[f]=e[f]}return i.href=i.format(),i}if(i.protocol=e.protocol,e.host||g[e.protocol])i.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var m=i.pathname||"",b=i.search||"";i.path=m+b}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var v=i.pathname&&"/"===i.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),k=w||v||i.host&&e.pathname,_=k,S=i.pathname&&i.pathname.split("/")||[],O=(p=e.pathname&&e.pathname.split("/")||[],i.protocol&&!y[i.protocol]);if(O&&(i.hostname="",i.port=null,i.host&&(""===S[0]?S[0]=i.host:S.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),k=k&&(""===p[0]||""===S[0])),w)i.host=e.host||""===e.host?e.host:i.host,i.hostname=e.hostname||""===e.hostname?e.hostname:i.hostname,i.search=e.search,i.query=e.query,S=p;else if(p.length)S||(S=[]),S.pop(),S=S.concat(p),i.search=e.search,i.query=e.query;else if(!r.isNullOrUndefined(e.search))return O&&(i.hostname=i.host=S.shift(),(A=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=A.shift(),i.host=i.hostname=A.shift())),i.search=e.search,i.query=e.query,r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!S.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var M=S.slice(-1)[0],T=(i.host||e.host||S.length>1)&&("."===M||".."===M)||""===M,x=0,I=S.length;I>=0;I--)"."===(M=S[I])?S.splice(I,1):".."===M?(S.splice(I,1),x++):x&&(S.splice(I,1),x--);if(!k&&!_)for(;x--;x)S.unshift("..");!k||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),T&&"/"!==S.join("/").substr(-1)&&S.push("");var A,C=""===S[0]||S[0]&&"/"===S[0].charAt(0);return O&&(i.hostname=i.host=C?"":S.length?S.shift():"",(A=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=A.shift(),i.host=i.hostname=A.shift())),(k=k||i.host&&S.length)&&!C&&S.unshift(""),S.length?i.pathname=S.join("/"):(i.pathname=null,i.path=null),r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i},a.prototype.parseHost=function(){var e=this.host,t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},62502:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},94927:(e,t,i)=>{var s=i(25108);function r(e){try{if(!i.g.localStorage)return!1}catch(e){return!1}var t=i.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var i=!1;return function(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?s.trace(t):s.warn(t),i=!0}return e.apply(this,arguments)}}},20384:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},55955:(e,t,i)=>{"use strict";var s=i(82584),r=i(48662),a=i(86430),n=i(85692);function o(e){return e.call.bind(e)}var h="undefined"!=typeof BigInt,c="undefined"!=typeof Symbol,d=o(Object.prototype.toString),u=o(Number.prototype.valueOf),l=o(String.prototype.valueOf),f=o(Boolean.prototype.valueOf);if(h)var p=o(BigInt.prototype.valueOf);if(c)var m=o(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function y(e){return"[object Map]"===d(e)}function b(e){return"[object Set]"===d(e)}function v(e){return"[object WeakMap]"===d(e)}function w(e){return"[object WeakSet]"===d(e)}function k(e){return"[object ArrayBuffer]"===d(e)}function _(e){return"undefined"!=typeof ArrayBuffer&&(k.working?k(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===d(e)}function O(e){return"undefined"!=typeof DataView&&(S.working?S(e):e instanceof DataView)}function M(e){return"[object SharedArrayBuffer]"===d(e)}function T(e){return"undefined"!=typeof SharedArrayBuffer&&(M.working?M(e):e instanceof SharedArrayBuffer)}function x(e){return g(e,u)}function I(e){return g(e,l)}function A(e){return g(e,f)}function C(e){return h&&g(e,p)}function N(e){return c&&g(e,m)}t.isArgumentsObject=s,t.isGeneratorFunction=r,t.isTypedArray=n,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):n(e)||O(e)},t.isUint8Array=function(e){return"Uint8Array"===a(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===a(e)},t.isUint16Array=function(e){return"Uint16Array"===a(e)},t.isUint32Array=function(e){return"Uint32Array"===a(e)},t.isInt8Array=function(e){return"Int8Array"===a(e)},t.isInt16Array=function(e){return"Int16Array"===a(e)},t.isInt32Array=function(e){return"Int32Array"===a(e)},t.isFloat32Array=function(e){return"Float32Array"===a(e)},t.isFloat64Array=function(e){return"Float64Array"===a(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===a(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===a(e)},y.working="undefined"!=typeof Map&&y(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(y.working?y(e):e instanceof Map)},b.working="undefined"!=typeof Set&&b(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(b.working?b(e):e instanceof Set)},v.working="undefined"!=typeof WeakMap&&v(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(v.working?v(e):e instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),t.isWeakSet=function(e){return w(e)},k.working="undefined"!=typeof ArrayBuffer&&k(new ArrayBuffer),t.isArrayBuffer=_,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=O,M.working="undefined"!=typeof SharedArrayBuffer&&M(new SharedArrayBuffer),t.isSharedArrayBuffer=T,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===d(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===d(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===d(e)},t.isGeneratorObject=function(e){return"[object Generator]"===d(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===d(e)},t.isNumberObject=x,t.isStringObject=I,t.isBooleanObject=A,t.isBigIntObject=C,t.isSymbolObject=N,t.isBoxedPrimitive=function(e){return x(e)||I(e)||A(e)||C(e)||N(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(_(e)||T(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},89539:(e,t,i)=>{var s=i(34155),r=i(25108),a=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),i={},s=0;s<t.length;s++)i[t[s]]=Object.getOwnPropertyDescriptor(e,t[s]);return i},n=/%[sdj%]/g;t.format=function(e){if(!w(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(d(arguments[i]));return t.join(" ")}i=1;for(var s=arguments,r=s.length,a=String(e).replace(n,(function(e){if("%%"===e)return"%";if(i>=r)return e;switch(e){case"%s":return String(s[i++]);case"%d":return Number(s[i++]);case"%j":try{return JSON.stringify(s[i++])}catch(e){return"[Circular]"}default:return e}})),o=s[i];i<r;o=s[++i])b(o)||!S(o)?a+=" "+o:a+=" "+d(o);return a},t.deprecate=function(e,i){if(void 0!==s&&!0===s.noDeprecation)return e;if(void 0===s)return function(){return t.deprecate(e,i).apply(this,arguments)};var a=!1;return function(){if(!a){if(s.throwDeprecation)throw new Error(i);s.traceDeprecation?r.trace(i):r.error(i),a=!0}return e.apply(this,arguments)}};var o={},h=/^$/;if(s.env.NODE_DEBUG){var c=s.env.NODE_DEBUG;c=c.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),h=new RegExp("^"+c+"$","i")}function d(e,i){var s={seen:[],stylize:l};return arguments.length>=3&&(s.depth=arguments[2]),arguments.length>=4&&(s.colors=arguments[3]),y(i)?s.showHidden=i:i&&t._extend(s,i),k(s.showHidden)&&(s.showHidden=!1),k(s.depth)&&(s.depth=2),k(s.colors)&&(s.colors=!1),k(s.customInspect)&&(s.customInspect=!0),s.colors&&(s.stylize=u),f(s,e,s.depth)}function u(e,t){var i=d.styles[t];return i?"["+d.colors[i][0]+"m"+e+"["+d.colors[i][1]+"m":e}function l(e,t){return e}function f(e,i,s){if(e.customInspect&&i&&T(i.inspect)&&i.inspect!==t.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(s,e);return w(r)||(r=f(e,r,s)),r}var a=function(e,t){if(k(t))return e.stylize("undefined","undefined");if(w(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}return v(t)?e.stylize(""+t,"number"):y(t)?e.stylize(""+t,"boolean"):b(t)?e.stylize("null","null"):void 0}(e,i);if(a)return a;var n=Object.keys(i),o=function(e){var t={};return e.forEach((function(e,i){t[e]=!0})),t}(n);if(e.showHidden&&(n=Object.getOwnPropertyNames(i)),M(i)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return p(i);if(0===n.length){if(T(i)){var h=i.name?": "+i.name:"";return e.stylize("[Function"+h+"]","special")}if(_(i))return e.stylize(RegExp.prototype.toString.call(i),"regexp");if(O(i))return e.stylize(Date.prototype.toString.call(i),"date");if(M(i))return p(i)}var c,d="",u=!1,l=["{","}"];return g(i)&&(u=!0,l=["[","]"]),T(i)&&(d=" [Function"+(i.name?": "+i.name:"")+"]"),_(i)&&(d=" "+RegExp.prototype.toString.call(i)),O(i)&&(d=" "+Date.prototype.toUTCString.call(i)),M(i)&&(d=" "+p(i)),0!==n.length||u&&0!=i.length?s<0?_(i)?e.stylize(RegExp.prototype.toString.call(i),"regexp"):e.stylize("[Object]","special"):(e.seen.push(i),c=u?function(e,t,i,s,r){for(var a=[],n=0,o=t.length;n<o;++n)N(t,String(n))?a.push(m(e,t,i,s,String(n),!0)):a.push("");return r.forEach((function(r){r.match(/^\d+$/)||a.push(m(e,t,i,s,r,!0))})),a}(e,i,s,o,n):n.map((function(t){return m(e,i,s,o,t,u)})),e.seen.pop(),function(e,t,i){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]}(c,d,l)):l[0]+d+l[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,i,s,r,a){var n,o,h;if((h=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?o=h.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):h.set&&(o=e.stylize("[Setter]","special")),N(s,r)||(n="["+r+"]"),o||(e.seen.indexOf(h.value)<0?(o=b(i)?f(e,h.value,null):f(e,h.value,i-1)).indexOf("\n")>-1&&(o=a?o.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+o.split("\n").map((function(e){return"   "+e})).join("\n")):o=e.stylize("[Circular]","special")),k(n)){if(a&&r.match(/^\d+$/))return o;(n=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=e.stylize(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=e.stylize(n,"string"))}return n+": "+o}function g(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function b(e){return null===e}function v(e){return"number"==typeof e}function w(e){return"string"==typeof e}function k(e){return void 0===e}function _(e){return S(e)&&"[object RegExp]"===x(e)}function S(e){return"object"==typeof e&&null!==e}function O(e){return S(e)&&"[object Date]"===x(e)}function M(e){return S(e)&&("[object Error]"===x(e)||e instanceof Error)}function T(e){return"function"==typeof e}function x(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!o[e])if(h.test(e)){var i=s.pid;o[e]=function(){var s=t.format.apply(t,arguments);r.error("%s %d: %s",e,i,s)}}else o[e]=function(){};return o[e]},t.inspect=d,d.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},d.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=i(55955),t.isArray=g,t.isBoolean=y,t.isNull=b,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=w,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=k,t.isRegExp=_,t.types.isRegExp=_,t.isObject=S,t.isDate=O,t.types.isDate=O,t.isError=M,t.types.isNativeError=M,t.isFunction=T,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=i(20384);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date,t=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){r.log("%s - %s",C(),t.format.apply(t,arguments))},t.inherits=i(35717),t._extend=function(e,t){if(!t||!S(t))return e;for(var i=Object.keys(t),s=i.length;s--;)e[i[s]]=t[i[s]];return e};var E="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var i=new Error("Promise was rejected with a falsy value");i.reason=e,e=i}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(E&&e[E]){var t;if("function"!=typeof(t=e[E]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,E,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,i,s=new Promise((function(e,s){t=e,i=s})),r=[],a=0;a<arguments.length;a++)r.push(arguments[a]);r.push((function(e,s){e?i(e):t(s)}));try{e.apply(this,r)}catch(e){i(e)}return s}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),E&&Object.defineProperty(t,E,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,a(e))},t.promisify.custom=E,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);var r=t.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var a=this,n=function(){return r.apply(a,arguments)};e.apply(this,t).then((function(e){s.nextTick(n.bind(null,null,e))}),(function(e){s.nextTick(P.bind(null,e,n))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,a(e)),t}},86430:(e,t,i)=>{"use strict";var s=i(49804),r=i(16314),a=i(21924),n=a("Object.prototype.toString"),o=i(41405)()&&"symbol"==typeof Symbol.toStringTag,h=r(),c=a("String.prototype.slice"),d={},u=i(94079),l=Object.getPrototypeOf;o&&u&&l&&s(h,(function(e){if("function"==typeof i.g[e]){var t=new i.g[e];if(!(Symbol.toStringTag in t))throw new EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var s=l(t),r=u(s,Symbol.toStringTag);if(!r){var a=l(s);r=u(a,Symbol.toStringTag)}d[e]=r.get}}));var f=i(85692);e.exports=function(e){return!!f(e)&&(o?function(e){var t=!1;return s(d,(function(i,s){if(!t)try{var r=i.call(e);r===s&&(t=r)}catch(e){}})),t}(e):c(n(e),8,-1))}},47529:e=>{e.exports=function(){for(var e={},i=0;i<arguments.length;i++){var s=arguments[i];for(var r in s)t.call(s,r)&&(e[r]=s[r])}return e};var t=Object.prototype.hasOwnProperty},80950:()=>{},46601:()=>{},89214:()=>{},8623:()=>{},7748:()=>{},85568:()=>{},56619:()=>{},77108:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var a=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";function e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function t(e,t,i,s,r,a,n){try{var o=e[a](n),h=o.value}catch(e){return void i(e)}o.done?t(h):Promise.resolve(h).then(s,r)}function s(e){return function(){var i=this,s=arguments;return new Promise((function(r,a){var n=e.apply(i,s);function o(e){t(n,r,a,o,h,"next",e)}function h(e){t(n,r,a,o,h,"throw",e)}o(void 0)}))}}var r=i(87757),a=i.n(r),n=i(25108);const o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,h=Object.keys,c=Array.isArray;function d(e,t){return"object"!=typeof t||h(t).forEach((function(i){e[i]=t[i]})),e}"undefined"==typeof Promise||o.Promise||(o.Promise=Promise);const u=Object.getPrototypeOf,l={}.hasOwnProperty;function f(e,t){return l.call(e,t)}function p(e,t){"function"==typeof t&&(t=t(u(e))),("undefined"==typeof Reflect?h:Reflect.ownKeys)(t).forEach((i=>{g(e,i,t[i])}))}const m=Object.defineProperty;function g(e,t,i,s){m(e,t,d(i&&f(i,"get")&&"function"==typeof i.get?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},s))}function y(e){return{from:function(t){return e.prototype=Object.create(t.prototype),g(e.prototype,"constructor",e),{extend:p.bind(null,e.prototype)}}}}const b=Object.getOwnPropertyDescriptor;function v(e,t){let i;return b(e,t)||(i=u(e))&&v(i,t)}const w=[].slice;function k(e,t,i){return w.call(e,t,i)}function _(e,t){return t(e)}function S(e){if(!e)throw new Error("Assertion Failed")}function O(e){o.setImmediate?setImmediate(e):setTimeout(e,0)}function M(e,t){return e.reduce(((e,i,s)=>{var r=t(i,s);return r&&(e[r[0]]=r[1]),e}),{})}function T(e,t){if(f(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var i=[],s=0,r=t.length;s<r;++s){var a=T(e,t[s]);i.push(a)}return i}var n=t.indexOf(".");if(-1!==n){var o=e[t.substr(0,n)];return void 0===o?void 0:T(o,t.substr(n+1))}}function x(e,t,i){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){S("string"!=typeof i&&"length"in i);for(var s=0,r=t.length;s<r;++s)x(e,t[s],i[s])}else{var a=t.indexOf(".");if(-1!==a){var n=t.substr(0,a),o=t.substr(a+1);if(""===o)void 0===i?c(e)&&!isNaN(parseInt(n))?e.splice(n,1):delete e[n]:e[n]=i;else{var h=e[n];h||(h=e[n]={}),x(h,o,i)}}else void 0===i?c(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=i}}function I(e){var t={};for(var i in e)f(e,i)&&(t[i]=e[i]);return t}const A=[].concat;function C(e){return A.apply([],e)}const N="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(C([8,16,32,64].map((e=>["Int","Uint","Float"].map((t=>t+e+"Array")))))).filter((e=>o[e])),E=N.map((e=>o[e]));M(N,(e=>[e,!0]));let P=null;function B(e){P="undefined"!=typeof WeakMap&&new WeakMap;const t=R(e);return P=null,t}function R(e){if(!e||"object"!=typeof e)return e;let t=P&&P.get(e);if(t)return t;if(c(e)){t=[],P&&P.set(e,t);for(var i=0,s=e.length;i<s;++i)t.push(R(e[i]))}else if(E.indexOf(e.constructor)>=0)t=e;else{const i=u(e);for(var r in t=i===Object.prototype?{}:Object.create(i),P&&P.set(e,t),e)f(e,r)&&(t[r]=R(e[r]))}return t}const{toString:V}={};function L(e){return V.call(e).slice(8,-1)}const D="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",q="symbol"==typeof D?function(e){var t;return null!=e&&(t=e[D])&&t.apply(e)}:function(){return null},G={};function F(e){var t,i,s,r;if(1===arguments.length){if(c(e))return e.slice();if(this===G&&"string"==typeof e)return[e];if(r=q(e)){for(i=[];!(s=r.next()).done;)i.push(s.value);return i}if(null==e)return[e];if("number"==typeof(t=e.length)){for(i=new Array(t);t--;)i[t]=e[t];return i}return[e]}for(t=arguments.length,i=new Array(t);t--;)i[t]=arguments[t];return i}const j="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var U="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function H(e,t){U=e,z=t}var z=()=>!0;const K=!new Error("").stack;function W(){if(K)try{throw W.arguments,new Error}catch(e){return e}return new Error}function X(e,t){var i=e.stack;return i?(t=t||0,0===i.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),i.split("\n").slice(t).filter(z).map((e=>"\n"+e)).join("")):""}var Z=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Y=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Z),Q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function J(e,t){this._e=W(),this.name=e,this.message=t}function $(e,t){return e+". Errors: "+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,i)=>i.indexOf(e)===t)).join("\n")}function ee(e,t,i,s){this._e=W(),this.failures=t,this.failedKeys=s,this.successCount=i,this.message=$(e,t)}function te(e,t){this._e=W(),this.name="BulkError",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=$(e,t)}y(J).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+X(this._e,2))}},toString:function(){return this.name+": "+this.message}}),y(ee).from(J),y(te).from(J);var ie=Y.reduce(((e,t)=>(e[t]=t+"Error",e)),{});const se=J;var re=Y.reduce(((e,t)=>{var i=t+"Error";function s(e,s){this._e=W(),this.name=i,e?"string"==typeof e?(this.message=`${e}${s?"\n "+s:""}`,this.inner=s||null):"object"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=Q[t]||i,this.inner=null)}return y(s).from(se),e[t]=s,e}),{});re.Syntax=SyntaxError,re.Type=TypeError,re.Range=RangeError;var ae=Z.reduce(((e,t)=>(e[t+"Error"]=re[t],e)),{}),ne=Y.reduce(((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=re[t]),e)),{});function oe(){}function he(e){return e}function ce(e,t){return null==e||e===he?t:function(i){return t(e(i))}}function de(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ue(e,t){return e===oe?t:function(){var i=e.apply(this,arguments);void 0!==i&&(arguments[0]=i);var s=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?de(s,this.onsuccess):s),r&&(this.onerror=this.onerror?de(r,this.onerror):r),void 0!==a?a:i}}function le(e,t){return e===oe?t:function(){e.apply(this,arguments);var i=this.onsuccess,s=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?de(i,this.onsuccess):i),s&&(this.onerror=this.onerror?de(s,this.onerror):s)}}function fe(e,t){return e===oe?t:function(i){var s=e.apply(this,arguments);d(i,s);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var n=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?de(r,this.onsuccess):r),a&&(this.onerror=this.onerror?de(a,this.onerror):a),void 0===s?void 0===n?void 0:n:d(s,n)}}function pe(e,t){return e===oe?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function me(e,t){return e===oe?t:function(){var i=e.apply(this,arguments);if(i&&"function"==typeof i.then){for(var s=this,r=arguments.length,a=new Array(r);r--;)a[r]=arguments[r];return i.then((function(){return t.apply(s,a)}))}return t.apply(this,arguments)}}ne.ModifyError=ee,ne.DexieError=J,ne.BulkError=te;var ge={};const[ye,be,ve]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,u(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,u(t),e]})(),we=be&&be.then,ke=ye&&ye.constructor,_e=!!ve;var Se=!1,Oe=ve?()=>{ve.then(We)}:o.setImmediate?setImmediate.bind(null,We):o.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver((()=>{We(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(We,0)},Me=function(e,t){Be.push([e,t]),xe&&(Oe(),xe=!1)},Te=!0,xe=!0,Ie=[],Ae=[],Ce=null,Ne=he,Ee={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:bt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{bt(e[0],e[1])}catch(e){}}))}},Pe=Ee,Be=[],Re=0,Ve=[];function Le(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=oe,this._lib=!1;var t=this._PSD=Pe;if(U&&(this._stackHolder=W(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==ge)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Fe(this,this._value))}this._state=null,this._value=null,++t.ref,Ge(this,e)}const De={get:function(){var e=Pe,t=st;function i(i,s){var r=!e.global&&(e!==Pe||t!==st);const a=r&&!ot();var n=new Le(((t,n)=>{Ue(this,new qe(mt(i,e,r,a),mt(s,e,r,a),t,n,e))}));return U&&Ke(n,this),n}return i.prototype=ge,i},set:function(e){g(this,"then",e&&e.prototype===ge?De:{get:function(){return e},set:De.set})}};function qe(e,t,i,s,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=i,this.reject=s,this.psd=r}function Ge(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var i=e._lib&&Xe();t&&"function"==typeof t.then?Ge(e,((e,i)=>{t instanceof Le?t._then(e,i):t.then(e,i)})):(e._state=!0,e._value=t,je(e)),i&&Ze()}}),Fe.bind(null,e))}catch(t){Fe(e,t)}}function Fe(e,t){if(Ae.push(t),null===e._state){var i=e._lib&&Xe();t=Ne(t),e._state=!1,e._value=t,U&&null!==t&&"object"==typeof t&&!t._promise&&function(i,s,r){try{(()=>{var i=v(t,"stack");t._promise=e,g(t,"stack",{get:()=>Se?i&&(i.get?i.get.apply(t):i.value):e.stack})}).apply(null,void 0)}catch(e){}}(),function(e){Ie.some((t=>t._value===e._value))||Ie.push(e)}(e),je(e),i&&Ze()}}function je(e){var t=e._listeners;e._listeners=[];for(var i=0,s=t.length;i<s;++i)Ue(e,t[i]);var r=e._PSD;--r.ref||r.finalize(),0===Re&&(++Re,Me((()=>{0==--Re&&Ye()}),[]))}function Ue(e,t){if(null!==e._state){var i=e._state?t.onFulfilled:t.onRejected;if(null===i)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Re,Me(He,[i,e,t])}else e._listeners.push(t)}function He(e,t,i){try{Ce=t;var s,r=t._value;t._state?s=e(r):(Ae.length&&(Ae=[]),s=e(r),-1===Ae.indexOf(r)&&function(e){for(var t=Ie.length;t;)if(Ie[--t]._value===e._value)return void Ie.splice(t,1)}(t)),i.resolve(s)}catch(e){i.reject(e)}finally{Ce=null,0==--Re&&Ye(),--i.psd.ref||i.psd.finalize()}}function ze(e,t,i){if(t.length===i)return t;var s="";if(!1===e._state){var r,a,n=e._value;null!=n?(r=n.name||"Error",a=n.message||n,s=X(n,0)):(r=n,a=""),t.push(r+(a?": "+a:"")+s)}return U&&((s=X(e._stackHolder,2))&&-1===t.indexOf(s)&&t.push(s),e._prev&&ze(e._prev,t,i)),t}function Ke(e,t){var i=t?t._numPrev+1:0;i<100&&(e._prev=t,e._numPrev=i)}function We(){Xe()&&Ze()}function Xe(){var e=Te;return Te=!1,xe=!1,e}function Ze(){var e,t,i;do{for(;Be.length>0;)for(e=Be,Be=[],i=e.length,t=0;t<i;++t){var s=e[t];s[0].apply(null,s[1])}}while(Be.length>0);Te=!0,xe=!0}function Ye(){var e=Ie;Ie=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Ve.slice(0),i=t.length;i;)t[--i]()}function Qe(e){return new Le(ge,!1,e)}function Je(e,t){var i=Pe;return function(){var s=Xe(),r=Pe;try{return ut(i,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{ut(r,!1),s&&Ze()}}}p(Le.prototype,{then:De,_then:function(e,t){Ue(this,new qe(null,null,e,t,Pe))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],i=arguments[1];return"function"==typeof t?this.then(null,(e=>e instanceof t?i(e):Qe(e))):this.then(null,(e=>e&&e.name===t?i(e):Qe(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),Qe(t))))},stack:{get:function(){if(this._stack)return this._stack;try{Se=!0;var e=ze(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Se=!1}}},timeout:function(e,t){return e<1/0?new Le(((i,s)=>{var r=setTimeout((()=>s(new re.Timeout(t))),e);this.then(i,s).finally(clearTimeout.bind(null,r))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&g(Le.prototype,Symbol.toStringTag,"Dexie.Promise"),Ee.env=lt(),p(Le,{all:function(){var e=F.apply(null,arguments).map(ht);return new Le((function(t,i){0===e.length&&t([]);var s=e.length;e.forEach(((r,a)=>Le.resolve(r).then((i=>{e[a]=i,--s||t(e)}),i)))}))},resolve:e=>{if(e instanceof Le)return e;if(e&&"function"==typeof e.then)return new Le(((t,i)=>{e.then(t,i)}));var t=new Le(ge,!0,e);return Ke(t,Ce),t},reject:Qe,race:function(){var e=F.apply(null,arguments).map(ht);return new Le(((t,i)=>{e.map((e=>Le.resolve(e).then(t,i)))}))},PSD:{get:()=>Pe,set:e=>Pe=e},totalEchoes:{get:()=>st},newPSD:at,usePSD:ft,scheduler:{get:()=>Me,set:e=>{Me=e}},rejectionMapper:{get:()=>Ne,set:e=>{Ne=e}},follow:(e,t)=>new Le(((i,s)=>at(((t,i)=>{var s=Pe;s.unhandleds=[],s.onunhandled=i,s.finalize=de((function(){!function(e){Ve.push((function t(){e(),Ve.splice(Ve.indexOf(t),1)})),++Re,Me((()=>{0==--Re&&Ye()}),[])}((()=>{0===this.unhandleds.length?t():i(this.unhandleds[0])}))}),s.finalize),e()}),t,i,s)))}),ke&&(ke.allSettled&&g(Le,"allSettled",(function(){const e=F.apply(null,arguments).map(ht);return new Le((t=>{0===e.length&&t([]);let i=e.length;const s=new Array(i);e.forEach(((e,r)=>Le.resolve(e).then((e=>s[r]={status:"fulfilled",value:e}),(e=>s[r]={status:"rejected",reason:e})).then((()=>--i||t(s)))))}))})),ke.any&&"undefined"!=typeof AggregateError&&g(Le,"any",(function(){const e=F.apply(null,arguments).map(ht);return new Le(((t,i)=>{0===e.length&&i(new AggregateError([]));let s=e.length;const r=new Array(s);e.forEach(((e,a)=>Le.resolve(e).then((e=>t(e)),(e=>{r[a]=e,--s||i(new AggregateError(r))}))))}))})));const $e={awaits:0,echoes:0,id:0};var et=0,tt=[],it=0,st=0,rt=0;function at(e,t,i,s){var r=Pe,a=Object.create(r);a.parent=r,a.ref=0,a.global=!1,a.id=++rt;var n=Ee.env;a.env=_e?{Promise:Le,PromiseProp:{value:Le,configurable:!0,writable:!0},all:Le.all,race:Le.race,allSettled:Le.allSettled,any:Le.any,resolve:Le.resolve,reject:Le.reject,nthen:gt(n.nthen,a),gthen:gt(n.gthen,a)}:{},t&&d(a,t),++r.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=ft(a,e,i,s);return 0===a.ref&&a.finalize(),o}function nt(){return $e.id||($e.id=++et),++$e.awaits,$e.echoes+=100,$e.id}function ot(){return!!$e.awaits&&(0==--$e.awaits&&($e.id=0),$e.echoes=100*$e.awaits,!0)}function ht(e){return $e.echoes&&e&&e.constructor===ke?(nt(),e.then((e=>(ot(),e)),(e=>(ot(),vt(e))))):e}function ct(e){++st,$e.echoes&&0!=--$e.echoes||($e.echoes=$e.id=0),tt.push(Pe),ut(e,!0)}function dt(){var e=tt[tt.length-1];tt.pop(),ut(e,!1)}function ut(e,t){var i=Pe;if((t?!$e.echoes||it++&&e===Pe:!it||--it&&e===Pe)||pt(t?ct.bind(null,e):dt),e!==Pe&&(Pe=e,i===Ee&&(Ee.env=lt()),_e)){var s=Ee.env.Promise,r=e.env;be.then=r.nthen,s.prototype.then=r.gthen,(i.global||e.global)&&(Object.defineProperty(o,"Promise",r.PromiseProp),s.all=r.all,s.race=r.race,s.resolve=r.resolve,s.reject=r.reject,r.allSettled&&(s.allSettled=r.allSettled),r.any&&(s.any=r.any))}}function lt(){var e=o.Promise;return _e?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:be.then,gthen:e.prototype.then}:{}}function ft(e,t,i,s,r){var a=Pe;try{return ut(e,!0),t(i,s,r)}finally{ut(a,!1)}}function pt(e){we.call(ye,e)}function mt(e,t,i,s){return"function"!=typeof e?e:function(){var r=Pe;i&&nt(),ut(t,!0);try{return e.apply(this,arguments)}finally{ut(r,!1),s&&pt(ot)}}}function gt(e,t){return function(i,s){return e.call(this,mt(i,t),mt(s,t))}}-1===(""+we).indexOf("[native code]")&&(nt=ot=oe);const yt="unhandledrejection";function bt(e,t){var i;try{i=t.onuncatched(e)}catch(e){}if(!1!==i)try{var s,r={promise:t,reason:e};if(o.document&&document.createEvent?((s=document.createEvent("Event")).initEvent(yt,!0,!0),d(s,r)):o.CustomEvent&&d(s=new CustomEvent(yt,{detail:r}),r),s&&o.dispatchEvent&&(dispatchEvent(s),!o.PromiseRejectionEvent&&o.onunhandledrejection))try{o.onunhandledrejection(s)}catch(e){}U&&s&&!s.defaultPrevented&&n.warn(`Unhandled rejection: ${e.stack||e}`)}catch(e){}}var vt=Le.reject;function wt(e,t,i,s){if(e.idbdb&&(e._state.openComplete||Pe.letThrough||e._vip)){var r=e._createTransaction(t,i,e._dbSchema);try{r.create()}catch(e){return vt(e)}return r._promise(t,((e,t)=>at((()=>(Pe.trans=r,s(e,t,r)))))).then((e=>r._completion.then((()=>e))))}if(e._state.openComplete)return vt(new re.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return vt(new re.DatabaseClosed);e.open().catch(oe)}return e._state.dbReadyPromise.then((()=>wt(e,t,i,s)))}const kt="3.2.0",_t=String.fromCharCode(65535),St=-1/0,Ot="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Mt="String expected.",Tt=[],xt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),It=xt,At=xt,Ct=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),Nt="__dbnames",Et="readonly",Pt="readwrite";function Bt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const Rt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Vt(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=B(t))[e],t)}class Lt{_trans(e,t,i){const s=this._tx||Pe.trans,r=this.name;function a(e,i,s){if(!s.schema[r])throw new re.NotFound("Table "+r+" not part of transaction");return t(s.idbtrans,s)}const n=Xe();try{return s&&s.db===this.db?s===Pe.trans?s._promise(e,a,i):at((()=>s._promise(e,a,i)),{trans:s,transless:Pe.transless||Pe}):wt(this.db,e,[this.name],a)}finally{n&&Ze()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(c(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const t=h(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const i=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&t.every((t=>e.keyPath.indexOf(t)>=0))&&e.keyPath.every((e=>t.indexOf(e)>=0))))[0];if(i&&this.db._maxKey!==_t)return this.where(i.name).equals(i.keyPath.map((t=>e[t])));!i&&U&&n.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:s}=this.schema,r=this.db._deps.indexedDB;function a(e,t){try{return 0===r.cmp(e,t)}catch(e){return!1}}const[o,d]=t.reduce((([t,i],r)=>{const n=s[r],o=e[r];return[t||n,t||!n?Bt(i,n&&n.multi?e=>{const t=T(e,r);return c(t)&&t.some((e=>a(o,e)))}:e=>a(o,T(e,r))):i]}),[null,null]);return o?this.where(o.name).equals(e[o.keyPath]).filter(d):i?this.filter(d):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,c(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const i=Object.create(e.prototype);for(var s in t)if(f(t,s))try{i[s]=t[s]}catch(e){}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass((function(e){d(this,e)}))}add(e,t){const{auto:i,keyPath:s}=this.schema.primKey;let r=e;return s&&i&&(r=Vt(s)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[r]}))).then((e=>e.numFailures?Le.reject(e.failures[0]):e.lastResult)).then((t=>{if(s)try{x(e,s,t)}catch(e){}return t}))}update(e,t){if("object"!=typeof e||c(e))return this.where(":id").equals(e).modify(t);{const i=T(e,this.schema.primKey.keyPath);if(void 0===i)return vt(new re.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?h(t).forEach((i=>{x(e,i,t[i])})):t(e,{value:e,primKey:i})}catch(e){}return this.where(":id").equals(i).modify(t)}}put(e,t){const{auto:i,keyPath:s}=this.schema.primKey;let r=e;return s&&i&&(r=Vt(s)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"put",values:[r],keys:null!=t?[t]:null}))).then((e=>e.numFailures?Le.reject(e.failures[0]):e.lastResult)).then((t=>{if(s)try{x(e,s,t)}catch(e){}return t}))}delete(e){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:[e]}))).then((e=>e.numFailures?Le.reject(e.failures[0]):void 0))}clear(){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"deleteRange",range:Rt}))).then((e=>e.numFailures?Le.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans("readonly",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,i){const s=Array.isArray(t)?t:void 0,r=(i=i||(s?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:i,keyPath:a}=this.schema.primKey;if(a&&s)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");const n=e.length;let o=a&&i?e.map(Vt(a)):e;return this.core.mutate({trans:t,type:"add",keys:s,values:o,wantResults:r}).then((({numFailures:e,results:t,lastResult:i,failures:s})=>{if(0===e)return r?t:i;throw new te(`${this.name}.bulkAdd(): ${e} of ${n} operations failed`,s)}))}))}bulkPut(e,t,i){const s=Array.isArray(t)?t:void 0,r=(i=i||(s?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:i,keyPath:a}=this.schema.primKey;if(a&&s)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");const n=e.length;let o=a&&i?e.map(Vt(a)):e;return this.core.mutate({trans:t,type:"put",keys:s,values:o,wantResults:r}).then((({numFailures:e,results:t,lastResult:i,failures:s})=>{if(0===e)return r?t:i;throw new te(`${this.name}.bulkPut(): ${e} of ${n} operations failed`,s)}))}))}bulkDelete(e){const t=e.length;return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:e}))).then((({numFailures:e,lastResult:i,failures:s})=>{if(0===e)return i;throw new te(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,s)}))}}function Dt(e){var t={},i=function(i,s){if(s){for(var r=arguments.length,a=new Array(r-1);--r;)a[r-1]=arguments[r];return t[i].subscribe.apply(null,a),e}if("string"==typeof i)return t[i]};i.addEventType=a;for(var s=1,r=arguments.length;s<r;++s)a(arguments[s]);return i;function a(e,s,r){if("object"==typeof e)return n(e);s||(s=pe),r||(r=oe);var a={subscribers:[],fire:r,subscribe:function(e){-1===a.subscribers.indexOf(e)&&(a.subscribers.push(e),a.fire=s(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter((function(t){return t!==e})),a.fire=a.subscribers.reduce(s,r)}};return t[e]=i[e]=a,a}function n(e){h(e).forEach((function(t){var i=e[t];if(c(i))a(t,e[t][0],e[t][1]);else{if("asap"!==i)throw new re.InvalidArgument("Invalid event config");var s=a(t,he,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];s.subscribers.forEach((function(e){O((function(){e.apply(null,t)}))}))}))}}))}}function qt(e,t){return y(t).from({prototype:e}),t}function Gt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ft(e,t){e.filter=Bt(e.filter,t)}function jt(e,t,i){var s=e.replayFilter;e.replayFilter=s?()=>Bt(s(),t()):t,e.justLimit=i&&!s}function Ut(e,t){if(e.isPrimKey)return t.primaryKey;const i=t.getIndexByKeyPath(e.index);if(!i)throw new re.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return i}function Ht(e,t,i){const s=Ut(e,t.schema);return t.openCursor({trans:i,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:s,range:e.range}})}function zt(e,t,i,s){const r=e.replayFilter?Bt(e.filter,e.replayFilter()):e.filter;if(e.or){const a={},n=(e,i,s)=>{if(!r||r(i,s,(e=>i.stop(e)),(e=>i.fail(e)))){var n=i.primaryKey,o=""+n;"[object ArrayBuffer]"===o&&(o=""+new Uint8Array(n)),f(a,o)||(a[o]=!0,t(e,i,s))}};return Promise.all([e.or._iterate(n,i),Kt(Ht(e,s,i),e.algorithm,n,!e.keysOnly&&e.valueMapper)])}return Kt(Ht(e,s,i),Bt(e.algorithm,r),t,!e.keysOnly&&e.valueMapper)}function Kt(e,t,i,s){var r=Je(s?(e,t,r)=>i(s(e),t,r):i);return e.then((e=>{if(e)return e.start((()=>{var i=()=>e.continue();t&&!t(e,(e=>i=e),(t=>{e.stop(t),i=oe}),(t=>{e.fail(t),i=oe}))||r(e.value,e,(e=>i=e)),i()}))}))}function Wt(e,t){try{const i=Xt(e),s=Xt(t);if(i!==s)return"Array"===i?1:"Array"===s?-1:"binary"===i?1:"binary"===s?-1:"string"===i?1:"string"===s?-1:"Date"===i?1:"Date"!==s?NaN:-1;switch(i){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){const i=e.length,s=t.length,r=i<s?i:s;for(let i=0;i<r;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return i===s?0:i<s?-1:1}(Zt(e),Zt(t));case"Array":return function(e,t){const i=e.length,s=t.length,r=i<s?i:s;for(let i=0;i<r;++i){const s=Wt(e[i],t[i]);if(0!==s)return s}return i===s?0:i<s?-1:1}(e,t)}}catch(e){}return NaN}function Xt(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const i=L(e);return"ArrayBuffer"===i?"binary":i}function Zt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Yt{_read(e,t){var i=this._ctx;return i.error?i.table._trans(null,vt.bind(null,i.error)):i.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,vt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=Bt(t.algorithm,e)}_iterate(e,t){return zt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return e&&d(i,e),t._ctx=i,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((i=>zt(t,e,i,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,i=t.table.core;if(Gt(t,!0))return i.count({trans:e,query:{index:Ut(t,i.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var s=0;return zt(t,(()=>(++s,!1)),e,i).then((()=>s))})).then(e)}sortBy(e,t){const i=e.split(".").reverse(),s=i[0],r=i.length-1;function a(e,t){return t?a(e[i[t]],t-1):e[s]}var n="next"===this._ctx.dir?1:-1;function o(e,t){var i=a(e,r),s=a(t,r);return i<s?-n:i>s?n:0}return this.toArray((function(e){return e.sort(o)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if("next"===t.dir&&Gt(t,!0)&&t.limit>0){const{valueMapper:i}=t,s=Ut(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:s,range:t.range}}).then((({result:e})=>i?e.map(i):e))}{const i=[];return zt(t,(e=>i.push(e)),e,t.table.core).then((()=>i))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Gt(t)?jt(t,(()=>{var t=e;return(e,i)=>0===t||(1===t?(--t,!1):(i((()=>{e.advance(t),t=0})),!1))})):jt(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),jt(this._ctx,(()=>{var t=e;return function(e,i,s){return--t<=0&&i(s),t>=0}}),!0),this}until(e,t){return Ft(this._ctx,(function(i,s,r){return!e(i.value)||(s(r),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,i;return Ft(this._ctx,(function(t){return e(t.value)})),t=this._ctx,i=e,t.isMatch=Bt(t.isMatch,i),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,i){e(i.key,i)}))}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,i){e(i.primaryKey,i)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var i=[];return this.each((function(e,t){i.push(t.key)})).then((function(){return i})).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&Gt(t,!0)&&t.limit>0)return this._read((e=>{var i=Ut(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:i,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var i=[];return this.each((function(e,t){i.push(t.primaryKey)})).then((function(){return i})).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var i={};return Ft(this._ctx,(function(e){var t=e.primaryKey.toString(),s=f(i,t);return i[t]=!0,!s})),this}modify(e){var t=this._ctx;return this._write((i=>{var s;if("function"==typeof e)s=e;else{var r=h(e),a=r.length;s=function(t){for(var i=!1,s=0;s<a;++s){var n=r[s],o=e[n];T(t,n)!==o&&(x(t,n,o),i=!0)}return i}}const n=t.table.core,{outbound:o,extractKey:c}=n.schema.primaryKey,d=this.db._options.modifyChunkSize||200,u=[];let l=0;const f=[],p=(e,t)=>{const{failures:i,numFailures:s}=t;l+=e-s;for(let e of h(i))u.push(i[e])};return this.clone().primaryKeys().then((r=>{const a=h=>{const u=Math.min(d,r.length-h);return n.getMany({trans:i,keys:r.slice(h,h+u),cache:"immutable"}).then((l=>{const f=[],m=[],g=o?[]:null,y=[];for(let e=0;e<u;++e){const t=l[e],i={value:B(t),primKey:r[h+e]};!1!==s.call(i,i.value,i)&&(null==i.value?y.push(r[h+e]):o||0===Wt(c(t),c(i.value))?(m.push(i.value),o&&g.push(r[h+e])):(y.push(r[h+e]),f.push(i.value)))}const b=Gt(t)&&t.limit===1/0&&("function"!=typeof e||e===Qt)&&{index:t.index,range:t.range};return Promise.resolve(f.length>0&&n.mutate({trans:i,type:"add",values:f}).then((e=>{for(let t in e.failures)y.splice(parseInt(t),1);p(f.length,e)}))).then((()=>(m.length>0||b&&"object"==typeof e)&&n.mutate({trans:i,type:"put",keys:g,values:m,criteria:b,changeSpec:"function"!=typeof e&&e}).then((e=>p(m.length,e))))).then((()=>(y.length>0||b&&e===Qt)&&n.mutate({trans:i,type:"delete",keys:y,criteria:b}).then((e=>p(y.length,e))))).then((()=>r.length>h+u&&a(h+d)))}))};return a(0).then((()=>{if(u.length>0)throw new ee("Error modifying one or more objects",u,l,f);return r.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Gt(e)&&(e.isPrimKey&&!At||3===t.type)?this._write((i=>{const{primaryKey:s}=e.table.core.schema,r=t;return e.table.core.count({trans:i,query:{index:s,range:r}}).then((t=>e.table.core.mutate({trans:i,type:"deleteRange",range:r}).then((({failures:e,lastResult:i,results:s,numFailures:r})=>{if(r)throw new ee("Could not delete some values",Object.keys(e).map((t=>e[t])),t-r);return t-r}))))})):this.modify(Qt)}}const Qt=(e,t)=>t.value=null;function Jt(e,t){return e<t?-1:e===t?0:1}function $t(e,t){return e>t?-1:e===t?0:1}function ei(e,t,i){var s=e instanceof ni?new e.Collection(e):e;return s._ctx.error=i?new i(t):new TypeError(t),s}function ti(e){return new e.Collection(e,(()=>ai(""))).limit(0)}function ii(e,t,i,s,r,a){for(var n=Math.min(e.length,s.length),o=-1,h=0;h<n;++h){var c=t[h];if(c!==s[h])return r(e[h],i[h])<0?e.substr(0,h)+i[h]+i.substr(h+1):r(e[h],s[h])<0?e.substr(0,h)+s[h]+i.substr(h+1):o>=0?e.substr(0,o)+t[o]+i.substr(o+1):null;r(e[h],c)<0&&(o=h)}return n<s.length&&"next"===a?e+i.substr(e.length):n<e.length&&"prev"===a?e.substr(0,i.length):o<0?null:e.substr(0,o)+s[o]+i.substr(o+1)}function si(e,t,i,s){var r,a,n,o,h,c,d,u=i.length;if(!i.every((e=>"string"==typeof e)))return ei(e,Mt);function l(e){r=function(e){return"next"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),a=function(e){return"next"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),n="next"===e?Jt:$t;var t=i.map((function(e){return{lower:a(e),upper:r(e)}})).sort((function(e,t){return n(e.lower,t.lower)}));o=t.map((function(e){return e.upper})),h=t.map((function(e){return e.lower})),c=e,d="next"===e?"":s}l("next");var f=new e.Collection(e,(()=>ri(o[0],h[u-1]+s)));f._ondirectionchange=function(e){l(e)};var p=0;return f._addAlgorithm((function(e,i,s){var r=e.key;if("string"!=typeof r)return!1;var l=a(r);if(t(l,h,p))return!0;for(var f=null,m=p;m<u;++m){var g=ii(r,l,o[m],h[m],n,c);null===g&&null===f?p=m+1:(null===f||n(f,g)>0)&&(f=g)}return i(null!==f?function(){e.continue(f+d)}:s),!1})),f}function ri(e,t,i,s){return{type:2,lower:e,upper:t,lowerOpen:i,upperOpen:s}}function ai(e){return{type:1,lower:e,upper:e}}class ni{get Collection(){return this._ctx.table.db.Collection}between(e,t,i,s){i=!1!==i,s=!0===s;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(i||s)&&(!i||!s)?ti(this):new this.Collection(this,(()=>ri(e,t,!i,!s)))}catch(e){return ei(this,Ot)}}equals(e){return null==e?ei(this,Ot):new this.Collection(this,(()=>ai(e)))}above(e){return null==e?ei(this,Ot):new this.Collection(this,(()=>ri(e,void 0,!0)))}aboveOrEqual(e){return null==e?ei(this,Ot):new this.Collection(this,(()=>ri(e,void 0,!1)))}below(e){return null==e?ei(this,Ot):new this.Collection(this,(()=>ri(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?ei(this,Ot):new this.Collection(this,(()=>ri(void 0,e)))}startsWith(e){return"string"!=typeof e?ei(this,Mt):this.between(e,e+_t,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):si(this,((e,t)=>0===e.indexOf(t[0])),[e],_t)}equalsIgnoreCase(e){return si(this,((e,t)=>e===t[0]),[e],"")}anyOfIgnoreCase(){var e=F.apply(G,arguments);return 0===e.length?ti(this):si(this,((e,t)=>-1!==t.indexOf(e)),e,"")}startsWithAnyOfIgnoreCase(){var e=F.apply(G,arguments);return 0===e.length?ti(this):si(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,_t)}anyOf(){const e=F.apply(G,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return ei(this,Ot)}if(0===e.length)return ti(this);const i=new this.Collection(this,(()=>ri(e[0],e[e.length-1])));i._ondirectionchange=i=>{t="next"===i?this._ascending:this._descending,e.sort(t)};let s=0;return i._addAlgorithm(((i,r,a)=>{const n=i.key;for(;t(n,e[s])>0;)if(++s,s===e.length)return r(a),!1;return 0===t(n,e[s])||(r((()=>{i.continue(e[s])})),!1)})),i}notEqual(e){return this.inAnyRange([[St,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=F.apply(G,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return ei(this,Ot)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[St,t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const i=this._cmp,s=this._ascending,r=this._descending,a=this._min,n=this._max;if(0===e.length)return ti(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&s(e[0],e[1])<=0)))return ei(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument);const o=!t||!1!==t.includeLowers,h=t&&!0===t.includeUppers;let c,d=s;function u(e,t){return d(e[0],t[0])}try{c=e.reduce((function(e,t){let s=0,r=e.length;for(;s<r;++s){const r=e[s];if(i(t[0],r[1])<0&&i(t[1],r[0])>0){r[0]=a(r[0],t[0]),r[1]=n(r[1],t[1]);break}}return s===r&&e.push(t),e}),[]),c.sort(u)}catch(e){return ei(this,Ot)}let l=0;const f=h?e=>s(e,c[l][1])>0:e=>s(e,c[l][1])>=0,p=o?e=>r(e,c[l][0])>0:e=>r(e,c[l][0])>=0;let m=f;const g=new this.Collection(this,(()=>ri(c[0][0],c[c.length-1][1],!o,!h)));return g._ondirectionchange=e=>{"next"===e?(m=f,d=s):(m=p,d=r),c.sort(u)},g._addAlgorithm(((e,t,i)=>{for(var r=e.key;m(r);)if(++l,l===c.length)return t(i),!1;return!!function(e){return!f(e)&&!p(e)}(r)||(0===this._cmp(r,c[l][1])||0===this._cmp(r,c[l][0])||t((()=>{d===s?e.continue(c[l][0]):e.continue(c[l][1])})),!1)})),g}startsWithAnyOf(){const e=F.apply(G,arguments);return e.every((e=>"string"==typeof e))?0===e.length?ti(this):this.inAnyRange(e.map((e=>[e,e+_t]))):ei(this,"startsWithAnyOf() only works with strings")}}function oi(e){return Je((function(t){return hi(t),e(t.target.error),!1}))}function hi(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const ci="storagemutated",di="x-storagemutated-1",ui=Dt(null,ci);class li{_lock(){return S(!Pe.global),++this._reculock,1!==this._reculock||Pe.global||(Pe.lockOwnerFor=this),this}_unlock(){if(S(!Pe.global),0==--this._reculock)for(Pe.global||(Pe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ft(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&Pe.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,i=this.db._state.dbOpenError;if(S(!this.idbtrans),!e&&!t)switch(i&&i.name){case"DatabaseClosedError":throw new re.DatabaseClosed(i);case"MissingAPIError":throw new re.MissingAPI(i.message,i);default:throw new re.OpenFailed(i)}if(!this.active)throw new re.TransactionInactive;return S(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Je((t=>{hi(t),this._reject(e.error)})),e.onabort=Je((t=>{hi(t),this.active&&this._reject(new re.Abort(e.error)),this.active=!1,this.on("abort").fire(t)})),e.oncomplete=Je((()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&ui.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,i){if("readwrite"===e&&"readwrite"!==this.mode)return vt(new re.ReadOnly("Transaction is readonly"));if(!this.active)return vt(new re.TransactionInactive);if(this._locked())return new Le(((s,r)=>{this._blockedFuncs.push([()=>{this._promise(e,t,i).then(s,r)},Pe])}));if(i)return at((()=>{var e=new Le(((e,i)=>{this._lock();const s=t(e,i,this);s&&s.then&&s.then(e,i)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var s=new Le(((e,i)=>{var s=t(e,i,this);s&&s.then&&s.then(e,i)}));return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const i=Le.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>i));else{t._waitingFor=i,t._waitingQueue=[];var s=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(s.get(-1/0).onsuccess=e)}()}var r=t._waitingFor;return new Le(((e,s)=>{i.then((i=>t._waitingQueue.push(Je(e.bind(null,i)))),(e=>t._waitingQueue.push(Je(s.bind(null,e))))).finally((()=>{t._waitingFor===r&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new re.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(f(t,e))return t[e];const i=this.schema[e];if(!i)throw new re.NotFound("Table "+e+" not part of transaction");const s=new this.db.Table(e,i,this);return s.core=this.db.core.table(e),t[e]=s,s}}function fi(e,t,i,s,r,a,n){return{name:e,keyPath:t,unique:i,multi:s,auto:r,compound:a,src:(i&&!n?"&":"")+(s?"*":"")+(r?"++":"")+pi(t)}}function pi(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function mi(e,t,i){return{name:e,primKey:t,indexes:i,mappedClass:null,idxByName:M(i,(e=>[e.name,e]))}}let gi=e=>{try{return e.only([[]]),gi=()=>[[]],[[]]}catch(e){return gi=()=>_t,_t}};function yi(e){return null==e?()=>{}:"string"==typeof e?function(e){return 1===e.split(".").length?t=>t[e]:t=>T(t,e)}(e):t=>T(t,e)}function bi(e){return[].slice.call(e)}let vi=0;function wi(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function ki(e,t,i){function s(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:i,upper:s,lowerOpen:r,upperOpen:a}=e;return void 0===i?void 0===s?null:t.upperBound(s,!!a):void 0===s?t.lowerBound(i,!!r):t.bound(i,s,!!r,!!a)}const{schema:r,hasGetAll:a}=function(e,t){const i=bi(e.objectStoreNames);return{schema:{name:e.name,tables:i.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:i}=e,s=c(t),r=null==t,a={},n={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:r,compound:s,keyPath:t,autoIncrement:i,unique:!0,extractKey:yi(t)},indexes:bi(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:i,multiEntry:s,keyPath:r}=e,n={name:t,compound:c(r),keyPath:r,unique:i,multiEntry:s,extractKey:yi(r)};return a[wi(r)]=n,n})),getIndexByKeyPath:e=>a[wi(e)]};return a[":id"]=n.primaryKey,null!=t&&(a[wi(t)]=n.primaryKey),n}))},hasGetAll:i.length>0&&"getAll"in t.objectStore(i[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,i),n=r.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:i,keys:r,values:a,range:n}){return new Promise(((o,h)=>{o=Je(o);const c=e.objectStore(t),d=null==c.keyPath,u="put"===i||"add"===i;if(!u&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);const{length:l}=r||a||{length:1};if(r&&a&&r.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===l)return o({numFailures:0,failures:{},results:[],lastResult:void 0});let f;const p=[],m=[];let g=0;const y=e=>{++g,hi(e)};if("deleteRange"===i){if(4===n.type)return o({numFailures:g,failures:m,results:[],lastResult:void 0});3===n.type?p.push(f=c.clear()):p.push(f=c.delete(s(n)))}else{const[e,t]=u?d?[a,r]:[a,null]:[r,null];if(u)for(let s=0;s<l;++s)p.push(f=t&&void 0!==t[s]?c[i](e[s],t[s]):c[i](e[s])),f.onerror=y;else for(let t=0;t<l;++t)p.push(f=c[i](e[t])),f.onerror=y}const b=e=>{const t=e.target.result;p.forEach(((e,t)=>null!=e.error&&(m[t]=e.error))),o({numFailures:g,failures:m,results:"delete"===i?r:p.map((e=>e.result)),lastResult:t})};f.onerror=e=>{y(e),b(e)},f.onsuccess=b}))},getMany:({trans:e,keys:i})=>new Promise(((s,r)=>{s=Je(s);const a=e.objectStore(t),n=i.length,o=new Array(n);let h,c=0,d=0;const u=e=>{const t=e.target;o[t._pos]=t.result,++d===c&&s(o)},l=oi(r);for(let e=0;e<n;++e)null!=i[e]&&(h=a.get(i[e]),h._pos=e,h.onsuccess=u,h.onerror=l,++c);0===c&&s(o)})),get:({trans:e,key:i})=>new Promise(((s,r)=>{s=Je(s);const a=e.objectStore(t).get(i);a.onsuccess=e=>s(e.target.result),a.onerror=oi(r)})),query:function(e){return i=>new Promise(((r,a)=>{r=Je(r);const{trans:n,values:o,limit:h,query:c}=i,d=h===1/0?void 0:h,{index:u,range:l}=c,f=n.objectStore(t),p=u.isPrimaryKey?f:f.index(u.name),m=s(l);if(0===h)return r({result:[]});if(e){const e=o?p.getAll(m,d):p.getAllKeys(m,d);e.onsuccess=e=>r({result:e.target.result}),e.onerror=oi(a)}else{let e=0;const t=o||!("openKeyCursor"in p)?p.openCursor(m):p.openKeyCursor(m),i=[];t.onsuccess=s=>{const a=t.result;return a?(i.push(o?a.value:a.primaryKey),++e===h?r({result:i}):void a.continue()):r({result:i})},t.onerror=oi(a)}}))}(a),openCursor:function({trans:e,values:i,query:r,reverse:a,unique:n}){return new Promise(((o,h)=>{o=Je(o);const{index:c,range:d}=r,u=e.objectStore(t),l=c.isPrimaryKey?u:u.index(c.name),f=a?n?"prevunique":"prev":n?"nextunique":"next",p=i||!("openKeyCursor"in l)?l.openCursor(s(d),f):l.openKeyCursor(s(d),f);p.onerror=oi(h),p.onsuccess=Je((t=>{const i=p.result;if(!i)return void o(null);i.___id=++vi,i.done=!1;const s=i.continue.bind(i);let r=i.continuePrimaryKey;r&&(r=r.bind(i));const a=i.advance.bind(i),n=()=>{throw new Error("Cursor not stopped")};i.trans=e,i.stop=i.continue=i.continuePrimaryKey=i.advance=()=>{throw new Error("Cursor not started")},i.fail=Je(h),i.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},i.start=e=>{const t=new Promise(((e,t)=>{e=Je(e),p.onerror=oi(t),i.fail=t,i.stop=t=>{i.stop=i.continue=i.continuePrimaryKey=i.advance=n,e(t)}})),o=()=>{if(p.result)try{e()}catch(e){i.fail(e)}else i.done=!0,i.start=()=>{throw new Error("Cursor behind last entry")},i.stop()};return p.onsuccess=Je((e=>{p.onsuccess=o,o()})),i.continue=s,i.continuePrimaryKey=r,i.advance=a,o(),t},o(i)}),h)}))},count({query:e,trans:i}){const{index:r,range:a}=e;return new Promise(((e,n)=>{const o=i.objectStore(t),h=r.isPrimaryKey?o:o.index(r.name),c=s(a),d=c?h.count(c):h.count();d.onsuccess=Je((t=>e(t.target.result))),d.onerror=oi(n)}))}}}(e))),o={};return n.forEach((e=>o[e.name]=e)),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(!o[e])throw new Error(`Table '${e}' not found`);return o[e]},MIN_KEY:-1/0,MAX_KEY:gi(t),schema:r}}function _i({_novip:e},t){const i=t.db,s=function(e,t,{IDBKeyRange:i,indexedDB:s},r){return{dbcore:function(e,t){return t.reduce(((e,{create:t})=>({...e,...t(e)})),e)}(ki(t,i,r),e.dbcore)}}(e._middlewares,i,e._deps,t);e.core=s.dbcore,e.tables.forEach((t=>{const i=t.name;e.core.schema.tables.some((e=>e.name===i))&&(t.core=e.core.table(i),e[i]instanceof e.Table&&(e[i].core=t.core))}))}function Si({_novip:e},t,i,s){i.forEach((i=>{const r=s[i];t.forEach((t=>{const s=v(t,i);(!s||"value"in s&&void 0===s.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?g(t,i,{get(){return this.table(i)},set(e){m(this,i,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[i]=new e.Table(i,r))}))}))}function Oi({_novip:e},t){t.forEach((t=>{for(let i in t)t[i]instanceof e.Table&&delete t[i]}))}function Mi(e,t){return e._cfg.version-t._cfg.version}function Ti(e,t){const i={del:[],add:[],change:[]};let s;for(s in e)t[s]||i.del.push(s);for(s in t){const r=e[s],a=t[s];if(r){const e={name:s,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(r.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||r.primKey.auto!==a.primKey.auto&&!xt)e.recreate=!0,i.change.push(e);else{const t=r.idxByName,s=a.idxByName;let n;for(n in t)s[n]||e.del.push(n);for(n in s){const i=t[n],r=s[n];i?i.src!==r.src&&e.change.push(r):e.add.push(r)}(e.del.length>0||e.add.length>0||e.change.length>0)&&i.change.push(e)}}else i.add.push([s,a])}return i}function xi(e,t,i,s){const r=e.db.createObjectStore(t,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return s.forEach((e=>Ii(r,e))),r}function Ii(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Ai(e,t,i){const s={};return k(t.objectStoreNames,0).forEach((e=>{const t=i.objectStore(e);let r=t.keyPath;const a=fi(pi(r),r||"",!1,!1,!!t.autoIncrement,r&&"string"!=typeof r,!0),n=[];for(let e=0;e<t.indexNames.length;++e){const i=t.index(t.indexNames[e]);r=i.keyPath;var o=fi(i.name,r,!!i.unique,!!i.multiEntry,!1,r&&"string"!=typeof r,!1);n.push(o)}s[e]=mi(e,a,n)})),s}function Ci({_novip:e},t,i){const s=i.db.objectStoreNames;for(let r=0;r<s.length;++r){const a=s[r],n=i.objectStore(a);e._hasGetAll="getAll"in n;for(let e=0;e<n.indexNames.length;++e){const i=n.indexNames[e],s=n.index(i).keyPath,r="string"==typeof s?s:"["+k(s).join("+")+"]";if(t[a]){const e=t[a].idxByName[r];e&&(e.name=i,delete t[a].idxByName[r],t[a].idxByName[i]=e)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class Ni{_parseStoresSpec(e,t){h(e).forEach((i=>{if(null!==e[i]){var s=e[i].split(",").map(((e,t)=>{const i=(e=e.trim()).replace(/([&*]|\+\+)/g,""),s=/^\[/.test(i)?i.match(/^\[(.*)\]$/)[1].split("+"):i;return fi(i,s||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),c(s),0===t)})),r=s.shift();if(r.multi)throw new re.Schema("Primary key cannot be multi-valued");s.forEach((e=>{if(e.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")})),t[i]=mi(i,r,s)}}))}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,e):e;const i=t._versions,s={};let r={};return i.forEach((e=>{d(s,e._cfg.storesSource),r=e._cfg.dbschema={},e._parseStoresSpec(s,r)})),t._dbSchema=r,Oi(t,[t._allTables,t,t.Transaction.prototype]),Si(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],h(r),r),t._storeNames=h(r),this}upgrade(e){return this._cfg.contentUpgrade=me(this._cfg.contentUpgrade||oe,e),this}}function Ei(e,t){let i=e._dbNamesDB;return i||(i=e._dbNamesDB=new es(Nt,{addons:[],indexedDB:e,IDBKeyRange:t}),i.version(1).stores({dbnames:"name"})),i.table("dbnames")}function Pi(e){return e&&"function"==typeof e.databases}function Bi(e){return at((function(){return Pe.letThrough=!0,e()}))}function Ri(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var i=function(){return indexedDB.databases().finally(t)};e=setInterval(i,100),i()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function Vi(e){const t=e._state,{indexedDB:i}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((()=>t.dbOpenError?vt(t.dbOpenError):e));U&&(t.openCanceller._stackHolder=W()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const s=t.openCanceller;function r(){if(t.openCanceller!==s)throw new re.DatabaseClosed("db.open() was cancelled")}let a=t.dbReadyResolve,o=null,c=!1;return Le.race([s,("undefined"==typeof navigator?Le.resolve():Ri()).then((()=>new Le(((s,a)=>{if(r(),!i)throw new re.MissingAPI;const d=e.name,u=t.autoSchema?i.open(d):i.open(d,Math.round(10*e.verno));if(!u)throw new re.MissingAPI;u.onerror=oi(a),u.onblocked=Je(e._fireOnBlocked),u.onupgradeneeded=Je((s=>{if(o=u.transaction,t.autoSchema&&!e._options.allowEmptyDB){u.onerror=hi,o.abort(),u.result.close();const e=i.deleteDatabase(d);e.onsuccess=e.onerror=Je((()=>{a(new re.NoSuchDatabase(`Database ${d} doesnt exist`))}))}else{o.onerror=oi(a);var r=s.oldVersion>Math.pow(2,62)?0:s.oldVersion;c=r<1,e._novip.idbdb=u.result,function(e,t,i,s){const r=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,r);a.create(i),a._completion.catch(s);const n=a._reject.bind(a),o=Pe.transless||Pe;at((()=>{Pe.trans=a,Pe.transless=o,0===t?(h(r).forEach((e=>{xi(i,e,r[e].primKey,r[e].indexes)})),_i(e,i),Le.follow((()=>e.on.populate.fire(a))).catch(n)):function({_novip:e},t,i,s){const r=[],a=e._versions;let n=e._dbSchema=Ai(0,e.idbdb,s),o=!1;return a.filter((e=>e._cfg.version>=t)).forEach((a=>{r.push((()=>{const r=n,c=a._cfg.dbschema;Ci(e,r,s),Ci(e,c,s),n=e._dbSchema=c;const d=Ti(r,c);d.add.forEach((e=>{xi(s,e[0],e[1].primKey,e[1].indexes)})),d.change.forEach((e=>{if(e.recreate)throw new re.Upgrade("Not yet support for changing primary key");{const t=s.objectStore(e.name);e.add.forEach((e=>Ii(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),Ii(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const u=a._cfg.contentUpgrade;if(u&&a._cfg.version>t){_i(e,s),i._memoizedTables={},o=!0;let t=I(c);d.del.forEach((e=>{t[e]=r[e]})),Oi(e,[e.Transaction.prototype]),Si(e,[e.Transaction.prototype],h(t),t),i.schema=t;const a=j(u);let n;a&&nt();const l=Le.follow((()=>{if(n=u(i),n&&a){var e=ot.bind(null,null);n.then(e,e)}}));return n&&"function"==typeof n.then?Le.resolve(n):l.then((()=>n))}})),r.push((t=>{o&&It||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((i=>null==e[i]&&t.db.deleteObjectStore(i)))}(a._cfg.dbschema,t),Oi(e,[e.Transaction.prototype]),Si(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),i.schema=e._dbSchema}))})),function e(){return r.length?Le.resolve(r.shift()(i.idbtrans)).then(e):Le.resolve()}().then((()=>{var e,t;t=s,h(e=n).forEach((i=>{t.db.objectStoreNames.contains(i)||xi(t,i,e[i].primKey,e[i].indexes)}))}))}(e,t,a,i).catch(n)}))}(e,r/10,o,a)}}),a),u.onsuccess=Je((()=>{o=null;const i=e._novip.idbdb=u.result,r=k(i.objectStoreNames);if(r.length>0)try{const s=i.transaction(1===(a=r).length?a[0]:a,"readonly");t.autoSchema?function({_novip:e},t,i){e.verno=t.version/10;const s=e._dbSchema=Ai(0,t,i);e._storeNames=k(t.objectStoreNames,0),Si(e,[e._allTables],h(s),s)}(e,i,s):(Ci(e,e._dbSchema,s),function(e,t){const i=Ti(Ai(0,e.idbdb,t),e._dbSchema);return!(i.add.length||i.change.some((e=>e.add.length||e.change.length)))}(e,s)||n.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),_i(e,s)}catch(e){}var a;Tt.push(e),i.onversionchange=Je((i=>{t.vcFired=!0,e.on("versionchange").fire(i)})),i.onclose=Je((t=>{e.on("close").fire(t)})),c&&function({indexedDB:e,IDBKeyRange:t},i){!Pi(e)&&i!==Nt&&Ei(e,t).put({name:i}).catch(oe)}(e._deps,d),s()}),a)}))))]).then((()=>(r(),t.onReadyBeingFired=[],Le.resolve(Bi((()=>e.on.ready.fire(e.vip)))).then((function i(){if(t.onReadyBeingFired.length>0){let s=t.onReadyBeingFired.reduce(me,oe);return t.onReadyBeingFired=[],Le.resolve(Bi((()=>s(e.vip)))).then(i)}}))))).finally((()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((()=>e)).catch((i=>{t.dbOpenError=i;try{o&&o.abort()}catch(e){}return s===t.openCanceller&&e._close(),vt(i)})).finally((()=>{t.openComplete=!0,a()}))}function Li(e){var t=t=>e.next(t),i=r(t),s=r((t=>e.throw(t)));function r(e){return t=>{var r=e(t),a=r.value;return r.done?a:a&&"function"==typeof a.then?a.then(i,s):c(a)?Promise.all(a).then(i,s):i(a)}}return r(t)()}function Di(e,t,i){var s=arguments.length;if(s<2)throw new re.InvalidArgument("Too few arguments");for(var r=new Array(s-1);--s;)r[s-1]=arguments[s];i=r.pop();var a=C(r);return[e,a,i]}function qi(e,t,i,s,r){return Le.resolve().then((()=>{const a=Pe.transless||Pe,n=e._createTransaction(t,i,e._dbSchema,s),o={trans:n,transless:a};s?n.idbtrans=s.idbtrans:n.create();const h=j(r);let c;h&&nt();const d=Le.follow((()=>{if(c=r.call(n,n),c)if(h){var e=ot.bind(null,null);c.then(e,e)}else"function"==typeof c.next&&"function"==typeof c.throw&&(c=Li(c))}),o);return(c&&"function"==typeof c.then?Le.resolve(c).then((e=>n.active?e:vt(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):d.then((()=>c))).then((e=>(s&&n._resolve(),n._completion.then((()=>e))))).catch((e=>(n._reject(e),vt(e))))}))}function Gi(e,t,i){const s=c(e)?e.slice():[e];for(let e=0;e<i;++e)s.push(t);return s}const Fi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const i=e.table(t),{schema:s}=i,r={},a=[];function n(e,t,i){const s=wi(e),o=r[s]=r[s]||[],h=null==e?0:"string"==typeof e?1:e.length,c=t>0,d={...i,isVirtual:c,keyTail:t,keyLength:h,extractKey:yi(e),unique:!c&&i.unique};return o.push(d),d.isPrimaryKey||a.push(d),h>1&&n(2===h?e[0]:e.slice(0,h-1),t+1,i),o.sort(((e,t)=>e.keyTail-t.keyTail)),d}const o=n(s.primaryKey.keyPath,0,s.primaryKey);r[":id"]=[o];for(const e of s.indexes)n(e.keyPath,0,e);function h(t){const i=t.query.index;return i.isVirtual?{...t,query:{index:i,range:(s=t.query.range,r=i.keyTail,{type:1===s.type?2:s.type,lower:Gi(s.lower,s.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:Gi(s.upper,s.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}:t;var s,r}return{...i,schema:{...s,primaryKey:o,indexes:a,getIndexByKeyPath:function(e){const t=r[wi(e)];return t&&t[0]}},count:e=>i.count(h(e)),query:e=>i.query(h(e)),openCursor(t){const{keyTail:s,isVirtual:r,keyLength:a}=t.query.index;return r?i.openCursor(h(t)).then((i=>i&&function(i){return Object.create(i,{continue:{value:function(r){null!=r?i.continue(Gi(r,t.reverse?e.MAX_KEY:e.MIN_KEY,s)):t.unique?i.continue(i.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,s)):i.continue()}},continuePrimaryKey:{value(t,r){i.continuePrimaryKey(Gi(t,e.MAX_KEY,s),r)}},primaryKey:{get:()=>i.primaryKey},key:{get(){const e=i.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:()=>i.value}})}(i))):i.openCursor(t)}}}}}};function ji(e,t,i,s){return i=i||{},s=s||"",h(e).forEach((r=>{if(f(t,r)){var a=e[r],n=t[r];if("object"==typeof a&&"object"==typeof n&&a&&n){const e=L(a);e!==L(n)?i[s+r]=t[r]:"Object"===e?ji(a,n,i,s+r+"."):a!==n&&(i[s+r]=t[r])}else a!==n&&(i[s+r]=t[r])}else i[s+r]=void 0})),h(t).forEach((r=>{f(e,r)||(i[s+r]=t[r])})),i}const Ui={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const i=e.table(t),{primaryKey:s}=i.schema;return{...i,mutate(e){const r=Pe.trans,{deleting:a,creating:n,updating:o}=r.table(t).hook;switch(e.type){case"add":if(n.fire===oe)break;return r._promise("readwrite",(()=>h(e)),!0);case"put":if(n.fire===oe&&o.fire===oe)break;return r._promise("readwrite",(()=>h(e)),!0);case"delete":if(a.fire===oe)break;return r._promise("readwrite",(()=>h(e)),!0);case"deleteRange":if(a.fire===oe)break;return r._promise("readwrite",(()=>function(e){return c(e.trans,e.range,1e4)}(e)),!0)}return i.mutate(e);function h(e){const t=Pe.trans,r=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(s,e);if(!r)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?{...e,keys:r}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,i){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:i,cache:"immutable"})}(i,e,r).then((h=>{const c=r.map(((i,r)=>{const c=h[r],d={onerror:null,onsuccess:null};if("delete"===e.type)a.fire.call(d,i,c,t);else if("add"===e.type||void 0===c){const a=n.fire.call(d,i,e.values[r],t);null==i&&null!=a&&(i=a,e.keys[r]=i,s.outbound||x(e.values[r],s.keyPath,i))}else{const s=ji(c,e.values[r]),a=o.fire.call(d,s,i,c,t);if(a){const t=e.values[r];Object.keys(a).forEach((e=>{f(t,e)?t[e]=a[e]:x(t,e,a[e])}))}}return d}));return i.mutate(e).then((({failures:t,results:i,numFailures:s,lastResult:a})=>{for(let s=0;s<r.length;++s){const a=i?i[s]:r[s],n=c[s];null==a?n.onerror&&n.onerror(t[s]):n.onsuccess&&n.onsuccess("put"===e.type&&h[s]?e.values[s]:a)}return{failures:t,results:i,numFailures:s,lastResult:a}})).catch((e=>(c.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function c(e,t,r){return i.query({trans:e,values:!1,query:{index:s,range:t},limit:r}).then((({result:i})=>h({type:"delete",keys:i,trans:e}).then((s=>s.numFailures>0?Promise.reject(s.failures[0]):i.length<r?{failures:[],numFailures:0,lastResult:void 0}:c(e,{...t,lower:i[i.length-1],lowerOpen:!0},r)))))}}}}})};function Hi(e,t,i){try{if(!t)return null;if(t.keys.length<e.length)return null;const s=[];for(let r=0,a=0;r<t.keys.length&&a<e.length;++r)0===Wt(t.keys[r],e[a])&&(s.push(i?B(t.values[r]):t.values[r]),++a);return s.length===e.length?s:null}catch(e){return null}}const zi={stack:"dbcore",level:-1,create:e=>({table:t=>{const i=e.table(t);return{...i,getMany:e=>{if(!e.cache)return i.getMany(e);const t=Hi(e.keys,e.trans._cache,"clone"===e.cache);return t?Le.resolve(t):i.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?B(t):t},t)))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),i.mutate(e))}}})};function Ki(e){return!("from"in e)}const Wi=function(e,t){if(!this){const t=new Wi;return e&&"d"in e&&d(t,e),t}d(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Xi(e,t,i){const s=Wt(t,i);if(isNaN(s))return;if(s>0)throw RangeError();if(Ki(e))return d(e,{from:t,to:i,d:1});const r=e.l,a=e.r;if(Wt(i,e.from)<0)return r?Xi(r,t,i):e.l={from:t,to:i,d:1,l:null,r:null},Qi(e);if(Wt(t,e.to)>0)return a?Xi(a,t,i):e.r={from:t,to:i,d:1,l:null,r:null},Qi(e);Wt(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),Wt(i,e.to)>0&&(e.to=i,e.r=null,e.d=e.l?e.l.d+1:1);const n=!e.r;r&&!e.l&&Zi(e,r),a&&n&&Zi(e,a)}function Zi(e,t){Ki(t)||function e(t,{from:i,to:s,l:r,r:a}){Xi(t,i,s),r&&e(t,r),a&&e(t,a)}(e,t)}function Yi(e){let t=Ki(e)?null:{s:0,n:e};return{next(e){const i=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,i)for(;t.n.l&&Wt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!i||Wt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Qi(e){var t,i;const s=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(i=e.l)||void 0===i?void 0:i.d)||0),r=s>1?"r":s<-1?"l":"";if(r){const t="r"===r?"l":"r",i={...e},s=e[r];e.from=s.from,e.to=s.to,e[r]=s[r],i[r]=s[t],e[t]=i,i.d=Ji(i)}e.d=Ji(e)}function Ji({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}p(Wi.prototype,{add(e){return Zi(this,e),this},addKey(e){return Xi(this,e,e),this},addKeys(e){return e.forEach((e=>Xi(this,e,e))),this},[D](){return Yi(this)}});const $i={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,i=new Wi(e.MIN_KEY,e.MAX_KEY);return{...e,table:s=>{const r=e.table(s),{schema:a}=r,{primaryKey:n}=a,{extractKey:o,outbound:d}=n,u={...r,mutate:e=>{const n=e.trans,o=n.mutatedParts||(n.mutatedParts={}),h=e=>{const i=`idb://${t}/${s}/${e}`;return o[i]||(o[i]=new Wi)},d=h(""),u=h(":dels"),{type:l}=e;let[f,p]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const m=e.trans._cache;return r.mutate(e).then((e=>{if(c(f)){"delete"!==l&&(f=e.results),d.addKeys(f);const t=Hi(f,m);t||"add"===l||u.addKeys(f),(t||p)&&function(e,t,i,s){t.indexes.forEach((function(t){const r=e(t.name||"");function a(e){return null!=e?t.extractKey(e):null}const n=e=>t.multiEntry&&c(e)?e.forEach((e=>r.addKey(e))):r.addKey(e);(i||s).forEach(((e,t)=>{const r=i&&a(i[t]),o=s&&a(s[t]);0!==Wt(r,o)&&(null!=r&&n(r),null!=o&&n(o))}))}))}(h,a,t,p)}else if(f){const e={from:f.lower,to:f.upper};u.add(e),d.add(e)}else d.add(i),u.add(i),a.indexes.forEach((e=>h(e.name).add(i)));return e}))}},l=({query:{index:t,range:i}})=>{var s,r;return[t,new Wi(null!==(s=i.lower)&&void 0!==s?s:e.MIN_KEY,null!==(r=i.upper)&&void 0!==r?r:e.MAX_KEY)]},f={get:e=>[n,new Wi(e.key)],getMany:e=>[n,(new Wi).addKeys(e.keys)],count:l,query:l,openCursor:l};return h(f).forEach((e=>{u[e]=function(a){const{subscr:n}=Pe;if(n){const h=e=>{const i=`idb://${t}/${s}/${e}`;return n[i]||(n[i]=new Wi)},c=h(""),u=h(":dels"),[l,p]=f[e](a);if(h(l.name||"").add(p),!l.isPrimaryKey){if("count"!==e){const t="query"===e&&d&&a.values&&r.query({...a,values:!1});return r[e].apply(this,arguments).then((i=>{if("query"===e){if(d&&a.values)return t.then((({result:e})=>(c.addKeys(e),i)));const e=a.values?i.result.map(o):i.result;a.values?c.addKeys(e):u.addKeys(e)}else if("openCursor"===e){const e=i,t=a.values;return e&&Object.create(e,{key:{get:()=>(u.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return u.addKey(t),t}},value:{get:()=>(t&&c.addKey(e.primaryKey),e.value)}})}return i}))}u.add(i)}}return r[e].apply(this,arguments)}})),u}}}};class es{constructor(e,t){this._middlewares={},this.verno=0;const i=es.dependencies;this._options=t={addons:es.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:s}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const r={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:oe,dbReadyPromise:null,cancelOpen:oe,openCanceller:null,autoSchema:!0};var a;r.dbReadyPromise=new Le((e=>{r.dbReadyResolve=e})),r.openCanceller=new Le(((e,t)=>{r.cancelOpen=t})),this._state=r,this.name=e,this.on=Dt(this,"populate","blocked","versionchange","close",{ready:[me,oe]}),this.on.ready.subscribe=_(this.on.ready.subscribe,(e=>(t,i)=>{es.vip((()=>{const s=this._state;if(s.openComplete)s.dbOpenError||Le.resolve().then(t),i&&e(t);else if(s.onReadyBeingFired)s.onReadyBeingFired.push(t),i&&e(t);else{e(t);const s=this;i||e((function e(){s.on.ready.unsubscribe(t),s.on.ready.unsubscribe(e)}))}}))})),this.Collection=(a=this,qt(Yt.prototype,(function(e,t){this.db=a;let i=Rt,s=null;if(t)try{i=t()}catch(e){s=e}const r=e._ctx,n=r.table,o=n.hook.reading.fire;this._ctx={table:n,index:r.index,isPrimKey:!r.index||n.schema.primKey.keyPath&&r.index===n.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:s,or:r.or,valueMapper:o!==he?o:null}}))),this.Table=function(e){return qt(Lt.prototype,(function(t,i,s){this.db=e,this._tx=s,this.name=t,this.schema=i,this.hook=e._allTables[t]?e._allTables[t].hook:Dt(null,{creating:[ue,oe],reading:[ce,he],updating:[fe,oe],deleting:[le,oe]})}))}(this),this.Transaction=function(e){return qt(li.prototype,(function(t,i,s,r,a){this.db=e,this.mode=t,this.storeNames=i,this.schema=s,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=Dt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Le(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),vt(e)}))}))}(this),this.Version=function(e){return qt(Ni.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return qt(ni.prototype,(function(t,i,s){this.db=e,this._ctx={table:t,index:":id"===i?null:i,or:s};const r=e._deps.indexedDB;if(!r)throw new re.MissingAPI;this._cmp=this._ascending=r.cmp.bind(r),this._descending=(e,t)=>r.cmp(t,e),this._max=(e,t)=>r.cmp(e,t)>0?e:t,this._min=(e,t)=>r.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(e=>{e.newVersion>0?n.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):n.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on("blocked",(e=>{!e.newVersion||e.newVersion<e.oldVersion?n.warn(`Dexie.delete('${this.name}') was blocked`):n.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)})),this._maxKey=gi(t.IDBKeyRange),this._createTransaction=(e,t,i,s)=>new this.Transaction(e,t,i,this._options.chromeTransactionDurability,s),this._fireOnBlocked=e=>{this.on("blocked").fire(e),Tt.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on("versionchange").fire(e)))},this.use(Fi),this.use(Ui),this.use($i),this.use(zi),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new re.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var i=t.filter((t=>t._cfg.version===e))[0];return i||(i=new this.Version(e),t.push(i),t.sort(Mi),i.stores({}),this._state.autoSchema=!1,i)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Pe.letThrough||this._vip)?e():new Le(((e,t)=>{if(this._state.openComplete)return t(new re.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new re.DatabaseClosed);this.open().catch(oe)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:i,name:s}){s&&this.unuse({stack:e,name:s});const r=this._middlewares[e]||(this._middlewares[e]=[]);return r.push({stack:e,create:t,level:null==i?10:i,name:s}),r.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:i}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>i?e.create!==i:!!t&&e.name!==t))),this}open(){return Vi(this)}_close(){const e=this._state,t=Tt.indexOf(this);if(t>=0&&Tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Le((t=>{e.dbReadyResolve=t})),e.openCanceller=new Le(((t,i)=>{e.cancelOpen=i}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new re.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new Le(((i,s)=>{const r=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=Je((()=>{!function({indexedDB:e,IDBKeyRange:t},i){!Pi(e)&&i!==Nt&&Ei(e,t).delete(i).catch(oe)}(this._deps,this.name),i()})),e.onerror=oi(s),e.onblocked=this._fireOnBlocked};if(e)throw new re.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(r):r()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return h(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=Di.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,i){let s=Pe.trans;s&&s.db===this&&-1===e.indexOf("!")||(s=null);const r=-1!==e.indexOf("?");let a,n;e=e.replace("!","").replace("?","");try{if(n=t.map((e=>{var t=e instanceof this.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===Et)a=Et;else{if("rw"!=e&&e!=Pt)throw new re.InvalidArgument("Invalid transaction mode: "+e);a=Pt}if(s){if(s.mode===Et&&a===Pt){if(!r)throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&n.forEach((e=>{if(s&&-1===s.storeNames.indexOf(e)){if(!r)throw new re.SubTransaction("Table "+e+" not included in parent transaction.");s=null}})),r&&s&&!s.active&&(s=null)}}catch(e){return s?s._promise(null,((t,i)=>{i(e)})):vt(e)}const o=qi.bind(null,this,a,n,s,i);return s?s._promise(a,o,"lock"):Pe.trans?ft(Pe.transless,(()=>this._whenReady(o))):this._whenReady(o)}table(e){if(!f(this._allTables,e))throw new re.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const ts="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class is{constructor(e){this._subscribe=e}subscribe(e,t,i){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:i})}[ts](){return this}}function ss(e,t){return h(t).forEach((i=>{Zi(e[i]||(e[i]=new Wi),t[i])})),e}let rs;try{rs={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(e){rs={indexedDB:null,IDBKeyRange:null}}const as=es;function ns(e){let t=os;try{os=!0,ui.storagemutated.fire(e)}finally{os=t}}p(as,{...ne,delete:e=>new as(e,{addons:[]}).delete(),exists:e=>new as(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return Pi(e)?Promise.resolve(e.databases()).then((e=>e.map((e=>e.name)).filter((e=>e!==Nt)))):Ei(e,t).toCollection().primaryKeys()}(as.dependencies).then(e)}catch(e){return vt(new re.MissingAPI)}},defineClass:()=>function(e){d(this,e)},ignoreTransaction:e=>Pe.trans?ft(Pe.transless,e):e(),vip:Bi,async:function(e){return function(){try{var t=Li(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Le.resolve(t)}catch(e){return vt(e)}}},spawn:function(e,t,i){try{var s=Li(e.apply(i,t||[]));return s&&"function"==typeof s.then?s:Le.resolve(s)}catch(e){return vt(e)}},currentTransaction:{get:()=>Pe.trans||null},waitFor:function(e,t){const i=Le.resolve("function"==typeof e?as.ignoreTransaction(e):e).timeout(t||6e4);return Pe.trans?Pe.trans.waitFor(i):i},Promise:Le,debug:{get:()=>U,set:e=>{H(e,"dexie"===e?()=>!0:Ct)}},derive:y,extend:d,props:p,override:_,Events:Dt,on:ui,liveQuery:function(e){return new is((t=>{const i=j(e);let s=!1,r={},a={};const n={get closed(){return s},unsubscribe:()=>{s=!0,ui.storagemutated.unsubscribe(u)}};t.start&&t.start(n);let o=!1,c=!1;function d(){return h(a).some((e=>r[e]&&function(e,t){const i=Yi(t);let s=i.next();if(s.done)return!1;let r=s.value;const a=Yi(e);let n=a.next(r.from),o=n.value;for(;!s.done&&!n.done;){if(Wt(o.from,r.to)<=0&&Wt(o.to,r.from)>=0)return!0;Wt(r.from,o.from)<0?r=(s=i.next(o.from)).value:o=(n=a.next(r.from)).value}return!1}(r[e],a[e])))}const u=e=>{ss(r,e),d()&&l()},l=()=>{if(o||s)return;r={};const h={},f=function(t){i&&nt();const s=()=>at(e,{subscr:t,trans:null}),r=Pe.trans?ft(Pe.transless,s):s();return i&&r.then(ot,ot),r}(h);c||(ui(ci,u),c=!0),o=!0,Promise.resolve(f).then((e=>{o=!1,s||(d()?l():(r={},a=h,t.next&&t.next(e)))}),(e=>{o=!1,t.error&&t.error(e),n.unsubscribe()}))};return l(),n}))},extendObservabilitySet:ss,getByKeyPath:T,setByKeyPath:x,delByKeyPath:function(e,t){"string"==typeof t?x(e,t,void 0):"length"in t&&[].map.call(t,(function(t){x(e,t,void 0)}))},shallowClone:I,deepClone:B,getObjectDiff:ji,cmp:Wt,asap:O,minKey:St,addons:[],connections:Tt,errnames:ie,dependencies:rs,semVer:kt,version:kt.split(".").map((e=>parseInt(e))).reduce(((e,t,i)=>e+t/Math.pow(10,2*i)))}),as.maxKey=gi(as.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(ui(ci,(e=>{if(!os){let t;xt?(t=document.createEvent("CustomEvent"),t.initCustomEvent(di,!0,!0,e)):t=new CustomEvent(di,{detail:e}),os=!0,dispatchEvent(t),os=!1}})),addEventListener(di,(({detail:e})=>{os||ns(e)})));let os=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel(di);ui(ci,(t=>{os||e.postMessage(t)})),e.onmessage=e=>{e.data&&ns(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){ui(ci,(e=>{try{os||("undefined"!=typeof localStorage&&localStorage.setItem(di,JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:di,changedParts:e}))))}catch(e){}})),addEventListener("storage",(e=>{if(e.key===di){const t=JSON.parse(e.newValue);t&&ns(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",(function({data:e}){e&&e.type===di&&ns(e.changedParts)}))}Le.rejectionMapper=function(e,t){if(!e||e instanceof J||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ae[e.name])return e;var i=new ae[e.name](t||e.message,e);return"stack"in e&&g(i,"stack",{get:function(){return this.inner.stack}}),i},H(U,Ct);var hs=i(25108);function cs(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ds(t){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?cs(Object(s),!0).forEach((function(i){e(t,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):cs(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var us=new es("K: wallet-db");function ls(t){return us.version(1).stores(e({},t,"key, timestamp")),{db:function(){return us[t]},setItem:function(e,i){var s,r;return"object"!==(null==i||null===(s=i.constructor)||void 0===s||null===(r=s.name)||void 0===r?void 0:r.toLowerCase())?(hs.error("Not A plain object."),!1):us[t].put(ds(ds({key:e},i),{},{timestamp:Date.now()})).then((function(){return!0}))},getItem:function(e){return new Promise((function(i){return us[t].get(e).then((function(e){i(e)})).catch((function(e){i(null)}))}))},upsertItem:function(e,i){var s,r;return"object"!==(null==i||null===(s=i.constructor)||void 0===s||null===(r=s.name)||void 0===r?void 0:r.toLowerCase())?(hs.error("Not A plain object."),!1):us[t].update(e,ds(ds({},i),{},{updateTimestamp:Date.now()})).then((function(s){return 0!==s||us[t].put(ds(ds({key:e},i),{},{timestamp:Date.now(),updateTimestamp:Date.now()})).then((function(){return!0}))}))},getLastMany:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return us[t].orderBy("timestamp").reverse().offset(i).limit(e).toArray()},getFollowingMany:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;return us[t].orderBy("timestamp").reverse().filter((function(t){return t.key===e?(r++,s):r>0&&r<=i&&(r++,!0)})).toArray()},getAll:function(){return us[t].orderBy("timestamp").toArray()},count:function(){return us[t].count()},deleteByKey:function(e){return us[t].where("key").equals(e).delete()}}}var fs=ls("keypairs"),ps=ls("request-keys"),ms=ls("account-addresses"),gs=ls("user-options"),ys=ls("sender-reqkey-adb"),bs=ls("proof-adb"),vs=ls("ct-transfer-adb"),ws=ls("receiver-reqkey-adb"),ks=[ys,bs,vs,ws],_s={networkId:"mainnet01",idleLimit:900,pageNum:0,password:"",passwordConfirm:"",mnemonic01:[],mnemonic02:[],mnemonic03:[],passwordR:"",passwordConfirmR:"",mnemonicR:[],keypairHex:{publicKey:"",secretKey:""},keypairBuf:{publicKey:"",secretKey:""},keypairList:[],accountDetails:{details:[],sum:0,nullChainIds:[],accountAddr:"",error:null,networkId:null},isLoading:{opened:!1,text:null,timestamp:null},kdausdt:0,transferConfirmOpened:!1,globalErrorData:{opened:!1,message:""},errorData:{opened:!1,message:null,xtransfer:null,details:null},infoData:{opened:!1,details:null,reqkey:null},confirmData:{opened:!1,message:null,confirmed:null},deleteData:{opened:!1,publicKey:"",privateKey:"",success:null},switchAccountBoxOpened:!1,transferOpt:{senderAccountAddr:"",senderChainId:0,receiverAccountAddr:"",receiverChainId:0,amount:.1,gasPayingAccountA:"",gasPayingAccountB:"",gasPrice:1e-8,gasLimit:600,xGasPrice:void 0,xGasLimit:void 0,ttl:28800},senderAddrList:[],receiverAddrList:[],sidebar:{opened:!1},privateKeyPage:{opened:!1},importPriKeyPage:{opened:!1},changePasswordPage:{opened:!1}};const Ss=Object.freeze({MAX_GAS_PRICE:1e-5,MIN_GAS_PRICE:1e-9,MAX_GAS_LIMIT:1e5,MIN_GAS_LIMIT:400,MAX_X_GAS_PRICE:{testnet:1e-9,mainnet:1e-8},MIN_X_GAS_PRICE:{testnet:1e-12,mainnet:1e-11},MAX_X_GAS_LIMIT:{testnet:400,mainnet:400},MIN_X_GAS_LIMIT:{testnet:100,mainnet:100},MIN_AMOUNT:1e-6,LISTEN_MAX_DELAY:180,LISTEN_EACH_DELAY:5,MSG_GET_STATE:"GET_STATE",MSG_SET_STATE:"SET_STATE",MSG_SAVE_PASS:"SAVE_PASS",MSG_VERIFY_PASSWORD:"VERIFY_PASSWORD",MSG_HAS_ACCOUNT:"HAS_ACCOUNT",MSG_LOCK_UP:"LOCK_UP",MSG_GET_ACCOUNT_DETAILS:"GET_ACCOUNT_DETAILS",MSG_JUST_TRANSFER:"JUST_TRANSFER",MSG_CONTINUE_ERROR_TRANSFER:"CONTINUE_ERROR_TRANSFER",MSG_GET_RECENT_REQKEYS_DATA:"GET_RECENT_REQKEYS_DATA",MSG_UPSERT_A_RECEIVER_ADDR:"UPSERT_A_RECEIVER_ADDR",MSG_CREATE_NEW_TAB:"CREATE_NEW_TAB",MSG_GENERATE_RANDOM_KEYPAIR:"GENERATE_RANDOM_KEYPAIR",MSG_GET_KDA_PRICE:"GET_KDA_PRICE",MSG_CHANGE_SELECTED_ACCOUNT:"CHANGE_DEFAULT_ACCOUNT",MSG_REMOVE_ACCOUNT:"REMOVE_ACCOUNT",MSG_GET_PRIVATE_KEY:"GET_PRIVATE_KEY",MSG_VERIFY_PRIVATE_KEY:"VERIFY_PRIVATE_KEY",MSG_IMPORT_PRIVATE_KEY:"IMPORT_PRIVATE_KEY",MSG_INIT_ACCOUNT:"INIT_ACCOUNT",MSG_VALIDATE_CURRENT_PASSWORD:"VALIDATE_CURRENT_PASSWORD",MSG_CHANGE_PASSWORD:"CHANGE_PASSWORD",MSG_GET_NETWORKID:"GET_DEFAULT_NETWORKID",MSG_CHANGE_NETWORKID:"CHANGE_NETWORKID",MSG_GET_IDLE_LIMIT:"GET_IDLE_LIMIT",MSG_SET_IDLE_LIMIT:"SET_IDLE_LIMIT",MSG_REMOVE_A_TX_RESULT:"REMOVE_A_TX_RESULT",FMSG_TRANSFER_PROGRESS:"TRANSFER_PROGRESS",FMSG_ACCOUNT_DETAILS_REFRESH:"ACCOUNT_DETAILS_REFRESH",FMSG_UPDATE_KEYPAIR_LIST:"UPDATE_KEYPAIR_LIST",FMSG_REFRESH_RECEIVER_ADDRS:"REFRESH_RECEIVER_ADDRS",FMSG_RECEIVER_ADDR_LIST_UPDATED:"RECEIVER_ADDR_LIST_UPDATED",FMSG_GENERATE_RANDOM_KEYPAIR:"GENERATE_RANDOM_KEYPAIR_SUCCESS",FMSG_CHANGE_SELECTED_ACCOUNT_SUCCESS:"CHANGE_SELECTED_ACCOUNT_SUCCESS",FMSG_REMOVE_ACCOUNT_SUCCESS:"REMOVE_ACCOUNT_SUCCESS",FMSG_IMPORT_ACCOUNT_SUCCESS:"IMPORT_ACCOUNT_SUCCESS",FMSG_LOCK_UP_SUCCESS:"LOCK_UP_SUCCESS",FMSG_LOCK_PROGRESS_STATE:"LOCK_PROGRESS_STATE",FMSG_INIT_ACCOUNT_SUCCESS:"INIT_ACCOUNT_SUCCESS",FMSG_SYNC_BACKGROUND_STATE:"SYNC_BACKGROUND_STATE"});function Os(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function Ms(e){return function(e){if(Array.isArray(e))return Os(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Os(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Os(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ts=i(56171),xs=i.n(Ts);function Is(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function As(t){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?Is(Object(s),!0).forEach((function(i){e(t,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Is(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function Cs(e){var t,i,r,n,o,h=e.senderAccountAddr,c=e.senderAccountPrivKey,d=e.receiverAccountAddr,u=e.amount,l=e.senderChainId,f=e.receiverChainId,p=e.networkId,m=void 0===p?"testnet04":p,g=e.gasPrice,y=void 0===g?1e-6:g,b=e.gasLimit,v=void 0===b?600:b,w=e.xGasPrice,k=void 0===w?1e-8:w,_=e.xGasLimit,S=void 0===_?400:_,O=e.ttl,M=void 0===O?28800:O,T=e.tokenAddress,x=void 0===T?"coin":T,I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if((e=e.toLowerCase()).includes("testnet"))return function(t){return"https://api.testnet.chainweb.com/chainweb/0.0/".concat(e,"/chain/").concat(t,"/pact")};if(e.includes("mainnet"))return function(t){return"https://api.chainweb.com/chainweb/0.0/".concat(e,"/chain/").concat(t,"/pact")};throw"The [networkId] is inccorect"}(m);u=String(u),h=null===(t=h)||void 0===t||null===(i=t.toLowerCase())||void 0===i?void 0:i.trim(),d=null===(r=d)||void 0===r||null===(n=r.toLowerCase())||void 0===n?void 0:n.trim(),c=null===(o=c)||void 0===o?void 0:o.toLowerCase(),l=String(l),f=String(f),y=Number(y),v=Number(v),k=Number(k),S=Number(S),M=Number(M);var A="free-x-chain-gas";m.includes("testnet")&&(k=1e-9);var C=function(){return Math.round(Date.now()/1e3)-15},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toLowerCase().includes("k:")?e.split(":")[1]:e},E=function(e){return(Math.floor(1e8*e)/1e8).toFixed(8)},P=function(){var e=s(a().mark((function e(){var t,i,s,r,n,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:0,i=o.length>1&&void 0!==o[1]?o[1]:[h],s=o.length>2&&void 0!==o[2]?o[2]:"keys-all",r=[{keyPairs:[],pactCode:"(coin.create-account ".concat(JSON.stringify(i[0])," (read-keyset 'account-keyset))"),networkId:m,envData:{"account-keyset":{keys:Ms(new Set(i.map((function(e){return N(e)})))),pred:s}},meta:xs().lang.mkMeta("".concat(A),String(t),k,S,C(),M)}],e.next=6,xs().fetch.send(r,I(t));case 6:if(void 0!==(n=e.sent).requestKeys){e.next=9;break}throw n;case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=s(a().mark((function e(t){var i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[{pactCode:"(".concat(x,".transfer-crosschain ").concat(JSON.stringify(h)," ").concat(JSON.stringify(d),' (read-keyset "own-ks") ').concat(JSON.stringify(f)," ").concat(E(u),")"),networkId:m,keyPairs:[{publicKey:N(h),secretKey:c,clist:[]}],meta:xs().lang.mkMeta(h,String(l),y,v,C(),M),envData:{"own-ks":t||{pred:"keys-all",keys:[N(d)]}}}],e.next=3,xs().fetch.send(i,I(l));case 3:if(void 0!==(s=e.sent).requestKeys){e.next=6;break}throw s;case 6:return e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=s(a().mark((function e(t){var i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[{pactCode:"(".concat(x,".transfer-create ").concat(JSON.stringify(h)," ").concat(JSON.stringify(d),' (read-keyset "recp-ks") ').concat(E(u),")"),networkId:m,keyPairs:[{publicKey:N(h),secretKey:c,clist:[{name:"".concat(x,".TRANSFER"),args:[h,d,Number(E(u))]},{name:"coin.GAS",args:[]}]}],meta:xs().lang.mkMeta(h,String(l),y,v,C(),M),envData:{"recp-ks":t||{pred:"keys-all",keys:[N(d)]}}}],e.next=3,xs().fetch.send(i,I(l));case 3:if(void 0!==(s=e.sent).requestKeys){e.next=6;break}throw s;case 6:return e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=s(a().mark((function e(t,i,s){var r,n,o,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xs().fetch.poll({requestKeys:[t]},I(i));case 2:if(r=e.sent,0===Object.keys(r).length){e.next=13;break}if("failure"!==(null==(o=r[t])||null===(n=o.result)||void 0===n?void 0:n.status)){e.next=9;break}throw o.result.error.message;case 9:return h=r[t],e.abrupt("return",void 0!==h?h:null);case 11:e.next=14;break;case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e)})));return function(t,i,s){return e.apply(this,arguments)}}(),L=function(){var e=s(a().mark((function e(t){var i,s,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xs().fetch.spv(t,I(t.sourceChainId));case 2:if("SPV target not reachable: target chain not reachable. Chainweb instance is too young"===(i=e.sent)){e.next=15;break}return e.prev=4,s=atob(i),r=JSON.parse(s),e.abrupt("return",r.algorithm?i:null);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",null);case 13:e.next=16;break;case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=s(a().mark((function e(t,i){var s,r,n,o,h=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>2&&void 0!==h[2]?h[2]:1,r=h.length>3?h[3]:void 0,n=xs().lang.mkMeta("".concat(A),String(r),k,S,C(),M),e.next=5,xs().fetch.send({type:"cont",meta:n,proof:i,pactId:t,rollback:!1,keyPairs:[],step:s,networkId:m},I(r));case 5:if(void 0!==(o=e.sent).requestKeys){e.next=8;break}throw o;case 8:return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),q=function(){var e=s(a().mark((function e(t,i){var s,r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null===(s=t)||void 0===s?void 0:s.toLowerCase(),e.next=3,xs().fetch.local({pactCode:"(".concat(x,".details ").concat(JSON.stringify(t),")"),meta:xs().lang.mkMeta("",String(i),y,v,M,C())},I(i));case 3:if("success"!==(null==(n=e.sent)||null===(r=n.result)||void 0===r?void 0:r.status)){e.next=8;break}return e.abrupt("return",As(As({},n.result.data),{},{chainId:i}));case 8:return e.abrupt("return",{account:null,guard:null,balance:0,chainId:i});case 9:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),G=function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(new Array(20).fill(0).map((function(e,i){return q(t,i)}))).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{initAccount:P,transferCrosschain:B,transferSamechain:R,selectReqkey:V,createSpvCmd:function(e){var t,i;if("success"===(null==e||null===(t=e.result)||void 0===t?void 0:t.status)){var s=e.continuation.pactId,r=e.continuation.yield.provenance.targetChainId;return{sourceChainId:e.continuation.yield.source,targetChainId:r,requestKey:s}}return null!==(i=null==e?void 0:e.result)&&void 0!==i?i:e},fetchProof:L,continueTransfer:D,getAcctDetails:q,getFullAcctDetails:G}}var Ns=i(81354),Es=i.n(Ns),Ps=i(50780),Bs=i.n(Ps),Rs=i(48764);function Vs(e,t){var i,s=t.amount,r=t.senderAccountAddr.slice(0,8).toUpperCase(),a=t.receiverAccountAddr.slice(0,8).toUpperCase(),n=t.senderChainId,o=t.receiverChainId,h=[e,{type:"basic",iconUrl:"../icons/k128.png",title:"Transfer Successful",message:"".concat(r,".C").concat(n," ⇨ ").concat(a,".C").concat(o,"\nKDA: ").concat(s),priority:2,eventTime:Date.now(),contextMessage:"K: Wallet"},function(e){}];(i=chrome.notifications).create.apply(i,h)}var Ls=function(e){return Rs.Buffer.from(e).toString("hex")},Ds=function(e){return Es().SHA512(e).toString(Es().enc.Base64)},qs=function(e,t){var i=Es().AES.encrypt(e,t).toString();return Es().HmacSHA256(i,Es().SHA256(t)).toString()+i},Gs=function(e,t){var i=e.slice(0,64),s=e.slice(64);return i===Es().HmacSHA256(s,Es().SHA256(t)).toString()?Es().AES.decrypt(s,t).toString(Es().enc.Utf8):"%%ERROR_DECRYPT_FAILED%%"},Fs=function(){var e=Bs().sign.keyPair();return{publicKey:Ls(e.publicKey),secretKey:Ls(e.secretKey).slice(0,64)}},js=function(e){var t,i=(t=e,new Uint8Array(Rs.Buffer.from(t,"hex"))),s=Bs().sign.keyPair.fromSeed(i);return Ls(s.publicKey)};function Us(e){var t=e.toLowerCase();return 64===t.length&&Ms(t).every((function(e,t){return"0123456789abcdef".includes(e)}))}var Hs={get:function(e){return chrome.storage.local.get(e)},set:function(e){return chrome.storage.local.set(e)},clear:function(){return chrome.storage.local.clear()}};function zs(e){return Ks.apply(this,arguments)}function Ks(){return(Ks=s(a().mark((function e(t){var i,s,r,n,o,h=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=h.length>1&&void 0!==h[1]?h[1]:0,s=h.length>2&&void 0!==h[2]?h[2]:3,r=h.length>3&&void 0!==h[3]?h[3]:function(){},n=1;n<=60/s;n++)chrome.alarms.create("".concat(t,"+").concat(n),{when:Date.now()+1e3*i+1e3*s*n,periodInMinutes:1});o=function(e){var i=e.name;i.includes(t)&&r(i,t)},chrome.alarms.onAlarm.addListener(o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ws(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,h={reqKey:e,param:t,responds:i,success:r,finished:n,lastError:o,step:i.length,tstep:0},c=t.senderChainId!==t.receiverChainId;h.tstep=c?5:2;var d,u,l=function(){var t=s(a().mark((function t(i,s){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ps.upsertItem(e,h);case 2:return chrome.runtime.sendMessage({type:Ss.FMSG_TRANSFER_PROGRESS,key:i,value:s}),t.abrupt("return",s);case 4:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}();return{set:(u=s(a().mark((function t(i){var s,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h.responds=i,h.step=h.responds.length,h.step===h.tstep&&(h.finished=!0,"success"===(null===(s=h.responds[h.step-1])||void 0===s||null===(r=s.result)||void 0===r?void 0:r.status)&&(h.success=!0,Vs(h.reqKey,h.param))),!(h.step<=1)){t.next=6;break}return t.next=6,Hs.set({isLoading:{opened:!1,text:null},transferConfirmOpened:!1,pageNum:11});case 6:return t.next=8,l(e,h);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)}))),function(e){return u.apply(this,arguments)}),err:(d=s(a().mark((function t(i){var s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Hs.set({isLoading:{opened:!1,text:null}});case 2:return h.lastError=null!==(s=null==i?void 0:i.message)&&void 0!==s?s:i,t.next=5,l(e,h);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)}))),function(e){return d.apply(this,arguments)})}}function Xs(e,t,i){return Zs.apply(this,arguments)}function Zs(){return(Zs=s(a().mark((function t(i,s,r){var n,o,h=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=function(t){var i="";switch(null==t?void 0:t.constructor.name){case"Error":case"TypeError":i=t.message;break;case"Object":i=JSON.stringify(t);break;default:i=t}return e({},"Failed to fetch","No Network Connection")[i]||i},n=h.length>3&&void 0!==h[3]?h[3]:{},chrome.runtime.sendMessage({type:Ss.FMSG_TRANSFER_PROGRESS,key:null,value:{behavior:i,step:0,tstep:s,param:n,responds:[],success:!1,finished:!1,lastError:o(r)}});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Ys=i(25108);function Qs(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Js(t){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?Qs(Object(s),!0).forEach((function(i){e(t,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Qs(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var $s=i(11853),er=i(25108);function tr(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ir(t){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?tr(Object(s),!0).forEach((function(i){e(t,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):tr(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var sr=function(e){return JSON.parse(JSON.stringify(e))};function rr(e){return ar.apply(this,arguments)}function ar(){return(ar=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach((function(e,t){var i=e.name,r=e.when,n=e.interval,o=e.handler;zs(i,r,n,function(){var e=s(a().mark((function e(t,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o({senderReqkeyAlarmDB:ys,proofAlarmDB:bs,receiverReqkeyAlarmDB:ws,continueTransferAlarmDB:vs}[i+"DB"],i,t);case 3:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}())}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nr(){return(nr=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zs("kdapriceTick",0,5,function(){var e=s(a().mark((function e(t,i){var s,r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new $s.kucoin,e.next=4,r.fetchTicker("KDA/USDT");case 4:return n=e.sent,e.next=7,Hs.set({kdausdt:null!==(s=null==n?void 0:n.last)&&void 0!==s?s:0});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),er.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,i){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function or(){return(or=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zs("AutoLocker",0,5,function(){var e=s(a().mark((function e(t,i){var s,r,n,o,h,c,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s="lockupTime",r=48e4,e.next=5,gs.getItem(s);case 5:if(void 0!==(n=e.sent)){e.next=11;break}return e.next=9,gs.upsertItem(s,{endTime:Date.now()+r,limitTime:r});case 9:e.next=22;break;case 11:if(o=n.endTime,h=n.limitTime,0!==(c=Math.max(+((o-Date.now())/h*100).toFixed(2),0))){e.next=21;break}return e.next=16,Hs.get();case 16:return d=e.sent,e.next=19,Hs.set(ir(ir({},sr(_s)),{},{pageNum:5,networkId:d.networkId}));case 19:e.next=22;break;case 21:chrome.runtime.sendMessage({type:Ss.FMSG_LOCK_PROGRESS_STATE,value:c});case 22:e.next=26;break;case 24:e.prev=24,e.t0=e.catch(0);case 26:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t,i){return e.apply(this,arguments)}}()),chrome.runtime.onMessage.addListener((function(e){return gs.getItem("lockupTime").then((function(e){var t,i=null!==(t=null==e?void 0:e.limitTime)&&void 0!==t?t:0;i&&gs.upsertItem("lockupTime",{endTime:Date.now()+i})})),!0}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hr(){return(hr=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rr([{name:"senderReqkeyAlarm",interval:5,when:0,handler:function(){var e=s(a().mark((function e(t,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAll();case 2:e.sent.forEach(function(){var e=s(a().mark((function e(i,s){var r,n,o,h,c,d,u,l,f,p,m,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.key,n=i.param,o=i.count,h=i.maxCount,c=i.responds,d=r,u=i.param.senderChainId,l=i.param.senderChainId!==i.param.receiverChainId,f=Ws(d,n,c),e.prev=5,p=Cs(n),e.next=9,p.selectReqkey(d,u);case 9:if(m=e.sent,!(o>h)){e.next=12;break}throw"TIMEOUT";case 12:if(null!==m){e.next=17;break}return e.next=15,t.upsertItem(d,{count:o+1});case 15:e.next=25;break;case 17:return g=[].concat(Ms(c),[m]),e.next=20,f.set(g);case 20:if(!l){e.next=23;break}return e.next=23,bs.upsertItem(d,{count:0,maxCount:h,param:n,responds:g});case 23:return e.next=25,t.deleteByKey(d);case 25:e.next=33;break;case 27:return e.prev=27,e.t0=e.catch(5),e.next=31,f.err(e.t0);case 31:return e.next=33,t.deleteByKey(d);case 33:case"end":return e.stop()}}),e,null,[[5,27]])})));return function(t,i){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()},{name:"proofAlarm",interval:5,when:1,handler:function(){var e=s(a().mark((function e(t,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAll();case 2:e.sent.forEach(function(){var e=s(a().mark((function e(i,s){var r,n,o,h,c,d,u,l,f,p,m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.key,n=i.param,o=i.count,h=i.maxCount,c=i.responds,u=Ws(d=r,n,c),e.prev=3,!(o>h)){e.next=6;break}throw"TIMEOUT";case 6:return l=Cs(n),f=l.createSpvCmd(c[c.length-1]),e.next=10,l.fetchProof(f);case 10:if(null!==(p=e.sent)){e.next=16;break}return e.next=14,t.upsertItem(d,{count:o+1});case 14:e.next=23;break;case 16:return m=[].concat(Ms(c),[p]),e.next=19,u.set(m);case 19:return e.next=21,vs.upsertItem(d,{count:0,maxCount:h,param:n,responds:m});case 21:return e.next=23,t.deleteByKey(d);case 23:e.next=31;break;case 25:return e.prev=25,e.t0=e.catch(3),e.next=29,u.err(e.t0);case 29:return e.next=31,t.deleteByKey(d);case 31:case"end":return e.stop()}}),e,null,[[3,25]])})));return function(t,i){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()},{name:"continueTransferAlarm",interval:5,when:2,handler:function(){var e=s(a().mark((function e(t,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAll();case 2:e.sent.forEach(function(){var e=s(a().mark((function e(i,s){var r,n,o,h,c,d,u,l,f,p,m,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.key,n=i.param,o=i.count,h=i.maxCount,c=i.responds,d=r,u=c[c.length-1],l=n.receiverChainId,f=Ws(d,n,c),e.prev=5,!(o>h)){e.next=8;break}throw"TIMEOUT";case 8:return p=Cs(n),e.next=11,p.continueTransfer(d,u,1,l);case 11:return m=e.sent,g=[].concat(Ms(c),[m]),e.next=15,f.set(g);case 15:return e.next=17,ws.upsertItem(d,{count:0,maxCount:h,param:n,responds:g});case 17:return e.next=19,t.deleteByKey(d);case 19:e.next=27;break;case 21:return e.prev=21,e.t0=e.catch(5),e.next=25,f.err(e.t0);case 25:return e.next=27,t.deleteByKey(d);case 27:case"end":return e.stop()}}),e,null,[[5,21]])})));return function(t,i){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()},{name:"receiverReqkeyAlarm",interval:5,when:3,handler:function(){var e=s(a().mark((function e(t,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAll();case 2:e.sent.forEach(function(){var e=s(a().mark((function e(i,s){var r,n,o,h,c,d,u,l,f,p,m,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.key,n=i.param,o=i.count,h=i.maxCount,c=i.responds,d=r,u=c[c.length-1].requestKeys[0],l=n.receiverChainId,f=Ws(d,n,c),e.prev=5,p=Cs(n),e.next=9,p.selectReqkey(u,l);case 9:if(m=e.sent,!(o>h)){e.next=12;break}throw"TIMEOUT";case 12:if(null!==m){e.next=17;break}return e.next=15,t.upsertItem(d,{count:o+1});case 15:e.next=22;break;case 17:return g=[].concat(Ms(c),[m]),e.next=20,f.set(g);case 20:return e.next=22,t.deleteByKey(d);case 22:e.next=30;break;case 24:return e.prev=24,e.t0=e.catch(5),e.next=28,f.err(e.t0);case 28:return e.next=30,t.deleteByKey(d);case 30:case"end":return e.stop()}}),e,null,[[5,24]])})));return function(t,i){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cr=i(25108);function dr(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ur(t){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?dr(Object(s),!0).forEach((function(i){e(t,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):dr(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var lr=function(){var e=60;function t(e){return i.apply(this,arguments)}function i(){return(i=s(a().mark((function t(i){var s,r,n,o,h,c,d,u,l,f,p=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.senderAccountAddr,i.senderAccountPrivKey,s=i.receiverAccountAddr,i.amount,i.senderChainId,r=i.receiverChainId,n=i.gasPrice,o=i.gasLimit,i.networkId,h=null,c=null,delete(d=Js({},p[0])).senderAccountPrivKey,o=Math.min(Math.max(Ss.MIN_GAS_LIMIT,+o),Ss.MAX_GAS_LIMIT),n=Math.min(Math.max(Ss.MIN_GAS_PRICE,+n),Ss.MAX_GAS_PRICE),u=Cs(Js(Js({},p[0]),{},{gasLimit:o,gasPrice:n})),t.prev=8,t.next=11,u.getAcctDetails(s,r);case 11:return l=t.sent,t.next=14,u.transferSamechain(l.guard);case 14:return f=t.sent,c=f.requestKeys[0],h=Ws(c,d),t.next=19,h.set([f]);case 19:return t.next=21,ys.upsertItem(c,{count:0,maxCount:e,param:d,responds:[f]});case 21:t.next=27;break;case 23:throw t.prev=23,t.t0=t.catch(8),null!==h?h.err(t.t0):Xs("transfer-create",2,t.t0,d),t.t0;case 27:case"end":return t.stop()}}),t,null,[[8,23]])})))).apply(this,arguments)}function r(e){return n.apply(this,arguments)}function n(){return(n=s(a().mark((function t(i){var s,r,n,o,h,c,d,u,l,f,p=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.senderAccountAddr,i.senderAccountPrivKey,s=i.receiverAccountAddr,i.amount,i.senderChainId,r=i.receiverChainId,i.networkId,i.gasPrice,i.gasLimit,n=i.xGasPrice,o=void 0===n?1e-8:n,i.xGasLimit,h=null,c=null,delete(d=Js(Js({},p[0]),{},{xGasPrice:o})).senderAccountPrivKey,u=Cs(Js(Js({},p[0]),{},{xGasPrice:o})),t.prev=6,t.next=9,u.getAcctDetails(s,r);case 9:return l=t.sent,t.next=12,u.transferCrosschain(l.guard);case 12:return f=t.sent,c=f.requestKeys[0],h=Ws(c,d),t.next=17,h.set([f]);case 17:return t.next=19,ys.upsertItem(c,{count:0,maxCount:e,param:d,responds:[f]});case 19:t.next=25;break;case 21:throw t.prev=21,t.t0=t.catch(6),null!==h?h.err(t.t0):Xs("transfer-crosschain",5,t.t0,d),t.t0;case 25:case"end":return t.stop()}}),t,null,[[6,21]])})))).apply(this,arguments)}function o(){return(o=s(a().mark((function e(i){var s,n,o,h=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.senderAccountAddr,i.senderAccountPrivKey,i.receiverAccountAddr,i.amount,s=i.senderChainId,n=i.receiverChainId,i.networkId,i.xGasPrice,i.xGasLimit,e.prev=1,o=s===n?t:r,e.next=5,o(h[0]);case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function h(){return(h=s(a().mark((function t(i){var s,r,n,o,h,c,d,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ps.getItem(i);case 2:return s=t.sent,r=s.param,n=s.lastError,o=s.key,h=s.responds,c=s.continueCount,d=void 0===c?0:c,u=Ws(o,r,h),t.prev=6,Ys.error("Continue-Transfer - lastError:> ",n),d<3?d++:(h=h.slice(0,2),d=0),t.next=11,ps.upsertItem(i,{lastError:null,continueCount:d});case 11:return t.next=13,u.set(h);case 13:return t.next=15,ks[h.length-1].upsertItem(o,{count:0,maxCount:e,param:r,responds:h});case 15:return t.abrupt("return",!0);case 18:throw t.prev=18,t.t0=t.catch(6),Xs("continue.no.conn.transfer",0,t.t0,r),t.t0;case 22:case"end":return t.stop()}}),t,null,[[6,18]])})))).apply(this,arguments)}function c(){return(c=s(a().mark((function e(t,i){var s,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={accountAddr:t,networkId:i},e.prev=1,r=Cs({networkId:i}),e.next=5,r.getFullAcctDetails(t);case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(1),Xs("coin.details",0,e.t0,s),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function d(){return(d=s(a().mark((function e(t){var i,s,r,n,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>1&&void 0!==o[1]?o[1]:[],s=o.length>2&&void 0!==o[2]?o[2]:"testnet04",r=Cs({senderAccountAddr:t,networkId:s}),n={accountAddr:t,nullChainIds:i,networkId:s},e.prev=4,e.next=7,Promise.all(i.map((function(e){return r.initAccount(e).then((function(t){return r.listenReqkey(t.requestKeys[0],e)}))})));case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),Xs("account.initiate",0,e.t0,n),e.t0;case 14:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}return{getAcctDetailsForAllChains:function(e,t){return c.apply(this,arguments)},initAccountForAnyChains:function(e){return d.apply(this,arguments)},samechainTransfer:t,crosschainTransfer:r,justTransfer:function(e){return o.apply(this,arguments)},continueErrorTransfer:function(e){return h.apply(this,arguments)}}}(),fr=function(e){return JSON.parse(JSON.stringify(e))};function pr(){return(pr=s(a().mark((function e(t){var i,r,n,o,h,c,d,u,l,f,p,m,g,y,b,v,w,k,_,S,O,M,T,x,I,A,C,N,E,P,B,R,V,L,D,q,G,F,j,U,H,z,K,W,X,Z,Y,Q,J,$,ee,te,ie,se,re,ae,ne,oe,he,ce,de,ue,le,fe,pe,me,ge,ye,be,ve,we,ke,_e,Se,Oe,Me,Te,xe,Ie,Ae,Ce,Ne,Ee,Pe,Be,Re=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Re.length>1&&void 0!==Re[1]&&Re[1],i=Re.length>2&&void 0!==Re[2]?Re[2]:function(){},r=t.type,n=function(){var e=s(a().mark((function e(){var t,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(i.length>0&&void 0!==i[0])||i[0],e.next=3,Hs.set({isLoading:{opened:t,timestamp:Date.now()}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.t0=r,e.next=e.t0===Ss.MSG_GET_STATE?7:e.t0===Ss.MSG_SET_STATE?11:e.t0===Ss.MSG_SAVE_PASS?18:e.t0===Ss.MSG_VERIFY_PASSWORD?49:e.t0===Ss.MSG_HAS_ACCOUNT?91:e.t0===Ss.MSG_GET_KDA_PRICE?94:e.t0===Ss.MSG_VALIDATE_CURRENT_PASSWORD?99:e.t0===Ss.MSG_CHANGE_PASSWORD?110:e.t0===Ss.MSG_INIT_ACCOUNT?118:e.t0===Ss.MSG_CHANGE_SELECTED_ACCOUNT?125:e.t0===Ss.MSG_REMOVE_ACCOUNT?152:e.t0===Ss.MSG_GET_PRIVATE_KEY?170:e.t0===Ss.MSG_VERIFY_PRIVATE_KEY?185:e.t0===Ss.MSG_IMPORT_PRIVATE_KEY?191:e.t0===Ss.MSG_LOCK_UP?219:e.t0===Ss.MSG_GET_ACCOUNT_DETAILS?224:e.t0===Ss.MSG_UPSERT_A_RECEIVER_ADDR?236:e.t0===Ss.MSG_GENERATE_RANDOM_KEYPAIR?245:e.t0===Ss.MSG_JUST_TRANSFER?270:e.t0===Ss.MSG_CONTINUE_ERROR_TRANSFER?287:e.t0===Ss.MSG_GET_RECENT_REQKEYS_DATA?291:e.t0===Ss.MSG_REMOVE_A_TX_RESULT?296:e.t0===Ss.MSG_GET_NETWORKID?300:e.t0===Ss.MSG_CHANGE_NETWORKID?307:e.t0===Ss.MSG_GET_IDLE_LIMIT?322:e.t0===Ss.MSG_SET_IDLE_LIMIT?329:e.t0===Ss.MSG_CREATE_NEW_TAB?334:336;break;case 7:return e.next=9,Hs.get();case 9:return o=e.sent,e.abrupt("return",i(o));case 11:return e.next=13,Hs.get();case 13:return h=ur(ur({},h=e.sent),t.value),e.next=17,Hs.set(h);case 17:return e.abrupt("return",e.sent);case 18:return e.next=20,n(!0);case 20:return e.next=22,Hs.get();case 22:if(c=e.sent,d=t.password,u=t.keypairHex,l=u.publicKey,f=u.secretKey,p=c.networkId,!(d&&l&&f)){e.next=46;break}return m="k:"+l,e.next=29,Sr(m,p);case 29:c.accountDetails=e.sent,g=Ds(d),y=qs(JSON.stringify([g,l,f]),g),c.keypairHex={},c.keypairHex.publicKey=l,c.keypairHex.secretKey=y,c.password=g,c.transferOpt.senderAccountAddr=m,c.keypairList=[{publicKey:l,secretKey:y,timestamp:Date.now(),selected:!0}],c.senderAddrList=[{text:m,value:m,key:1}],c.receiverAddrList=[{text:m,value:m,key:1}],fs.setItem(l,{enc:y,selected:!0}),ms.setItem(m,{owner:!0,pubkey:l}),c.isLoading={opened:!1,text:null},c.pageNum=8,e.next=48;break;case 46:c.isLoading={opened:!1,text:null},i({success:!1,error:"No Passwords"});case 48:return e.abrupt("return",Hs.set(c));case 49:if(null==t||null===(b=t.value)||void 0===b||!b.password){e.next=89;break}return e.next=52,n(!0);case 52:return e.next=54,fs.getAll();case 54:return v=e.sent,w=v.findIndex((function(e){return!0===e.selected})),k=v[w],e.next=59,Hs.get(_);case 59:if(_=e.sent,void 0===k){e.next=86;break}if(M=Ds(null!==(S=null==t||null===(O=t.value)||void 0===O?void 0:O.password)&&void 0!==S?S:""),"%%ERROR_DECRYPT_FAILED%%"===(T=Gs(k.enc,M))){e.next=84;break}return _.keypairList=v.map((function(e,t){return{publicKey:e.key,secretKey:e.enc,timestamp:e.timestamp,selected:e.selected}})),x=JSON.parse(T),I=_.networkId,A=_.keypairList,_.password=x[0],_.keypairHex=A[w],C="k:"+A[w].publicKey,_.transferOpt.senderAccountAddr=C,e.next=73,yr();case 73:return _.senderAddrList=e.sent,e.next=76,vr();case 76:return _.receiverAddrList=e.sent,e.next=79,Sr(C,I);case 79:_.accountDetails=e.sent,_.isLoading={opened:!1,text:null},_.pageNum=8,e.next=86;break;case 84:_.isLoading={opened:!1,text:null},i({success:!1,error:"Incorrect Password"});case 86:return e.abrupt("return",Hs.set(_));case 89:i({success:!1,error:"Empty password."});case 90:return e.abrupt("break",336);case 91:return e.next=93,fs.getAll().then((function(e){i(e.length>0)}));case 93:return e.abrupt("return",!0);case 94:return e.next=96,gs.getItem("kda-price");case 96:return E=e.sent,i(null!==(N=null==E?void 0:E.value)&&void 0!==N?N:0),e.abrupt("return",!0);case 99:if(!((P=t.currentPassword)&&P.length>=8)){e.next=109;break}return e.next=103,Hs.get();case 103:return B=e.sent,R=Ds(P),V=B.password,e.abrupt("return",i({matched:R===V}));case 109:return e.abrupt("return",i({matched:!1}));case 110:if(L=t.currentPassword,D=t.newPassword,!(L&&D.length>=8)){e.next=116;break}return e.next=114,fs.getAll().then(function(){var e=s(a().mark((function e(t){var s,r,n,o,h,c,d,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.findIndex((function(e){return!0===e.selected})),void 0===(r=t[s])){e.next=24;break}return n=Ds(L),e.next=6,Hs.get();case 6:if(o=e.sent,n!==o.password){e.next=21;break}if(h=Gs(r.enc,n),(c=JSON.parse(h))[1]!==o.keypairHex.publicKey){e.next=18;break}return d=Ds(D),u=qs(JSON.stringify([d,c[1],c[2]]),d),fs.setItem(c[1],{enc:u,selected:!0}),o=ur(ur({},fr(_s)),{},{pageNum:5,networkId:o.networkId}),e.abrupt("return",Hs.set(o));case 18:return e.abrupt("return",i({success:!1,error:"Invalid PublicKey."}));case 19:e.next=22;break;case 21:return e.abrupt("return",i({success:!1,error:"Invalid Password."}));case 22:e.next=25;break;case 24:return e.abrupt("return",i({success:!1,error:"Get All keypairDB got some errored."}));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 114:e.next=117;break;case 116:return e.abrupt("return",i({success:!1,error:"Invalid Format."}));case 117:return e.abrupt("break",336);case 118:return q=t.accountAddr,G=t.nullChainIds,e.next=121,Hs.get();case 121:return F=e.sent,e.next=124,lr.initAccountForAnyChains(q,G,F.networkId);case 124:return e.abrupt("return",!0);case 125:return e.next=127,n(!0);case 127:return j=t.selectedKey,U=null,e.next=131,fs.getAll();case 131:return H=e.sent,e.next=134,Hs.get();case 134:return(z=e.sent).keypairList=H.map((function(e,t){return e.key===j&&(U=t),{publicKey:e.key,secretKey:e.enc,timestamp:e.timestamp,selected:e.key===j}})),z.keypairHex=z.keypairList[U],K="k:"+z.keypairList[U].publicKey,z.transferOpt.senderAccountAddr=K,e.next=141,Promise.all(H.map((function(e,t){return fs.upsertItem(e.key,{selected:e.key===j})})));case 141:return e.next=143,Sr(K,z.networkId);case 143:return z.accountDetails=e.sent,e.next=146,yr();case 146:return z.senderAddrList=e.sent,e.next=149,vr();case 149:return z.receiverAddrList=e.sent,z.isLoading={opened:!1,text:null},e.abrupt("return",Hs.set(z));case 152:return W=t.removeKey,e.next=155,fs.deleteByKey(W);case 155:return e.next=157,ms.deleteByKey("k:"+W);case 157:return X={},e.next=160,yr();case 160:return X.senderAddrList=e.sent,e.next=163,vr();case 163:return X.receiverAddrList=e.sent,e.next=166,kr();case 166:return X.keypairList=e.sent,X.isLoading={opened:!1,text:null},X.deleteData={success:null,privateKey:"",publicKey:"",opened:!1},e.abrupt("return",Hs.set(X));case 170:return Z=t.password,Y=Ds(Z||""),e.next=174,Hs.get();case 174:if(Q=e.sent,Y!==Q.password){e.next=184;break}if("%%ERROR_DECRYPT_FAILED%%"===(J=Gs(Q.keypairHex.secretKey,Y))){e.next=181;break}return e.abrupt("return",i({success:!0,value:JSON.parse(J).slice(1)}));case 181:return e.abrupt("return",i({success:!1,error:"Decrypted Failed."}));case 182:e.next=185;break;case 184:return e.abrupt("return",i({success:!1,error:"Invalid Password."}));case 185:return $=t.publicKey,ee=t.privateKey,e.next=188,n(!0);case 188:return e.next=190,fs.getItem($).then(function(){var e=s(a().mark((function e(t){var s,r,n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.key,r=t.enc,s!==$){e.next=14;break}return e.next=4,Hs.get();case 4:if(n=e.sent,"%%ERROR_DECRYPT_FAILED%%"===(o=Gs(r,n.password))){e.next=12;break}if(ee!==JSON.parse(o)[2]){e.next=11;break}return e.abrupt("return",i({success:!0,error:null}));case 11:return e.abrupt("return",i({success:!1,error:"Incorrect Password."}));case 12:e.next=15;break;case 14:return e.abrupt("return",i({success:!1,error:"PublicKey Does Not Match."}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return cr.error(e),i({success:!1,error:"Pubkey Not Founded."})})).finally((function(){n(!1)}));case 190:return e.abrupt("break",336);case 191:if(!Us(te=t.privateKey)){e.next=218;break}return e.next=195,n(!0);case 195:return e.next=197,Hs.get();case 197:return ie=e.sent,se=js(te),re=qs(JSON.stringify([ie.password,se,te]),ie.password),e.next=202,fs.setItem(se,{enc:re,selected:!1});case 202:return e.next=204,ms.setItem("k:"+se,{owner:!0,pubkey:se});case 204:return e.next=206,yr();case 206:return ie.senderAddrList=e.sent,e.next=209,vr();case 209:return ie.receiverAddrList=e.sent,e.next=212,kr();case 212:return ie.keypairList=e.sent,ie.importPriKeyPage.opened=!1,ie.isLoading={opened:!1,text:null},e.abrupt("return",Hs.set(ie));case 218:return e.abrupt("return",i({success:!1,error:"Invalid Private Key."}));case 219:return e.next=221,Hs.get();case 221:return ae=e.sent,ae=ur(ur({},fr(_s)),{},{pageNum:5,networkId:ae.networkId}),e.abrupt("return",Hs.set(ae));case 224:return e.next=226,n(!0);case 226:return e.next=228,Hs.get();case 228:return ne=e.sent,oe=ne.networkId,ne={},e.next=233,Sr(t.accountId,oe);case 233:return ne.accountDetails=e.sent,ne.isLoading={opened:!1,text:null},e.abrupt("return",Hs.set(ne));case 236:return he=t.receiverAccountAddr,e.next=239,ms.upsertItem(he,{pubkey:he.split(":")[1],owner:!1});case 239:return ce={},e.next=242,vr();case 242:return ce.receiverAddrList=e.sent,ce.transferOpt.receiverAccountAddr=he,e.abrupt("return",Hs.set(ce));case 245:return e.next=247,n(!0);case 247:return e.next=249,Hs.get();case 249:return de=e.sent,ue=Fs(),le=ue.publicKey,fe=ue.secretKey,pe=de.password,me=qs(JSON.stringify([pe,le,fe]),pe),e.next=255,fs.setItem(le,{enc:me});case 255:return e.next=257,ms.setItem("k:"+le,{owner:!0,pubkey:le});case 257:return de={},e.next=260,kr();case 260:return de.keypairList=e.sent,e.next=263,yr();case 263:return de.senderAddrList=e.sent,e.next=266,vr();case 266:return de.receiverAddrList=e.sent,de.isLoading={opened:!1,text:null},de.confirmData={opened:!1,message:null},e.abrupt("return",Hs.set(de));case 270:return e.next=272,n(!0);case 272:return e.next=274,Hs.get();case 274:if(ye=e.sent,"%%ERROR_DECRYPT_FAILED%%"===(be=Gs(ye.keypairHex.secretKey,null!==(ge=null==ye?void 0:ye.password)&&void 0!==ge?ge:""))){e.next=285;break}return ve=JSON.parse(be)[2],we=ur(ur({},t.transferOpt),{},{senderAccountPrivKey:ve,networkId:ye.networkId}),e.next=281,lr.justTransfer(we);case 281:return e.next=283,Hs.set({isLoading:{opened:!1}});case 283:e.next=286;break;case 285:throw"Incorrect Password.";case 286:return e.abrupt("return",!0);case 287:return ke=t.reqkey,e.next=290,lr.continueErrorTransfer(ke);case 290:return e.abrupt("return",!0);case 291:return _e=t.limit,Se=void 0===_e?5:_e,Oe=t.offset,Me=void 0===Oe?0:Oe,e.next=294,ps.getLastMany(Se,Me);case 294:return Te=e.sent,e.abrupt("return",i(Te));case 296:return xe=t.deleteKey,e.next=299,ps.deleteByKey(xe).then((function(){i(!0)})).catch((function(e){cr.error(e),i(!1)}));case 299:return e.abrupt("return",!0);case 300:return e.next=302,Hs.get();case 302:return Ie=e.sent,e.next=305,mr({networkId:Ie.networkId});case 305:return Ie=e.sent,e.abrupt("return",Hs.set(Ie));case 307:return Ae=t.networkId,e.next=310,n(!0);case 310:return e.next=312,Hs.get();case 312:return Ce=e.sent,e.next=315,gr({networkId:Ae});case 315:return Ce=e.sent,Ne="k:"+Ce.keypairHex.publicKey,e.next=319,Sr(Ne,Ce.networkId);case 319:return Ce.accountDetails=e.sent,Ce.isLoading={opened:!1,text:null},e.abrupt("return",Hs.set(Ce));case 322:return e.next=324,Hs.get();case 324:return Ee=e.sent,e.next=327,mr({idleLimit:Ee.idleLimit});case 327:return Ee=e.sent,e.abrupt("return",Hs(Ee));case 329:return Pe=t.idleLimit,e.next=332,gr({idleLimit:Pe});case 332:return Be=e.sent,e.abrupt("return",Hs.set(Be));case 334:return Mr(),e.abrupt("break",336);case 336:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mr(e,t){var i=Object.keys(e)[0],s=e[i];return gs.getItem(i).then((function(e){var t;return null!==(t=null==e?void 0:e[i])&&void 0!==t?t:s})).catch((function(e){return cr.error("".concat(i,":> "),e),null}))}function gr(t,i){var s=Object.keys(t)[0],r=t[s];return Hs.get().then((function(t){return gs.setItem(s,e({},s,r)).then((function(){return t[s]=r,t}))})).catch((function(e){return cr.error("".concat(s,":> "),e),!1}))}function yr(){return br.apply(this,arguments)}function br(){return(br=s(a().mark((function e(){var t,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fs.getAll();case 2:return i=e.sent,e.abrupt("return",null!==(t=null==i?void 0:i.map((function(e,t){return{text:"k:"+e.key,value:"k:"+e.key,key:t+1}})))&&void 0!==t?t:[]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vr(){return wr.apply(this,arguments)}function wr(){return(wr=s(a().mark((function e(){var t,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ms.getAll();case 2:return i=e.sent,e.abrupt("return",null!==(t=null==i?void 0:i.map((function(e,t){return{text:e.key,value:e.key,key:t+1}})))&&void 0!==t?t:[]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kr(){return _r.apply(this,arguments)}function _r(){return(_r=s(a().mark((function e(){var t,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fs.getAll();case 2:return i=e.sent,e.abrupt("return",null!==(t=null==i?void 0:i.map((function(e){return{publicKey:e.key,secretKey:e.enc,timestamp:e.timestamp,selected:e.selected}})))&&void 0!==t?t:[]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sr(e,t){return Or.apply(this,arguments)}function Or(){return(Or=s(a().mark((function e(t,i){var s,r,n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lr.getAcctDetailsForAllChains(t,i);case 3:return s=e.sent,r=s.reduce((function(e,t,i){var s;return e+(null!==(s=null==t?void 0:t.balance)&&void 0!==s?s:0)}),0),n=s.filter((function(e){return null===e.account})).map((function(e){return e.chainId})),o={details:s,sum:r,nullChainIds:n,accountAddr:t,error:null,networkId:i},e.abrupt("return",o);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){hr.apply(this,arguments)}(),function(){nr.apply(this,arguments)}(),function(){or.apply(this,arguments)}(),chrome.runtime.onInstalled.addListener(s(a().mark((function e(){var t,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=fr(_s),e.next=3,gs.getItem("networkId");case 3:if(e.t2=i=e.sent,e.t1=null===e.t2,e.t1){e.next=7;break}e.t1=void 0===i;case 7:if(!e.t1){e.next=11;break}e.t3=void 0,e.next=12;break;case 11:e.t3=i.networkId;case 12:if(e.t4=t=e.t3,e.t0=null!==e.t4,!e.t0){e.next=16;break}e.t0=void 0!==t;case 16:if(!e.t0){e.next=20;break}e.t5=t,e.next=21;break;case 20:e.t5=s.networkId;case 21:return s.networkId=e.t5,e.next=24,Hs.set(s);case 24:case"end":return e.stop()}}),e)})))),chrome.runtime.onMessage.addListener((function(e,t,i){return function(e){return pr.apply(this,arguments)}(e,t,i).catch((function(e){Hs.set({isLoading:{opened:!1,text:null}})})),!0})),chrome.storage.onChanged.addListener((function(e){var t=Object.keys(e).reduce((function(t,i,s){return t[i]=e[i].newValue,t}),{});chrome.runtime.sendMessage(ur({type:Ss.FMSG_SYNC_BACKGROUND_STATE},t))}));var Mr=function(){var e;e={url:"contentScripts/index.html"},chrome.tabs.create(e,(function(e){var t=setInterval((function(){chrome.tabs.get(e.id,(function(e){"complete"===e.status&&clearInterval(t)}))}))}))}})()})();